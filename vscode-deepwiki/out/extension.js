/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={21:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0,t.sleep=e=>new Promise(t=>setTimeout(t,e))},27:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._convertLangChainToolCallToAnthropic=s,t._convertMessagesToAnthropicPayload=function(e){const t=function(e){const t=[];for(const r of e)if("tool"===r._getType())if("string"==typeof r.content){const e=t[t.length-1];"human"===e?._getType()&&Array.isArray(e.content)&&"type"in e.content[0]&&"tool_result"===e.content[0].type?e.content.push({type:"tool_result",content:r.content,tool_use_id:r.tool_call_id}):t.push(new n.HumanMessage({content:[{type:"tool_result",content:r.content,tool_use_id:r.tool_call_id}]}))}else t.push(new n.HumanMessage({content:[{type:"tool_result",...null!=r.content?{content:l(r)}:{},tool_use_id:r.tool_call_id}]}));else t.push(r);return t}(e);let r;t.length>0&&"system"===t[0]._getType()&&(r=e[0].content);return{messages:c((void 0!==r?t.slice(1):t).map(e=>{let t;if("human"===e._getType())t="user";else if("ai"===e._getType())t="assistant";else{if("tool"!==e._getType())throw"system"===e._getType()?new Error("System messages are only permitted as the first passed message."):new Error(`Message type "${e._getType()}" is not supported.`);t="user"}if((0,n.isAIMessage)(e)&&e.tool_calls?.length){if("string"==typeof e.content)return""===e.content?{role:t,content:e.tool_calls.map(s)}:{role:t,content:[{type:"text",text:e.content},...e.tool_calls.map(s)]};{const{content:r}=e;return!e.tool_calls.every(e=>r.find(t=>("tool_use"===t.type||"input_json_delta"===t.type||"server_tool_use"===t.type)&&t.id===e.id))&&console.warn('The "tool_calls" field on a message is only respected if content is a string.'),{role:t,content:l(e)}}}return{role:t,content:l(e)}})),system:r}};const n=r(6500),a=r(28149);function i(e){const t=(0,n.parseBase64DataUrl)({dataUrl:e});if(t)return{type:"base64",media_type:t.mime_type,data:t.data};let r;try{r=new URL(e)}catch{throw new Error([`Malformed image URL: ${JSON.stringify(e)}. Content blocks of type 'image_url' must be a valid http, https, or base64-encoded data URL.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join("\n\n"))}if("http:"===r.protocol||"https:"===r.protocol)return{type:"url",url:e};throw new Error([`Invalid image URL protocol: ${JSON.stringify(r.protocol)}. Anthropic only supports images as http, https, or base64-encoded data URLs on 'image_url' content blocks.`,"Example: data:image/png;base64,/9j/4AAQSk...","Example: https://example.com/image.jpg"].join("\n\n"))}function s(e){if(void 0===e.id)throw new Error('Anthropic requires all tool calls to have an "id".');return{type:"tool_use",id:e.id,name:e.name,input:e.args}}const o={providerName:"anthropic",fromStandardTextBlock:e=>({type:"text",text:e.text,..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{}}),fromStandardImageBlock(e){if("url"===e.source_type){const t=(0,n.parseBase64DataUrl)({dataUrl:e.url,asTypedArray:!1});return t?{type:"image",source:{type:"base64",data:t.data,media_type:t.mime_type},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{}}:{type:"image",source:{type:"url",url:e.url,media_type:e.mime_type??""},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{}}}if("base64"===e.source_type)return{type:"image",source:{type:"base64",data:e.data,media_type:e.mime_type??""},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{}};throw new Error(`Unsupported image source type: ${e.source_type}`)},fromStandardFileBlock(e){const t=(e.mime_type??"").split(";")[0];if("url"===e.source_type){if("application/pdf"===t||""===t)return{type:"document",source:{type:"url",url:e.url,media_type:e.mime_type??""},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{},..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."context"in(e.metadata??{})?{context:e.metadata.context}:{},..."title"in(e.metadata??{})?{title:e.metadata.title}:{}};throw new Error(`Unsupported file mime type for file url source: ${e.mime_type}`)}if("text"===e.source_type){if("text/plain"===t||""===t)return{type:"document",source:{type:"text",data:e.text,media_type:e.mime_type??""},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{},..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."context"in(e.metadata??{})?{context:e.metadata.context}:{},..."title"in(e.metadata??{})?{title:e.metadata.title}:{}};throw new Error(`Unsupported file mime type for file text source: ${e.mime_type}`)}if("base64"===e.source_type){if("application/pdf"===t||""===t)return{type:"document",source:{type:"base64",data:e.data,media_type:"application/pdf"},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{},..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."context"in(e.metadata??{})?{context:e.metadata.context}:{},..."title"in(e.metadata??{})?{title:e.metadata.title}:{}};if(["image/jpeg","image/png","image/gif","image/webp"].includes(t))return{type:"document",source:{type:"content",content:[{type:"image",source:{type:"base64",data:e.data,media_type:t}}]},..."cache_control"in(e.metadata??{})?{cache_control:e.metadata.cache_control}:{},..."citations"in(e.metadata??{})?{citations:e.metadata.citations}:{},..."context"in(e.metadata??{})?{context:e.metadata.context}:{},..."title"in(e.metadata??{})?{title:e.metadata.title}:{}};throw new Error(`Unsupported file mime type for file base64 source: ${e.mime_type}`)}throw new Error(`Unsupported file source type: ${e.source_type}`)}};function l(e){const t=["tool_use","tool_result","input_json_delta","server_tool_use","web_search_tool_result","web_search_result"],r=["text","text_delta"],{content:s}=e;return"string"==typeof s?s:s.map(s=>{if((0,n.isDataContentBlock)(s))return(0,n.convertToProviderContentBlock)(s,o);const l="cache_control"in s?s.cache_control:void 0;if("image_url"===s.type){let e;return e="string"==typeof s.image_url?i(s.image_url):i(s.image_url.url),{type:"image",source:e,...l?{cache_control:l}:{}}}if((0,a.isAnthropicImageBlockParam)(s))return s;if("document"===s.type)return{...s,...l?{cache_control:l}:{}};if("thinking"===s.type)return{type:"thinking",thinking:s.thinking,signature:s.signature,...l?{cache_control:l}:{}};if("redacted_thinking"===s.type)return{type:"redacted_thinking",data:s.data,...l?{cache_control:l}:{}};if("search_result"===s.type)return{type:"search_result",title:s.title,source:s.source,..."cache_control"in s&&s.cache_control?{cache_control:s.cache_control}:{},..."citations"in s&&s.citations?{citations:s.citations}:{},content:s.content};if(r.find(e=>e===s.type)&&"text"in s)return{type:"text",text:s.text,...l?{cache_control:l}:{},..."citations"in s&&s.citations?{citations:s.citations}:{}};if(t.find(e=>e===s.type)){const e={...s};if("index"in e&&delete e.index,"input_json_delta"===e.type&&(e.type="tool_use"),"input"in e&&"string"==typeof e.input)try{e.input=JSON.parse(e.input)}catch{e.input={}}return{...e,...l?{cache_control:l}:{}}}if("functionCall"in s&&s.functionCall&&"object"==typeof s.functionCall&&(0,n.isAIMessage)(e)){const t=e.tool_calls?.find(e=>e.name===s.functionCall.name);if(!t)throw new Error(`Could not find tool call for function call ${s.functionCall.name}`);return{id:t.id,type:"tool_use",name:t.name,input:s.functionCall.args}}throw new Error("Unsupported message content format")})}function c(e){if(!e||e.length<=1)return e;const t=[];let r=e[0];const n=e=>"string"==typeof e?[{type:"text",text:e}]:e,a=e=>"user"===e.role&&"string"!=typeof e.content&&Array.isArray(e.content)&&e.content.every(e=>"tool_result"===e.type);for(let i=1;i<e.length;i+=1){const s=e[i];a(r)&&a(s)?r={...r,content:[...n(r.content),...n(s.content)]}:(t.push(r),r=s)}return t.push(r),t}},92:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"តួអក្សរ",verb:"គួរមាន"},file:{unit:"បៃ",verb:"គួរមាន"},array:{unit:"ធាតុ",verb:"គួរមាន"},set:{unit:"ធាតុ",verb:"គួរមាន"}};function t(t){return e[t]??null}const r={regex:"ទិន្នន័យបញ្ចូល",email:"អាសយដ្ឋានអ៊ីមែល",url:"URL",emoji:"សញ្ញាអារម្មណ៍",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"កាលបរិច្ឆេទ និងម៉ោង ISO",date:"កាលបរិច្ឆេទ ISO",time:"ម៉ោង ISO",duration:"រយៈពេល ISO",ipv4:"អាសយដ្ឋាន IPv4",ipv6:"អាសយដ្ឋាន IPv6",cidrv4:"ដែនអាសយដ្ឋាន IPv4",cidrv6:"ដែនអាសយដ្ឋាន IPv6",base64:"ខ្សែអក្សរអ៊ិកូដ base64",base64url:"ខ្សែអក្សរអ៊ិកូដ base64url",json_string:"ខ្សែអក្សរ JSON",e164:"លេខ E.164",jwt:"JWT",template_literal:"ទិន្នន័យបញ្ចូល"};return e=>{switch(e.code){case"invalid_type":return`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${e.expected} ប៉ុន្តែទទួលបាន ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"មិនមែនជាលេខ (NaN)":"លេខ";case"object":if(Array.isArray(e))return"អារេ (Array)";if(null===e)return"គ្មានតម្លៃ (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${s.stringifyPrimitive(e.values[0])}`:`ជម្រើសមិនត្រឹមត្រូវ៖ ត្រូវជាមួយក្នុងចំណោម ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`ធំពេក៖ ត្រូវការ ${e.origin??"តម្លៃ"} ${r} ${e.maximum.toString()} ${n.unit??"ធាតុ"}`:`ធំពេក៖ ត្រូវការ ${e.origin??"តម្លៃ"} ${r} ${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`តូចពេក៖ ត្រូវការ ${e.origin} ${r} ${e.minimum.toString()} ${n.unit}`:`តូចពេក៖ ត្រូវការ ${e.origin} ${r} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវចាប់ផ្តើមដោយ "${t.prefix}"`:"ends_with"===t.format?`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវបញ្ចប់ដោយ "${t.suffix}"`:"includes"===t.format?`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវមាន "${t.includes}"`:"regex"===t.format?`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវតែផ្គូផ្គងនឹងទម្រង់ដែលបានកំណត់ ${t.pattern}`:`មិនត្រឹមត្រូវ៖ ${r[t.format]??e.format}`}case"not_multiple_of":return`លេខមិនត្រឹមត្រូវ៖ ត្រូវតែជាពហុគុណនៃ ${e.divisor}`;case"unrecognized_keys":return`រកឃើញសោមិនស្គាល់៖ ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`សោមិនត្រឹមត្រូវនៅក្នុង ${e.origin}`;case"invalid_union":default:return"ទិន្នន័យមិនត្រឹមត្រូវ";case"invalid_element":return`ទិន្នន័យមិនត្រឹមត្រូវនៅក្នុង ${e.origin}`}}}},262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyHeaders=t.buildHeaders=void 0;const n=r(15734),a=Symbol("brand.privateNullableHeaders");function*i(e){if(!e)return;if(a in e){const{values:t,nulls:r}=e;yield*t.entries();for(const e of r)yield[e,null];return}let t,r=!1;e instanceof Headers?t=e.entries():(0,n.isReadonlyArray)(e)?t=e:(r=!0,t=Object.entries(e??{}));for(let e of t){const t=e[0];if("string"!=typeof t)throw new TypeError("expected header name to be a string");const a=(0,n.isReadonlyArray)(e[1])?e[1]:[e[1]];let i=!1;for(const e of a)void 0!==e&&(r&&!i&&(i=!0,yield[t,null]),yield[t,e])}}t.buildHeaders=e=>{const t=new Headers,r=new Set;for(const n of e){const e=new Set;for(const[a,s]of i(n)){const n=a.toLowerCase();e.has(n)||(t.delete(a),e.add(n)),null===s?(t.delete(a),r.add(n)):(t.append(a,s),r.delete(n))}}return{[a]:!0,values:t,nulls:r}},t.isEmptyHeaders=e=>{for(const t of i(e))return!1;return!0}},270:(e,t,r)=>{"use strict";const n=r(53908),a=r(78311);e.exports=(e,t,r)=>{let i=null,s=null,o=null;try{o=new a(t,r)}catch(e){return null}return e.forEach(e=>{o.test(e)&&(i&&1!==s.compare(e)||(i=e,s=new n(i,r)))}),i}},367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Serializable=void 0,t.get_lc_unique_name=s;const n=r(34371);function a(e){return Array.isArray(e)?[...e]:{...e}}function i(e,t){const r=a(e);for(const[e,n]of Object.entries(t)){const[t,...i]=e.split(".").reverse();let s=r;for(const e of i.reverse()){if(void 0===s[e])break;s[e]=a(s[e]),s=s[e]}void 0!==s[t]&&(s[t]={lc:1,type:"secret",id:[n]})}return r}function s(e){const t=Object.getPrototypeOf(e);return"function"!=typeof e.lc_name||"function"==typeof t.lc_name&&e.lc_name()===t.lc_name()?e.name:e.lc_name()}class o{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,s(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),void 0!==this.lc_serializable_keys?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([e])=>this.lc_serializable_keys?.includes(e))):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof o||"object"!=typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},r=Object.keys(this.lc_kwargs).reduce((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e),{});for(let n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n,"lc_aliases",this)),Object.assign(t,Reflect.get(n,"lc_secrets",this)),Object.assign(r,Reflect.get(n,"lc_attributes",this));return Object.keys(t).forEach(e=>{let t=this,n=r;const[a,...i]=e.split(".").reverse();for(const e of i.reverse()){if(!(e in t)||void 0===t[e])return;e in n&&void 0!==n[e]||("object"==typeof t[e]&&null!=t[e]?n[e]={}:Array.isArray(t[e])&&(n[e]=[])),t=t[e],n=n[e]}a in t&&void 0!==t[a]&&(n[a]=n[a]||t[a])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:(0,n.mapKeys)(Object.keys(t).length?i(r,t):r,n.keyToJson,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}t.Serializable=o},403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogStreamCallbackHandler=t.isLogStreamHandler=t.RunLog=t.RunLogPatch=void 0;const n=r(78266),a=r(18233),i=r(28033),s=r(6796);class o{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),r=(0,n.applyPatch)({},t);return new l({ops:t,state:r[r.length-1].newDocument})}}t.RunLogPatch=o;class l extends o{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),r=(0,n.applyPatch)(this.state,e.ops);return new l({ops:t,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const t=(0,n.applyPatch)({},e.ops);return new l({ops:e.ops,state:t[t.length-1].newDocument})}}async function c(e,t){if("original"===t)throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:r}=e;return["retriever","llm","prompt"].includes(e.run_type)?r:1!==Object.keys(r).length||""!==r?.input?r.input:void 0}async function d(e,t){const{outputs:r}=e;return"original"===t||["retriever","llm","prompt"].includes(e.run_type)?r:void 0!==r&&1===Object.keys(r).length&&void 0!==r?.output?r.output:r}t.RunLog=l,t.isLogStreamHandler=e=>"log_stream_tracer"===e.name;class u extends a.BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=i.IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async*tapOutputIterable(e,t){for await(const r of t){if(e!==this.rootId){const t=this.keyMapByRunId[e];t&&await this.writer.write(new o({ops:[{op:"add",path:`/logs/${t}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){if(void 0===this.rootId&&(this.rootId=e.id,await this.writer.write(new o({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===t?e.name:`${e.name}:${t}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};"streaming_events"===this._schemaFormat&&(r.inputs=await c(e,this._schemaFormat)),await this.writer.write(new o({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(void 0===t)return;const r=[];"streaming_events"===this._schemaFormat&&r.push({op:"replace",path:`/logs/${t}/inputs`,value:await c(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${t}/final_output`,value:await d(e,this._schemaFormat)}),void 0!==e.end_time&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const n=new o({ops:r});await this.writer.write(n)}finally{if(e.id===this.rootId){const t=new o({ops:[{op:"replace",path:"/final_output",value:await d(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,r){const n=this.keyMapByRunId[e.id];if(void 0===n)return;let a;var i;void 0!==e.inputs.messages?(i=r?.chunk,a=void 0!==i&&void 0!==i.message?r?.chunk:new s.AIMessageChunk({id:`run-${e.id}`,content:t})):a=t;const l=new o({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${n}/streamed_output/-`,value:a}]});await this.writer.write(l)}}t.LogStreamCallbackHandler=u},446:(e,t)=>{"use strict";function r(...e){const t=globalThis.ReadableStream;if(void 0===t)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFetch=function(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")},t.makeReadableStream=r,t.ReadableStreamFrom=function(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return r({start(){},async pull(e){const{done:r,value:n}=await t.next();r?e.close():e.enqueue(n)},async cancel(){await(t.return?.())}})},t.ReadableStreamToAsyncIterable=function(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}},t.CancelReadableStream=async function(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await(e[Symbol.asyncIterator]().return?.());const t=e.getReader(),r=t.cancel();t.releaseLock(),await r}},513:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function t(t){return e[t]??null}const r={regex:"padrão",email:"endereço de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"duração ISO",ipv4:"endereço IPv4",ipv6:"endereço IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Tipo inválido: esperado ${e.expected}, recebido ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"número";case"object":if(Array.isArray(e))return"array";if(null===e)return"nulo";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Entrada inválida: esperado ${s.stringifyPrimitive(e.values[0])}`:`Opção inválida: esperada uma das ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Muito grande: esperado que ${e.origin??"valor"} tivesse ${r}${e.maximum.toString()} ${n.unit??"elementos"}`:`Muito grande: esperado que ${e.origin??"valor"} fosse ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Muito pequeno: esperado que ${e.origin} tivesse ${r}${e.minimum.toString()} ${n.unit}`:`Muito pequeno: esperado que ${e.origin} fosse ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Texto inválido: deve começar com "${t.prefix}"`:"ends_with"===t.format?`Texto inválido: deve terminar com "${t.suffix}"`:"includes"===t.format?`Texto inválido: deve incluir "${t.includes}"`:"regex"===t.format?`Texto inválido: deve corresponder ao padrão ${t.pattern}`:`${r[t.format]??e.format} inválido`}case"not_multiple_of":return`Número inválido: deve ser múltiplo de ${e.divisor}`;case"unrecognized_keys":return`Chave${e.keys.length>1?"s":""} desconhecida${e.keys.length>1?"s":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Chave inválida em ${e.origin}`;case"invalid_union":return"Entrada inválida";case"invalid_element":return`Valor inválido em ${e.origin}`;default:return"Campo inválido"}}}},550:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDateDef=void 0;const n=r(61973);t.parseDateDef=function e(t,r,n){const i=n??r.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((n,a)=>e(t,r,n))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return a(t,r)}};const a=(e,t)=>{const r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(const a of e.checks)switch(a.kind){case"min":(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t);break;case"max":(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t)}return r}},620:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNeverDef=void 0;const n=r(59160);t.parseNeverDef=function(e){return"openAi"===e.target?void 0:{not:(0,n.parseAnyDef)({...e,currentPath:[...e.currentPath,"not"]})}}},681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha256=t.insecureHash=void 0;var n=r(1685);Object.defineProperty(t,"insecureHash",{enumerable:!0,get:function(){return n.insecureHash}});var a=r(34771);Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return a.sha256}})},773:(e,t)=>{"use strict";let r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.concatBytes=function(e){let t=0;for(const r of e)t+=r.length;const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r},t.encodeUTF8=function(e){let t;return(r??(t=new globalThis.TextEncoder,r=t.encode.bind(t)))(e)},t.decodeUTF8=function(e){let t;return(n??(t=new globalThis.TextDecoder,n=t.decode.bind(t)))(e)}},847:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTracer=t.isBaseTracer=void 0;const n=r(35705);function a(e,t){return e&&!Array.isArray(e)&&"object"==typeof e?e:{[t]:e}}t.isBaseTracer=function(e){return"function"==typeof e._addRunToRunMap};class i extends n.BaseCallbackHandler{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`\n\n${e.stack}`:""):"string"==typeof e?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const t=function(e,t,r){const n=r.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${n}Z`.replace(/[-:.]/g,"")+t}(e.start_time,e.id,e.execution_order),r={...e};if(void 0!==r.parent_run_id){const e=this.runMap.get(r.parent_run_id);e&&(this._addChildRun(e,r),e.child_execution_order=Math.max(e.child_execution_order,r.child_execution_order),r.trace_id=e.trace_id,void 0!==e.dotted_order&&(r.dotted_order=[e.dotted_order,t].join(".")))}else r.trace_id=r.id,r.dotted_order=t;return this.runMap.set(r.id,r),r}async _endTrace(e){const t=void 0!==e.parent_run_id&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await(this.onRunUpdate?.(e))}_getExecutionOrder(e){const t=void 0!==e&&this.runMap.get(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,r,n,a,i,s,o){const l=this._getExecutionOrder(n),c=Date.now(),d=s?{...a,metadata:s}:a,u={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d??{},tags:i||[]};return this._addRunToRunMap(u)}async handleLLMStart(e,t,r,n,a,i,s,o){const l=this.runMap.get(r)??this._createRunForLLMStart(e,t,r,n,a,i,s,o);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}_createRunForChatModelStart(e,t,r,n,a,i,s,o){const l=this._getExecutionOrder(n),c=Date.now(),d=s?{...a,metadata:s}:a,u={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d??{},tags:i||[]};return this._addRunToRunMap(u)}async handleChatModelStart(e,t,r,n,a,i,s,o){const l=this.runMap.get(r)??this._createRunForChatModelStart(e,t,r,n,a,i,s,o);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}async handleLLMEnd(e,t){const r=this.runMap.get(t);if(!r||"llm"!==r?.run_type)throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onLLMEnd?.(r)),await this._endTrace(r),r}async handleLLMError(e,t){const r=this.runMap.get(t);if(!r||"llm"!==r?.run_type)throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onLLMError?.(r)),await this._endTrace(r),r}_createRunForChainStart(e,t,r,n,a,i,s,o){const l=this._getExecutionOrder(n),c=Date.now(),d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:t,execution_order:l,child_execution_order:l,run_type:s??"chain",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};return this._addRunToRunMap(d)}async handleChainStart(e,t,r,n,a,i,s,o){const l=this.runMap.get(r)??this._createRunForChainStart(e,t,r,n,a,i,s,o);return await(this.onRunCreate?.(l)),await(this.onChainStart?.(l)),l}async handleChainEnd(e,t,r,n,i){const s=this.runMap.get(t);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.outputs=a(e,"output"),s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),void 0!==i?.inputs&&(s.inputs=a(i.inputs,"input")),await(this.onChainEnd?.(s)),await this._endTrace(s),s}async handleChainError(e,t,r,n,i){const s=this.runMap.get(t);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),void 0!==i?.inputs&&(s.inputs=a(i.inputs,"input")),await(this.onChainError?.(s)),await this._endTrace(s),s}_createRunForToolStart(e,t,r,n,a,i,s){const o=this._getExecutionOrder(n),l=Date.now(),c={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};return this._addRunToRunMap(c)}async handleToolStart(e,t,r,n,a,i,s){const o=this.runMap.get(r)??this._createRunForToolStart(e,t,r,n,a,i,s);return await(this.onRunCreate?.(o)),await(this.onToolStart?.(o)),o}async handleToolEnd(e,t){const r=this.runMap.get(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onToolEnd?.(r)),await this._endTrace(r),r}async handleToolError(e,t){const r=this.runMap.get(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onToolError?.(r)),await this._endTrace(r),r}async handleAgentAction(e,t){const r=this.runMap.get(t);if(!r||"chain"!==r?.run_type)return;const n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentAction?.(r))}async handleAgentEnd(e,t){const r=this.runMap.get(t);r&&"chain"===r?.run_type&&(r.events.push({name:"agent_end",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentEnd?.(r)))}_createRunForRetrieverStart(e,t,r,n,a,i,s){const o=this._getExecutionOrder(n),l=Date.now(),c={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:t},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,t,r,n,a,i,s){const o=this.runMap.get(r)??this._createRunForRetrieverStart(e,t,r,n,a,i,s);return await(this.onRunCreate?.(o)),await(this.onRetrieverStart?.(o)),o}async handleRetrieverEnd(e,t){const r=this.runMap.get(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverEnd?.(r)),await this._endTrace(r),r}async handleRetrieverError(e,t){const r=this.runMap.get(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverError?.(r)),await this._endTrace(r),r}async handleText(e,t){const r=this.runMap.get(t);r&&"chain"===r?.run_type&&(r.events.push({name:"text",time:(new Date).toISOString(),kwargs:{text:e}}),await(this.onText?.(r)))}async handleLLMNewToken(e,t,r,n,a,i){const s=this.runMap.get(r);if(!s||"llm"!==s?.run_type)throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:(new Date).toISOString(),kwargs:{token:e,idx:t,chunk:i?.chunk}}),await(this.onLLMNewToken?.(s,e,{chunk:i?.chunk})),s}}t.BaseTracer=i},1242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Embeddings=void 0;const n=r(82040),a=r(34701);class i extends n.APIResource{create(e,t){const r=!!e.encoding_format;let n=r?e.encoding_format:"base64";r&&(0,a.loggerFor)(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:n},...t});return r?i:((0,a.loggerFor)(this._client).debug("embeddings/decoding base64 embeddings from base64"),i._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=(0,a.toFloat32Array)(t)}),e)))}}t.Embeddings=i},1253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Audio=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(5113)),s=r(5113),o=n.__importStar(r(33694)),l=r(33694),c=n.__importStar(r(17655)),d=r(17655);class u extends a.APIResource{constructor(){super(...arguments),this.transcriptions=new o.Transcriptions(this._client),this.translations=new c.Translations(this._client),this.speech=new i.Speech(this._client)}}t.Audio=u,u.Transcriptions=l.Transcriptions,u.Translations=d.Translations,u.Speech=s.Speech},1283:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var r={__proto__:t(e)};else r=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r};var t=Object.getPrototypeOf||function(e){return e.__proto__}},1307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIntersectionDef=void 0;const n=r(84769);t.parseIntersectionDef=function(e,t){const r=[(0,n.parseDef)(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),(0,n.parseDef)(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e);let a="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const i=[];return r.forEach(e=>{if("type"in(t=e)&&"string"===t.type||!("allOf"in t)){let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:r,...n}=e;t=n}else a=void 0;i.push(t)}else i.push(...e.allOf),void 0===e.unevaluatedProperties&&(a=void 0);var t}),i.length?{allOf:i,...a}:void 0}},1424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oauth2AuthenticationPolicyName=void 0,t.oauth2AuthenticationPolicy=function(e){return{name:t.oauth2AuthenticationPolicyName,async sendRequest(t,r){var a,i;(0,n.ensureSecureConnection)(t,e);const s=null===(i=null!==(a=t.authSchemes)&&void 0!==a?a:e.authSchemes)||void 0===i?void 0:i.find(e=>"oauth2"===e.kind);if(!s)return r(t);const o=await e.credential.getOAuth2Token(s.flows,{abortSignal:t.abortSignal});return t.headers.set("Authorization",`Bearer ${o}`),r(t)}}};const n=r(10851);t.oauth2AuthenticationPolicyName="oauth2AuthenticationPolicy"},1626:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.RunTree=void 0,t.convertToDottedOrderFormat=g,t.isRunTree=b,t.isRunnableConfigLike=P;const o=s(r(49324)),l=r(71188),c=r(51698),d=r(54103),u=r(58737),p=r(51400),m=r(52990),h=r(51400),f=r(37215);function g(e,t,r=1){const n=r.toFixed(0).slice(0,3).padStart(3,"0"),a=`${new Date(e).toISOString().slice(0,-1)}${n}Z`;return{dottedOrder:(i=a,i.replace(/[-:.]/g,"")+t),microsecondPrecisionDatestring:a};var i}class y{constructor(e,t,r,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t,this.project_name=r,this.replicas=n}static fromHeader(e){const t=e.split(",");let r,n,a={},i=[];for(const e of t){const[t,s]=e.split("="),o=decodeURIComponent(s);"langsmith-metadata"===t?a=JSON.parse(o):"langsmith-tags"===t?i=o.split(","):"langsmith-project"===t?r=o:"langsmith-replicas"===t&&(n=JSON.parse(o))}return new y(a,i,r,n)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class v{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_serialized_start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),b(e))return void Object.assign(this,{...e});const t=v.getDefaultConfig(),{metadata:r,...n}=e,a=n.client??v.getSharedClient(),i={...r,...n?.extra?.metadata};if(n.extra={...n.extra,metadata:i},Object.assign(this,{...t,...n,client:a}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.replicas=(s=this.replicas)?s.map(e=>Array.isArray(e)?{projectName:e[0],updates:e[1]}:e):function(){const e=(0,p.getEnvironmentVariable)("LANGSMITH_RUNS_ENDPOINTS");if(!e)return[];try{const t=JSON.parse(e);if(Array.isArray(t)){const e=[];for(const r of t)"object"==typeof r&&null!==r?"string"==typeof r.api_url?"string"==typeof r.api_key?e.push({apiUrl:r.api_url.replace(/\/$/,""),apiKey:r.api_key}):console.warn("Invalid api_key type in LANGSMITH_RUNS_ENDPOINTS: expected string, got "+typeof r.api_key):console.warn("Invalid api_url type in LANGSMITH_RUNS_ENDPOINTS: expected string, got "+typeof r.api_url):console.warn("Invalid item type in LANGSMITH_RUNS_ENDPOINTS: expected object, got "+typeof r);return e}if("object"==typeof t&&null!==t){!function(e){if(Object.keys(e).length>0&&(0,h.getLangSmithEnvironmentVariable)("ENDPOINT"))throw new d.ConflictingEndpointsError}(t);const e=[];for(const[r,n]of Object.entries(t)){const t=r.replace(/\/$/,"");"string"==typeof n?e.push({apiUrl:t,apiKey:n}):console.warn(`Invalid value type in LANGSMITH_RUNS_ENDPOINTS for URL ${r}: expected string, got `+typeof n)}return e}return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS – must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey, got "+typeof t),[]}catch(e){if((0,d.isConflictingEndpointsError)(e))throw e;return console.warn("Invalid LANGSMITH_RUNS_ENDPOINTS – must be valid JSON array of objects with api_url and api_key properties, or object mapping url->apiKey"),[]}}(),this.execution_order??=1,this.child_execution_order??=1,!this.dotted_order){const{dottedOrder:e,microsecondPrecisionDatestring:t}=g(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e,this._serialized_start_time=t}var s}set metadata(e){this.extra={...this.extra,metadata:{...this.extra?.metadata,...e}}}get metadata(){return this.extra?.metadata}static getDefaultConfig(){return{id:o.v4(),run_type:"chain",project_name:(0,m.getDefaultProjectName)(),child_runs:[],api_url:(0,p.getEnvironmentVariable)("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:(0,p.getEnvironmentVariable)("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return v.sharedClient||(v.sharedClient=new l.Client),v.sharedClient}createChild(e){const t=this.child_execution_order+1,r=new v({...e,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});u._LC_CONTEXT_VARIABLES_KEY in this&&(r[u._LC_CONTEXT_VARIABLES_KEY]=this[u._LC_CONTEXT_VARIABLES_KEY]);const n=Symbol.for("lc:child_config"),a=e.extra?.[n]??this.extra[n];if(P(a)){const e={...a},t="object"==typeof(i=e.callbacks)&&null!=i&&Array.isArray(i.handlers)?e.callbacks.copy?.():void 0;t&&(Object.assign(t,{_parentRunId:r.id}),t.handlers?.find(_)?.updateFromRunTree?.(r),e.callbacks=t),r.extra[n]=e}var i;const s=new Set;let o=this;for(;null!=o&&!s.has(o.id);)s.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,t),o=o.parent_run;return this.child_runs.push(r),r}async end(e,t,r=Date.now(),n){this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??r,n&&Object.keys(n).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...n}}:{metadata:n})}_convertToCreate(e,t,r=!0){const n=e.extra??{};if(void 0===n?.runtime?.library&&(n.runtime||(n.runtime={}),t))for(const[e,r]of Object.entries(t))n.runtime[e]||(n.runtime[e]=r);let a,i;return r?(i=e.parent_run?.id??e.parent_run_id,a=[]):(a=e.child_runs.map(e=>this._convertToCreate(e,t,r)),i=void 0),{id:e.id,name:e.name,start_time:e._serialized_start_time??e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:n,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:a,parent_run_id:i,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_remapForProject(e,t,r=!0){const n=this._convertToCreate(this,t,r);if(e===this.project_name)return n;const a=t=>o.v5(`${t}:${e}`,o.v5.DNS),i=a(n.id),s=n.trace_id?a(n.trace_id):void 0,l=n.parent_run_id?a(n.parent_run_id):void 0;let c;if(n.dotted_order){const e=n.dotted_order.split(".").map(e=>{const t=e.slice(0,-36),r=e.slice(-36),n=parseInt(t.slice(0,4)),a=parseInt(t.slice(4,6))-1,i=parseInt(t.slice(6,8)),s=parseInt(t.slice(9,11)),o=parseInt(t.slice(11,13)),l=parseInt(t.slice(13,15)),c=parseInt(t.slice(15,21));return[new Date(n,a,i,s,o,l,c/1e3),r]}),t=[];for(let r=0;r<e.length-1;r++){const[n,i]=e[r],s=a(i);t.push(n.toISOString().replace(/[-:]/g,"").replace(".","")+s)}const[r]=e[e.length-1];t.push(r.toISOString().replace(/[-:]/g,"").replace(".","")+i),c=t.join(".")}else c=void 0;return{...n,id:i,trace_id:s,parent_run_id:l,dotted_order:c,session_name:e}}async postRun(e=!0){try{const t=(0,p.getRuntimeEnvironment)();if(this.replicas&&this.replicas.length>0)for(const{projectName:e,apiKey:r,apiUrl:n}of this.replicas){const a=this._remapForProject(e??this.project_name,t,!0);await this.client.createRun(a,{apiKey:r,apiUrl:n})}else{const r=this._convertToCreate(this,t,e);await this.client.createRun(r)}if(!e){(0,f.warnOnce)("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const e of this.child_runs)await e.postRun(!1)}}catch(e){console.error(`Error in postRun for run ${this.id}:`,e)}}async patchRun(){if(this.replicas&&this.replicas.length>0)for(const{projectName:e,apiKey:t,apiUrl:r,updates:n}of this.replicas){const a=this._remapForProject(e??this.project_name);await this.client.updateRun(a.id,{inputs:a.inputs,outputs:a.outputs,error:a.error,parent_run_id:a.parent_run_id,session_name:a.session_name,reference_example_id:a.reference_example_id,end_time:a.end_time,dotted_order:a.dotted_order,trace_id:a.trace_id,events:a.events,tags:a.tags,extra:a.extra,attachments:this.attachments,...n},{apiKey:t,apiUrl:r})}else try{const e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:this.parent_run?.id??this.parent_run_id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,e)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),"string"==typeof e?this.events.push({name:"event",time:(new Date).toISOString(),message:e}):this.events.push({...e,time:e.time??(new Date).toISOString()})}static fromRunnableConfig(e,t){const r=e?.callbacks;let n,a,i,s=(0,c.isTracingEnabled)();if(r){const e=r?.getParentRunId?.()??"",t=r?.handlers?.find(e=>"langchain_tracer"==e?.name);n=t?.getRun?.(e),a=t?.projectName,i=t?.client,s=s||!!t}return n?new v({name:n.name,id:n.id,trace_id:n.trace_id,dotted_order:n.dotted_order,client:i,tracingEnabled:s,project_name:a,tags:[...new Set((n?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...n?.extra?.metadata,...e?.metadata}}}).createChild(t):new v({...t,client:i,tracingEnabled:s,project_name:a})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){const r="get"in e&&"function"==typeof e.get?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,n=r["langsmith-trace"];if(!n||"string"!=typeof n)return;const a=n.trim(),i=a.split(".").map(e=>{const[t,r]=e.split("Z");return{strTime:t,time:Date.parse(t+"Z"),uuid:r}}),s=i[0].uuid,o={...t,name:t?.name??"parent",run_type:t?.run_type??"chain",start_time:t?.start_time??Date.now(),id:i.at(-1)?.uuid,trace_id:s,dotted_order:a};if(r.baggage&&"string"==typeof r.baggage){const e=y.fromHeader(r.baggage);o.metadata=e.metadata,o.tags=e.tags,o.project_name=e.project_name,o.replicas=e.replicas}return new v(o)}toHeaders(e){const t={"langsmith-trace":this.dotted_order,baggage:new y(this.extra?.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[r,n]of Object.entries(t))e.set(r,n);return t}}function b(e){return void 0!==e&&"function"==typeof e.createChild&&"function"==typeof e.postRun}function _(e){return"object"==typeof e&&null!=e&&"string"==typeof e.name&&"langchain_tracer"===e.name}function w(e){return Array.isArray(e)&&e.some(e=>_(e))}function P(e){return void 0!==e&&"object"==typeof e.callbacks&&(w(e.callbacks?.handlers)||w(e.callbacks))}t.RunTree=v,Object.defineProperty(v,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null})},1637:(e,t,r)=>{e.exports=r(70784)},1685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insecureHash=void 0;var r="object"==typeof window?window:{},n="0123456789abcdef".split(""),a=[-2147483648,8388608,32768,128],i=[24,16,8,0],s=[];function o(e){e?(s[0]=s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0,this.blocks=s):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}o.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===r.ArrayBuffer&&(e=new Uint8Array(e));for(var n,a,s=0,o=e.length||0,l=this.blocks;s<o;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),t)for(a=this.start;s<o&&a<64;++s)l[a>>2]|=e[s]<<i[3&a++];else for(a=this.start;s<o&&a<64;++s)(n=e.charCodeAt(s))<128?l[a>>2]|=n<<i[3&a++]:n<2048?(l[a>>2]|=(192|n>>6)<<i[3&a++],l[a>>2]|=(128|63&n)<<i[3&a++]):n<55296||n>=57344?(l[a>>2]|=(224|n>>12)<<i[3&a++],l[a>>2]|=(128|n>>6&63)<<i[3&a++],l[a>>2]|=(128|63&n)<<i[3&a++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++s)),l[a>>2]|=(240|n>>18)<<i[3&a++],l[a>>2]|=(128|n>>12&63)<<i[3&a++],l[a>>2]|=(128|n>>6&63)<<i[3&a++],l[a>>2]|=(128|63&n)<<i[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=l[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},o.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=a[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},o.prototype.hash=function(){var e,t,r=this.h0,n=this.h1,a=this.h2,i=this.h3,s=this.h4,o=this.blocks;for(e=16;e<80;++e)t=o[e-3]^o[e-8]^o[e-14]^o[e-16],o[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)r=(t=(n=(t=(a=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n&a|~n&i)+s+1518500249+o[e]|0)<<5|s>>>27)+(r&(n=n<<30|n>>>2)|~r&a)+i+1518500249+o[e+1]|0)<<5|i>>>27)+(s&(r=r<<30|r>>>2)|~s&n)+a+1518500249+o[e+2]|0)<<5|a>>>27)+(i&(s=s<<30|s>>>2)|~i&r)+n+1518500249+o[e+3]|0)<<5|n>>>27)+(a&(i=i<<30|i>>>2)|~a&s)+r+1518500249+o[e+4]|0,a=a<<30|a>>>2;for(;e<40;e+=5)r=(t=(n=(t=(a=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n^a^i)+s+1859775393+o[e]|0)<<5|s>>>27)+(r^(n=n<<30|n>>>2)^a)+i+1859775393+o[e+1]|0)<<5|i>>>27)+(s^(r=r<<30|r>>>2)^n)+a+1859775393+o[e+2]|0)<<5|a>>>27)+(i^(s=s<<30|s>>>2)^r)+n+1859775393+o[e+3]|0)<<5|n>>>27)+(a^(i=i<<30|i>>>2)^s)+r+1859775393+o[e+4]|0,a=a<<30|a>>>2;for(;e<60;e+=5)r=(t=(n=(t=(a=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n&a|n&i|a&i)+s-1894007588+o[e]|0)<<5|s>>>27)+(r&(n=n<<30|n>>>2)|r&a|n&a)+i-1894007588+o[e+1]|0)<<5|i>>>27)+(s&(r=r<<30|r>>>2)|s&n|r&n)+a-1894007588+o[e+2]|0)<<5|a>>>27)+(i&(s=s<<30|s>>>2)|i&r|s&r)+n-1894007588+o[e+3]|0)<<5|n>>>27)+(a&(i=i<<30|i>>>2)|a&s|i&s)+r-1894007588+o[e+4]|0,a=a<<30|a>>>2;for(;e<80;e+=5)r=(t=(n=(t=(a=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n^a^i)+s-899497514+o[e]|0)<<5|s>>>27)+(r^(n=n<<30|n>>>2)^a)+i-899497514+o[e+1]|0)<<5|i>>>27)+(s^(r=r<<30|r>>>2)^n)+a-899497514+o[e+2]|0)<<5|a>>>27)+(i^(s=s<<30|s>>>2)^r)+n-899497514+o[e+3]|0)<<5|n>>>27)+(a^(i=i<<30|i>>>2)^s)+r-899497514+o[e+4]|0,a=a<<30|a>>>2;this.h0=this.h0+r|0,this.h1=this.h1+n|0,this.h2=this.h2+a|0,this.h3=this.h3+i|0,this.h4=this.h4+s|0},o.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,a=this.h3,i=this.h4;return n[e>>28&15]+n[e>>24&15]+n[e>>20&15]+n[e>>16&15]+n[e>>12&15]+n[e>>8&15]+n[e>>4&15]+n[15&e]+n[t>>28&15]+n[t>>24&15]+n[t>>20&15]+n[t>>16&15]+n[t>>12&15]+n[t>>8&15]+n[t>>4&15]+n[15&t]+n[r>>28&15]+n[r>>24&15]+n[r>>20&15]+n[r>>16&15]+n[r>>12&15]+n[r>>8&15]+n[r>>4&15]+n[15&r]+n[a>>28&15]+n[a>>24&15]+n[a>>20&15]+n[a>>16&15]+n[a>>12&15]+n[a>>8&15]+n[a>>4&15]+n[15&a]+n[i>>28&15]+n[i>>24&15]+n[i>>20&15]+n[i>>16&15]+n[i>>12&15]+n[i>>8&15]+n[i>>4&15]+n[15&i]},o.prototype.toString=o.prototype.hex,o.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a]},o.prototype.array=o.prototype.digest,o.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};let l=!1;t.insecureHash=e=>(l||(console.warn(["The default method for hashing keys is insecure and will be replaced in a future version,","but hasn't been replaced yet as to not break existing caches. It's recommended that you use","a more secure hashing algorithm to avoid cache poisoning.","","See this page for more information:","|","└> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm"].join("\n")),l=!0),new o(!0).update(e).hex())},1708:e=>{"use strict";e.exports=require("node:process")},1968:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;const n=r(90309),a=r(96383),i=r(15411),s=r(59592);function o(e){if(!(0,a.validate)(e.id))return e.id;if(!(0,i.isRunnableInterface)(e.data))return e.data.name??"UnknownSchema";try{let t=e.data.getName();return t=t.startsWith("Runnable")?t.slice(8):t,t.length>42&&(t=`${t.substring(0,42)}...`),t}catch(t){return e.data.getName()}}function l(e){return(0,i.isRunnableInterface)(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...(0,n.zodToJsonSchema)(e.data.schema),title:e.data.name}}}t.Graph=class{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]})}toJSON(){const e={};return Object.values(this.nodes).forEach((t,r)=>{e[t.id]=(0,a.validate)(t.id)?r:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...l(t)})),edges:this.edges.map(t=>{const r={source:e[t.source],target:e[t.target]};return void 0!==t.data&&(r.data=t.data),void 0!==t.conditional&&(r.conditional=t.conditional),r})}}addNode(e,t){if(void 0!==t&&void 0!==this.nodes[t])throw new Error(`Node with id ${t} already exists`);const r=t||(0,a.v4)(),n={id:r,data:e};return this.nodes[r]=n,n}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,r,n){if(void 0===this.nodes[e.id])throw new Error(`Source node ${e.id} not in graph`);if(void 0===this.nodes[t.id])throw new Error(`Target node ${t.id} not in graph`);const a={source:e.id,target:t.id,data:r,conditional:n};return this.edges.push(a),a}firstNode(){const e=new Set(this.edges.map(e=>e.target)),t=[];return Object.values(this.nodes).forEach(r=>{e.has(r.id)||t.push(r)}),t[0]}lastNode(){const e=new Set(this.edges.map(e=>e.source)),t=[];return Object.values(this.nodes).forEach(r=>{e.has(r.id)||t.push(r)}),t[0]}extend(e,t=""){let r=t;Object.values(e.nodes).map(e=>e.id).every(a.validate)&&(r="");const n=e=>r?`${r}:${e}`:e;Object.entries(e.nodes).forEach(([e,t])=>{this.nodes[n(e)]={...t,id:n(e)}});const i=e.edges.map(e=>({...e,source:n(e.source),target:n(e.target)}));this.edges=[...this.edges,...i];const s=e.firstNode(),o=e.lastNode();return[s?{id:n(s.id),data:s.data}:void 0,o?{id:n(o.id),data:o.data}:void 0]}trimFirstNode(){const e=this.firstNode();if(e){const t=this.edges.filter(t=>t.source===e.id);1!==Object.keys(this.nodes).length&&1!==t.length||this.removeNode(e)}}trimLastNode(){const e=this.lastNode();if(e){const t=this.edges.filter(t=>t.target===e.id);1!==Object.keys(this.nodes).length&&1!==t.length||this.removeNode(e)}}drawMermaid(e){const{withStyles:t,curveStyle:r,nodeColors:n={start:"#ffdfba",end:"#baffc9",other:"#fad7de"},wrapLabelNWords:a}=e??{},i={};for(const e of Object.values(this.nodes))i[e.id]=o(e);const l=this.firstNode(),c=l?o(l):void 0,d=this.lastNode(),u=d?o(d):void 0;return(0,s.drawMermaid)(i,this.edges,{firstNodeLabel:c,lastNodeLabel:u,withStyles:t,curveStyle:r,nodeColors:n,wrapLabelNWords:a})}async drawMermaidPng(e){const t=this.drawMermaid(e);return(0,s.drawMermaidPng)(t,{backgroundColor:e?.backgroundColor})}}},2151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(59812),a=r(39962);t.default=function(e){const t=(r="string"==typeof e?(0,n.default)(e):e,Uint8Array.of((15&r[3])<<4|r[4]>>4&15,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|15&r[6],r[7],(15&r[1])<<4|(240&r[2])>>4,(15&r[2])<<4|(240&r[3])>>4,16|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?(0,a.unsafeStringify)(t):t}},2203:e=>{"use strict";e.exports=require("stream")},2492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(47984).__exportStar(r(84986),t)},2519:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function t(t){return e[t]??null}const r={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return e=>{switch(e.code){case"invalid_type":return`Ongeldige invoer: verwacht ${e.expected}, ontving ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"getal";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ongeldige invoer: verwacht ${s.stringifyPrimitive(e.values[0])}`:`Ongeldige optie: verwacht één van ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Te lang: verwacht dat ${e.origin??"waarde"} ${r}${e.maximum.toString()} ${n.unit??"elementen"} bevat`:`Te lang: verwacht dat ${e.origin??"waarde"} ${r}${e.maximum.toString()} is`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Te kort: verwacht dat ${e.origin} ${r}${e.minimum.toString()} ${n.unit} bevat`:`Te kort: verwacht dat ${e.origin} ${r}${e.minimum.toString()} is`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ongeldige tekst: moet met "${t.prefix}" beginnen`:"ends_with"===t.format?`Ongeldige tekst: moet op "${t.suffix}" eindigen`:"includes"===t.format?`Ongeldige tekst: moet "${t.includes}" bevatten`:"regex"===t.format?`Ongeldige tekst: moet overeenkomen met patroon ${t.pattern}`:`Ongeldig: ${r[t.format]??e.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${e.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${e.keys.length>1?"s":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${e.origin}`;case"invalid_union":default:return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${e.origin}`}}}},2580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBodyLength=b,t.createNodeHttpClient=function(){return new v};const n=r(31635),a=n.__importStar(r(37067)),i=n.__importStar(r(44708)),s=n.__importStar(r(38522)),o=r(57075),l=r(35001),c=r(18873),d=r(79227),u=r(92425),p=r(37839),m={};function h(e){return e&&"function"==typeof e.pipe}function f(e){return!1===e.readable?Promise.resolve():new Promise(t=>{const r=()=>{t(),e.removeListener("close",r),e.removeListener("end",r),e.removeListener("error",r)};e.on("close",r),e.on("end",r),e.on("error",r)})}function g(e){return e&&"number"==typeof e.byteLength}class y extends o.Transform{_transform(e,t,r){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),r()}catch(e){r(e)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}}class v{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var t,r,n;const a=new AbortController;let i,o;if(e.abortSignal){if(e.abortSignal.aborted)throw new l.AbortError("The operation was aborted. Request has already been canceled.");i=e=>{"abort"===e.type&&a.abort()},e.abortSignal.addEventListener("abort",i)}e.timeout>0&&(o=setTimeout(()=>{const t=new p.Sanitizer;u.logger.info(`request to '${t.sanitizeUrl(e.url)}' timed out. canceling...`),a.abort()},e.timeout));const m=e.headers.get("Accept-Encoding"),g=(null==m?void 0:m.includes("gzip"))||(null==m?void 0:m.includes("deflate"));let v,_="function"==typeof e.body?e.body():e.body;if(_&&!e.headers.has("Content-Length")){const t=b(_);null!==t&&e.headers.set("Content-Length",t)}try{if(_&&e.onUploadProgress){const t=e.onUploadProgress,r=new y(t);r.on("error",e=>{u.logger.error("Error in upload progress",e)}),h(_)?_.pipe(r):r.end(_),_=r}const i=await this.makeRequest(e,a,_);void 0!==o&&clearTimeout(o);const l=function(e){const t=(0,c.createHttpHeaders)();for(const r of Object.keys(e.headers)){const n=e.headers[r];Array.isArray(n)?n.length>0&&t.set(r,n[0]):n&&t.set(r,n)}return t}(i),p={status:null!==(t=i.statusCode)&&void 0!==t?t:0,headers:l,request:e};if("HEAD"===e.method)return i.resume(),p;v=g?function(e,t){const r=t.get("Content-Encoding");if("gzip"===r){const t=s.createGunzip();return e.pipe(t),t}if("deflate"===r){const t=s.createInflate();return e.pipe(t),t}return e}(i,l):i;const m=e.onDownloadProgress;if(m){const e=new y(m);e.on("error",e=>{u.logger.error("Error in download progress",e)}),v.pipe(e),v=e}return(null===(r=e.streamResponseStatusCodes)||void 0===r?void 0:r.has(Number.POSITIVE_INFINITY))||(null===(n=e.streamResponseStatusCodes)||void 0===n?void 0:n.has(p.status))?p.readableStreamBody=v:p.bodyAsText=await(w=v,new Promise((e,t)=>{const r=[];w.on("data",e=>{Buffer.isBuffer(e)?r.push(e):r.push(Buffer.from(e))}),w.on("end",()=>{e(Buffer.concat(r).toString("utf8"))}),w.on("error",e=>{e&&"AbortError"===(null==e?void 0:e.name)?t(e):t(new d.RestError(`Error reading response as text: ${e.message}`,{code:d.RestError.PARSE_ERROR}))})})),p}finally{if(e.abortSignal&&i){let t=Promise.resolve();h(_)&&(t=f(_));let r=Promise.resolve();h(v)&&(r=f(v)),Promise.all([t,r]).then(()=>{var t;i&&(null===(t=e.abortSignal)||void 0===t||t.removeEventListener("abort",i))}).catch(e=>{u.logger.warning("Error when cleaning up abortListener on httpRequest",e)})}}var w}makeRequest(e,t,r){var n;const s=new URL(e.url),o="https:"!==s.protocol;if(o&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);const c=null!==(n=e.agent)&&void 0!==n?n:this.getOrCreateAgent(e,o),p=Object.assign({agent:c,hostname:s.hostname,path:`${s.pathname}${s.search}`,port:s.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((n,s)=>{const c=o?a.request(p,n):i.request(p,n);c.once("error",t=>{var r;s(new d.RestError(t.message,{code:null!==(r=t.code)&&void 0!==r?r:d.RestError.REQUEST_SEND_ERROR,request:e}))}),t.signal.addEventListener("abort",()=>{const e=new l.AbortError("The operation was aborted. Rejecting from abort signal callback while making request.");c.destroy(e),s(e)}),r&&h(r)?r.pipe(c):r?"string"==typeof r||Buffer.isBuffer(r)?c.end(r):g(r)?c.end(ArrayBuffer.isView(r)?Buffer.from(r.buffer):Buffer.from(r)):(u.logger.error("Unrecognized body type",r),s(new d.RestError("Unrecognized body type"))):c.end()})}getOrCreateAgent(e,t){var r;const n=e.disableKeepAlive;if(t)return n?a.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new a.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(n&&!e.tlsSettings)return i.globalAgent;const t=null!==(r=e.tlsSettings)&&void 0!==r?r:m;let a=this.cachedHttpsAgents.get(t);return a&&a.options.keepAlive===!n||(u.logger.info("No cached TLS Agent exist, creating a new Agent"),a=new i.Agent(Object.assign({keepAlive:!n},t)),this.cachedHttpsAgents.set(t,a)),a}}}function b(e){return e?Buffer.isBuffer(e)?e.length:h(e)?null:g(e)?e.byteLength:"string"==typeof e?Buffer.from(e).length:null:0}},2618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;const n=r(84769),a=r(36213),i=r(95346);t.zodToJsonSchema=(e,t)=>{const r=(0,a.getRefs)(t);let s="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,a])=>({...e,[t]:(0,n.parseDef)(a._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??(0,i.parseAnyDef)(r)}),{}):void 0;const o="string"==typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,l=(0,n.parseDef)(e._def,void 0===o?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??(0,i.parseAnyDef)(r),c="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==c&&(l.title=c),r.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[r.openAiAnyTypeName]||(s[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===r.$refStrategy?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));const d=void 0===o?s?{...l,[r.definitionPath]:s}:l:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...s,[o]:l}};return"jsonSchema7"===r.target?d.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==r.target&&"openAi"!==r.target||(d.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in d||"oneOf"in d||"allOf"in d||"type"in d&&Array.isArray(d.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),d}},2682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Threads=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(96059)),s=r(96059),o=n.__importStar(r(41946)),l=r(41946),c=r(262),d=r(18868),u=r(54815);class p extends a.APIResource{constructor(){super(...arguments),this.runs=new o.Runs(this._client),this.messages=new i.Messages(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:(0,c.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(u.path`/threads/${e}`,{...t,headers:(0,c.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(u.path`/threads/${e}`,{body:t,...r,headers:(0,c.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t){return this._client.delete(u.path`/threads/${e}`,{...t,headers:(0,c.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:(0,c.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.id,{thread_id:r.thread_id},t)}createAndRunStream(e,t){return d.AssistantStream.createThreadAssistantStream(e,this._client.beta.threads,t)}}t.Threads=p,p.Runs=l.Runs,p.Messages=s.Messages},2758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyHeaders=t.buildHeaders=void 0;const n=r(80694),a=Symbol.for("brand.privateNullableHeaders");function*i(e){if(!e)return;if(a in e){const{values:t,nulls:r}=e;yield*t.entries();for(const e of r)yield[e,null];return}let t,r=!1;e instanceof Headers?t=e.entries():(0,n.isReadonlyArray)(e)?t=e:(r=!0,t=Object.entries(e??{}));for(let e of t){const t=e[0];if("string"!=typeof t)throw new TypeError("expected header name to be a string");const a=(0,n.isReadonlyArray)(e[1])?e[1]:[e[1]];let i=!1;for(const e of a)void 0!==e&&(r&&!i&&(i=!0,yield[t,null]),yield[t,e])}}t.buildHeaders=e=>{const t=new Headers,r=new Set;for(const n of e){const e=new Set;for(const[a,s]of i(n)){const n=a.toLowerCase();e.has(n)||(t.delete(a),e.add(n)),null===s?(t.delete(a),r.add(n)):(t.append(a,s),r.delete(n))}}return{[a]:!0,values:t,nulls:r}},t.isEmptyHeaders=e=>{for(const t of i(e))return!1;return!0}},2821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventStreamCallbackHandler=t.isStreamEventsHandler=void 0;const n=r(18233),a=r(28033),i=r(6796),s=r(50383);function o({name:e,serialized:t}){return void 0!==e?e:void 0!==t?.name?t.name:void 0!==t?.id&&Array.isArray(t?.id)?t.id[t.id.length-1]:"Unnamed"}t.isStreamEventsHandler=e=>"event_stream_tracer"===e.name;class l extends n.BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=a.IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.runType)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.runType)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async*tapOutputIterable(e,t){const r=await t.next();if(r.done)return;const n=this.runInfoMap.get(e);if(void 0===n)return void(yield r.value);function a(e,t){return"llm"===e&&"string"==typeof t?new s.GenerationChunk({text:t}):t}let i=this.tappedPromises.get(e);if(void 0===i){let s;i=new Promise(e=>{s=e}),this.tappedPromises.set(e,i);try{const i={event:`on_${n.runType}_stream`,run_id:e,name:n.name,tags:n.tags,metadata:n.metadata,data:{}};await this.send({...i,data:{chunk:a(n.runType,r.value)}},n),yield r.value;for await(const e of t)"tool"!==n.runType&&"retriever"!==n.runType&&await this.send({...i,data:{chunk:a(n.runType,e)}},n),yield e}finally{s()}}else{yield r.value;for await(const e of t)yield e}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const r=this.tappedPromises.get(e.run_id);void 0!==r?r.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){const t=o(e),r=void 0!==e.inputs.messages?"chat_model":"llm",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,n);const a=`on_${r}_start`;await this.send({event:a,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onLLMNewToken(e,t,r){const n=this.runInfoMap.get(e.id);let a,o;if(void 0===n)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(1!==this.runInfoMap.size){if("chat_model"===n.runType)o="on_chat_model_stream",a=void 0===r?.chunk?new i.AIMessageChunk({content:t,id:`run-${e.id}`}):r.chunk.message;else{if("llm"!==n.runType)throw new Error(`Unexpected run type ${n.runType}`);o="on_llm_stream",a=void 0===r?.chunk?new s.GenerationChunk({text:t}):r.chunk}await this.send({event:o,data:{chunk:a},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}}async onLLMEnd(e){const t=this.runInfoMap.get(e.id);let r;if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const n=e.outputs?.generations;let a;if("chat_model"===t.runType){for(const e of n??[]){if(void 0!==a)break;a=e[0]?.message}r="on_chat_model_end"}else{if("llm"!==t.runType)throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);a={generations:n?.map(e=>e.map(e=>({text:e.text,generationInfo:e.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},r="on_llm_end"}await this.sendEndEvent({event:r,data:{output:a,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){const t=o(e),r=e.run_type??"chain",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:e.run_type};let a={};""===e.inputs.input&&1===Object.keys(e.inputs).length?(a={},n.inputs={}):void 0!==e.inputs.input?(a.input=e.inputs.input,n.inputs=e.inputs.input):(a.input=e.inputs,n.inputs=e.inputs),this.runInfoMap.set(e.id,n),await this.send({event:`on_${r}_start`,data:a,name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onChainEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,n=e.inputs??t.inputs??{},a={output:e.outputs?.output??e.outputs,input:n};n.input&&1===Object.keys(n).length&&(a.input=n.input,t.inputs=n.input),await this.sendEndEvent({event:r,data:a,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){const t=o(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},r)}async onToolEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(void 0===t.inputs)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=void 0===e.outputs?.output?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){const t=o(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,r),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)}async onRetrieverEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,r){const n=this.runInfoMap.get(r);if(void 0===n)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:n.tags,metadata:n.metadata,data:t},n)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}t.EventStreamCallbackHandler=l},2831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._convertToOpenAITool=function(e,t){let r;return r=(0,n.isLangChainTool)(e)?(0,a.formatToOpenAITool)(e):e,void 0!==t?.strict&&(r.function.strict=t.strict),r};const n=r(30107),a=r(65792)},2902:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleGenerativeAIEmbeddings=void 0;const n=r(46445),a=r(82331),i=r(43598),s=r(39899);class o extends i.Embeddings{constructor(e){if(super(e??{}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"embedding-001"}),Object.defineProperty(this,"taskType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"title",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxBatchSize",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelName=e?.model?.replace(/^models\//,"")??e?.modelName?.replace(/^models\//,"")??this.modelName,this.model=this.modelName,this.taskType=e?.taskType??this.taskType,this.title=e?.title??this.title,this.title&&"RETRIEVAL_DOCUMENT"!==this.taskType)throw new Error("title can only be sepcified with TaskType.RETRIEVAL_DOCUMENT");if(this.apiKey=e?.apiKey??(0,a.getEnvironmentVariable)("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environmentb variable GOOGLE_API_KEY or in the `apiKey` field of the GoogleGenerativeAIEmbeddings constructor");this.client=new n.GoogleGenerativeAI(this.apiKey).getGenerativeModel({model:this.model},{baseUrl:e?.baseUrl})}_convertToContent(e){return{content:{role:"user",parts:[{text:this.stripNewLines?e.replace(/\n/g," "):e}]},taskType:this.taskType,title:this.title}}async _embedQueryContent(e){const t=this._convertToContent(e);return(await this.client.embedContent(t)).embedding.values??[]}async _embedDocumentsContent(e){const t=(0,s.chunkArray)(e,this.maxBatchSize),r=t.map(e=>({requests:e.map(e=>this._convertToContent(e))}));return(await Promise.allSettled(r.map(e=>this.client.batchEmbedContents(e)))).flatMap((e,r)=>"fulfilled"===e.status?e.value.embeddings.map(e=>e.values||[]):Array(t[r].length).fill([]))}embedQuery(e){return this.caller.call(this._embedQueryContent.bind(this),e)}embedDocuments(e){return this.caller.call(this._embedDocumentsContent.bind(this),e)}}t.GoogleGenerativeAIEmbeddings=o},2909:(e,t,r)=>{let n;try{n=r(63735)}catch(e){n=r(79896)}const a=r(41236),{stringify:i,stripBom:s}=r(11144),o={readFile:a.fromPromise(async function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,i=!("throws"in t)||t.throws;let o,l=await a.fromCallback(r.readFile)(e,t);l=s(l);try{o=JSON.parse(l,t?t.reviver:null)}catch(t){if(i)throw t.message=`${e}: ${t.message}`,t;return null}return o}),readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const r=t.fs||n,a=!("throws"in t)||t.throws;try{let n=r.readFileSync(e,t);return n=s(n),JSON.parse(n,t.reviver)}catch(t){if(a)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:a.fromPromise(async function(e,t,r={}){const s=r.fs||n,o=i(t,r);await a.fromCallback(s.writeFile)(e,o,r)}),writeFileSync:function(e,t,r={}){const a=r.fs||n,s=i(t,r);return a.writeFileSync(e,s,r)}};e.exports=o},3061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parts=void 0;const n=r(82040),a=r(12018),i=r(54815);class s extends n.APIResource{create(e,t,r){return this._client.post(i.path`/uploads/${e}/parts`,(0,a.multipartFormRequestOptions)({body:t,...r},this._client))}}t.Parts=s},3189:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHttpHeaders=function(e){return(0,n.createHttpHeaders)(e)};const n=r(26455)},3424:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"எழுத்துக்கள்",verb:"கொண்டிருக்க வேண்டும்"},file:{unit:"பைட்டுகள்",verb:"கொண்டிருக்க வேண்டும்"},array:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"},set:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"}};function t(t){return e[t]??null}const r={regex:"உள்ளீடு",email:"மின்னஞ்சல் முகவரி",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO தேதி நேரம்",date:"ISO தேதி",time:"ISO நேரம்",duration:"ISO கால அளவு",ipv4:"IPv4 முகவரி",ipv6:"IPv6 முகவரி",cidrv4:"IPv4 வரம்பு",cidrv6:"IPv6 வரம்பு",base64:"base64-encoded சரம்",base64url:"base64url-encoded சரம்",json_string:"JSON சரம்",e164:"E.164 எண்",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${e.expected}, பெறப்பட்டது ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"எண் அல்லாதது":"எண்";case"object":if(Array.isArray(e))return"அணி";if(null===e)return"வெறுமை";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${s.stringifyPrimitive(e.values[0])}`:`தவறான விருப்பம்: எதிர்பார்க்கப்பட்டது ${s.joinValues(e.values,"|")} இல் ஒன்று`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${e.origin??"மதிப்பு"} ${r}${e.maximum.toString()} ${n.unit??"உறுப்புகள்"} ஆக இருக்க வேண்டும்`:`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${e.origin??"மதிப்பு"} ${r}${e.maximum.toString()} ஆக இருக்க வேண்டும்`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${e.origin} ${r}${e.minimum.toString()} ${n.unit} ஆக இருக்க வேண்டும்`:`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${e.origin} ${r}${e.minimum.toString()} ஆக இருக்க வேண்டும்`}case"invalid_format":{const t=e;return"starts_with"===t.format?`தவறான சரம்: "${t.prefix}" இல் தொடங்க வேண்டும்`:"ends_with"===t.format?`தவறான சரம்: "${t.suffix}" இல் முடிவடைய வேண்டும்`:"includes"===t.format?`தவறான சரம்: "${t.includes}" ஐ உள்ளடக்க வேண்டும்`:"regex"===t.format?`தவறான சரம்: ${t.pattern} முறைபாட்டுடன் பொருந்த வேண்டும்`:`தவறான ${r[t.format]??e.format}`}case"not_multiple_of":return`தவறான எண்: ${e.divisor} இன் பலமாக இருக்க வேண்டும்`;case"unrecognized_keys":return`அடையாளம் தெரியாத விசை${e.keys.length>1?"கள்":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} இல் தவறான விசை`;case"invalid_union":default:return"தவறான உள்ளீடு";case"invalid_element":return`${e.origin} இல் தவறான மதிப்பு`}}}},3438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__version__=t.overrideFetchImplementation=t.RunTree=t.Client=void 0;var n=r(43658);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return n.Client}});var a=r(11344);Object.defineProperty(t,"RunTree",{enumerable:!0,get:function(){return a.RunTree}});var i=r(8604);Object.defineProperty(t,"overrideFetchImplementation",{enumerable:!0,get:function(){return i.overrideFetchImplementation}}),t.__version__="0.1.68"},3517:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function t(t){return e[t]??null}const r={regex:"entrada",email:"dirección de correo electrónico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duración ISO",ipv4:"dirección IPv4",ipv6:"dirección IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Entrada inválida: se esperaba ${e.expected}, recibido ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"número";case"object":if(Array.isArray(e))return"arreglo";if(null===e)return"nulo";if(Object.getPrototypeOf(e)!==Object.prototype)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Entrada inválida: se esperaba ${s.stringifyPrimitive(e.values[0])}`:`Opción inválida: se esperaba una de ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Demasiado grande: se esperaba que ${e.origin??"valor"} tuviera ${r}${e.maximum.toString()} ${n.unit??"elementos"}`:`Demasiado grande: se esperaba que ${e.origin??"valor"} fuera ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Demasiado pequeño: se esperaba que ${e.origin} tuviera ${r}${e.minimum.toString()} ${n.unit}`:`Demasiado pequeño: se esperaba que ${e.origin} fuera ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Cadena inválida: debe comenzar con "${t.prefix}"`:"ends_with"===t.format?`Cadena inválida: debe terminar en "${t.suffix}"`:"includes"===t.format?`Cadena inválida: debe incluir "${t.includes}"`:"regex"===t.format?`Cadena inválida: debe coincidir con el patrón ${t.pattern}`:`Inválido ${r[t.format]??e.format}`}case"not_multiple_of":return`Número inválido: debe ser múltiplo de ${e.divisor}`;case"unrecognized_keys":return`Llave${e.keys.length>1?"s":""} desconocida${e.keys.length>1?"s":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Llave inválida en ${e.origin}`;case"invalid_union":default:return"Entrada inválida";case"invalid_element":return`Valor inválido en ${e.origin}`}}}},3730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleGenerativeAIToolsOutputParser=void 0;const n=r(58618),a=r(60845);class i extends n.BaseLLMOutputParser{static lc_name(){return"GoogleGenerativeAIToolsOutputParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","google_genai","output_parsers"]}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(void 0===this.zodSchema)return e;const t=await(0,a.interopSafeParseAsync)(this.zodSchema,e);if(t.success)return t.data;throw new n.OutputParserException(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error.issues)}`,JSON.stringify(e,null,2))}async parseResult(e){const t=e.flatMap(e=>{const{message:t}=e;return"tool_calls"in t&&Array.isArray(t.tool_calls)?t.tool_calls:[]});if(void 0===t[0])throw new Error("No parseable tool calls provided to GoogleGenerativeAIToolsOutputParser.");const[r]=t;return await this._validateResult(r.args)}}t.GoogleGenerativeAIToolsOutputParser=i},3928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ollama=void 0;const n=r(79582),a=r(20314),i=r(43246);class s extends a.LLM{static lc_name(){return"Ollama"}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama3"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embeddingOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"f16KV",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitsAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowVram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatEta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatTau",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numBatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCtx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numKeep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numPredict",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numThread",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"penalizeNewline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatLastN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tfsZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"typicalP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMLock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMMap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vocabOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=e?.model??this.model,this.baseUrl=e?.baseUrl?.endsWith("/")?e?.baseUrl.slice(0,-1):e?.baseUrl??this.baseUrl,this.client=new i.Ollama({fetch:e?.fetch,host:this.baseUrl,headers:e?.headers}),this.keepAlive=e?.keepAlive,this.embeddingOnly=e?.embeddingOnly,this.f16KV=e?.f16Kv,this.frequencyPenalty=e?.frequencyPenalty,this.logitsAll=e?.logitsAll,this.lowVram=e?.lowVram,this.mainGpu=e?.mainGpu,this.mirostat=e?.mirostat,this.mirostatEta=e?.mirostatEta,this.mirostatTau=e?.mirostatTau,this.numBatch=e?.numBatch,this.numCtx=e?.numCtx,this.numGpu=e?.numGpu,this.numKeep=e?.numKeep,this.numPredict=e?.numPredict,this.numThread=e?.numThread,this.penalizeNewline=e?.penalizeNewline,this.presencePenalty=e?.presencePenalty,this.repeatLastN=e?.repeatLastN,this.repeatPenalty=e?.repeatPenalty,this.temperature=e?.temperature,this.stop=e?.stop,this.tfsZ=e?.tfsZ,this.topK=e?.topK,this.topP=e?.topP,this.typicalP=e?.typicalP,this.useMLock=e?.useMlock,this.useMMap=e?.useMmap,this.vocabOnly=e?.vocabOnly,this.format=e?.format}_llmType(){return"ollama"}invocationParams(e){return{model:this.model,format:this.format,keep_alive:this.keepAlive,images:e?.images,options:{embedding_only:this.embeddingOnly,f16_kv:this.f16KV,frequency_penalty:this.frequencyPenalty,logits_all:this.logitsAll,low_vram:this.lowVram,main_gpu:this.mainGpu,mirostat:this.mirostat,mirostat_eta:this.mirostatEta,mirostat_tau:this.mirostatTau,num_batch:this.numBatch,num_ctx:this.numCtx,num_gpu:this.numGpu,num_keep:this.numKeep,num_predict:this.numPredict,num_thread:this.numThread,penalize_newline:this.penalizeNewline,presence_penalty:this.presencePenalty,repeat_last_n:this.repeatLastN,repeat_penalty:this.repeatPenalty,temperature:this.temperature,stop:e?.stop??this.stop,tfs_z:this.tfsZ,top_k:this.topK,top_p:this.topP,typical_p:this.typicalP,use_mlock:this.useMLock,use_mmap:this.useMMap,vocab_only:this.vocabOnly}}}async*_streamResponseChunks(e,t,r){const a=await this.caller.call(async()=>this.client.generate({...this.invocationParams(t),prompt:e,stream:!0}));for await(const e of a){if(t.signal?.aborted)throw new Error("This operation was aborted");e.done?yield new n.GenerationChunk({text:"",generationInfo:{model:e.model,total_duration:e.total_duration,load_duration:e.load_duration,prompt_eval_count:e.prompt_eval_count,prompt_eval_duration:e.prompt_eval_duration,eval_count:e.eval_count,eval_duration:e.eval_duration}}):(yield new n.GenerationChunk({text:e.response,generationInfo:{...e,response:void 0}}),await(r?.handleLLMNewToken(e.response??"")))}}async _call(e,t,r){const n=[];for await(const a of this._streamResponseChunks(e,t,r))n.push(a.text);return n.join("")}}t.Ollama=s},4077:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exponentialRetryStrategy=function(e={}){var t,r;const c=null!==(t=e.retryDelayInMs)&&void 0!==t?t:i,d=null!==(r=e.maxRetryDelayInMs)&&void 0!==r?r:s;return{name:"exponentialRetryStrategy",retry({retryCount:t,response:r,responseError:i}){const s=l(i),u=s&&e.ignoreSystemErrors,p=o(r),m=p&&e.ignoreHttpStatusCodes;return r&&((0,a.isThrottlingRetryResponse)(r)||!p)||m||u?{skipStrategy:!0}:!i||s||p?(0,n.calculateRetryDelay)(t,{retryDelayInMs:c,maxRetryDelayInMs:d}):{errorToThrow:i}}}},t.isExponentialRetryResponse=o,t.isSystemError=l;const n=r(48183),a=r(87941),i=1e3,s=64e3;function o(e){return Boolean(e&&void 0!==e.status&&(e.status>=500||408===e.status)&&501!==e.status&&505!==e.status)}function l(e){return!!e&&("ETIMEDOUT"===e.code||"ESOCKETTIMEDOUT"===e.code||"ECONNREFUSED"===e.code||"ECONNRESET"===e.code||"ENOENT"===e.code||"ENOTFOUND"===e.code)}},4131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRecordDef=function(e,t){if("openApi3"===t.target&&e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??{}}),{}),additionalProperties:!1};const r={type:"object",additionalProperties:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.checks?.length){const n=Object.entries((0,i.parseStringDef)(e.keyType._def,t)).reduce((e,[t,r])=>"type"===t?e:{...e,[t]:r},{});return{...r,propertyNames:n}}return e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodEnum?{...r,propertyNames:{enum:e.keyType._def.values}}:r};const n=r(7552),a=r(95445),i=r(38983)},4180:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelablePromiseRace=async function(e,t){var r,n;const a=new AbortController;function i(){a.abort()}null===(r=null==t?void 0:t.abortSignal)||void 0===r||r.addEventListener("abort",i);try{return await Promise.race(e.map(e=>e({abortSignal:a.signal})))}finally{a.abort(),null===(n=null==t?void 0:t.abortSignal)||void 0===n||n.removeEventListener("abort",i)}}},4184:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._areEquals=t.validate=t.validator=t.applyReducer=t.applyPatch=t.applyOperation=t.getValueByPointer=t.deepClone=t.JsonPatchError=void 0;const n=r(62652);t.JsonPatchError=n.PatchError,t.deepClone=n._deepClone;const a={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){let a=s(r,this.path);a&&(a=(0,n._deepClone)(a));const i=o(r,{op:"remove",path:this.from}).removed;return o(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:a}},copy:function(e,t,r){const a=s(r,this.from);return o(r,{op:"add",path:this.path,value:(0,n._deepClone)(a)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:u(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}};var i={add:function(e,t,r){return(0,n.isInteger)(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:a.move,copy:a.copy,test:a.test,_get:a._get};function s(e,t){if(""==t)return e;var r={op:"_get",path:t};return o(e,r),r.value}function o(e,r,o=!1,l=!0,d=!0,p=0){if(o&&("function"==typeof o?o(r,0,e,r.path):c(r,0)),""===r.path){let n={newDocument:e};if("add"===r.op)return n.newDocument=r.value,n;if("replace"===r.op)return n.newDocument=r.value,n.removed=e,n;if("move"===r.op||"copy"===r.op)return n.newDocument=s(e,r.from),"move"===r.op&&(n.removed=e),n;if("test"===r.op){if(n.test=u(e,r.value),!1===n.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",p,r,e);return n.newDocument=e,n}if("remove"===r.op)return n.removed=e,n.newDocument=null,n;if("_get"===r.op)return r.value=e,n;if(o)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",p,r,e);return n}{l||(e=(0,n._deepClone)(e));const s=(r.path||"").split("/");let u,m,h,f=e,g=1,y=s.length;for(h="function"==typeof o?o:c;;){if(m=s[g],m&&-1!=m.indexOf("~")&&(m=(0,n.unescapePathComponent)(m)),d&&("__proto__"==m||"prototype"==m&&g>0&&"constructor"==s[g-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(o&&void 0===u&&(void 0===f[m]?u=s.slice(0,g).join("/"):g==y-1&&(u=r.path),void 0!==u&&h(r,0,e,u)),g++,Array.isArray(f)){if("-"===m)m=f.length;else{if(o&&!(0,n.isInteger)(m))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",p,r,e);(0,n.isInteger)(m)&&(m=~~m)}if(g>=y){if(o&&"add"===r.op&&m>f.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",p,r,e);const n=i[r.op].call(r,f,m,e);if(!1===n.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",p,r,e);return n}}else if(g>=y){const n=a[r.op].call(r,f,m,e);if(!1===n.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",p,r,e);return n}if(f=f[m],o&&g<y&&(!f||"object"!=typeof f))throw new t.JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",p,r,e)}}}function l(e,r,a,i=!0,s=!0){if(a&&!Array.isArray(r))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=(0,n._deepClone)(e));const l=new Array(r.length);for(let t=0,n=r.length;t<n;t++)l[t]=o(e,r[t],a,!0,s,t),e=l[t].newDocument;return l.newDocument=e,l}function c(e,r,i,s){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,e,i);if(!a[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,e,i);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,e,i);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,e,i);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&(0,n.hasUndefined)(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,e,i);if(i)if("add"==e.op){var o=e.path.split("/").length,l=s.split("/").length;if(o!==l+1&&o!==l)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,e,i)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==s)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,e,i)}else if("move"===e.op||"copy"===e.op){var c=d([{op:"_get",path:e.from,value:void 0}],i);if(c&&"OPERATION_PATH_UNRESOLVABLE"===c.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,e,i)}}function d(e,r,a){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)l((0,n._deepClone)(r),(0,n._deepClone)(e),a||!0);else{a=a||c;for(var i=0;i<e.length;i++)a(e[i],i,r,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}function u(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,a,i=Array.isArray(e),s=Array.isArray(t);if(i&&s){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!u(e[r],t[r]))return!1;return!0}if(i!=s)return!1;var o=Object.keys(e);if((n=o.length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!t.hasOwnProperty(o[r]))return!1;for(r=n;0!==r--;)if(!u(e[a=o[r]],t[a]))return!1;return!0}return e!=e&&t!=t}t.getValueByPointer=s,t.applyOperation=o,t.applyPatch=l,t.applyReducer=function(e,r,n){const a=o(e,r);if(!1===a.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",n,r,e);return a.newDocument},t.validator=c,t.validate=d,t._areEquals=u},4304:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAI=void 0;const n=r(32012),a=r(80601),i=r(79582),s=r(82331),o=r(20314),l=r(39899),c=r(81047),d=r(65792);class u extends o.BaseLLM{static lc_name(){return"OpenAI"}get callKeys(){return[...super.callKeys,"options"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo-instruct"}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.apiKey??e?.openAIApiKey??(0,s.getEnvironmentVariable)("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=e?.configuration?.organization??(0,s.getEnvironmentVariable)("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,(this.model?.startsWith("gpt-3.5-turbo")||this.model?.startsWith("gpt-4")||this.model?.startsWith("o1"))&&!this.model?.includes("-instruct"))throw new Error([`Your chosen OpenAI model, "${this.model}", is a chat model and not a text-in/text-out LLM.`,'Passing it into the "OpenAI" class is no longer supported.','Please use the "ChatOpenAI" class instead.',"","See this page for more information:","|","└> https://js.langchain.com/docs/integrations/chat/openai"].join("\n"));if(this.modelName=this.model,this.modelKwargs=e?.modelKwargs??{},this.batchSize=e?.batchSize??this.batchSize,this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.maxTokens=e?.maxTokens??this.maxTokens,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.n=e?.n??this.n,this.bestOf=e?.bestOf??this.bestOf,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.streaming=e?.streaming??!1,this.streaming&&this.bestOf&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration}}invocationParams(e){return{model:this.model,temperature:this.temperature,max_tokens:this.maxTokens,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,n:this.n,best_of:this.bestOf,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,...this.modelKwargs}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}async _generate(e,t,r){const n=(0,l.chunkArray)(e,this.batchSize),i=[],s={},o=this.invocationParams(t);if(-1===o.max_tokens){if(1!==e.length)throw new Error("max_tokens set to -1 not supported for multiple inputs");o.max_tokens=await(0,a.calculateMaxTokens)({prompt:e[0],modelName:this.model})}for(let e=0;e<n.length;e+=1){const a=o.stream?await(async()=>{const a=[];let i;const s=await this.completionWithRetry({...o,stream:!0,prompt:n[e]},t);for await(const e of s){i||(i={id:e.id,object:e.object,created:e.created,model:e.model});for(const t of e.choices){if(a[t.index]){const e=a[t.index];e.text+=t.text,e.finish_reason=t.finish_reason,e.logprobs=t.logprobs}else a[t.index]=t;r?.handleLLMNewToken(t.text,{prompt:Math.floor(t.index/this.n),completion:t.index%this.n})}}if(t.signal?.aborted)throw new Error("AbortError");return{...i,choices:a}})():await this.completionWithRetry({...o,stream:!1,prompt:n[e]},{signal:t.signal,...t.options});i.push(...a.choices);const{completion_tokens:l,prompt_tokens:c,total_tokens:d}=a.usage?a.usage:{completion_tokens:void 0,prompt_tokens:void 0,total_tokens:void 0};l&&(s.completionTokens=(s.completionTokens??0)+l),c&&(s.promptTokens=(s.promptTokens??0)+c),d&&(s.totalTokens=(s.totalTokens??0)+d)}return{generations:(0,l.chunkArray)(i,this.n).map(e=>e.map(e=>({text:e.text??"",generationInfo:{finishReason:e.finish_reason,logprobs:e.logprobs}}))),llmOutput:{tokenUsage:s}}}async*_streamResponseChunks(e,t,r){const n={...this.invocationParams(t),prompt:e,stream:!0},a=await this.completionWithRetry(n,t);for await(const e of a){const t=e?.choices[0];if(!t)continue;const n=new i.GenerationChunk({text:t.text,generationInfo:{finishReason:t.finish_reason}});yield n,r?.handleLLMNewToken(n.text??"")}if(t.signal?.aborted)throw new Error("AbortError")}async completionWithRetry(e,t){const r=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.completions.create(e,r)}catch(e){throw(0,d.wrapOpenAIClientError)(e)}})}_getClientOptions(e){if(!this.client){const e={baseURL:this.clientConfig.baseURL},t=(0,c.getEndpoint)(e),r={...this.clientConfig,baseURL:t,timeout:this.timeout,maxRetries:0};r.baseURL||delete r.baseURL,this.client=new n.OpenAI(r)}return{...this.clientConfig,...e}}_llmType(){return"openai"}}t.OpenAI=u},4423:(e,t,r)=>{"use strict";const n=r(41236).fromPromise;e.exports={copy:n(r(4994)),copySync:r(23876)}},4538:(e,t,r)=>{e.exports=r(37534)},4627:(e,t,r)=>{e.exports=r(85760)},4771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNumberDef=void 0;const n=r(61973);t.parseNumberDef=function(e,t){const r={type:"number"};if(!e.checks)return r;for(const a of e.checks)switch(a.kind){case"int":r.type="integer",(0,n.addErrorMessage)(r,"type",a.message,t);break;case"min":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,t)}return r}},4994:(e,t,r)=>{"use strict";const n=r(98737),a=r(16928),{mkdirs:i}=r(63798),{pathExists:s}=r(29288),{utimesMillis:o}=r(47211),l=r(66462);async function c(e,t,r){return!r.filter||r.filter(e,t)}async function d(e,t,r,i){const s=i.dereference?n.stat:n.lstat,o=await s(t);if(o.isDirectory())return async function(e,t,r,i,s){t||await n.mkdir(i);const o=[];for await(const e of await n.opendir(r)){const t=a.join(r,e.name),n=a.join(i,e.name);o.push(c(t,n,s).then(e=>{if(e)return l.checkPaths(t,n,"copy",s).then(({destStat:e})=>d(e,t,n,s))}))}await Promise.all(o),t||await n.chmod(i,e.mode)}(o,e,t,r,i);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return async function(e,t,r,a,i){if(!t)return u(e,r,a,i);if(i.overwrite)return await n.unlink(a),u(e,r,a,i);if(i.errorOnExist)throw new Error(`'${a}' already exists`)}(o,e,t,r,i);if(o.isSymbolicLink())return async function(e,t,r,i){let s=await n.readlink(t);if(i.dereference&&(s=a.resolve(process.cwd(),s)),!e)return n.symlink(s,r);let o=null;try{o=await n.readlink(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlink(s,r);throw e}if(i.dereference&&(o=a.resolve(process.cwd(),o)),l.isSrcSubdir(s,o))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${o}'.`);if(l.isSrcSubdir(o,s))throw new Error(`Cannot overwrite '${o}' with '${s}'.`);return await n.unlink(r),n.symlink(s,r)}(e,t,r,i);if(o.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(o.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}async function u(e,t,r,a){if(await n.copyFile(t,r),a.preserveTimestamps){128&e.mode||await function(e,t){return n.chmod(e,128|t)}(r,e.mode);const a=await n.stat(t);await o(r,a.atime,a.mtime)}return n.chmod(r,e.mode)}e.exports=async function(e,t,r={}){"function"==typeof r&&(r={filter:r}),r.clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:n,destStat:o}=await l.checkPaths(e,t,"copy",r);if(await l.checkParentPaths(e,n,t,"copy"),!await c(e,t,r))return;const u=a.dirname(t);await s(u)||await i(u),await d(o,e,t,r)}},5104:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolMessageChunk=t.ToolMessage=void 0,a(r(64494),t),a(r(66267),t),a(r(7886),t),a(r(71724),t),a(r(71111),t),a(r(46903),t),a(r(58219),t),a(r(58908),t),a(r(31615),t);var i=r(80202);Object.defineProperty(t,"ToolMessage",{enumerable:!0,get:function(){return i.ToolMessage}}),Object.defineProperty(t,"ToolMessageChunk",{enumerable:!0,get:function(){return i.ToolMessageChunk}})},5113:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Speech=void 0;const n=r(82040),a=r(262);class i extends n.APIResource{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:(0,a.buildHeaders)([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0})}}t.Speech=i},5118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImagePromptValue=t.ChatPromptValue=t.StringPromptValue=t.BasePromptValue=void 0;const n=r(367),a=r(57669),i=r(68081);class s extends n.Serializable{}t.BasePromptValue=s,t.StringPromptValue=class extends s{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new a.HumanMessage(this.value)]}},t.ChatPromptValue=class extends s{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return(0,i.getBufferString)(this.messages)}toChatMessages(){return this.messages}},t.ImagePromptValue=class extends s{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new a.HumanMessage({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}},5272:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RECURSION_LIMIT=void 0,t.getCallbackManagerForConfig=async function(e){return n.CallbackManager._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)},t.mergeConfigs=function(...e){const t={};for(const r of e.filter(e=>!!e))for(const e of Object.keys(r))if("metadata"===e)t[e]={...t[e],...r[e]};else if("tags"===e){const n=t[e]??[];t[e]=[...new Set(n.concat(r[e]??[]))]}else if("configurable"===e)t[e]={...t[e],...r[e]};else if("timeout"===e)void 0===t.timeout?t.timeout=r.timeout:void 0!==r.timeout&&(t.timeout=Math.min(t.timeout,r.timeout));else if("signal"===e)void 0===t.signal?t.signal=r.signal:void 0!==r.signal&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,r.signal]):t.signal=r.signal);else if("callbacks"===e){const e=t.callbacks,a=r.callbacks;if(Array.isArray(a))if(e)if(Array.isArray(e))t.callbacks=e.concat(a);else{const r=e.copy();for(const e of a)r.addHandler((0,n.ensureHandler)(e),!0);t.callbacks=r}else t.callbacks=a;else if(a)if(e)if(Array.isArray(e)){const r=a.copy();for(const t of e)r.addHandler((0,n.ensureHandler)(t),!0);t.callbacks=r}else t.callbacks=new n.CallbackManager(a._parentRunId,{handlers:e.handlers.concat(a.handlers),inheritableHandlers:e.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(e.tags.concat(a.tags))),inheritableTags:Array.from(new Set(e.inheritableTags.concat(a.inheritableTags))),metadata:{...e.metadata,...a.metadata}});else t.callbacks=a}else{const n=e;t[n]=r[n]??t[n]}return t},t.ensureConfig=s,t.patchConfig=function(e={},{callbacks:t,maxConcurrency:r,recursionLimit:n,runName:a,configurable:i,runId:o}={}){const l=s(e);return void 0!==t&&(delete l.runName,l.callbacks=t),void 0!==n&&(l.recursionLimit=n),void 0!==r&&(l.maxConcurrency=r),void 0!==a&&(l.runName=a),void 0!==i&&(l.configurable={...l.configurable,...i}),void 0!==o&&delete l.runId,l},t.pickRunnableConfigKeys=function(e){return e?{configurable:e.configurable,recursionLimit:e.recursionLimit,callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,maxConcurrency:e.maxConcurrency,timeout:e.timeout,signal:e.signal}:void 0};const n=r(31413),a=r(84960);t.DEFAULT_RECURSION_LIMIT=25;const i=new Set(["string","number","boolean"]);function s(e){const t=a.AsyncLocalStorageProviderSingleton.getRunnableConfig();let r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){const{runId:e,runName:n,...a}=t;r=Object.entries(a).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)}if(e&&(r=Object.entries(e).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)),r?.configurable)for(const e of Object.keys(r.configurable))i.has(typeof r.configurable[e])&&!r.metadata?.[e]&&(r.metadata||(r.metadata={}),r.metadata[e]=r.configurable[e]);if(void 0!==r.timeout){if(r.timeout<=0)throw new Error("Timeout must be a positive number");const e=AbortSignal.timeout(r.timeout);void 0!==r.signal?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,e])):r.signal=e,delete r.timeout}return r}},5342:(e,t,r)=>{"use strict";const n=r(97075);e.exports=(e,t,r)=>n(e,t,"<",r)},5542:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"文字",verb:"である"},file:{unit:"バイト",verb:"である"},array:{unit:"要素",verb:"である"},set:{unit:"要素",verb:"である"}};function t(t){return e[t]??null}const r={regex:"入力値",email:"メールアドレス",url:"URL",emoji:"絵文字",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日時",date:"ISO日付",time:"ISO時刻",duration:"ISO期間",ipv4:"IPv4アドレス",ipv6:"IPv6アドレス",cidrv4:"IPv4範囲",cidrv6:"IPv6範囲",base64:"base64エンコード文字列",base64url:"base64urlエンコード文字列",json_string:"JSON文字列",e164:"E.164番号",jwt:"JWT",template_literal:"入力値"};return e=>{switch(e.code){case"invalid_type":return`無効な入力: ${e.expected}が期待されましたが、${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"数値";case"object":if(Array.isArray(e))return"配列";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}が入力されました`;case"invalid_value":return 1===e.values.length?`無効な入力: ${s.stringifyPrimitive(e.values[0])}が期待されました`:`無効な選択: ${s.joinValues(e.values,"、")}のいずれかである必要があります`;case"too_big":{const r=e.inclusive?"以下である":"より小さい",n=t(e.origin);return n?`大きすぎる値: ${e.origin??"値"}は${e.maximum.toString()}${n.unit??"要素"}${r}必要があります`:`大きすぎる値: ${e.origin??"値"}は${e.maximum.toString()}${r}必要があります`}case"too_small":{const r=e.inclusive?"以上である":"より大きい",n=t(e.origin);return n?`小さすぎる値: ${e.origin}は${e.minimum.toString()}${n.unit}${r}必要があります`:`小さすぎる値: ${e.origin}は${e.minimum.toString()}${r}必要があります`}case"invalid_format":{const t=e;return"starts_with"===t.format?`無効な文字列: "${t.prefix}"で始まる必要があります`:"ends_with"===t.format?`無効な文字列: "${t.suffix}"で終わる必要があります`:"includes"===t.format?`無効な文字列: "${t.includes}"を含む必要があります`:"regex"===t.format?`無効な文字列: パターン${t.pattern}に一致する必要があります`:`無効な${r[t.format]??e.format}`}case"not_multiple_of":return`無効な数値: ${e.divisor}の倍数である必要があります`;case"unrecognized_keys":return`認識されていないキー${e.keys.length>1?"群":""}: ${s.joinValues(e.keys,"、")}`;case"invalid_key":return`${e.origin}内の無効なキー`;case"invalid_union":default:return"無効な入力";case"invalid_element":return`${e.origin}内の無効な値`}}}},5603:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbortError=void 0;class r extends Error{constructor(e){super(e),this.name="AbortError"}}t.AbortError=r},5669:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiVersionPolicyName=void 0,t.apiVersionPolicy=function(e){return{name:t.apiVersionPolicyName,sendRequest:(t,r)=>{const n=new URL(t.url);return!n.searchParams.get("api-version")&&e.apiVersion&&(t.url=`${t.url}${Array.from(n.searchParams.keys()).length>0?"&":"?"}api-version=${e.apiVersion}`),r(t)}}},t.apiVersionPolicyName="ApiVersionPolicy"},6117:(e,t)=>{"use strict";let r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.concatBytes=function(e){let t=0;for(const r of e)t+=r.length;const r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r},t.encodeUTF8=function(e){let t;return(r??(t=new globalThis.TextEncoder,r=t.encode.bind(t)))(e)},t.decodeUTF8=function(e){let t;return(n??(t=new globalThis.TextDecoder,n=t.decode.bind(t)))(e)}},6149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Beta=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(92964)),s=r(92964),o=n.__importStar(r(13706)),l=r(13706),c=n.__importStar(r(2682)),d=r(2682);class u extends a.APIResource{constructor(){super(...arguments),this.realtime=new o.Realtime(this._client),this.assistants=new i.Assistants(this._client),this.threads=new c.Threads(this._client)}}t.Beta=u,u.Realtime=l.Realtime,u.Assistants=s.Assistants,u.Threads=d.Threads},6426:(e,t,r)=>{"use strict";const{stringify:n}=r(11144),{outputFile:a}=r(77024);e.exports=async function(e,t,r={}){const i=n(t,r);await a(e,i,r)}},6462:(e,t)=>{"use strict";function r(...e){const t=globalThis.ReadableStream;if(void 0===t)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFetch=function(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")},t.makeReadableStream=r,t.ReadableStreamFrom=function(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return r({start(){},async pull(e){const{done:r,value:n}=await t.next();r?e.close():e.enqueue(n)},async cancel(){await(t.return?.())}})},t.ReadableStreamToAsyncIterable=function(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}},t.CancelReadableStream=async function(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await(e[Symbol.asyncIterator]().return?.());const t=e.getReader(),r=t.cancel();t.releaseLock(),await r}},6500:(e,t,r)=>{e.exports=r(14190)},6585:e=>{var t=1e3,r=60*t,n=60*r,a=24*n,i=7*a;function s(e,t,r,n){var a=t>=1.5*r;return Math.round(e/r)+" "+n+(a?"s":"")}e.exports=function(e,o){o=o||{};var l,c,d=typeof e;if("string"===d&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var o=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return o*i;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*n;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===d&&isFinite(e))return o.long?(l=e,(c=Math.abs(l))>=a?s(l,c,a,"day"):c>=n?s(l,c,n,"hour"):c>=r?s(l,c,r,"minute"):c>=t?s(l,c,t,"second"):l+" ms"):function(e){var i=Math.abs(e);return i>=a?Math.round(e/a)+"d":i>=n?Math.round(e/n)+"h":i>=r?Math.round(e/r)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6645:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpProxyAgent=void 0;const o=i(r(69278)),l=i(r(64756)),c=s(r(45753)),d=r(24434),u=r(20917),p=r(87016),m=(0,c.default)("http-proxy-agent");class h extends u.Agent{constructor(e,t){super(t),this.proxy="string"==typeof e?new p.URL(e):e,this.proxyHeaders=t?.headers??{},m("Creating new HttpProxyAgent instance: %o",this.proxy.href);const r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),n=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={...t?f(t,"headers"):null,host:r,port:n}}addRequest(e,t){e._header=null,this.setRequestProps(e,t),super.addRequest(e,t)}setRequestProps(e,t){const{proxy:r}=this,n=`${t.secureEndpoint?"https:":"http:"}//${e.getHeader("host")||"localhost"}`,a=new p.URL(e.path,n);80!==t.port&&(a.port=String(t.port)),e.path=String(a);const i="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders};if(r.username||r.password){const e=`${decodeURIComponent(r.username)}:${decodeURIComponent(r.password)}`;i["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}i["Proxy-Connection"]||(i["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const t of Object.keys(i)){const r=i[t];r&&e.setHeader(t,r)}}async connect(e,t){let r,n,a;return e._header=null,e.path.includes("://")||this.setRequestProps(e,t),m("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(m("Patching connection write() output buffer with updated header"),r=e.outputData[0].data,n=r.indexOf("\r\n\r\n")+4,e.outputData[0].data=e._header+r.substring(n),m("Output buffer: %o",e.outputData[0].data)),"https:"===this.proxy.protocol?(m("Creating `tls.Socket`: %o",this.connectOpts),a=l.connect(this.connectOpts)):(m("Creating `net.Socket`: %o",this.connectOpts),a=o.connect(this.connectOpts)),await(0,d.once)(a,"connect"),a}}function f(e,...t){const r={};let n;for(n in e)t.includes(n)||(r[n]=e[n]);return r}h.protocols=["http","https"],t.HttpProxyAgent=h},6656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureNamedKeyCredential=void 0,t.isNamedKeyCredential=function(e){return(0,n.isObjectWithProperties)(e,["name","key"])&&"string"==typeof e.key&&"string"==typeof e.name};const n=r(16184);t.AzureNamedKeyCredential=class{get key(){return this._key}get name(){return this._name}constructor(e,t){if(!e||!t)throw new TypeError("name and key must be non-empty strings");this._name=e,this._key=t}update(e,t){if(!e||!t)throw new TypeError("newName and newKey must be non-empty strings");this._name=e,this._key=t}}},6716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(79632).__exportStar(r(58490),t)},6796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AIMessageChunk=t.AIMessage=void 0,t.isAIMessage=function(e){return"ai"===e._getType()},t.isAIMessageChunk=function(e){return"ai"===e._getType()};const n=r(39803),a=r(15785),i=r(53752);class s extends a.BaseMessage{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){let r;if("string"==typeof e)r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t??{}};else{r=e;const t=r.additional_kwargs?.tool_calls,n=r.tool_calls;null!=t&&t.length>0&&(void 0===n||0===n.length)&&console.warn(["New LangChain packages are available that more efficiently handle","tool calling.\n\nPlease upgrade your packages to versions that set","message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(null!=t&&void 0===n){const[e,n]=(0,i.defaultToolCallParser)(t);r.tool_calls=e??[],r.invalid_tool_calls=n??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch(e){r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"string"!=typeof r&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}t.AIMessage=s;class o extends a.BaseMessageChunk{constructor(e){let t;if("string"==typeof e)t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(void 0===e.tool_call_chunks)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:void 0!==e.usage_metadata?e.usage_metadata:void 0};else{const r=e.tool_call_chunks.reduce((e,t)=>{const r=t.id||`fallback-${t.index||0}`;return e[r]=e[r]??[],e[r].push(t),e},{}),a=[],i=[];for(const[e,t]of Object.entries(r)){let r={};const s=t[0]?.name??"",o=t.map(e=>e.args||"").join(""),l=o.length?o:"{}",c=t[0]?.id||e;try{if(r=(0,n.parsePartialJson)(l),null===r||"object"!=typeof r||Array.isArray(r))throw new Error("Malformed tool call chunk args.");a.push({name:s,args:r,id:c,type:"tool_call"})}catch(e){i.push({name:s,args:l,id:c,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:a,invalid_tool_calls:i,usage_metadata:void 0!==e.usage_metadata?e.usage_metadata:void 0}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const t={content:(0,a.mergeContent)(this.content,e.content),additional_kwargs:(0,a._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,a._mergeDicts)(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(void 0!==this.tool_call_chunks||void 0!==e.tool_call_chunks){const r=(0,a._mergeLists)(this.tool_call_chunks,e.tool_call_chunks);void 0!==r&&r.length>0&&(t.tool_call_chunks=r)}if(void 0!==this.usage_metadata||void 0!==e.usage_metadata){const r={...(void 0!==this.usage_metadata?.input_token_details?.audio||void 0!==e.usage_metadata?.input_token_details?.audio)&&{audio:(this.usage_metadata?.input_token_details?.audio??0)+(e.usage_metadata?.input_token_details?.audio??0)},...(void 0!==this.usage_metadata?.input_token_details?.cache_read||void 0!==e.usage_metadata?.input_token_details?.cache_read)&&{cache_read:(this.usage_metadata?.input_token_details?.cache_read??0)+(e.usage_metadata?.input_token_details?.cache_read??0)},...(void 0!==this.usage_metadata?.input_token_details?.cache_creation||void 0!==e.usage_metadata?.input_token_details?.cache_creation)&&{cache_creation:(this.usage_metadata?.input_token_details?.cache_creation??0)+(e.usage_metadata?.input_token_details?.cache_creation??0)}},n={...(void 0!==this.usage_metadata?.output_token_details?.audio||void 0!==e.usage_metadata?.output_token_details?.audio)&&{audio:(this.usage_metadata?.output_token_details?.audio??0)+(e.usage_metadata?.output_token_details?.audio??0)},...(void 0!==this.usage_metadata?.output_token_details?.reasoning||void 0!==e.usage_metadata?.output_token_details?.reasoning)&&{reasoning:(this.usage_metadata?.output_token_details?.reasoning??0)+(e.usage_metadata?.output_token_details?.reasoning??0)}},a=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},i=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},s={input_tokens:a.input_tokens+i.input_tokens,output_tokens:a.output_tokens+i.output_tokens,total_tokens:a.total_tokens+i.total_tokens,...Object.keys(r).length>0&&{input_token_details:r},...Object.keys(n).length>0&&{output_token_details:n}};t.usage_metadata=s}return new o(t)}}t.AIMessageChunk=o},6863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setClientRequestIdPolicyName=void 0,t.setClientRequestIdPolicy=function(e="x-ms-client-request-id"){return{name:t.setClientRequestIdPolicyName,sendRequest:async(t,r)=>(t.headers.has(e)||t.headers.set(e,t.requestId),r(t))}},t.setClientRequestIdPolicyName="setClientRequestIdPolicy"},7048:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multipartPolicyName=void 0,t.multipartPolicy=function(){return{name:t.multipartPolicyName,async sendRequest(e,t){var r;if(!e.multipartBody)return t(e);if(e.body)throw new Error("multipartBody and regular body cannot be set at the same time");let a=e.multipartBody.boundary;const u=null!==(r=e.headers.get("Content-Type"))&&void 0!==r?r:"multipart/mixed",p=u.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!p)throw new Error(`Got multipart request body, but content-type header was not multipart: ${u}`);const[,m,h]=p;if(h&&a&&h!==a)throw new Error(`Multipart boundary was specified as ${h} in the header, but got ${a} in the request body`);return null!=a||(a=h),a?function(e){if(e.length>c)throw new Error(`Multipart boundary "${e}" exceeds maximum length of 70 characters`);if(Array.from(e).some(e=>!d.has(e)))throw new Error(`Multipart boundary "${e}" contains invalid characters`)}(a):a=`----AzSDKFormBoundary${(0,i.randomUUID)()}`,e.headers.set("Content-Type",`${m}; boundary=${a}`),await async function(e,t,r){const a=[(0,n.stringToUint8Array)(`--${r}`,"utf-8"),...t.flatMap(e=>[(0,n.stringToUint8Array)("\r\n","utf-8"),(0,n.stringToUint8Array)(o(e.headers),"utf-8"),(0,n.stringToUint8Array)("\r\n","utf-8"),e.body,(0,n.stringToUint8Array)(`\r\n--${r}`,"utf-8")]),(0,n.stringToUint8Array)("--\r\n\r\n","utf-8")],i=function(e){let t=0;for(const r of e){const e=l(r);if(void 0===e)return;t+=e}return t}(a);i&&e.headers.set("Content-Length",i),e.body=await(0,s.concat)(a)}(e,e.multipartBody.parts,a),e.multipartBody=void 0,t(e)}}};const n=r(47730),a=r(73796),i=r(73476),s=r(72950);function o(e){let t="";for(const[r,n]of e)t+=`${r}: ${n}\r\n`;return t}function l(e){return e instanceof Uint8Array?e.byteLength:(0,a.isBlob)(e)?-1===e.size?void 0:e.size:void 0}t.multipartPolicyName="multipartPolicy";const c=70,d=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?")},7059:(e,t,r)=>{"use strict";const n=r(50560);e.exports=(e,t,r)=>n(e,t,r)<0},7309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullableDef=void 0;const n=r(55767),a=r(75613);t.parseNullableDef=function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:a.primitiveMappings[e.innerType._def.typeName],nullable:!0}:{type:[a.primitiveMappings[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}},7523:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToolsToGenAI=function(e,t){const r=function(e){let t=[];const r=[];e.forEach(e=>{if((0,a.isLangChainTool)(e)){const[r]=(0,s.convertToGenerativeAITools)([e]);r.functionDeclarations&&t.push(...r.functionDeclarations)}else if((0,i.isOpenAITool)(e)){const{functionDeclarations:r}=function(e){return{functionDeclarations:[{name:e.function.name,description:e.function.description,parameters:(0,o.removeAdditionalProperties)(e.function.parameters)}]}}(e);if(!r)throw new Error("Failed to convert OpenAI structured tool to GenerativeAI tool");t.push(...r)}else r.push(e)});return r.find(e=>"functionDeclarations"in e)?r.map(e=>{if(t?.length>0&&"functionDeclarations"in e){const r={functionDeclarations:[...e.functionDeclarations||[],...t]};return t=[],r}return e}):[...r,...t.length>0?[{functionDeclarations:t}]:[]]}(e),l=function(e,t){if(!e.length||!t)return;const{toolChoice:r,allowedFunctionNames:a}=t,i={any:n.FunctionCallingMode.ANY,auto:n.FunctionCallingMode.AUTO,none:n.FunctionCallingMode.NONE};return r&&["any","auto","none"].includes(r)?{functionCallingConfig:{mode:i[r]??"MODE_UNSPECIFIED",allowedFunctionNames:a}}:"string"==typeof r||a?{functionCallingConfig:{mode:n.FunctionCallingMode.ANY,allowedFunctionNames:[...a??[],...r&&"string"==typeof r?[r]:[]]}}:void 0}(r,t);return{tools:r,toolConfig:l}};const n=r(46445),a=r(30107),i=r(80601),s=r(15101),o=r(17729)},7552:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;const o=i(r(79325));t.z=o,s(r(79325),t),t.default=o},7579:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(39962),a=r(60722),i=r(70075);t.default=function(e,t,r){e??={},r??=0;let s=(0,a.default)({...e,_v6:!0},new Uint8Array(16));if(s=(0,i.default)(s),t){for(let e=0;e<16;e++)t[r+e]=s[e];return t}return(0,n.unsafeStringify)(s)}},7615:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncCaller=void 0;const a=n(r(24116)),i=n(r(73290)),s=r(8604),o=[400,401,403,404,405,406,407,408],l=[409];t.AsyncCaller=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,"default"in i.default?this.queue=new i.default.default({concurrency:this.maxConcurrency}):this.queue=new i.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e,...t){const r=this.onFailedResponseHook;return this.queue.add(()=>(0,a.default)(()=>e(...t).catch(e=>{throw e instanceof Error?e:new Error(e)}),{async onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response,n=t?.status;if(n){if(o.includes(+n))throw e;if(l.includes(+n))return;r&&await r(t)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>(0,s._getFetchImplementation)()(...e).then(e=>e.ok?e:Promise.reject(e)))}}},7886:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatMessageChunk=t.ChatMessage=void 0;const n=r(66267);class a extends n.BaseMessage{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return a}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return"generic"===e._getType()}get _printableFields(){return{...super._printableFields,role:this.role}}}t.ChatMessage=a;class i extends n.BaseMessageChunk{static lc_name(){return"ChatMessageChunk"}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}t.ChatMessageChunk=i},7949:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completions=t.Chat=void 0;var n=r(76111);Object.defineProperty(t,"Chat",{enumerable:!0,get:function(){return n.Chat}});var a=r(92773);Object.defineProperty(t,"Completions",{enumerable:!0,get:function(){return a.Completions}})},8194:(e,t,r)=>{e.exports=r(32991)},8247:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8359:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBrandedDef=void 0;const n=r(84769);t.parseBrandedDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},8604:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getFetchImplementation=t.overrideFetchImplementation=void 0;const r=(...e)=>fetch(...e),n=Symbol.for("ls:fetch_implementation");t.overrideFetchImplementation=e=>{globalThis[n]=e},t._getFetchImplementation=()=>globalThis[n]??r},8709:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.castToError=void 0,t.isAbortError=function(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))},t.castToError=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)}},8761:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parsedType=void 0,t.default=function(){return{localeError:o()}};const s=i(r(90523));t.parsedType=e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombro";case"object":if(Array.isArray(e))return"tabelo";if(null===e)return"senvalora";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t};const o=()=>{const e={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function r(t){return e[t]??null}const n={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoĝio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daŭro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return e=>{switch(e.code){case"invalid_type":return`Nevalida enigo: atendiĝis ${e.expected}, riceviĝis ${(0,t.parsedType)(e.input)}`;case"invalid_value":return 1===e.values.length?`Nevalida enigo: atendiĝis ${s.stringifyPrimitive(e.values[0])}`:`Nevalida opcio: atendiĝis unu el ${s.joinValues(e.values,"|")}`;case"too_big":{const t=e.inclusive?"<=":"<",n=r(e.origin);return n?`Tro granda: atendiĝis ke ${e.origin??"valoro"} havu ${t}${e.maximum.toString()} ${n.unit??"elementojn"}`:`Tro granda: atendiĝis ke ${e.origin??"valoro"} havu ${t}${e.maximum.toString()}`}case"too_small":{const t=e.inclusive?">=":">",n=r(e.origin);return n?`Tro malgranda: atendiĝis ke ${e.origin} havu ${t}${e.minimum.toString()} ${n.unit}`:`Tro malgranda: atendiĝis ke ${e.origin} estu ${t}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Nevalida karaktraro: devas komenciĝi per "${t.prefix}"`:"ends_with"===t.format?`Nevalida karaktraro: devas finiĝi per "${t.suffix}"`:"includes"===t.format?`Nevalida karaktraro: devas inkluzivi "${t.includes}"`:"regex"===t.format?`Nevalida karaktraro: devas kongrui kun la modelo ${t.pattern}`:`Nevalida ${n[t.format]??e.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${e.divisor}`;case"unrecognized_keys":return`Nekonata${e.keys.length>1?"j":""} ŝlosilo${e.keys.length>1?"j":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Nevalida ŝlosilo en ${e.origin}`;case"invalid_union":default:return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${e.origin}`}}}},9275:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPipelineFromOptions=function(e){const t=(0,a.createEmptyPipeline)();return d.isNodeLike&&(e.agent&&t.addPolicy((0,p.agentPolicy)(e.agent)),e.tlsOptions&&t.addPolicy((0,m.tlsPolicy)(e.tlsOptions)),t.addPolicy((0,u.proxyPolicy)(e.proxyOptions)),t.addPolicy((0,o.decompressResponsePolicy)())),t.addPolicy((0,c.formDataPolicy)(),{beforePolicies:[h.multipartPolicyName]}),t.addPolicy((0,s.userAgentPolicy)(e.userAgentOptions)),t.addPolicy((0,h.multipartPolicy)(),{afterPhase:"Deserialize"}),t.addPolicy((0,l.defaultRetryPolicy)(e.retryOptions),{phase:"Retry"}),d.isNodeLike&&t.addPolicy((0,i.redirectPolicy)(e.redirectOptions),{afterPhase:"Retry"}),t.addPolicy((0,n.logPolicy)(e.loggingOptions),{afterPhase:"Sign"}),t};const n=r(57198),a=r(90685),i=r(66414),s=r(24608),o=r(71374),l=r(64759),c=r(43936),d=r(25983),u=r(53404),p=r(48493),m=r(88293),h=r(7048)},9485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBigintDef=function(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const a of e.checks)switch(a.kind){case"min":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,t)}return r};const n=r(56705)},9491:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuid4=void 0,t.uuid4=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return t.uuid4=e.randomUUID.bind(e),e.randomUUID();const r=new Uint8Array(1),n=e?()=>e.getRandomValues(r)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))}},9587:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"字元",verb:"擁有"},file:{unit:"位元組",verb:"擁有"},array:{unit:"項目",verb:"擁有"},set:{unit:"項目",verb:"擁有"}};function t(t){return e[t]??null}const r={regex:"輸入",email:"郵件地址",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 日期時間",date:"ISO 日期",time:"ISO 時間",duration:"ISO 期間",ipv4:"IPv4 位址",ipv6:"IPv6 位址",cidrv4:"IPv4 範圍",cidrv6:"IPv6 範圍",base64:"base64 編碼字串",base64url:"base64url 編碼字串",json_string:"JSON 字串",e164:"E.164 數值",jwt:"JWT",template_literal:"輸入"};return e=>{switch(e.code){case"invalid_type":return`無效的輸入值：預期為 ${e.expected}，但收到 ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`無效的輸入值：預期為 ${s.stringifyPrimitive(e.values[0])}`:`無效的選項：預期為以下其中之一 ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`數值過大：預期 ${e.origin??"值"} 應為 ${r}${e.maximum.toString()} ${n.unit??"個元素"}`:`數值過大：預期 ${e.origin??"值"} 應為 ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`數值過小：預期 ${e.origin} 應為 ${r}${e.minimum.toString()} ${n.unit}`:`數值過小：預期 ${e.origin} 應為 ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`無效的字串：必須以 "${t.prefix}" 開頭`:"ends_with"===t.format?`無效的字串：必須以 "${t.suffix}" 結尾`:"includes"===t.format?`無效的字串：必須包含 "${t.includes}"`:"regex"===t.format?`無效的字串：必須符合格式 ${t.pattern}`:`無效的 ${r[t.format]??e.format}`}case"not_multiple_of":return`無效的數字：必須為 ${e.divisor} 的倍數`;case"unrecognized_keys":return`無法識別的鍵值${e.keys.length>1?"們":""}：${s.joinValues(e.keys,"、")}`;case"invalid_key":return`${e.origin} 中有無效的鍵值`;case"invalid_union":default:return"無效的輸入值";case"invalid_element":return`${e.origin} 中有無效的值`}}}},9600:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseOptionalDef=void 0;const n=r(55767),a=r(59160);t.parseOptionalDef=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return(0,n.parseDef)(e.innerType._def,t);const r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:(0,a.parseAnyDef)(t)},r]}:(0,a.parseAnyDef)(t)}},9670:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_POLICY_COUNT=t.SDK_VERSION=void 0,t.SDK_VERSION="1.22.0",t.DEFAULT_RETRY_POLICY_COUNT=3},9687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNumberDef=function(e,t){const r={type:"number"};if(!e.checks)return r;for(const a of e.checks)switch(a.kind){case"int":r.type="integer",(0,n.addErrorMessage)(r,"type",a.message,t);break;case"min":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,t)}return r};const n=r(56705)},9861:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completions=void 0;const n=r(24472),a=r(2758);class i extends n.APIResource{create(e,t){const{betas:r,...n}=e;return this._client.post("/v1/complete",{body:n,timeout:this._client._options.timeout??6e5,...t,headers:(0,a.buildHeaders)([{...null!=r?.toString()?{"anthropic-beta":r?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}t.Completions=i},9970:(e,t,r)=>{"use strict";const n=r(50560);e.exports=(e,t,r)=>n(t,e,r)},10002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redirectPolicyName=void 0,t.redirectPolicy=function(e={}){return(0,n.redirectPolicy)(e)};const n=r(17445);t.redirectPolicyName=n.redirectPolicyName},10311:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTracingClient=function(e){const{namespace:t,packageName:r,packageVersion:i}=e;function s(e,s,o){var l;const c=(0,n.getInstrumenter)().startSpan(e,Object.assign(Object.assign({},o),{packageName:r,packageVersion:i,tracingContext:null===(l=null==s?void 0:s.tracingOptions)||void 0===l?void 0:l.tracingContext}));let d=c.tracingContext;const u=c.span;return d.getValue(a.knownContextKeys.namespace)||(d=d.setValue(a.knownContextKeys.namespace,t)),u.setAttribute("az.namespace",d.getValue(a.knownContextKeys.namespace)),{span:u,updatedOptions:Object.assign({},s,{tracingOptions:Object.assign(Object.assign({},null==s?void 0:s.tracingOptions),{tracingContext:d})})}}function o(e,t,...r){return(0,n.getInstrumenter)().withContext(e,t,...r)}return{startSpan:s,withSpan:async function(e,t,r,n){const{span:a,updatedOptions:i}=s(e,t,n);try{const e=await o(i.tracingOptions.tracingContext,()=>Promise.resolve(r(i,a)));return a.setStatus({status:"success"}),e}catch(e){throw a.setStatus({status:"error",error:e}),e}finally{a.end()}},withContext:o,parseTraceparentHeader:function(e){return(0,n.getInstrumenter)().parseTraceparentHeader(e)},createRequestHeaders:function(e){return(0,n.getInstrumenter)().createRequestHeaders(e)}}};const n=r(42638),a=r(92953)},10348:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formDataPolicyName=void 0,t.formDataPolicy=function(){return(0,n.formDataPolicy)()};const n=r(17445);t.formDataPolicyName=n.formDataPolicyName},10454:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEncoding=o,t.encodingForModel=async function(e){return o((0,n.getEncodingNameForModel)(e))};const n=r(34601),a=r(61583),i={},s=new a.AsyncCaller({});async function o(e){return e in i||(i[e]=s.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(e=>e.json()).then(e=>new n.Tiktoken(e)).catch(t=>{throw delete i[e],t})),await i[e]}},10851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensureSecureConnection=function(e,t){if(!e.url.toLowerCase().startsWith("https://")){if(!function(e,t){if(t.allowInsecureConnection&&e.allowInsecureConnection){const t=new URL(e.url);if("localhost"===t.hostname||"127.0.0.1"===t.hostname)return!0}return!1}(e,t))throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.");!function(){const e="Sending token over insecure transport. Assume any token issued is compromised.";n.logger.warning(e),"function"!=typeof(null===process||void 0===process?void 0:process.emitWarning)||a||(a=!0,process.emitWarning(e))}()}};const n=r(92425);let a=!1},10969:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RunnableToolLike=t.RunnablePick=t.RunnableAssign=t.RunnableWithFallbacks=t.RunnableParallel=t.RunnableLambda=t.RunnableTraceable=t.RunnableMap=t.RunnableSequence=t.RunnableRetry=t.RunnableEach=t.RunnableBinding=t.Runnable=void 0,t._coerceToDict=O,t._coerceToRunnable=N,t.convertRunnableToTool=D;const a=r(19164),i=n(r(24116)),s=r(95766),o=r(27262),l=r(403),c=r(2821),d=r(367),u=r(28033),p=r(65129),m=r(5272),h=r(61583),f=r(82133),g=r(36161),y=r(84960),v=r(43250),b=r(80106),_=r(27504),w=r(86430),P=r(70866);function O(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!=typeof e?{[t]:e}:e}class S extends d.Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new E({bound:this,kwargs:e,config:{}})}map(){return new A({bound:this})}withRetry(e){return new I({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new E({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new x({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(m.ensureConfig);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([e])=>"runId"!==e));return Array.from({length:t},(t,n)=>(0,m.ensureConfig)(0===n?e:r))}return Array.from({length:t},()=>(0,m.ensureConfig)(e))}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),a=n[0]?.maxConcurrency??r?.maxConcurrency,i=new h.AsyncCaller({maxConcurrency:a,onFailedAttempt:e=>{throw e}}),s=e.map((e,t)=>i.call(async()=>{try{return await this.invoke(e,n[t])}catch(e){if(r?.returnExceptions)return e;throw e}}));return Promise.all(s)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this._streamIterator(e,r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}_separateRunnableConfigFromCallOptions(e){let t;t=void 0===e?(0,m.ensureConfig)(e):(0,m.ensureConfig)({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[t,r]}async _callWithConfig(e,t,r){const n=(0,m.ensureConfig)(r),a=await(0,m.getCallbackManagerForConfig)(n),i=await(a?.handleChainStart(this.toJSON(),O(t,"input"),n.runId,n?.runType,void 0,void 0,n?.runName??this.getName()));let s;delete n.runId;try{const a=e.call(this,t,n,i);s=await(0,p.raceWithSignal)(a,r?.signal)}catch(e){throw await(i?.handleChainError(e)),e}return await(i?.handleChainEnd(O(s,"output"))),s}async _batchWithConfig(e,t,r,n){const a=this._getOptionsList(r??{},t.length),i=await Promise.all(a.map(m.getCallbackManagerForConfig)),s=await Promise.all(i.map(async(e,r)=>{const n=await(e?.handleChainStart(this.toJSON(),O(t[r],"input"),a[r].runId,a[r].runType,void 0,void 0,a[r].runName??this.getName()));return delete a[r].runId,n}));let o;try{const r=e.call(this,t,a,s,n);o=await(0,p.raceWithSignal)(r,a?.[0]?.signal)}catch(e){throw await Promise.all(s.map(t=>t?.handleChainError(e))),e}return await Promise.all(s.map(e=>e?.handleChainEnd(O(o,"output")))),o}async*_transformStreamWithConfig(e,t,r){let n,a,i=!0,s=!0;const o=(0,m.ensureConfig)(r),d=await(0,m.getCallbackManagerForConfig)(o);let p;try{const m=await(0,u.pipeGeneratorWithSetup)(t.bind(this),async function*(){for await(const t of e){if(i)if(void 0===n)n=t;else try{n=(0,u.concat)(n,t)}catch{n=void 0,i=!1}yield t}}(),async()=>d?.handleChainStart(this.toJSON(),{input:""},o.runId,o.runType,void 0,void 0,o.runName??this.getName()),r?.signal,o);delete o.runId,p=m.setup;const h=p?.handlers.find(c.isStreamEventsHandler);let f=m.output;void 0!==h&&void 0!==p&&(f=h.tapOutputIterable(p.runId,f));const g=p?.handlers.find(l.isLogStreamHandler);void 0!==g&&void 0!==p&&(f=g.tapOutputIterable(p.runId,f));for await(const e of f)if(yield e,s)if(void 0===a)a=e;else try{a=(0,u.concat)(a,e)}catch{a=void 0,s=!1}}catch(e){throw await(p?.handleChainError(e,void 0,void 0,void 0,{inputs:O(n,"input")})),e}await(p?.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:O(n,"input")}))}getGraph(e){const t=new v.Graph,r=t.addNode({name:`${this.getName()}Input`,schema:a.z.any()}),n=t.addNode(this),i=t.addNode({name:`${this.getName()}Output`,schema:a.z.any()});return t.addEdge(r,n),t.addEdge(n,i),t}pipe(e){return new k({first:this,last:N(e)})}pick(e){return this.pipe(new R(e))}assign(e){return this.pipe(new $(new T({steps:e})))}async*transform(e,t){let r;for await(const t of e)r=void 0===r?t:(0,u.concat)(r,t);yield*this._streamIterator(r,(0,m.ensureConfig)(t))}async*streamLog(e,t,r){const n=new l.LogStreamCallbackHandler({...r,autoClose:!1,_schemaFormat:"original"}),a=(0,m.ensureConfig)(t);yield*this._streamLog(e,n,a)}async*_streamLog(e,t,r){const{callbacks:n}=r;if(void 0===n)r.callbacks=[t];else if(Array.isArray(n))r.callbacks=n.concat([t]);else{const e=n.copy();e.addHandler(t,!0),r.callbacks=e}const a=this.stream(e,r),i=async function(){try{const e=await a;for await(const r of e){const e=new l.RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:r}]});await t.writer.write(e)}}finally{await t.writer.close()}}();try{for await(const e of t)yield e}finally{await i}}streamEvents(e,t,r){let n;if("v1"===t.version)n=this._streamEventsV1(e,t,r);else{if("v2"!==t.version)throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');n=this._streamEventsV2(e,t,r)}return"text/event-stream"===t.encoding?(0,b.convertToHttpEventStream)(n):u.IterableReadableStream.fromAsyncGenerator(n)}async*_streamEventsV2(e,t,r){const n=new c.EventStreamCallbackHandler({...r,autoClose:!1}),a=(0,m.ensureConfig)(t),i=a.runId??(0,s.v4)();a.runId=i;const o=a.callbacks;if(void 0===o)a.callbacks=[n];else if(Array.isArray(o))a.callbacks=o.concat(n);else{const e=o.copy();e.addHandler(n,!0),a.callbacks=e}const l=new AbortController,d=this,u=async function(){let r,s=null;try{t?.signal?"any"in AbortSignal?r=AbortSignal.any([l.signal,t.signal]):(r=t.signal,s=()=>{l.abort()},t.signal.addEventListener("abort",s,{once:!0})):r=l.signal;const o=await d.stream(e,{...a,signal:r}),c=n.tapOutputIterable(i,o);for await(const e of c)if(l.signal.aborted)break}finally{await n.finish(),r&&s&&r.removeEventListener("abort",s)}}();let p,h=!1;try{for await(const t of n)h?(t.run_id===p&&t.event.endsWith("_end")&&t.data?.input&&delete t.data.input,yield t):(t.data.input=e,h=!0,p=t.run_id,yield t)}finally{l.abort(),await u}}async*_streamEventsV1(e,t,r){let n,a=!1;const i=(0,m.ensureConfig)(t),s=i.tags??[],o=i.metadata??{},c=i.runName??this.getName(),d=new l.LogStreamCallbackHandler({...r,autoClose:!1,_schemaFormat:"streaming_events"}),u=new g._RootEventFilter({...r}),p=this._streamLog(e,d,i);for await(const t of p){if(n=n?n.concat(t):l.RunLog.fromRunLogPatch(t),void 0===n.state)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const t={...n.state},r={run_id:t.id,event:`on_${t.type}_start`,name:c,tags:s,metadata:o,data:{input:e}};u.includeEvent(r,t.type)&&(yield r)}const r=t.ops.filter(e=>e.path.startsWith("/logs/")).map(e=>e.path.split("/")[2]),i=[...new Set(r)];for(const e of i){let t,r={};const a=n.state.logs[e];if(t=void 0===a.end_time?a.streamed_output.length>0?"stream":"start":"end","start"===t)void 0!==a.inputs&&(r.input=a.inputs);else if("end"===t)void 0!==a.inputs&&(r.input=a.inputs),r.output=a.final_output;else if("stream"===t){const e=a.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${a.name}"`);r={chunk:a.streamed_output[0]},a.streamed_output=[]}yield{event:`on_${a.type}_${t}`,name:a.name,run_id:a.id,tags:a.tags,metadata:a.metadata,data:r}}const{state:d}=n;if(d.streamed_output.length>0){const e=d.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${d.name}"`);const t={chunk:d.streamed_output[0]};d.streamed_output=[];const r={event:`on_${d.type}_stream`,run_id:d.id,tags:s,metadata:o,name:c,data:t};u.includeEvent(r,d.type)&&(yield r)}}const h=n?.state;if(void 0!==h){const e={event:`on_${h.type}_end`,name:c,run_id:h.id,tags:s,metadata:o,data:{output:h.final_output}};u.includeEvent(e,h.type)&&(yield e)}}static isRunnable(e){return(0,g.isRunnableInterface)(e)}withListeners({onStart:e,onEnd:t,onError:r}){return new E({bound:this,config:{},configFactories:[n=>({callbacks:[new f.RootListenersTracer({config:n,onStart:e,onEnd:t,onError:r})]})]})}asTool(e){return D(this,e)}}t.Runnable=S;class E extends S{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const t=(0,m.mergeConfigs)(this.config,...e);return(0,m.mergeConfigs)(t,...this.configFactories?await Promise.all(this.configFactories.map(async e=>await e(t))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new I({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e?.stopAfterAttempt,...e})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs))}async batch(e,t,r){const n=Array.isArray(t)?await Promise.all(t.map(async e=>this._mergeConfig((0,m.ensureConfig)(e),this.kwargs))):await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs);return this.bound.batch(e,n,r)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs))}streamEvents(e,t,r){const n=this;return u.IterableReadableStream.fromAsyncGenerator(async function*(){yield*n.bound.streamEvents(e,{...await n._mergeConfig((0,m.ensureConfig)(t),n.kwargs),version:t.version},r)}())}static isRunnableBinding(e){return e.bound&&S.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:r}){return new E({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[n=>({callbacks:[new f.RootListenersTracer({config:n,onStart:e,onEnd:t,onError:r})]})]})}}t.RunnableBinding=E;class A extends S{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new A({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _invoke(e,t,r){return this.bound.batch(e,(0,m.patchConfig)(t,{callbacks:r?.getChild()}))}withListeners({onStart:e,onEnd:t,onError:r}){return new A({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:r})})}}t.RunnableEach=A;class I extends E{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){const n=e>1?`retry:attempt:${e}`:void 0;return(0,m.patchConfig)(t,{callbacks:r?.getChild(n)})}async _invoke(e,t,r){return(0,i.default)(n=>super.invoke(e,this._patchConfigForRetry(n,t,r)),{onFailedAttempt:t=>this.onFailedAttempt(t,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,r,n){const a={};try{await(0,i.default)(async i=>{const s=e.map((e,t)=>t).filter(e=>void 0===a[e.toString()]||a[e.toString()]instanceof Error),o=s.map(t=>e[t]),l=s.map(e=>this._patchConfigForRetry(i,t?.[e],r?.[e])),c=await super.batch(o,l,{...n,returnExceptions:!0});let d;for(let e=0;e<c.length;e+=1){const t=c[e],r=s[e];t instanceof Error&&void 0===d&&(d=t,d.input=o[e]),a[r.toString()]=t}if(d)throw d;return c},{onFailedAttempt:e=>this.onFailedAttempt(e,e.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(e){if(!0!==n?.returnExceptions)throw e}return Object.keys(a).sort((e,t)=>parseInt(e,10)-parseInt(t,10)).map(e=>a[parseInt(e,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}}t.RunnableRetry=I;class k extends S{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){const r=(0,m.ensureConfig)(t),n=await(0,m.getCallbackManagerForConfig)(r),a=await(n?.handleChainStart(this.toJSON(),O(e,"input"),r.runId,void 0,void 0,void 0,r?.runName));delete r.runId;let i,s=e;try{const e=[this.first,...this.middle];for(let n=0;n<e.length;n+=1){const i=e[n].invoke(s,(0,m.patchConfig)(r,{callbacks:a?.getChild(this.omitSequenceTags?void 0:`seq:step:${n+1}`)}));s=await(0,p.raceWithSignal)(i,t?.signal)}if(t?.signal?.aborted)throw new Error("Aborted");i=await this.last.invoke(s,(0,m.patchConfig)(r,{callbacks:a?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(e){throw await(a?.handleChainError(e)),e}return await(a?.handleChainEnd(O(i,"output"))),i}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),a=await Promise.all(n.map(m.getCallbackManagerForConfig)),i=await Promise.all(a.map(async(t,r)=>{const a=await(t?.handleChainStart(this.toJSON(),O(e[r],"input"),n[r].runId,void 0,void 0,void 0,n[r].runName));return delete n[r].runId,a}));let s=e;try{for(let e=0;e<this.steps.length;e+=1){const t=this.steps[e].batch(s,i.map((t,r)=>{const a=t?.getChild(this.omitSequenceTags?void 0:`seq:step:${e+1}`);return(0,m.patchConfig)(n[r],{callbacks:a})}),r);s=await(0,p.raceWithSignal)(t,n[0]?.signal)}}catch(e){throw await Promise.all(i.map(t=>t?.handleChainError(e))),e}return await Promise.all(i.map(e=>e?.handleChainEnd(O(s,"output")))),s}async*_streamIterator(e,t){const r=await(0,m.getCallbackManagerForConfig)(t),{runId:n,...a}=t??{},i=await(r?.handleChainStart(this.toJSON(),O(e,"input"),n,void 0,void 0,void 0,a?.runName)),s=[this.first,...this.middle,this.last];let o,l=!0;try{let r=s[0].transform(async function*(){yield e}(),(0,m.patchConfig)(a,{callbacks:i?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let e=1;e<s.length;e+=1){const t=s[e];r=await t.transform(r,(0,m.patchConfig)(a,{callbacks:i?.getChild(this.omitSequenceTags?void 0:`seq:step:${e+1}`)}))}for await(const e of r)if(t?.signal?.throwIfAborted(),yield e,l)if(void 0===o)o=e;else try{o=(0,u.concat)(o,e)}catch(e){o=void 0,l=!1}}catch(e){throw await(i?.handleChainError(e)),e}await(i?.handleChainEnd(O(o,"output")))}getGraph(e){const t=new v.Graph;let r=null;return this.steps.forEach((n,a)=>{const i=n.getGraph(e);0!==a&&i.trimFirstNode(),a!==this.steps.length-1&&i.trimLastNode(),t.extend(i);const s=i.firstNode();if(!s)throw new Error(`Runnable ${n} has no first node`);r&&t.addEdge(r,s),r=i.lastNode()}),t}pipe(e){return k.isRunnableSequence(e)?new k({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new k({first:this.first,middle:[...this.middle,this.last],last:N(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&S.isRunnable(e)}static from([e,...t],r){let n={};return"string"==typeof r?n.name=r:void 0!==r&&(n=r),new k({...n,first:N(e),middle:t.slice(0,-1).map(N),last:N(t[t.length-1])})}}t.RunnableSequence=k;class T extends S{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,r]of Object.entries(e.steps))this.steps[t]=N(r)}static from(e){return new T({steps:e})}async invoke(e,t){const r=(0,m.ensureConfig)(t),n=await(0,m.getCallbackManagerForConfig)(r),a=await(n?.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r?.runName));delete r.runId;const i={};try{const n=Object.entries(this.steps).map(async([t,n])=>{i[t]=await n.invoke(e,(0,m.patchConfig)(r,{callbacks:a?.getChild(`map:key:${t}`)}))});await(0,p.raceWithSignal)(Promise.all(n),t?.signal)}catch(e){throw await(a?.handleChainError(e)),e}return await(a?.handleChainEnd(i)),i}async*_transform(e,t,r){const n={...this.steps},a=(0,u.atee)(e,Object.keys(n).length),i=new Map(Object.entries(n).map(([e,n],i)=>{const s=n.transform(a[i],(0,m.patchConfig)(r,{callbacks:t?.getChild(`map:key:${e}`)}));return[e,s.next().then(t=>({key:e,gen:s,result:t}))]}));for(;i.size;){const e=Promise.race(i.values()),{key:t,result:n,gen:a}=await(0,p.raceWithSignal)(e,r?.signal);i.delete(t),n.done||(yield{[t]:n.value},i.set(t,a.next().then(e=>({key:t,gen:a,result:e}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}}t.RunnableMap=T;class j extends S{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!(0,o.isTraceableFunction)(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){const[r]=this._getOptionsList(t??{},1),n=await(0,m.getCallbackManagerForConfig)(r),a=this.func((0,m.patchConfig)(r,{callbacks:n}),e);return(0,p.raceWithSignal)(a,r?.signal)}async*_streamIterator(e,t){const[r]=this._getOptionsList(t??{},1),n=await this.invoke(e,t);if((0,_.isAsyncIterable)(n))for await(const e of n)r?.signal?.throwIfAborted(),yield e;else if((0,_.isIterator)(n))for(;;){r?.signal?.throwIfAborted();const e=n.next();if(e.done)break;yield e.value}else yield n}static from(e){return new j({func:e})}}t.RunnableTraceable=j;class C extends S{static lc_name(){return"RunnableLambda"}constructor(e){if((0,o.isTraceableFunction)(e.func))return j.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),function(e){if((0,o.isTraceableFunction)(e))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}(e.func),this.func=e.func}static from(e){return new C({func:e})}async _invoke(e,t,r){return new Promise((n,a)=>{const i=(0,m.patchConfig)(t,{callbacks:r?.getChild(),recursionLimit:(t?.recursionLimit??m.DEFAULT_RECURSION_LIMIT)-1});y.AsyncLocalStorageProviderSingleton.runWithConfig((0,m.pickRunnableConfigKeys)(i),async()=>{try{let r=await this.func(e,{...i});if(r&&S.isRunnable(r)){if(0===t?.recursionLimit)throw new Error("Recursion limit reached.");r=await r.invoke(e,{...i,recursionLimit:(i.recursionLimit??m.DEFAULT_RECURSION_LIMIT)-1})}else if((0,_.isAsyncIterable)(r)){let e;for await(const n of(0,_.consumeAsyncIterableInContext)(i,r))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=(0,u.concat)(e,n)}catch(t){e=n}r=e}else if((0,_.isIterableIterator)(r)){let e;for(const n of(0,_.consumeIteratorInContext)(i,r))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=(0,u.concat)(e,n)}catch(t){e=n}r=e}n(r)}catch(e){a(e)}})})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async*_transform(e,t,r){let n;for await(const t of e)if(void 0===n)n=t;else try{n=(0,u.concat)(n,t)}catch(e){n=t}const a=(0,m.patchConfig)(r,{callbacks:t?.getChild(),recursionLimit:(r?.recursionLimit??m.DEFAULT_RECURSION_LIMIT)-1}),i=await new Promise((e,t)=>{y.AsyncLocalStorageProviderSingleton.runWithConfig((0,m.pickRunnableConfigKeys)(a),async()=>{try{const t=await this.func(n,{...a,config:a});e(t)}catch(e){t(e)}})});if(i&&S.isRunnable(i)){if(0===r?.recursionLimit)throw new Error("Recursion limit reached.");const e=await i.stream(n,a);for await(const t of e)yield t}else if((0,_.isAsyncIterable)(i))for await(const e of(0,_.consumeAsyncIterableInContext)(a,i))r?.signal?.throwIfAborted(),yield e;else if((0,_.isIterableIterator)(i))for(const e of(0,_.consumeIteratorInContext)(a,i))r?.signal?.throwIfAborted(),yield e;else yield i}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}}t.RunnableLambda=C,t.RunnableParallel=class extends T{};class x extends S{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const r=(0,m.ensureConfig)(t),n=await(0,m.getCallbackManagerForConfig)(r),{runId:a,...i}=r,s=await(n?.handleChainStart(this.toJSON(),O(e,"input"),a,void 0,void 0,void 0,i?.runName)),o=(0,m.patchConfig)(i,{callbacks:s?.getChild()});return await y.AsyncLocalStorageProviderSingleton.runWithConfig(o,async()=>{let t;for(const n of this.runnables()){r?.signal?.throwIfAborted();try{const t=await n.invoke(e,o);return await(s?.handleChainEnd(O(t,"output"))),t}catch(e){void 0===t&&(t=e)}}if(void 0===t)throw new Error("No error stored at end of fallback.");throw await(s?.handleChainError(t)),t})}async*_streamIterator(e,t){const r=(0,m.ensureConfig)(t),n=await(0,m.getCallbackManagerForConfig)(r),{runId:a,...i}=r,s=await(n?.handleChainStart(this.toJSON(),O(e,"input"),a,void 0,void 0,void 0,i?.runName));let o,l,c;for(const t of this.runnables()){r?.signal?.throwIfAborted();const n=(0,m.patchConfig)(i,{callbacks:s?.getChild()});try{const r=await t.stream(e,n);l=(0,_.consumeAsyncIterableInContext)(n,r);break}catch(e){void 0===o&&(o=e)}}if(void 0===l){const e=o??new Error("No error stored at end of fallback.");throw await(s?.handleChainError(e)),e}try{for await(const e of l){yield e;try{c=void 0===c?c:(0,u.concat)(c,e)}catch(e){c=void 0}}}catch(e){throw await(s?.handleChainError(e)),e}await(s?.handleChainEnd(O(c,"output")))}async batch(e,t,r){if(r?.returnExceptions)throw new Error("Not implemented.");const n=this._getOptionsList(t??{},e.length),a=await Promise.all(n.map(e=>(0,m.getCallbackManagerForConfig)(e))),i=await Promise.all(a.map(async(t,r)=>{const a=await(t?.handleChainStart(this.toJSON(),O(e[r],"input"),n[r].runId,void 0,void 0,void 0,n[r].runName));return delete n[r].runId,a}));let s;for(const t of this.runnables()){n[0].signal?.throwIfAborted();try{const a=await t.batch(e,i.map((e,t)=>(0,m.patchConfig)(n[t],{callbacks:e?.getChild()})),r);return await Promise.all(i.map((e,t)=>e?.handleChainEnd(O(a[t],"output")))),a}catch(e){void 0===s&&(s=e)}}if(!s)throw new Error("No error stored at end of fallbacks.");throw await Promise.all(i.map(e=>e?.handleChainError(s))),s}}function N(e){if("function"==typeof e)return new C({func:e});if(S.isRunnable(e))return e;if(Array.isArray(e)||"object"!=typeof e)throw new Error("Expected a Runnable, function or object.\nInstead got an unsupported type.");{const t={};for(const[r,n]of Object.entries(e))t[r]=N(n);return new T({steps:t})}}t.RunnableWithFallbacks=x;class $ extends S{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof T&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const r=await this.mapper.invoke(e,t);return{...e,...r}}async*_transform(e,t,r){const n=this.mapper.getStepsKeys(),[a,i]=(0,u.atee)(e),s=this.mapper.transform(i,(0,m.patchConfig)(r,{callbacks:t?.getChild()})),o=s.next();for await(const e of a){if("object"!=typeof e||Array.isArray(e))throw new Error("RunnableAssign can only be used with objects as input, got "+typeof e);const t=Object.fromEntries(Object.entries(e).filter(([e])=>!n.includes(e)));Object.keys(t).length>0&&(yield t)}yield(await o).value;for await(const e of s)yield e}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}}t.RunnableAssign=$;class R extends S{static lc_name(){return"RunnablePick"}constructor(e){("string"==typeof e||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if("string"==typeof this.keys)return e[this.keys];{const t=this.keys.map(t=>[t,e[t]]).filter(e=>void 0!==e[1]);return 0===t.length?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const e=await this._pick(t);void 0!==e&&(yield e)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}}t.RunnablePick=R;class M extends E{constructor(e){super({bound:k.from([C.from(async e=>{let t;if((0,w._isToolCall)(e))try{t=await(0,P.interopParseAsync)(this.schema,e.args)}catch(t){throw new w.ToolInputParsingException("Received tool input did not match expected schema",JSON.stringify(e.args))}else t=e;return t}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name}),config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function D(e,t){const r=t.name??e.getName(),n=t.description??(0,P.getSchemaDescription)(t.schema);return(0,P.isSimpleStringZodSchema)(t.schema)?new M({name:r,description:n,schema:a.z.object({input:a.z.string()}).transform(e=>e.input),bound:e}):new M({name:r,description:n,schema:t.schema,bound:e})}t.RunnableToolLike=M},11144:e=>{e.exports={stringify:function(e,{EOL:t="\n",finalEOL:r=!0,replacer:n=null,spaces:a}={}){const i=r?t:"";return JSON.stringify(e,n,a).replace(/\n/g,t)+i},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}}},11319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIntersectionDef=function(e,t){const r=[(0,n.parseDef)(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),(0,n.parseDef)(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e);let i="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const s=[];return r.forEach(e=>{if(a(e))s.push(...e.allOf),void 0===e.unevaluatedProperties&&(i=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:r,...n}=e;t=n}else i=void 0;s.push(t)}}),s.length?{allOf:s,...i}:void 0};const n=r(95445),a=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e},11344:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isRunnableConfigLike=t.isRunTree=t.RunTree=t.convertToDottedOrderFormat=void 0;const s=i(r(96383)),o=r(56178),l=r(43658),c=r(76964),d=r(53865),u=r(78963);function p(e,t,r=1){const n=r.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${n}Z`.replace(/[-:.]/g,"")+t}t.convertToDottedOrderFormat=p;class m{constructor(e,t){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t}static fromHeader(e){const t=e.split(",");let r={},n=[];for(const e of t){const[t,a]=e.split("="),i=decodeURIComponent(a);"langsmith-metadata"===t?r=JSON.parse(i):"langsmith-tags"===t&&(n=i.split(","))}return new m(r,n)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class h{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),f(e))return void Object.assign(this,{...e});const t=h.getDefaultConfig(),{metadata:r,...n}=e,a=n.client??h.getSharedClient(),i={...r,...n?.extra?.metadata};if(n.extra={...n.extra,metadata:i},Object.assign(this,{...t,...n,client:a}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??=1,this.child_execution_order??=1,!this.dotted_order){const e=p(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e}}static getDefaultConfig(){return{id:s.v4(),run_type:"chain",project_name:(0,o.getEnvironmentVariable)("LANGCHAIN_PROJECT")??(0,o.getEnvironmentVariable)("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:(0,o.getEnvironmentVariable)("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:(0,o.getEnvironmentVariable)("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return h.sharedClient||(h.sharedClient=new l.Client),h.sharedClient}createChild(e){const t=this.child_execution_order+1,r=new h({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});u._LC_CONTEXT_VARIABLES_KEY in this&&(r[u._LC_CONTEXT_VARIABLES_KEY]=this[u._LC_CONTEXT_VARIABLES_KEY]);const n=Symbol.for("lc:child_config"),a=e.extra?.[n]??this.extra[n];if(v(a)){const e={...a},t="object"==typeof(i=e.callbacks)&&null!=i&&Array.isArray(i.handlers)?e.callbacks.copy?.():void 0;t&&(Object.assign(t,{_parentRunId:r.id}),t.handlers?.find(g)?.updateFromRunTree?.(r),e.callbacks=t),r.extra[n]=e}var i;const s=new Set;let o=this;for(;null!=o&&!s.has(o.id);)s.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,t),o=o.parent_run;return this.child_runs.push(r),r}async end(e,t,r=Date.now(),n){this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??r,n&&Object.keys(n).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...n}}:{metadata:n})}_convertToCreate(e,t,r=!0){const n=e.extra??{};if(n.runtime||(n.runtime={}),t)for(const[e,r]of Object.entries(t))n.runtime[e]||(n.runtime[e]=r);let a,i;return r?(i=e.parent_run?.id,a=[]):(a=e.child_runs.map(e=>this._convertToCreate(e,t,r)),i=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:n,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:a,parent_run_id:i,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags}}async postRun(e=!0){try{const t=(0,o.getRuntimeEnvironment)(),r=await this._convertToCreate(this,t,!0);if(await this.client.createRun(r),!e){(0,d.warnOnce)("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const e of this.child_runs)await e.postRun(!1)}}catch(e){console.error(`Error in postRun for run ${this.id}:`,e)}}async patchRun(){try{const e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:this.parent_run?.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags};await this.client.updateRun(this.id,e)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}}toJSON(){return this._convertToCreate(this,void 0,!1)}static fromRunnableConfig(e,t){const r=e?.callbacks;let n,a,i,s=(0,c.isTracingEnabled)();if(r){const e=r?.getParentRunId?.()??"",t=r?.handlers?.find(e=>"langchain_tracer"==e?.name);n=t?.getRun?.(e),a=t?.projectName,i=t?.client,s=s||!!t}return n?new h({name:n.name,id:n.id,trace_id:n.trace_id,dotted_order:n.dotted_order,client:i,tracingEnabled:s,project_name:a,tags:[...new Set((n?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...n?.extra?.metadata,...e?.metadata}}}).createChild(t):new h({...t,client:i,tracingEnabled:s,project_name:a})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){const r="get"in e&&"function"==typeof e.get?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,n=r["langsmith-trace"];if(!n||"string"!=typeof n)return;const a=n.trim(),i=a.split(".").map(e=>{const[t,r]=e.split("Z");return{strTime:t,time:Date.parse(t+"Z"),uuid:r}}),s=i[0].uuid,o={...t,name:t?.name??"parent",run_type:t?.run_type??"chain",start_time:t?.start_time??Date.now(),id:i.at(-1)?.uuid,trace_id:s,dotted_order:a};if(r.baggage&&"string"==typeof r.baggage){const e=m.fromHeader(r.baggage);o.metadata=e.metadata,o.tags=e.tags}return new h(o)}toHeaders(e){const t={"langsmith-trace":this.dotted_order,baggage:new m(this.extra?.metadata,this.tags).toHeader()};if(e)for(const[r,n]of Object.entries(t))e.set(r,n);return t}}function f(e){return void 0!==e&&"function"==typeof e.createChild&&"function"==typeof e.postRun}function g(e){return"object"==typeof e&&null!=e&&"string"==typeof e.name&&"langchain_tracer"===e.name}function y(e){return Array.isArray(e)&&e.some(e=>g(e))}function v(e){return void 0!==e&&"object"==typeof e.callbacks&&(y(e.callbacks?.handlers)||y(e.callbacks))}t.RunTree=h,Object.defineProperty(h,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null}),t.isRunTree=f,t.isRunnableConfigLike=v},11715:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFileFromStream=t.createFile=t.agentPolicyName=t.agentPolicy=t.auxiliaryAuthenticationHeaderPolicyName=t.auxiliaryAuthenticationHeaderPolicy=t.ndJsonPolicyName=t.ndJsonPolicy=t.bearerTokenAuthenticationPolicyName=t.bearerTokenAuthenticationPolicy=t.formDataPolicyName=t.formDataPolicy=t.tlsPolicyName=t.tlsPolicy=t.userAgentPolicyName=t.userAgentPolicy=t.defaultRetryPolicy=t.tracingPolicyName=t.tracingPolicy=t.retryPolicy=t.throttlingRetryPolicyName=t.throttlingRetryPolicy=t.systemErrorRetryPolicyName=t.systemErrorRetryPolicy=t.redirectPolicyName=t.redirectPolicy=t.getDefaultProxySettings=t.proxyPolicyName=t.proxyPolicy=t.multipartPolicyName=t.multipartPolicy=t.logPolicyName=t.logPolicy=t.setClientRequestIdPolicyName=t.setClientRequestIdPolicy=t.exponentialRetryPolicyName=t.exponentialRetryPolicy=t.decompressResponsePolicyName=t.decompressResponsePolicy=t.isRestError=t.RestError=t.createPipelineRequest=t.createHttpHeaders=t.createDefaultHttpClient=t.createPipelineFromOptions=t.createEmptyPipeline=void 0;var n=r(16121);Object.defineProperty(t,"createEmptyPipeline",{enumerable:!0,get:function(){return n.createEmptyPipeline}});var a=r(68303);Object.defineProperty(t,"createPipelineFromOptions",{enumerable:!0,get:function(){return a.createPipelineFromOptions}});var i=r(44457);Object.defineProperty(t,"createDefaultHttpClient",{enumerable:!0,get:function(){return i.createDefaultHttpClient}});var s=r(3189);Object.defineProperty(t,"createHttpHeaders",{enumerable:!0,get:function(){return s.createHttpHeaders}});var o=r(26128);Object.defineProperty(t,"createPipelineRequest",{enumerable:!0,get:function(){return o.createPipelineRequest}});var l=r(64863);Object.defineProperty(t,"RestError",{enumerable:!0,get:function(){return l.RestError}}),Object.defineProperty(t,"isRestError",{enumerable:!0,get:function(){return l.isRestError}});var c=r(30938);Object.defineProperty(t,"decompressResponsePolicy",{enumerable:!0,get:function(){return c.decompressResponsePolicy}}),Object.defineProperty(t,"decompressResponsePolicyName",{enumerable:!0,get:function(){return c.decompressResponsePolicyName}});var d=r(40029);Object.defineProperty(t,"exponentialRetryPolicy",{enumerable:!0,get:function(){return d.exponentialRetryPolicy}}),Object.defineProperty(t,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return d.exponentialRetryPolicyName}});var u=r(6863);Object.defineProperty(t,"setClientRequestIdPolicy",{enumerable:!0,get:function(){return u.setClientRequestIdPolicy}}),Object.defineProperty(t,"setClientRequestIdPolicyName",{enumerable:!0,get:function(){return u.setClientRequestIdPolicyName}});var p=r(84802);Object.defineProperty(t,"logPolicy",{enumerable:!0,get:function(){return p.logPolicy}}),Object.defineProperty(t,"logPolicyName",{enumerable:!0,get:function(){return p.logPolicyName}});var m=r(80716);Object.defineProperty(t,"multipartPolicy",{enumerable:!0,get:function(){return m.multipartPolicy}}),Object.defineProperty(t,"multipartPolicyName",{enumerable:!0,get:function(){return m.multipartPolicyName}});var h=r(43952);Object.defineProperty(t,"proxyPolicy",{enumerable:!0,get:function(){return h.proxyPolicy}}),Object.defineProperty(t,"proxyPolicyName",{enumerable:!0,get:function(){return h.proxyPolicyName}}),Object.defineProperty(t,"getDefaultProxySettings",{enumerable:!0,get:function(){return h.getDefaultProxySettings}});var f=r(10002);Object.defineProperty(t,"redirectPolicy",{enumerable:!0,get:function(){return f.redirectPolicy}}),Object.defineProperty(t,"redirectPolicyName",{enumerable:!0,get:function(){return f.redirectPolicyName}});var g=r(73187);Object.defineProperty(t,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return g.systemErrorRetryPolicy}}),Object.defineProperty(t,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return g.systemErrorRetryPolicyName}});var y=r(75923);Object.defineProperty(t,"throttlingRetryPolicy",{enumerable:!0,get:function(){return y.throttlingRetryPolicy}}),Object.defineProperty(t,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return y.throttlingRetryPolicyName}});var v=r(32794);Object.defineProperty(t,"retryPolicy",{enumerable:!0,get:function(){return v.retryPolicy}});var b=r(79170);Object.defineProperty(t,"tracingPolicy",{enumerable:!0,get:function(){return b.tracingPolicy}}),Object.defineProperty(t,"tracingPolicyName",{enumerable:!0,get:function(){return b.tracingPolicyName}});var _=r(32683);Object.defineProperty(t,"defaultRetryPolicy",{enumerable:!0,get:function(){return _.defaultRetryPolicy}});var w=r(27244);Object.defineProperty(t,"userAgentPolicy",{enumerable:!0,get:function(){return w.userAgentPolicy}}),Object.defineProperty(t,"userAgentPolicyName",{enumerable:!0,get:function(){return w.userAgentPolicyName}});var P=r(46017);Object.defineProperty(t,"tlsPolicy",{enumerable:!0,get:function(){return P.tlsPolicy}}),Object.defineProperty(t,"tlsPolicyName",{enumerable:!0,get:function(){return P.tlsPolicyName}});var O=r(10348);Object.defineProperty(t,"formDataPolicy",{enumerable:!0,get:function(){return O.formDataPolicy}}),Object.defineProperty(t,"formDataPolicyName",{enumerable:!0,get:function(){return O.formDataPolicyName}});var S=r(63074);Object.defineProperty(t,"bearerTokenAuthenticationPolicy",{enumerable:!0,get:function(){return S.bearerTokenAuthenticationPolicy}}),Object.defineProperty(t,"bearerTokenAuthenticationPolicyName",{enumerable:!0,get:function(){return S.bearerTokenAuthenticationPolicyName}});var E=r(33470);Object.defineProperty(t,"ndJsonPolicy",{enumerable:!0,get:function(){return E.ndJsonPolicy}}),Object.defineProperty(t,"ndJsonPolicyName",{enumerable:!0,get:function(){return E.ndJsonPolicyName}});var A=r(18769);Object.defineProperty(t,"auxiliaryAuthenticationHeaderPolicy",{enumerable:!0,get:function(){return A.auxiliaryAuthenticationHeaderPolicy}}),Object.defineProperty(t,"auxiliaryAuthenticationHeaderPolicyName",{enumerable:!0,get:function(){return A.auxiliaryAuthenticationHeaderPolicyName}});var I=r(53369);Object.defineProperty(t,"agentPolicy",{enumerable:!0,get:function(){return I.agentPolicy}}),Object.defineProperty(t,"agentPolicyName",{enumerable:!0,get:function(){return I.agentPolicyName}});var k=r(66444);Object.defineProperty(t,"createFile",{enumerable:!0,get:function(){return k.createFile}}),Object.defineProperty(t,"createFileFromStream",{enumerable:!0,get:function(){return k.createFileFromStream}})},11725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeSha256Hmac=async function(e,t,r){const a=Buffer.from(e,"base64");return(0,n.createHmac)("sha256",a).update(t).digest(r)},t.computeSha256Hash=async function(e,t){return(0,n.createHash)("sha256").update(e).digest(t)};const n=r(77598)},11763:(e,t,r)=>{"use strict";const n=r(50560);e.exports=(e,t)=>n(e,t,!0)},11946:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OllamaEmbeddings=void 0;const n=r(43598),a=r(43246);class i extends n.Embeddings{constructor(e){super({maxConcurrency:1,...e}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"mxbai-embed-large"}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://localhost:11434"}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"truncate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.client=new a.Ollama({fetch:e?.fetch,host:e?.baseUrl,headers:e?.headers?new Headers(e.headers):void 0}),this.baseUrl=e?.baseUrl??this.baseUrl,this.model=e?.model??this.model,this.keepAlive=e?.keepAlive,this.truncate=e?.truncate??this.truncate,this.requestOptions=e?.requestOptions?this._convertOptions(e?.requestOptions):void 0}_convertOptions(e){const t={},r={embeddingOnly:"embedding_only",frequencyPenalty:"frequency_penalty",keepAlive:"keep_alive",logitsAll:"logits_all",lowVram:"low_vram",mainGpu:"main_gpu",mirostat:"mirostat",mirostatEta:"mirostat_eta",mirostatTau:"mirostat_tau",numBatch:"num_batch",numCtx:"num_ctx",numGpu:"num_gpu",numKeep:"num_keep",numPredict:"num_predict",numThread:"num_thread",penalizeNewline:"penalize_newline",presencePenalty:"presence_penalty",repeatLastN:"repeat_last_n",repeatPenalty:"repeat_penalty",temperature:"temperature",stop:"stop",tfsZ:"tfs_z",topK:"top_k",topP:"top_p",typicalP:"typical_p",useMlock:"use_mlock",useMmap:"use_mmap",vocabOnly:"vocab_only",f16Kv:"f16_kv",numa:"numa",seed:"seed"};for(const[n,a]of Object.entries(e)){const e=r[n];e?t[e]=a:t[n]=a}return t}async embedDocuments(e){return this.embeddingWithRetry(e)}async embedQuery(e){return(await this.embeddingWithRetry([e]))[0]}async embeddingWithRetry(e){return(await this.caller.call(()=>this.client.embed({model:this.model,input:e,keep_alive:this.keepAlive,options:this.requestOptions,truncate:this.truncate}))).embeddings}}t.OllamaEmbeddings=i},11995:(e,t,r)=>{var n=r(2203).Stream;e.exports=function(e){return{ReadStream:function t(r,a){if(!(this instanceof t))return new t(r,a);n.call(this);var i=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,a=a||{};for(var s=Object.keys(a),o=0,l=s.length;o<l;o++){var c=s[o];this[c]=a[c]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,function(e,t){if(e)return i.emit("error",e),void(i.readable=!1);i.fd=t,i.emit("open",t),i._read()}):process.nextTick(function(){i._read()})},WriteStream:function t(r,a){if(!(this instanceof t))return new t(r,a);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,a=a||{};for(var i=Object.keys(a),s=0,o=i.length;s<o;s++){var l=i[s];this[l]=a[l]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},12018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createForm=t.multipartFormRequestOptions=t.maybeMultipartFormRequestOptions=t.isAsyncIterable=t.checkFileSupport=void 0,t.makeFile=a,t.getName=i;const n=r(446);function a(e,r,n){return(0,t.checkFileSupport)(),new File(e,r??"unknown_file",n)}function i(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}t.checkFileSupport=()=>{if("undefined"==typeof File){const{process:e}=globalThis,t="string"==typeof e?.versions?.node&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}},t.isAsyncIterable=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],t.maybeMultipartFormRequestOptions=async(e,r)=>l(e.body)?{...e,body:await(0,t.createForm)(e.body,r)}:e,t.multipartFormRequestOptions=async(e,r)=>({...e,body:await(0,t.createForm)(e.body,r)});const s=new WeakMap;t.createForm=async(e,t)=>{if(!await function(e){const t="function"==typeof e?e:e.fetch,r=s.get(t);if(r)return r;const n=(async()=>{try{const e="Response"in t?t.Response:(await t("data:,")).constructor,r=new FormData;return r.toString()!==await new e(r).text()}catch{return!0}})();return s.set(t,n),n}(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>c(r,e,t))),r};const o=e=>e instanceof Blob&&"name"in e,l=e=>{if((e=>"object"==typeof e&&null!==e&&(e instanceof Response||(0,t.isAsyncIterable)(e)||o(e)))(e))return!0;if(Array.isArray(e))return e.some(l);if(e&&"object"==typeof e)for(const t in e)if(l(e[t]))return!0;return!1},c=async(e,r,s)=>{if(void 0!==s){if(null==s)throw new TypeError(`Received null for "${r}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof s||"number"==typeof s||"boolean"==typeof s)e.append(r,String(s));else if(s instanceof Response)e.append(r,a([await s.blob()],i(s)));else if((0,t.isAsyncIterable)(s))e.append(r,a([await new Response((0,n.ReadableStreamFrom)(s)).blob()],i(s)));else if(o(s))e.append(r,s,i(s));else if(Array.isArray(s))await Promise.all(s.map(t=>c(e,r+"[]",t)));else{if("object"!=typeof s)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`);await Promise.all(Object.entries(s).map(([t,n])=>c(e,`${r}[${t}]`,n)))}}}},12031:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.isBaseCallbackHandler=t.BaseCallbackHandler=void 0,t.callbackHandlerPrefersStreaming=function(e){return"lc_prefer_streaming"in e&&e.lc_prefer_streaming};const o=s(r(95766)),l=r(367),c=r(60418);class d{}class u extends d{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,(0,l.get_lc_unique_name)(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:"false"===(0,c.getEnvironmentVariable)("LANGCHAIN_CALLBACKS_BACKGROUND")}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return l.Serializable.prototype.toJSON.call(this)}toJSONNotImplemented(){return l.Serializable.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends u{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:o.v4()}),Object.assign(this,e)}}}}t.BaseCallbackHandler=u,t.isBaseCallbackHandler=e=>{const t=e;return void 0!==t&&"function"==typeof t.copy&&"string"==typeof t.name&&"boolean"==typeof t.awaitHandlers}},12058:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"کاراکتر",verb:"داشته باشد"},file:{unit:"بایت",verb:"داشته باشد"},array:{unit:"آیتم",verb:"داشته باشد"},set:{unit:"آیتم",verb:"داشته باشد"}};function t(t){return e[t]??null}const r={regex:"ورودی",email:"آدرس ایمیل",url:"URL",emoji:"ایموجی",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاریخ و زمان ایزو",date:"تاریخ ایزو",time:"زمان ایزو",duration:"مدت زمان ایزو",ipv4:"IPv4 آدرس",ipv6:"IPv6 آدرس",cidrv4:"IPv4 دامنه",cidrv6:"IPv6 دامنه",base64:"base64-encoded رشته",base64url:"base64url-encoded رشته",json_string:"JSON رشته",e164:"E.164 عدد",jwt:"JWT",template_literal:"ورودی"};return e=>{switch(e.code){case"invalid_type":return`ورودی نامعتبر: می‌بایست ${e.expected} می‌بود، ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"عدد";case"object":if(Array.isArray(e))return"آرایه";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} دریافت شد`;case"invalid_value":return 1===e.values.length?`ورودی نامعتبر: می‌بایست ${s.stringifyPrimitive(e.values[0])} می‌بود`:`گزینه نامعتبر: می‌بایست یکی از ${s.joinValues(e.values,"|")} می‌بود`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`خیلی بزرگ: ${e.origin??"مقدار"} باید ${r}${e.maximum.toString()} ${n.unit??"عنصر"} باشد`:`خیلی بزرگ: ${e.origin??"مقدار"} باید ${r}${e.maximum.toString()} باشد`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`خیلی کوچک: ${e.origin} باید ${r}${e.minimum.toString()} ${n.unit} باشد`:`خیلی کوچک: ${e.origin} باید ${r}${e.minimum.toString()} باشد`}case"invalid_format":{const t=e;return"starts_with"===t.format?`رشته نامعتبر: باید با "${t.prefix}" شروع شود`:"ends_with"===t.format?`رشته نامعتبر: باید با "${t.suffix}" تمام شود`:"includes"===t.format?`رشته نامعتبر: باید شامل "${t.includes}" باشد`:"regex"===t.format?`رشته نامعتبر: باید با الگوی ${t.pattern} مطابقت داشته باشد`:`${r[t.format]??e.format} نامعتبر`}case"not_multiple_of":return`عدد نامعتبر: باید مضرب ${e.divisor} باشد`;case"unrecognized_keys":return`کلید${e.keys.length>1?"های":""} ناشناس: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`کلید ناشناس در ${e.origin}`;case"invalid_union":default:return"ورودی نامعتبر";case"invalid_element":return`مقدار نامعتبر در ${e.origin}`}}}},12193:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPlatformHeaders=t.isRunningInBrowser=void 0;const n=r(35392);t.isRunningInBrowser=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator;const a=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",i=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let s;t.getPlatformHeaders=()=>s??(s=(()=>{const e="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":i(Deno.build.os),"X-Stainless-Arch":a(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":i(globalThis.process.platform??"unknown"),"X-Stainless-Arch":a(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const e=r.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})())},12257:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncCaller=void 0;const a=n(r(24116)),i=n(r(73290)),s=[400,401,402,403,404,405,406,407,409],o=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name)throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response?.status??e?.status;if(t&&s.includes(+t))throw e;if("insufficient_quota"===e?.error?.code){const t=new Error(e?.message);throw t.name="InsufficientQuotaError",t}};t.AsyncCaller=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??o;const t="default"in i.default?i.default.default:i.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>(0,a.default)(()=>e(...t).catch(e=>{throw e instanceof Error?e:new Error(e)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(e=>e.ok?e:Promise.reject(e)))}}},12297:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"znaków",verb:"mieć"},file:{unit:"bajtów",verb:"mieć"},array:{unit:"elementów",verb:"mieć"},set:{unit:"elementów",verb:"mieć"}};function t(t){return e[t]??null}const r={regex:"wyrażenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ciąg znaków zakodowany w formacie base64",base64url:"ciąg znaków zakodowany w formacie base64url",json_string:"ciąg znaków w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejście"};return e=>{switch(e.code){case"invalid_type":return`Nieprawidłowe dane wejściowe: oczekiwano ${e.expected}, otrzymano ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"liczba";case"object":if(Array.isArray(e))return"tablica";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Nieprawidłowe dane wejściowe: oczekiwano ${s.stringifyPrimitive(e.values[0])}`:`Nieprawidłowa opcja: oczekiwano jednej z wartości ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Za duża wartość: oczekiwano, że ${e.origin??"wartość"} będzie mieć ${r}${e.maximum.toString()} ${n.unit??"elementów"}`:`Zbyt duż(y/a/e): oczekiwano, że ${e.origin??"wartość"} będzie wynosić ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Za mała wartość: oczekiwano, że ${e.origin??"wartość"} będzie mieć ${r}${e.minimum.toString()} ${n.unit??"elementów"}`:`Zbyt mał(y/a/e): oczekiwano, że ${e.origin??"wartość"} będzie wynosić ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Nieprawidłowy ciąg znaków: musi zaczynać się od "${t.prefix}"`:"ends_with"===t.format?`Nieprawidłowy ciąg znaków: musi kończyć się na "${t.suffix}"`:"includes"===t.format?`Nieprawidłowy ciąg znaków: musi zawierać "${t.includes}"`:"regex"===t.format?`Nieprawidłowy ciąg znaków: musi odpowiadać wzorcowi ${t.pattern}`:`Nieprawidłow(y/a/e) ${r[t.format]??e.format}`}case"not_multiple_of":return`Nieprawidłowa liczba: musi być wielokrotnością ${e.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${e.keys.length>1?"s":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Nieprawidłowy klucz w ${e.origin}`;case"invalid_union":default:return"Nieprawidłowe dane wejściowe";case"invalid_element":return`Nieprawidłowa wartość w ${e.origin}`}}}},12311:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingEnabled=void 0;const n=r(60418);t.isTracingEnabled=e=>void 0!==e?e:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(e=>"true"===(0,n.getEnvironmentVariable)(e))},12322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncLocalStorageProviderSingleton=t.MockAsyncLocalStorage=void 0;const n=r(81396),a=r(16087);class i{getStore(){}run(e,t){return t()}}t.MockAsyncLocalStorage=i;const s=new i,o=Symbol.for("ls:tracing_async_local_storage"),l=Symbol.for("lc:child_config"),c=new class{getInstance(){return globalThis[o]??s}getRunnableConfig(){const e=this.getInstance();return e.getStore()?.extra?.[l]}runWithConfig(e,t,r){const i=a.CallbackManager._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),s=this.getInstance(),o=i?.getParentRunId(),c=i?.handlers?.find(e=>"langchain_tracer"===e?.name);let d;return c&&o?d=c.convertToRunTree(o):r||(d=new n.RunTree({name:"<runnable_lambda>",tracingEnabled:!1})),d&&(d.extra={...d.extra,[l]:e}),s.run(d,t)}initializeGlobalInstance(e){void 0===globalThis[o]&&(globalThis[o]=e)}};t.AsyncLocalStorageProviderSingleton=c},12583:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.state=void 0,t.state={instrumenterImplementation:void 0}},12700:(e,t)=>{"use strict";function r(e){return null!=e}function n(e,t){return r(e)&&"object"==typeof e&&t in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isDefined=r,t.isObjectWithProperties=function(e,t){if(!r(e)||"object"!=typeof e)return!1;for(const r of t)if(!n(e,r))return!1;return!0},t.objectHasProperty=n},12729:e=>{"use strict";const t=/[\p{Lu}]/u,r=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,a=/([\p{Alpha}\p{N}_]|$)/u,i=/[_.\- ]+/,s=new RegExp("^"+i.source),o=new RegExp(i.source+a.source,"gu"),l=new RegExp("\\d+"+a.source,"gu"),c=(e,a)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(a={pascalCase:!1,preserveConsecutiveUppercase:!1,...a},0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length)return"";const i=!1===a.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(a.locale),c=!1===a.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(a.locale);return 1===e.length?a.pascalCase?c(e):i(e):(e!==i(e)&&(e=((e,n,a)=>{let i=!1,s=!1,o=!1;for(let l=0;l<e.length;l++){const c=e[l];i&&t.test(c)?(e=e.slice(0,l)+"-"+e.slice(l),i=!1,o=s,s=!0,l++):s&&o&&r.test(c)?(e=e.slice(0,l-1)+"-"+e.slice(l-1),o=s,s=!1,i=!0):(i=n(c)===c&&a(c)!==c,o=s,s=a(c)===c&&n(c)!==c)}return e})(e,i,c)),e=e.replace(s,""),e=a.preserveConsecutiveUppercase?((e,t)=>(n.lastIndex=0,e.replace(n,e=>t(e))))(e,i):i(e),a.pascalCase&&(e=c(e.charAt(0))+e.slice(1)),((e,t)=>(o.lastIndex=0,l.lastIndex=0,e.replace(o,(e,r)=>t(r)).replace(l,e=>t(e))))(e,c))};e.exports=c,e.exports.default=c},12841:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveMessage=void 0;const n=r(15785);class a extends n.BaseMessage{constructor(e){super({...e,content:""}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=e.id}_getType(){return"remove"}get _printableFields(){return{...super._printableFields,id:this.id}}}t.RemoveMessage=a},12934:(e,t,r)=>{"use strict";const n=r(2909);e.exports={readJson:n.readFile,readJsonSync:n.readFileSync,writeJson:n.writeFile,writeJsonSync:n.writeFileSync}},12949:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"caràcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function t(t){return e[t]??null}const r={regex:"entrada",email:"adreça electrònica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adreça IPv4",ipv6:"adreça IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"};return e=>{switch(e.code){case"invalid_type":return`Tipus invàlid: s'esperava ${e.expected}, s'ha rebut ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Valor invàlid: s'esperava ${s.stringifyPrimitive(e.values[0])}`:`Opció invàlida: s'esperava una de ${s.joinValues(e.values," o ")}`;case"too_big":{const r=e.inclusive?"com a màxim":"menys de",n=t(e.origin);return n?`Massa gran: s'esperava que ${e.origin??"el valor"} contingués ${r} ${e.maximum.toString()} ${n.unit??"elements"}`:`Massa gran: s'esperava que ${e.origin??"el valor"} fos ${r} ${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?"com a mínim":"més de",n=t(e.origin);return n?`Massa petit: s'esperava que ${e.origin} contingués ${r} ${e.minimum.toString()} ${n.unit}`:`Massa petit: s'esperava que ${e.origin} fos ${r} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Format invàlid: ha de començar amb "${t.prefix}"`:"ends_with"===t.format?`Format invàlid: ha d'acabar amb "${t.suffix}"`:"includes"===t.format?`Format invàlid: ha d'incloure "${t.includes}"`:"regex"===t.format?`Format invàlid: ha de coincidir amb el patró ${t.pattern}`:`Format invàlid per a ${r[t.format]??e.format}`}case"not_multiple_of":return`Número invàlid: ha de ser múltiple de ${e.divisor}`;case"unrecognized_keys":return`Clau${e.keys.length>1?"s":""} no reconeguda${e.keys.length>1?"s":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Clau invàlida a ${e.origin}`;case"invalid_union":default:return"Entrada invàlida";case"invalid_element":return`Element invàlid a ${e.origin}`}}}},13308:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVersionGreaterOrEqual=function(e,t){const r=(0,n.parse)(e),a=(0,n.parse)(t);if(!r||!a)throw new Error("Invalid version format.");return r.compare(a)>=0},t.parsePromptIdentifier=function(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);const[t,r]=e.split(":"),n=r||"latest";if(t.includes("/")){const[r,a]=t.split("/",2);if(!r||!a)throw new Error(`Invalid identifier format: ${e}`);return[r,a,n]}if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,n]};const n=r(99589)},13314:(e,t,r)=>{"use strict";const n=r(98737),a=r(16928),{copy:i}=r(4423),{remove:s}=r(35422),{mkdirp:o}=r(63798),{pathExists:l}=r(29288),c=r(66462);e.exports=async function(e,t,r={}){const d=r.overwrite||r.clobber||!1,{srcStat:u,isChangingCase:p=!1}=await c.checkPaths(e,t,"move",r);await c.checkParentPaths(e,u,t,"move");const m=a.dirname(t);return a.parse(m).root!==m&&await o(m),async function(e,t,r,a){if(!a)if(r)await s(t);else if(await l(t))throw new Error("dest already exists.");try{await n.rename(e,t)}catch(n){if("EXDEV"!==n.code)throw n;await async function(e,t,r){const n={overwrite:r,errorOnExist:!0,preserveTimestamps:!0};return await i(e,t,n),s(e)}(e,t,r)}}(e,t,d,p)}},13706:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Realtime=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(73850)),s=r(73850),o=n.__importStar(r(22729)),l=r(22729);class c extends a.APIResource{constructor(){super(...arguments),this.sessions=new i.Sessions(this._client),this.transcriptionSessions=new o.TranscriptionSessions(this._client)}}t.Realtime=c,c.Sessions=s.Sessions,c.TranscriptionSessions=l.TranscriptionSessions},13874:(e,t,r)=>{"use strict";const n=r(78311);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},13898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMessage=function(e){if((0,n.isError)(e))return e.message;{let t;try{t="object"==typeof e&&e?JSON.stringify(e):String(e)}catch(e){t="[unable to stringify input]"}return`Unknown error ${t}`}};const n=r(39111)},13909:(e,t)=>{"use strict";function r(e){const t=e.value;return void 0!==t&&void 0!==t.toString&&"function"==typeof t.toString}function n(e,t,r,n){let a,i;a="pipeDelimited"===r?"|":"spaceDelimited"===r?"%20":",",i=Array.isArray(n)?n:"object"==typeof n&&n.toString===Object.prototype.toString?Object.entries(n).flat():[n];const s=i.map(r=>{if(null==r)return"";if(!r.toString||"function"!=typeof r.toString)throw new Error(`Query parameters must be able to be represented as string, ${e} can't`);const n=void 0!==r.toISOString?r.toISOString():r.toString();return t?n:encodeURIComponent(n)}).join(a);return`${t?e:encodeURIComponent(e)}=${s}`}function a(e,t){var r;if(!t.pathParameters)return e;const n=t.pathParameters;for(const[a,s]of Object.entries(n)){if(null==s)throw new Error(`Path parameters ${a} must not be undefined or null`);if(!s.toString||"function"!=typeof s.toString)throw new Error(`Path parameters must be able to be represented as string, ${a} can't`);let n=void 0!==s.toISOString?s.toISOString():String(s);t.skipUrlEncoding||(n=encodeURIComponent(s)),e=null!==(r=i(e,`{${a}}`,n))&&void 0!==r?r:""}return e}function i(e,t,r){return e&&t?e.split(t).join(r||""):e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildRequestUrl=function(e,t,i,s={}){if(t.startsWith("https://")||t.startsWith("http://"))return t;e=a(e,s),t=function(e,t,r={}){var n;for(const a of t){const t="object"==typeof a&&null!==(n=a.allowReserved)&&void 0!==n&&n;let i="object"==typeof a?a.value:a;r.skipUrlEncoding||t||(i=encodeURIComponent(i)),e=e.replace(/\{[\w-]+\}/,String(i))}return e}(t,i,s);const o=function(e,t={}){var a,i,s,o;if(!t.queryParameters)return e;const l=new URL(e),c=t.queryParameters,d=[];for(const e of Object.keys(c)){const l=c[e];if(null==l)continue;const u=r(l),p=u?l.value:l,m=!!u&&null!==(a=l.explode)&&void 0!==a&&a,h=u&&l.style?l.style:"form";if(m)if(Array.isArray(p))for(const r of p)d.push(n(e,null!==(i=t.skipUrlEncoding)&&void 0!==i&&i,h,r));else{if("object"!=typeof p)throw new Error("explode can only be set to true for objects and arrays");for(const[e,r]of Object.entries(p))d.push(n(e,null!==(s=t.skipUrlEncoding)&&void 0!==s&&s,h,r))}else d.push(n(e,null!==(o=t.skipUrlEncoding)&&void 0!==o&&o,h,p))}return""!==l.search&&(l.search+="&"),l.search+=d.join("&"),l.toString()}(`${e}/${t}`,s);return new URL(o).toString().replace(/([^:]\/)\/+/g,"$1")},t.buildBaseUrl=a,t.replaceAll=i},13962:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.APIPromise=void 0;const a=r(47984),i=r(96199);class s extends Promise{constructor(e,t,r=i.defaultParseResponse){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=r,n.set(this,void 0),a.__classPrivateFieldSet(this,n,e,"f")}_thenUnwrap(e){return new s(a.__classPrivateFieldGet(this,n,"f"),this.responsePromise,async(t,r)=>(0,i.addRequestID)(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(a.__classPrivateFieldGet(this,n,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}t.APIPromise=s,n=new WeakMap},13999:(e,t,r)=>{"use strict";const n=r(50560);e.exports=(e,t,r)=>0!==n(e,t,r)},14098:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRelativePath=void 0,t.getRelativePath=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")}},14190:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isToolMessageChunk=t.isToolMessage=t.ToolMessageChunk=t.ToolMessage=void 0,a(r(6796),t),a(r(15785),t),a(r(26064),t),a(r(79102),t),a(r(57669),t),a(r(52133),t),a(r(68081),t),a(r(34546),t),a(r(12841),t),a(r(27682),t);var i=r(53752);Object.defineProperty(t,"ToolMessage",{enumerable:!0,get:function(){return i.ToolMessage}}),Object.defineProperty(t,"ToolMessageChunk",{enumerable:!0,get:function(){return i.ToolMessageChunk}}),Object.defineProperty(t,"isToolMessage",{enumerable:!0,get:function(){return i.isToolMessage}}),Object.defineProperty(t,"isToolMessageChunk",{enumerable:!0,get:function(){return i.isToolMessageChunk}})},15062:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Content=void 0;const n=r(82040),a=r(262),i=r(54815);class s extends n.APIResource{retrieve(e,t,r){const{container_id:n}=t;return this._client.get(i.path`/containers/${n}/files/${e}/content`,{...r,headers:(0,a.buildHeaders)([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}t.Content=s},15101:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageAuthor=c,t.convertAuthorToRole=d,t.convertMessageContentToParts=p,t.convertBaseMessagesToContent=function(e,t,r=!1){return e.reduce((a,i,s)=>{if(!(0,n.isBaseMessage)(i))throw new Error("Unsupported message input");const o=c(i);if("system"===o&&0!==s)throw new Error("System message should be the first one");const l=d(o),u=a.content[a.content.length];if(!a.mergeWithPreviousContent&&u&&u.role===l)throw new Error("Google Generative AI requires alternate messages between authors");const m=p(i,t,e.slice(0,s));if(a.mergeWithPreviousContent){const e=a.content[a.content.length-1];if(!e)throw new Error("There was a problem parsing your system message. Please try a prompt without one.");return e.parts.push(...m),{mergeWithPreviousContent:!1,content:a.content}}let h=l;("function"===h||"system"===h&&!r)&&(h="user");const f={role:h,parts:m};return{mergeWithPreviousContent:"system"===o&&!r,content:[...a.content,f]}},{content:[],mergeWithPreviousContent:!1}).content},t.mapGenerateContentResultToChatResult=function(e,t){if(!e.candidates||0===e.candidates.length||!e.candidates[0])return{generations:[],llmOutput:{filters:e.promptFeedback}};const r=e.functionCalls(),[a]=e.candidates,{content:i,...s}=a;let l;l=Array.isArray(i?.parts)&&1===i.parts.length&&i.parts[0].text?i.parts[0].text:Array.isArray(i?.parts)&&i.parts.length>0?i.parts.map(e=>"text"in e?{type:"text",text:e.text}:"executableCode"in e?{type:"executableCode",executableCode:e.executableCode}:"codeExecutionResult"in e?{type:"codeExecutionResult",codeExecutionResult:e.codeExecutionResult}:e):[];let c="";if("string"==typeof l)c=l;else if(Array.isArray(l)&&l.length>0){const e=l.find(e=>"text"in e);c=e?.text??c}return{generations:[{text:c,message:new n.AIMessage({content:l??"",tool_calls:r?.map(e=>({...e,type:"tool_call",id:"id"in e&&"string"==typeof e.id?e.id:(0,o.v4)()})),additional_kwargs:{...s},usage_metadata:t?.usageMetadata}),generationInfo:s}],llmOutput:{tokenUsage:{promptTokens:t?.usageMetadata?.input_tokens,completionTokens:t?.usageMetadata?.output_tokens,totalTokens:t?.usageMetadata?.total_tokens}}}},t.convertResponseContentToChatGenerationChunk=function(e,t){if(!e.candidates||0===e.candidates.length)return null;const r=e.functionCalls(),[i]=e.candidates,{content:s,...l}=i;let c;c=Array.isArray(s?.parts)&&s.parts.every(e=>"text"in e)?s.parts.map(e=>e.text).join(""):Array.isArray(s?.parts)?s.parts.map(e=>"text"in e?{type:"text",text:e.text}:"executableCode"in e?{type:"executableCode",executableCode:e.executableCode}:"codeExecutionResult"in e?{type:"codeExecutionResult",codeExecutionResult:e.codeExecutionResult}:e):[];let d="";if(c&&"string"==typeof c)d=c;else if(Array.isArray(c)){const e=c.find(e=>"text"in e);d=e?.text??""}const u=[];return r&&u.push(...r.map(e=>({...e,args:JSON.stringify(e.args),index:t.index,type:"tool_call_chunk",id:"id"in e&&"string"==typeof e.id?e.id:(0,o.v4)()}))),new a.ChatGenerationChunk({text:d,message:new n.AIMessageChunk({content:c||"",name:s?s.role:void 0,tool_call_chunks:u,additional_kwargs:{},usage_metadata:t.usageMetadata}),generationInfo:l})},t.convertToGenerativeAITools=function(e){return e.every(e=>"functionDeclarations"in e&&Array.isArray(e.functionDeclarations))?e:[{functionDeclarations:e.map(e=>{if((0,i.isLangChainTool)(e)){const t=(0,l.schemaToGenerativeAIParameters)(e.schema);return"object"===t.type&&"properties"in t&&0===Object.keys(t.properties).length?{name:e.name,description:e.description}:{name:e.name,description:e.description,parameters:t}}return(0,s.isOpenAITool)(e)?{name:e.function.name,description:e.function.description??"A function available to call.",parameters:(0,l.jsonSchemaToGeminiParameters)(e.function.parameters)}:e})}]};const n=r(6500),a=r(79582),i=r(30107),s=r(80601),o=r(19803),l=r(17729);function c(e){const t=e._getType();return n.ChatMessage.isInstance(e)?e.role:"tool"===t?t:e.name??t}function d(e){switch(e){case"supervisor":case"ai":case"model":return"model";case"system":return"system";case"human":return"user";case"tool":case"function":return"function";default:throw new Error(`Unknown / unsupported author: ${e}`)}}function u(e,t){if((0,n.isDataContentBlock)(e))return(0,n.convertToProviderContentBlock)(e,function(e){return{providerName:"Google Gemini",fromStandardTextBlock:e=>({text:e.text}),fromStandardImageBlock(t){if(!e)throw new Error("This model does not support images");if("url"===t.source_type){const e=(0,n.parseBase64DataUrl)({dataUrl:t.url});return e?{inlineData:{mimeType:e.mime_type,data:e.data}}:{fileData:{mimeType:t.mime_type??"",fileUri:t.url}}}if("base64"===t.source_type)return{inlineData:{mimeType:t.mime_type??"",data:t.data}};throw new Error(`Unsupported source type: ${t.source_type}`)},fromStandardAudioBlock(t){if(!e)throw new Error("This model does not support audio");if("url"===t.source_type){const e=(0,n.parseBase64DataUrl)({dataUrl:t.url});return e?{inlineData:{mimeType:e.mime_type,data:e.data}}:{fileData:{mimeType:t.mime_type??"",fileUri:t.url}}}if("base64"===t.source_type)return{inlineData:{mimeType:t.mime_type??"",data:t.data}};throw new Error(`Unsupported source type: ${t.source_type}`)},fromStandardFileBlock(t){if(!e)throw new Error("This model does not support files");if("text"===t.source_type)return{text:t.text};if("url"===t.source_type){const e=(0,n.parseBase64DataUrl)({dataUrl:t.url});return e?{inlineData:{mimeType:e.mime_type,data:e.data}}:{fileData:{mimeType:t.mime_type??"",fileUri:t.url}}}if("base64"===t.source_type)return{inlineData:{mimeType:t.mime_type??"",data:t.data}};throw new Error(`Unsupported source type: ${t.source_type}`)}}}(t));if("text"===e.type)return{text:e.text};if("executableCode"===e.type)return{executableCode:e.executableCode};if("codeExecutionResult"===e.type)return{codeExecutionResult:e.codeExecutionResult};if("image_url"===e.type){if(!t)throw new Error("This model does not support images");let r;if("string"==typeof e.image_url)r=e.image_url;else{if("object"!=typeof e.image_url||!("url"in e.image_url))throw new Error("Please provide image as base64 encoded data URL");r=e.image_url.url}const[n,a]=r.split(",");if(!n.startsWith("data:"))throw new Error("Please provide image as base64 encoded data URL");const[i,s]=n.replace(/^data:/,"").split(";");if("base64"!==s)throw new Error("Please provide image as base64 encoded data URL");return{inlineData:{data:a,mimeType:i}}}if("media"===e.type)return function(e){if("mimeType"in e&&"data"in e)return{inlineData:{mimeType:e.mimeType,data:e.data}};if("mimeType"in e&&"fileUri"in e)return{fileData:{mimeType:e.mimeType,fileUri:e.fileUri}};throw new Error("Invalid media content")}(e);if("tool_use"===e.type)return{functionCall:{name:e.name,args:e.input}};if(e.type?.includes("/")&&2===e.type.split("/").length&&"data"in e&&"string"==typeof e.data)return{inlineData:{mimeType:e.type,data:e.data}};if(!("functionCall"in e))throw"type"in e?new Error(`Unknown content type ${e.type}`):new Error(`Unknown content ${JSON.stringify(e)}`)}function p(e,t,r){if((0,n.isToolMessage)(e)){const a=e.name??function(e,t){return t.map(e=>(0,n.isAIMessage)(e)?e.tool_calls??[]:[]).flat().find(t=>t.id===e.tool_call_id)?.name}(e,r);if(void 0===a)throw new Error(`Google requires a tool name for each tool call response, and we could not infer a called tool name for ToolMessage "${e.id}" from your passed messages. Please populate a "name" field on that ToolMessage explicitly.`);const i=Array.isArray(e.content)?e.content.map(e=>u(e,t)).filter(e=>void 0!==e):e.content;return"error"===e.status?[{functionResponse:{name:a,response:{error:{details:i}}}}]:[{functionResponse:{name:a,response:{result:i}}}]}let a=[];const i=[];return"string"==typeof e.content&&e.content&&i.push({text:e.content}),Array.isArray(e.content)&&i.push(...e.content.map(e=>u(e,t)).filter(e=>void 0!==e)),(0,n.isAIMessage)(e)&&e.tool_calls?.length&&(a=e.tool_calls.map(e=>({functionCall:{name:e.name,args:e.args}}))),[...i,...a]}},15382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patchConfig=t.ensureConfig=t.mergeConfigs=t.getCallbackManagerForConfig=t.DEFAULT_RECURSION_LIMIT=void 0;const n=r(16087),a=r(12322);t.DEFAULT_RECURSION_LIMIT=25,t.getCallbackManagerForConfig=async function(e){return n.CallbackManager._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)},t.mergeConfigs=function(...e){const t={};for(const r of e.filter(e=>!!e))for(const e of Object.keys(r))if("metadata"===e)t[e]={...t[e],...r[e]};else if("tags"===e){const n=t[e]??[];t[e]=[...new Set(n.concat(r[e]??[]))]}else if("configurable"===e)t[e]={...t[e],...r[e]};else if("timeout"===e)void 0===t.timeout?t.timeout=r.timeout:void 0!==r.timeout&&(t.timeout=Math.min(t.timeout,r.timeout));else if("signal"===e)void 0===t.signal?t.signal=r.signal:void 0!==r.signal&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,r.signal]):t.signal=r.signal);else if("callbacks"===e){const e=t.callbacks,a=r.callbacks;if(Array.isArray(a))if(e)if(Array.isArray(e))t.callbacks=e.concat(a);else{const r=e.copy();for(const e of a)r.addHandler((0,n.ensureHandler)(e),!0);t.callbacks=r}else t.callbacks=a;else if(a)if(e)if(Array.isArray(e)){const r=a.copy();for(const t of e)r.addHandler((0,n.ensureHandler)(t),!0);t.callbacks=r}else t.callbacks=new n.CallbackManager(a._parentRunId,{handlers:e.handlers.concat(a.handlers),inheritableHandlers:e.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(e.tags.concat(a.tags))),inheritableTags:Array.from(new Set(e.inheritableTags.concat(a.inheritableTags))),metadata:{...e.metadata,...a.metadata}});else t.callbacks=a}else{const n=e;t[n]=r[n]??t[n]}return t};const i=new Set(["string","number","boolean"]);function s(e){const t=a.AsyncLocalStorageProviderSingleton.getRunnableConfig();let r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){const{runId:e,runName:n,...a}=t;r=Object.entries(a).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)}if(e&&(r=Object.entries(e).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)),r?.configurable)for(const e of Object.keys(r.configurable))i.has(typeof r.configurable[e])&&!r.metadata?.[e]&&(r.metadata||(r.metadata={}),r.metadata[e]=r.configurable[e]);if(void 0!==r.timeout){if(r.timeout<=0)throw new Error("Timeout must be a positive number");const e=AbortSignal.timeout(r.timeout);void 0!==r.signal?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,e])):r.signal=e,delete r.timeout}return r}t.ensureConfig=s,t.patchConfig=function(e={},{callbacks:t,maxConcurrency:r,recursionLimit:n,runName:a,configurable:i,runId:o}={}){const l=s(e);return void 0!==t&&(delete l.runName,l.callbacks=t),void 0!==n&&(l.recursionLimit=n),void 0!==r&&(l.maxConcurrency=r),void 0!==a&&(l.runName=a),void 0!==i&&(l.configurable={...l.configurable,...i}),void 0!==o&&delete l.runId,l}},15411:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._RootEventFilter=t.isRunnableInterface=void 0,t.isRunnableInterface=function(e){return!!e&&e.lc_runnable},t._RootEventFilter=class{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=void 0===this.includeNames&&void 0===this.includeTypes&&void 0===this.includeTags;const n=e.tags??[];return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(t)),void 0!==this.includeTags&&(r=r||n.some(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(t)),void 0!==this.excludeTags&&(r=r&&n.every(e=>!this.excludeTags?.includes(e))),r}}},15734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeJSON=t.maybeCoerceBoolean=t.maybeCoerceFloat=t.maybeCoerceInteger=t.coerceBoolean=t.coerceFloat=t.coerceInteger=t.validatePositiveInteger=t.ensurePresent=t.isReadonlyArray=t.isArray=t.isAbsoluteURL=void 0,t.maybeObj=function(e){return"object"!=typeof e?{}:e??{}},t.isEmptyObj=function(e){if(!e)return!0;for(const t in e)return!1;return!0},t.hasOwn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.isObj=function(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)};const n=r(44172),a=/^[a-z][a-z0-9+.-]*:/i;t.isAbsoluteURL=e=>a.test(e),t.isArray=e=>(t.isArray=Array.isArray,(0,t.isArray)(e)),t.isReadonlyArray=t.isArray,t.ensurePresent=e=>{if(null==e)throw new n.OpenAIError(`Expected a value to be given but received ${e} instead.`);return e},t.validatePositiveInteger=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new n.OpenAIError(`${e} must be an integer`);if(t<0)throw new n.OpenAIError(`${e} must be a positive integer`);return t},t.coerceInteger=e=>{if("number"==typeof e)return Math.round(e);if("string"==typeof e)return parseInt(e,10);throw new n.OpenAIError(`Could not coerce ${e} (type: ${typeof e}) into a number`)},t.coerceFloat=e=>{if("number"==typeof e)return e;if("string"==typeof e)return parseFloat(e);throw new n.OpenAIError(`Could not coerce ${e} (type: ${typeof e}) into a number`)},t.coerceBoolean=e=>"boolean"==typeof e?e:"string"==typeof e?"true"===e:Boolean(e),t.maybeCoerceInteger=e=>{if(void 0!==e)return(0,t.coerceInteger)(e)},t.maybeCoerceFloat=e=>{if(void 0!==e)return(0,t.coerceFloat)(e)},t.maybeCoerceBoolean=e=>{if(void 0!==e)return(0,t.coerceBoolean)(e)},t.safeJSON=e=>{try{return JSON.parse(e)}catch(e){return}}},15785:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMessageChunk=t.BaseMessage=void 0,t.mergeContent=function(e,t){return"string"==typeof e?""===e?t:"string"==typeof t?e+t:Array.isArray(t)&&t.some(e=>(0,a.isDataContentBlock)(e))?[{type:"text",source_type:"text",text:e},...t]:[{type:"text",text:e},...t]:Array.isArray(t)?o(e,t)??[...e,...t]:""===t?e:Array.isArray(e)&&e.some(e=>(0,a.isDataContentBlock)(e))?[...e,{type:"file",source_type:"text",text:t}]:[...e,{type:"text",text:t}]},t._mergeStatus=function(e,t){return"error"===e||"error"===t?"error":"success"},t.isOpenAIToolCallArray=function(e){return Array.isArray(e)&&e.every(e=>"number"==typeof e.index)},t._mergeDicts=s,t._mergeLists=o,t._mergeObj=function(e,t){if(!e&&!t)throw new Error("Cannot merge two undefined objects.");if(e&&t){if(typeof e!=typeof t)throw new Error(`Cannot merge objects of different types.\nLeft ${typeof e}\nRight ${typeof t}`);if("string"==typeof e&&"string"==typeof t)return e+t;if(Array.isArray(e)&&Array.isArray(t))return o(e,t);if("object"==typeof e&&"object"==typeof t)return s(e,t);if(e===t)return e;throw new Error(`Can not merge objects of different types.\nLeft ${e}\nRight ${t}`)}return e||t},t._isMessageFieldWithRole=function(e){return"string"==typeof e.role},t.isBaseMessage=l,t.isBaseMessageChunk=function(e){return l(e)&&"function"==typeof e.concat};const n=r(367),a=r(27682);class i extends n.Serializable{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return"string"==typeof this.content?this.content:Array.isArray(this.content)?this.content.map(e=>"string"==typeof e?e:"text"===e.type?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,t){"string"==typeof e&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(null===e)return this;const t=(r=this._printableFields,n=Math.max(4,e),JSON.stringify(function e(t,r){if("object"!=typeof t||null==t)return t;if(r>=n)return Array.isArray(t)?"[Array]":"[Object]";if(Array.isArray(t))return t.map(t=>e(t,r+1));const a={};for(const n of Object.keys(t))a[n]=e(t[n],r+1);return a}(r,0),null,2));var r,n;return`${this.constructor.lc_name()} ${t}`}}function s(e,t){const r={...e};for(const[e,n]of Object.entries(t))if(null==r[e])r[e]=n;else{if(null==n)continue;if(typeof r[e]!=typeof n||Array.isArray(r[e])!==Array.isArray(n))throw new Error(`field[${e}] already exists in the message chunk, but with a different type.`);if("string"==typeof r[e]){if("type"===e)continue;r[e]+=n}else if("object"!=typeof r[e]||Array.isArray(r[e]))if(Array.isArray(r[e]))r[e]=o(r[e],n);else{if(r[e]===n)continue;console.warn(`field[${e}] already exists in this message chunk and value has unsupported type.`)}else r[e]=s(r[e],n)}return r}function o(e,t){if(void 0!==e||void 0!==t){if(void 0===e||void 0===t)return e||t;{const r=[...e];for(const e of t)if("object"==typeof e&&"index"in e&&"number"==typeof e.index){const t=r.findIndex(t=>t.index===e.index);-1!==t?r[t]=s(r[t],e):r.push(e)}else{if("object"==typeof e&&"text"in e&&""===e.text)continue;r.push(e)}return r}}}function l(e){return"function"==typeof e?._getType}t.BaseMessage=i,t.BaseMessageChunk=class extends i{}},16087:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traceAsGroup=t.TraceGroup=t.ensureHandler=t.CallbackManager=t.CallbackManagerForToolRun=t.CallbackManagerForChainRun=t.CallbackManagerForLLMRun=t.CallbackManagerForRetrieverRun=t.BaseRunManager=t.BaseCallbackManager=t.parseCallbackConfigArg=void 0;const n=r(96383),a=r(35705),i=r(27635),s=r(58219),o=r(89008),l=r(41577),c=r(33844),d=r(84857),u=r(847);(0,d.isTracingEnabled)()&&"true"!==(0,o.getEnvironmentVariable)("LANGCHAIN_CALLBACKS_BACKGROUND")&&["[WARN]: You have enabled LangSmith tracing without backgrounding callbacks.","[WARN]: If you are not using a serverless environment where you must wait for tracing calls to finish,",'[WARN]: we suggest setting "process.env.LANGCHAIN_CALLBACKS_BACKGROUND=true" to avoid additional latency.'].join("\n"),t.parseCallbackConfigArg=function(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}};class p{setHandler(e){return this.setHandlers([e])}}t.BaseCallbackManager=p;class m{constructor(e,t,r,n,a,i,s,o){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:o})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{try{await(t.handleText?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,n,a){await Promise.all(this.handlers.map(r=>(0,c.consumeCallback)(async()=>{try{await(r.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata))}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleCustomEvent: ${e}`),r.raiseError)throw e}},r.awaitHandlers)))}}t.BaseRunManager=m;class h extends m{getChild(e){const t=new v(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw e}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${r}`),t.raiseError)throw e}},t.awaitHandlers)))}}t.CallbackManagerForRetrieverRun=h;class f extends m{async handleLLMNewToken(e,t,r,n,a,i){await Promise.all(this.handlers.map(r=>(0,c.consumeCallback)(async()=>{if(!r.ignoreLLM)try{await(r.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,i))}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${e}`),r.raiseError)throw e}},r.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreLLM)try{await(t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMError: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreLLM)try{await(t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}}t.CallbackManagerForLLMRun=f;class g extends m{getChild(e){const t=new v(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,n,a){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreChain)try{await(t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,a))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainError: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleChainEnd(e,t,r,n,a){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreChain)try{await(t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,a))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await(t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await(t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}}t.CallbackManagerForChainRun=g;class y extends m{getChild(e){const t=new v(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await(t.handleToolError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await(t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}}t.CallbackManagerForToolRun=y;class v extends p{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,r=void 0,a=void 0,i=void 0,s=void 0,o=void 0,l=void 0){return Promise.all(t.map(async(t,a)=>{const s=0===a&&r?r:(0,n.v4)();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return(0,u.isBaseTracer)(r)&&r._createRunForLLMStart(e,[t],s,this._parentRunId,i,this.tags,this.metadata,l),(0,c.consumeCallback)(async()=>{try{await(r.handleLLMStart?.(e,[t],s,this._parentRunId,i,this.tags,this.metadata,l))}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${e}`),r.raiseError)throw e}},r.awaitHandlers)})),new f(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r=void 0,a=void 0,i=void 0,o=void 0,l=void 0,d=void 0){return Promise.all(t.map(async(t,a)=>{const o=0===a&&r?r:(0,n.v4)();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return(0,u.isBaseTracer)(r)&&r._createRunForChatModelStart(e,[t],o,this._parentRunId,i,this.tags,this.metadata,d),(0,c.consumeCallback)(async()=>{try{if(r.handleChatModelStart)await(r.handleChatModelStart?.(e,[t],o,this._parentRunId,i,this.tags,this.metadata,d));else if(r.handleLLMStart){const n=(0,s.getBufferString)(t);await(r.handleLLMStart?.(e,[n],o,this._parentRunId,i,this.tags,this.metadata,d))}}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${e}`),r.raiseError)throw e}},r.awaitHandlers)})),new f(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=(0,n.v4)(),a=void 0,i=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreChain)return(0,u.isBaseTracer)(n)&&n._createRunForChainStart(e,t,r,this._parentRunId,this.tags,this.metadata,a,o),(0,c.consumeCallback)(async()=>{try{await(n.handleChainStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,a,o))}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleChainStart: ${e}`),n.raiseError)throw e}},n.awaitHandlers)})),new g(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=(0,n.v4)(),a=void 0,i=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreAgent)return(0,u.isBaseTracer)(n)&&n._createRunForToolStart(e,t,r,this._parentRunId,this.tags,this.metadata,o),(0,c.consumeCallback)(async()=>{try{await(n.handleToolStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,o))}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolStart: ${e}`),n.raiseError)throw e}},n.awaitHandlers)})),new y(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=(0,n.v4)(),a=void 0,i=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreRetriever)return(0,u.isBaseTracer)(n)&&n._createRunForRetrieverStart(e,t,r,this._parentRunId,this.tags,this.metadata,o),(0,c.consumeCallback)(async()=>{try{await(n.handleRetrieverStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,o))}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${e}`),n.raiseError)throw e}},n.awaitHandlers)})),new h(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,r,n,a){await Promise.all(this.handlers.map(n=>(0,c.consumeCallback)(async()=>{if(!n.ignoreCustomEvent)try{await(n.handleCustomEvent?.(e,t,r,this.tags,this.metadata))}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleCustomEvent: ${e}`),n.raiseError)throw e}},n.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new v(this._parentRunId);for(const e of this.handlers){const t=this.inheritableHandlers.includes(e);r.addHandler(e,t)}for(const e of this.tags){const t=this.inheritableTags.includes(e);r.addTags([e],t)}for(const e of Object.keys(this.metadata)){const t=Object.keys(this.inheritableMetadata).includes(e);r.addMetadata({[e]:this.metadata[e]},t)}for(const n of e)r.handlers.filter(e=>"console_callback_handler"===e.name).some(e=>e.name===n.name)||r.addHandler(n,t);return r}static fromHandlers(e){class t extends a.BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:(0,n.v4)()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new t),r}static async configure(e,t,r,n,a,i,s){return this._configureSync(e,t,r,n,a,i,s)}static _configureSync(e,t,r,n,a,s,c){let u;(e||t)&&(Array.isArray(e)||!e?(u=new v,u.setHandlers(e?.map(b)??[],!0)):u=e,u=u.copy(Array.isArray(t)?t.map(b):t?.handlers,!1));const p="true"===(0,o.getEnvironmentVariable)("LANGCHAIN_VERBOSE")||c?.verbose,m=l.LangChainTracer.getTraceableRunTree()?.tracingEnabled||(0,d.isTracingEnabled)(),h=m||((0,o.getEnvironmentVariable)("LANGCHAIN_TRACING")??!1);if(p||h){if(u||(u=new v),p&&!u.handlers.some(e=>e.name===i.ConsoleCallbackHandler.prototype.name)){const e=new i.ConsoleCallbackHandler;u.addHandler(e,!0)}if(h&&!u.handlers.some(e=>"langchain_tracer"===e.name)&&m){const e=new l.LangChainTracer;u.addHandler(e,!0),u._parentRunId=l.LangChainTracer.getTraceableRunTree()?.id??u._parentRunId}}return(r||n)&&u&&(u.addTags(r??[]),u.addTags(n??[],!1)),(a||s)&&u&&(u.addMetadata(a??{}),u.addMetadata(s??{},!1)),u}}function b(e){return"name"in e?e:a.BaseCallbackHandler.fromMethods(e)}t.CallbackManager=v,t.ensureHandler=b;class _{constructor(e,t){Object.defineProperty(this,"groupName",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"runManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}async getTraceGroupCallbackManager(e,t,r){const n=new l.LangChainTracer(r),a=await v.configure([n]),i=await(a?.handleChainStart({lc:1,type:"not_implemented",id:["langchain","callbacks","groups",e]},t??{}));if(!i)throw new Error("Failed to create run group callback manager.");return i}async start(e){return this.runManager||(this.runManager=await this.getTraceGroupCallbackManager(this.groupName,e,this.options)),this.runManager.getChild()}async error(e){this.runManager&&(await this.runManager.handleChainError(e),this.runManager=void 0)}async end(e){this.runManager&&(await this.runManager.handleChainEnd(e??{}),this.runManager=void 0)}}t.TraceGroup=_,t.traceAsGroup=async function(e,t,...r){const n=new _(e.name,e),a=await n.start({...r});try{const e=await t(a,...r);return await n.end((i=e,s="output",i&&!Array.isArray(i)&&"object"==typeof i?i:{[s]:i})),e}catch(e){throw await n.error(e),e}var i,s}},16121:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEmptyPipeline=function(){return(0,n.createEmptyPipeline)()};const n=r(26455)},16184:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebWorker=t.isReactNative=t.isNodeRuntime=t.isNodeLike=t.isNode=t.isDeno=t.isBun=t.isBrowser=t.objectHasProperty=t.isObjectWithProperties=t.isDefined=t.getErrorMessage=t.delay=t.createAbortablePromise=t.cancelablePromiseRace=void 0,t.calculateRetryDelay=function(e,t){return n.calculateRetryDelay(e,t)},t.computeSha256Hash=function(e,t){return n.computeSha256Hash(e,t)},t.computeSha256Hmac=function(e,t,r){return n.computeSha256Hmac(e,t,r)},t.getRandomIntegerInclusive=function(e,t){return n.getRandomIntegerInclusive(e,t)},t.isError=function(e){return n.isError(e)},t.isObject=function(e){return n.isObject(e)},t.randomUUID=function(){return n.randomUUID()},t.uint8ArrayToString=function(e,t){return n.uint8ArrayToString(e,t)},t.stringToUint8Array=function(e,t){return n.stringToUint8Array(e,t)};const n=r(31635).__importStar(r(39111));var a=r(4180);Object.defineProperty(t,"cancelablePromiseRace",{enumerable:!0,get:function(){return a.cancelablePromiseRace}});var i=r(78657);Object.defineProperty(t,"createAbortablePromise",{enumerable:!0,get:function(){return i.createAbortablePromise}});var s=r(93231);Object.defineProperty(t,"delay",{enumerable:!0,get:function(){return s.delay}});var o=r(13898);Object.defineProperty(t,"getErrorMessage",{enumerable:!0,get:function(){return o.getErrorMessage}});var l=r(12700);Object.defineProperty(t,"isDefined",{enumerable:!0,get:function(){return l.isDefined}}),Object.defineProperty(t,"isObjectWithProperties",{enumerable:!0,get:function(){return l.isObjectWithProperties}}),Object.defineProperty(t,"objectHasProperty",{enumerable:!0,get:function(){return l.objectHasProperty}}),t.isBrowser=n.isBrowser,t.isBun=n.isBun,t.isDeno=n.isDeno,t.isNode=n.isNodeLike,t.isNodeLike=n.isNodeLike,t.isNodeRuntime=n.isNodeRuntime,t.isReactNative=n.isReactNative,t.isWebWorker=n.isWebWorker},16327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCatchDef=void 0;const n=r(84769);t.parseCatchDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},16370:(e,t)=>{"use strict";function r(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}Object.defineProperty(t,"__esModule",{value:!0}),t.drawMermaid=function(e,t,a){const{firstNode:i,lastNode:s,nodeColors:o,withStyles:l=!0,curveStyle:c="linear",wrapLabelNWords:d=9}=a??{};let u=l?`%%{init: {'flowchart': {'curve': '${c}'}}}%%\ngraph TD;\n`:"graph TD;\n";if(l){const t="default",a={[t]:"{0}({1})"};void 0!==i&&(a[i]="{0}([{1}]):::first"),void 0!==s&&(a[s]="{0}([{1}]):::last");for(const[i,s]of Object.entries(e)){const e=s.name.split(":").pop()??"";let o=n.some(t=>e.startsWith(t)&&e.endsWith(t))?`<p>${e}</p>`:e;Object.keys(s.metadata??{}).length&&(o+=`<hr/><small><em>${Object.entries(s.metadata??{}).map(([e,t])=>`${e} = ${t}`).join("\n")}</em></small>`);const l=(a[i]??a[t]).replace("{0}",r(i)).replace("{1}",o);u+=`\t${l}\n`}}const p={};for(const e of t){const t=e.source.split(":"),r=e.target.split(":"),n=t.filter((e,t)=>e===r[t]).join(":");p[n]||(p[n]=[]),p[n].push(e)}const m=new Set;function h(e,t){const n=1===e.length&&e[0].source===e[0].target;if(t&&!n){const e=t.split(":").pop();if(m.has(e))throw new Error(`Found duplicate subgraph '${e}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);m.add(e),u+=`\tsubgraph ${e}\n`}for(const t of e){const{source:e,target:n,data:a,conditional:i}=t;let s="";if(void 0!==a){let e=a;const t=e.split(" ");t.length>d&&(e=Array.from({length:Math.ceil(t.length/d)},(e,r)=>t.slice(r*d,(r+1)*d).join(" ")).join("&nbsp;<br>&nbsp;")),s=i?` -. &nbsp;${e}&nbsp; .-> `:` -- &nbsp;${e}&nbsp; --\x3e `}else s=i?" -.-> ":" --\x3e ";u+=`\t${r(e)}${s}${r(n)};\n`}for(const e in p)e.startsWith(`${t}:`)&&e!==t&&h(p[e],e);t&&!n&&(u+="\tend\n")}h(p[""]??[],"");for(const e in p)e.includes(":")||""===e||h(p[e],e);return l&&(u+=function(e){let t="";for(const[r,n]of Object.entries(e))t+=`\tclassDef ${r} ${n};\n`;return t}(o??{})),u},t.drawMermaidPng=async function(e,t){let{backgroundColor:r="white"}=t??{};const n=btoa(e);void 0!==r&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));const a=`https://mermaid.ink/img/${n}?bgColor=${r}`,i=await fetch(a);if(!i.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${i.status}`,`Status text: ${i.statusText}`].join("\n"));return await i.blob()};const n=["*","_","`"]},16424:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRelativePath=void 0,t.getRelativePath=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")}},16874:e=>{"use strict";const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},16880:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTupleDef=void 0;const n=r(55767);t.parseTupleDef=function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:(0,n.parseDef)(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}},16883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(58385);t.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},16928:e=>{"use strict";e.exports=require("path")},17111:(e,t,r)=>{"use strict";const n=r(16928);e.exports.checkPath=function(e){if("win32"===process.platform&&/[<>:"|?*]/.test(e.replace(n.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},17237:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readEnv=void 0,t.readEnv=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0},17445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userAgentPolicyName=t.userAgentPolicy=t.tlsPolicyName=t.tlsPolicy=t.redirectPolicyName=t.redirectPolicy=t.getDefaultProxySettings=t.proxyPolicyName=t.proxyPolicy=t.multipartPolicyName=t.multipartPolicy=t.logPolicyName=t.logPolicy=t.formDataPolicyName=t.formDataPolicy=t.throttlingRetryPolicyName=t.throttlingRetryPolicy=t.systemErrorRetryPolicyName=t.systemErrorRetryPolicy=t.retryPolicy=t.exponentialRetryPolicyName=t.exponentialRetryPolicy=t.defaultRetryPolicyName=t.defaultRetryPolicy=t.decompressResponsePolicyName=t.decompressResponsePolicy=t.agentPolicyName=t.agentPolicy=void 0;var n=r(48493);Object.defineProperty(t,"agentPolicy",{enumerable:!0,get:function(){return n.agentPolicy}}),Object.defineProperty(t,"agentPolicyName",{enumerable:!0,get:function(){return n.agentPolicyName}});var a=r(71374);Object.defineProperty(t,"decompressResponsePolicy",{enumerable:!0,get:function(){return a.decompressResponsePolicy}}),Object.defineProperty(t,"decompressResponsePolicyName",{enumerable:!0,get:function(){return a.decompressResponsePolicyName}});var i=r(64759);Object.defineProperty(t,"defaultRetryPolicy",{enumerable:!0,get:function(){return i.defaultRetryPolicy}}),Object.defineProperty(t,"defaultRetryPolicyName",{enumerable:!0,get:function(){return i.defaultRetryPolicyName}});var s=r(29937);Object.defineProperty(t,"exponentialRetryPolicy",{enumerable:!0,get:function(){return s.exponentialRetryPolicy}}),Object.defineProperty(t,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return s.exponentialRetryPolicyName}});var o=r(48334);Object.defineProperty(t,"retryPolicy",{enumerable:!0,get:function(){return o.retryPolicy}});var l=r(78423);Object.defineProperty(t,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return l.systemErrorRetryPolicy}}),Object.defineProperty(t,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return l.systemErrorRetryPolicyName}});var c=r(91871);Object.defineProperty(t,"throttlingRetryPolicy",{enumerable:!0,get:function(){return c.throttlingRetryPolicy}}),Object.defineProperty(t,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return c.throttlingRetryPolicyName}});var d=r(43936);Object.defineProperty(t,"formDataPolicy",{enumerable:!0,get:function(){return d.formDataPolicy}}),Object.defineProperty(t,"formDataPolicyName",{enumerable:!0,get:function(){return d.formDataPolicyName}});var u=r(57198);Object.defineProperty(t,"logPolicy",{enumerable:!0,get:function(){return u.logPolicy}}),Object.defineProperty(t,"logPolicyName",{enumerable:!0,get:function(){return u.logPolicyName}});var p=r(7048);Object.defineProperty(t,"multipartPolicy",{enumerable:!0,get:function(){return p.multipartPolicy}}),Object.defineProperty(t,"multipartPolicyName",{enumerable:!0,get:function(){return p.multipartPolicyName}});var m=r(53404);Object.defineProperty(t,"proxyPolicy",{enumerable:!0,get:function(){return m.proxyPolicy}}),Object.defineProperty(t,"proxyPolicyName",{enumerable:!0,get:function(){return m.proxyPolicyName}}),Object.defineProperty(t,"getDefaultProxySettings",{enumerable:!0,get:function(){return m.getDefaultProxySettings}});var h=r(66414);Object.defineProperty(t,"redirectPolicy",{enumerable:!0,get:function(){return h.redirectPolicy}}),Object.defineProperty(t,"redirectPolicyName",{enumerable:!0,get:function(){return h.redirectPolicyName}});var f=r(88293);Object.defineProperty(t,"tlsPolicy",{enumerable:!0,get:function(){return f.tlsPolicy}}),Object.defineProperty(t,"tlsPolicyName",{enumerable:!0,get:function(){return f.tlsPolicyName}});var g=r(24608);Object.defineProperty(t,"userAgentPolicy",{enumerable:!0,get:function(){return g.userAgentPolicy}}),Object.defineProperty(t,"userAgentPolicyName",{enumerable:!0,get:function(){return g.userAgentPolicyName}})},17645:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AbortError:()=>H,FetchError:()=>m,Headers:()=>j,Request:()=>q,Response:()=>L,default:()=>X});var n=r(2203),a=r(58611),i=r(87016),s=r(53417),o=r(65692);const l=require("zlib"),c=n.Readable,d=Symbol("buffer"),u=Symbol("type");class p{constructor(){this[u]="";const e=arguments[0],t=arguments[1],r=[];let n=0;if(e){const t=e,a=Number(t.length);for(let e=0;e<a;e++){const a=t[e];let i;i=a instanceof Buffer?a:ArrayBuffer.isView(a)?Buffer.from(a.buffer,a.byteOffset,a.byteLength):a instanceof ArrayBuffer?Buffer.from(a):a instanceof p?a[d]:Buffer.from("string"==typeof a?a:String(a)),n+=i.length,r.push(i)}}this[d]=Buffer.concat(r);let a=t&&void 0!==t.type&&String(t.type).toLowerCase();a&&!/[^\u0020-\u007E]/.test(a)&&(this[u]=a)}get size(){return this[d].length}get type(){return this[u]}text(){return Promise.resolve(this[d].toString())}arrayBuffer(){const e=this[d],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new c;return e._read=function(){},e.push(this[d]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let n,a;n=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),a=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const i=Math.max(a-n,0),s=this[d].slice(n,n+i),o=new p([],{type:arguments[2]});return o[d]=s,o}}function m(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let h;Object.defineProperties(p.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(p.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,m.prototype.name="FetchError";try{h=require("encoding").convert}catch(e){}const f=Symbol("Body internals"),g=n.PassThrough;function y(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.size;let i=void 0===a?0:a;var s=r.timeout;let o=void 0===s?0:s;null==e?e=null:b(e)?e=Buffer.from(e.toString()):_(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof n||(e=Buffer.from(String(e)))),this[f]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=o,e instanceof n&&e.on("error",function(e){const r="AbortError"===e.name?e:new m(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[f].error=r})}function v(){var e=this;if(this[f].disturbed)return y.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[f].disturbed=!0,this[f].error)return y.Promise.reject(this[f].error);let t=this.body;if(null===t)return y.Promise.resolve(Buffer.alloc(0));if(_(t)&&(t=t.stream()),Buffer.isBuffer(t))return y.Promise.resolve(t);if(!(t instanceof n))return y.Promise.resolve(Buffer.alloc(0));let r=[],a=0,i=!1;return new y.Promise(function(n,s){let o;e.timeout&&(o=setTimeout(function(){i=!0,s(new m(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))},e.timeout)),t.on("error",function(t){"AbortError"===t.name?(i=!0,s(t)):s(new m(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))}),t.on("data",function(t){if(!i&&null!==t){if(e.size&&a+t.length>e.size)return i=!0,void s(new m(`content size at ${e.url} over limit: ${e.size}`,"max-size"));a+=t.length,r.push(t)}}),t.on("end",function(){if(!i){clearTimeout(o);try{n(Buffer.concat(r,a))}catch(t){s(new m(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}})})}function b(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function _(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function w(e){let t,r,a=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof n&&"function"!=typeof a.getBoundary&&(t=new g,r=new g,a.pipe(t),a.pipe(r),e[f].body=t,a=r),a}function P(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":b(e)?"application/x-www-form-urlencoded;charset=UTF-8":_(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof n?null:"text/plain;charset=UTF-8"}function O(e){const t=e.body;return null===t?0:_(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}y.prototype={get body(){return this[f].body},get bodyUsed(){return this[f].disturbed},arrayBuffer(){return v.call(this).then(function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)})},blob(){let e=this.headers&&this.headers.get("content-type")||"";return v.call(this).then(function(t){return Object.assign(new p([],{type:e.toLowerCase()}),{[d]:t})})},json(){var e=this;return v.call(this).then(function(t){try{return JSON.parse(t.toString())}catch(t){return y.Promise.reject(new m(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}})},text(){return v.call(this).then(function(e){return e.toString()})},buffer(){return v.call(this)},textConverted(){var e=this;return v.call(this).then(function(t){return function(e,t){if("function"!=typeof h)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n,a,i="utf-8";return r&&(n=/charset=([^;]*)/i.exec(r)),a=e.slice(0,1024).toString(),!n&&a&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(a)),!n&&a&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(a),n||(n=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(a),n&&n.pop()),n&&(n=/charset=(.*)/i.exec(n.pop()))),!n&&a&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(a)),n&&(i=n.pop(),"gb2312"!==i&&"gbk"!==i||(i="gb18030")),h(e,"UTF-8",i).toString()}(t,e.headers)})}},Object.defineProperties(y.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),y.mixIn=function(e){for(const t of Object.getOwnPropertyNames(y.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(y.prototype,t);Object.defineProperty(e,t,r)}},y.Promise=global.Promise;const S=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,E=/[^\t\x20-\x7e\x80-\xff]/;function A(e){if(e=`${e}`,S.test(e)||""===e)throw new TypeError(`${e} is not a legal HTTP header name`)}function I(e){if(e=`${e}`,E.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function k(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const T=Symbol("map");class j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[T]=Object.create(null),e instanceof j){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r);return}if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){A(e=`${e}`);const t=k(this[T],e);return void 0===t?null:this[T][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=C(this),n=0;for(;n<r.length;){var a=r[n];const i=a[0],s=a[1];e.call(t,s,i,this),r=C(this),n++}}set(e,t){t=`${t}`,A(e=`${e}`),I(t);const r=k(this[T],e);this[T][void 0!==r?r:e]=[t]}append(e,t){t=`${t}`,A(e=`${e}`),I(t);const r=k(this[T],e);void 0!==r?this[T][r].push(t):this[T][e]=[t]}has(e){return A(e=`${e}`),void 0!==k(this[T],e)}delete(e){A(e=`${e}`);const t=k(this[T],e);void 0!==t&&delete this[T][t]}raw(){return this[T]}keys(){return N(this,"key")}values(){return N(this,"value")}[Symbol.iterator](){return N(this,"key+value")}}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(e[T]).sort().map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[T][t].join(", ")}:function(t){return[t.toLowerCase(),e[T][t].join(", ")]})}j.prototype.entries=j.prototype[Symbol.iterator],Object.defineProperty(j.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(j.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const x=Symbol("internal");function N(e,t){const r=Object.create($);return r[x]={target:e,kind:t,index:0},r}const $=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==$)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[x];const t=e.target,r=e.kind,n=e.index,a=C(t,r);return n>=a.length?{value:void 0,done:!0}:(this[x].index=n+1,{value:a[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function R(e){const t=Object.assign({__proto__:null},e[T]),r=k(e[T],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty($,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const M=Symbol("Response internals"),D=a.STATUS_CODES;class L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.call(this,e,t);const r=t.status||200,n=new j(t.headers);if(null!=e&&!n.has("Content-Type")){const t=P(e);t&&n.append("Content-Type",t)}this[M]={url:t.url,status:r,statusText:t.statusText||D[r],headers:n,counter:t.counter}}get url(){return this[M].url||""}get status(){return this[M].status}get ok(){return this[M].status>=200&&this[M].status<300}get redirected(){return this[M].counter>0}get statusText(){return this[M].statusText}get headers(){return this[M].headers}clone(){return new L(w(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}y.mixIn(L.prototype),Object.defineProperties(L.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(L.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const F=Symbol("Request internals"),U=i.URL||s.URL,z=i.parse,B=i.format;function V(e){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(e)&&(e=new U(e).toString()),z(e)}const Z="destroy"in n.Readable.prototype;function G(e){return"object"==typeof e&&"object"==typeof e[F]}class q{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};G(e)?t=V(e.url):(t=e&&e.href?V(e.href):V(`${e}`),e={});let n=r.method||e.method||"GET";if(n=n.toUpperCase(),(null!=r.body||G(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let a=null!=r.body?r.body:G(e)&&null!==e.body?w(e):null;y.call(this,a,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const i=new j(r.headers||e.headers||{});if(null!=a&&!i.has("Content-Type")){const e=P(a);e&&i.append("Content-Type",e)}let s=G(e)?e.signal:null;if("signal"in r&&(s=r.signal),null!=s&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[F]={method:n,redirect:r.redirect||e.redirect||"follow",headers:i,parsedURL:t,signal:s},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[F].method}get url(){return B(this[F].parsedURL)}get headers(){return this[F].headers}get redirect(){return this[F].redirect}get signal(){return this[F].signal}clone(){return new q(this)}}function H(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}y.mixIn(q.prototype),Object.defineProperty(q.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(q.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),H.prototype=Object.create(Error.prototype),H.prototype.constructor=H,H.prototype.name="AbortError";const K=i.URL||s.URL,W=n.PassThrough;function J(e,t){if(!J.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return y.Promise=J.Promise,new J.Promise(function(r,i){const s=new q(e,t),c=function(e){const t=e[F].parsedURL,r=new j(e[F].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof n.Readable&&!Z)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let a=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(a="0"),null!=e.body){const t=O(e);"number"==typeof t&&(a=String(t))}a&&r.set("Content-Length",a),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=e.agent;return"function"==typeof i&&(i=i(t)),Object.assign({},t,{method:e.method,headers:R(r),agent:i})}(s),d=("https:"===c.protocol?o:a).request,u=s.signal;let p=null;const h=function(){let e=new H("The user aborted a request.");i(e),s.body&&s.body instanceof n.Readable&&Y(s.body,e),p&&p.body&&p.body.emit("error",e)};if(u&&u.aborted)return void h();const f=function(){h(),v()},g=d(c);let y;function v(){g.abort(),u&&u.removeEventListener("abort",f),clearTimeout(y)}u&&u.addEventListener("abort",f),s.timeout&&g.once("socket",function(e){y=setTimeout(function(){i(new m(`network timeout at: ${s.url}`,"request-timeout")),v()},s.timeout)}),g.on("error",function(e){i(new m(`request to ${s.url} failed, reason: ${e.message}`,"system",e)),p&&p.body&&Y(p.body,e),v()}),function(e,t){let r;e.on("socket",function(e){r=e}),e.on("response",function(e){const n=e.headers;"chunked"!==n["transfer-encoding"]||n["content-length"]||e.once("close",function(e){if(r&&r.listenerCount("data")>0&&!e){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",t(e)}})})}(g,function(e){u&&u.aborted||p&&p.body&&Y(p.body,e)}),parseInt(process.version.substring(1))<14&&g.on("socket",function(e){e.addListener("close",function(t){const r=e.listenerCount("data")>0;if(p&&r&&!t&&(!u||!u.aborted)){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",e)}})}),g.on("response",function(e){clearTimeout(y);const t=function(e){const t=new j;for(const r of Object.keys(e))if(!S.test(r))if(Array.isArray(e[r]))for(const n of e[r])E.test(n)||(void 0===t[T][r]?t[T][r]=[n]:t[T][r].push(n));else E.test(e[r])||(t[T][r]=[e[r]]);return t}(e.headers);if(J.isRedirect(e.statusCode)){const a=t.get("Location");let o=null;try{o=null===a?null:new K(a,s.url).toString()}catch(e){if("manual"!==s.redirect)return i(new m(`uri requested responds with an invalid redirect URL: ${a}`,"invalid-redirect")),void v()}switch(s.redirect){case"error":return i(new m(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),void v();case"manual":if(null!==o)try{t.set("Location",o)}catch(e){i(e)}break;case"follow":if(null===o)break;if(s.counter>=s.follow)return i(new m(`maximum redirect reached at: ${s.url}`,"max-redirect")),void v();const a={headers:new j(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:s.body,signal:s.signal,timeout:s.timeout,size:s.size};if(!function(e,t){const r=new K(t).hostname,n=new K(e).hostname;return r===n||"."===r[r.length-n.length-1]&&r.endsWith(n)}(s.url,o)||(n=s.url,new K(o).protocol!==new K(n).protocol))for(const e of["authorization","www-authenticate","cookie","cookie2"])a.headers.delete(e);return 303!==e.statusCode&&s.body&&null===O(s)?(i(new m("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void v()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==s.method)||(a.method="GET",a.body=void 0,a.headers.delete("content-length")),r(J(new q(o,a))),void v())}}var n;e.once("end",function(){u&&u.removeEventListener("abort",f)});let a=e.pipe(new W);const o={url:s.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:s.size,timeout:s.timeout,counter:s.counter},c=t.get("Content-Encoding");if(!s.compress||"HEAD"===s.method||null===c||204===e.statusCode||304===e.statusCode)return p=new L(a,o),void r(p);const d={flush:l.Z_SYNC_FLUSH,finishFlush:l.Z_SYNC_FLUSH};if("gzip"==c||"x-gzip"==c)return a=a.pipe(l.createGunzip(d)),p=new L(a,o),void r(p);if("deflate"==c||"x-deflate"==c){const t=e.pipe(new W);return t.once("data",function(e){a=8==(15&e[0])?a.pipe(l.createInflate()):a.pipe(l.createInflateRaw()),p=new L(a,o),r(p)}),void t.on("end",function(){p||(p=new L(a,o),r(p))})}if("br"==c&&"function"==typeof l.createBrotliDecompress)return a=a.pipe(l.createBrotliDecompress()),p=new L(a,o),void r(p);p=new L(a,o),r(p)}),function(e,t){const r=t.body;null===r?e.end():_(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(g,s)})}function Y(e,t){e.destroy?e.destroy(t):(e.emit("error",t),e.end())}J.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},J.Promise=global.Promise;const X=J},17655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;const n=r(82040),a=r(12018);class i extends n.APIResource{create(e,t){return this._client.post("/audio/translations",(0,a.multipartFormRequestOptions)({body:e,...t,__metadata:{model:e.model}},this._client))}}t.Translations=i},17729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeAdditionalProperties=i,t.schemaToGenerativeAIParameters=function(e){const t=i((0,n.isInteropZodSchema)(e)?(0,a.toJsonSchema)(e):e),{$schema:r,...s}=t;return s},t.jsonSchemaToGeminiParameters=function(e){const t=i(e),{$schema:r,...n}=t;return n};const n=r(60845),a=r(8194);function i(e){if("object"==typeof e&&null!==e){const t={...e};"additionalProperties"in t&&delete t.additionalProperties,"$schema"in t&&delete t.$schema,"strict"in t&&delete t.strict;for(const e in t)e in t&&(Array.isArray(t[e])?t[e]=t[e].map(i):"object"==typeof t[e]&&null!==t[e]&&(t[e]=i(t[e])));return t}return e}},17819:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLOutputParser=t.XML_FORMAT_INSTRUCTIONS=void 0,t.parseXMLMarkdown=c;const n=r(28580),a=r(96096),i=r(26548);t.XML_FORMAT_INSTRUCTIONS='The output should be formatted as a XML file.\n1. Output should conform to the tags below. \n2. If tags are not given, make them on your own.\n3. Remember to always open and close all the tags.\n\nAs an example, for the tags ["foo", "bar", "baz"]:\n1. String "<foo>\n   <bar>\n      <baz></baz>\n   </bar>\n</foo>" is a well-formatted instance of the schema. \n2. String "<foo>\n   <bar>\n   </foo>" is a badly-formatted instance.\n3. String "<foo>\n   <tag>\n   </tag>\n</foo>" is a badly-formatted instance.\n\nHere are the output tags:\n```\n{tags}\n```';class s extends n.BaseCumulativeTransformOutputParser{constructor(e){super(e),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.tags=e?.tags}static lc_name(){return"XMLOutputParser"}_diff(e,t){if(t)return e?(0,a.compare)(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return c(e[0].text)}async parse(e){return c(e)}getFormatInstructions(){return this.tags&&this.tags.length>0?t.XML_FORMAT_INSTRUCTIONS.replace("{tags}",this.tags?.join(", ")??""):t.XML_FORMAT_INSTRUCTIONS}}t.XMLOutputParser=s;const o=e=>e.split("\n").map(e=>e.replace(/^\s+/,"")).join("\n").trim(),l=e=>{if(0===Object.keys(e).length)return{};const t={};return e.children.length>0?(t[e.name]=e.children.map(l),t):(t[e.name]=e.text??void 0,t)};function c(e){const t=o(e),r=i.sax.parser(!0);let n={};const a=[];r.onopentag=e=>{const t={name:e.name,attributes:e.attributes,children:[],text:"",isSelfClosing:e.isSelfClosing};a.length>0?a[a.length-1].children.push(t):n=t,e.isSelfClosing||a.push(t)},r.onclosetag=()=>{if(a.length>0){const e=a.pop();0===a.length&&e&&(n=e)}},r.ontext=e=>{a.length>0&&(a[a.length-1].text+=e)},r.onattribute=e=>{a.length>0&&(a[a.length-1].attributes[e.name]=e.value)};const s=/```(xml)?(.*)```/s.exec(t),c=s?s[2]:t;return r.write(c).close(),n&&"?xml"===n.name&&(n=n.children[0]),l(n)}},17833:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,a=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(a=n))}),t.splice(a,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(40736)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},17965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnumDef=void 0,t.parseEnumDef=function(e){return{type:"string",enum:Array.from(e.values)}}},18118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeSpecRuntimeLogger=void 0,t.createLoggerContext=l,t.setLogLevel=function(e){c.setLogLevel(e)},t.getLogLevel=function(){return c.getLogLevel()},t.createClientLogger=function(e){return c.createClientLogger(e)};const n=r(31635).__importDefault(r(94103)),a=["verbose","info","warning","error"],i={verbose:400,info:300,warning:200,error:100};function s(e,t){t.log=(...t)=>{e.log(...t)}}function o(e){return a.includes(e)}function l(e){const t=new Set,r="undefined"!=typeof process&&process.env&&process.env[e.logLevelEnvVarName]||void 0;let l;const c=(0,n.default)(e.namespace);function d(e){if(e&&!o(e))throw new Error(`Unknown log level '${e}'. Acceptable values: ${a.join(",")}`);l=e;const r=[];for(const e of t)u(e)&&r.push(e.namespace);n.default.enable(r.join(","))}function u(e){return Boolean(l&&i[e.level]<=i[l])}function p(e,r){const a=Object.assign(e.extend(r),{level:r});if(s(e,a),u(a)){const e=n.default.disable();n.default.enable(e+","+a.namespace)}return t.add(a),a}return c.log=(...e)=>{n.default.log(...e)},r&&(o(r)?d(r):console.error(`${e.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${a.join(", ")}.`)),{setLogLevel:d,getLogLevel:function(){return l},createClientLogger:function(e){const t=c.extend(e);return s(c,t),{error:p(t,"error"),warning:p(t,"warning"),info:p(t,"info"),verbose:p(t,"verbose")}},logger:c}}const c=l({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});t.TypeSpecRuntimeLogger=c.logger},18233:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTracer=void 0,t.isBaseTracer=function(e){return"function"==typeof e._addRunToRunMap};const n=r(93527),a=r(12031),i=r(60418);function s(e,t){if(e)return new n.RunTree({...e,start_time:e._serialized_start_time??e.start_time,parent_run:s(t),child_runs:e.child_runs.map(e=>s(e)).filter(e=>void 0!==e),extra:{...e.extra,runtime:(0,i.getRuntimeEnvironmentSync)()},tracingEnabled:!1})}function o(e,t){return e&&!Array.isArray(e)&&"object"==typeof e?e:{[t]:e}}class l extends a.BaseCallbackHandler{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"runTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!1})}copy(){return this}getRunById(e){if(void 0!==e)return this.usesRunTreeMap?(e=>{if(e)return e.events=e.events??[],e.child_runs=e.child_runs??[],e})(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`\n\n${e.stack}`:""):"string"==typeof e?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const{dottedOrder:t,microsecondPrecisionDatestring:r}=(0,n.convertToDottedOrderFormat)(new Date(e.start_time).getTime(),e.id,e.execution_order),a={...e},i=this.getRunById(a.parent_run_id);if(void 0!==a.parent_run_id?i&&(this._addChildRun(i,a),i.child_execution_order=Math.max(i.child_execution_order,a.child_execution_order),a.trace_id=i.trace_id,void 0!==i.dotted_order&&(a.dotted_order=[i.dotted_order,t].join("."),a._serialized_start_time=r)):(a.trace_id=a.id,a.dotted_order=t,a._serialized_start_time=r),this.usesRunTreeMap){const e=s(a,i);void 0!==e&&this.runTreeMap.set(a.id,e)}else this.runMap.set(a.id,a);return a}async _endTrace(e){const t=void 0!==e.parent_run_id&&this.getRunById(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),await(this.onRunUpdate?.(e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const t=void 0!==e&&this.getRunById(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,r,n,a,i,s,o){const l=this._getExecutionOrder(n),c=Date.now(),d=s?{...a,metadata:s}:a,u={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d??{},tags:i||[]};return this._addRunToRunMap(u)}async handleLLMStart(e,t,r,n,a,i,s,o){const l=this.getRunById(r)??this._createRunForLLMStart(e,t,r,n,a,i,s,o);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}_createRunForChatModelStart(e,t,r,n,a,i,s,o){const l=this._getExecutionOrder(n),c=Date.now(),d=s?{...a,metadata:s}:a,u={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:d??{},tags:i||[]};return this._addRunToRunMap(u)}async handleChatModelStart(e,t,r,n,a,i,s,o){const l=this.getRunById(r)??this._createRunForChatModelStart(e,t,r,n,a,i,s,o);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}async handleLLMEnd(e,t,r,n,a){const i=this.getRunById(t);if(!i||"llm"!==i?.run_type)throw new Error("No LLM run to end.");return i.end_time=Date.now(),i.outputs=e,i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),i.extra={...i.extra,...a},await(this.onLLMEnd?.(i)),await this._endTrace(i),i}async handleLLMError(e,t,r,n,a){const i=this.getRunById(t);if(!i||"llm"!==i?.run_type)throw new Error("No LLM run to end.");return i.end_time=Date.now(),i.error=this.stringifyError(e),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),i.extra={...i.extra,...a},await(this.onLLMError?.(i)),await this._endTrace(i),i}_createRunForChainStart(e,t,r,n,a,i,s,o){const l=this._getExecutionOrder(n),c=Date.now(),d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:t,execution_order:l,child_execution_order:l,run_type:s??"chain",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};return this._addRunToRunMap(d)}async handleChainStart(e,t,r,n,a,i,s,o){const l=this.getRunById(r)??this._createRunForChainStart(e,t,r,n,a,i,s,o);return await(this.onRunCreate?.(l)),await(this.onChainStart?.(l)),l}async handleChainEnd(e,t,r,n,a){const i=this.getRunById(t);if(!i)throw new Error("No chain run to end.");return i.end_time=Date.now(),i.outputs=o(e,"output"),i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),void 0!==a?.inputs&&(i.inputs=o(a.inputs,"input")),await(this.onChainEnd?.(i)),await this._endTrace(i),i}async handleChainError(e,t,r,n,a){const i=this.getRunById(t);if(!i)throw new Error("No chain run to end.");return i.end_time=Date.now(),i.error=this.stringifyError(e),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),void 0!==a?.inputs&&(i.inputs=o(a.inputs,"input")),await(this.onChainError?.(i)),await this._endTrace(i),i}_createRunForToolStart(e,t,r,n,a,i,s){const o=this._getExecutionOrder(n),l=Date.now(),c={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};return this._addRunToRunMap(c)}async handleToolStart(e,t,r,n,a,i,s){const o=this.getRunById(r)??this._createRunForToolStart(e,t,r,n,a,i,s);return await(this.onRunCreate?.(o)),await(this.onToolStart?.(o)),o}async handleToolEnd(e,t){const r=this.getRunById(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onToolEnd?.(r)),await this._endTrace(r),r}async handleToolError(e,t){const r=this.getRunById(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onToolError?.(r)),await this._endTrace(r),r}async handleAgentAction(e,t){const r=this.getRunById(t);if(!r||"chain"!==r?.run_type)return;const n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentAction?.(r))}async handleAgentEnd(e,t){const r=this.getRunById(t);r&&"chain"===r?.run_type&&(r.events.push({name:"agent_end",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentEnd?.(r)))}_createRunForRetrieverStart(e,t,r,n,a,i,s){const o=this._getExecutionOrder(n),l=Date.now(),c={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:t},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:i?{metadata:i}:{},tags:a||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,t,r,n,a,i,s){const o=this.getRunById(r)??this._createRunForRetrieverStart(e,t,r,n,a,i,s);return await(this.onRunCreate?.(o)),await(this.onRetrieverStart?.(o)),o}async handleRetrieverEnd(e,t){const r=this.getRunById(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverEnd?.(r)),await this._endTrace(r),r}async handleRetrieverError(e,t){const r=this.getRunById(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverError?.(r)),await this._endTrace(r),r}async handleText(e,t){const r=this.getRunById(t);r&&"chain"===r?.run_type&&(r.events.push({name:"text",time:(new Date).toISOString(),kwargs:{text:e}}),await(this.onText?.(r)))}async handleLLMNewToken(e,t,r,n,a,i){const s=this.getRunById(r);if(!s||"llm"!==s?.run_type)throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:(new Date).toISOString(),kwargs:{token:e,idx:t,chunk:i?.chunk}}),await(this.onLLMNewToken?.(s,e,{chunk:i?.chunk})),s}}t.BaseTracer=l},18291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLangChainMessage=function(e){return"function"==typeof e?._getType},t.convertLangChainMessageToExample=function(e){const t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}},18373:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return!("object"!=typeof e||null===e||Array.isArray(e)||e instanceof RegExp||e instanceof Date)}},18630:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigManager=void 0;const o=s(r(91398)),l=s(r(16928)),c=r(79896);t.ConfigManager=class{constructor(e){this.configSection="deepwiki",this.context=e}getConfiguration(){const e=o.workspace.getConfiguration(this.configSection);return{provider:e.get("provider","openai"),model:e.get("model","gpt-4"),apiKey:e.get("apiKey",""),baseUrl:e.get("baseUrl",""),workspaceId:e.get("workspaceId",""),excludedDirs:e.get("excludedDirs",["node_modules",".git","dist","build",".vscode"]),excludedFiles:e.get("excludedFiles",["*.log","*.tmp","*.cache"]),embedderConfig:e.get("embedderConfig",{provider:"local",model:"tfidf",dimensions:256,batchSize:10,localConfig:{algorithm:"tfidf",maxFeatures:5e3,minDf:1,maxDf:.95}})}}async updateConfiguration(e,t){const r=o.workspace.getConfiguration(this.configSection);await r.update(e,t,o.ConfigurationTarget.Global)}validateConfiguration(){const e=this.getConfiguration(),t=[];switch(e.apiKey||t.push("AI API Key is required"),e.provider||t.push("AI Provider is required"),e.model||t.push("AI Model is required"),e.provider){case"openai":e.apiKey.startsWith("sk-")||t.push('OpenAI API key should start with "sk-"');break;case"google":break;case"ollama":e.baseUrl||t.push("Ollama requires a base URL");break;case"azure":e.baseUrl||t.push("Azure requires a base URL");break;case"qwen":e.apiKey||t.push("Qwen requires an API key");break;case"anthropic":e.apiKey||t.push("Anthropic requires an API key")}if(e.embedderConfig){const r=e.embedderConfig;r.provider||t.push("Embedder provider is required"),r.model||t.push("Embedder model is required"),r.dimensions<=0&&t.push("Embedder dimensions must be positive"),r.batchSize<=0&&t.push("Embedder batch size must be positive"),"local"===r.provider||r.apiKey||t.push(`Embedder API Key is required for ${r.provider}`),"local"!==r.provider||r.localConfig||t.push("Local embedder configuration is required")}else t.push("Embedder configuration is required");return{isValid:0===t.length,errors:t}}async testConnection(e){const t=e||this.getConfiguration();try{return t.apiKey?{success:!0,message:"Connection successful"}:{success:!1,message:"API Key is required"}}catch(e){return{success:!1,message:e instanceof Error?e.message:"Unknown error"}}}async openConfigurationPanel(){const e=o.window.createWebviewPanel("deepwikiConfig","DeepWiki Configuration",o.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0});e.webview.html=this.getConfigurationWebviewContent(),e.webview.onDidReceiveMessage(async t=>{switch(t.command){case"getConfig":e.webview.postMessage({command:"configData",data:this.getConfiguration()});break;case"updateConfig":await this.updateConfigFromWebview(t.data),o.window.showInformationMessage("Configuration updated successfully!");break;case"testConnection":const r=await this.testConnection(t.data);e.webview.postMessage({command:"testResult",data:r});break;case"validateConfig":const n=this.validateConfiguration();e.webview.postMessage({command:"validationResult",data:n})}})}async updateConfigFromWebview(e){for(const[t,r]of Object.entries(e))await this.updateConfiguration(t,r)}getConfigurationWebviewContent(){return this.getWebviewHtml()}getWebviewHtml(){return'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>DeepWiki Configuration</title>\n    <style>\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n            padding: 20px;\n            background-color: var(--vscode-editor-background);\n            color: var(--vscode-editor-foreground);\n        }\n        .form-group {\n            margin-bottom: 20px;\n        }\n        label {\n            display: block;\n            margin-bottom: 5px;\n            font-weight: bold;\n        }\n        input, select, textarea {\n            width: 100%;\n            padding: 8px;\n            border: 1px solid var(--vscode-input-border);\n            background-color: var(--vscode-input-background);\n            color: var(--vscode-input-foreground);\n            border-radius: 4px;\n            box-sizing: border-box;\n        }\n        .button {\n            background-color: var(--vscode-button-background);\n            color: var(--vscode-button-foreground);\n            border: none;\n            padding: 10px 20px;\n            border-radius: 4px;\n            cursor: pointer;\n            margin-right: 10px;\n        }\n        .button:hover {\n            background-color: var(--vscode-button-hoverBackground);\n        }\n        .button.secondary {\n            background-color: var(--vscode-button-secondaryBackground);\n            color: var(--vscode-button-secondaryForeground);\n        }\n        .button.secondary:hover {\n            background-color: var(--vscode-button-secondaryHoverBackground);\n        }\n        .error {\n            color: var(--vscode-errorForeground);\n            margin-top: 5px;\n        }\n        .success {\n            color: var(--vscode-terminal-ansiGreen);\n            margin-top: 5px;\n        }\n        .section {\n            border: 1px solid var(--vscode-panel-border);\n            border-radius: 6px;\n            padding: 20px;\n            margin-bottom: 20px;\n        }\n        .section-title {\n            font-size: 1.2em;\n            font-weight: bold;\n            margin-bottom: 15px;\n            color: var(--vscode-textLink-foreground);\n        }\n        .help-text {\n            font-size: 0.9em;\n            color: var(--vscode-descriptionForeground);\n            margin-top: 5px;\n        }\n        #testResult {\n            margin-top: 10px;\n            padding: 10px;\n            border-radius: 4px;\n            display: none;\n        }\n        #testResult.success {\n            background-color: var(--vscode-terminal-ansiGreen);\n            color: var(--vscode-editor-background);\n        }\n        #testResult.error {\n            background-color: var(--vscode-errorBackground);\n            color: var(--vscode-errorForeground);\n        }\n    </style>\n</head>\n<body>\n    <h1>DeepWiki Configuration</h1>\n    \n    <div class="section">\n        <div class="section-title">AI Provider Settings</div>\n        \n        <div class="form-group">\n            <label for="provider">Provider:</label>\n            <select id="provider">\n                <option value="openai">OpenAI</option>\n                <option value="google">Google</option>\n                <option value="ollama">Ollama</option>\n                <option value="azure">Azure</option>\n                <option value="deepseek">DeepSeek</option>\n                <option value="qwen">Qwen</option>\n                <option value="zhipu">Zhipu</option>\n                <option value="moonshot">Moonshot</option>\n            </select>\n            <div class="help-text">Choose your AI provider</div>\n        </div>\n        \n        <div class="form-group">\n            <label for="model">Model:</label>\n            <input type="text" id="model" placeholder="e.g., gpt-4, gemini-pro">\n            <div class="help-text">Model name to use for generation</div>\n        </div>\n        \n        <div class="form-group">\n            <label for="apiKey">API Key:</label>\n            <input type="password" id="apiKey" placeholder="Your API key">\n            <div class="help-text">API key for the selected provider</div>\n        </div>\n        \n        <div class="form-group">\n            <label for="baseUrl">Base URL (Optional):</label>\n            <input type="text" id="baseUrl" placeholder="https://api.openai.com/v1">\n            <div class="help-text">Custom API endpoint (required for Ollama and Azure)</div>\n        </div>\n        \n        <button class="button secondary" onclick="testConnection()">Test Connection</button>\n        <div id="testResult"></div>\n    </div>\n    \n    <div class="section">\n        <div class="section-title">Vector Embedder Settings</div>\n        \n        <div class="form-group">\n            <label for="embedderProvider">Embedder Provider:</label>\n            <select id="embedderProvider" onchange="toggleEmbedderConfig()">\n                <option value="local">Local (TF-IDF)</option>\n                <option value="openai">OpenAI</option>\n                <option value="google">Google</option>\n                <option value="ollama">Ollama</option>\n                <option value="azure">Azure</option>\n                <option value="deepseek">DeepSeek</option>\n                <option value="qwen">Qwen</option>\n                <option value="zhipu">Zhipu</option>\n                <option value="moonshot">Moonshot</option>\n            </select>\n            <div class="help-text">Choose your vector embedder provider</div>\n        </div>\n        \n        <div class="form-group">\n            <label for="embedderModel">Embedder Model:</label>\n            <input type="text" id="embedderModel" placeholder="e.g., text-embedding-3-small, tfidf">\n            <div class="help-text">Model name for vector embeddings</div>\n        </div>\n        \n        <div id="embedderApiKeyGroup" class="form-group">\n            <label for="embedderApiKey">Embedder API Key:</label>\n            <input type="password" id="embedderApiKey" placeholder="API key for embedder (if different from AI provider)">\n            <div class="help-text">API key for the embedder provider (leave empty to use AI provider key)</div>\n        </div>\n        \n        <div id="embedderBaseUrlGroup" class="form-group">\n            <label for="embedderBaseUrl">Embedder Base URL:</label>\n            <input type="text" id="embedderBaseUrl" placeholder="https://api.openai.com/v1">\n            <div class="help-text">Custom API endpoint for embedder</div>\n        </div>\n        \n        <div class="form-group">\n            <label for="embedderDimensions">Vector Dimensions:</label>\n            <input type="number" id="embedderDimensions" value="256" min="1" max="4096">\n            <div class="help-text">Dimension size for vector embeddings</div>\n        </div>\n        \n        <div class="form-group">\n            <label for="embedderBatchSize">Batch Size:</label>\n            <input type="number" id="embedderBatchSize" value="10" min="1" max="100">\n            <div class="help-text">Number of documents to process in each batch</div>\n        </div>\n        \n        <div id="localEmbedderConfig" class="form-group">\n            <div class="section-title" style="font-size: 1em; margin-bottom: 10px;">Local Embedder Settings</div>\n            \n            <div class="form-group">\n                <label for="localAlgorithm">Algorithm:</label>\n                <select id="localAlgorithm">\n                    <option value="tfidf">TF-IDF</option>\n                    <option value="word2vec">Word2Vec</option>\n                </select>\n            </div>\n            \n            <div class="form-group">\n                <label for="maxFeatures">Max Features:</label>\n                <input type="number" id="maxFeatures" value="5000" min="100" max="50000">\n                <div class="help-text">Maximum number of features for TF-IDF</div>\n            </div>\n            \n            <div class="form-group">\n                <label for="minDf">Min Document Frequency:</label>\n                <input type="number" id="minDf" value="1" min="1" max="100">\n                <div class="help-text">Minimum document frequency for terms</div>\n            </div>\n            \n            <div class="form-group">\n                <label for="maxDf">Max Document Frequency:</label>\n                <input type="number" id="maxDf" value="0.95" min="0.1" max="1" step="0.05">\n                <div class="help-text">Maximum document frequency ratio for terms</div>\n            </div>\n        </div>\n    </div>\n    \n    <div class="section">\n        <div class="section-title">Project Analysis Settings</div>\n        \n        <div class="form-group">\n            <label for="excludedDirs">Excluded Directories:</label>\n            <textarea id="excludedDirs" rows="3" placeholder="node_modules, .git, dist"></textarea>\n            <div class="help-text">Comma-separated list of directories to exclude</div>\n        </div>\n        \n        <div class="form-group">\n            <label for="excludedFiles">Excluded File Patterns:</label>\n            <textarea id="excludedFiles" rows="3" placeholder="*.log, *.tmp, *.cache"></textarea>\n            <div class="help-text">Comma-separated list of file patterns to exclude</div>\n        </div>\n    </div>\n    \n    <div class="form-group">\n        <button class="button" onclick="saveConfiguration()">Save Configuration</button>\n        <button class="button secondary" onclick="validateConfiguration()">Validate</button>\n    </div>\n    \n    <div id="validationResult"></div>\n    \n    <script>\n        const vscode = acquireVsCodeApi();\n        \n        window.addEventListener(\'load\', () => {\n            vscode.postMessage({ command: \'getConfig\' });\n        });\n        \n        window.addEventListener(\'message\', event => {\n            const message = event.data;\n            \n            switch (message.command) {\n                case \'configData\':\n                    loadConfiguration(message.data);\n                    break;\n                case \'testResult\':\n                    showTestResult(message.data);\n                    break;\n                case \'validationResult\':\n                    showValidationResult(message.data);\n                    break;\n            }\n        });\n        \n        function loadConfiguration(config) {\n            // AI Provider settings\n            document.getElementById(\'provider\').value = config.provider || \'openai\';\n            document.getElementById(\'model\').value = config.model || \'\';\n            document.getElementById(\'apiKey\').value = config.apiKey || \'\';\n            document.getElementById(\'baseUrl\').value = config.baseUrl || \'\';\n            \n            // Embedder settings\n            const embedderConfig = config.embedderConfig || {};\n            document.getElementById(\'embedderProvider\').value = embedderConfig.provider || \'local\';\n            document.getElementById(\'embedderModel\').value = embedderConfig.model || \'tfidf\';\n            document.getElementById(\'embedderApiKey\').value = embedderConfig.apiKey || \'\';\n            document.getElementById(\'embedderBaseUrl\').value = embedderConfig.baseUrl || \'\';\n            document.getElementById(\'embedderDimensions\').value = embedderConfig.dimensions || 256;\n            document.getElementById(\'embedderBatchSize\').value = embedderConfig.batchSize || 10;\n            \n            // Local embedder settings\n            const localConfig = embedderConfig.localConfig || {};\n            document.getElementById(\'localAlgorithm\').value = localConfig.algorithm || \'tfidf\';\n            document.getElementById(\'maxFeatures\').value = localConfig.maxFeatures || 5000;\n            document.getElementById(\'minDf\').value = localConfig.minDf || 1;\n            document.getElementById(\'maxDf\').value = localConfig.maxDf || 0.95;\n            \n            // Project settings\n            document.getElementById(\'excludedDirs\').value = (config.excludedDirs || []).join(\', \');\n            document.getElementById(\'excludedFiles\').value = (config.excludedFiles || []).join(\', \');\n            \n            // Toggle embedder config visibility\n            toggleEmbedderConfig();\n        }\n        \n        function saveConfiguration() {\n            const embedderProvider = document.getElementById(\'embedderProvider\').value;\n            \n            const config = {\n                provider: document.getElementById(\'provider\').value,\n                model: document.getElementById(\'model\').value,\n                apiKey: document.getElementById(\'apiKey\').value,\n                baseUrl: document.getElementById(\'baseUrl\').value,\n                excludedDirs: document.getElementById(\'excludedDirs\').value.split(\',\').map(s => s.trim()).filter(s => s),\n                excludedFiles: document.getElementById(\'excludedFiles\').value.split(\',\').map(s => s.trim()).filter(s => s),\n                embedderConfig: {\n                    provider: embedderProvider,\n                    model: document.getElementById(\'embedderModel\').value,\n                    apiKey: document.getElementById(\'embedderApiKey\').value,\n                    baseUrl: document.getElementById(\'embedderBaseUrl\').value,\n                    dimensions: parseInt(document.getElementById(\'embedderDimensions\').value) || 256,\n                    batchSize: parseInt(document.getElementById(\'embedderBatchSize\').value) || 10,\n                    localConfig: embedderProvider === \'local\' ? {\n                        algorithm: document.getElementById(\'localAlgorithm\').value,\n                        maxFeatures: parseInt(document.getElementById(\'maxFeatures\').value) || 5000,\n                        minDf: parseInt(document.getElementById(\'minDf\').value) || 1,\n                        maxDf: parseFloat(document.getElementById(\'maxDf\').value) || 0.95\n                    } : undefined\n                }\n            };\n            \n            vscode.postMessage({\n                command: \'updateConfig\',\n                data: config\n            });\n        }\n        \n        function testConnection() {\n            const config = {\n                provider: document.getElementById(\'provider\').value,\n                model: document.getElementById(\'model\').value,\n                apiKey: document.getElementById(\'apiKey\').value,\n                baseUrl: document.getElementById(\'baseUrl\').value,\n                excludedDirs: document.getElementById(\'excludedDirs\').value.split(\',\').map(s => s.trim()).filter(s => s),\n                excludedFiles: document.getElementById(\'excludedFiles\').value.split(\',\').map(s => s.trim()).filter(s => s)\n            };\n            \n            vscode.postMessage({ \n                command: \'testConnection\',\n                data: config\n            });\n        }\n        \n        function validateConfiguration() {\n            vscode.postMessage({ command: \'validateConfig\' });\n        }\n        \n        function showTestResult(result) {\n            const resultDiv = document.getElementById(\'testResult\');\n            resultDiv.style.display = \'block\';\n            resultDiv.textContent = result.message;\n            resultDiv.className = result.success ? \'success\' : \'error\';\n        }\n        \n        function showValidationResult(result) {\n            const resultDiv = document.getElementById(\'validationResult\');\n            \n            if (result.isValid) {\n                resultDiv.innerHTML = \'<div class="success">Configuration is valid!</div>\';\n            } else {\n                const errorList = result.errors.map(error => \'<div class="error">• \' + error + \'</div>\').join(\'\');\n                resultDiv.innerHTML = \'<div class="error">Configuration errors:</div>\' + errorList;\n            }\n        }\n        \n        function toggleEmbedderConfig() {\n            const provider = document.getElementById(\'embedderProvider\').value;\n            const apiKeyGroup = document.getElementById(\'embedderApiKeyGroup\');\n            const baseUrlGroup = document.getElementById(\'embedderBaseUrlGroup\');\n            const localConfig = document.getElementById(\'localEmbedderConfig\');\n            \n            if (provider === \'local\') {\n                apiKeyGroup.style.display = \'none\';\n                baseUrlGroup.style.display = \'none\';\n                localConfig.style.display = \'block\';\n                \n                // Set default model for local\n                const modelInput = document.getElementById(\'embedderModel\');\n                if (!modelInput.value || modelInput.value === \'text-embedding-3-small\') {\n                    modelInput.value = \'tfidf\';\n                }\n            } else {\n                apiKeyGroup.style.display = \'block\';\n                baseUrlGroup.style.display = provider === \'ollama\' ? \'block\' : \'none\';\n                localConfig.style.display = \'none\';\n                \n                // Set default model for online providers\n                const modelInput = document.getElementById(\'embedderModel\');\n                if (!modelInput.value || modelInput.value === \'tfidf\') {\n                    switch (provider) {\n                        case \'openai\':\n                            modelInput.value = \'text-embedding-3-small\';\n                            break;\n                        case \'google\':\n                            modelInput.value = \'embedding-001\';\n                            break;\n                        case \'ollama\':\n                            modelInput.value = \'nomic-embed-text\';\n                            break;\n                        case \'azure\':\n                            modelInput.value = \'text-embedding-ada-002\';\n                            break;\n                        case \'deepseek\':\n                            modelInput.value = \'text-embedding-v1\';\n                            break;\n                        case \'qwen\':\n                            modelInput.value = \'text-embedding-v1\';\n                            break;\n                        case \'zhipu\':\n                            modelInput.value = \'embedding-2\';\n                            break;\n                        case \'moonshot\':\n                            modelInput.value = \'moonshot-embedding-v1\';\n                            break;\n                        default:\n                            modelInput.value = \'text-embedding-3-small\';\n                    }\n                }\n            }\n        }\n    <\/script>\n</body>\n</html>'}getEmbedderConfig(){return this.getConfiguration().embedderConfig}async updateEmbedderConfig(e){await this.updateConfiguration("embedderConfig",e)}async generateEmbedderConfigFile(e){const t=this.getEmbedderConfig(),r=l.join(e,".deepwiki","embedder.json");await c.promises.mkdir(l.dirname(r),{recursive:!0}),await c.promises.writeFile(r,JSON.stringify({embedder:t},null,2),"utf8")}}},18677:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_AGENT_PREFIX=void 0,t.USER_AGENT_PREFIX="langchainjs-azure-openai"},18769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auxiliaryAuthenticationHeaderPolicyName=void 0,t.auxiliaryAuthenticationHeaderPolicy=function(e){const{credentials:r,scopes:o}=e,l=e.logger||a.logger,c=new WeakMap;return{name:t.auxiliaryAuthenticationHeaderPolicyName,async sendRequest(e,a){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!r||0===r.length)return l.info(`${t.auxiliaryAuthenticationHeaderPolicyName} header will not be set due to empty credentials.`),a(e);const d=[];for(const t of r){let r=c.get(t);r||(r=(0,n.createTokenCycler)(t),c.set(t,r)),d.push(s({scopes:Array.isArray(o)?o:[o],request:e,getAccessToken:r,logger:l}))}const u=(await Promise.all(d)).filter(e=>Boolean(e));return 0===u.length?(l.warning(`None of the auxiliary tokens are valid. ${i} header will not be set.`),a(e)):(e.headers.set(i,u.map(e=>`Bearer ${e}`).join(", ")),a(e))}}};const n=r(98417),a=r(73413);t.auxiliaryAuthenticationHeaderPolicyName="auxiliaryAuthenticationHeaderPolicy";const i="x-ms-authorization-auxiliary";async function s(e){var t,r;const{scopes:n,getAccessToken:a,request:i}=e,s={abortSignal:i.abortSignal,tracingOptions:i.tracingOptions};return null!==(r=null===(t=await a(n,s))||void 0===t?void 0:t.token)&&void 0!==r?r:""}},18868:(e,t,r)=>{"use strict";var n,a,i,s,o,l,c,d,u,p,m,h,f,g,y,v,b,_,w,P,O,S,E;Object.defineProperty(t,"__esModule",{value:!0}),t.AssistantStream=void 0;const A=r(79632),I=r(6716),k=r(89526),T=r(50460),j=r(34701);class C extends T.EventStream{constructor(){super(...arguments),n.add(this),i.set(this,[]),s.set(this,{}),o.set(this,{}),l.set(this,void 0),c.set(this,void 0),d.set(this,void 0),u.set(this,void 0),p.set(this,void 0),m.set(this,void 0),h.set(this,void 0),f.set(this,void 0),g.set(this,void 0)}[(i=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,n=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new a;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=I.Stream.fromReadableStream(e,this.controller);for await(const e of a)A.__classPrivateFieldGet(this,n,"m",y).call(this,e);if(a.controller.signal?.aborted)throw new k.APIUserAbortError;return this._addRun(A.__classPrivateFieldGet(this,n,"m",v).call(this))}toReadableStream(){return new I.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,n){const i=new a;return i._run(()=>i._runToolAssistantStream(e,t,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,r,a){const i=a?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},o=await e.submitToolOutputs(t,s,{...a,signal:this.controller.signal});this._connected();for await(const e of o)A.__classPrivateFieldGet(this,n,"m",y).call(this,e);if(o.controller.signal?.aborted)throw new k.APIUserAbortError;return this._addRun(A.__classPrivateFieldGet(this,n,"m",v).call(this))}static createThreadAssistantStream(e,t,r){const n=new a;return n._run(()=>n._threadAssistantStream(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,t,r,n){const i=new a;return i._run(()=>i._runAssistantStream(e,t,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return A.__classPrivateFieldGet(this,h,"f")}currentRun(){return A.__classPrivateFieldGet(this,f,"f")}currentMessageSnapshot(){return A.__classPrivateFieldGet(this,l,"f")}currentRunStepSnapshot(){return A.__classPrivateFieldGet(this,g,"f")}async finalRunSteps(){return await this.done(),Object.values(A.__classPrivateFieldGet(this,s,"f"))}async finalMessages(){return await this.done(),Object.values(A.__classPrivateFieldGet(this,o,"f"))}async finalRun(){if(await this.done(),!A.__classPrivateFieldGet(this,c,"f"))throw Error("Final run was not received.");return A.__classPrivateFieldGet(this,c,"f")}async _createThreadAssistantStream(e,t,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...t,stream:!0},s=await e.createAndRun(i,{...r,signal:this.controller.signal});this._connected();for await(const e of s)A.__classPrivateFieldGet(this,n,"m",y).call(this,e);if(s.controller.signal?.aborted)throw new k.APIUserAbortError;return this._addRun(A.__classPrivateFieldGet(this,n,"m",v).call(this))}async _createAssistantStream(e,t,r,a){const i=a?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},o=await e.create(t,s,{...a,signal:this.controller.signal});this._connected();for await(const e of o)A.__classPrivateFieldGet(this,n,"m",y).call(this,e);if(o.controller.signal?.aborted)throw new k.APIUserAbortError;return this._addRun(A.__classPrivateFieldGet(this,n,"m",v).call(this))}static accumulateDelta(e,t){for(const[r,n]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=n;continue}let t=e[r];if(null!=t)if("index"!==r&&"type"!==r){if("string"==typeof t&&"string"==typeof n)t+=n;else if("number"==typeof t&&"number"==typeof n)t+=n;else{if(!(0,j.isObj)(t)||!(0,j.isObj)(n)){if(Array.isArray(t)&&Array.isArray(n)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...n);continue}for(const e of n){if(!(0,j.isObj)(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const r=e.index;if(null==r)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof r)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${r}`);const n=t[r];null==n?t.push(e):t[r]=this.accumulateDelta(n,e)}continue}throw Error(`Unhandled record type: ${r}, deltaValue: ${n}, accValue: ${t}`)}t=this.accumulateDelta(t,n)}e[r]=t}else e[r]=n;else e[r]=n}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,n){return await this._createAssistantStream(t,e,r,n)}async _runToolAssistantStream(e,t,r,n){return await this._createToolAssistantStream(t,e,r,n)}}t.AssistantStream=C,a=C,y=function(e){if(!this.ended)switch(A.__classPrivateFieldSet(this,h,e,"f"),A.__classPrivateFieldGet(this,n,"m",w).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":A.__classPrivateFieldGet(this,n,"m",E).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":A.__classPrivateFieldGet(this,n,"m",_).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":A.__classPrivateFieldGet(this,n,"m",b).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},v=function(){if(this.ended)throw new k.OpenAIError("stream has ended, this shouldn't happen");if(!A.__classPrivateFieldGet(this,c,"f"))throw Error("Final run has not been received");return A.__classPrivateFieldGet(this,c,"f")},b=function(e){const[t,r]=A.__classPrivateFieldGet(this,n,"m",O).call(this,e,A.__classPrivateFieldGet(this,l,"f"));A.__classPrivateFieldSet(this,l,t,"f"),A.__classPrivateFieldGet(this,o,"f")[t.id]=t;for(const e of r){const r=t.content[e.index];"text"==r?.type&&this._emit("textCreated",r.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if("text"==r.type&&r.text){let e=r.text,n=t.content[r.index];if(!n||"text"!=n.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,n.text)}if(r.index!=A.__classPrivateFieldGet(this,d,"f")){if(A.__classPrivateFieldGet(this,u,"f"))switch(A.__classPrivateFieldGet(this,u,"f").type){case"text":this._emit("textDone",A.__classPrivateFieldGet(this,u,"f").text,A.__classPrivateFieldGet(this,l,"f"));break;case"image_file":this._emit("imageFileDone",A.__classPrivateFieldGet(this,u,"f").image_file,A.__classPrivateFieldGet(this,l,"f"))}A.__classPrivateFieldSet(this,d,r.index,"f")}A.__classPrivateFieldSet(this,u,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==A.__classPrivateFieldGet(this,d,"f")){const t=e.data.content[A.__classPrivateFieldGet(this,d,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,A.__classPrivateFieldGet(this,l,"f"));break;case"text":this._emit("textDone",t.text,A.__classPrivateFieldGet(this,l,"f"))}}A.__classPrivateFieldGet(this,l,"f")&&this._emit("messageDone",e.data),A.__classPrivateFieldSet(this,l,void 0,"f")}},_=function(e){const t=A.__classPrivateFieldGet(this,n,"m",P).call(this,e);switch(A.__classPrivateFieldSet(this,g,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&"tool_calls"==r.step_details.type&&r.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of r.step_details.tool_calls)e.index==A.__classPrivateFieldGet(this,p,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(A.__classPrivateFieldGet(this,m,"f")&&this._emit("toolCallDone",A.__classPrivateFieldGet(this,m,"f")),A.__classPrivateFieldSet(this,p,e.index,"f"),A.__classPrivateFieldSet(this,m,t.step_details.tool_calls[e.index],"f"),A.__classPrivateFieldGet(this,m,"f")&&this._emit("toolCallCreated",A.__classPrivateFieldGet(this,m,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":A.__classPrivateFieldSet(this,g,void 0,"f"),"tool_calls"==e.data.step_details.type&&A.__classPrivateFieldGet(this,m,"f")&&(this._emit("toolCallDone",A.__classPrivateFieldGet(this,m,"f")),A.__classPrivateFieldSet(this,m,void 0,"f")),this._emit("runStepDone",e.data,t)}},w=function(e){A.__classPrivateFieldGet(this,i,"f").push(e),this._emit("event",e)},P=function(e){switch(e.event){case"thread.run.step.created":return A.__classPrivateFieldGet(this,s,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=A.__classPrivateFieldGet(this,s,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const n=a.accumulateDelta(t,r.delta);A.__classPrivateFieldGet(this,s,"f")[e.data.id]=n}return A.__classPrivateFieldGet(this,s,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":A.__classPrivateFieldGet(this,s,"f")[e.data.id]=e.data}if(A.__classPrivateFieldGet(this,s,"f")[e.data.id])return A.__classPrivateFieldGet(this,s,"f")[e.data.id];throw new Error("No snapshot available")},O=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const e of a.delta.content)if(e.index in t.content){let r=t.content[e.index];t.content[e.index]=A.__classPrivateFieldGet(this,n,"m",S).call(this,e,r)}else t.content[e.index]=e,r.push(e);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},S=function(e,t){return a.accumulateDelta(t,e)},E=function(e){switch(A.__classPrivateFieldSet(this,f,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":A.__classPrivateFieldSet(this,c,e.data,"f"),A.__classPrivateFieldGet(this,m,"f")&&(this._emit("toolCallDone",A.__classPrivateFieldGet(this,m,"f")),A.__classPrivateFieldSet(this,m,void 0,"f"))}}},18873:(e,t)=>{"use strict";function r(e){return e.toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.createHttpHeaders=function(e){return new n(e)};class n{constructor(e){if(this._headersMap=new Map,e)for(const t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(r(e),{name:e,value:String(t).trim()})}get(e){var t;return null===(t=this._headersMap.get(r(e)))||void 0===t?void 0:t.value}has(e){return this._headersMap.has(r(e))}delete(e){this._headersMap.delete(r(e))}toJSON(e={}){const t={};if(e.preserveCase)for(const e of this._headersMap.values())t[e.name]=e.value;else for(const[e,r]of this._headersMap)t[e]=r.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*(e){for(const t of e.values())yield[t.name,t.value]}(this._headersMap)}}},19161:(e,t)=>{"use strict";function r(e,t){return e.lc_error_code=t,e.message=`${e.message}\n\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${t}/\n`,e}Object.defineProperty(t,"__esModule",{value:!0}),t.addLangChainErrorFields=r,t.wrapAnthropicClientError=function(e){let t;return t=400===e.status&&e.message.includes("tool")?r(e,"INVALID_TOOL_RESULTS"):401===e.status?r(e,"MODEL_AUTHENTICATION"):404===e.status?r(e,"MODEL_NOT_FOUND"):429===e.status?r(e,"MODEL_RATE_LIMIT"):e,t}},19164:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;const o=i(r(79325));t.z=o,s(r(79325),t),t.default=o},19232:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="0.56.0"},19350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PatchError=void 0,t.hasOwnProperty=n,t._objectKeys=a,t._deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},t.isInteger=function(e){let t=0;const r=e.length;let n;for(;t<r;){if(n=e.charCodeAt(t),!(n>=48&&n<=57))return!1;t++}return!0},t.escapePathComponent=i,t.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t._getPathRecursive=s,t.getPath=function(e,t){if(e===t)return"/";const r=s(e,t);if(""===r)throw new Error("Object not found in root");return`/${r}`},t.hasUndefined=function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(e(t[r]))return!0}else if("object"==typeof t){const n=a(t),i=n.length;for(var r=0;r<i;r++)if(e(t[n[r]]))return!0}return!1};const r=Object.prototype.hasOwnProperty;function n(e,t){return r.call(e,t)}function a(e){if(Array.isArray(e)){const t=new Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let r in e)n(e,r)&&t.push(r);return t}function i(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s(e,t){let r;for(let a in e)if(n(e,a)){if(e[a]===t)return i(a)+"/";if("object"==typeof e[a]&&(r=s(e[a],t),""!=r))return i(a)+"/"+r}return""}function o(e,t){const r=[e];for(const e in t){const n="object"==typeof t[e]?JSON.stringify(t[e],null,2):t[e];void 0!==n&&r.push(`${e}: ${n}`)}return r.join("\n")}class l extends Error{constructor(e,t,r,n,a){super(o(e,{name:t,index:r,operation:n,tree:a})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.setPrototypeOf(this,new.target.prototype),this.message=o(e,{name:t,index:r,operation:n,tree:a})}}t.PatchError=l},19501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=void 0;const n=r(82040),a=r(75552),i=r(54815);class s extends n.APIResource{list(e,t={},r){return this._client.getAPIList(i.path`/chat/completions/${e}/messages`,a.CursorPage,{query:t,...r})}}t.Messages=s},19628:(e,t,r)=>{"use strict";const n=r(53908),a=r(78311);e.exports=(e,t,r)=>{let i=null,s=null,o=null;try{o=new a(t,r)}catch(e){return null}return e.forEach(e=>{o.test(e)&&(i&&-1!==s.compare(e)||(i=e,s=new n(i,r)))}),i}},19803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.validate=t.v7=t.v6ToV1=t.v6=t.v5=t.v4=t.v3=t.v1ToV6=t.v1=t.stringify=t.parse=t.NIL=t.MAX=void 0;var n=r(19905);Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return n.default}});var a=r(70428);Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return a.default}});var i=r(59812);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return i.default}});var s=r(39962);Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.default}});var o=r(60722);Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return o.default}});var l=r(70075);Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return l.default}});var c=r(75432);Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return c.default}});var d=r(71485);Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return d.default}});var u=r(45214);Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return u.default}});var p=r(7579);Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return p.default}});var m=r(2151);Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return m.default}});var h=r(43284);Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return h.default}});var f=r(58385);Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return f.default}});var g=r(16883);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return g.default}})},19905:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},19979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LangChainTracer=void 0;const n=r(21210),a=r(93527),i=r(27262),s=r(18233),o=r(53375);class l extends s.BaseTracer{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!0});const{exampleId:t,projectName:r,client:a,replicas:i}=e;this.projectName=r??(0,n.getDefaultProjectName)(),this.replicas=i,this.exampleId=t,this.client=a??(0,o.getDefaultLangChainClientSingleton)();const s=l.getTraceableRunTree();s&&this.updateFromRunTree(s)}async persistRun(e){}async onRunCreate(e){const t=this.getRunTreeWithTracingConfig(e.id);await(t?.postRun())}async onRunUpdate(e){const t=this.getRunTreeWithTracingConfig(e.id);await(t?.patchRun())}getRun(e){return this.runTreeMap.get(e)}updateFromRunTree(e){let t=e;const r=new Set;for(;t.parent_run&&!r.has(t.id)&&(r.add(t.id),t.parent_run);)t=t.parent_run;r.clear();const n=[t];for(;n.length>0;){const e=n.shift();e&&!r.has(e.id)&&(r.add(e.id),this.runTreeMap.set(e.id,e),e.child_runs&&n.push(...e.child_runs))}this.client=e.client??this.client,this.replicas=e.replicas??this.replicas,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(e){const t=this.runTreeMap.get(e);if(t)return new a.RunTree({...t,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return i.getCurrentRunTree(!0)}catch{return}}}t.LangChainTracer=l},20044:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatRequestDetails=t.parseLogLevel=void 0,t.loggerFor=c;const n=r(80694),a={off:0,error:200,warn:300,info:400,debug:500};function i(){}function s(e,t,r){return!t||a[e]>a[r]?i:t[e].bind(t)}t.parseLogLevel=(e,t,r)=>{if(e)return(0,n.hasOwn)(a,e)?e:void c(r).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(a))}`)};const o={error:i,warn:i,info:i,debug:i};let l=new WeakMap;function c(e){const t=e.logger,r=e.logLevel??"off";if(!t)return o;const n=l.get(t);if(n&&n[0]===r)return n[1];const a={error:s("error",t,r),warn:s("warn",t,r),info:s("info",t,r),debug:s("debug",t,r)};return l.set(t,[r,a]),a}t.formatRequestDetails=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e)},20075:(e,t,r)=>{"use strict";var n,a,i,s,o,l,c,d,u,p,m,h,f,g,y,v,b,_,w,P,O,S;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageStream=void 0;const E=r(47984),A=r(8709),I=r(72854),k=r(2492),T=r(50954),j="__json_buf";function C(e){return"tool_use"===e.type||"server_tool_use"===e.type}class x{constructor(){n.add(this),this.messages=[],this.receivedMessages=[],a.set(this,void 0),this.controller=new AbortController,i.set(this,void 0),s.set(this,()=>{}),o.set(this,()=>{}),l.set(this,void 0),c.set(this,()=>{}),d.set(this,()=>{}),u.set(this,{}),p.set(this,!1),m.set(this,!1),h.set(this,!1),f.set(this,!1),g.set(this,void 0),y.set(this,void 0),_.set(this,e=>{if(E.__classPrivateFieldSet(this,m,!0,"f"),(0,A.isAbortError)(e)&&(e=new I.APIUserAbortError),e instanceof I.APIUserAbortError)return E.__classPrivateFieldSet(this,h,!0,"f"),this._emit("abort",e);if(e instanceof I.AnthropicError)return this._emit("error",e);if(e instanceof Error){const t=new I.AnthropicError(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new I.AnthropicError(String(e)))}),E.__classPrivateFieldSet(this,i,new Promise((e,t)=>{E.__classPrivateFieldSet(this,s,e,"f"),E.__classPrivateFieldSet(this,o,t,"f")}),"f"),E.__classPrivateFieldSet(this,l,new Promise((e,t)=>{E.__classPrivateFieldSet(this,c,e,"f"),E.__classPrivateFieldSet(this,d,t,"f")}),"f"),E.__classPrivateFieldGet(this,i,"f").catch(()=>{}),E.__classPrivateFieldGet(this,l,"f").catch(()=>{})}get response(){return E.__classPrivateFieldGet(this,g,"f")}get request_id(){return E.__classPrivateFieldGet(this,y,"f")}async withResponse(){const e=await E.__classPrivateFieldGet(this,i,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new x;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,r){const n=new x;for(const e of t.messages)n._addMessageParam(e);return n._run(()=>n._createMessage(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},E.__classPrivateFieldGet(this,_,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,r){const a=r?.signal;let i;a&&(a.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),a.addEventListener("abort",i));try{E.__classPrivateFieldGet(this,n,"m",w).call(this);const{response:a,data:i}=await e.create({...t,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(a);for await(const e of i)E.__classPrivateFieldGet(this,n,"m",P).call(this,e);if(i.controller.signal?.aborted)throw new I.APIUserAbortError;E.__classPrivateFieldGet(this,n,"m",O).call(this)}finally{a&&i&&a.removeEventListener("abort",i)}}_connected(e){this.ended||(E.__classPrivateFieldSet(this,g,e,"f"),E.__classPrivateFieldSet(this,y,e?.headers.get("request-id"),"f"),E.__classPrivateFieldGet(this,s,"f").call(this,e),this._emit("connect"))}get ended(){return E.__classPrivateFieldGet(this,p,"f")}get errored(){return E.__classPrivateFieldGet(this,m,"f")}get aborted(){return E.__classPrivateFieldGet(this,h,"f")}abort(){this.controller.abort()}on(e,t){return(E.__classPrivateFieldGet(this,u,"f")[e]||(E.__classPrivateFieldGet(this,u,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=E.__classPrivateFieldGet(this,u,"f")[e];if(!r)return this;const n=r.findIndex(e=>e.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(E.__classPrivateFieldGet(this,u,"f")[e]||(E.__classPrivateFieldGet(this,u,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{E.__classPrivateFieldSet(this,f,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){E.__classPrivateFieldSet(this,f,!0,"f"),await E.__classPrivateFieldGet(this,l,"f")}get currentMessage(){return E.__classPrivateFieldGet(this,a,"f")}async finalMessage(){return await this.done(),E.__classPrivateFieldGet(this,n,"m",v).call(this)}async finalText(){return await this.done(),E.__classPrivateFieldGet(this,n,"m",b).call(this)}_emit(e,...t){if(E.__classPrivateFieldGet(this,p,"f"))return;"end"===e&&(E.__classPrivateFieldSet(this,p,!0,"f"),E.__classPrivateFieldGet(this,c,"f").call(this));const r=E.__classPrivateFieldGet(this,u,"f")[e];if(r&&(E.__classPrivateFieldGet(this,u,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return E.__classPrivateFieldGet(this,f,"f")||r?.length||Promise.reject(e),E.__classPrivateFieldGet(this,o,"f").call(this,e),E.__classPrivateFieldGet(this,d,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];E.__classPrivateFieldGet(this,f,"f")||r?.length||Promise.reject(e),E.__classPrivateFieldGet(this,o,"f").call(this,e),E.__classPrivateFieldGet(this,d,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",E.__classPrivateFieldGet(this,n,"m",v).call(this))}async _fromReadableStream(e,t){const r=t?.signal;let a;r&&(r.aborted&&this.controller.abort(),a=this.controller.abort.bind(this.controller),r.addEventListener("abort",a));try{E.__classPrivateFieldGet(this,n,"m",w).call(this),this._connected(null);const t=k.Stream.fromReadableStream(e,this.controller);for await(const e of t)E.__classPrivateFieldGet(this,n,"m",P).call(this,e);if(t.controller.signal?.aborted)throw new I.APIUserAbortError;E.__classPrivateFieldGet(this,n,"m",O).call(this)}finally{r&&a&&r.removeEventListener("abort",a)}}[(a=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakMap,_=new WeakMap,n=new WeakSet,v=function(){if(0===this.receivedMessages.length)throw new I.AnthropicError("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},b=function(){if(0===this.receivedMessages.length)throw new I.AnthropicError("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new I.AnthropicError("stream ended without producing a content block with type=text");return e.join(" ")},w=function(){this.ended||E.__classPrivateFieldSet(this,a,void 0,"f")},P=function(e){if(this.ended)return;const t=E.__classPrivateFieldGet(this,n,"m",S).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":"text"===r.type&&this._emit("citation",e.delta.citation,r.citations??[]);break;case"input_json_delta":C(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":E.__classPrivateFieldSet(this,a,t,"f")}},O=function(){if(this.ended)throw new I.AnthropicError("stream has ended, this shouldn't happen");const e=E.__classPrivateFieldGet(this,a,"f");if(!e)throw new I.AnthropicError("request ended without sending any chunks");return E.__classPrivateFieldSet(this,a,void 0,"f"),e},S=function(e){let t=E.__classPrivateFieldGet(this,a,"f");if("message_start"===e.type){if(t)throw new I.AnthropicError(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new I.AnthropicError(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push({...e.content_block}),t;case"content_block_delta":{const r=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===r?.type&&(t.content[e.index]={...r,text:(r.text||"")+e.delta.text});break;case"citations_delta":"text"===r?.type&&(t.content[e.index]={...r,citations:[...r.citations??[],e.delta.citation]});break;case"input_json_delta":if(r&&C(r)){let n=r[j]||"";n+=e.delta.partial_json;const a={...r};Object.defineProperty(a,j,{value:n,enumerable:!1,writable:!0}),n&&(a.input=(0,T.partialParse)(n)),t.content[e.index]=a}break;case"thinking_delta":"thinking"===r?.type&&(t.content[e.index]={...r,thinking:r.thinking+e.delta.thinking});break;case"signature_delta":"thinking"===r?.type&&(t.content[e.index]={...r,signature:e.delta.signature});break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("streamEvent",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new k.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}t.MessageStream=x},20178:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBearerToken=function(e){return!e.tokenType||"Bearer"===e.tokenType},t.isPopToken=function(e){return"pop"===e.tokenType},t.isTokenCredential=function(e){const t=e;return t&&"function"==typeof t.getToken&&(void 0===t.signRequest||t.getToken.length>0)}},20314:(e,t,r)=>{e.exports=r(85953)},20411:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbortError=void 0;var n=r(5603);Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return n.AbortError}})},20544:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.req=t.json=t.toBuffer=void 0;const s=i(r(58611)),o=i(r(65692));async function l(e){let t=0;const r=[];for await(const n of e)t+=n.length,r.push(n);return Buffer.concat(r,t)}t.toBuffer=l,t.json=async function(e){const t=(await l(e)).toString("utf8");try{return JSON.parse(t)}catch(e){const r=e;throw r.message+=` (input: ${t})`,r}},t.req=function(e,t={}){const r=(("string"==typeof e?e:e.href).startsWith("https:")?o:s).request(e,t),n=new Promise((e,t)=>{r.once("response",e).once("error",t).end()});return r.then=n.then.bind(n),r}},20645:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function t(t){return e[t]??null}const r={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input tidak sah: dijangka ${e.expected}, diterima ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombor";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input tidak sah: dijangka ${s.stringifyPrimitive(e.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Terlalu besar: dijangka ${e.origin??"nilai"} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"elemen"}`:`Terlalu besar: dijangka ${e.origin??"nilai"} adalah ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Terlalu kecil: dijangka ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`:`Terlalu kecil: dijangka ${e.origin} adalah ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`String tidak sah: mesti bermula dengan "${t.prefix}"`:"ends_with"===t.format?`String tidak sah: mesti berakhir dengan "${t.suffix}"`:"includes"===t.format?`String tidak sah: mesti mengandungi "${t.includes}"`:"regex"===t.format?`String tidak sah: mesti sepadan dengan corak ${t.pattern}`:`${r[t.format]??e.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${e.origin}`;case"invalid_union":default:return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${e.origin}`}}}},20896:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureOpenAI=void 0;const n=r(32012),a=r(82331),i=r(4304),s=r(81047),o=r(42784);class l extends i.OpenAI{get lc_aliases(){return{...super.lc_aliases,openAIApiKey:"openai_api_key",openAIApiVersion:"openai_api_version",openAIBasePath:"openai_api_base",deploymentName:"deployment_name",azureOpenAIEndpoint:"azure_endpoint",azureOpenAIApiVersion:"openai_api_version",azureOpenAIBasePath:"openai_api_base",azureOpenAIApiDeploymentName:"deployment_name"}}get lc_secrets(){return{...super.lc_secrets,azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"}}constructor(e){if(super(e),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiCompletionsDeploymentName||e?.azureOpenAIApiDeploymentName)??((0,a.getEnvironmentVariable)("AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME")||(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??e?.openAIApiKey??e?.apiKey??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_KEY"),this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??e?.openAIApiVersion??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,a.getEnvironmentVariable)("AZURE_OPENAI_BASE_PATH"),this.azureOpenAIEndpoint=e?.azureOpenAIEndpoint??(0,a.getEnvironmentVariable)("AZURE_OPENAI_ENDPOINT"),this.azureADTokenProvider=e?.azureADTokenProvider,!this.azureOpenAIApiKey&&!this.apiKey&&!this.azureADTokenProvider)throw new Error("Azure OpenAI API key or Token Provider not found")}_getClientOptions(e){if(!this.client){const e={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL},t=(0,s.getEndpoint)(e),r={...this.clientConfig,baseURL:t,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(r.apiKey=e.azureOpenAIApiKey),r.baseURL||delete r.baseURL;const a=(0,o.normalizeHeaders)(r.defaultHeaders);r.defaultHeaders={...r.defaultHeaders,"User-Agent":a["User-Agent"]?`${a["User-Agent"]}: langchainjs-azure-openai-v2`:"langchainjs-azure-openai-v2"},this.client=new n.AzureOpenAI({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,...r})}const t={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),t}toJSON(){const e=super.toJSON();function t(e){return"object"==typeof e&&null!=e}return t(e)&&t(e.kwargs)&&(delete e.kwargs.azure_openai_base_path,delete e.kwargs.azure_openai_api_deployment_name,delete e.kwargs.azure_openai_api_key,delete e.kwargs.azure_openai_api_version,delete e.kwargs.azure_open_ai_base_path),e}}t.AzureOpenAI=l},20917:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Agent=void 0;const o=i(r(69278)),l=i(r(58611)),c=r(65692);s(r(20544),t);const d=Symbol("AgentBaseInternalState");class u extends l.Agent{constructor(e){super(e),this[d]={}}isSecureEndpoint(e){if(e){if("boolean"==typeof e.secureEndpoint)return e.secureEndpoint;if("string"==typeof e.protocol)return"https:"===e.protocol}const{stack:t}=new Error;return"string"==typeof t&&t.split("\n").some(e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:"))}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);const t=new o.Socket({writable:!1});return this.sockets[e].push(t),this.totalSocketCount++,t}decrementSockets(e,t){if(!this.sockets[e]||null===t)return;const r=this.sockets[e],n=r.indexOf(t);-1!==n&&(r.splice(n,1),this.totalSocketCount--,0===r.length&&delete this.sockets[e])}getName(e){return this.isSecureEndpoint(e)?c.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,t,r){const n={...t,secureEndpoint:this.isSecureEndpoint(t)},a=this.getName(n),i=this.incrementSockets(a);Promise.resolve().then(()=>this.connect(e,n)).then(s=>{if(this.decrementSockets(a,i),s instanceof l.Agent)try{return s.addRequest(e,n)}catch(e){return r(e)}this[d].currentSocket=s,super.createSocket(e,t,r)},e=>{this.decrementSockets(a,i),r(e)})}createConnection(){const e=this[d].currentSocket;if(this[d].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[d].defaultPort??("https:"===this.protocol?443:80)}set defaultPort(e){this[d]&&(this[d].defaultPort=e)}get protocol(){return this[d].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[d]&&(this[d].protocol=e)}}t.Agent=u},21197:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleToolChoice=function(e){return e?"any"===e?{type:"any"}:"auto"===e?{type:"auto"}:"string"==typeof e?{type:"tool",name:e}:e:void 0}},21210:(e,t,r)=>{e.exports=r(33635)},21301:(e,t,r)=>{"use strict";var n,a,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAI=void 0;const o=r(79632),l=r(9491),c=r(15734),d=r(34741),u=r(30917),p=r(12193),m=o.__importStar(r(446)),h=o.__importStar(r(67458)),f=o.__importStar(r(41441)),g=r(35392),y=o.__importStar(r(44172)),v=o.__importStar(r(75552)),b=o.__importStar(r(78728)),_=o.__importStar(r(33946)),w=r(81482),P=r(32530),O=r(79045),S=r(1242),E=r(61461),A=r(87370),I=r(99458),k=r(24975),T=r(88014),j=r(1253),C=r(6183),x=r(76111),N=r(42099),$=r(74769),R=r(33453),M=r(79777),D=r(50477),L=r(93017),F=r(84229),U=r(12193),z=r(262),B=r(17237),V=r(86188),Z=r(15734);class G{constructor({baseURL:e=(0,B.readEnv)("OPENAI_BASE_URL"),apiKey:t=(0,B.readEnv)("OPENAI_API_KEY"),organization:r=(0,B.readEnv)("OPENAI_ORG_ID")??null,project:s=(0,B.readEnv)("OPENAI_PROJECT_ID")??null,webhookSecret:l=(0,B.readEnv)("OPENAI_WEBHOOK_SECRET")??null,...c}={}){if(n.add(this),i.set(this,void 0),this.completions=new _.Completions(this),this.chat=new _.Chat(this),this.embeddings=new _.Embeddings(this),this.files=new _.Files(this),this.images=new _.Images(this),this.audio=new _.Audio(this),this.moderations=new _.Moderations(this),this.models=new _.Models(this),this.fineTuning=new _.FineTuning(this),this.graders=new _.Graders(this),this.vectorStores=new _.VectorStores(this),this.webhooks=new _.Webhooks(this),this.beta=new _.Beta(this),this.batches=new _.Batches(this),this.uploads=new _.Uploads(this),this.responses=new _.Responses(this),this.evals=new _.Evals(this),this.containers=new _.Containers(this),void 0===t)throw new y.OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const d={apiKey:t,organization:r,project:s,webhookSecret:l,...c,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&(0,U.isRunningInBrowser)())throw new y.OpenAIError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");this.baseURL=d.baseURL,this.timeout=d.timeout??a.DEFAULT_TIMEOUT,this.logger=d.logger??console;const u="warn";this.logLevel=u,this.logLevel=(0,V.parseLogLevel)(d.logLevel,"ClientOptions.logLevel",this)??(0,V.parseLogLevel)((0,B.readEnv)("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=d.fetchOptions,this.maxRetries=d.maxRetries??2,this.fetch=d.fetch??m.getDefaultFetch(),o.__classPrivateFieldSet(this,i,h.FallbackEncoder,"f"),this._options=d,this.apiKey=t,this.organization=r,this.project=s,this.webhookSecret=l}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}async authHeaders(e){return(0,z.buildHeaders)([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return f.stringify(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${g.VERSION}`}defaultIdempotencyKey(){return`stainless-node-retry-${(0,l.uuid4)()}`}makeStatusError(e,t,r,n){return y.APIError.generate(e,t,r,n)}buildURL(e,t,r){const a=!o.__classPrivateFieldGet(this,n,"m",s).call(this)&&r||this.baseURL,i=(0,c.isAbsoluteURL)(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return(0,Z.isEmptyObj)(l)||(t={...l,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new w.APIPromise(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){const n=await e,a=n.maxRetries??this.maxRetries;null==t&&(t=a),await this.prepareOptions(n);const{req:i,url:s,timeout:o}=await this.buildRequest(n,{retryCount:a-t});await this.prepareRequest(i,{url:s,options:n});const l="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=void 0===r?"":`, retryOf: ${r}`,p=Date.now();if((0,V.loggerFor)(this).debug(`[${l}] sending request`,(0,V.formatRequestDetails)({retryOfRequestLogID:r,method:n.method,url:s,options:n,headers:i.headers})),n.signal?.aborted)throw new y.APIUserAbortError;const h=new AbortController,f=await this.fetchWithTimeout(s,i,o,h).catch(u.castToError),g=Date.now();if(f instanceof Error){const e=`retrying, ${t} attempts remaining`;if(n.signal?.aborted)throw new y.APIUserAbortError;const a=(0,u.isAbortError)(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return(0,V.loggerFor)(this).info(`[${l}] connection ${a?"timed out":"failed"} - ${e}`),(0,V.loggerFor)(this).debug(`[${l}] connection ${a?"timed out":"failed"} (${e})`,(0,V.formatRequestDetails)({retryOfRequestLogID:r,url:s,durationMs:g-p,message:f.message})),this.retryRequest(n,t,r??l);if((0,V.loggerFor)(this).info(`[${l}] connection ${a?"timed out":"failed"} - error; no more retries left`),(0,V.loggerFor)(this).debug(`[${l}] connection ${a?"timed out":"failed"} (error; no more retries left)`,(0,V.formatRequestDetails)({retryOfRequestLogID:r,url:s,durationMs:g-p,message:f.message})),a)throw new y.APIConnectionTimeoutError;throw new y.APIConnectionError({cause:f})}const v=`[${l}${d}${[...f.headers.entries()].filter(([e])=>"x-request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join("")}] ${i.method} ${s} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${g-p}ms`;if(!f.ok){const e=await this.shouldRetry(f);if(t&&e){const e=`retrying, ${t} attempts remaining`;return await m.CancelReadableStream(f.body),(0,V.loggerFor)(this).info(`${v} - ${e}`),(0,V.loggerFor)(this).debug(`[${l}] response error (${e})`,(0,V.formatRequestDetails)({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:g-p})),this.retryRequest(n,t,r??l,f.headers)}const a=e?"error; no more retries left":"error; not retryable";(0,V.loggerFor)(this).info(`${v} - ${a}`);const i=await f.text().catch(e=>(0,u.castToError)(e).message),s=(0,c.safeJSON)(i),o=s?void 0:i;throw(0,V.loggerFor)(this).debug(`[${l}] response error (${a})`,(0,V.formatRequestDetails)({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,message:o,durationMs:Date.now()-p})),this.makeStatusError(f.status,s,o,f.headers)}return(0,V.loggerFor)(this).info(v),(0,V.loggerFor)(this).debug(`[${l}] response start`,(0,V.formatRequestDetails)({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:g-p})),{response:f,options:n,controller:h,requestLogID:l,retryOfRequestLogID:r,startTime:p}}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}requestAPIList(e,t){const r=this.makeRequest(t,null,void 0);return new v.PagePromise(this,r,e)}async fetchWithTimeout(e,t,r,n){const{signal:a,method:i,...s}=t||{};a&&a.addEventListener("abort",()=>n.abort());const o=setTimeout(()=>n.abort(),r),l=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,c={signal:n.signal,...l?{duplex:"half"}:{},method:"GET",...s};i&&(c.method=i.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(o)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r,n){let a;const i=n?.get("retry-after-ms");if(i){const e=parseFloat(i);Number.isNaN(e)||(a=e)}const s=n?.get("retry-after");if(s&&!a){const e=parseFloat(s);a=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(a&&0<=a&&a<6e4)){const r=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,r)}return await(0,d.sleep)(a),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e;return Math.min(.5*Math.pow(2,r),8)*(1-.25*Math.random())*1e3}async buildRequest(e,{retryCount:t=0}={}){const r={...e},{method:n,path:a,query:i,defaultBaseURL:s}=r,o=this.buildURL(a,i,s);"timeout"in r&&(0,c.validatePositiveInteger)("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:l,body:d}=this.buildBody({options:r});return{req:{method:n,headers:await this.buildHeaders({options:e,method:n,bodyHeaders:l,retryCount:t}),...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...r.fetchOptions??{}},url:o,timeout:r.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:n}){let a={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const i=(0,z.buildHeaders)([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(n),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...(0,p.getPlatformHeaders)(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=(0,z.buildHeaders)([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:m.ReadableStreamFrom(e)}:o.__classPrivateFieldGet(this,i,"f").call(this,{body:e,headers:r})}}t.OpenAI=G,a=G,i=new WeakMap,n=new WeakSet,s=function(){return"https://api.openai.com/v1"!==this.baseURL},G.OpenAI=a,G.DEFAULT_TIMEOUT=6e5,G.OpenAIError=y.OpenAIError,G.APIError=y.APIError,G.APIConnectionError=y.APIConnectionError,G.APIConnectionTimeoutError=y.APIConnectionTimeoutError,G.APIUserAbortError=y.APIUserAbortError,G.NotFoundError=y.NotFoundError,G.ConflictError=y.ConflictError,G.RateLimitError=y.RateLimitError,G.BadRequestError=y.BadRequestError,G.AuthenticationError=y.AuthenticationError,G.InternalServerError=y.InternalServerError,G.PermissionDeniedError=y.PermissionDeniedError,G.UnprocessableEntityError=y.UnprocessableEntityError,G.InvalidWebhookSignatureError=y.InvalidWebhookSignatureError,G.toFile=b.toFile,G.Completions=O.Completions,G.Chat=x.Chat,G.Embeddings=S.Embeddings,G.Files=E.Files,G.Images=A.Images,G.Audio=j.Audio,G.Moderations=k.Moderations,G.Models=I.Models,G.FineTuning=R.FineTuning,G.Graders=M.Graders,G.VectorStores=F.VectorStores,G.Webhooks=T.Webhooks,G.Beta=C.Beta,G.Batches=P.Batches,G.Uploads=L.Uploads,G.Responses=D.Responses,G.Evals=$.Evals,G.Containers=N.Containers},21391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendRequest=void 0;const n=r(11715),a=r(68208),i=r(68104);function s(e){return"string"==typeof e||e instanceof Uint8Array||"function"==typeof e.stream}function o(e){return e instanceof Uint8Array?(0,n.createFile)(e,"blob"):e}function l(e){const t={};for(const r in e){const n=e[r];t[r]=Array.isArray(n)?n.map(o):o(n)}return t}t.sendRequest=async function(e,t,r,o={},c){var d;const u=null!=c?c:(0,a.getCachedDefaultHttpsClient)(),p=function(e,t,r={}){var a,o,c;const d=function(e={}){var t,r,n;return null!==(n=null!==(t=e.contentType)&&void 0!==t?t:null===(r=e.headers)||void 0===r?void 0:r["content-type"])&&void 0!==n?n:function(e){if(ArrayBuffer.isView(e))return"application/octet-stream";if("string"==typeof e)try{return JSON.parse(e),"application/json; charset=UTF-8"}catch(e){return}return"application/json; charset=UTF-8"}(e.body)}(r),{body:u,formData:p}=function(e,t=""){if(void 0===e)return{body:void 0};if((0,i.isReadableStream)(e))return{body:e};const r=t.split(";")[0];if("application/json"===r)return{body:JSON.stringify(e)};if(ArrayBuffer.isView(e))return{body:e instanceof Uint8Array?e:JSON.stringify(e)};switch(r){case"multipart/form-data":return function(e){return void 0!==e&&e instanceof Object&&Object.values(e).every(e=>s(e)||Array.isArray(e)&&e.every(s))}(e)?{formData:l(e)}:{body:JSON.stringify(e)};case"text/plain":return{body:String(e)};default:return"string"==typeof e?{body:e}:{body:JSON.stringify(e)}}}(r.body,d),m=void 0!==u||void 0!==p,h=(0,n.createHttpHeaders)(Object.assign(Object.assign(Object.assign({},r.headers?r.headers:{}),{accept:null!==(c=null!==(a=r.accept)&&void 0!==a?a:null===(o=r.headers)||void 0===o?void 0:o.accept)&&void 0!==c?c:"application/json"}),m&&d&&{"content-type":d}));return(0,n.createPipelineRequest)({url:t,method:e,body:u,formData:p,headers:h,allowInsecureConnection:r.allowInsecureConnection,tracingOptions:r.tracingOptions,abortSignal:r.abortSignal,onUploadProgress:r.onUploadProgress,onDownloadProgress:r.onDownloadProgress,timeout:r.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:r.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}(e,t,o),m=await r.sendRequest(u,p),h=m.headers.toJSON(),f=null!==(d=m.readableStreamBody)&&void 0!==d?d:m.browserStreamBody,g=o.responseAsStream||void 0!==f?void 0:function(e){var t,r;const a=(null!==(t=e.headers.get("content-type"))&&void 0!==t?t:"").split(";")[0],i=null!==(r=e.bodyAsText)&&void 0!==r?r:"";if("text/plain"===a)return String(i);try{return i?JSON.parse(i):void 0}catch(t){if("application/json"===a)throw function(e,t){var r;const a=`Error "${t}" occurred while parsing the response body - ${e.bodyAsText}.`,i=null!==(r=t.code)&&void 0!==r?r:n.RestError.PARSE_ERROR;return new n.RestError(a,{code:i,statusCode:e.status,request:e.request,response:e})}(e,t);return String(i)}}(m),y=null!=f?f:g;return(null==o?void 0:o.onResponse)&&o.onResponse(Object.assign(Object.assign({},m),{request:p,rawHeaders:h,parsedBody:g})),{request:p,headers:h,status:`${m.status}`,body:y}}},21468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEffectsDef=void 0;const n=r(55767),a=r(59160);t.parseEffectsDef=function(e,t){return"input"===t.effectStrategy?(0,n.parseDef)(e.schema._def,t):(0,a.parseAnyDef)(t)}},21605:(e,t,r)=>{"use strict";e.exports={...r(98737),...r(4423),...r(52591),...r(76288),...r(23376),...r(63798),...r(42455),...r(77024),...r(29288),...r(35422)}},21671:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Beta=void 0;const n=r(47984),a=r(24472),i=n.__importStar(r(52670)),s=r(52670),o=n.__importStar(r(58091)),l=r(58091),c=n.__importStar(r(31e3)),d=r(31e3);class u extends a.APIResource{constructor(){super(...arguments),this.models=new o.Models(this._client),this.messages=new c.Messages(this._client),this.files=new i.Files(this._client)}}t.Beta=u,u.Models=l.Models,u.Messages=d.Messages,u.Files=s.Files},22055:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raceWithSignal=void 0,t.raceWithSignal=async function(e,t){if(void 0===t)return e;let r;return Promise.race([e.catch(e=>{if(!t?.aborted)throw e}),new Promise((e,n)=>{r=()=>{n(new Error("Aborted"))},t.addEventListener("abort",r),t.aborted&&n(new Error("Aborted"))})]).finally(()=>t.removeEventListener("abort",r))}},22118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consumeAsyncIterableInContext=t.consumeIteratorInContext=t.isAsyncIterable=t.isIterator=t.isIterableIterator=void 0;const n=r(12322);t.isIterableIterator=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.iterator]&&"function"==typeof e.next},t.isIterator=e=>null!=e&&"object"==typeof e&&"next"in e&&"function"==typeof e.next,t.isAsyncIterable=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.asyncIterator]},t.consumeIteratorInContext=function*(e,t){for(;;){const{value:r,done:a}=n.AsyncLocalStorageProviderSingleton.runWithConfig(e,t.next.bind(t),!0);if(a)break;yield r}},t.consumeAsyncIterableInContext=async function*(e,t){const r=t[Symbol.asyncIterator]();for(;;){const{value:a,done:i}=await n.AsyncLocalStorageProviderSingleton.runWithConfig(e,r.next.bind(t),!0);if(i)break;yield a}}},22253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=function(e,t,r){return new Promise((i,s)=>{let o,l;const c=()=>s(new n.AbortError((null==r?void 0:r.abortErrorMsg)?null==r?void 0:r.abortErrorMsg:a)),d=()=>{(null==r?void 0:r.abortSignal)&&l&&r.abortSignal.removeEventListener("abort",l)};if(l=()=>(o&&clearTimeout(o),d(),c()),(null==r?void 0:r.abortSignal)&&r.abortSignal.aborted)return c();o=setTimeout(()=>{d(),i(t)},e),(null==r?void 0:r.abortSignal)&&r.abortSignal.addEventListener("abort",l)})},t.parseHeaderValueAsNumber=function(e,t){const r=e.headers.get(t);if(!r)return;const n=Number(r);return Number.isNaN(n)?void 0:n};const n=r(35001),a="The operation was aborted."},22268:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graders=void 0;const n=r(82040);class a extends n.APIResource{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}t.Graders=a},22487:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLangChainErrorFields=function(e,t){return e.lc_error_code=t,e.message=`${e.message}\n\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${t}/\n`,e}},22729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptionSessions=void 0;const n=r(82040),a=r(262);class i extends n.APIResource{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:(0,a.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}t.TranscriptionSessions=i},23063:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnumDef=function(e){return{type:"string",enum:[...e.values]}}},23288:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserAgentHeaderName=function(){return(0,n.getHeaderName)()},t.getUserAgentValue=async function(e){const t=new Map;t.set("core-rest-pipeline",a.SDK_VERSION),await(0,n.setPlatformSpecificData)(t);const r=function(e){const t=[];for(const[r,n]of e){const e=n?`${r}/${n}`:r;t.push(e)}return t.join(" ")}(t);return e?`${e} ${r}`:r};const n=r(97099),a=r(9670)},23376:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,a=r(12934);a.outputJson=n(r(6426)),a.outputJsonSync=r(32188),a.outputJSON=a.outputJson,a.outputJSONSync=a.outputJsonSync,a.writeJSON=a.writeJson,a.writeJSONSync=a.writeJsonSync,a.readJSON=a.readJson,a.readJSONSync=a.readJsonSync,e.exports=a},23449:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertPromptToAnthropic=function(e){const t=e.toChatMessages(),r=(0,n._convertMessagesToAnthropicPayload)(t);return void 0===r.messages&&(r.messages=[]),r};const n=r(27)},23876:(e,t,r)=>{"use strict";const n=r(63735),a=r(16928),i=r(63798).mkdirsSync,s=r(47211).utimesMillisSync,o=r(66462);function l(e,t,r,i){const s=(i.dereference?n.statSync:n.lstatSync)(t);if(s.isDirectory())return function(e,t,r,a,i){return t?u(r,a,i):function(e,t,r,a){return n.mkdirSync(r),u(t,r,a),d(r,e)}(e.mode,r,a,i)}(s,e,t,r,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return function(e,t,r,a,i){return t?function(e,t,r,a){if(a.overwrite)return n.unlinkSync(r),c(e,t,r,a);if(a.errorOnExist)throw new Error(`'${r}' already exists`)}(e,r,a,i):c(e,r,a,i)}(s,e,t,r,i);if(s.isSymbolicLink())return function(e,t,r,i){let s=n.readlinkSync(t);if(i.dereference&&(s=a.resolve(process.cwd(),s)),e){let e;try{e=n.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return n.symlinkSync(s,r);throw e}if(i.dereference&&(e=a.resolve(process.cwd(),e)),o.isSrcSubdir(s,e))throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${e}'.`);if(o.isSrcSubdir(e,s))throw new Error(`Cannot overwrite '${e}' with '${s}'.`);return function(e,t){return n.unlinkSync(t),n.symlinkSync(e,t)}(s,r)}return n.symlinkSync(s,r)}(e,t,r,i);if(s.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(s.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function c(e,t,r,a){return n.copyFileSync(t,r),a.preserveTimestamps&&function(e,t,r){(function(e){return!(128&e)})(e)&&function(e,t){d(e,128|t)}(r,e),function(e,t){const r=n.statSync(e);s(t,r.atime,r.mtime)}(t,r)}(e.mode,t,r),d(r,e.mode)}function d(e,t){return n.chmodSync(e,t)}function u(e,t,r){const a=n.opendirSync(e);try{let n;for(;null!==(n=a.readSync());)p(n.name,e,t,r)}finally{a.closeSync()}}function p(e,t,r,n){const i=a.join(t,e),s=a.join(r,e);if(n.filter&&!n.filter(i,s))return;const{destStat:c}=o.checkPathsSync(i,s,"copy",n);return l(c,i,s,n)}e.exports=function(e,t,r){"function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:s,destStat:c}=o.checkPathsSync(e,t,"copy",r);if(o.checkParentPathsSync(e,s,t,"copy"),r.filter&&!r.filter(e,t))return;const d=a.dirname(t);return n.existsSync(d)||i(d),l(c,e,t,r)}},24116:(e,t,r)=>{"use strict";const n=r(75617),a=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class i extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const s=(e,t)=>new Promise((r,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};const o=n.operation(t);o.attempt(async n=>{try{r(await e(n))}catch(e){if(!(e instanceof Error))return void s(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof i)o.stop(),s(e.originalError);else if(e instanceof TypeError&&(l=e.message,!a.includes(l)))o.stop(),s(e);else{((e,t,r)=>{const n=r.retries-(t-1);e.attemptNumber=t,e.retriesLeft=n})(e,n,t);try{await t.onFailedAttempt(e)}catch(e){return void s(e)}o.retry(e)||s(o.mainError())}}var l})});e.exports=s,e.exports.default=s,e.exports.AbortError=i},24290:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"ký tự",verb:"có"},file:{unit:"byte",verb:"có"},array:{unit:"phần tử",verb:"có"},set:{unit:"phần tử",verb:"có"}};function t(t){return e[t]??null}const r={regex:"đầu vào",email:"địa chỉ email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngày giờ ISO",date:"ngày ISO",time:"giờ ISO",duration:"khoảng thời gian ISO",ipv4:"địa chỉ IPv4",ipv6:"địa chỉ IPv6",cidrv4:"dải IPv4",cidrv6:"dải IPv6",base64:"chuỗi mã hóa base64",base64url:"chuỗi mã hóa base64url",json_string:"chuỗi JSON",e164:"số E.164",jwt:"JWT",template_literal:"đầu vào"};return e=>{switch(e.code){case"invalid_type":return`Đầu vào không hợp lệ: mong đợi ${e.expected}, nhận được ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"số";case"object":if(Array.isArray(e))return"mảng";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Đầu vào không hợp lệ: mong đợi ${s.stringifyPrimitive(e.values[0])}`:`Tùy chọn không hợp lệ: mong đợi một trong các giá trị ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Quá lớn: mong đợi ${e.origin??"giá trị"} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"phần tử"}`:`Quá lớn: mong đợi ${e.origin??"giá trị"} ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Quá nhỏ: mong đợi ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`:`Quá nhỏ: mong đợi ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Chuỗi không hợp lệ: phải bắt đầu bằng "${t.prefix}"`:"ends_with"===t.format?`Chuỗi không hợp lệ: phải kết thúc bằng "${t.suffix}"`:"includes"===t.format?`Chuỗi không hợp lệ: phải bao gồm "${t.includes}"`:"regex"===t.format?`Chuỗi không hợp lệ: phải khớp với mẫu ${t.pattern}`:`${r[t.format]??e.format} không hợp lệ`}case"not_multiple_of":return`Số không hợp lệ: phải là bội số của ${e.divisor}`;case"unrecognized_keys":return`Khóa không được nhận dạng: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Khóa không hợp lệ trong ${e.origin}`;case"invalid_union":default:return"Đầu vào không hợp lệ";case"invalid_element":return`Giá trị không hợp lệ trong ${e.origin}`}}}},24362:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.$ZodRealError=t.$ZodError=void 0,t.flattenError=function(e,t=e=>e.message){const r={},n=[];for(const a of e.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):n.push(t(a));return{formErrors:n,fieldErrors:r}},t.formatError=function(e,t){const r=t||function(e){return e.message},n={_errors:[]},a=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>a({issues:e}));else if("invalid_key"===t.code)a({issues:t.issues});else if("invalid_element"===t.code)a({issues:t.issues});else if(0===t.path.length)n._errors.push(r(t));else{let e=n,a=0;for(;a<t.path.length;){const n=t.path[a];a===t.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(r(t))):e[n]=e[n]||{_errors:[]},e=e[n],a++}}};return a(e),n},t.treeifyError=function(e,t){const r=t||function(e){return e.message},n={errors:[]},a=(e,t=[])=>{var i,s;for(const o of e.issues)if("invalid_union"===o.code&&o.errors.length)o.errors.map(e=>a({issues:e},o.path));else if("invalid_key"===o.code)a({issues:o.issues},o.path);else if("invalid_element"===o.code)a({issues:o.issues},o.path);else{const e=[...t,...o.path];if(0===e.length){n.errors.push(r(o));continue}let a=n,l=0;for(;l<e.length;){const t=e[l],n=l===e.length-1;"string"==typeof t?(a.properties??(a.properties={}),(i=a.properties)[t]??(i[t]={errors:[]}),a=a.properties[t]):(a.items??(a.items=[]),(s=a.items)[t]??(s[t]={errors:[]}),a=a.items[t]),n&&a.errors.push(r(o)),l++}}};return a(e),n},t.toDotPath=c,t.prettifyError=function(e){const t=[],r=[...e.issues].sort((e,t)=>e.path.length-t.path.length);for(const e of r)t.push(`✖ ${e.message}`),e.path?.length&&t.push(`  → at ${c(e.path)}`);return t.join("\n")};const s=r(98706),o=i(r(90523)),l=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,o.jsonStringifyReplacer,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})};function c(e){const t=[];for(const r of e)"number"==typeof r?t.push(`[${r}]`):"symbol"==typeof r?t.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?t.push(`[${JSON.stringify(r)}]`):(t.length&&t.push("."),t.push(r));return t.join("")}t.$ZodError=(0,s.$constructor)("$ZodError",l),t.$ZodRealError=(0,s.$constructor)("$ZodError",l,{Parent:Error})},24373:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapAbortSignalLikePolicyName=void 0,t.wrapAbortSignalLikePolicy=function(){return{name:t.wrapAbortSignalLikePolicyName,sendRequest:async(e,t)=>{if(!e.abortSignal)return t(e);const{abortSignal:r,cleanup:a}=(0,n.wrapAbortSignalLike)(e.abortSignal);e.abortSignal=r;try{return await t(e)}finally{null==a||a()}}}};const n=r(57994);t.wrapAbortSignalLikePolicyName="wrapAbortSignalLikePolicy"},24384:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Page=t.PagePromise=t.AbstractPage=void 0;const a=r(47984),i=r(58092),s=r(96199),o=r(13962),l=r(80694);class c{constructor(e,t,r,i){n.set(this,void 0),a.__classPrivateFieldSet(this,n,e,"f"),this.options=i,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new i.AnthropicError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await a.__classPrivateFieldGet(this,n,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(n=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}t.AbstractPage=c;class d extends o.APIPromise{constructor(e,t,r){super(e,t,async(e,t)=>new r(e,t.response,await(0,s.defaultParseResponse)(e,t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}t.PagePromise=d,t.Page=class extends c{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.has_more=r.has_more||!1,this.first_id=r.first_id||null,this.last_id=r.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){const e=this.first_id;return e?{...this.options,query:{...(0,l.maybeObj)(this.options.query),before_id:e}}:null}const e=this.last_id;return e?{...this.options,query:{...(0,l.maybeObj)(this.options.query),after_id:e}}:null}}},24434:e=>{"use strict";e.exports=require("events")},24467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(76982);t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,n.createHash)("md5").update(e).digest()}},24472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APIResource=void 0,t.APIResource=class{constructor(e){this._client=e}}},24493:(e,t,r)=>{"use strict";const n=r(53908);e.exports=(e,t)=>new n(e,t).patch},24608:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userAgentPolicyName=void 0,t.userAgentPolicy=function(e={}){const r=(0,n.getUserAgentValue)(e.userAgentPrefix);return{name:t.userAgentPolicyName,sendRequest:async(e,t)=>(e.headers.has(a)||e.headers.set(a,await r),t(e))}};const n=r(94220),a=(0,n.getUserAgentHeaderName)();t.userAgentPolicyName="userAgentPolicy"},24628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isKeyCredential=function(e){return(0,n.isObjectWithProperties)(e,["key"])&&"string"==typeof e.key};const n=r(16184)},24876:e=>{"use strict";e.exports=require("punycode")},24975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Moderations=void 0;const n=r(82040);class a extends n.APIResource{create(e,t){return this._client.post("/moderations",{body:e,...t})}}t.Moderations=a},25041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},25074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseOptionalDef=void 0;const n=r(95445);t.parseOptionalDef=(e,t)=>{if(t.propertyPath&&t.currentPath.slice(0,t.propertyPath.length).toString()===t.propertyPath.toString())return(0,n.parseDef)(e.innerType._def,{...t,currentPath:t.currentPath});const r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}}},25200:(e,t,r)=>{"use strict";const n=r(50560);e.exports=(e,t,r)=>n(e,t,r)<=0},25570:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:l()}};const s=i(r(90523));function o(e,t,r,n){const a=Math.abs(e),i=a%10,s=a%100;return s>=11&&s<=19?n:1===i?t:i>=2&&i<=4?r:n}const l=()=>{const e={string:{unit:{one:"символ",few:"символа",many:"символов"},verb:"иметь"},file:{unit:{one:"байт",few:"байта",many:"байт"},verb:"иметь"},array:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"},set:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"}};function t(t){return e[t]??null}const r={regex:"ввод",email:"email адрес",url:"URL",emoji:"эмодзи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата и время",date:"ISO дата",time:"ISO время",duration:"ISO длительность",ipv4:"IPv4 адрес",ipv6:"IPv6 адрес",cidrv4:"IPv4 диапазон",cidrv6:"IPv6 диапазон",base64:"строка в формате base64",base64url:"строка в формате base64url",json_string:"JSON строка",e164:"номер E.164",jwt:"JWT",template_literal:"ввод"};return e=>{switch(e.code){case"invalid_type":return`Неверный ввод: ожидалось ${e.expected}, получено ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"число";case"object":if(Array.isArray(e))return"массив";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Неверный ввод: ожидалось ${s.stringifyPrimitive(e.values[0])}`:`Неверный вариант: ожидалось одно из ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);if(n){const t=o(Number(e.maximum),n.unit.one,n.unit.few,n.unit.many);return`Слишком большое значение: ожидалось, что ${e.origin??"значение"} будет иметь ${r}${e.maximum.toString()} ${t}`}return`Слишком большое значение: ожидалось, что ${e.origin??"значение"} будет ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);if(n){const t=o(Number(e.minimum),n.unit.one,n.unit.few,n.unit.many);return`Слишком маленькое значение: ожидалось, что ${e.origin} будет иметь ${r}${e.minimum.toString()} ${t}`}return`Слишком маленькое значение: ожидалось, что ${e.origin} будет ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Неверная строка: должна начинаться с "${t.prefix}"`:"ends_with"===t.format?`Неверная строка: должна заканчиваться на "${t.suffix}"`:"includes"===t.format?`Неверная строка: должна содержать "${t.includes}"`:"regex"===t.format?`Неверная строка: должна соответствовать шаблону ${t.pattern}`:`Неверный ${r[t.format]??e.format}`}case"not_multiple_of":return`Неверное число: должно быть кратным ${e.divisor}`;case"unrecognized_keys":return`Нераспознанн${e.keys.length>1?"ые":"ый"} ключ${e.keys.length>1?"и":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Неверный ключ в ${e.origin}`;case"invalid_union":default:return"Неверные входные данные";case"invalid_element":return`Неверное значение в ${e.origin}`}}}},25884:e=>{"use strict";e.exports=(e,t)=>{t=t||process.argv;const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),a=t.indexOf("--");return-1!==n&&(-1===a||n<a)}},25983:(e,t)=>{"use strict";var r,n,a,i;Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNative=t.isNodeRuntime=t.isNodeLike=t.isBun=t.isDeno=t.isWebWorker=t.isBrowser=void 0,t.isBrowser="undefined"!=typeof window&&void 0!==window.document,t.isWebWorker="object"==typeof self&&"function"==typeof(null===self||void 0===self?void 0:self.importScripts)&&("DedicatedWorkerGlobalScope"===(null===(r=self.constructor)||void 0===r?void 0:r.name)||"ServiceWorkerGlobalScope"===(null===(n=self.constructor)||void 0===n?void 0:n.name)||"SharedWorkerGlobalScope"===(null===(a=self.constructor)||void 0===a?void 0:a.name)),t.isDeno="undefined"!=typeof Deno&&void 0!==Deno.version&&void 0!==Deno.version.deno,t.isBun="undefined"!=typeof Bun&&void 0!==Bun.version,t.isNodeLike=void 0!==globalThis.process&&Boolean(globalThis.process.version)&&Boolean(null===(i=globalThis.process.versions)||void 0===i?void 0:i.node),t.isNodeRuntime=t.isNodeLike&&!t.isBun&&!t.isDeno,t.isReactNative="undefined"!=typeof navigator&&"ReactNative"===(null===navigator||void 0===navigator?void 0:navigator.product)},26064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatMessageChunk=t.ChatMessage=void 0,t.isChatMessage=function(e){return"generic"===e._getType()},t.isChatMessageChunk=function(e){return"generic"===e._getType()};const n=r(15785);class a extends n.BaseMessage{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return a}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return"generic"===e._getType()}get _printableFields(){return{...super._printableFields,role:this.role}}}t.ChatMessage=a;class i extends n.BaseMessageChunk{static lc_name(){return"ChatMessageChunk"}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}t.ChatMessageChunk=i},26128:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPipelineRequest=function(e){return(0,n.createPipelineRequest)(e)};const n=r(26455)},26455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRestError=t.operationOptionsToRequestParameters=t.getClient=t.createDefaultHttpClient=t.uint8ArrayToString=t.stringToUint8Array=t.isRestError=t.RestError=t.createEmptyPipeline=t.createPipelineRequest=t.createHttpHeaders=t.TypeSpecRuntimeLogger=t.setLogLevel=t.getLogLevel=t.createClientLogger=t.AbortError=void 0;const n=r(31635);var a=r(35001);Object.defineProperty(t,"AbortError",{enumerable:!0,get:function(){return a.AbortError}});var i=r(18118);Object.defineProperty(t,"createClientLogger",{enumerable:!0,get:function(){return i.createClientLogger}}),Object.defineProperty(t,"getLogLevel",{enumerable:!0,get:function(){return i.getLogLevel}}),Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return i.setLogLevel}}),Object.defineProperty(t,"TypeSpecRuntimeLogger",{enumerable:!0,get:function(){return i.TypeSpecRuntimeLogger}});var s=r(18873);Object.defineProperty(t,"createHttpHeaders",{enumerable:!0,get:function(){return s.createHttpHeaders}}),n.__exportStar(r(37118),t),n.__exportStar(r(3438),t);var o=r(29676);Object.defineProperty(t,"createPipelineRequest",{enumerable:!0,get:function(){return o.createPipelineRequest}});var l=r(90685);Object.defineProperty(t,"createEmptyPipeline",{enumerable:!0,get:function(){return l.createEmptyPipeline}});var c=r(79227);Object.defineProperty(t,"RestError",{enumerable:!0,get:function(){return c.RestError}}),Object.defineProperty(t,"isRestError",{enumerable:!0,get:function(){return c.isRestError}});var d=r(47730);Object.defineProperty(t,"stringToUint8Array",{enumerable:!0,get:function(){return d.stringToUint8Array}}),Object.defineProperty(t,"uint8ArrayToString",{enumerable:!0,get:function(){return d.uint8ArrayToString}});var u=r(78293);Object.defineProperty(t,"createDefaultHttpClient",{enumerable:!0,get:function(){return u.createDefaultHttpClient}});var p=r(85492);Object.defineProperty(t,"getClient",{enumerable:!0,get:function(){return p.getClient}});var m=r(96398);Object.defineProperty(t,"operationOptionsToRequestParameters",{enumerable:!0,get:function(){return m.operationOptionsToRequestParameters}});var h=r(78731);Object.defineProperty(t,"createRestError",{enumerable:!0,get:function(){return h.createRestError}})},26548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sax=void 0;const r=function(){const e={parser:function(e,t){return new r(e,t)}};e.SAXParser=r,e.SAXStream=i,e.createStream=function(e,t){return new i(e,t)},e.MAX_BUFFER_LENGTH=65536;const t=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(n,a){if(!(this instanceof r))return new r(n,a);var i=this;!function(e){for(var r=0,n=t.length;r<n;r++)e[t[r]]=""}(i),i.q=i.c="",i.bufferCheckPosition=e.MAX_BUFFER_LENGTH,i.opt=a||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!n,i.noscript=!(!n&&!i.opt.noscript),i.state=O.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(d)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),E(i,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),r.prototype={end:function(){j(this)},write:function(r){var n=this;if(this.error)throw this.error;if(n.closed)return T(n,"Cannot write after close. Assign an onready handler.");if(null===r)return j(n);"object"==typeof r&&(r=r.toString());for(var a=0,i="";i=F(r,a++),n.c=i,i;)switch(n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++),n.state){case O.BEGIN:if(n.state=O.BEGIN_WHITESPACE,"\ufeff"===i)continue;L(n,i);continue;case O.BEGIN_WHITESPACE:L(n,i);continue;case O.TEXT:if(n.sawRoot&&!n.closedRoot){for(var l=a-1;i&&"<"!==i&&"&"!==i;)(i=F(r,a++))&&n.trackPosition&&(n.position++,"\n"===i?(n.line++,n.column=0):n.column++);n.textNode+=r.substring(l,a-1)}"<"!==i||n.sawRoot&&n.closedRoot&&!n.strict?(f(i)||n.sawRoot&&!n.closedRoot||C(n,"Text data outside of root node."),"&"===i?n.state=O.TEXT_ENTITY:n.textNode+=i):(n.state=O.OPEN_WAKA,n.startTagPosition=n.position);continue;case O.SCRIPT:"<"===i?n.state=O.SCRIPT_ENDING:n.script+=i;continue;case O.SCRIPT_ENDING:"/"===i?n.state=O.CLOSE_TAG:(n.script+="<"+i,n.state=O.SCRIPT);continue;case O.OPEN_WAKA:if("!"===i)n.state=O.SGML_DECL,n.sgmlDecl="";else if(f(i));else if(v(u,i))n.state=O.OPEN_TAG,n.tagName=i;else if("/"===i)n.state=O.CLOSE_TAG,n.tagName="";else if("?"===i)n.state=O.PROC_INST,n.procInstName=n.procInstBody="";else{if(C(n,"Unencoded <"),n.startTagPosition+1<n.position){var c=n.position-n.startTagPosition;i=new Array(c).join(" ")+i}n.textNode+="<"+i,n.state=O.TEXT}continue;case O.SGML_DECL:(n.sgmlDecl+i).toUpperCase()===s?(A(n,"onopencdata"),n.state=O.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+i==="--"?(n.state=O.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+i).toUpperCase()===o?(n.state=O.DOCTYPE,(n.doctype||n.sawRoot)&&C(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===i?(A(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=O.TEXT):g(i)?(n.state=O.SGML_DECL_QUOTED,n.sgmlDecl+=i):n.sgmlDecl+=i;continue;case O.SGML_DECL_QUOTED:i===n.q&&(n.state=O.SGML_DECL,n.q=""),n.sgmlDecl+=i;continue;case O.DOCTYPE:">"===i?(n.state=O.TEXT,A(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=i,"["===i?n.state=O.DOCTYPE_DTD:g(i)&&(n.state=O.DOCTYPE_QUOTED,n.q=i));continue;case O.DOCTYPE_QUOTED:n.doctype+=i,i===n.q&&(n.q="",n.state=O.DOCTYPE);continue;case O.DOCTYPE_DTD:n.doctype+=i,"]"===i?n.state=O.DOCTYPE:g(i)&&(n.state=O.DOCTYPE_DTD_QUOTED,n.q=i);continue;case O.DOCTYPE_DTD_QUOTED:n.doctype+=i,i===n.q&&(n.state=O.DOCTYPE_DTD,n.q="");continue;case O.COMMENT:"-"===i?n.state=O.COMMENT_ENDING:n.comment+=i;continue;case O.COMMENT_ENDING:"-"===i?(n.state=O.COMMENT_ENDED,n.comment=k(n.opt,n.comment),n.comment&&A(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+i,n.state=O.COMMENT);continue;case O.COMMENT_ENDED:">"!==i?(C(n,"Malformed comment"),n.comment+="--"+i,n.state=O.COMMENT):n.state=O.TEXT;continue;case O.CDATA:"]"===i?n.state=O.CDATA_ENDING:n.cdata+=i;continue;case O.CDATA_ENDING:"]"===i?n.state=O.CDATA_ENDING_2:(n.cdata+="]"+i,n.state=O.CDATA);continue;case O.CDATA_ENDING_2:">"===i?(n.cdata&&A(n,"oncdata",n.cdata),A(n,"onclosecdata"),n.cdata="",n.state=O.TEXT):"]"===i?n.cdata+="]":(n.cdata+="]]"+i,n.state=O.CDATA);continue;case O.PROC_INST:"?"===i?n.state=O.PROC_INST_ENDING:f(i)?n.state=O.PROC_INST_BODY:n.procInstName+=i;continue;case O.PROC_INST_BODY:if(!n.procInstBody&&f(i))continue;"?"===i?n.state=O.PROC_INST_ENDING:n.procInstBody+=i;continue;case O.PROC_INST_ENDING:">"===i?(A(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=O.TEXT):(n.procInstBody+="?"+i,n.state=O.PROC_INST_BODY);continue;case O.OPEN_TAG:v(p,i)?n.tagName+=i:(x(n),">"===i?R(n):"/"===i?n.state=O.OPEN_TAG_SLASH:(f(i)||C(n,"Invalid character in tag name"),n.state=O.ATTRIB));continue;case O.OPEN_TAG_SLASH:">"===i?(R(n,!0),M(n)):(C(n,"Forward-slash in opening tag not followed by >"),n.state=O.ATTRIB);continue;case O.ATTRIB:if(f(i))continue;">"===i?R(n):"/"===i?n.state=O.OPEN_TAG_SLASH:v(u,i)?(n.attribName=i,n.attribValue="",n.state=O.ATTRIB_NAME):C(n,"Invalid attribute name");continue;case O.ATTRIB_NAME:"="===i?n.state=O.ATTRIB_VALUE:">"===i?(C(n,"Attribute without value"),n.attribValue=n.attribName,$(n),R(n)):f(i)?n.state=O.ATTRIB_NAME_SAW_WHITE:v(p,i)?n.attribName+=i:C(n,"Invalid attribute name");continue;case O.ATTRIB_NAME_SAW_WHITE:if("="===i)n.state=O.ATTRIB_VALUE;else{if(f(i))continue;C(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",A(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===i?R(n):v(u,i)?(n.attribName=i,n.state=O.ATTRIB_NAME):(C(n,"Invalid attribute name"),n.state=O.ATTRIB)}continue;case O.ATTRIB_VALUE:if(f(i))continue;g(i)?(n.q=i,n.state=O.ATTRIB_VALUE_QUOTED):(C(n,"Unquoted attribute value"),n.state=O.ATTRIB_VALUE_UNQUOTED,n.attribValue=i);continue;case O.ATTRIB_VALUE_QUOTED:if(i!==n.q){"&"===i?n.state=O.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=i;continue}$(n),n.q="",n.state=O.ATTRIB_VALUE_CLOSED;continue;case O.ATTRIB_VALUE_CLOSED:f(i)?n.state=O.ATTRIB:">"===i?R(n):"/"===i?n.state=O.OPEN_TAG_SLASH:v(u,i)?(C(n,"No whitespace between attributes"),n.attribName=i,n.attribValue="",n.state=O.ATTRIB_NAME):C(n,"Invalid attribute name");continue;case O.ATTRIB_VALUE_UNQUOTED:if(!y(i)){"&"===i?n.state=O.ATTRIB_VALUE_ENTITY_U:n.attribValue+=i;continue}$(n),">"===i?R(n):n.state=O.ATTRIB;continue;case O.CLOSE_TAG:if(n.tagName)">"===i?M(n):v(p,i)?n.tagName+=i:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=O.SCRIPT):(f(i)||C(n,"Invalid tagname in closing tag"),n.state=O.CLOSE_TAG_SAW_WHITE);else{if(f(i))continue;b(u,i)?n.script?(n.script+="</"+i,n.state=O.SCRIPT):C(n,"Invalid tagname in closing tag."):n.tagName=i}continue;case O.CLOSE_TAG_SAW_WHITE:if(f(i))continue;">"===i?M(n):C(n,"Invalid characters in closing tag");continue;case O.TEXT_ENTITY:case O.ATTRIB_VALUE_ENTITY_Q:case O.ATTRIB_VALUE_ENTITY_U:var d,_;switch(n.state){case O.TEXT_ENTITY:d=O.TEXT,_="textNode";break;case O.ATTRIB_VALUE_ENTITY_Q:d=O.ATTRIB_VALUE_QUOTED,_="attribValue";break;case O.ATTRIB_VALUE_ENTITY_U:d=O.ATTRIB_VALUE_UNQUOTED,_="attribValue"}if(";"===i)if(n.opt.unparsedEntities){var w=D(n);n.entity="",n.state=d,n.write(w)}else n[_]+=D(n),n.entity="",n.state=d;else v(n.entity.length?h:m,i)?n.entity+=i:(C(n,"Invalid character in entity name"),n[_]+="&"+n.entity+i,n.entity="",n.state=d);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(r){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),a=0,i=0,s=t.length;i<s;i++){var o=r[t[i]].length;if(o>n)switch(t[i]){case"textNode":I(r);break;case"cdata":A(r,"oncdata",r.cdata),r.cdata="";break;case"script":A(r,"onscript",r.script),r.script="";break;default:T(r,"Max buffer length exceeded: "+t[i])}a=Math.max(a,o)}var l=e.MAX_BUFFER_LENGTH-a;r.bufferCheckPosition=l+r.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;I(e=this),""!==e.cdata&&(A(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(A(e,"onscript",e.script),e.script="")}};var n=ReadableStream;n||(n=function(){});var a=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function i(e,t){if(!(this instanceof i))return new i(e,t);n.apply(this),this._parser=new r(e,t),this.writable=!0,this.readable=!0;var s=this;this._parser.onend=function(){s.emit("end")},this._parser.onerror=function(e){s.emit("error",e),s._parser.error=null},this._decoder=null,a.forEach(function(e){Object.defineProperty(s,"on"+e,{get:function(){return s._parser["on"+e]},set:function(t){if(!t)return s.removeAllListeners(e),s._parser["on"+e]=t,t;s.on(e,t)},enumerable:!0,configurable:!1})})}i.prototype=Object.create(n.prototype,{constructor:{value:i}}),i.prototype.write=function(e){return this._parser.write(e.toString()),this.emit("data",e),!0},i.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},i.prototype.on=function(e,t){var r=this;return r._parser["on"+e]||-1===a.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),n.prototype.on.call(r,e,t)};var s="[CDATA[",o="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",d={xml:l,xmlns:c},u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function g(e){return'"'===e||"'"===e}function y(e){return">"===e||f(e)}function v(e,t){return e.test(t)}function b(e,t){return!v(e,t)}var _,w,P,O=0;for(var S in e.STATE={BEGIN:O++,BEGIN_WHITESPACE:O++,TEXT:O++,TEXT_ENTITY:O++,OPEN_WAKA:O++,SGML_DECL:O++,SGML_DECL_QUOTED:O++,DOCTYPE:O++,DOCTYPE_QUOTED:O++,DOCTYPE_DTD:O++,DOCTYPE_DTD_QUOTED:O++,COMMENT_STARTING:O++,COMMENT:O++,COMMENT_ENDING:O++,COMMENT_ENDED:O++,CDATA:O++,CDATA_ENDING:O++,CDATA_ENDING_2:O++,PROC_INST:O++,PROC_INST_BODY:O++,PROC_INST_ENDING:O++,OPEN_TAG:O++,OPEN_TAG_SLASH:O++,ATTRIB:O++,ATTRIB_NAME:O++,ATTRIB_NAME_SAW_WHITE:O++,ATTRIB_VALUE:O++,ATTRIB_VALUE_QUOTED:O++,ATTRIB_VALUE_CLOSED:O++,ATTRIB_VALUE_UNQUOTED:O++,ATTRIB_VALUE_ENTITY_Q:O++,ATTRIB_VALUE_ENTITY_U:O++,CLOSE_TAG:O++,CLOSE_TAG_SAW_WHITE:O++,SCRIPT:O++,SCRIPT_ENDING:O++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var r=e.ENTITIES[t],n="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n}),e.STATE)e.STATE[e.STATE[S]]=S;function E(e,t,r){e[t]&&e[t](r)}function A(e,t,r){e.textNode&&I(e),E(e,t,r)}function I(e){e.textNode=k(e.opt,e.textNode),e.textNode&&E(e,"ontext",e.textNode),e.textNode=""}function k(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function T(e,t){return I(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,E(e,"onerror",t),e}function j(e){return e.sawRoot&&!e.closedRoot&&C(e,"Unclosed root tag"),e.state!==O.BEGIN&&e.state!==O.BEGIN_WHITESPACE&&e.state!==O.TEXT&&T(e,"Unexpected end"),I(e),e.c="",e.closed=!0,E(e,"onend"),r.call(e,e.strict,e.opt),e}function C(e,t){if("object"!=typeof e||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&T(e,t)}function x(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,A(e,"onopentagstart",r)}function N(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),n=r[0],a=r[1];return t&&"xmlns"===e&&(n="xmlns",a=""),{prefix:n,local:a}}function $(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=N(e.attribName,!0),r=t.prefix,n=t.local;if("xmlns"===r)if("xml"===n&&e.attribValue!==l)C(e,"xml: prefix must be bound to "+l+"\nActual: "+e.attribValue);else if("xmlns"===n&&e.attribValue!==c)C(e,"xmlns: prefix must be bound to "+c+"\nActual: "+e.attribValue);else{var a=e.tag,i=e.tags[e.tags.length-1]||e;a.ns===i.ns&&(a.ns=Object.create(i.ns)),a.ns[n]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,A(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function R(e,t){if(e.opt.xmlns){var r=e.tag,n=N(e.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(C(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=n.prefix);var a=e.tags[e.tags.length-1]||e;r.ns&&a.ns!==r.ns&&Object.keys(r.ns).forEach(function(t){A(e,"onopennamespace",{prefix:t,uri:r.ns[t]})});for(var i=0,s=e.attribList.length;i<s;i++){var o=e.attribList[i],l=o[0],c=o[1],d=N(l,!0),u=d.prefix,p=d.local,m=""===u?"":r.ns[u]||"",h={name:l,value:c,prefix:u,local:p,uri:m};u&&"xmlns"!==u&&!m&&(C(e,"Unbound namespace prefix: "+JSON.stringify(u)),h.uri=u),e.tag.attributes[l]=h,A(e,"onattribute",h)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),A(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=O.TEXT:e.state=O.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function M(e){if(!e.tagName)return C(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=O.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=O.SCRIPT);A(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var n=r;t--&&e.tags[t].name!==n;)C(e,"Unexpected close tag");if(t<0)return C(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=O.TEXT);e.tagName=r;for(var a=e.tags.length;a-- >t;){var i=e.tag=e.tags.pop();e.tagName=e.tag.name,A(e,"onclosetag",e.tagName);var s={};for(var o in i.ns)s[o]=i.ns[o];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&i.ns!==l.ns&&Object.keys(i.ns).forEach(function(t){var r=i.ns[t];A(e,"onclosenamespace",{prefix:t,uri:r})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=O.TEXT}function D(e){var t,r=e.entity,n=r.toLowerCase(),a="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[n]?e.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),a=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),a=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||a.toLowerCase()!==r?(C(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function L(e,t){"<"===t?(e.state=O.OPEN_WAKA,e.startTagPosition=e.position):f(t)||(C(e,"Non-whitespace before first tag."),e.textNode=t,e.state=O.TEXT)}function F(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}return O=e.STATE,String.fromCodePoint||(_=String.fromCharCode,w=Math.floor,P=function(){var e,t,r=[],n=-1,a=arguments.length;if(!a)return"";for(var i="";++n<a;){var s=Number(arguments[n]);if(!isFinite(s)||s<0||s>1114111||w(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,r.push(e,t)),(n+1===a||r.length>16384)&&(i+=_.apply(null,r),r.length=0)}return i},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:P,configurable:!0,writable:!0}):String.fromCodePoint=P),e},n=r();t.sax=n},27087:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},27244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userAgentPolicyName=void 0,t.userAgentPolicy=function(e={}){const r=(0,n.getUserAgentValue)(e.userAgentPrefix);return{name:t.userAgentPolicyName,sendRequest:async(e,t)=>(e.headers.has(a)||e.headers.set(a,await r),t(e))}};const n=r(23288),a=(0,n.getUserAgentHeaderName)();t.userAgentPolicyName="userAgentPolicy"},27262:(e,t,r)=>{e.exports=r(68457)},27504:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIterator=void 0,t.isIterableIterator=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.iterator]&&"function"==typeof e.next},t.isAsyncIterable=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.asyncIterator]},t.consumeIteratorInContext=function*(e,t){for(;;){const{value:r,done:i}=n.AsyncLocalStorageProviderSingleton.runWithConfig((0,a.pickRunnableConfigKeys)(e),t.next.bind(t),!0);if(i)break;yield r}},t.consumeAsyncIterableInContext=async function*(e,t){const r=t[Symbol.asyncIterator]();for(;;){const{value:i,done:s}=await n.AsyncLocalStorageProviderSingleton.runWithConfig((0,a.pickRunnableConfigKeys)(e),r.next.bind(t),!0);if(s)break;yield i}};const n=r(84960),a=r(5272);t.isIterator=e=>null!=e&&"object"==typeof e&&"next"in e&&"function"==typeof e.next},27635:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleCallbackHandler=void 0;const a=n(r(33031)),i=r(847);function s(e,t){return`${e.open}${t}${e.close}`}function o(e,t){try{return JSON.stringify(e,null,2)}catch(e){return t}}function l(e){return"string"==typeof e?e.trim():null==e?e:o(e,e.toString())}function c(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:d}=a.default;class u extends i.BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const e=this.runMap.get(r.parent_run_id);if(!e)break;t.push(e),r=e}return t}getBreadcrumbs(e){const t=[...this.getParents(e).reverse(),e].map((e,t,r)=>{const n=`${e.execution_order}:${e.run_type}:${e.name}`;return t===r.length-1?s(a.default.bold,n):n}).join(" > ");return s(d.grey,t)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.green,"[chain/start]")} [${t}] Entering Chain run with input: ${o(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.cyan,"[chain/end]")} [${t}] [${c(e)}] Exiting Chain run with output: ${o(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.red,"[chain/error]")} [${t}] [${c(e)}] Chain run errored with error: ${o(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(e=>e.trim())}:e.inputs;console.log(`${s(d.green,"[llm/start]")} [${t}] Entering LLM run with input: ${o(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.cyan,"[llm/end]")} [${t}] [${c(e)}] Exiting LLM run with output: ${o(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.red,"[llm/error]")} [${t}] [${c(e)}] LLM run errored with error: ${o(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.green,"[tool/start]")} [${t}] Entering Tool run with input: "${l(e.inputs.input)}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.cyan,"[tool/end]")} [${t}] [${c(e)}] Exiting Tool run with output: "${l(e.outputs?.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.red,"[tool/error]")} [${t}] [${c(e)}] Tool run errored with error: ${o(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${o(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.cyan,"[retriever/end]")} [${t}] [${c(e)}] Exiting Retriever run with output: ${o(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.red,"[retriever/error]")} [${t}] [${c(e)}] Retriever run errored with error: ${o(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${s(d.blue,"[agent/action]")} [${r}] Agent selected action: ${o(t.actions[t.actions.length-1],"[action]")}`)}}t.ConsoleCallbackHandler=u},27682:(e,t)=>{"use strict";function r(e){return"object"==typeof e&&null!==e&&"type"in e&&"string"==typeof e.type&&"source_type"in e&&("url"===e.source_type||"base64"===e.source_type||"text"===e.source_type||"id"===e.source_type)}Object.defineProperty(t,"__esModule",{value:!0}),t.isDataContentBlock=r,t.isURLContentBlock=function(e){return r(e)&&"url"===e.source_type&&"url"in e&&"string"==typeof e.url},t.isBase64ContentBlock=function(e){return r(e)&&"base64"===e.source_type&&"data"in e&&"string"==typeof e.data},t.isPlainTextContentBlock=function(e){return r(e)&&"text"===e.source_type&&"text"in e&&"string"==typeof e.text},t.isIDContentBlock=function(e){return r(e)&&"id"===e.source_type&&"id"in e&&"string"==typeof e.id},t.convertToOpenAIImageBlock=function(e){if(r(e)){if("url"===e.source_type)return{type:"image_url",image_url:{url:e.url}};if("base64"===e.source_type){if(!e.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${e.mime_type};base64,${e.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")},t.parseMimeType=function(e){const t=e.split(";")[0].split("/");if(2!==t.length)throw new Error(`Invalid mime type: "${e}" - does not match type/subtype format.`);const r=t[0].trim(),n=t[1].trim();if(""===r||""===n)throw new Error(`Invalid mime type: "${e}" - type or subtype is empty.`);const a={};for(const t of e.split(";").slice(1)){const r=t.split("=");if(2!==r.length)throw new Error(`Invalid parameter syntax in mime type: "${e}".`);const n=r[0].trim(),i=r[1].trim();if(""===n)throw new Error(`Invalid parameter syntax in mime type: "${e}".`);a[n]=i}return{type:r,subtype:n,parameters:a}},t.parseBase64DataUrl=function({dataUrl:e,asTypedArray:t=!1}){const r=e.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let n;if(r)return n=r[1].toLowerCase(),{mime_type:n,data:t?Uint8Array.from(atob(r[2]),e=>e.charCodeAt(0)):r[2]}},t.convertToProviderContentBlock=function(e,t){if("text"===e.type){if(!t.fromStandardTextBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardTextBlock\` method.`);return t.fromStandardTextBlock(e)}if("image"===e.type){if(!t.fromStandardImageBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardImageBlock\` method.`);return t.fromStandardImageBlock(e)}if("audio"===e.type){if(!t.fromStandardAudioBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardAudioBlock\` method.`);return t.fromStandardAudioBlock(e)}if("file"===e.type){if(!t.fromStandardFileBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardFileBlock\` method.`);return t.fromStandardFileBlock(e)}throw new Error(`Unable to convert content block type '${e.type}' to provider-specific format: not recognized.`)}},27687:(e,t,r)=>{"use strict";const n=r(70857),a=r(25884),i=process.env;let s;function o(e){const t=function(e){if(!1===s)return 0;if(a("color=16m")||a("color=full")||a("color=truecolor"))return 3;if(a("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;const t=s?1:0;if("win32"===process.platform){const e=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in i)||"codeship"===i.CI_NAME?1:t;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if("truecolor"===i.COLORTERM)return 3;if("TERM_PROGRAM"in i){const e=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:(i.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}a("no-color")||a("no-colors")||a("color=false")?s=!1:(a("color")||a("colors")||a("color=true")||a("color=always"))&&(s=!0),"FORCE_COLOR"in i&&(s=0===i.FORCE_COLOR.length||0!==parseInt(i.FORCE_COLOR,10)),e.exports={supportsColor:o,stdout:o(process.stdout),stderr:o(process.stderr)}},28033:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncGeneratorWithSetup=t.IterableReadableStream=void 0,t.atee=function(e,t=2){const r=Array.from({length:t},()=>[]);return r.map(async function*(t){for(;;)if(0===t.length){const t=await e.next();for(const e of r)e.push(t)}else{if(t[0].done)return;yield t.shift().value}})},t.concat=function e(t,r){if(Array.isArray(t)&&Array.isArray(r))return t.concat(r);if("string"==typeof t&&"string"==typeof r)return t+r;if("number"==typeof t&&"number"==typeof r)return t+r;if("concat"in t&&"function"==typeof t.concat)return t.concat(r);if("object"==typeof t&&"object"==typeof r){const n={...t};for(const[t,a]of Object.entries(r))t in n&&!Array.isArray(n[t])?n[t]=e(n[t],a):n[t]=a;return n}throw new Error(`Cannot concat ${typeof t} and ${typeof r}`)},t.pipeGeneratorWithSetup=async function(e,t,r,n,...a){const i=new o({generator:t,startSetup:r,signal:n}),s=await i.setup;return{output:e(i,s,...a),setup:s}};const n=r(5272),a=r(84960),i=r(65129);class s extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const t=e.getReader();return new s({start:e=>function r(){return t.read().then(({done:t,value:n})=>{if(!t)return e.enqueue(n),r();e.close()})}(),cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new s({async pull(t){const{value:r,done:n}=await e.next();n&&t.close(),t.enqueue(r)},async cancel(t){await e.return(t)}})}}t.IterableReadableStream=s;class o{constructor(e){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((t,r)=>{a.AsyncLocalStorageProviderSingleton.runWithConfig((0,n.pickRunnableConfigKeys)(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(t,r):this.firstResult.then(e=>t(void 0),r)},!0)})}async next(...e){return this.signal?.throwIfAborted(),this.firstResultUsed?a.AsyncLocalStorageProviderSingleton.runWithConfig((0,n.pickRunnableConfigKeys)(this.config),this.signal?async()=>(0,i.raceWithSignal)(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}t.AsyncGeneratorWithSetup=o},28149:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAnthropicImageBlockParam=function(e){return null!=e&&("object"==typeof e&&("type"in e&&"image"===e.type&&("source"in e&&"object"==typeof e.source&&(null!=e.source&&("type"in e.source&&("base64"===e.source.type?"media_type"in e.source&&"string"==typeof e.source.media_type&&"data"in e.source&&"string"==typeof e.source.data:"url"===e.source.type&&("url"in e.source&&"string"==typeof e.source.url)))))))}},28195:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"문자",verb:"to have"},file:{unit:"바이트",verb:"to have"},array:{unit:"개",verb:"to have"},set:{unit:"개",verb:"to have"}};function t(t){return e[t]??null}const r={regex:"입력",email:"이메일 주소",url:"URL",emoji:"이모지",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 날짜시간",date:"ISO 날짜",time:"ISO 시간",duration:"ISO 기간",ipv4:"IPv4 주소",ipv6:"IPv6 주소",cidrv4:"IPv4 범위",cidrv6:"IPv6 범위",base64:"base64 인코딩 문자열",base64url:"base64url 인코딩 문자열",json_string:"JSON 문자열",e164:"E.164 번호",jwt:"JWT",template_literal:"입력"};return e=>{switch(e.code){case"invalid_type":return`잘못된 입력: 예상 타입은 ${e.expected}, 받은 타입은 ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}입니다`;case"invalid_value":return 1===e.values.length?`잘못된 입력: 값은 ${s.stringifyPrimitive(e.values[0])} 이어야 합니다`:`잘못된 옵션: ${s.joinValues(e.values,"또는 ")} 중 하나여야 합니다`;case"too_big":{const r=e.inclusive?"이하":"미만",n="미만"===r?"이어야 합니다":"여야 합니다",a=t(e.origin),i=a?.unit??"요소";return a?`${e.origin??"값"}이 너무 큽니다: ${e.maximum.toString()}${i} ${r}${n}`:`${e.origin??"값"}이 너무 큽니다: ${e.maximum.toString()} ${r}${n}`}case"too_small":{const r=e.inclusive?"이상":"초과",n="이상"===r?"이어야 합니다":"여야 합니다",a=t(e.origin),i=a?.unit??"요소";return a?`${e.origin??"값"}이 너무 작습니다: ${e.minimum.toString()}${i} ${r}${n}`:`${e.origin??"값"}이 너무 작습니다: ${e.minimum.toString()} ${r}${n}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`잘못된 문자열: "${t.prefix}"(으)로 시작해야 합니다`:"ends_with"===t.format?`잘못된 문자열: "${t.suffix}"(으)로 끝나야 합니다`:"includes"===t.format?`잘못된 문자열: "${t.includes}"을(를) 포함해야 합니다`:"regex"===t.format?`잘못된 문자열: 정규식 ${t.pattern} 패턴과 일치해야 합니다`:`잘못된 ${r[t.format]??e.format}`}case"not_multiple_of":return`잘못된 숫자: ${e.divisor}의 배수여야 합니다`;case"unrecognized_keys":return`인식할 수 없는 키: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`잘못된 키: ${e.origin}`;case"invalid_union":default:return"잘못된 입력";case"invalid_element":return`잘못된 값: ${e.origin}`}}}},28208:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parsedType=void 0,t.default=function(){return{localeError:o()}};const s=i(r(90523));t.parsedType=e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t};const o=()=>{const e={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function r(t){return e[t]??null}const n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Invalid input: expected ${e.expected}, received ${(0,t.parsedType)(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${s.stringifyPrimitive(e.values[0])}`:`Invalid option: expected one of ${s.joinValues(e.values,"|")}`;case"too_big":{const t=e.inclusive?"<=":"<",n=r(e.origin);return n?`Too big: expected ${e.origin??"value"} to have ${t}${e.maximum.toString()} ${n.unit??"elements"}`:`Too big: expected ${e.origin??"value"} to be ${t}${e.maximum.toString()}`}case"too_small":{const t=e.inclusive?">=":">",n=r(e.origin);return n?`Too small: expected ${e.origin} to have ${t}${e.minimum.toString()} ${n.unit}`:`Too small: expected ${e.origin} to be ${t}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Invalid string: must start with "${t.prefix}"`:"ends_with"===t.format?`Invalid string: must end with "${t.suffix}"`:"includes"===t.format?`Invalid string: must include "${t.includes}"`:"regex"===t.format?`Invalid string: must match pattern ${t.pattern}`:`Invalid ${n[t.format]??e.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${e.divisor}`;case"unrecognized_keys":return`Unrecognized key${e.keys.length>1?"s":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Invalid key in ${e.origin}`;case"invalid_union":default:return"Invalid input";case"invalid_element":return`Invalid value in ${e.origin}`}}}},28223:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventStreamCallbackHandler=t.isStreamEventsHandler=void 0;const n=r(847),a=r(71043),i=r(64494),s=r(46613);function o({name:e,serialized:t}){return void 0!==e?e:void 0!==t?.name?t.name:void 0!==t?.id&&Array.isArray(t?.id)?t.id[t.id.length-1]:"Unnamed"}t.isStreamEventsHandler=e=>"event_stream_tracer"===e.name;class l extends n.BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=a.IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.runType)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.runType)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async*tapOutputIterable(e,t){const r=await t.next();if(r.done)return;const n=this.runInfoMap.get(e);if(void 0===n)return void(yield r.value);function a(e,t){return"llm"===e&&"string"==typeof t?new s.GenerationChunk({text:t}):t}let i=this.tappedPromises.get(e);if(void 0===i){let s;i=new Promise(e=>{s=e}),this.tappedPromises.set(e,i);try{const i={event:`on_${n.runType}_stream`,run_id:e,name:n.name,tags:n.tags,metadata:n.metadata,data:{}};await this.send({...i,data:{chunk:a(n.runType,r.value)}},n),yield r.value;for await(const e of t)"tool"!==n.runType&&"retriever"!==n.runType&&await this.send({...i,data:{chunk:a(n.runType,e)}},n),yield e}finally{s()}}else{yield r.value;for await(const e of t)yield e}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const r=this.tappedPromises.get(e.run_id);void 0!==r?r.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){const t=o(e),r=void 0!==e.inputs.messages?"chat_model":"llm",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,n);const a=`on_${r}_start`;await this.send({event:a,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onLLMNewToken(e,t,r){const n=this.runInfoMap.get(e.id);let a,o;if(void 0===n)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(1!==this.runInfoMap.size){if("chat_model"===n.runType)o="on_chat_model_stream",a=void 0===r?.chunk?new i.AIMessageChunk({content:t,id:`run-${e.id}`}):r.chunk.message;else{if("llm"!==n.runType)throw new Error(`Unexpected run type ${n.runType}`);o="on_llm_stream",a=void 0===r?.chunk?new s.GenerationChunk({text:t}):r.chunk}await this.send({event:o,data:{chunk:a},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}}async onLLMEnd(e){const t=this.runInfoMap.get(e.id);let r;if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const n=e.outputs?.generations;let a;if("chat_model"===t.runType){for(const e of n??[]){if(void 0!==a)break;a=e[0]?.message}r="on_chat_model_end"}else{if("llm"!==t.runType)throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);a={generations:n?.map(e=>e.map(e=>({text:e.text,generationInfo:e.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},r="on_llm_end"}await this.sendEndEvent({event:r,data:{output:a,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){const t=o(e),r=e.run_type??"chain",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:e.run_type};let a={};""===e.inputs.input&&1===Object.keys(e.inputs).length?(a={},n.inputs={}):void 0!==e.inputs.input?(a.input=e.inputs.input,n.inputs=e.inputs.input):(a.input=e.inputs,n.inputs=e.inputs),this.runInfoMap.set(e.id,n),await this.send({event:`on_${r}_start`,data:a,name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onChainEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,n=e.inputs??t.inputs??{},a={output:e.outputs?.output??e.outputs,input:n};n.input&&1===Object.keys(n).length&&(a.input=n.input,t.inputs=n.input),await this.sendEndEvent({event:r,data:a,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){const t=o(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},r)}async onToolEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(void 0===t.inputs)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=void 0===e.outputs?.output?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){const t=o(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,r),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)}async onRetrieverEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,r){const n=this.runInfoMap.get(r);if(void 0===n)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:n.tags,metadata:n.metadata,data:t},n)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}t.EventStreamCallbackHandler=l},28261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.basicAuthenticationPolicyName=void 0,t.basicAuthenticationPolicy=function(e){return{name:t.basicAuthenticationPolicyName,async sendRequest(t,r){var i,s;if((0,a.ensureSecureConnection)(t,e),!(null===(s=null!==(i=t.authSchemes)&&void 0!==i?i:e.authSchemes)||void 0===s?void 0:s.find(e=>"http"===e.kind&&"basic"===e.scheme)))return r(t);const{username:o,password:l}=e.credential,c=(0,n.uint8ArrayToString)((0,n.stringToUint8Array)(`${o}:${l}`,"utf-8"),"base64");return t.headers.set("Authorization",`Basic ${c}`),r(t)}}};const n=r(47730),a=r(10851);t.basicAuthenticationPolicyName="bearerAuthenticationPolicy"},28273:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsymmetricStructuredOutputParser=t.JsonMarkdownStructuredOutputParser=t.StructuredOutputParser=void 0;const n=r(19164),a=r(37255),i=r(70866),s=r(32991);class o extends a.BaseOutputParser{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){return new this(n.z.object(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,n.z.string().describe(t)]))))}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.\n\n"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}\nwould match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.\nThus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n\`\`\`json\n${JSON.stringify((0,s.toJsonSchema)(this.schema))}\n\`\`\`\n`}async parse(e){try{const t=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(e,t)=>`"${t.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await(0,i.interopParseAsync)(this.schema,JSON.parse(t))}catch(t){throw new a.OutputParserException(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}}t.StructuredOutputParser=o;class l extends o{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){const t=e?.interpolationDepth??1;if(t<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:\n\`\`\`json\n${this._schemaToInstruction((0,s.toJsonSchema)(this.schema)).replaceAll("{","{".repeat(t)).replaceAll("}","}".repeat(t))}\n\`\`\``}_schemaToInstruction(e,t=2){const r=e;if("type"in r){let e,n=!1;if(Array.isArray(r.type)){const t=r.type.findIndex(e=>"null"===e);-1!==t&&(n=!0,r.type.splice(t,1)),e=r.type.join(" | ")}else e=r.type;if("object"===r.type&&r.properties){const e=r.description?` // ${r.description}`:"";return`{\n${Object.entries(r.properties).map(([e,n])=>{const a=r.required?.includes(e)?"":" (optional)";return`${" ".repeat(t)}"${e}": ${this._schemaToInstruction(n,t+2)}${a}`}).join("\n")}\n${" ".repeat(t-2)}}${e}`}if("array"===r.type&&r.items){const e=r.description?` // ${r.description}`:"";return`array[\n${" ".repeat(t)}${this._schemaToInstruction(r.items,t+2)}\n${" ".repeat(t-2)}] ${e}`}const a=n?" (nullable)":"";return`${e}${r.description?` // ${r.description}`:""}${a}`}if("anyOf"in r)return r.anyOf.map(e=>this._schemaToInstruction(e,t)).join(`\n${" ".repeat(t-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){return new this(n.z.object(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,n.z.string().describe(t)]))))}}t.JsonMarkdownStructuredOutputParser=l;class c extends a.BaseOutputParser{constructor({inputSchema:e}){super(...arguments),Object.defineProperty(this,"structuredInputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.structuredInputParser=new l(e)}async parse(e){let t;try{t=await this.structuredInputParser.parse(e)}catch(t){throw new a.OutputParserException(`Failed to parse. Text: "${e}". Error: ${t}`,e)}return this.outputProcessor(t)}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}}t.AsymmetricStructuredOutputParser=c},28276:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLangChainTool=t.isRunnableToolLike=t.isStructuredToolParams=t.isStructuredTool=void 0,t.convertToOpenAIFunction=s,t.convertToOpenAITool=function(e,t){const r="number"==typeof t?void 0:t;let a;return a=(0,n.isLangChainTool)(e)?{type:"function",function:s(e)}:e,void 0!==r?.strict&&(a.function.strict=r.strict),a};const n=r(61986),a=r(32991);var i=r(61986);function s(e,t){const r="number"==typeof t?void 0:t;return{name:e.name,description:e.description,parameters:(0,a.toJsonSchema)(e.schema),...void 0!==r?.strict?{strict:r.strict}:{}}}Object.defineProperty(t,"isStructuredTool",{enumerable:!0,get:function(){return i.isStructuredTool}}),Object.defineProperty(t,"isStructuredToolParams",{enumerable:!0,get:function(){return i.isStructuredToolParams}}),Object.defineProperty(t,"isRunnableToolLike",{enumerable:!0,get:function(){return i.isRunnableToolLike}}),Object.defineProperty(t,"isLangChainTool",{enumerable:!0,get:function(){return i.isLangChainTool}})},28580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCumulativeTransformOutputParser=t.BaseTransformOutputParser=void 0;const n=r(78168),a=r(37255),i=r(15785),s=r(68081),o=r(50383);class l extends a.BaseOutputParser{async*_transform(e){for await(const t of e)"string"==typeof t?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}t.BaseTransformOutputParser=l,t.BaseCumulativeTransformOutputParser=class extends l{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=e?.diff??this.diff}async*_transform(e){let t,r;for await(const a of e){if("string"!=typeof a&&"string"!=typeof a.content)throw new Error("Cannot handle non-string output.");let e;if((0,i.isBaseMessageChunk)(a)){if("string"!=typeof a.content)throw new Error("Cannot handle non-string message output.");e=new o.ChatGenerationChunk({message:a,text:a.content})}else if((0,i.isBaseMessage)(a)){if("string"!=typeof a.content)throw new Error("Cannot handle non-string message output.");e=new o.ChatGenerationChunk({message:(0,s.convertToChunk)(a),text:a.content})}else e=new o.GenerationChunk({text:a});r=void 0===r?e:r.concat(e);const l=await this.parsePartialResult([r]);null==l||(0,n.deepCompareStrict)(l,t)||(this.diff?yield this._diff(t,l):yield l,t=l)}}getFormatInstructions(){return""}}},28651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZodError=t.quotelessJson=t.ZodIssueCode=void 0;const n=r(92034);t.ZodIssueCode=n.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class a extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(n);else if("invalid_return_type"===a.code)n(a.returnTypeError);else if("invalid_arguments"===a.code)n(a.argumentsError);else if(0===a.path.length)r._errors.push(t(a));else{let e=r,n=0;for(;n<a.path.length;){const r=a.path[n];n===a.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(a))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof a))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)if(n.path.length>0){const r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}t.ZodError=a,a.create=e=>new a(e)},28799:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseObjectDef=void 0;const n=r(55767);function a(e){try{return e.isOptional()}catch{return!0}}t.parseObjectDef=function(e,t){const r="openAi"===t.target,i={type:"object",properties:{}},s=[],o=e.shape();for(const e in o){let l=o[e];if(void 0===l||void 0===l._def)continue;let c=a(l);c&&r&&("ZodOptional"===l._def.typeName&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const d=(0,n.parseDef)(l._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==d&&(i.properties[e]=d,c||s.push(e))}s.length&&(i.required=s);const l=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return(0,n.parseDef)(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==l&&(i.additionalProperties=l),i}},29147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureOpenAI=void 0;const n=r(79632).__importStar(r(89526)),a=r(34701),i=r(21301),s=r(262);class o extends i.OpenAI{constructor({baseURL:e=(0,a.readEnv)("OPENAI_BASE_URL"),apiKey:t=(0,a.readEnv)("AZURE_OPENAI_API_KEY"),apiVersion:r=(0,a.readEnv)("OPENAI_API_VERSION"),endpoint:i,deployment:s,azureADTokenProvider:o,dangerouslyAllowBrowser:l,...d}={}){if(!r)throw new n.OpenAIError("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if("function"==typeof o&&(l=!0),!o&&!t)throw new n.OpenAIError("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(o&&t)throw new n.OpenAIError("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(t??(t=c),d.defaultQuery={...d.defaultQuery,"api-version":r},e){if(i)throw new n.OpenAIError("baseURL and endpoint are mutually exclusive")}else{if(i||(i=process.env.AZURE_OPENAI_ENDPOINT),!i)throw new n.OpenAIError("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");e=`${i}/openai`}super({apiKey:t,baseURL:e,...d,...void 0!==l?{dangerouslyAllowBrowser:l}:{}}),this.apiVersion="",this._azureADTokenProvider=o,this.apiVersion=r,this.deploymentName=s}async buildRequest(e,t={}){if(l.has(e.path)&&"post"===e.method&&void 0!==e.body){if(!(0,a.isObj)(e.body))throw new Error("Expected request body to be an object");const t=this.deploymentName||e.body.model||e.__metadata?.model;void 0===t||this.baseURL.includes("/deployments")||(e.path=`/deployments/${t}${e.path}`)}return super.buildRequest(e,t)}async _getAzureADToken(){if("function"==typeof this._azureADTokenProvider){const e=await this._azureADTokenProvider();if(!e||"string"!=typeof e)throw new n.OpenAIError(`Expected 'azureADTokenProvider' argument to return a string but it returned ${e}`);return e}}async authHeaders(e){}async prepareOptions(e){if(e.headers=(0,s.buildHeaders)([e.headers]),e.headers.values.get("Authorization")||e.headers.values.get("api-key"))return super.prepareOptions(e);const t=await this._getAzureADToken();if(t)e.headers.values.set("Authorization",`Bearer ${t}`);else{if(this.apiKey===c)throw new n.OpenAIError("Unable to handle auth");e.headers.values.set("api-key",this.apiKey)}return super.prepareOptions(e)}}t.AzureOpenAI=o;const l=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/batches","/images/edits"]),c="<Missing Key>"},29288:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,a=r(98737);e.exports={pathExists:n(function(e){return a.access(e).then(()=>!0).catch(()=>!1)}),pathExistsSync:a.existsSync}},29542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseJsonMarkdown=t.parsePartialJson=t.JsonOutputParser=void 0;const n=r(28580),a=r(96096),i=r(39803);Object.defineProperty(t,"parseJsonMarkdown",{enumerable:!0,get:function(){return i.parseJsonMarkdown}}),Object.defineProperty(t,"parsePartialJson",{enumerable:!0,get:function(){return i.parsePartialJson}});class s extends n.BaseCumulativeTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?(0,a.compare)(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return(0,i.parseJsonMarkdown)(e[0].text)}async parse(e){return(0,i.parseJsonMarkdown)(e,JSON.parse)}getFormatInstructions(){return""}}t.JsonOutputParser=s},29649:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBigintDef=void 0;const n=r(61973);t.parseBigintDef=function(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const a of e.checks)switch(a.kind){case"min":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,t)}return r}},29676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPipelineRequest=function(e){return new i(e)};const n=r(18873),a=r(73476);class i{constructor(e){var t,r,i,s,o,l,c;this.url=e.url,this.body=e.body,this.headers=null!==(t=e.headers)&&void 0!==t?t:(0,n.createHttpHeaders)(),this.method=null!==(r=e.method)&&void 0!==r?r:"GET",this.timeout=null!==(i=e.timeout)&&void 0!==i?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=null!==(s=e.disableKeepAlive)&&void 0!==s&&s,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=null!==(o=e.withCredentials)&&void 0!==o&&o,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0,a.randomUUID)(),this.allowInsecureConnection=null!==(l=e.allowInsecureConnection)&&void 0!==l&&l,this.enableBrowserStreams=null!==(c=e.enableBrowserStreams)&&void 0!==c&&c,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}}},29937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exponentialRetryPolicyName=void 0,t.exponentialRetryPolicy=function(e={}){var t;return(0,a.retryPolicy)([(0,n.exponentialRetryStrategy)(Object.assign(Object.assign({},e),{ignoreSystemErrors:!0}))],{maxRetries:null!==(t=e.maxRetries)&&void 0!==t?t:i.DEFAULT_RETRY_POLICY_COUNT})};const n=r(4077),a=r(48334),i=r(37146);t.exponentialRetryPolicyName="exponentialRetryPolicy"},29953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPlatformHeaders=t.isRunningInBrowser=void 0;const n=r(19232);t.isRunningInBrowser=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator;const a=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",i=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let s;t.getPlatformHeaders=()=>s??(s=(()=>{const e="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":i(Deno.build.os),"X-Stainless-Arch":a(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":i(globalThis.process.platform??"unknown"),"X-Stainless-Arch":a(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const e=r.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":n.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})())},30107:(e,t,r)=>{e.exports=r(28276)},30144:(e,t,r)=>{"use strict";const n=r(53908);e.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},30228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new a(n,i||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,i=n.length,s=new Array(i);a<i;a++)s[a]=n[a].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,a,i,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,a),!0;case 5:return d.fn.call(d.context,t,n,a,i),!0;case 6:return d.fn.call(d.context,t,n,a,i,s),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var p,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,a);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,a){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||a&&!o.once||n&&o.context!==n||s(this,i);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||a&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[i]=1===c.length?c[0]:c:s(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},30528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolInputParsingException=t._isToolCall=void 0,t._isToolCall=function(e){return!(!e||"object"!=typeof e||!("type"in e)||"tool_call"!==e.type)};class r extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}t.ToolInputParsingException=r},30815:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLiteralDef=void 0,t.parseLiteralDef=function(e,t){const r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}},30917:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.castToError=void 0,t.isAbortError=function(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))},t.castToError=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)}},30938:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decompressResponsePolicyName=void 0,t.decompressResponsePolicy=function(){return(0,n.decompressResponsePolicy)()};const n=r(17445);t.decompressResponsePolicyName=n.decompressResponsePolicyName},31e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=void 0;const n=r(47984),a=r(24472),i=n.__importStar(r(60626)),s=r(60626),o=r(2758),l=r(65369),c={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"},d=r(48585);class u extends a.APIResource{constructor(){super(...arguments),this.batches=new i.Batches(this._client)}create(e,t){const{betas:r,...n}=e;n.model in c&&console.warn(`The model '${n.model}' is deprecated and will reach end-of-life on ${c[n.model]}\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let a=this._client._options.timeout;if(!n.stream&&null==a){const e=d.MODEL_NONSTREAMING_TOKENS[n.model]??void 0;a=this._client.calculateNonstreamingTimeout(n.max_tokens,e)}return this._client.post("/v1/messages?beta=true",{body:n,timeout:a??6e5,...t,headers:(0,o.buildHeaders)([{...null!=r?.toString()?{"anthropic-beta":r?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}stream(e,t){return l.BetaMessageStream.createMessage(this,e,t)}countTokens(e,t){const{betas:r,...n}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:n,...t,headers:(0,o.buildHeaders)([{"anthropic-beta":[...r??[],"token-counting-2024-11-01"].toString()},t?.headers])})}}t.Messages=u,u.Batches=s.Batches},31413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceGroup=t.CallbackManager=t.CallbackManagerForToolRun=t.CallbackManagerForChainRun=t.CallbackManagerForLLMRun=t.CallbackManagerForRetrieverRun=t.BaseRunManager=t.BaseCallbackManager=void 0,t.parseCallbackConfigArg=function(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}},t.ensureHandler=_,t.traceAsGroup=async function(e,t,...r){const n=new w(e.name,e),a=await n.start({...r});try{const e=await t(a,...r);return await n.end((i=e,s="output",i&&!Array.isArray(i)&&"object"==typeof i?i:{[s]:i})),e}catch(e){throw await n.error(e),e}var i,s};const n=r(95766),a=r(12031),i=r(88813),s=r(68081),o=r(60418),l=r(19979),c=r(41674),d=r(12311),u=r(18233),p=r(33054);class m{setHandler(e){return this.setHandlers([e])}}t.BaseCallbackManager=m;class h{constructor(e,t,r,n,a,i,s,o){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:o})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{try{await(t.handleText?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,n,a){await Promise.all(this.handlers.map(r=>(0,c.consumeCallback)(async()=>{try{await(r.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata))}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleCustomEvent: ${e}`),r.raiseError)throw e}},r.awaitHandlers)))}}t.BaseRunManager=h;class f extends h{getChild(e){const t=new b(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw e}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${r}`),t.raiseError)throw e}},t.awaitHandlers)))}}t.CallbackManagerForRetrieverRun=f;class g extends h{async handleLLMNewToken(e,t,r,n,a,i){await Promise.all(this.handlers.map(r=>(0,c.consumeCallback)(async()=>{if(!r.ignoreLLM)try{await(r.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,i))}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${e}`),r.raiseError)throw e}},r.awaitHandlers)))}async handleLLMError(e,t,r,n,a){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreLLM)try{await(t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,a))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMError: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleLLMEnd(e,t,r,n,a){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreLLM)try{await(t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,a))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}}t.CallbackManagerForLLMRun=g;class y extends h{getChild(e){const t=new b(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,n,a){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreChain)try{await(t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,a))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainError: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleChainEnd(e,t,r,n,a){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreChain)try{await(t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,a))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await(t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await(t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}}t.CallbackManagerForChainRun=y;class v extends h{getChild(e){const t=new b(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await(t.handleToolError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>(0,c.consumeCallback)(async()=>{if(!t.ignoreAgent)try{await(t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${e}`),t.raiseError)throw e}},t.awaitHandlers)))}}t.CallbackManagerForToolRun=v;class b extends m{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,r=void 0,a=void 0,i=void 0,s=void 0,o=void 0,l=void 0){return Promise.all(t.map(async(t,a)=>{const s=0===a&&r?r:(0,n.v4)();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return(0,u.isBaseTracer)(r)&&r._createRunForLLMStart(e,[t],s,this._parentRunId,i,this.tags,this.metadata,l),(0,c.consumeCallback)(async()=>{try{await(r.handleLLMStart?.(e,[t],s,this._parentRunId,i,this.tags,this.metadata,l))}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${e}`),r.raiseError)throw e}},r.awaitHandlers)})),new g(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r=void 0,a=void 0,i=void 0,o=void 0,l=void 0,d=void 0){return Promise.all(t.map(async(t,a)=>{const o=0===a&&r?r:(0,n.v4)();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return(0,u.isBaseTracer)(r)&&r._createRunForChatModelStart(e,[t],o,this._parentRunId,i,this.tags,this.metadata,d),(0,c.consumeCallback)(async()=>{try{if(r.handleChatModelStart)await(r.handleChatModelStart?.(e,[t],o,this._parentRunId,i,this.tags,this.metadata,d));else if(r.handleLLMStart){const n=(0,s.getBufferString)(t);await(r.handleLLMStart?.(e,[n],o,this._parentRunId,i,this.tags,this.metadata,d))}}catch(e){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${e}`),r.raiseError)throw e}},r.awaitHandlers)})),new g(o,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=(0,n.v4)(),a=void 0,i=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreChain)return(0,u.isBaseTracer)(n)&&n._createRunForChainStart(e,t,r,this._parentRunId,this.tags,this.metadata,a,o),(0,c.consumeCallback)(async()=>{try{await(n.handleChainStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,a,o))}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleChainStart: ${e}`),n.raiseError)throw e}},n.awaitHandlers)})),new y(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=(0,n.v4)(),a=void 0,i=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreAgent)return(0,u.isBaseTracer)(n)&&n._createRunForToolStart(e,t,r,this._parentRunId,this.tags,this.metadata,o),(0,c.consumeCallback)(async()=>{try{await(n.handleToolStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,o))}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolStart: ${e}`),n.raiseError)throw e}},n.awaitHandlers)})),new v(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=(0,n.v4)(),a=void 0,i=void 0,s=void 0,o=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreRetriever)return(0,u.isBaseTracer)(n)&&n._createRunForRetrieverStart(e,t,r,this._parentRunId,this.tags,this.metadata,o),(0,c.consumeCallback)(async()=>{try{await(n.handleRetrieverStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,o))}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${e}`),n.raiseError)throw e}},n.awaitHandlers)})),new f(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,r,n,a){await Promise.all(this.handlers.map(n=>(0,c.consumeCallback)(async()=>{if(!n.ignoreCustomEvent)try{await(n.handleCustomEvent?.(e,t,r,this.tags,this.metadata))}catch(e){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleCustomEvent: ${e}`),n.raiseError)throw e}},n.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new b(this._parentRunId);for(const e of this.handlers){const t=this.inheritableHandlers.includes(e);r.addHandler(e,t)}for(const e of this.tags){const t=this.inheritableTags.includes(e);r.addTags([e],t)}for(const e of Object.keys(this.metadata)){const t=Object.keys(this.inheritableMetadata).includes(e);r.addMetadata({[e]:this.metadata[e]},t)}for(const n of e)r.handlers.filter(e=>"console_callback_handler"===e.name).some(e=>e.name===n.name)||r.addHandler(n,t);return r}static fromHandlers(e){class t extends a.BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:(0,n.v4)()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new t),r}static configure(e,t,r,n,a,i,s){return this._configureSync(e,t,r,n,a,i,s)}static _configureSync(e,t,r,n,s,c,u){let m;(e||t)&&(Array.isArray(e)||!e?(m=new b,m.setHandlers(e?.map(_)??[],!0)):m=e,m=m.copy(Array.isArray(t)?t.map(_):t?.handlers,!1));const h="true"===(0,o.getEnvironmentVariable)("LANGCHAIN_VERBOSE")||u?.verbose,f=l.LangChainTracer.getTraceableRunTree()?.tracingEnabled||(0,d.isTracingEnabled)(),g=f||((0,o.getEnvironmentVariable)("LANGCHAIN_TRACING")??!1);if(h||g){if(m||(m=new b),h&&!m.handlers.some(e=>e.name===i.ConsoleCallbackHandler.prototype.name)){const e=new i.ConsoleCallbackHandler;m.addHandler(e,!0)}if(g&&!m.handlers.some(e=>"langchain_tracer"===e.name)&&f){const e=new l.LangChainTracer;m.addHandler(e,!0),m._parentRunId=l.LangChainTracer.getTraceableRunTree()?.id??m._parentRunId}}for(const{contextVar:e,inheritable:t=!0,handlerClass:r,envVar:n}of(0,p._getConfigureHooks)()){const i=n&&"true"===(0,o.getEnvironmentVariable)(n)&&r;let s;const l=void 0!==e?(0,p.getContextVariable)(e):void 0;l&&(0,a.isBaseCallbackHandler)(l)?s=l:i&&(s=new r({})),void 0!==s&&(m||(m=new b),m.handlers.some(e=>e.name===s.name)||m.addHandler(s,t))}return(r||n)&&m&&(m.addTags(r??[]),m.addTags(n??[],!1)),(s||c)&&m&&(m.addMetadata(s??{}),m.addMetadata(c??{},!1)),m}}function _(e){return"name"in e?e:a.BaseCallbackHandler.fromMethods(e)}t.CallbackManager=b;class w{constructor(e,t){Object.defineProperty(this,"groupName",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"runManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}async getTraceGroupCallbackManager(e,t,r){const n=new l.LangChainTracer(r),a=await b.configure([n]),i=await(a?.handleChainStart({lc:1,type:"not_implemented",id:["langchain","callbacks","groups",e]},t??{}));if(!i)throw new Error("Failed to create run group callback manager.");return i}async start(e){return this.runManager||(this.runManager=await this.getTraceGroupCallbackManager(this.groupName,e,this.options)),this.runManager.getChild()}async error(e){this.runManager&&(await this.runManager.handleChainError(e),this.runManager=void 0)}async end(e){this.runManager&&(await this.runManager.handleChainEnd(e??{}),this.runManager=void 0)}}t.TraceGroup=w},31459:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnumDef=void 0,t.parseEnumDef=function(e){return{type:"string",enum:Array.from(e.values)}}},31615:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveMessage=void 0;const n=r(66267);class a extends n.BaseMessage{constructor(e){super({...e,content:""}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.id=e.id}_getType(){return"remove"}get _printableFields(){return{...super._printableFields,id:this.id}}}t.RemoveMessage=a},31635:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>R,__assign:()=>i,__asyncDelegator:()=>E,__asyncGenerator:()=>S,__asyncValues:()=>A,__await:()=>O,__awaiter:()=>h,__classPrivateFieldGet:()=>x,__classPrivateFieldIn:()=>$,__classPrivateFieldSet:()=>N,__createBinding:()=>g,__decorate:()=>o,__disposeResources:()=>D,__esDecorate:()=>c,__exportStar:()=>y,__extends:()=>a,__generator:()=>f,__importDefault:()=>C,__importStar:()=>j,__makeTemplateObject:()=>I,__metadata:()=>m,__param:()=>l,__propKey:()=>u,__read:()=>b,__rest:()=>s,__rewriteRelativeImportExtension:()=>L,__runInitializers:()=>d,__setFunctionName:()=>p,__spread:()=>_,__spreadArray:()=>P,__spreadArrays:()=>w,__values:()=>v,default:()=>F});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function o(e,t,r,n){var a,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(i<3?a(s):i>3?a(t,r,s):a(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t,r,n,a,i){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",d=!t&&e?n.static?e:e.prototype:null,u=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),p=!1,m=r.length-1;m>=0;m--){var h={};for(var f in n)h[f]="access"===f?{}:n[f];for(var f in n.access)h.access[f]=n.access[f];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(e||null))};var g=(0,r[m])("accessor"===l?{get:u.get,set:u.set}:u[c],h);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(o=s(g.get))&&(u.get=o),(o=s(g.set))&&(u.set=o),(o=s(g.init))&&a.unshift(o)}else(o=s(g))&&("field"===l?a.unshift(o):u[c]=o)}d&&Object.defineProperty(d,n.name,u),p=!0}function d(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function p(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function m(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,n){return new(r||(r=Promise))(function(a,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,o)}l((n=n.apply(e,t||[])).next())})}function f(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var g=Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function y(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||g(t,e,r)}function v(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function w(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var i=arguments[t],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n}function P(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}function O(e){return this instanceof O?(this.v=e,this):new O(e)}function S(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),i=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function s(e,t){a[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||o(e,t)})},t&&(n[e]=t(n[e])))}function o(e,t){try{(r=a[e](t)).value instanceof O?Promise.resolve(r.value.v).then(l,c):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}function E(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,a){t[n]=e[n]?function(t){return(r=!r)?{value:O(e[n](t)),done:!1}:a?a(t):t}:a}}function A(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=v(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,a){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,a,(t=e[r](t)).done,t.value)})}}}function I(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var k=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},T=function(e){return T=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},T(e)};function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=T(e),n=0;n<r.length;n++)"default"!==r[n]&&g(t,e,r[n]);return k(t,e),t}function C(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function N(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r}function $(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function R(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var M="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function D(e){function t(t){e.error=e.hasError?new M(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function a(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(e){return t(e),a()})}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function L(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,a,i){return r?t?".jsx":".js":!n||a&&i?n+a+"."+i.toLowerCase()+"js":e}):e}const F={__extends:a,__assign:i,__rest:s,__decorate:o,__param:l,__esDecorate:c,__runInitializers:d,__propKey:u,__setFunctionName:p,__metadata:m,__awaiter:h,__generator:f,__createBinding:g,__exportStar:y,__values:v,__read:b,__spread:_,__spreadArrays:w,__spreadArray:P,__await:O,__asyncGenerator:S,__asyncDelegator:E,__asyncValues:A,__makeTemplateObject:I,__importStar:j,__importDefault:C,__classPrivateFieldGet:x,__classPrivateFieldSet:N,__classPrivateFieldIn:$,__addDisposableResource:R,__disposeResources:D,__rewriteRelativeImportExtension:L}},31729:(e,t,r)=>{"use strict";const n=r(30144);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},31764:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getQueue=l,t.consumeCallback=async function(e,t){if(!0===t){const t=(0,i.getGlobalAsyncLocalStorageInstance)();void 0!==t?await t.run(void 0,async()=>e()):await e()}else o=l(),o.add(async()=>{const t=(0,i.getGlobalAsyncLocalStorageInstance)();void 0!==t?await t.run(void 0,async()=>e()):await e()})},t.awaitAllCallbacks=async function(){const e=(0,s.getDefaultLangChainClientSingleton)();await Promise.allSettled([void 0!==o?o.onIdle():Promise.resolve(),e.awaitPendingTraceBatches()])};const a=n(r(73290)),i=r(61299),s=r(53375);let o;function l(){return void 0===o&&(o=new("default"in a.default?a.default.default:a.default)({autoStart:!0,concurrency:1})),o}},31863:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insecureHash=void 0;var n=r(86771);Object.defineProperty(t,"insecureHash",{enumerable:!0,get:function(){return n.insecureHash}})},31937:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.LangSmithToOTELTranslator=void 0;const o=s(r(76530)),l=r(61008),c={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};t.LangSmithToOTELTranslator=class{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,t){for(const r of e)try{if(!r.run)continue;if("post"===r.operation){const e=this.createSpanForRun(r,r.run,t.get(r.id));e&&!r.run.end_time&&this.spans.set(r.id,e)}else this.updateSpanForRun(r,r.run)}catch(e){console.error(`Error processing operation ${r.id}:`,e)}}createSpanForRun(e,t,r){const n=r&&(0,l.getOTELTrace)().getSpan(r);if(n)try{return this.finishSpanSetup(n,t,e)}catch(t){return void console.error(`Failed to create span for run ${e.id}:`,t)}}finishSpanSetup(e,t,r){return this.setSpanAttributes(e,t,r),t.error?(e.setStatus({code:2}),e.recordException(new Error(t.error))):e.setStatus({code:1}),t.end_time&&e.end(new Date(t.end_time)),e}updateSpanForRun(e,t){try{const r=this.spans.get(e.id);if(!r)return void console.debug(`No span found for run ${e.id} during update`);this.setSpanAttributes(r,t,e),t.error?(r.setStatus({code:2}),r.recordException(new Error(t.error))):r.setStatus({code:1});const n=t.end_time;n&&(r.end(new Date(n)),this.spans.delete(e.id))}catch(t){console.error(`Failed to update span for run ${e.id}:`,t)}}extractModelName(e){if(e.extra?.metadata){const t=e.extra.metadata;if(t.ls_model_name)return t.ls_model_name;if(t.invocation_params){const e=t.invocation_params;if(e.model)return e.model;if(e.model_name)return e.model_name}}}setSpanAttributes(e,t,r){if("run_type"in t&&t.run_type){e.setAttribute(o.LANGSMITH_RUN_TYPE,t.run_type);const r=(n=t.run_type||"chain",c[n]||n);e.setAttribute(o.GEN_AI_OPERATION_NAME,r)}var n;"name"in t&&t.name&&e.setAttribute(o.LANGSMITH_NAME,t.name),"session_id"in t&&t.session_id&&e.setAttribute(o.LANGSMITH_SESSION_ID,t.session_id),"session_name"in t&&t.session_name&&e.setAttribute(o.LANGSMITH_SESSION_NAME,t.session_name),this.setGenAiSystem(e,t);const a=this.extractModelName(t);a&&e.setAttribute(o.GEN_AI_REQUEST_MODEL,a),"prompt_tokens"in t&&"number"==typeof t.prompt_tokens&&e.setAttribute(o.GEN_AI_USAGE_INPUT_TOKENS,t.prompt_tokens),"completion_tokens"in t&&"number"==typeof t.completion_tokens&&e.setAttribute(o.GEN_AI_USAGE_OUTPUT_TOKENS,t.completion_tokens),"total_tokens"in t&&"number"==typeof t.total_tokens&&e.setAttribute(o.GEN_AI_USAGE_TOTAL_TOKENS,t.total_tokens),this.setInvocationParameters(e,t);const i=t.extra?.metadata||{};for(const[t,r]of Object.entries(i))null!=r&&e.setAttribute(`${o.LANGSMITH_METADATA}.${t}`,String(r));const s=t.tags;if(s&&Array.isArray(s)?e.setAttribute(o.LANGSMITH_TAGS,s.join(", ")):s&&e.setAttribute(o.LANGSMITH_TAGS,String(s)),"serialized"in t&&"object"==typeof t.serialized){const r=t.serialized;r.name&&e.setAttribute(o.GEN_AI_SERIALIZED_NAME,String(r.name)),r.signature&&e.setAttribute(o.GEN_AI_SERIALIZED_SIGNATURE,String(r.signature)),r.doc&&e.setAttribute(o.GEN_AI_SERIALIZED_DOC,String(r.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,t){let r="langchain";const n=this.extractModelName(t);if(n){const e=n.toLowerCase();e.includes("anthropic")||e.startsWith("claude")?r="anthropic":e.includes("bedrock")?r="aws.bedrock":e.includes("azure")&&e.includes("openai")?r="az.ai.openai":e.includes("azure")&&e.includes("inference")?r="az.ai.inference":e.includes("cohere")?r="cohere":e.includes("deepseek")?r="deepseek":e.includes("gemini")?r="gemini":e.includes("groq")?r="groq":e.includes("watson")||e.includes("ibm")?r="ibm.watsonx.ai":e.includes("mistral")?r="mistral_ai":e.includes("gpt")||e.includes("openai")?r="openai":e.includes("perplexity")||e.includes("sonar")?r="perplexity":e.includes("vertex")?r="vertex_ai":(e.includes("xai")||e.includes("grok"))&&(r="xai")}e.setAttribute(o.GEN_AI_SYSTEM,r)}setInvocationParameters(e,t){if(!t.extra?.metadata?.invocation_params)return;const r=t.extra.metadata.invocation_params;void 0!==r.max_tokens&&e.setAttribute(o.GEN_AI_REQUEST_MAX_TOKENS,r.max_tokens),void 0!==r.temperature&&e.setAttribute(o.GEN_AI_REQUEST_TEMPERATURE,r.temperature),void 0!==r.top_p&&e.setAttribute(o.GEN_AI_REQUEST_TOP_P,r.top_p),void 0!==r.frequency_penalty&&e.setAttribute(o.GEN_AI_REQUEST_FREQUENCY_PENALTY,r.frequency_penalty),void 0!==r.presence_penalty&&e.setAttribute(o.GEN_AI_REQUEST_PRESENCE_PENALTY,r.presence_penalty)}setIOAttributes(e,t){if(t.run.inputs)try{const r=t.run.inputs;"object"==typeof r&&null!==r&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(o.GEN_AI_REQUEST_MODEL,r.model),void 0!==r.stream&&e.setAttribute(o.LANGSMITH_REQUEST_STREAMING,r.stream),r.extra_headers&&e.setAttribute(o.LANGSMITH_REQUEST_HEADERS,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(o.GEN_AI_REQUEST_EXTRA_QUERY,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(o.GEN_AI_REQUEST_EXTRA_BODY,JSON.stringify(r.extra_body))),e.setAttribute(o.GENAI_PROMPT,JSON.stringify(r))}catch(e){console.debug(`Failed to process inputs for run ${t.id}`,e)}if(t.run.outputs)try{const r=t.run.outputs,n=this.getUnifiedRunTokens(r);if(n&&(e.setAttribute(o.GEN_AI_USAGE_INPUT_TOKENS,n[0]),e.setAttribute(o.GEN_AI_USAGE_OUTPUT_TOKENS,n[1]),e.setAttribute(o.GEN_AI_USAGE_TOTAL_TOKENS,n[0]+n[1])),r&&"object"==typeof r){if(r.model&&e.setAttribute(o.GEN_AI_RESPONSE_MODEL,String(r.model)),r.id&&e.setAttribute(o.GEN_AI_RESPONSE_ID,r.id),r.choices&&Array.isArray(r.choices)){const t=r.choices.map(e=>e.finish_reason).filter(e=>e).map(String);t.length>0&&e.setAttribute(o.GEN_AI_RESPONSE_FINISH_REASONS,t.join(", "))}if(r.service_tier&&e.setAttribute(o.GEN_AI_RESPONSE_SERVICE_TIER,r.service_tier),r.system_fingerprint&&e.setAttribute(o.GEN_AI_RESPONSE_SYSTEM_FINGERPRINT,r.system_fingerprint),r.usage_metadata&&"object"==typeof r.usage_metadata){const t=r.usage_metadata;t.input_token_details&&e.setAttribute(o.GEN_AI_USAGE_INPUT_TOKEN_DETAILS,JSON.stringify(t.input_token_details)),t.output_token_details&&e.setAttribute(o.GEN_AI_USAGE_OUTPUT_TOKEN_DETAILS,JSON.stringify(t.output_token_details))}}e.setAttribute(o.GENAI_COMPLETION,JSON.stringify(r))}catch(e){console.debug(`Failed to process outputs for run ${t.id}`,e)}}getUnifiedRunTokens(e){if(!e)return null;let t=this.extractUnifiedRunTokens(e.usage_metadata);if(t)return t;const r=Object.keys(e);for(const n of r){const r=e[n];if(r&&"object"==typeof r){if(t=this.extractUnifiedRunTokens(r.usage_metadata),t)return t;if(1===r.lc&&r.kwargs&&"object"==typeof r.kwargs&&(t=this.extractUnifiedRunTokens(r.kwargs.usage_metadata),t))return t}}const n=e.generations||[];if(!Array.isArray(n))return null;const a=Array.isArray(n[0])?n.flat():n;for(const e of a)if("object"==typeof e&&e.message&&"object"==typeof e.message&&e.message.kwargs&&"object"==typeof e.message.kwargs&&(t=this.extractUnifiedRunTokens(e.message.kwargs.usage_metadata),t))return t;return null}extractUnifiedRunTokens(e){return e&&"object"==typeof e?"number"!=typeof e.input_tokens||"number"!=typeof e.output_tokens?null:[e.input_tokens,e.output_tokens]:null}}},31949:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.format=void 0;const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,n=[0,31,28,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function i(e){return e.test.bind(e)}function s(e){const t=e.match(r);if(!t)return!1;const a=+t[1],i=+t[2],s=+t[3];return i>=1&&i<=12&&s>=1&&s<=(2==i&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(a)?29:n[i])}function o(e,t){const r=t.match(a);if(!r)return!1;const n=+r[1],i=+r[2],s=+r[3],o=!!r[5];return(n<=23&&i<=59&&s<=59||23==n&&59==i&&60==s)&&(!e||o)}t.format={date:s,time:o.bind(void 0,!1),"date-time":function(e){const t=e.split(l);return 2==t.length&&s(t[0])&&o(!0,t[1])},duration:e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e)),uri:function(e){return c.test(e)&&d.test(e)},"uri-reference":i(/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i),"uri-template":i(/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i),url:i(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu),email:e=>{if('"'===e[0])return!1;const[t,r,...n]=e.split("@");return!(!t||!r||0!==n.length||t.length>64||r.length>253)&&"."!==t[0]&&!t.endsWith(".")&&!t.includes("..")&&!(!/^[a-z0-9.-]+$/i.test(r)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t))&&r.split(".").every(e=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(e))},hostname:i(/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i),ipv4:i(/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/),ipv6:i(/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i),regex:function(e){if(u.test(e))return!1;try{return new RegExp(e,"u"),!0}catch(e){return!1}},uuid:i(/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i),"json-pointer":i(/^(?:\/(?:[^~/]|~0|~1)*)*$/),"json-pointer-uri-fragment":i(/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i),"relative-json-pointer":i(/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/)};const l=/t|\s/i,c=/\/|:/,d=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,u=/[^\\]\\Z/},31974:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnknownDef=void 0;const n=r(95346);t.parseUnknownDef=function(e){return(0,n.parseAnyDef)(e)}},31984:(e,t,r)=>{e.exports=r(46613)},31990:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.convertPromptToAnthropic=void 0,a(r(95761),t);var i=r(23449);Object.defineProperty(t,"convertPromptToAnthropic",{enumerable:!0,get:function(){return i.convertPromptToAnthropic}})},32012:(e,t,r)=>{"use strict";t=e.exports=function(...e){return new t.default(...e)},Object.defineProperty(t,"__esModule",{value:!0}),t.AzureOpenAI=t.InvalidWebhookSignatureError=t.UnprocessableEntityError=t.PermissionDeniedError=t.InternalServerError=t.AuthenticationError=t.BadRequestError=t.RateLimitError=t.ConflictError=t.NotFoundError=t.APIUserAbortError=t.APIConnectionTimeoutError=t.APIConnectionError=t.APIError=t.OpenAIError=t.PagePromise=t.OpenAI=t.APIPromise=t.toFile=t.default=void 0;var n=r(21301);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.OpenAI}});var a=r(78728);Object.defineProperty(t,"toFile",{enumerable:!0,get:function(){return a.toFile}});var i=r(81482);Object.defineProperty(t,"APIPromise",{enumerable:!0,get:function(){return i.APIPromise}});var s=r(21301);Object.defineProperty(t,"OpenAI",{enumerable:!0,get:function(){return s.OpenAI}});var o=r(75552);Object.defineProperty(t,"PagePromise",{enumerable:!0,get:function(){return o.PagePromise}});var l=r(44172);Object.defineProperty(t,"OpenAIError",{enumerable:!0,get:function(){return l.OpenAIError}}),Object.defineProperty(t,"APIError",{enumerable:!0,get:function(){return l.APIError}}),Object.defineProperty(t,"APIConnectionError",{enumerable:!0,get:function(){return l.APIConnectionError}}),Object.defineProperty(t,"APIConnectionTimeoutError",{enumerable:!0,get:function(){return l.APIConnectionTimeoutError}}),Object.defineProperty(t,"APIUserAbortError",{enumerable:!0,get:function(){return l.APIUserAbortError}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return l.NotFoundError}}),Object.defineProperty(t,"ConflictError",{enumerable:!0,get:function(){return l.ConflictError}}),Object.defineProperty(t,"RateLimitError",{enumerable:!0,get:function(){return l.RateLimitError}}),Object.defineProperty(t,"BadRequestError",{enumerable:!0,get:function(){return l.BadRequestError}}),Object.defineProperty(t,"AuthenticationError",{enumerable:!0,get:function(){return l.AuthenticationError}}),Object.defineProperty(t,"InternalServerError",{enumerable:!0,get:function(){return l.InternalServerError}}),Object.defineProperty(t,"PermissionDeniedError",{enumerable:!0,get:function(){return l.PermissionDeniedError}}),Object.defineProperty(t,"UnprocessableEntityError",{enumerable:!0,get:function(){return l.UnprocessableEntityError}}),Object.defineProperty(t,"InvalidWebhookSignatureError",{enumerable:!0,get:function(){return l.InvalidWebhookSignatureError}});var c=r(29147);Object.defineProperty(t,"AzureOpenAI",{enumerable:!0,get:function(){return c.AzureOpenAI}})},32123:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.WikiGenerator=void 0;const o=s(r(16928)),l=r(37621),c=r(79896),d=r(81573),u=r(49942),p=r(69191);t.WikiGenerator=class{constructor(e){this.projectPath="",console.log("WikiGenerator constructor called with config provider:",e.provider),this.config=e,console.log("Initializing VectorRetriever..."),this.vectorRetriever=new l.VectorRetriever(e),console.log("VectorRetriever initialized successfully"),console.log("Initializing DocumentProcessor..."),this.documentProcessor=new d.DocumentProcessor({maxFileSize:1048576,maxTokens:1e5,chunkSize:1e3,chunkOverlap:200,excludePatterns:["node_modules/**",".git/**","dist/**","build/**",".deepwiki/**"],includePatterns:["**/*.ts","**/*.js","**/*.md","**/*.json","**/*.py","**/*.java","**/*.cpp","**/*.h"]}),console.log("DocumentProcessor initialized successfully"),console.log("Initializing LangChainModelManager with provider:",e.provider||"openai"),this.langChainManager=new p.LangChainModelManager(e),console.log("LangChainModelManager initialized successfully"),console.log("Initializing RAGProcessor..."),this.ragProcessor=new u.RAGProcessor(this.vectorRetriever,e),console.log("RAGProcessor initialized successfully"),console.log("WikiGenerator constructor completed")}async generateDeepResearchContent(e,t,r=[],n="first",a){a?.(0,"Starting deep research analysis...");try{this.projectPath=t.projectPath||"";const i={iterationType:n,repositoryType:"local",repositoryUrl:this.projectPath,repositoryName:t.projectName,language:"zh-CN",researchIteration:r.length+1,isDeepResearch:!0};a?.(30,"Building context from project documents...");const s=await this.getRelevantDocuments(e,t);a?.(60,"Generating deep research content...");const o={name:t.projectName,type:"local",language:t.languages?.[0]?.language||"Unknown"},l=await this.langChainManager.generateDeepResearchContent(e,i,r,"","",s,o);return a?.(100,"Deep research analysis complete!"),l}catch(e){throw console.error("Deep research content generation failed:",e),e}}async getRelevantDocuments(e,t){try{const e=[];if(t.files&&t.files.length>0)for(const r of t.files.slice(0,10))try{const t=await c.promises.readFile(r.path,"utf8");e.push({id:r.path,content:t.substring(0,2e3),metadata:{filePath:r.path,language:r.language,size:r.size}})}catch(e){console.warn(`Failed to read file ${r.path}:`,e)}return e}catch(e){return console.error("Failed to get relevant documents:",e),[]}}async generateWiki(e,t){t?.(0,"Starting Wiki generation..."),this.projectPath=e.projectPath||"";const r={projectName:e.projectName,overview:"",architecture:"",fileStructure:"",codeAnalysis:[],dependencies:"",setup:"",usage:"",generatedAt:new Date};t?.(10,"Generating project overview..."),r.overview=await this.generateOverview(e),t?.(25,"Analyzing project architecture..."),r.architecture=await this.generateArchitecture(e),t?.(40,"Building file structure..."),r.fileStructure=this.generateFileStructure(e),t?.(55,"Analyzing code sections..."),r.codeAnalysis=await this.generateCodeAnalysis(e,t),t?.(80,"Analyzing dependencies..."),r.dependencies=await this.generateDependencies(e),t?.(90,"Generating setup and usage..."),r.setup=await this.generateSetup(e),r.usage=await this.generateUsage(e),t?.(95,"Performing vectorization...");try{await this.performVectorization(e,r,t),console.log("Wiki 向量化完成")}catch(e){console.error("Wiki 向量化失败:",e)}return t?.(100,"Wiki generation complete!"),r}async saveVectorCache(e){try{const t=o.join(this.projectPath,".deepwiki","cache"),r=o.join(t,"vectors.json");await c.promises.mkdir(t,{recursive:!0});const n=this.vectorRetriever.getStats(),a={version:"1.0.0",generatedAt:(new Date).toISOString(),config:{provider:this.config.embedderConfig?.provider||"local",model:this.config.embedderConfig?.model||"tfidf",dimensions:this.config.embedderConfig?.dimensions||100},stats:n,documents:e.map(e=>({id:e.id,content:e.content.substring(0,500),metadata:e.metadata}))};await c.promises.writeFile(r,JSON.stringify(a,null,2),"utf8"),console.log(`向量化缓存已保存到: ${r}`)}catch(e){console.error("保存向量化缓存失败:",e)}}async loadVectorCache(){try{const e=o.join(this.projectPath,".deepwiki","cache"),t=o.join(e,"vectors.json"),r=JSON.parse(await c.promises.readFile(t,"utf8")),n={provider:this.config.embedderConfig?.provider||"local",model:this.config.embedderConfig?.model||"tfidf",dimensions:this.config.embedderConfig?.dimensions||100};return JSON.stringify(r.config)!==JSON.stringify(n)?(console.log("向量化配置已更改，需要重新生成向量"),!1):(console.log(`找到向量化缓存，包含 ${r.documents.length} 个文档`),!0)}catch(e){return console.log("未找到向量化缓存或加载失败:",e instanceof Error?e.message:String(e)),!1}}getVectorRetriever(){return this.vectorRetriever}async rebuildVectorIndex(e){console.log("开始重建向量索引..."),this.vectorRetriever.reset();try{const e=o.join(this.projectPath,".deepwiki","cache"),t=o.join(e,"vectors.json");await c.promises.unlink(t)}catch(e){}await this.generateWiki(e),console.log("向量索引重建完成")}async generateOverview(e){const{projectName:t,totalFiles:r,totalSize:n,languages:a}=e,i=this.detectProjectType(e),s=e.files.reduce((e,t)=>e+(t.content?t.content.split("\n").length:0),0),o=this.generateTechStack(e),l=this.getMainDirectories(e),c=this.analyzeArchitecturePatterns(e);let d=`# 📚 ${t}\n\n`;if(d+=`> 🚀 **项目文档** - 自动生成于 ${(new Date).toLocaleDateString("zh-CN")}\n\n`,d+="---\n\n",d+="## 📊 项目概览\n\n",d+='<div style="display: flex; gap: 20px; margin: 20px 0;">\n',d+='  <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 10px; flex: 1;">\n',d+='    <h3 style="margin: 0; font-size: 16px;">📁 项目类型</h3>\n',d+=`    <p style="margin: 5px 0 0 0; font-size: 18px; font-weight: bold;">${i.toUpperCase()}</p>\n`,d+="  </div>\n",d+='  <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 15px; border-radius: 10px; flex: 1;">\n',d+='    <h3 style="margin: 0; font-size: 16px;">📄 文件总数</h3>\n',d+=`    <p style="margin: 5px 0 0 0; font-size: 18px; font-weight: bold;">${r.toLocaleString()}</p>\n`,d+="  </div>\n",d+='  <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 15px; border-radius: 10px; flex: 1;">\n',d+='    <h3 style="margin: 0; font-size: 16px;">📝 代码行数</h3>\n',d+=`    <p style="margin: 5px 0 0 0; font-size: 18px; font-weight: bold;">${s.toLocaleString()}</p>\n`,d+="  </div>\n",d+='  <div style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 15px; border-radius: 10px; flex: 1;">\n',d+='    <h3 style="margin: 0; font-size: 16px;">💾 项目大小</h3>\n',d+=`    <p style="margin: 5px 0 0 0; font-size: 18px; font-weight: bold;">${this.formatFileSize(n)}</p>\n`,d+="  </div>\n",d+="</div>\n\n",d+="---\n\n",d+="## 🛠️ 主要技术栈\n\n",d+=`${o}\n\n`,d+="---\n\n",d+="## 🏗️ 项目结构\n\n",d+=l.map(e=>`### 📂 ${e.name}\n${e.description}\n`).join("\n"),d+="---\n\n",d+="## 🎯 架构模式\n\n",d+=c.length>0?c.map(e=>`- 🔧 **${e}**`).join("\n"):"- 🔍 **未检测到特定架构模式**",d+="\n\n---\n\n",this.config.provider&&this.config.apiKey)try{const e=`为项目"${t}"生成一个全面且引人入胜的项目概览。请包含项目目的、核心功能、目标用户和独特卖点。要求专业且易于理解。请基于已有的项目分析结果，提供深度的架构洞察和项目能力说明，帮助用户快速理解这个项目能做什么以及它的技术架构特点。`;return await this.generateAIContent(e,d)||d}catch(e){return console.warn("AI overview generation failed, using default:",e),d}return d}async generateArchitecture(e){const t=this.analyzeArchitecturePatterns(e),r=this.getMainDirectories(e),n=this.detectProjectType(e);let a="# 🏛️ 系统架构\n\n";return a+="## 📋 架构概述\n\n",a+=`> 本项目采用 **${n.toUpperCase()}** 技术栈，具有以下架构特征：\n\n`,t.length>0?(a+="## 🎯 架构模式\n\n",t.forEach(e=>{a+=`### 🔧 ${e}\n`,a+=this.getPatternDescription(e)+"\n\n"})):(a+="## 🎯 架构模式\n\n",a+="📝 **简单架构**: 项目采用简单直接的架构模式，适合快速开发和维护。\n\n"),a+="## 📁 核心目录结构\n\n",a+="```\n",a+=`${e.projectName}/\n`,r.forEach(e=>{a+=`├── ${e.name}/\n`}),a+="```\n\n",a+="### 📂 目录说明\n\n",r.forEach(e=>{a+=`#### ${e.name}\n`,a+=`${e.description}\n\n`}),a+="## 🔄 数据流向\n\n",a+=this.generateDataFlowDescription(e),a}getPatternDescription(e){return{MVC:"📊 **Model-View-Controller**: 将应用程序分为模型、视图和控制器三个核心组件，实现关注点分离。",MVP:"🎭 **Model-View-Presenter**: 类似于MVC，但Presenter负责处理所有UI逻辑。",MVVM:"🔗 **Model-View-ViewModel**: 通过数据绑定实现视图和模型的分离。",Microservices:"🌐 **微服务架构**: 将应用程序构建为一套小型服务，每个服务运行在自己的进程中。",Layered:"🏗️ **分层架构**: 将应用程序组织成水平层，每层只与相邻层通信。","Component-based":"🧩 **组件化架构**: 基于可重用组件构建应用程序。",RESTful:"🌍 **RESTful API**: 遵循REST架构风格的Web服务设计。"}[e]||`🔧 **${e}**: 项目采用${e}架构模式。`}generateDataFlowDescription(e){const t=this.detectProjectType(e),r=this.getMainDirectories(e),n=e.files;let a="graph TD\n";const i=r.some(e=>"components"===e.name),s=(r.some(e=>"pages"===e.name||"views"===e.name),r.some(e=>"api"===e.name||"routes"===e.name)),o=r.some(e=>"services"===e.name),l=r.some(e=>"utils"===e.name||"helpers"===e.name),c=r.some(e=>"store"===e.name||"state"===e.name),d=r.some(e=>"models"===e.name),u=r.some(e=>"controllers"===e.name),p=r.some(e=>"middleware"===e.name),m=r.some(e=>"database"===e.name||"db"===e.name),h=(n.some(e=>"package.json"===e.relativePath),n.some(e=>e.relativePath.endsWith(".jsx")||e.relativePath.endsWith(".tsx"))),f=n.some(e=>e.relativePath.endsWith(".vue")),g=n.some(e=>e.content&&e.content.includes("express")),y=n.some(e=>"next.config.js"===e.relativePath||e.content?.includes("next")),v=n.some(e=>"nuxt.config.js"===e.relativePath||e.content?.includes("nuxt"));return h||f||y||v?(a+="    A[用户界面] --\x3e B[路由系统]\n",i&&(a+="    B --\x3e C[组件层]\n",a+="    C --\x3e D[业务组件]\n"),c?(a+="    D --\x3e E[状态管理]\n",a+="    E --\x3e F[数据层]\n"):a+="    D --\x3e F[数据层]\n",s&&(a+="    F --\x3e G[API接口]\n",a+="    G --\x3e H[后端服务]\n"),l&&(a+="    D --\x3e I[工具函数]\n")):g||u||p?(a+="    A[客户端请求] --\x3e B[路由层]\n",p?(a+="    B --\x3e C[中间件层]\n",a+="    C --\x3e D[控制器层]\n"):a+="    B --\x3e D[控制器层]\n",o?(a+="    D --\x3e E[服务层]\n",a+="    E --\x3e F[业务逻辑]\n"):a+="    D --\x3e F[业务逻辑]\n",d&&(a+="    F --\x3e G[数据模型]\n"),m&&(a+="    G --\x3e H[数据库层]\n")):"python"===t?(a+="    A[应用入口] --\x3e B[主模块]\n",d&&(a+="    B --\x3e C[数据模型]\n"),o?(a+="    B --\x3e D[服务层]\n",a+="    D --\x3e E[业务逻辑]\n"):a+="    B --\x3e E[业务逻辑]\n",l&&(a+="    E --\x3e F[工具模块]\n")):(a+="    A[项目入口] --\x3e B[核心模块]\n",r.filter(e=>!["node_modules",".git","dist","build",".vscode"].includes(e.name)).slice(0,4).forEach((e,t)=>{const r=String.fromCharCode(67+t);a+=`    B --\x3e ${r}[${e.name}]\n`})),`\`\`\`mermaid\n${a}\`\`\`\n\n`}generateFileStructure(e){let t="# 📁 文件结构\n\n";t+="## 🌳 项目树状图\n\n",t+="```\n",t+=this.generateFileTree(e.files),t+="```\n\n";const r=this.groupFilesByType(e.files);t+="## 📊 文件类型统计\n\n";const n={javascript:"🟨",typescript:"🔷",python:"🐍",java:"☕",css:"🎨",html:"🌐",json:"📋",markdown:"📝",other:"📄"};Object.entries(r).forEach(([e,r])=>{const a=n[e]||"📄",i=r.reduce((e,t)=>e+t.size,0);t+=`### ${a} ${e.toUpperCase()} 文件\n`,t+=`- **数量**: ${r.length} 个文件\n`,t+=`- **总大小**: ${this.formatFileSize(i)}\n`,t+=`- **平均大小**: ${this.formatFileSize(i/r.length)}\n\n`});const a=this.selectImportantFiles(e.files,10);return a.length>0&&(t+="## ⭐ 重要文件\n\n",t+="| 文件名 | 类型 | 大小 | 描述 |\n",t+="|--------|------|------|------|\n",a.forEach(e=>{const r=this.getFileType(o.extname(e.relativePath)),a=n[r]||"📄",i=this.getFileDescription(e.relativePath);t+=`| ${a} ${o.basename(e.relativePath)} | ${r} | ${this.formatFileSize(e.size)} | ${i} |\n`}),t+="\n"),t}generateFileTree(e){const t={};return e.forEach(e=>{const r=e.relativePath.split("/");let n=t;r.forEach((e,t)=>{n[e]||(n[e]=t===r.length-1?null:{}),null!==n[e]&&(n=n[e])})}),this.renderTree(t,"",!0)}renderTree(e,t,r){let n="";const a=Object.entries(e);return a.forEach(([e,r],i)=>{const s=i===a.length-1;if(n+=`${t}${s?"└── ":"├── "}${null===r?"📄":"📁"} ${e}\n`,null!==r){const e=t+(s?"    ":"│   ");n+=this.renderTree(r,e,s)}}),n}getFileDescription(e){const t=o.basename(e,o.extname(e)).toLowerCase(),r={index:"入口文件",main:"主文件",app:"应用主文件",server:"服务器文件",config:"配置文件",router:"路由文件",controller:"控制器",model:"数据模型",view:"视图文件",component:"组件文件",service:"服务文件",util:"工具函数",helper:"辅助函数",test:"测试文件",spec:"测试规范",readme:"项目说明",package:"包配置",tsconfig:"TypeScript配置",webpack:"Webpack配置",babel:"Babel配置"};for(const[e,n]of Object.entries(r))if(t.includes(e))return n;switch(o.extname(e)){case".md":return"文档文件";case".json":return"JSON配置";case".css":return"样式文件";case".js":return"JavaScript文件";case".ts":return"TypeScript文件";case".html":return"HTML文件";case".py":return"Python文件";default:return"项目文件"}}renderStructureTree(e,t){const r="  ".repeat(t);let n=`${r}${e.name}${"directory"===e.type?"/":""}\n`;if(e.children){for(const r of e.children.slice(0,20))n+=this.renderStructureTree(r,t+1);e.children.length>20&&(n+=`${r}  ... (${e.children.length-20} more items)\n`)}return n}async generateCodeAnalysis(e,t){const r=[],n=this.groupFilesByType(e.files);let a=0;const i=Object.keys(n).length;for(const[e,s]of Object.entries(n)){const n=55+a/i*20;t?.(n,`Analyzing ${e} files...`);const o=await this.generateCodeSection(e,s,t);o&&r.push(o),a++}return r}async generateCodeSection(e,t,r){if(0===t.length)return null;const n={title:`${{javascript:"🟨 JavaScript",typescript:"🔷 TypeScript",python:"🐍 Python",java:"☕ Java",css:"🎨 CSS",html:"🌐 HTML",json:"📋 JSON",markdown:"📝 Markdown",other:"📄 其他"}[e]||`📄 ${e.toUpperCase()}`} 文件分析`,content:this.generateTypeAnalysis(e,t),files:t.map(e=>e.relativePath),codeBlocks:[]},a=this.selectImportantFiles(t,3);for(let e=0;e<a.length;e++){const t=a[e],i=e/a.length*100;r?.(i,`Analyzing ${t.relativePath} with AI...`);try{const e=await this.createCodeBlockWithAI(t);e&&n.codeBlocks.push(e)}catch(e){console.error(`Failed to analyze file ${t.relativePath} with AI:`,e);const r=this.createCodeBlock(t);r&&n.codeBlocks.push(r)}}return n}generateTypeAnalysis(e,t){let r=`## 📊 ${e.toUpperCase()} 文件概览\n\n`;const n=t.reduce((e,t)=>e+t.size,0),a=t.reduce((e,t)=>e+(t.content?t.content.split("\n").length:0),0),i=n/t.length,s=a/t.length;return r+="### 📈 统计信息\n\n",r+="| 指标 | 数值 |\n",r+="|------|------|\n",r+=`| 📁 文件数量 | ${t.length} |\n`,r+=`| 📏 总大小 | ${this.formatFileSize(n)} |\n`,r+=`| 📝 总行数 | ${a.toLocaleString()} |\n`,r+=`| 📊 平均大小 | ${this.formatFileSize(i)} |\n`,r+=`| 📋 平均行数 | ${Math.round(s)} |\n\n`,r+="### 📂 文件列表\n\n",t.forEach(e=>{const t=this.getFileDescription(e.relativePath);r+=`- **${o.basename(e.relativePath)}** (${this.formatFileSize(e.size)}) - ${t}\n`}),r+="\n",r+=this.getTypeSpecificAnalysis(e,t),r}getTypeSpecificAnalysis(e,t){switch(e){case"javascript":case"typescript":return this.analyzeJSFiles(t);case"python":return this.analyzePythonFiles(t);case"css":return this.analyzeCSSFiles(t);case"json":return this.analyzeJSONFiles(t);default:return""}}analyzeJSFiles(e){let t="### 🔍 JavaScript/TypeScript 特性分析\n\n";const r={React组件:e.filter(e=>e.content?.includes("React")||e.relativePath.includes("component")).length,Express路由:e.filter(e=>e.content?.includes("express")||e.content?.includes("router")).length,异步函数:e.filter(e=>e.content?.includes("async")||e.content?.includes("await")).length,ES6模块:e.filter(e=>e.content?.includes("import")||e.content?.includes("export")).length,类定义:e.filter(e=>e.content?.includes("class ")).length};return t+="| 特性 | 文件数 |\n",t+="|------|--------|\n",Object.entries(r).forEach(([e,r])=>{r>0&&(t+=`| ${e} | ${r} |\n`)}),t+="\n",t}analyzePythonFiles(e){let t="### 🐍 Python 特性分析\n\n";const r={Flask应用:e.filter(e=>e.content?.includes("Flask")).length,Django模型:e.filter(e=>e.content?.includes("django")).length,类定义:e.filter(e=>e.content?.includes("class ")).length,函数定义:e.filter(e=>e.content?.includes("def ")).length,装饰器:e.filter(e=>e.content?.includes("@")).length};return t+="| 特性 | 文件数 |\n",t+="|------|--------|\n",Object.entries(r).forEach(([e,r])=>{r>0&&(t+=`| ${e} | ${r} |\n`)}),t+="\n",t}analyzeCSSFiles(e){let t="### 🎨 CSS 特性分析\n\n";const r={CSS变量:e.filter(e=>e.content?.includes("--")).length,Flexbox:e.filter(e=>e.content?.includes("flex")).length,Grid布局:e.filter(e=>e.content?.includes("grid")).length,媒体查询:e.filter(e=>e.content?.includes("@media")).length,动画:e.filter(e=>e.content?.includes("animation")||e.content?.includes("transition")).length};return t+="| 特性 | 文件数 |\n",t+="|------|--------|\n",Object.entries(r).forEach(([e,r])=>{r>0&&(t+=`| ${e} | ${r} |\n`)}),t+="\n",t}analyzeJSONFiles(e){let t="### 📋 JSON 文件分析\n\n";const r={"package.json":e.filter(e=>e.relativePath.includes("package.json")).length,"tsconfig.json":e.filter(e=>e.relativePath.includes("tsconfig")).length,配置文件:e.filter(e=>e.relativePath.includes("config")).length,数据文件:e.filter(e=>!e.relativePath.includes("package")&&!e.relativePath.includes("config")).length};return t+="| 类型 | 文件数 |\n",t+="|------|--------|\n",Object.entries(r).forEach(([e,r])=>{r>0&&(t+=`| ${e} | ${r} |\n`)}),t+="\n",t}async createCodeBlockWithAI(e){const t=this.getLanguageFromExtension(e.extension);let r=e.content.split("\n").slice(0,100).join("\n");r.length>4e3&&(r=r.substring(0,4e3)+"\n// ... (truncated for analysis)");const n=this.buildFileAnalysisPrompt(e.relativePath,t,r);try{return{language:t,code:r,description:await this.generateAIContent(n,r)||`AI-analyzed code from ${e.relativePath}`,filePath:e.relativePath}}catch(t){return console.error(`AI analysis failed for ${e.relativePath}:`,t),null}}createCodeBlock(e){const t=this.getLanguageFromExtension(e.extension);let r=e.content.split("\n").slice(0,50).join("\n");return r.length>2e3&&(r=r.substring(0,2e3)+"\n// ... (truncated)"),{language:t,code:r,description:`Code from ${e.relativePath}`,filePath:e.relativePath}}async generateDependencies(e){let t="## Dependencies\n\n";const r=e.files.filter(e=>["package.json","requirements.txt","Gemfile","go.mod","Cargo.toml"].includes(o.basename(e.path)));for(const e of r)t+=`### ${o.basename(e.path)}\n`,t+="```json\n",t+=e.content.substring(0,1e3),t+="\n```\n\n";return 0===r.length&&(t+="No dependency files found in the project.\n\n"),t}async generateSetup(e){let t="## Setup Instructions\n\n";switch(this.detectProjectType(e)){case"node":t+="### Node.js Project\n",t+="1. Install dependencies: `npm install`\n",t+="2. Start development server: `npm run dev`\n",t+="3. Build for production: `npm run build`\n\n";break;case"python":t+="### Python Project\n",t+="1. Create virtual environment: `python -m venv venv`\n",t+="2. Activate virtual environment: `source venv/bin/activate`\n",t+="3. Install dependencies: `pip install -r requirements.txt`\n\n";break;default:t+="### General Setup\n",t+="Please refer to the project documentation for specific setup instructions.\n\n"}return t}async generateUsage(e){let t="## Usage\n\n";const r=e.files.find(e=>o.basename(e.path).toLowerCase().startsWith("readme"));return r?(t+="### From README\n",t+=r.content.substring(0,2e3)+"\n\n"):(t+="### Basic Usage\n",t+="Please refer to the project documentation for usage instructions.\n\n"),t}formatFileSize(e){const t=["B","KB","MB","GB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(1)} ${t[n]}`}analyzeArchitecturePatterns(e){const t=[],r=e.files,n=this.getMainDirectories(e).map(e=>e.name),a=n.includes("models")||r.some(e=>e.relativePath.includes("model")),i=n.includes("views")||n.includes("pages")||r.some(e=>e.relativePath.includes("view")),s=n.includes("controllers")||r.some(e=>e.relativePath.includes("controller"));a&&i&&s&&t.push("MVC"),(n.includes("components")||r.some(e=>e.relativePath.includes("component")))&&t.push("Component-based");const o=n.includes("services"),l=n.includes("repositories")||r.some(e=>e.relativePath.includes("repository")),c=r.some(e=>e.relativePath.includes("dao"));(o||l||c)&&t.push("Layered"),(n.includes("api")||n.includes("routes")||r.some(e=>e.relativePath.includes("api")||e.relativePath.includes("route")))&&t.push("RESTful");const d=n.filter(e=>e.includes("service")).length>1,u=r.some(e=>"docker-compose.yml"===e.relativePath);(d||u)&&t.push("Microservices"),r.some(e=>e.content&&(e.content.includes("EventEmitter")||e.content.includes("addEventListener")||e.content.includes("event")&&e.content.includes("handler")))&&t.push("Event-driven");const p=r.some(e=>e.relativePath.includes("viewmodel")||e.relativePath.includes("vm")),m=r.some(e=>e.content&&(e.content.includes("v-model")||e.content.includes("useState")||e.content.includes("observable")));return(p||m)&&t.push("MVVM"),0!==t.length&&(d||u)||t.push("Monolithic"),t}getMainDirectories(e){const t=[],r=e.structure.children||[];for(const e of r)"directory"===e.type&&t.push({name:e.name,description:this.getDirectoryDescription(e.name)});return t}getDirectoryDescription(e){return{src:"Source code directory",components:"Reusable UI components",pages:"Application pages/routes",api:"API endpoints and server logic",utils:"Utility functions and helpers",config:"Configuration files",assets:"Static assets (images, fonts, etc.)",styles:"Stylesheets and styling files",tests:"Test files and test utilities",docs:"Documentation files"}[e]||"Project directory"}groupFilesByType(e){const t={};for(const r of e){const e=this.getFileType(r.extension);t[e]||(t[e]=[]),t[e].push(r)}return t}getFileType(e){return{".js":"javascript",".jsx":"javascript",".ts":"typescript",".tsx":"typescript",".py":"python",".java":"java",".c":"c",".cpp":"cpp",".css":"css",".scss":"scss",".html":"html",".json":"json",".md":"markdown"}[e]||"other"}selectImportantFiles(e,t){return e.sort((e,t)=>{const r=this.isImportantFile(e.relativePath),n=this.isImportantFile(t.relativePath);return r&&!n?-1:!r&&n?1:t.size-e.size}).slice(0,t)}isImportantFile(e){const t=o.basename(e,o.extname(e)).toLowerCase();return["index","main","app","server","config","router","controller"].some(e=>t.includes(e))}getLanguageFromExtension(e){return{".js":"javascript",".jsx":"jsx",".ts":"typescript",".tsx":"tsx",".py":"python",".java":"java",".c":"c",".cpp":"cpp",".css":"css",".scss":"scss",".html":"html",".json":"json",".md":"markdown"}[e]||"text"}detectProjectType(e){const t=e.files,r=t.some(e=>"package.json"===e.relativePath),n=t.some(e=>"requirements.txt"===e.relativePath),a=t.some(e=>"pom.xml"===e.relativePath),i=t.some(e=>"Cargo.toml"===e.relativePath),s=t.some(e=>"Gemfile"===e.relativePath),o=t.some(e=>"go.mod"===e.relativePath),l=t.some(e=>"composer.json"===e.relativePath),c=t.filter(e=>e.relativePath.endsWith(".js")),d=t.filter(e=>e.relativePath.endsWith(".ts")),u=t.filter(e=>e.relativePath.endsWith(".jsx")),p=t.filter(e=>e.relativePath.endsWith(".tsx")),m=t.filter(e=>e.relativePath.endsWith(".vue")),h=t.filter(e=>e.relativePath.endsWith(".py")),f=t.filter(e=>e.relativePath.endsWith(".java")),g=t.filter(e=>e.relativePath.endsWith(".rs")),y=t.filter(e=>e.relativePath.endsWith(".rb")),v=t.filter(e=>e.relativePath.endsWith(".go")),b=t.filter(e=>e.relativePath.endsWith(".php"));if(r&&(c.length>0||d.length>0))return u.length>0||p.length>0?t.some(e=>"next.config.js"===e.relativePath||e.content?.includes("next"))?"nextjs":"react":m.length>0?t.some(e=>"nuxt.config.js"===e.relativePath||e.content?.includes("nuxt"))?"nuxtjs":"vue":t.some(e=>"angular.json"===e.relativePath||e.content?.includes("@angular"))?"angular":t.some(e=>e.content&&e.content.includes("express"))?"express":t.some(e=>e.content&&e.content.includes("electron"))?"desktop":t.some(e=>e.content&&e.content.includes("react-native"))?"mobile":"node";if(n&&h.length>0)return t.some(e=>e.content&&e.content.includes("django"))?"django":t.some(e=>e.content&&e.content.includes("flask"))?"flask":t.some(e=>e.content&&e.content.includes("fastapi"))?"fastapi":"python";if(a&&f.length>0)return t.some(e=>e.content&&e.content.includes("spring"))?"spring":"java";if(i&&g.length>0)return"rust";if(s&&y.length>0)return t.some(e=>e.content&&e.content.includes("rails"))?"rails":"ruby";if(o&&v.length>0)return"go";if(l&&b.length>0)return t.some(e=>e.content&&e.content.includes("laravel"))?"laravel":"php";const _=[{type:"python",count:h.length},{type:"java",count:f.length},{type:"javascript",count:c.length+d.length},{type:"rust",count:g.length},{type:"ruby",count:y.length},{type:"go",count:v.length},{type:"php",count:b.length}].reduce((e,t)=>t.count>e.count?t:e);return _.count>0?_.type:t.some(e=>"README.md"===e.relativePath&&e.content?.includes("library"))?"library":"unknown"}generateTechStack(e){const t=e.languages||[];return 0===t.length?"未检测到主要技术栈":t.map(e=>`- ${e}`).join("\n")}async generateAIContent(e,t){if(!this.config.provider||!this.config.apiKey)return console.warn("AI provider or API key not configured"),t||`Generated content for: ${e}`;try{const r=this.buildAIPrompt(e,t);return console.log("WikiGenerator generateAIContent called with provider:",this.config.provider),await this.langChainManager.generateContent(r)}catch(r){return console.error("AI content generation failed:",r),t||`Generated content for: ${e}`}}buildFileAnalysisPrompt(e,t,r){const n=o.basename(e);o.extname(e);let a=`你是一位资深软件工程师和代码分析专家。请分析以下${t}文件并提供全面的分析。\n\n`;return a+=`文件名: ${n}\n`,a+=`文件路径: ${e}\n`,a+=`编程语言: ${t}\n\n`,a+=`待分析代码:\n\`\`\`${t}\n${r}\n\`\`\`\n\n`,a+="请提供详细分析，包括：\n",a+="1. **核心功能**: 这个文件的主要功能和在项目中的作用\n",a+="2. **架构设计**: 代码的设计模式、架构思路和技术选型\n",a+="3. **关键实现**: 重要的算法、核心逻辑和技术特点\n",a+="4. **依赖分析**: 主要的导入模块、外部依赖和接口调用\n",a+="5. **使用价值**: 这个模块为项目提供了什么能力，如何被其他部分使用\n\n",a+="分析要求：\n",a+="- 必须使用中文回答\n",a+="- 提供深度的技术洞察，不只是表面描述\n",a+="- 重点分析代码的业务价值和技术价值\n",a+="- 如果代码被截断，基于可见部分进行合理推断\n",a+="- 使用markdown格式，结构清晰，便于阅读\n",a+="- 帮助读者快速理解这个文件在整个项目中的重要性\n\n",a+="请开始深度分析:",a}buildAIPrompt(e,t){let r="你是一位专业的技术文档专家和代码分析师。请帮助生成高质量的项目文档。\n\n";return r+=`任务: ${e}\n\n`,t&&(r+=`上下文信息:\n${t}\n\n`),r+="要求:\n",r+="- 必须使用中文回答\n",r+="- 使用清晰、专业的语言\n",r+="- 使用正确的markdown格式\n",r+="- 包含相关的技术细节\n",r+="- 内容要全面但简洁\n",r+="- 专注于实用信息\n",r+="- 提供深度的架构分析和项目洞察\n",r+="- 帮助用户快速理解项目的核心功能和架构\n\n",r+="请生成内容:",r}async performVectorization(e,t,r){const n=[];r?.(96,"Processing project documents...");try{const e=await this.documentProcessor.processDirectory(this.projectPath,(e,t,n)=>{const a=96+Math.floor(e/t*2);r?.(a,`Processing ${n}...`)});n.push(...e),console.log(`DocumentProcessor 处理了 ${e.length} 个项目文档`)}catch(e){console.error("DocumentProcessor 处理失败:",e)}r?.(98,"Adding wiki content to index...");const a=[{id:`wiki-overview-${e.projectName}`,title:"Project Overview",content:t.overview,path:"wiki/overview",type:"wiki-overview",metadata:{projectName:e.projectName,filePath:"wiki/overview",isWikiContent:!0}},{id:`wiki-architecture-${e.projectName}`,title:"Project Architecture",content:t.architecture,path:"wiki/architecture",type:"wiki-architecture",metadata:{projectName:e.projectName,filePath:"wiki/architecture",isWikiContent:!0}},{id:`wiki-filestructure-${e.projectName}`,title:"File Structure",content:t.fileStructure,path:"wiki/filestructure",type:"wiki-filestructure",metadata:{projectName:e.projectName,filePath:"wiki/filestructure",isWikiContent:!0}},{id:`wiki-dependencies-${e.projectName}`,title:"Dependencies",content:t.dependencies,path:"wiki/dependencies",type:"wiki-dependencies",metadata:{projectName:e.projectName,filePath:"wiki/dependencies",isWikiContent:!0}},{id:`wiki-setup-${e.projectName}`,title:"Setup Guide",content:t.setup,path:"wiki/setup",type:"wiki-setup",metadata:{projectName:e.projectName,filePath:"wiki/setup",isWikiContent:!0}},{id:`wiki-usage-${e.projectName}`,title:"Usage Guide",content:t.usage,path:"wiki/usage",type:"wiki-usage",metadata:{projectName:e.projectName,filePath:"wiki/usage",isWikiContent:!0}}];t.codeAnalysis.forEach((t,r)=>{a.push({id:`wiki-codeanalysis-${e.projectName}-${r}`,title:t.title,content:`${t.title}\n\n${t.content}`,path:`wiki/codeanalysis/${r}`,type:"wiki-codeanalysis",metadata:{projectName:e.projectName,filePath:`wiki/codeanalysis/${r}`,sectionTitle:t.title,files:t.files,isWikiContent:!0}})}),n.push(...a),r?.(99,`Initializing vector index for ${n.length} documents...`),await this.vectorRetriever.initialize(n),await this.saveVectorCache(n),console.log(`向量化完成，处理了 ${n.length} 个文档 (${n.length-a.length} 个项目文档 + ${a.length} 个 Wiki 文档)`);const i=this.documentProcessor.getStats();console.log("文档处理统计:",i)}async queryWithRAG(e,t=10,r=.7){const n=await this.ragProcessor.query({question:e,maxResults:t,temperature:r,includeMetadata:!0});return{answer:n.answer,sources:n.sources.map(e=>({document:{id:e.id,title:e.metadata.filePath,content:e.content,path:e.metadata.filePath,type:e.metadata.fileType,metadata:e.metadata},similarity:e.similarity})),confidence:n.confidence}}async getSimilarDocuments(e,t=10,r=.3){return this.ragProcessor.getSimilarDocuments(e,t,r)}getDocumentProcessor(){return this.documentProcessor}getRAGProcessor(){return this.ragProcessor}updateConfig(e){console.log("WikiGenerator updateConfig called with provider:",e.provider),this.config=e,this.langChainManager.updateConfig(e),this.vectorRetriever=new l.VectorRetriever(e),this.ragProcessor=new u.RAGProcessor(this.vectorRetriever,e),console.log("WikiGenerator configuration updated successfully")}getConfig(){return this.config}}},32188:(e,t,r)=>{"use strict";const{stringify:n}=r(11144),{outputFileSync:a}=r(77024);e.exports=function(e,t,r){const i=n(t,r);a(e,i,r)}},32223:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLoggerContext=void 0;var n=r(18118);Object.defineProperty(t,"createLoggerContext",{enumerable:!0,get:function(){return n.createLoggerContext}})},32434:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0;const n=r(43764),a=r(78608);t.Validator=class{schema;draft;shortCircuit;lookup;constructor(e,t="2019-09",r=!0){this.schema=e,this.draft=t,this.shortCircuit=r,this.lookup=(0,n.dereference)(e)}validate(e){return(0,a.validate)(e,this.schema,this.draft,this.lookup,this.shortCircuit)}addSchema(e,t){t&&(e={...e,$id:t}),(0,n.dereference)(e,this.lookup)}}},32481:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertLangChainMessageToExample=t.isLangChainMessage=void 0,t.isLangChainMessage=function(e){return"function"==typeof e?._getType},t.convertLangChainMessageToExample=function(e){const t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}},32530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Batches=void 0;const n=r(82040),a=r(75552),i=r(54815);class s extends n.APIResource{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(i.path`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",a.CursorPage,{query:e,...t})}cancel(e,t){return this._client.post(i.path`/batches/${e}/cancel`,t)}}t.Batches=s},32560:(e,t,r)=>{e.exports=r(61359)},32564:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.$ZodCheckOverwrite=t.$ZodCheckMimeType=t.$ZodCheckProperty=t.$ZodCheckEndsWith=t.$ZodCheckStartsWith=t.$ZodCheckIncludes=t.$ZodCheckUpperCase=t.$ZodCheckLowerCase=t.$ZodCheckRegex=t.$ZodCheckStringFormat=t.$ZodCheckLengthEquals=t.$ZodCheckMinLength=t.$ZodCheckMaxLength=t.$ZodCheckSizeEquals=t.$ZodCheckMinSize=t.$ZodCheckMaxSize=t.$ZodCheckBigIntFormat=t.$ZodCheckNumberFormat=t.$ZodCheckMultipleOf=t.$ZodCheckGreaterThan=t.$ZodCheckLessThan=t.$ZodCheck=void 0;const s=i(r(98706)),o=i(r(91988)),l=i(r(90523));t.$ZodCheck=s.$constructor("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])});const c={number:"number",bigint:"bigint",object:"date"};function d(e,t,r){e.issues.length&&t.issues.push(...l.prefixIssues(r,e.issues))}t.$ZodCheckLessThan=s.$constructor("$ZodCheckLessThan",(e,r)=>{t.$ZodCheck.init(e,r);const n=c[typeof r.value];e._zod.onattach.push(e=>{const t=e._zod.bag,n=(r.inclusive?t.maximum:t.exclusiveMaximum)??Number.POSITIVE_INFINITY;r.value<n&&(r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value)}),e._zod.check=t=>{(r.inclusive?t.value<=r.value:t.value<r.value)||t.issues.push({origin:n,code:"too_big",maximum:r.value,input:t.value,inclusive:r.inclusive,inst:e,continue:!r.abort})}}),t.$ZodCheckGreaterThan=s.$constructor("$ZodCheckGreaterThan",(e,r)=>{t.$ZodCheck.init(e,r);const n=c[typeof r.value];e._zod.onattach.push(e=>{const t=e._zod.bag,n=(r.inclusive?t.minimum:t.exclusiveMinimum)??Number.NEGATIVE_INFINITY;r.value>n&&(r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value)}),e._zod.check=t=>{(r.inclusive?t.value>=r.value:t.value>r.value)||t.issues.push({origin:n,code:"too_small",minimum:r.value,input:t.value,inclusive:r.inclusive,inst:e,continue:!r.abort})}}),t.$ZodCheckMultipleOf=s.$constructor("$ZodCheckMultipleOf",(e,r)=>{t.$ZodCheck.init(e,r),e._zod.onattach.push(e=>{var t;(t=e._zod.bag).multipleOf??(t.multipleOf=r.value)}),e._zod.check=t=>{if(typeof t.value!=typeof r.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof t.value?t.value%r.value===BigInt(0):0===l.floatSafeRemainder(t.value,r.value))||t.issues.push({origin:typeof t.value,code:"not_multiple_of",divisor:r.value,input:t.value,inst:e,continue:!r.abort})}}),t.$ZodCheckNumberFormat=s.$constructor("$ZodCheckNumberFormat",(e,r)=>{t.$ZodCheck.init(e,r),r.format=r.format||"float64";const n=r.format?.includes("int"),a=n?"int":"number",[i,s]=l.NUMBER_FORMAT_RANGES[r.format];e._zod.onattach.push(e=>{const t=e._zod.bag;t.format=r.format,t.minimum=i,t.maximum=s,n&&(t.pattern=o.integer)}),e._zod.check=t=>{const o=t.value;if(n){if(!Number.isInteger(o))return void t.issues.push({expected:a,format:r.format,code:"invalid_type",input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?t.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,continue:!r.abort}):t.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,continue:!r.abort}))}o<i&&t.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!r.abort}),o>s&&t.issues.push({origin:"number",input:o,code:"too_big",maximum:s,inst:e})}}),t.$ZodCheckBigIntFormat=s.$constructor("$ZodCheckBigIntFormat",(e,r)=>{t.$ZodCheck.init(e,r);const[n,a]=l.BIGINT_FORMAT_RANGES[r.format];e._zod.onattach.push(e=>{const t=e._zod.bag;t.format=r.format,t.minimum=n,t.maximum=a}),e._zod.check=t=>{const i=t.value;i<n&&t.issues.push({origin:"bigint",input:i,code:"too_small",minimum:n,inclusive:!0,inst:e,continue:!r.abort}),i>a&&t.issues.push({origin:"bigint",input:i,code:"too_big",maximum:a,inst:e})}}),t.$ZodCheckMaxSize=s.$constructor("$ZodCheckMaxSize",(e,r)=>{var n;t.$ZodCheck.init(e,r),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const t=e._zod.bag.maximum??Number.POSITIVE_INFINITY;r.maximum<t&&(e._zod.bag.maximum=r.maximum)}),e._zod.check=t=>{const n=t.value;n.size<=r.maximum||t.issues.push({origin:l.getSizableOrigin(n),code:"too_big",maximum:r.maximum,input:n,inst:e,continue:!r.abort})}}),t.$ZodCheckMinSize=s.$constructor("$ZodCheckMinSize",(e,r)=>{var n;t.$ZodCheck.init(e,r),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const t=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;r.minimum>t&&(e._zod.bag.minimum=r.minimum)}),e._zod.check=t=>{const n=t.value;n.size>=r.minimum||t.issues.push({origin:l.getSizableOrigin(n),code:"too_small",minimum:r.minimum,input:n,inst:e,continue:!r.abort})}}),t.$ZodCheckSizeEquals=s.$constructor("$ZodCheckSizeEquals",(e,r)=>{var n;t.$ZodCheck.init(e,r),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.size}),e._zod.onattach.push(e=>{const t=e._zod.bag;t.minimum=r.size,t.maximum=r.size,t.size=r.size}),e._zod.check=t=>{const n=t.value,a=n.size;if(a===r.size)return;const i=a>r.size;t.issues.push({origin:l.getSizableOrigin(n),...i?{code:"too_big",maximum:r.size}:{code:"too_small",minimum:r.size},inclusive:!0,exact:!0,input:t.value,inst:e,continue:!r.abort})}}),t.$ZodCheckMaxLength=s.$constructor("$ZodCheckMaxLength",(e,r)=>{var n;t.$ZodCheck.init(e,r),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const t=e._zod.bag.maximum??Number.POSITIVE_INFINITY;r.maximum<t&&(e._zod.bag.maximum=r.maximum)}),e._zod.check=t=>{const n=t.value;if(n.length<=r.maximum)return;const a=l.getLengthableOrigin(n);t.issues.push({origin:a,code:"too_big",maximum:r.maximum,inclusive:!0,input:n,inst:e,continue:!r.abort})}}),t.$ZodCheckMinLength=s.$constructor("$ZodCheckMinLength",(e,r)=>{var n;t.$ZodCheck.init(e,r),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const t=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;r.minimum>t&&(e._zod.bag.minimum=r.minimum)}),e._zod.check=t=>{const n=t.value;if(n.length>=r.minimum)return;const a=l.getLengthableOrigin(n);t.issues.push({origin:a,code:"too_small",minimum:r.minimum,inclusive:!0,input:n,inst:e,continue:!r.abort})}}),t.$ZodCheckLengthEquals=s.$constructor("$ZodCheckLengthEquals",(e,r)=>{var n;t.$ZodCheck.init(e,r),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!l.nullish(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const t=e._zod.bag;t.minimum=r.length,t.maximum=r.length,t.length=r.length}),e._zod.check=t=>{const n=t.value,a=n.length;if(a===r.length)return;const i=l.getLengthableOrigin(n),s=a>r.length;t.issues.push({origin:i,...s?{code:"too_big",maximum:r.length}:{code:"too_small",minimum:r.length},inclusive:!0,exact:!0,input:t.value,inst:e,continue:!r.abort})}}),t.$ZodCheckStringFormat=s.$constructor("$ZodCheckStringFormat",(e,r)=>{var n,a;t.$ZodCheck.init(e,r),e._zod.onattach.push(e=>{const t=e._zod.bag;t.format=r.format,r.pattern&&(t.patterns??(t.patterns=new Set),t.patterns.add(r.pattern))}),r.pattern?(n=e._zod).check??(n.check=t=>{r.pattern.lastIndex=0,r.pattern.test(t.value)||t.issues.push({origin:"string",code:"invalid_format",format:r.format,input:t.value,...r.pattern?{pattern:r.pattern.toString()}:{},inst:e,continue:!r.abort})}):(a=e._zod).check??(a.check=()=>{})}),t.$ZodCheckRegex=s.$constructor("$ZodCheckRegex",(e,r)=>{t.$ZodCheckStringFormat.init(e,r),e._zod.check=t=>{r.pattern.lastIndex=0,r.pattern.test(t.value)||t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:r.pattern.toString(),inst:e,continue:!r.abort})}}),t.$ZodCheckLowerCase=s.$constructor("$ZodCheckLowerCase",(e,r)=>{r.pattern??(r.pattern=o.lowercase),t.$ZodCheckStringFormat.init(e,r)}),t.$ZodCheckUpperCase=s.$constructor("$ZodCheckUpperCase",(e,r)=>{r.pattern??(r.pattern=o.uppercase),t.$ZodCheckStringFormat.init(e,r)}),t.$ZodCheckIncludes=s.$constructor("$ZodCheckIncludes",(e,r)=>{t.$ZodCheck.init(e,r);const n=l.escapeRegex(r.includes),a=new RegExp("number"==typeof r.position?`^.{${r.position}}${n}`:n);r.pattern=a,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(a)}),e._zod.check=t=>{t.value.includes(r.includes,r.position)||t.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:r.includes,input:t.value,inst:e,continue:!r.abort})}}),t.$ZodCheckStartsWith=s.$constructor("$ZodCheckStartsWith",(e,r)=>{t.$ZodCheck.init(e,r);const n=new RegExp(`^${l.escapeRegex(r.prefix)}.*`);r.pattern??(r.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=t=>{t.value.startsWith(r.prefix)||t.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:r.prefix,input:t.value,inst:e,continue:!r.abort})}}),t.$ZodCheckEndsWith=s.$constructor("$ZodCheckEndsWith",(e,r)=>{t.$ZodCheck.init(e,r);const n=new RegExp(`.*${l.escapeRegex(r.suffix)}$`);r.pattern??(r.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=t=>{t.value.endsWith(r.suffix)||t.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:r.suffix,input:t.value,inst:e,continue:!r.abort})}}),t.$ZodCheckProperty=s.$constructor("$ZodCheckProperty",(e,r)=>{t.$ZodCheck.init(e,r),e._zod.check=e=>{const t=r.schema._zod.run({value:e.value[r.property],issues:[]},{});if(t instanceof Promise)return t.then(t=>d(t,e,r.property));d(t,e,r.property)}}),t.$ZodCheckMimeType=s.$constructor("$ZodCheckMimeType",(e,r)=>{t.$ZodCheck.init(e,r);const n=new Set(r.mime);e._zod.onattach.push(e=>{e._zod.bag.mime=r.mime}),e._zod.check=t=>{n.has(t.value.type)||t.issues.push({code:"invalid_value",values:r.mime,input:t.value.type,inst:e})}}),t.$ZodCheckOverwrite=s.$constructor("$ZodCheckOverwrite",(e,r)=>{t.$ZodCheck.init(e,r),e._zod.check=e=>{e.value=r.tx(e.value)}})},32656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLanguageModel=t.BaseLangChain=t.calculateMaxTokens=t.isOpenAITool=t.getModelContextSize=t.getEmbeddingContextSize=t.getModelNameForTiktoken=void 0;const n=r(90476),a=r(46808),i=r(58219),s=r(12257),o=r(97768),l=r(48307);t.getModelNameForTiktoken=e=>e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e,t.getEmbeddingContextSize=e=>"text-embedding-ada-002"===e?8191:2046,t.getModelContextSize=e=>{switch((0,t.getModelNameForTiktoken)(e)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":default:return 4097;case"text-curie-001":case"text-babbage-001":case"text-ada-001":case"code-cushman-001":return 2048;case"code-davinci-002":return 8e3}},t.isOpenAITool=function(e){return!("object"!=typeof e||!e||!("type"in e&&"function"===e.type&&"function"in e&&"object"==typeof e.function&&e.function&&"name"in e.function&&"parameters"in e.function))},t.calculateMaxTokens=async({prompt:e,modelName:r})=>{let n;try{n=(await(0,o.encodingForModel)((0,t.getModelNameForTiktoken)(r))).encode(e).length}catch(t){console.warn("Failed to calculate number of tokens, falling back to approximate count"),n=Math.ceil(e.length/4)}return(0,t.getModelContextSize)(r)-n};class c extends l.Runnable{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??!1,this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}t.BaseLangChain=c,t.BaseLanguageModel=class extends c{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){super({callbacks:e??t,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"object"==typeof r.cache?this.cache=r.cache:r.cache?this.cache=n.InMemoryCache.global():this.cache=void 0,this.caller=new s.AsyncCaller(r??{})}async getNumTokens(e){if("string"!=typeof e)return 0;let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await(0,o.encodingForModel)("modelName"in this?(0,t.getModelNameForTiktoken)(this.modelName):"gpt2")}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}if(this._encoding)try{r=this._encoding.encode(e).length}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}return r}static _convertInputToPromptValue(e){return"string"==typeof e?new a.StringPromptValue(e):Array.isArray(e)?new a.ChatPromptValue(e.map(i.coerceMessageLikeToMessage)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){const r={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([e,t])=>void 0!==t).map(([e,t])=>`${e}:${JSON.stringify(t)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}},32683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultRetryPolicyName=void 0,t.defaultRetryPolicy=function(e={}){return(0,n.defaultRetryPolicy)(e)};const n=r(17445);t.defaultRetryPolicyName=n.defaultRetryPolicyName},32794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retryPolicy=function(e,t={maxRetries:a.DEFAULT_RETRY_POLICY_COUNT}){return(0,i.retryPolicy)(e,Object.assign({logger:s},t))};const n=r(97994),a=r(9670),i=r(17445),s=(0,n.createClientLogger)("core-rest-pipeline retryPolicy")},32902:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryCache=t.BaseCache=t.getCacheKey=void 0,t.deserializeStoredGeneration=function(e){return void 0!==e.message?{text:e.text,message:(0,a.mapStoredMessageToChatMessage)(e.message)}:{text:e.text}},t.serializeGeneration=function(e){const t={text:e.text};return void 0!==e.message&&(t.message=e.message.toDict()),t};const n=r(681),a=r(68081);t.getCacheKey=(...e)=>(0,n.insecureHash)(e.join("_"));class i{constructor(){Object.defineProperty(this,"keyEncoder",{enumerable:!0,configurable:!0,writable:!0,value:t.getCacheKey})}makeDefaultKeyEncoder(e){this.keyEncoder=e}}t.BaseCache=i;const s=new Map;class o extends i{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(this.keyEncoder(e,t))??null)}async update(e,t,r){this.cache.set(this.keyEncoder(e,t),r)}static global(){return new o(s)}}t.InMemoryCache=o},32938:(e,t,r)=>{"use strict";const n=r(53908);e.exports=(e,t)=>new n(e,t).major},32991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=t.deepCompareStrict=void 0,t.toJsonSchema=function(e){if((0,s.isZodSchemaV4)(e)){const t=(0,s.interopZodTransformInputSchema)(e,!0);if((0,s.isZodObjectV4)(t)){const e=(0,s.interopZodObjectStrict)(t,!0);return(0,n.toJSONSchema)(e)}return(0,n.toJSONSchema)(e)}return(0,s.isZodSchemaV3)(e)?(0,a.zodToJsonSchema)(e):e},t.validatesOnlyStrings=function e(t){if(!t||"object"!=typeof t||0===Object.keys(t).length||Array.isArray(t))return!1;if("type"in t)return"string"==typeof t.type?"string"===t.type:!!Array.isArray(t.type)&&t.type.every(e=>"string"===e);if("enum"in t)return Array.isArray(t.enum)&&t.enum.length>0&&t.enum.every(e=>"string"==typeof e);if("const"in t)return"string"==typeof t.const;if("allOf"in t&&Array.isArray(t.allOf))return t.allOf.some(t=>e(t));if("anyOf"in t&&Array.isArray(t.anyOf)||"oneOf"in t&&Array.isArray(t.oneOf)){const r="anyOf"in t?t.anyOf:t.oneOf;return r.length>0&&r.every(t=>e(t))}if("not"in t)return!1;if("$ref"in t&&"string"==typeof t.$ref){const r=t.$ref,n=(0,i.dereference)(t);return!!n[r]&&e(n[r])}return!1};const n=r(76601),a=r(34619),i=r(78168),s=r(70866);var o=r(78168);Object.defineProperty(t,"deepCompareStrict",{enumerable:!0,get:function(){return o.deepCompareStrict}}),Object.defineProperty(t,"Validator",{enumerable:!0,get:function(){return o.Validator}})},33031:(e,t,r)=>{"use strict";e=r.nmd(e);const n=(e=0)=>t=>`[${38+e};5;${t}m`,a=(e=0)=>(t,r,n)=>`[${38+e};2;${t};${r};${n}m`;Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[r,n]of Object.entries(t)){for(const[r,a]of Object.entries(n))t[r]={open:`[${a[0]}m`,close:`[${a[1]}m`},n[r]=t[r],e.set(a[0],a[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",t.color.ansi256=n(),t.color.ansi16m=a(),t.bgColor.ansi256=n(10),t.bgColor.ansi16m=a(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:r}=t.groups;3===r.length&&(r=r.split("").map(e=>e+e).join(""));const n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},33054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerConfigureHook=t._getConfigureHooks=void 0,t.setContextVariable=i,t.getContextVariable=s;const n=r(93527),a=r(61299);function i(e,t){const r=(0,a.getGlobalAsyncLocalStorageInstance)();if(void 0===r)throw new Error("Internal error: Global shared async local storage instance has not been initialized.");const i=r.getStore(),s={...i?.[a._CONTEXT_VARIABLES_KEY]};s[e]=t;let o={};(0,n.isRunTree)(i)&&(o=new n.RunTree(i)),o[a._CONTEXT_VARIABLES_KEY]=s,r.enterWith(o)}function s(e){const t=(0,a.getGlobalAsyncLocalStorageInstance)();if(void 0===t)return;const r=t.getStore();return r?.[a._CONTEXT_VARIABLES_KEY]?.[e]}const o=Symbol("lc:configure_hooks");t._getConfigureHooks=()=>s(o)||[],t.registerConfigureHook=e=>{if(e.envVar&&!e.handlerClass)throw new Error("If envVar is set, handlerClass must also be set to a non-None value.");i(o,[...(0,t._getConfigureHooks)(),e])}},33233:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullDef=void 0,t.parseNullDef=function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}},33256:(e,t)=>{"use strict";function r(e,t){var r;if(!t.pathParameters)return e;const a=t.pathParameters;for(const[i,s]of Object.entries(a)){if(null==s)throw new Error(`Path parameters ${i} must not be undefined or null`);if(!s.toString||"function"!=typeof s.toString)throw new Error(`Path parameters must be able to be represented as string, ${i} can't`);let a=void 0!==s.toISOString?s.toISOString():String(s);t.skipUrlEncoding||(a=encodeURIComponent(s)),e=null!==(r=n(e,`{${i}}`,a))&&void 0!==r?r:""}return e}function n(e,t,r){return e&&t?e.split(t).join(r||""):e}Object.defineProperty(t,"__esModule",{value:!0}),t.replaceAll=t.buildBaseUrl=t.buildRequestUrl=void 0,t.buildRequestUrl=function(e,t,n,a={}){if(t.startsWith("https://")||t.startsWith("http://"))return t;e=r(e,a),t=function(e,t,r={}){for(const n of t){let t=n;r.skipUrlEncoding||(t=encodeURIComponent(n)),e=e.replace(/\{\w+\}/,t)}return e}(t,n,a);const i=function(e,t={}){if(!t.queryParameters)return e;let r=new URL(e);const n=t.queryParameters;for(const e of Object.keys(n)){const t=n[e];if(null==t)continue;if(!t.toString||"function"!=typeof t.toString)throw new Error(`Query parameters must be able to be represented as string, ${e} can't`);const a=void 0!==t.toISOString?t.toISOString():t.toString();r.searchParams.append(e,a)}return t.skipUrlEncoding&&(r=function(e){if(!e)return e;const t=[];for(const[r,n]of e.searchParams)t.push(`${r}=${n}`);return e.search=t.length?`?${t.join("&")}`:"",e}(r)),r.toString()}(`${e}/${t}`,a);return new URL(i).toString().replace(/([^:]\/)\/+/g,"$1")},t.buildBaseUrl=r,t.replaceAll=n},33338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileBatches=void 0;const n=r(82040),a=r(75552),i=r(262),s=r(34741),o=r(73346),l=r(54815);class c extends n.APIResource{create(e,t,r){return this._client.post(l.path`/vector_stores/${e}/file_batches`,{body:t,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){const{vector_store_id:n}=t;return this._client.get(l.path`/vector_stores/${n}/file_batches/${e}`,{...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,t,r){const{vector_store_id:n}=t;return this._client.post(l.path`/vector_stores/${n}/file_batches/${e}/cancel`,{...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){const n=await this.create(e,t);return await this.poll(e,n.id,r)}listFiles(e,t,r){const{vector_store_id:n,...s}=t;return this._client.getAPIList(l.path`/vector_stores/${n}/file_batches/${e}/files`,a.CursorPage,{query:s,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,t,r){const n=(0,i.buildHeaders)([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(t,{vector_store_id:e},{...r,headers:n}).withResponse();switch(a.status){case"in_progress":let e=5e3;if(r?.pollIntervalMs)e=r.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const r=parseInt(t);isNaN(r)||(e=r)}}await(0,s.sleep)(e);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},n){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=n?.maxConcurrency??5,i=Math.min(a,t.length),s=this._client,l=t.values(),c=[...r],d=Array(i).fill(l).map(async function(e){for(let t of e){const e=await s.files.create({file:t,purpose:"assistants"},n);c.push(e.id)}});return await(0,o.allSettledWithThrow)(d),await this.createAndPoll(e,{file_ids:c})}}t.FileBatches=c},33359:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(60264),t)},33453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FineTuning=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(62241)),s=r(62241),o=n.__importStar(r(64212)),l=r(64212),c=n.__importStar(r(50204)),d=r(50204),u=n.__importStar(r(71718)),p=r(71718);class m extends a.APIResource{constructor(){super(...arguments),this.methods=new i.Methods(this._client),this.jobs=new u.Jobs(this._client),this.checkpoints=new c.Checkpoints(this._client),this.alpha=new o.Alpha(this._client)}}t.FineTuning=m,m.Methods=s.Methods,m.Jobs=p.Jobs,m.Checkpoints=d.Checkpoints,m.Alpha=l.Alpha},33470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ndJsonPolicyName=void 0,t.ndJsonPolicy=function(){return{name:t.ndJsonPolicyName,async sendRequest(e,t){if("string"==typeof e.body&&e.body.startsWith("[")){const t=JSON.parse(e.body);Array.isArray(t)&&(e.body=t.map(e=>JSON.stringify(e)+"\n").join(""))}return t(e)}}},t.ndJsonPolicyName="ndJsonPolicy"},33538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSetDef=void 0;const n=r(47027),a=r(55767);t.parseSetDef=function(e,t){const r={type:"array",uniqueItems:!0,items:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(0,n.setResponseValueAndErrors)(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&(0,n.setResponseValueAndErrors)(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}},33635:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__version__=t.getDefaultProjectName=t.overrideFetchImplementation=t.RunTree=t.Client=void 0;var n=r(71188);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return n.Client}});var a=r(1626);Object.defineProperty(t,"RunTree",{enumerable:!0,get:function(){return a.RunTree}});var i=r(62218);Object.defineProperty(t,"overrideFetchImplementation",{enumerable:!0,get:function(){return i.overrideFetchImplementation}});var s=r(52990);Object.defineProperty(t,"getDefaultProjectName",{enumerable:!0,get:function(){return s.getDefaultProjectName}}),t.__version__="0.3.53"},33694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transcriptions=void 0;const n=r(82040),a=r(12018);class i extends n.APIResource{create(e,t){return this._client.post("/audio/transcriptions",(0,a.multipartFormRequestOptions)({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}t.Transcriptions=i},33844:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.awaitAllCallbacks=t.consumeCallback=void 0;const a=n(r(73290));let i;t.consumeCallback=async function(e,t){!0===t?await e():(void 0===i&&(i=new("default"in a.default?a.default.default:a.default)({autoStart:!0,concurrency:1})),i.add(e))},t.awaitAllCallbacks=function(){return void 0!==i?i.onIdle():Promise.resolve()}},33946:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Webhooks=t.VectorStores=t.Uploads=t.Responses=t.Moderations=t.Models=t.Images=t.Graders=t.FineTuning=t.Files=t.Evals=t.Embeddings=t.Containers=t.Completions=t.Beta=t.Batches=t.Audio=void 0;const n=r(79632);n.__exportStar(r(7949),t),n.__exportStar(r(55653),t);var a=r(1253);Object.defineProperty(t,"Audio",{enumerable:!0,get:function(){return a.Audio}});var i=r(32530);Object.defineProperty(t,"Batches",{enumerable:!0,get:function(){return i.Batches}});var s=r(6183);Object.defineProperty(t,"Beta",{enumerable:!0,get:function(){return s.Beta}});var o=r(79045);Object.defineProperty(t,"Completions",{enumerable:!0,get:function(){return o.Completions}});var l=r(42099);Object.defineProperty(t,"Containers",{enumerable:!0,get:function(){return l.Containers}});var c=r(1242);Object.defineProperty(t,"Embeddings",{enumerable:!0,get:function(){return c.Embeddings}});var d=r(74769);Object.defineProperty(t,"Evals",{enumerable:!0,get:function(){return d.Evals}});var u=r(61461);Object.defineProperty(t,"Files",{enumerable:!0,get:function(){return u.Files}});var p=r(33453);Object.defineProperty(t,"FineTuning",{enumerable:!0,get:function(){return p.FineTuning}});var m=r(79777);Object.defineProperty(t,"Graders",{enumerable:!0,get:function(){return m.Graders}});var h=r(87370);Object.defineProperty(t,"Images",{enumerable:!0,get:function(){return h.Images}});var f=r(99458);Object.defineProperty(t,"Models",{enumerable:!0,get:function(){return f.Models}});var g=r(24975);Object.defineProperty(t,"Moderations",{enumerable:!0,get:function(){return g.Moderations}});var y=r(50477);Object.defineProperty(t,"Responses",{enumerable:!0,get:function(){return y.Responses}});var v=r(93017);Object.defineProperty(t,"Uploads",{enumerable:!0,get:function(){return v.Uploads}});var b=r(84229);Object.defineProperty(t,"VectorStores",{enumerable:!0,get:function(){return b.VectorStores}});var _=r(88014);Object.defineProperty(t,"Webhooks",{enumerable:!0,get:function(){return _.Webhooks}})},33955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkpoints=void 0;const n=r(82040),a=r(75552),i=r(54815);class s extends n.APIResource{list(e,t={},r){return this._client.getAPIList(i.path`/fine_tuning/jobs/${e}/checkpoints`,a.CursorPage,{query:t,...r})}}t.Checkpoints=s},34133:(e,t,r)=>{e.exports=r(31990)},34143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnionDef=t.primitiveMappings=void 0;const n=r(84769);t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},t.parseUnionDef=function(e,r){if("openApi3"===r.target)return a(e,r);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in t.primitiveMappings&&(!e._def.checks||!e._def.checks.length))){const e=n.reduce((e,r)=>{const n=t.primitiveMappings[r._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}if(n.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=n.reduce((e,t)=>{const r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===n.length){const t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return a(e,r)};const a=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0}},34175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePromiseDef=void 0;const n=r(55767);t.parsePromiseDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},34371:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.keyToJson=function(e,t){return t?.[e]||(0,a.default)(e)},t.keyFromJson=function(e,t){return t?.[e]||(0,i.default)(e)},t.mapKeys=function(e,t,r){const n={};for(const a in e)Object.hasOwn(e,a)&&(n[t(a,r)]=e[a]);return n};const a=n(r(79478)),i=n(r(12729))},34546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterMessages=function(e,t){return Array.isArray(e)?h(e,t):n.RunnableLambda.from(t=>h(t,e))},t.mergeMessageRuns=function(e){return Array.isArray(e)?f(e):n.RunnableLambda.from(f)},t.trimMessages=function(e,t){if(Array.isArray(e)){const r=e;if(!t)throw new Error("Options parameter is required when providing messages.");return g(r,t)}{const t=e;return n.RunnableLambda.from(e=>g(e,t)).withConfig({runName:"trim_messages"})}},t.defaultTextSplitter=w;const n=r(10969),a=r(6796),i=r(15785),s=r(26064),o=r(79102),l=r(57669),c=r(12841),d=r(52133),u=r(53752),p=r(68081),m=(e,t)=>{const r=[...new Set(t?.map(e=>{if("string"==typeof e)return e;const t=new e({});if(!("getType"in t)||"function"!=typeof t.getType)throw new Error("Invalid type provided.");return t.getType()}))],n=e.getType();return r.some(e=>e===n)};function h(e,t={}){const{includeNames:r,excludeNames:n,includeTypes:a,excludeTypes:i,includeIds:s,excludeIds:o}=t,l=[];for(const t of e)n&&t.name&&n.includes(t.name)||i&&m(t,i)||o&&t.id&&o.includes(t.id)||(a||s||r?(r&&t.name&&r.some(e=>e===t.name)||a&&m(t,a)||s&&t.id&&s.some(e=>e===t.id))&&l.push(t):l.push(t));return l}function f(e){if(!e.length)return[];const t=[];for(const r of e){const e=r,n=t.pop();if(n)if("tool"===e.getType()||e.getType()!==n.getType())t.push(n,e);else{const r=(0,p.convertToChunk)(n),a=(0,p.convertToChunk)(e),i=r.concat(a);"string"==typeof r.content&&"string"==typeof a.content&&(i.content=`${r.content}\n${a.content}`),t.push(_(i))}else t.push(e)}return t}async function g(e,t){const{maxTokens:r,tokenCounter:n,strategy:a="last",allowPartial:s=!1,endOn:o,startOn:l,includeSystem:c=!1,textSplitter:d}=t;if(l&&"first"===a)throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(c&&"first"===a)throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let u;u="getNumTokens"in n?async e=>(await Promise.all(e.map(e=>n.getNumTokens(e.content)))).reduce((e,t)=>e+t,0):async e=>n(e);let p=w;if(d&&(p="splitText"in d?d.splitText:async e=>d(e)),"first"===a)return y(e,{maxTokens:r,tokenCounter:u,textSplitter:p,partialStrategy:s?"first":void 0,endOn:o});if("last"===a)return async function(e,t){const{allowPartial:r=!1,includeSystem:n=!1,endOn:a,startOn:s,...o}=t;let l=e.map(e=>{const t=Object.fromEntries(Object.entries(e).filter(([e])=>"type"!==e&&!e.startsWith("lc_")));return b(e.getType(),t,(0,i.isBaseMessageChunk)(e))});if(a){const e=Array.isArray(a)?a:[a];for(;l.length>0&&!m(l[l.length-1],e);)l=l.slice(0,-1)}const c=n&&"system"===l[0]?.getType();let d=c?l.slice(0,1).concat(l.slice(1).reverse()):l.reverse();return d=await y(d,{...o,partialStrategy:r?"last":void 0,endOn:s}),c?[d[0],...d.slice(1).reverse()]:d.reverse()}(e,{maxTokens:r,tokenCounter:u,textSplitter:p,allowPartial:s,includeSystem:c,startOn:l,endOn:o});throw new Error(`Unrecognized strategy: '${a}'. Must be one of 'first' or 'last'.`)}async function y(e,t){const{maxTokens:r,tokenCounter:n,textSplitter:a,partialStrategy:i,endOn:s}=t;let o=[...e],l=0;for(let e=0;e<o.length;e+=1){const t=e>0?o.slice(0,-e):o;if(await n(t)<=r){l=o.length-e;break}}if(l<o.length-1&&i){let e=!1;if(Array.isArray(o[l].content)){const t=o[l];if("string"==typeof t.content)throw new Error("Expected content to be an array.");const a=t.content.length,s="last"===i?[...t.content].reverse():t.content;for(let c=1;c<=a;c+=1){const a="first"===i?s.slice(0,c):s.slice(-c),d=Object.fromEntries(Object.entries(t).filter(([e])=>"type"!==e&&!e.startsWith("lc_"))),u=b(t.getType(),{...d,content:a}),p=[...o.slice(0,l),u];if(!(await n(p)<=r))break;o=p,l+=1,e=!0}e&&"last"===i&&(t.content=[...s].reverse())}if(!e){const e=o[l];let t;if(Array.isArray(e.content)&&e.content.some(e=>"string"==typeof e||"text"===e.type)){const r=e.content.find(e=>"text"===e.type&&e.text);t=r?.text}else"string"==typeof e.content&&(t=e.content);if(t){const s=await a(t),c=s.length;"last"===i&&s.reverse();for(let t=0;t<c-1;t+=1)if(s.pop(),e.content=s.join(""),await n([...o.slice(0,l),e])<=r){"last"===i&&(e.content=[...s].reverse().join("")),o=[...o.slice(0,l),e],l+=1;break}}}}if(s){const e=Array.isArray(s)?s:[s];for(;l>0&&!m(o[l-1],e);)l-=1}return o.slice(0,l)}const v={human:{message:l.HumanMessage,messageChunk:l.HumanMessageChunk},ai:{message:a.AIMessage,messageChunk:a.AIMessageChunk},system:{message:d.SystemMessage,messageChunk:d.SystemMessageChunk},developer:{message:d.SystemMessage,messageChunk:d.SystemMessageChunk},tool:{message:u.ToolMessage,messageChunk:u.ToolMessageChunk},function:{message:o.FunctionMessage,messageChunk:o.FunctionMessageChunk},generic:{message:s.ChatMessage,messageChunk:s.ChatMessageChunk},remove:{message:c.RemoveMessage,messageChunk:c.RemoveMessage}};function b(e,t,r){let n,i;switch(e){case"human":r?n=new l.HumanMessageChunk(t):i=new l.HumanMessage(t);break;case"ai":if(r){let e={...t};"tool_calls"in e&&(e={...e,tool_call_chunks:e.tool_calls?.map(e=>({...e,type:"tool_call_chunk",index:void 0,args:JSON.stringify(e.args)}))}),n=new a.AIMessageChunk(e)}else i=new a.AIMessage(t);break;case"system":r?n=new d.SystemMessageChunk(t):i=new d.SystemMessage(t);break;case"developer":r?n=new d.SystemMessageChunk({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}}):i=new d.SystemMessage({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});break;case"tool":if(!("tool_call_id"in t))throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");r?n=new u.ToolMessageChunk(t):i=new u.ToolMessage(t);break;case"function":if(r)n=new o.FunctionMessageChunk(t);else{if(!t.name)throw new Error("FunctionMessage must have a 'name' field");i=new o.FunctionMessage(t)}break;case"generic":if(!("role"in t))throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");r?n=new s.ChatMessageChunk(t):i=new s.ChatMessage(t);break;default:throw new Error(`Unrecognized message type ${e}`)}if(r&&n)return n;if(i)return i;throw new Error(`Unrecognized message type ${e}`)}function _(e){const t=e.getType();let r;const n=Object.fromEntries(Object.entries(e).filter(([e])=>!["type","tool_call_chunks"].includes(e)&&!e.startsWith("lc_")));if(t in v&&(r=b(t,n)),!r)throw new Error(`Unrecognized message chunk class ${t}. Supported classes are ${Object.keys(v)}`);return r}function w(e){const t=e.split("\n");return Promise.resolve([...t.slice(0,-1).map(e=>`${e}\n`),t[t.length-1]])}},34601:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=n(r(67526)),i=Object.defineProperty;function s(e,t){return 1===e.length?[t.get(e.join(","))]:function(e,t){let r=Array.from({length:e.length},(e,t)=>({start:t,end:t+1}));for(;r.length>1;){let n=null;for(let a=0;a<r.length-1;a++){const i=e.slice(r[a].start,r[a+1].end),s=t.get(i.join(","));null!=s&&(null==n||s<n[0])&&(n=[s,a])}if(null==n)break;{const e=n[1];r[e]={start:r[e].start,end:r[e+1].end},r.splice(e+1,1)}}return r}(e,t).map(r=>t.get(e.slice(r.start,r.end).join(","))).filter(e=>null!=e)}var o,l=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){this.patStr=e.pat_str;const r=e.bpe_ranks.split("\n").filter(Boolean).reduce((e,t)=>{const[r,n,...a]=t.split(" "),i=Number.parseInt(n,10);return a.forEach((t,r)=>e[t]=i+r),e},{});for(const[e,t]of Object.entries(r)){const r=a.default.toByteArray(e);this.rankMap.set(r.join(","),t),this.textMap.set(t,r)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((e,[t,r])=>(e[r]=this.textEncoder.encode(t),e),{})}encode(e,t=[],r="all"){const n=new RegExp(this.patStr,"ug"),a=l.specialTokenRegex(Object.keys(this.specialTokens)),i=[],o=new Set("all"===t?Object.keys(this.specialTokens):t),c=new Set("all"===r?Object.keys(this.specialTokens).filter(e=>!o.has(e)):r);if(c.size>0){const t=l.specialTokenRegex([...c]),r=e.match(t);if(null!=r)throw new Error(`The text contains a special token that is not allowed: ${r[0]}`)}let d=0;for(;;){let t=null,r=d;for(;a.lastIndex=r,t=a.exec(e),null!=t&&!o.has(t[0]);)r=t.index+1;const l=t?.index??e.length;for(const t of e.substring(d,l).matchAll(n)){const e=this.textEncoder.encode(t[0]),r=this.rankMap.get(e.join(","));null==r?i.push(...s(e,this.rankMap)):i.push(r)}if(null==t)break;let c=this.specialTokens[t[0]];i.push(c),d=t.index+t[0].length}return i}decode(e){const t=[];let r=0;for(let n=0;n<e.length;++n){const a=e[n],i=this.textMap.get(a)??this.inverseSpecialTokens[a];null!=i&&(t.push(i),r+=i.length)}const n=new Uint8Array(r);let a=0;for(const e of t)n.set(e,a),a+=e.length;return this.textDecoder.decode(n)}},c=l;((e,t,r)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(c,"symbol"!=typeof(o="specialTokenRegex")?o+"":o,e=>new RegExp(e.map(e=>e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")).join("|"),"g")),t.Tiktoken=c,t.getEncodingNameForModel=function(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}},34619:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(51881),t),a(r(36213),t),a(r(61973),t),a(r(16424),t),a(r(84769),t),a(r(51539),t),a(r(95346),t),a(r(54437),t),a(r(29649),t),a(r(38848),t),a(r(8584),t),a(r(16327),t),a(r(550),t),a(r(54205),t),a(r(63754),t),a(r(31459),t),a(r(1307),t),a(r(30815),t),a(r(47870),t),a(r(65508),t),a(r(36278),t),a(r(39375),t),a(r(95543),t),a(r(4771),t),a(r(51761),t),a(r(97398),t),a(r(58732),t),a(r(78873),t),a(r(72168),t),a(r(75127),t),a(r(97372),t),a(r(94235),t),a(r(46462),t),a(r(78380),t),a(r(34143),t),a(r(31974),t),a(r(83420),t),a(r(2618),t);const i=r(2618);t.default=i.zodToJsonSchema},34701:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(79632);n.__exportStar(r(15734),t),n.__exportStar(r(44319),t),n.__exportStar(r(17237),t),n.__exportStar(r(86188),t),n.__exportStar(r(9491),t),n.__exportStar(r(34741),t)},34741:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0,t.sleep=e=>new Promise(t=>setTimeout(t,e))},34771:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha256=void 0;var r="0123456789abcdef".split(""),n=[-2147483648,8388608,32768,128],a=[24,16,8,0],i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=[];function o(e,t){t?(s[0]=s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0,this.blocks=s):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}o.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var n,i,s=0,o=e.length,l=this.blocks;s<o;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,this.block=l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),t)for(i=this.start;s<o&&i<64;++s)l[i>>>2]|=e[s]<<a[3&i++];else for(i=this.start;s<o&&i<64;++s)(n=e.charCodeAt(s))<128?l[i>>>2]|=n<<a[3&i++]:n<2048?(l[i>>>2]|=(192|n>>>6)<<a[3&i++],l[i>>>2]|=(128|63&n)<<a[3&i++]):n<55296||n>=57344?(l[i>>>2]|=(224|n>>>12)<<a[3&i++],l[i>>>2]|=(128|n>>>6&63)<<a[3&i++],l[i>>>2]|=(128|63&n)<<a[3&i++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++s)),l[i>>>2]|=(240|n>>>18)<<a[3&i++],l[i>>>2]|=(128|n>>>12&63)<<a[3&i++],l[i>>>2]|=(128|n>>>6&63)<<a[3&i++],l[i>>>2]|=(128|63&n)<<a[3&i++]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=l[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},o.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=n[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},o.prototype.hash=function(){var e,t,r,n,a,s,o,l,c,d=this.h0,u=this.h1,p=this.h2,m=this.h3,h=this.h4,f=this.h5,g=this.h6,y=this.h7,v=this.blocks;for(e=16;e<64;++e)t=((a=v[e-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,r=((a=v[e-2])>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,v[e]=v[e-16]+t+v[e-7]+r|0;for(c=u&p,e=0;e<64;e+=4)this.first?(this.is224?(s=300032,y=(a=v[0]-1413257819)-150054599|0,m=a+24177077|0):(s=704751109,y=(a=v[0]-210244248)-1521486534|0,m=a+143694565|0),this.first=!1):(t=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),n=(s=d&u)^d&p^c,y=m+(a=y+(r=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&f^~h&g)+i[e]+v[e])|0,m=a+(t+n)|0),t=(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10),n=(o=m&d)^m&u^s,g=p+(a=f+(r=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(g&y^~g&h)+i[e+1]+v[e+1])|0,t=((p=a+(t+n)|0)>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),n=(l=p&m)^p&d^o,f=u+(a=h+(r=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(f&g^~f&y)+i[e+2]+v[e+2])|0,t=((u=a+(t+n)|0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),n=(c=u&p)^u&m^l,h=d+(a=h+(r=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&g^~f&y)+i[e+3]+v[e+3])|0,d=a+(t+n)|0,this.chromeBugWorkAround=!0;this.h0=this.h0+d|0,this.h1=this.h1+u|0,this.h2=this.h2+p|0,this.h3=this.h3+m|0,this.h4=this.h4+h|0,this.h5=this.h5+f|0,this.h6=this.h6+g|0,this.h7=this.h7+y|0},o.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,a=this.h3,i=this.h4,s=this.h5,o=this.h6,l=this.h7,c=r[e>>>28&15]+r[e>>>24&15]+r[e>>>20&15]+r[e>>>16&15]+r[e>>>12&15]+r[e>>>8&15]+r[e>>>4&15]+r[15&e]+r[t>>>28&15]+r[t>>>24&15]+r[t>>>20&15]+r[t>>>16&15]+r[t>>>12&15]+r[t>>>8&15]+r[t>>>4&15]+r[15&t]+r[n>>>28&15]+r[n>>>24&15]+r[n>>>20&15]+r[n>>>16&15]+r[n>>>12&15]+r[n>>>8&15]+r[n>>>4&15]+r[15&n]+r[a>>>28&15]+r[a>>>24&15]+r[a>>>20&15]+r[a>>>16&15]+r[a>>>12&15]+r[a>>>8&15]+r[a>>>4&15]+r[15&a]+r[i>>>28&15]+r[i>>>24&15]+r[i>>>20&15]+r[i>>>16&15]+r[i>>>12&15]+r[i>>>8&15]+r[i>>>4&15]+r[15&i]+r[s>>>28&15]+r[s>>>24&15]+r[s>>>20&15]+r[s>>>16&15]+r[s>>>12&15]+r[s>>>8&15]+r[s>>>4&15]+r[15&s]+r[o>>>28&15]+r[o>>>24&15]+r[o>>>20&15]+r[o>>>16&15]+r[o>>>12&15]+r[o>>>8&15]+r[o>>>4&15]+r[15&o];return this.is224||(c+=r[l>>>28&15]+r[l>>>24&15]+r[l>>>20&15]+r[l>>>16&15]+r[l>>>12&15]+r[l>>>8&15]+r[l>>>4&15]+r[15&l]),c},o.prototype.toString=o.prototype.hex,o.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,i=this.h5,s=this.h6,o=this.h7,l=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n,a>>>24&255,a>>>16&255,a>>>8&255,255&a,i>>>24&255,i>>>16&255,i>>>8&255,255&i,s>>>24&255,s>>>16&255,s>>>8&255,255&s];return this.is224||l.push(o>>>24&255,o>>>16&255,o>>>8&255,255&o),l},o.prototype.array=o.prototype.digest,o.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},t.sha256=(...e)=>new o(!1,!0).update(e.join("")).hex()},34954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40338),a=r(31635),i=r(64336),s=r(11715);r(16184);var o=r(57221);const l=r(97994).createClientLogger("openai"),c={"POST /deployments/{deploymentId}/audio/transcriptions":["200"],"POST /deployments/{deploymentId}/audio/translations":["200"],"POST /deployments/{deploymentId}/completions":["200"],"POST /deployments/{deploymentId}/chat/completions":["200"],"POST /deployments/{deploymentId}/extensions/chat/completions":["200"],"POST /deployments/{deploymentId}/images/generations":["200"],"POST /deployments/{deploymentId}/embeddings":["200"],"GET /operations/images/{operationId}":["200"],"POST /images/generations:submit":["202"],"GET /images/generations:submit":["200","202"]};function d(e){const t=e.headers["x-ms-original-url"],r=new URL(null!=t?t:e.request.url),n=e.request.method;let a=c[`${n} ${r.pathname}`];return a||(a=function(e,t){var r,n,a,i;const s=t.split("/");let o=-1,l=[];for(const[t,d]of Object.entries(c)){if(!t.startsWith(e))continue;const c=u(t),p=c.split("/");let m=!0;for(let e=p.length-1,t=s.length-1;e>=1&&t>=1;e--,t--){if((null===(r=p[e])||void 0===r?void 0:r.startsWith("{"))&&-1!==(null===(n=p[e])||void 0===n?void 0:n.indexOf("}"))){const r=p[e].indexOf("}")+1,n=null===(a=p[e])||void 0===a?void 0:a.length;if(!new RegExp(`${null===(i=p[e])||void 0===i?void 0:i.slice(r,n)}`).test(s[t]||"")){m=!1;break}continue}if(p[e]!==s[t]){m=!1;break}}m&&c.length>o&&(o=c.length,l=d)}return l}(n,r.pathname)),!a.includes(e.status)}function u(e){const t=e.indexOf("/");return e.slice(t)}function p(e,t){try{return e()}catch(e){throw new Error(`${t}: ${e}`,{cause:e})}}function m(e){if("object"!=typeof e||!e)return e;if(Array.isArray(e))return e.map(e=>m(e));for(const t of Object.keys(e)){const r=e[t],n=f(t);n!==t&&delete e[t],e[n]="object"==typeof e[n]?m(r):r}return e}function h(e){if("object"!=typeof e||!e)return e;if(Array.isArray(e))return e.map(e=>h(e));for(const t of Object.keys(e)){const r=e[t],n=g(t);n!==t&&delete e[t],e[n]="object"==typeof e[n]?h(r):r}return e}function f(e){return e.toLowerCase().replace(/([_][a-z])/g,e=>e.toUpperCase().replace("_",""))}function g(e){return e.replace(/([A-Z])/g,e=>`_${e.toLowerCase()}`).replace(/^_/,"")}function y(e){return a.__asyncGenerator(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:e,done:r}=yield a.__await(t.read());if(r)return yield a.__await(void 0);yield yield a.__await(e)}}finally{const e=t.cancel();t.releaseLock(),yield a.__await(e)}})}async function v(e,t){const r=await async function(e){const{body:t,status:r}=await e.asNodeStream();if("200"!==r&&void 0!==t){const e=await(n=t,new Promise((e,t)=>{const r=[];n.on("data",e=>{Buffer.isBuffer(e)?r.push(e):r.push(Buffer.from(e))}),n.on("end",()=>{e(Buffer.concat(r).toString("utf8"))}),n.on("error",e=>{e&&"AbortError"===(null==e?void 0:e.name)?t(e):t(new s.RestError(`Error reading response as text: ${e.message}`,{code:s.RestError.PARSE_ERROR}))})}));throw p(()=>JSON.parse(e).error,"Error parsing response body")}var n;if(!t)throw new Error("No stream found in response. Did you enable the stream option?");return t}(e),n=o.createSseStream(r),a=new TransformStream({transform:async(e,r)=>{"[DONE]"!==e.data&&r.enqueue(t(p(()=>JSON.parse(e.data),"Error parsing an event. See 'cause' for more details")))}});return i=n.pipeThrough(a),(l=i)[Symbol.asyncIterator]||(l[Symbol.asyncIterator]=()=>y(l)),l.values||(l.values=()=>y(l)),i;var i,l}function b({prompt_annotations:e,prompt_filter_results:t}){var r;const n=null!=t?t:e;return null!==(r=null==n?void 0:n.map(e=>{var{content_filter_results:t}=e,r=a.__rest(e,["content_filter_results"]);return Object.assign(Object.assign({},m(r)),{contentFilterResults:S(t)})}))&&void 0!==r?r:[]}function _(e){const{created:t,choices:r,prompt_filter_results:n,prompt_annotations:i}=e,s=a.__rest(e,["created","choices","prompt_filter_results","prompt_annotations"]);return Object.assign(Object.assign({},m(s)),{created:new Date(t),promptFilterResults:b({prompt_filter_results:n,prompt_annotations:i}),choices:r.map(e=>{var{content_filter_results:t}=e,r=a.__rest(e,["content_filter_results"]);return Object.assign(Object.assign({},m(r)),t?{contentFilterResults:E(t)}:{})})})}function w(e){const{created:t,choices:r,prompt_filter_results:n,prompt_annotations:i}=e,s=a.__rest(e,["created","choices","prompt_filter_results","prompt_annotations"]);return Object.assign(Object.assign({},m(s)),{created:new Date(t),promptFilterResults:b({prompt_filter_results:n,prompt_annotations:i}),choices:r?r.map(e=>{var{content_filter_results:t,delta:r,message:n}=e,i=a.__rest(e,["content_filter_results","delta","message"]);return Object.assign(Object.assign(Object.assign(Object.assign({},m(i)),r?{delta:P(r)}:{}),n?{message:P(n)}:{}),t?{contentFilterResults:E(t)}:{})}):[]})}function P(e){const{context:t,tool_calls:r}=e,n=a.__rest(e,["context","tool_calls"]);return Object.assign(Object.assign(Object.assign({},m(n)),{toolCalls:null!=r?r:[]}),t?{context:Object.assign({},t.messages?{messages:t.messages.map(P)}:{})}:{})}function O(e){var t;return{error:Object.assign(Object.assign({},e),{details:null!==(t=e.details)&&void 0!==t?t:[]})}}function S(e={}){var{error:t}=e,r=a.__rest(e,["error"]);return t?O(t):m(r)}function E(e={}){var{error:t}=e,r=a.__rest(e,["error"]);return t?O(t):m(r)}function A(e,t,r,n={requestOptions:{}}){return e.path("/deployments/{deploymentId}/completions",t).post(Object.assign(Object.assign({},i.operationOptionsToRequestParameters(n)),{body:{prompt:r.prompt,max_tokens:r.maxTokens,temperature:r.temperature,top_p:r.topP,logit_bias:r.logitBias,user:r.user,n:r.n,logprobs:r.logprobs,echo:r.echo,stop:r.stop,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,best_of:r.bestOf,stream:r.stream,model:r.model}}))}async function I(e,t,r,n,o){const l=null!=o?o:"string"==typeof n?{}:null!=n?n:{},c="string"==typeof n?n:void 0,{abortSignal:d,onResponse:u,requestOptions:p,tracingOptions:f}=l,g=a.__rest(l,["abortSignal","onResponse","requestOptions","tracingOptions"]),{body:y,status:v}=await e.pathUnchecked("deployments/{deploymentName}/audio/translations",t).post(Object.assign(Object.assign({},i.operationOptionsToRequestParameters({abortSignal:d,onResponse:u,tracingOptions:f,requestOptions:p})),{contentType:"multipart/form-data",body:Object.assign(Object.assign(Object.assign({},h(g)),{file:s.createFile(r,"placeholder.wav")}),c?{response_format:c}:{})}));if("200"!==v)throw y.error;return"verbose_json"!==c?y:m(y)}async function k(e,t,r,n,o){const l=null!=o?o:"string"==typeof n?{}:null!=n?n:{},c="string"==typeof n?n:void 0,{abortSignal:d,onResponse:u,requestOptions:p,tracingOptions:f}=l,g=a.__rest(l,["abortSignal","onResponse","requestOptions","tracingOptions"]),{body:y,status:v}=await e.pathUnchecked("deployments/{deploymentName}/audio/transcriptions",t).post(Object.assign(Object.assign({},i.operationOptionsToRequestParameters({abortSignal:d,onResponse:u,tracingOptions:f,requestOptions:p})),{contentType:"multipart/form-data",body:Object.assign(Object.assign(Object.assign({},h(g)),{file:s.createFile(r,"placeholder.wav")}),c?{response_format:c}:{})}));if("200"!==v)throw y.error;return"verbose_json"!==c?y:m(y)}function T(e,t,r,n={requestOptions:{}}){const{azureExtensionOptions:s,abortSignal:o,onResponse:l,requestOptions:c,tracingOptions:d}=n,u=a.__rest(n,["azureExtensionOptions","abortSignal","onResponse","requestOptions","tracingOptions"]),p={abortSignal:o,onResponse:l,requestOptions:c,tracingOptions:d},m=Object.assign(Object.assign({},(null==s?void 0:s.extensions)?{dataSources:s.extensions}:{}),(null==s?void 0:s.enhancements)?{enhancements:s.enhancements}:{});return m.dataSources||m.enhancements?function(e,t,r,n={requestOptions:{}}){const{functions:s,functionCall:o,messages:l,dataSources:c}=r,d=a.__rest(r,["functions","functionCall","messages","dataSources"]);return e.path("/deployments/{deploymentId}/extensions/chat/completions",t).post(Object.assign(Object.assign({},i.operationOptionsToRequestParameters(n)),{body:Object.assign(Object.assign({},h(d)),{dataSources:null==c?void 0:c.map(e=>{var{type:t}=e;return{type:t,parameters:a.__rest(e,["type"])}}),functions:s,function_call:o,messages:l.map(j)})}))}(e,t,Object.assign(Object.assign({messages:r},u),m),p):function(e,t,r,n={requestOptions:{}}){const{functions:s,functionCall:o,messages:l}=r,c=a.__rest(r,["functions","functionCall","messages"]);return e.path("/deployments/{deploymentId}/chat/completions",t).post(Object.assign(Object.assign({},i.operationOptionsToRequestParameters(n)),{body:Object.assign(Object.assign({},h(c)),{functions:s,function_call:o,messages:l.map(j)})}))}(e,t,Object.assign({messages:r},u),p)}function j(e){if(void 0===e.content&&(e.content=null),"assistant"===e.role){const{functionCall:t,toolCalls:r}=e,n=a.__rest(e,["functionCall","toolCalls"]);return Object.assign(Object.assign(Object.assign({},h(n)),r&&0!==r.length?{tool_calls:r}:{}),t?{function_call:t}:{})}return h(e)}function C(e){return e.startsWith("Bearer ")?e:`Bearer ${e}`}Object.defineProperty(t,"AzureKeyCredential",{enumerable:!0,get:function(){return n.AzureKeyCredential}}),t.OpenAIClient=class{constructor(e,t={},r={}){var s,o;let c,d,u;if(this._isAzure=!1,function(e){return n.isTokenCredential(e)||void 0!==e.key}(t))d=e,u=t,c=r,this._isAzure=!0;else{d="https://api.openai.com/v1",u=e;const{credentials:r}=t,n=a.__rest(t,["credentials"]);c=Object.assign({credentials:{apiKeyHeaderName:null!==(s=null==r?void 0:r.apiKeyHeaderName)&&void 0!==s?s:"Authorization",scopes:null==r?void 0:r.scopes}},n)}this._client=function(e,t,r={}){const n=function(e,t,r={}){var n,a,s,o,c,d,u,p;const m=null!==(n=r.baseUrl)&&void 0!==n?n:`${e}/openai`;r.apiVersion=null!==(a=r.apiVersion)&&void 0!==a?a:"2023-12-01-preview";const h="azsdk-js-openai-rest/1.0.0-beta.11",f=r.userAgentOptions&&r.userAgentOptions.userAgentPrefix?`${r.userAgentOptions.userAgentPrefix} ${h}`:`${h}`;return r=Object.assign(Object.assign({},r),{userAgentOptions:{userAgentPrefix:f},loggingOptions:{logger:null!==(o=null===(s=r.loggingOptions)||void 0===s?void 0:s.logger)&&void 0!==o?o:l.info},credentials:{scopes:null!==(d=null===(c=r.credentials)||void 0===c?void 0:c.scopes)&&void 0!==d?d:["https://cognitiveservices.azure.com/.default"],apiKeyHeaderName:null!==(p=null===(u=r.credentials)||void 0===u?void 0:u.apiKeyHeaderName)&&void 0!==p?p:"api-key"}}),i.getClient(m,t,r)}(e,t,r);return n}(d,u,Object.assign(Object.assign({},c),this._isAzure?{}:{additionalPolicies:[...null!==(o=c.additionalPolicies)&&void 0!==o?o:[],{position:"perCall",policy:{name:"openAiEndpoint",sendRequest:(e,t)=>{const r=new URL(e.url),n=r.pathname.split("/");switch(n[n.length-1]){case"completions":"chat"===n[n.length-2]?r.pathname=`${n[1]}/chat/completions`:r.pathname=`${n[1]}/completions`;break;case"embeddings":r.pathname=`${n[1]}/embeddings`;break;case"generations":if("images"!==n[n.length-2])throw new Error("Unexpected path");r.pathname=`${n[1]}/images/generations`;break;case"transcriptions":r.pathname=`${n[1]}/audio/transcriptions`;break;case"translations":r.pathname=`${n[1]}/audio/translations`}return r.searchParams.delete("api-version"),e.url=r.toString(),t(e)}}}]}))}getCompletions(e,t,r={requestOptions:{}}){return this.setModel(e,r),async function(e,t,r,n={requestOptions:{}}){const{abortSignal:i,onResponse:s,requestOptions:o,tracingOptions:l}=n,c=a.__rest(n,["abortSignal","onResponse","requestOptions","tracingOptions"]);return async function(e){if(d(e))throw e.body.error;return _(e.body)}(await A(e,t,Object.assign({prompt:r},c),{abortSignal:i,onResponse:s,requestOptions:o,tracingOptions:l}))}(this._client,e,t,r)}streamCompletions(e,t,r={}){return this.setModel(e,r),function(e,t,r,n={requestOptions:{}}){const{abortSignal:i,onResponse:s,requestOptions:o,tracingOptions:l}=n,c=a.__rest(n,["abortSignal","onResponse","requestOptions","tracingOptions"]);return v(A(e,t,Object.assign(Object.assign({prompt:r},c),{stream:!0}),{abortSignal:i,onResponse:s,requestOptions:o,tracingOptions:l}),_)}(this._client,e,t,r)}getEmbeddings(e,t,r={requestOptions:{}}){return this.setModel(e,r),async function(e,t,r,n={requestOptions:{}}){const a=await function(e,t,r,n={requestOptions:{}}){return e.path("/deployments/{deploymentId}/embeddings",t).post(Object.assign(Object.assign({},i.operationOptionsToRequestParameters(n)),{body:{user:r.user,model:r.model,input:r.input}}))}(e,t,r,n);return async function(e){if(d(e))throw e.body.error;return{data:e.body.data.map(e=>({embedding:e.embedding,index:e.index})),usage:{promptTokens:e.body.usage.prompt_tokens,totalTokens:e.body.usage.total_tokens}}}(a)}(this._client,e,Object.assign({input:t},r),r)}getChatCompletions(e,t,r={requestOptions:{}}){return this.setModel(e,r),async function(e,t,r,n={requestOptions:{}}){return async function(e){if(d(e))throw e.body.error;return w(e.body)}(await T(e,t,r,n))}(this._client,e,t,r)}streamChatCompletions(e,t,r={requestOptions:{}}){return this.setModel(e,r),function(e,t,r,n={requestOptions:{}}){return v(T(e,t,r,Object.assign(Object.assign({},n),{stream:!0})),w)}(this._client,e,t,r)}getImages(e,t,r={requestOptions:{}}){return this.setModel(e,r),async function(e,t,r,n={requestOptions:{}}){const{abortSignal:s,onResponse:o,requestOptions:l,tracingOptions:c}=n,u=a.__rest(n,["abortSignal","onResponse","requestOptions","tracingOptions"]),p=await function(e,t,r,n={requestOptions:{}}){return e.path("/deployments/{deploymentId}/images/generations",t).post(Object.assign(Object.assign({},i.operationOptionsToRequestParameters(n)),{body:{model:r.model,prompt:r.prompt,n:r.n,size:r.size,response_format:r.responseFormat,quality:r.quality,style:r.style,user:r.user}}))}(e,t,Object.assign({prompt:r},u),{abortSignal:s,onResponse:o,requestOptions:l,tracingOptions:c});return async function(e){if(d(e))throw e.body.error;return{created:new Date(e.body.created),data:e.body.data.map(e=>({url:e.url,base64Data:e.b64_json,revisedPrompt:e.revised_prompt}))}}(p)}(this._client,e,t,r)}async getAudioTranscription(e,t,r,n){const a=null!=n?n:"string"==typeof r?{}:null!=r?r:{},i="string"==typeof r?r:void 0;return this.setModel(e,a),void 0===i?k(this._client,e,t,a):k(this._client,e,t,i,a)}async getAudioTranslation(e,t,r,n){const a=null!=n?n:"string"==typeof r?{}:null!=r?r:{},i="string"==typeof r?r:void 0;return this.setModel(e,a),void 0===i?I(this._client,e,t,a):I(this._client,e,t,i,a)}setModel(e,t){this._isAzure||(t.model=e)}},t.OpenAIKeyCredential=class{constructor(e){if(!e)throw new Error("key must be a non-empty string");this._key=C(e)}get key(){return this._key}update(e){this._key=C(e)}}},35001:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbortError=void 0;class r extends Error{constructor(e){super(e),this.name="AbortError"}}t.AbortError=r},35137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraderModels=void 0;const n=r(82040);class a extends n.APIResource{}t.GraderModels=a},35176:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiVersionPolicy=t.apiVersionPolicyName=void 0,t.apiVersionPolicyName="ApiVersionPolicy",t.apiVersionPolicy=function(e){return{name:t.apiVersionPolicyName,sendRequest:(t,r)=>{const n=new URL(t.url);return!n.searchParams.get("api-version")&&e.apiVersion&&(t.url=`${t.url}${Array.from(n.searchParams.keys()).length>0?"&":"?"}api-version=${e.apiVersion}`),r(t)}}}},35392:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="5.12.0"},35422:(e,t,r)=>{"use strict";const n=r(63735),a=r(41236).fromCallback;e.exports={remove:a(function(e,t){n.rm(e,{recursive:!0,force:!0},t)}),removeSync:function(e){n.rmSync(e,{recursive:!0,force:!0})}}},35478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunnablePassthrough=void 0;const n=r(71043),a=r(48307),i=r(15382);class s extends a.Runnable{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const r=(0,i.ensureConfig)(t);return this.func&&await this.func(e,r),this._callWithConfig(e=>Promise.resolve(e),e,r)}async*transform(e,t){const r=(0,i.ensureConfig)(t);let a,s=!0;for await(const t of this._transformStreamWithConfig(e,e=>e,r))if(yield t,s)if(void 0===a)a=t;else try{a=(0,n.concat)(a,t)}catch{a=void 0,s=!1}this.func&&void 0!==a&&await this.func(a,r)}static assign(e){return new a.RunnableAssign(new a.RunnableMap({steps:e}))}}t.RunnablePassthrough=s},35483:(e,t,r)=>{e.exports=r(55672)},35580:(e,t,r)=>{"use strict";const n=r(50560);e.exports=(e,t,r)=>n(e,t,r)>0},35683:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},35705:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseCallbackHandler=void 0;const s=i(r(96383)),o=r(65925),l=r(89008);class c{}class d extends c{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,(0,o.get_lc_unique_name)(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:"true"!==(0,l.getEnvironmentVariable)("LANGCHAIN_CALLBACKS_BACKGROUND")}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return o.Serializable.prototype.toJSON.call(this)}toJSONNotImplemented(){return o.Serializable.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends d{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:s.v4()}),Object.assign(this,e)}}}}t.BaseCallbackHandler=d},36161:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._RootEventFilter=void 0,t.isRunnableInterface=function(e){return!!e&&e.lc_runnable},t._RootEventFilter=class{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=void 0===this.includeNames&&void 0===this.includeTypes&&void 0===this.includeTags;const n=e.tags??[];return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(t)),void 0!==this.includeTags&&(r=r||n.some(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(t)),void 0!==this.excludeTags&&(r=r&&n.every(e=>!this.excludeTags?.includes(e))),r}}},36213:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRefs=void 0;const n=r(51881);t.getRefs=e=>{const t=(0,n.getDefaultOptions)(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}}},36278:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNeverDef=void 0;const n=r(95346);t.parseNeverDef=function(e){return"openAi"===e.target?void 0:{not:(0,n.parseAnyDef)({...e,currentPath:[...e.currentPath,"not"]})}}},36440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNativeEnumDef=function(e){const t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}},36516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunnablePassthrough=void 0;const n=r(28033),a=r(10969),i=r(5272);class s extends a.Runnable{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const r=(0,i.ensureConfig)(t);return this.func&&await this.func(e,r),this._callWithConfig(e=>Promise.resolve(e),e,r)}async*transform(e,t){const r=(0,i.ensureConfig)(t);let a,s=!0;for await(const t of this._transformStreamWithConfig(e,e=>e,r))if(yield t,s)if(void 0===a)a=t;else try{a=(0,n.concat)(a,t)}catch{a=void 0,s=!1}this.func&&void 0!==a&&await this.func(a,r)}static assign(e){return new a.RunnableAssign(new a.RunnableMap({steps:e}))}}t.RunnablePassthrough=s},36673:(e,t,r)=>{"use strict";var n=r(24876),a=r(92472),i={TRANSITIONAL:0,NONTRANSITIONAL:1};function s(e){return e.split("\0").map(function(e){return e.normalize("NFC")}).join("\0")}function o(e){for(var t=0,r=a.length-1;t<=r;){var n=Math.floor((t+r)/2),i=a[n];if(i[0][0]<=e&&i[0][1]>=e)return i;i[0][0]>e?r=n-1:t=n+1}return null}var l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function c(e){return e.replace(l,"_").length}var d=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E4-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2D]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDE2C-\uDE37\uDEDF-\uDEEA\uDF01-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDE30-\uDE40\uDEAB-\uDEB7]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD83A[\uDCD0-\uDCD6]|\uDB40[\uDD00-\uDDEF]/;function u(e,t){"xn--"===e.substr(0,4)&&(e=n.toUnicode(e));var r=!1;(s(e)!==e||"-"===e[3]&&"-"===e[4]||"-"===e[0]||"-"===e[e.length-1]||-1!==e.indexOf(".")||0===e.search(d))&&(r=!0);for(var a=c(e),l=0;l<a;++l){var u=o(e.codePointAt(l));if(p===i.TRANSITIONAL&&"valid"!==u[1]||p===i.NONTRANSITIONAL&&"valid"!==u[1]&&"deviation"!==u[1]){r=!0;break}}return{label:e,error:r}}function p(e,t,r){var n=function(e,t,r){for(var n=!1,a="",s=c(e),l=0;l<s;++l){var d=e.codePointAt(l),u=o(d);switch(u[1]){case"disallowed":n=!0,a+=String.fromCodePoint(d);break;case"ignored":break;case"mapped":a+=String.fromCodePoint.apply(String,u[2]);break;case"deviation":a+=r===i.TRANSITIONAL?String.fromCodePoint.apply(String,u[2]):String.fromCodePoint(d);break;case"valid":a+=String.fromCodePoint(d);break;case"disallowed_STD3_mapped":t?(n=!0,a+=String.fromCodePoint(d)):a+=String.fromCodePoint.apply(String,u[2]);break;case"disallowed_STD3_valid":t&&(n=!0),a+=String.fromCodePoint(d)}}return{string:a,error:n}}(e,t,r);n.string=s(n.string);for(var a=n.string.split("."),l=0;l<a.length;++l)try{var d=u(a[l]);a[l]=d.label,n.error=n.error||d.error}catch(e){n.error=!0}return{string:a.join("."),error:n.error}}e.exports.toASCII=function(e,t,r,a){var i=p(e,t,r),s=i.string.split(".");if(s=s.map(function(e){try{return n.toASCII(e)}catch(t){return i.error=!0,e}}),a){var o=s.slice(0,s.length-1).join(".").length;(o.length>253||0===o.length)&&(i.error=!0);for(var l=0;l<s.length;++l)if(s.length>63||0===s.length){i.error=!0;break}}return i.error?null:s.join(".")},e.exports.toUnicode=function(e,t){var r=p(e,t,i.NONTRANSITIONAL);return{domain:r.string,error:r.error}},e.exports.PROCESSING_OPTIONS=i},36704:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnknownDef=void 0;const n=r(59160);t.parseUnknownDef=function(e){return(0,n.parseAnyDef)(e)}},37005:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"harf",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"unsur",verb:"olmalıdır"},set:{unit:"unsur",verb:"olmalıdır"}};function t(t){return e[t]??null}const r={regex:"giren",email:"epostagâh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengâmı",date:"ISO tarihi",time:"ISO zamanı",duration:"ISO müddeti",ipv4:"IPv4 nişânı",ipv6:"IPv6 nişânı",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-şifreli metin",base64url:"base64url-şifreli metin",json_string:"JSON metin",e164:"E.164 sayısı",jwt:"JWT",template_literal:"giren"};return e=>{switch(e.code){case"invalid_type":return`Fâsit giren: umulan ${e.expected}, alınan ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numara";case"object":if(Array.isArray(e))return"saf";if(null===e)return"gayb";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Fâsit giren: umulan ${s.stringifyPrimitive(e.values[0])}`:`Fâsit tercih: mûteberler ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Fazla büyük: ${e.origin??"value"}, ${r}${e.maximum.toString()} ${n.unit??"elements"} sahip olmalıydı.`:`Fazla büyük: ${e.origin??"value"}, ${r}${e.maximum.toString()} olmalıydı.`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Fazla küçük: ${e.origin}, ${r}${e.minimum.toString()} ${n.unit} sahip olmalıydı.`:`Fazla küçük: ${e.origin}, ${r}${e.minimum.toString()} olmalıydı.`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Fâsit metin: "${t.prefix}" ile başlamalı.`:"ends_with"===t.format?`Fâsit metin: "${t.suffix}" ile bitmeli.`:"includes"===t.format?`Fâsit metin: "${t.includes}" ihtivâ etmeli.`:"regex"===t.format?`Fâsit metin: ${t.pattern} nakşına uymalı.`:`Fâsit ${r[t.format]??e.format}`}case"not_multiple_of":return`Fâsit sayı: ${e.divisor} katı olmalıydı.`;case"unrecognized_keys":return`Tanınmayan anahtar ${e.keys.length>1?"s":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} için tanınmayan anahtar var.`;case"invalid_union":return"Giren tanınamadı.";case"invalid_element":return`${e.origin} için tanınmayan kıymet var.`;default:return"Kıymet tanınamadı."}}}},37067:e=>{"use strict";e.exports=require("node:http")},37118:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},37146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_RETRY_POLICY_COUNT=t.SDK_VERSION=void 0,t.SDK_VERSION="0.3.0",t.DEFAULT_RETRY_POLICY_COUNT=3},37215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warnOnce=function(e){r[e]||(console.warn(e),r[e]=!0)};const r={}},37255:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputParserException=t.BaseOutputParser=t.BaseLLMOutputParser=void 0;const n=r(37534),a=r(64635);class i extends n.Runnable{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}_baseMessageToString(e){return"string"==typeof e.content?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return"string"==typeof e?this._callWithConfig(async(e,t)=>this.parseResult([{text:e}],t?.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(e,t)=>this.parseResult([{message:e,text:this._baseMessageToString(e)}],t?.callbacks),e,{...t,runType:"parser"})}}t.BaseLLMOutputParser=i,t.BaseOutputParser=class extends i{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}};class s extends Error{constructor(e,t,r,n=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=r,this.sendToLLM=n,n&&(void 0===r||void 0===t))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");(0,a.addLangChainErrorFields)(this,"OUTPUT_PARSING_FAILURE")}}t.OutputParserException=s},37450:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepClone=t.JsonPatchError=void 0,t.getValueByPointer=s,t.applyOperation=o,t.applyPatch=l,t.applyReducer=function(e,r,n){const a=o(e,r);if(!1===a.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",n,r,e);return a.newDocument},t.validator=c,t.validate=d,t._areEquals=u;const n=r(19350);t.JsonPatchError=n.PatchError,t.deepClone=n._deepClone;const a={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){let a=s(r,this.path);a&&(a=(0,n._deepClone)(a));const i=o(r,{op:"remove",path:this.from}).removed;return o(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:a}},copy:function(e,t,r){const a=s(r,this.from);return o(r,{op:"add",path:this.path,value:(0,n._deepClone)(a)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:u(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}};var i={add:function(e,t,r){return(0,n.isInteger)(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:a.move,copy:a.copy,test:a.test,_get:a._get};function s(e,t){if(""==t)return e;var r={op:"_get",path:t};return o(e,r),r.value}function o(e,r,o=!1,l=!0,d=!0,p=0){if(o&&("function"==typeof o?o(r,0,e,r.path):c(r,0)),""===r.path){let n={newDocument:e};if("add"===r.op)return n.newDocument=r.value,n;if("replace"===r.op)return n.newDocument=r.value,n.removed=e,n;if("move"===r.op||"copy"===r.op)return n.newDocument=s(e,r.from),"move"===r.op&&(n.removed=e),n;if("test"===r.op){if(n.test=u(e,r.value),!1===n.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",p,r,e);return n.newDocument=e,n}if("remove"===r.op)return n.removed=e,n.newDocument=null,n;if("_get"===r.op)return r.value=e,n;if(o)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",p,r,e);return n}{l||(e=(0,n._deepClone)(e));const s=(r.path||"").split("/");let u,m,h,f=e,g=1,y=s.length;for(h="function"==typeof o?o:c;;){if(m=s[g],m&&-1!=m.indexOf("~")&&(m=(0,n.unescapePathComponent)(m)),d&&("__proto__"==m||"prototype"==m&&g>0&&"constructor"==s[g-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(o&&void 0===u&&(void 0===f[m]?u=s.slice(0,g).join("/"):g==y-1&&(u=r.path),void 0!==u&&h(r,0,e,u)),g++,Array.isArray(f)){if("-"===m)m=f.length;else{if(o&&!(0,n.isInteger)(m))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",p,r,e);(0,n.isInteger)(m)&&(m=~~m)}if(g>=y){if(o&&"add"===r.op&&m>f.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",p,r,e);const n=i[r.op].call(r,f,m,e);if(!1===n.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",p,r,e);return n}}else if(g>=y){const n=a[r.op].call(r,f,m,e);if(!1===n.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",p,r,e);return n}if(f=f[m],o&&g<y&&(!f||"object"!=typeof f))throw new t.JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",p,r,e)}}}function l(e,r,a,i=!0,s=!0){if(a&&!Array.isArray(r))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=(0,n._deepClone)(e));const l=new Array(r.length);for(let t=0,n=r.length;t<n;t++)l[t]=o(e,r[t],a,!0,s,t),e=l[t].newDocument;return l.newDocument=e,l}function c(e,r,i,s){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,e,i);if(!a[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,e,i);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,e,i);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,e,i);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,e,i);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&(0,n.hasUndefined)(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,e,i);if(i)if("add"==e.op){var o=e.path.split("/").length,l=s.split("/").length;if(o!==l+1&&o!==l)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,e,i)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==s)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,e,i)}else if("move"===e.op||"copy"===e.op){var c=d([{op:"_get",path:e.from,value:void 0}],i);if(c&&"OPERATION_PATH_UNRESOLVABLE"===c.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,e,i)}}function d(e,r,a){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)l((0,n._deepClone)(r),(0,n._deepClone)(e),a||!0);else{a=a||c;for(var i=0;i<e.length;i++)a(e[i],i,r,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}function u(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,a,i=Array.isArray(e),s=Array.isArray(t);if(i&&s){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!u(e[r],t[r]))return!1;return!0}if(i!=s)return!1;var o=Object.keys(e);if((n=o.length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!t.hasOwnProperty(o[r]))return!1;for(r=n;0!==r--;)if(!u(e[a=o[r]],t[a]))return!1;return!0}return e!=e&&t!=t}},37498:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBooleanDef=void 0,t.parseBooleanDef=function(){return{type:"boolean"}}},37534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunnableWithMessageHistory=t.RunnableBranch=t.RouterRunnable=t.RunnablePassthrough=t.pickRunnableConfigKeys=t.mergeConfigs=t.ensureConfig=t.patchConfig=t.getCallbackManagerForConfig=t.RunnableToolLike=t._coerceToRunnable=t.RunnablePick=t.RunnableAssign=t.RunnableWithFallbacks=t.RunnableLambda=t.RunnableParallel=t.RunnableMap=t.RunnableSequence=t.RunnableRetry=t.RunnableEach=t.RunnableBinding=t.Runnable=void 0;var n=r(10969);Object.defineProperty(t,"Runnable",{enumerable:!0,get:function(){return n.Runnable}}),Object.defineProperty(t,"RunnableBinding",{enumerable:!0,get:function(){return n.RunnableBinding}}),Object.defineProperty(t,"RunnableEach",{enumerable:!0,get:function(){return n.RunnableEach}}),Object.defineProperty(t,"RunnableRetry",{enumerable:!0,get:function(){return n.RunnableRetry}}),Object.defineProperty(t,"RunnableSequence",{enumerable:!0,get:function(){return n.RunnableSequence}}),Object.defineProperty(t,"RunnableMap",{enumerable:!0,get:function(){return n.RunnableMap}}),Object.defineProperty(t,"RunnableParallel",{enumerable:!0,get:function(){return n.RunnableParallel}}),Object.defineProperty(t,"RunnableLambda",{enumerable:!0,get:function(){return n.RunnableLambda}}),Object.defineProperty(t,"RunnableWithFallbacks",{enumerable:!0,get:function(){return n.RunnableWithFallbacks}}),Object.defineProperty(t,"RunnableAssign",{enumerable:!0,get:function(){return n.RunnableAssign}}),Object.defineProperty(t,"RunnablePick",{enumerable:!0,get:function(){return n.RunnablePick}}),Object.defineProperty(t,"_coerceToRunnable",{enumerable:!0,get:function(){return n._coerceToRunnable}}),Object.defineProperty(t,"RunnableToolLike",{enumerable:!0,get:function(){return n.RunnableToolLike}});var a=r(5272);Object.defineProperty(t,"getCallbackManagerForConfig",{enumerable:!0,get:function(){return a.getCallbackManagerForConfig}}),Object.defineProperty(t,"patchConfig",{enumerable:!0,get:function(){return a.patchConfig}}),Object.defineProperty(t,"ensureConfig",{enumerable:!0,get:function(){return a.ensureConfig}}),Object.defineProperty(t,"mergeConfigs",{enumerable:!0,get:function(){return a.mergeConfigs}}),Object.defineProperty(t,"pickRunnableConfigKeys",{enumerable:!0,get:function(){return a.pickRunnableConfigKeys}});var i=r(36516);Object.defineProperty(t,"RunnablePassthrough",{enumerable:!0,get:function(){return i.RunnablePassthrough}});var s=r(48949);Object.defineProperty(t,"RouterRunnable",{enumerable:!0,get:function(){return s.RouterRunnable}});var o=r(45226);Object.defineProperty(t,"RunnableBranch",{enumerable:!0,get:function(){return o.RunnableBranch}});var l=r(93602);Object.defineProperty(t,"RunnableWithMessageHistory",{enumerable:!0,get:function(){return l.RunnableWithMessageHistory}})},37581:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mapKeys=t.keyFromJson=t.keyToJson=void 0;const a=n(r(79478)),i=n(r(12729));t.keyToJson=function(e,t){return t?.[e]||(0,a.default)(e)},t.keyFromJson=function(e,t){return t?.[e]||(0,i.default)(e)},t.mapKeys=function(e,t,r){const n={};for(const a in e)Object.hasOwn(e,a)&&(n[t(a,r)]=e[a]);return n}},37621:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbedderFactory=t.VectorRetriever=t.VectorDatabase=t.LocalEmbedder=t.OpenAIEmbedder=t.Embedder=void 0;const n=r(17645);class a{constructor(e){this.config=e}async embedBatch(e){const t=[];for(const r of e){const e=await this.embed(r);t.push(e)}return t}}t.Embedder=a;class i extends a{async embed(e){const t=this.config.embedderConfig?.apiKey||this.config.apiKey,r=this.config.embedderConfig?.model||"text-embedding-ada-002",a=this.config.embedderConfig?.baseUrl||this.config.baseUrl||"https://api.openai.com/v1";try{const i=await n(`${a}/embeddings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:r,input:e})});if(!i.ok)throw new Error(`OpenAI Embedding API error: ${i.status} ${i.statusText}`);return(await i.json()).data[0].embedding}catch(e){throw console.error("OpenAI embedding failed:",e),e}}}t.OpenAIEmbedder=i;class s extends a{constructor(){super(...arguments),this.vocabulary=new Map,this.idf=new Map,this.documentCount=0,this.vectorDimension=512}train(e){this.documentCount=e.length;const t=new Map;e.forEach(e=>{const r=this.tokenize(e);new Set(r).forEach(e=>{this.vocabulary.has(e)||this.vocabulary.set(e,this.vocabulary.size),t.set(e,(t.get(e)||0)+1)})});for(const[e,r]of t)this.idf.set(e,Math.log(this.documentCount/r))}async embed(e){const t=this.tokenize(e),r=new Map;t.forEach(e=>{r.set(e,(r.get(e)||0)+1)});const n=new Array(this.vectorDimension).fill(0);for(const[e,a]of r){const r=this.vocabulary.get(e);if(void 0!==r&&r<this.vectorDimension){const i=a/t.length,s=this.idf.get(e)||0;n[r]=i*s}}const a=Math.sqrt(n.reduce((e,t)=>e+t*t,0));if(a>0)for(let e=0;e<n.length;e++)n[e]/=a;return n}tokenize(e){return e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(e=>e.length>2)}}t.LocalEmbedder=s;class o{constructor(e){this.embeddings=[],this.embedder=e}async addDocument(e){const t=`${e.title}\n${e.content}`,r=await this.embedder.embed(t);this.embeddings.push({vector:r,text:t,metadata:{title:e.title,path:e.path,type:e.type}})}async addDocuments(e){for(const t of e)await this.addDocument(t)}async search(e,t=5){if(0===this.embeddings.length)return{documents:[],query:e,totalResults:0};const r=await this.embedder.embed(e),n=this.embeddings.map((e,t)=>({index:t,similarity:this.cosineSimilarity(r,e.vector),embedding:e}));return n.sort((e,t)=>t.similarity-e.similarity),{documents:n.slice(0,t).map(e=>({id:e.embedding.metadata.path,title:e.embedding.metadata.title||"",content:e.embedding.text||"",path:e.embedding.metadata.path,type:e.embedding.metadata.type,relevanceScore:e.similarity})),query:e,totalResults:this.embeddings.length}}cosineSimilarity(e,t){if(e.length!==t.length)return 0;let r=0,n=0,a=0;for(let i=0;i<e.length;i++)r+=e[i]*t[i],n+=e[i]*e[i],a+=t[i]*t[i];return 0===n||0===a?0:r/(Math.sqrt(n)*Math.sqrt(a))}getStats(){return{totalDocuments:this.embeddings.length,vectorDimension:this.embeddings.length>0?this.embeddings[0].vector.length:0}}clear(){this.embeddings=[]}}t.VectorDatabase=o,t.VectorRetriever=class{constructor(e){this.isInitialized=!1;const t=e.embedderConfig?.provider||"local";this.embedder="openai"===t?new i(e):new s(e),this.vectorDb=new o(this.embedder)}async initialize(e){if(!this.isInitialized){if(console.log(`Initializing vector retriever with ${e.length} documents...`),this.embedder instanceof s){const t=e.map(e=>`${e.title}\n${e.content}`);this.embedder.train(t)}await this.vectorDb.addDocuments(e),this.isInitialized=!0,console.log("Vector retriever initialized successfully")}}async retrieve(e,t=5){if(!this.isInitialized)throw new Error("Vector retriever not initialized. Call initialize() first.");return await this.vectorDb.search(e,t)}async addDocument(e){await this.vectorDb.addDocument(e)}async addDocuments(e){await this.vectorDb.addDocuments(e)}getStats(){return{...this.vectorDb.getStats(),isInitialized:this.isInitialized}}reset(){this.vectorDb.clear(),this.isInitialized=!1}},t.EmbedderFactory=class{static createEmbedder(e){return"openai"===(e.embedderConfig?.provider||"local")?new i(e):new s(e)}}},37738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseLanguageModel=t.BaseLangChain=t.calculateMaxTokens=t.getModelContextSize=t.getEmbeddingContextSize=t.getModelNameForTiktoken=void 0,t.isOpenAITool=function(e){return!("object"!=typeof e||!e)&&!!("type"in e&&"function"===e.type&&"function"in e&&"object"==typeof e.function&&e.function&&"name"in e.function&&"parameters"in e.function)};const n=r(32902),a=r(5118),i=r(68081),s=r(61583),o=r(10454),l=r(10969);t.getModelNameForTiktoken=e=>e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e,t.getEmbeddingContextSize=e=>"text-embedding-ada-002"===e?8191:2046,t.getModelContextSize=e=>{switch((0,t.getModelNameForTiktoken)(e)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":default:return 4097;case"text-curie-001":case"text-babbage-001":case"text-ada-001":case"code-cushman-001":return 2048;case"code-davinci-002":return 8e3}},t.calculateMaxTokens=async({prompt:e,modelName:r})=>{let n;try{n=(await(0,o.encodingForModel)((0,t.getModelNameForTiktoken)(r))).encode(e).length}catch(t){console.warn("Failed to calculate number of tokens, falling back to approximate count"),n=Math.ceil(e.length/4)}return(0,t.getModelContextSize)(r)-n};class c extends l.Runnable{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??!1,this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}t.BaseLangChain=c,t.BaseLanguageModel=class extends c{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){const{cache:a,...i}=r;super({callbacks:e??t,...i}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache="object"==typeof a?a:a?n.InMemoryCache.global():void 0,this.caller=new s.AsyncCaller(r??{})}async getNumTokens(e){let r;r="string"==typeof e?e:e.map(e=>"string"==typeof e?e:"text"===e.type&&"text"in e?e.text:"").join("");let n=Math.ceil(r.length/4);if(!this._encoding)try{this._encoding=await(0,o.encodingForModel)("modelName"in this?(0,t.getModelNameForTiktoken)(this.modelName):"gpt2")}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}if(this._encoding)try{n=this._encoding.encode(r).length}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}return n}static _convertInputToPromptValue(e){return"string"==typeof e?new a.StringPromptValue(e):Array.isArray(e)?new a.ChatPromptValue(e.map(i.coerceMessageLikeToMessage)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){const r={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([e,t])=>void 0!==t).map(([e,t])=>`${e}:${JSON.stringify(t)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}},37839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sanitizer=void 0;const n=r(18373),a="REDACTED",i=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],s=["api-version"];t.Sanitizer=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=i.concat(e),t=s.concat(t),this.allowedHeaderNames=new Set(e.map(e=>e.toLowerCase())),this.allowedQueryParameters=new Set(t.map(e=>e.toLowerCase()))}sanitize(e){const t=new Set;return JSON.stringify(e,(e,r)=>{if(r instanceof Error)return Object.assign(Object.assign({},r),{name:r.name,message:r.message});if("headers"===e)return this.sanitizeHeaders(r);if("url"===e)return this.sanitizeUrl(r);if("query"===e)return this.sanitizeQuery(r);if("body"!==e&&"response"!==e&&"operationSpec"!==e){if(Array.isArray(r)||(0,n.isObject)(r)){if(t.has(r))return"[Circular]";t.add(r)}return r}},2)}sanitizeUrl(e){if("string"!=typeof e||null===e||""===e)return e;const t=new URL(e);if(!t.search)return e;for(const[e]of t.searchParams)this.allowedQueryParameters.has(e.toLowerCase())||t.searchParams.set(e,a);return t.toString()}sanitizeHeaders(e){const t={};for(const r of Object.keys(e))this.allowedHeaderNames.has(r.toLowerCase())?t[r]=e[r]:t[r]=a;return t}sanitizeQuery(e){if("object"!=typeof e||null===e)return e;const t={};for(const r of Object.keys(e))this.allowedQueryParameters.has(r.toLowerCase())?t[r]=e[r]:t[r]=a;return t}}},38522:e=>{"use strict";e.exports=require("node:zlib")},38848:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBooleanDef=void 0,t.parseBooleanDef=function(){return{type:"boolean"}}},38983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zodPatterns=void 0,t.parseStringDef=function(e,r){const a={type:"string"};function l(e){return"escape"===r.patternStrategy?i(e):e}if(e.checks)for(const i of e.checks)switch(i.kind){case"min":(0,n.setResponseValueAndErrors)(a,"minLength","number"==typeof a.minLength?Math.max(a.minLength,i.value):i.value,i.message,r);break;case"max":(0,n.setResponseValueAndErrors)(a,"maxLength","number"==typeof a.maxLength?Math.min(a.maxLength,i.value):i.value,i.message,r);break;case"email":switch(r.emailStrategy){case"format:email":s(a,"email",i.message,r);break;case"format:idn-email":s(a,"idn-email",i.message,r);break;case"pattern:zod":o(a,t.zodPatterns.email,i.message,r)}break;case"url":s(a,"uri",i.message,r);break;case"uuid":s(a,"uuid",i.message,r);break;case"regex":o(a,i.regex,i.message,r);break;case"cuid":o(a,t.zodPatterns.cuid,i.message,r);break;case"cuid2":o(a,t.zodPatterns.cuid2,i.message,r);break;case"startsWith":o(a,RegExp(`^${l(i.value)}`),i.message,r);break;case"endsWith":o(a,RegExp(`${l(i.value)}$`),i.message,r);break;case"datetime":s(a,"date-time",i.message,r);break;case"date":s(a,"date",i.message,r);break;case"time":s(a,"time",i.message,r);break;case"duration":s(a,"duration",i.message,r);break;case"length":(0,n.setResponseValueAndErrors)(a,"minLength","number"==typeof a.minLength?Math.max(a.minLength,i.value):i.value,i.message,r),(0,n.setResponseValueAndErrors)(a,"maxLength","number"==typeof a.maxLength?Math.min(a.maxLength,i.value):i.value,i.message,r);break;case"includes":o(a,RegExp(l(i.value)),i.message,r);break;case"ip":"v6"!==i.version&&s(a,"ipv4",i.message,r),"v4"!==i.version&&s(a,"ipv6",i.message,r);break;case"emoji":o(a,t.zodPatterns.emoji,i.message,r);break;case"ulid":o(a,t.zodPatterns.ulid,i.message,r);break;case"base64":switch(r.base64Strategy){case"format:binary":s(a,"binary",i.message,r);break;case"contentEncoding:base64":(0,n.setResponseValueAndErrors)(a,"contentEncoding","base64",i.message,r);break;case"pattern:zod":o(a,t.zodPatterns.base64,i.message,r)}break;case"nanoid":o(a,t.zodPatterns.nanoid,i.message,r);case"toLowerCase":case"toUpperCase":case"trim":break;default:(()=>{})()}return a};const n=r(56705);let a;t.zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===a&&(a=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),a),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};const i=e=>Array.from(e).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),s=(e,t,r,a)=>{e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):(0,n.setResponseValueAndErrors)(e,"format",t,r,a)},o=(e,t,r,a)=>{e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:l(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):(0,n.setResponseValueAndErrors)(e,"pattern",l(t,a),r,a)},l=(e,t)=>{const r="function"==typeof e?e():e;if(!t.applyRegexFlags||!r.flags)return r.source;const n=r.flags.includes("i"),a=r.flags.includes("m"),i=r.flags.includes("s"),s=n?r.source.toLowerCase():r.source;let o="",l=!1,c=!1,d=!1;for(let e=0;e<s.length;e++)if(l)o+=s[e],l=!1;else{if(n)if(c){if(s[e].match(/[a-z]/)){d?(o+=s[e],o+=`${s[e-2]}-${s[e]}`.toUpperCase(),d=!1):"-"===s[e+1]&&s[e+2]?.match(/[a-z]/)?(o+=s[e],d=!0):o+=`${s[e]}${s[e].toUpperCase()}`;continue}}else if(s[e].match(/[a-z]/)){o+=`[${s[e]}${s[e].toUpperCase()}]`;continue}if(a){if("^"===s[e]){o+="(^|(?<=[\r\n]))";continue}if("$"===s[e]){o+="($|(?=[\r\n]))";continue}}i&&"."===s[e]?o+=c?`${s[e]}\r\n`:`[${s[e]}\r\n]`:(o+=s[e],"\\"===s[e]?l=!0:c&&"]"===s[e]?c=!1:c||"["!==s[e]||(c=!0))}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return o}},39012:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBrandedDef=function(e,t){return(0,n.parseDef)(e.type._def,t)};const n=r(95445)},39023:e=>{"use strict";e.exports=require("util")},39069:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Flag=1]="Flag",e[e.Basic=2]="Basic",e[e.Detailed=4]="Detailed"}(r||(t.OutputFormat=r={}))},39111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sanitizer=t.uint8ArrayToString=t.stringToUint8Array=t.isWebWorker=t.isReactNative=t.isDeno=t.isNodeRuntime=t.isNodeLike=t.isBun=t.isBrowser=t.randomUUID=t.computeSha256Hmac=t.computeSha256Hash=t.isError=t.isObject=t.getRandomIntegerInclusive=t.calculateRetryDelay=void 0;var n=r(48183);Object.defineProperty(t,"calculateRetryDelay",{enumerable:!0,get:function(){return n.calculateRetryDelay}});var a=r(74629);Object.defineProperty(t,"getRandomIntegerInclusive",{enumerable:!0,get:function(){return a.getRandomIntegerInclusive}});var i=r(18373);Object.defineProperty(t,"isObject",{enumerable:!0,get:function(){return i.isObject}});var s=r(56354);Object.defineProperty(t,"isError",{enumerable:!0,get:function(){return s.isError}});var o=r(11725);Object.defineProperty(t,"computeSha256Hash",{enumerable:!0,get:function(){return o.computeSha256Hash}}),Object.defineProperty(t,"computeSha256Hmac",{enumerable:!0,get:function(){return o.computeSha256Hmac}});var l=r(73476);Object.defineProperty(t,"randomUUID",{enumerable:!0,get:function(){return l.randomUUID}});var c=r(25983);Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return c.isBrowser}}),Object.defineProperty(t,"isBun",{enumerable:!0,get:function(){return c.isBun}}),Object.defineProperty(t,"isNodeLike",{enumerable:!0,get:function(){return c.isNodeLike}}),Object.defineProperty(t,"isNodeRuntime",{enumerable:!0,get:function(){return c.isNodeRuntime}}),Object.defineProperty(t,"isDeno",{enumerable:!0,get:function(){return c.isDeno}}),Object.defineProperty(t,"isReactNative",{enumerable:!0,get:function(){return c.isReactNative}}),Object.defineProperty(t,"isWebWorker",{enumerable:!0,get:function(){return c.isWebWorker}});var d=r(47730);Object.defineProperty(t,"stringToUint8Array",{enumerable:!0,get:function(){return d.stringToUint8Array}}),Object.defineProperty(t,"uint8ArrayToString",{enumerable:!0,get:function(){return d.uint8ArrayToString}});var u=r(37839);Object.defineProperty(t,"Sanitizer",{enumerable:!0,get:function(){return u.Sanitizer}})},39326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(76982),a=new Uint8Array(256);let i=a.length;t.default=function(){return i>a.length-16&&((0,n.randomFillSync)(a),i=0),a.slice(i,i+=16)}},39375:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullDef=void 0,t.parseNullDef=function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}},39803:(e,t)=>{"use strict";function r(e){if(void 0===e)return null;try{return JSON.parse(e)}catch(e){}let t="";const r=[];let n=!1,a=!1;for(let i of e){if(n)'"'!==i||a?"\n"!==i||a?a="\\"===i&&!a:i="\\n":n=!1;else if('"'===i)n=!0,a=!1;else if("{"===i)r.push("}");else if("["===i)r.push("]");else if("}"===i||"]"===i){if(!r||r[r.length-1]!==i)return null;r.pop()}t+=i}n&&(t+='"');for(let e=r.length-1;e>=0;e-=1)t+=r[e];try{return JSON.parse(t)}catch(e){return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseJsonMarkdown=function(e,t=r){const n=(e=e.trim()).indexOf("```");if(-1===n)return t(e);let a=e.substring(n+3);a.startsWith("json\n")?a=a.substring(5):a.startsWith("json")?a=a.substring(4):a.startsWith("\n")&&(a=a.substring(1));const i=a.indexOf("```");let s=a;return-1!==i&&(s=a.substring(0,i)),t(s.trim())},t.parsePartialJson=r},39899:(e,t,r)=>{e.exports=r(82922)},39962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeStringify=void 0;const n=r(58385),a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function i(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}t.unsafeStringify=i,t.default=function(e,t=0){const r=i(e,t);if(!(0,n.default)(r))throw TypeError("Stringified UUID is invalid");return r}},40029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exponentialRetryPolicyName=void 0,t.exponentialRetryPolicy=function(e={}){return(0,n.exponentialRetryPolicy)(e)};const n=r(17445);t.exponentialRetryPolicyName=n.exponentialRetryPolicyName},40309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseToolkit=t.DynamicStructuredTool=t.DynamicTool=t.Tool=t.StructuredTool=t.ToolInputParsingException=t.isStructuredToolParams=t.isStructuredTool=t.isRunnableToolLike=t.isLangChainTool=void 0,t.tool=function(e,t){const r=(0,u.isSimpleStringZodSchema)(t.schema),n=(0,p.validatesOnlyStrings)(t.schema);if(!t.schema||r||n)return new g({...t,description:t.description??t.schema?.description??`${t.name} tool`,func:async(t,r,n)=>new Promise((a,i)=>{const s=(0,o.patchConfig)(n,{callbacks:r?.getChild()});c.AsyncLocalStorageProviderSingleton.runWithConfig((0,o.pickRunnableConfigKeys)(s),async()=>{try{a(e(t,s))}catch(e){i(e)}})})});const a=t.schema,i=t.description??t.schema.description??`${t.name} tool`;return new y({...t,description:i,schema:a,func:async(t,r,n)=>new Promise((a,i)=>{const s=(0,o.patchConfig)(n,{callbacks:r?.getChild()});c.AsyncLocalStorageProviderSingleton.runWithConfig((0,o.pickRunnableConfigKeys)(s),async()=>{try{a(e(t,s))}catch(e){i(e)}})})})};const n=r(19164),a=r(78168),i=r(31413),s=r(37738),o=r(5272),l=r(53752),c=r(84960),d=r(86430);Object.defineProperty(t,"ToolInputParsingException",{enumerable:!0,get:function(){return d.ToolInputParsingException}});const u=r(70866),p=r(32991);var m=r(61986);Object.defineProperty(t,"isLangChainTool",{enumerable:!0,get:function(){return m.isLangChainTool}}),Object.defineProperty(t,"isRunnableToolLike",{enumerable:!0,get:function(){return m.isRunnableToolLike}}),Object.defineProperty(t,"isStructuredTool",{enumerable:!0,get:function(){return m.isStructuredTool}}),Object.defineProperty(t,"isStructuredToolParams",{enumerable:!0,get:function(){return m.isStructuredToolParams}});class h extends s.BaseLangChain{get lc_namespace(){return["langchain","tools"]}constructor(e){super(e??{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"verboseParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"content"}),Object.defineProperty(this,"defaultConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat,this.defaultConfig=e?.defaultConfig??this.defaultConfig}async invoke(e,t){let r,n=(0,o.ensureConfig)((0,o.mergeConfigs)(this.defaultConfig,t));return(0,d._isToolCall)(e)?(r=e.args,n={...n,toolCall:e}):r=e,this.call(r,n)}async call(e,t,r){const n=(0,d._isToolCall)(e)?e.args:e;let s;if((0,u.isInteropZodSchema)(this.schema))try{s=await(0,u.interopParseAsync)(this.schema,n)}catch(t){let r="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(r=`${r}\nDetails: ${t.message}`),new d.ToolInputParsingException(r,JSON.stringify(e))}else{const t=(0,a.validate)(n,this.schema);if(!t.valid){let r="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(r=`${r}\nDetails: ${t.errors.map(e=>`${e.keywordLocation}: ${e.error}`).join("\n")}`),new d.ToolInputParsingException(r,JSON.stringify(e))}s=n}const o=(0,i.parseCallbackConfigArg)(t),c=i.CallbackManager.configure(o.callbacks,this.callbacks,o.tags||r,this.tags,o.metadata,this.metadata,{verbose:this.verbose}),p=await(c?.handleToolStart(this.toJSON(),"string"==typeof e?e:JSON.stringify(e),o.runId,void 0,void 0,void 0,o.runName));let m,h,f,g;delete o.runId;try{m=await this._call(s,p,o)}catch(e){throw await(p?.handleToolError(e)),e}if("content_and_artifact"===this.responseFormat){if(!Array.isArray(m)||2!==m.length)throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.\nResult: ${JSON.stringify(m)}`);[h,f]=m}else h=m;(0,d._isToolCall)(e)&&(g=e.id),!g&&(0,d._configHasToolCallId)(o)&&(g=o.toolCall.id);const y=function(e){const{content:t,artifact:r,toolCallId:n}=e;return n&&!(0,l.isDirectToolOutput)(t)?"string"==typeof t||Array.isArray(t)&&t.every(e=>"object"==typeof e)?new l.ToolMessage({content:t,artifact:r,tool_call_id:n,name:e.name}):new l.ToolMessage({content:v(t),artifact:r,tool_call_id:n,name:e.name}):t}({content:h,artifact:f,toolCallId:g,name:this.name});return await(p?.handleToolEnd(y)),y}}t.StructuredTool=h;class f extends h{constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:n.z.object({input:n.z.string().optional()}).transform(e=>e.input)})}call(e,t){const r="string"==typeof e||null==e?{input:e}:e;return super.call(r,t)}}t.Tool=f;class g extends f{static lc_name(){return"DynamicTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}async call(e,t){const r=(0,i.parseCallbackConfigArg)(t);return void 0===r.runName&&(r.runName=this.name),super.call(e,r)}async _call(e,t,r){return this.func(e,t,r)}}t.DynamicTool=g;class y extends h{static lc_name(){return"DynamicStructuredTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}async call(e,t,r){const n=(0,i.parseCallbackConfigArg)(t);return void 0===n.runName&&(n.runName=this.name),super.call(e,n,r)}_call(e,t,r){return this.func(e,t,r)}}function v(e){try{return JSON.stringify(e,null,2)??""}catch(t){return`${e}`}}t.DynamicStructuredTool=y,t.BaseToolkit=class{getTools(){return this.tools}}},40338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTokenCredential=t.isSASCredential=t.AzureSASCredential=t.isNamedKeyCredential=t.AzureNamedKeyCredential=t.isKeyCredential=t.AzureKeyCredential=void 0;var n=r(67547);Object.defineProperty(t,"AzureKeyCredential",{enumerable:!0,get:function(){return n.AzureKeyCredential}});var a=r(24628);Object.defineProperty(t,"isKeyCredential",{enumerable:!0,get:function(){return a.isKeyCredential}});var i=r(6656);Object.defineProperty(t,"AzureNamedKeyCredential",{enumerable:!0,get:function(){return i.AzureNamedKeyCredential}}),Object.defineProperty(t,"isNamedKeyCredential",{enumerable:!0,get:function(){return i.isNamedKeyCredential}});var s=r(62577);Object.defineProperty(t,"AzureSASCredential",{enumerable:!0,get:function(){return s.AzureSASCredential}}),Object.defineProperty(t,"isSASCredential",{enumerable:!0,get:function(){return s.isSASCredential}});var o=r(20178);Object.defineProperty(t,"isTokenCredential",{enumerable:!0,get:function(){return o.isTokenCredential}})},40356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToHttpEventStream=void 0;const n=r(71043);t.convertToHttpEventStream=function(e){const t=new TextEncoder,r=new ReadableStream({async start(r){for await(const n of e)r.enqueue(t.encode(`event: data\ndata: ${JSON.stringify(n)}\n\n`));r.enqueue(t.encode("event: end\n\n")),r.close()}});return n.IterableReadableStream.fromReadableStream(r)}},40736:(e,t,r)=>{e.exports=function(e){function t(e){let r,a,i,s=null;function o(...e){if(!o.enabled)return;const n=o,a=Number(new Date),i=a-(r||a);n.diff=i,n.prev=r,n.curr=a,r=a,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,a)=>{if("%%"===r)return"%";s++;const i=t.formatters[a];if("function"==typeof i){const t=e[s];r=i.call(n,t),e.splice(s,1),s--}return r}),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=n,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(a!==t.namespaces&&(a=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"==typeof t.init&&t.init(o),o}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function a(e,t){let r=0,n=0,a=-1,i=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(a=n,i=r,n++):(r++,n++);else{if(-1===a)return!1;n=a+1,i++,r=i}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const r of t.skips)if(a(e,r))return!1;for(const r of t.names)if(a(e,r))return!0;return!1},t.humanize=r(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},40802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePromptIdentifier=t.isVersionGreaterOrEqual=void 0;const n=r(99589);t.isVersionGreaterOrEqual=function(e,t){const r=(0,n.parse)(e),a=(0,n.parse)(t);if(!r||!a)throw new Error("Invalid version format.");return r.compare(a)>=0},t.parsePromptIdentifier=function(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);const[t,r]=e.split(":"),n=r||"latest";if(t.includes("/")){const[r,a]=t.split("/",2);if(!r||!a)throw new Error(`Invalid identifier format: ${e}`);return[r,a,n]}if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,n]}},40909:(e,t,r)=>{"use strict";const n=r(53908);e.exports=(e,t,r)=>{const a=new n(e,r),i=new n(t,r);return a.compare(i)||a.compareBuild(i)}},40999:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"字符",verb:"包含"},file:{unit:"字节",verb:"包含"},array:{unit:"项",verb:"包含"},set:{unit:"项",verb:"包含"}};function t(t){return e[t]??null}const r={regex:"输入",email:"电子邮件",url:"URL",emoji:"表情符号",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日期时间",date:"ISO日期",time:"ISO时间",duration:"ISO时长",ipv4:"IPv4地址",ipv6:"IPv6地址",cidrv4:"IPv4网段",cidrv6:"IPv6网段",base64:"base64编码字符串",base64url:"base64url编码字符串",json_string:"JSON字符串",e164:"E.164号码",jwt:"JWT",template_literal:"输入"};return e=>{switch(e.code){case"invalid_type":return`无效输入：期望 ${e.expected}，实际接收 ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"非数字(NaN)":"数字";case"object":if(Array.isArray(e))return"数组";if(null===e)return"空值(null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`无效输入：期望 ${s.stringifyPrimitive(e.values[0])}`:`无效选项：期望以下之一 ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`数值过大：期望 ${e.origin??"值"} ${r}${e.maximum.toString()} ${n.unit??"个元素"}`:`数值过大：期望 ${e.origin??"值"} ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`数值过小：期望 ${e.origin} ${r}${e.minimum.toString()} ${n.unit}`:`数值过小：期望 ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`无效字符串：必须以 "${t.prefix}" 开头`:"ends_with"===t.format?`无效字符串：必须以 "${t.suffix}" 结尾`:"includes"===t.format?`无效字符串：必须包含 "${t.includes}"`:"regex"===t.format?`无效字符串：必须满足正则表达式 ${t.pattern}`:`无效${r[t.format]??e.format}`}case"not_multiple_of":return`无效数字：必须是 ${e.divisor} 的倍数`;case"unrecognized_keys":return`出现未知的键(key): ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} 中的键(key)无效`;case"invalid_union":default:return"无效输入";case"invalid_element":return`${e.origin} 中包含无效值(value)`}}}},41168:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"simvol",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"element",verb:"olmalıdır"},set:{unit:"element",verb:"olmalıdır"}};function t(t){return e[t]??null}const r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Yanlış dəyər: gözlənilən ${e.expected}, daxil olan ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Yanlış dəyər: gözlənilən ${s.stringifyPrimitive(e.values[0])}`:`Yanlış seçim: aşağıdakılardan biri olmalıdır: ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Çox böyük: gözlənilən ${e.origin??"dəyər"} ${r}${e.maximum.toString()} ${n.unit??"element"}`:`Çox böyük: gözlənilən ${e.origin??"dəyər"} ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Çox kiçik: gözlənilən ${e.origin} ${r}${e.minimum.toString()} ${n.unit}`:`Çox kiçik: gözlənilən ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Yanlış mətn: "${t.prefix}" ilə başlamalıdır`:"ends_with"===t.format?`Yanlış mətn: "${t.suffix}" ilə bitməlidir`:"includes"===t.format?`Yanlış mətn: "${t.includes}" daxil olmalıdır`:"regex"===t.format?`Yanlış mətn: ${t.pattern} şablonuna uyğun olmalıdır`:`Yanlış ${r[t.format]??e.format}`}case"not_multiple_of":return`Yanlış ədəd: ${e.divisor} ilə bölünə bilən olmalıdır`;case"unrecognized_keys":return`Tanınmayan açar${e.keys.length>1?"lar":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} daxilində yanlış açar`;case"invalid_union":default:return"Yanlış dəyər";case"invalid_element":return`${e.origin} daxilində yanlış dəyər`}}}},41236:(e,t)=>{"use strict";t.fromCallback=function(e){return Object.defineProperty(function(...t){if("function"!=typeof t[t.length-1])return new Promise((r,n)=>{t.push((e,t)=>null!=e?n(e):r(t)),e.apply(this,t)});e.apply(this,t)},"name",{value:e.name})},t.fromPromise=function(e){return Object.defineProperty(function(...t){const r=t[t.length-1];if("function"!=typeof r)return e.apply(this,t);t.pop(),e.apply(this,t).then(e=>r(null,e),r)},"name",{value:e.name})}},41247:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zodResponseFormat=function(e,t,r){return(0,n.makeParseableResponseFormat)({type:"json_schema",json_schema:{...r,name:t,strict:!0,schema:s(e,{name:t})}},t=>e.parse(JSON.parse(t)))},t.zodTextFormat=function(e,t,r){return(0,n.makeParseableTextFormat)({type:"json_schema",...r,name:t,strict:!0,schema:s(e,{name:t})},t=>e.parse(JSON.parse(t)))},t.zodFunction=function(e){return(0,n.makeParseableTool)({type:"function",function:{name:e.name,parameters:s(e.parameters,{name:e.name}),strict:!0,...e.description?{description:e.description}:void 0}},{callback:e.function,parser:t=>e.parameters.parse(JSON.parse(t))})},t.zodResponsesFunction=function(e){return(0,i.makeParseableResponseTool)({type:"function",name:e.name,parameters:s(e.parameters,{name:e.name}),strict:!0,...e.description?{description:e.description}:void 0},{callback:e.function,parser:t=>e.parameters.parse(JSON.parse(t))})};const n=r(63357),a=r(51679),i=r(97759);function s(e,t){return(0,a.zodToJsonSchema)(e,{openaiStrictMode:!0,name:t.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}},41261:(e,t,r)=>{"use strict";const n=r(53908),a=r(78311),i=r(35580);e.exports=(e,t)=>{e=new a(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const a=e.set[t];let s=null;a.forEach(e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!i(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}),!s||r&&!i(r,s)||(r=s)}return r&&e.test(r)?r:null}},41441:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formats=t.stringify=void 0;const n=r(95257),a={formatters:n.formatters,RFC1738:n.RFC1738,RFC3986:n.RFC3986,default:n.default_format};t.formats=a;var i=r(50168);Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}})},41577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LangChainTracer=void 0;const n=r(81396),a=r(88177),i=r(32560),s=r(89008),o=r(847);class l extends o.BaseTracer{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:r,client:a}=e;this.projectName=r??(0,s.getEnvironmentVariable)("LANGCHAIN_PROJECT")??(0,s.getEnvironmentVariable)("LANGCHAIN_SESSION"),this.exampleId=t,this.client=a??new n.Client({});const i=l.getTraceableRunTree();i&&this.updateFromRunTree(i)}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await(0,s.getRuntimeEnvironment)()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async onRunCreate(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async onRunUpdate(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id};await this.client.updateRun(e.id,t)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let t=e;const r=new Set;for(;t.parent_run&&!r.has(t.id)&&(r.add(t.id),t.parent_run);)t=t.parent_run;r.clear();const n=[t];for(;n.length>0;){const e=n.shift();e&&!r.has(e.id)&&(r.add(e.id),this.runMap.set(e.id,e),e.child_runs&&n.push(...e.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const t={},r=[];for(const[e,n]of this.runMap){const i=new a.RunTree({...n,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});t[e]=i,r.push([e,n.dotted_order])}r.sort((e,t)=>e[1]&&t[1]?e[1].localeCompare(t[1]):0);for(const[e]of r){const r=this.runMap.get(e),n=t[e];if(r&&n&&r.parent_run_id){const e=t[r.parent_run_id];e&&(e.child_runs.push(n),n.parent_run=e)}}return t[e]}static getTraceableRunTree(){try{return(0,i.getCurrentRunTree)()}catch{return}}}t.LangChainTracer=l},41674:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consumeCallback=t.awaitAllCallbacks=void 0;const n=r(31764);Object.defineProperty(t,"awaitAllCallbacks",{enumerable:!0,get:function(){return n.awaitAllCallbacks}}),Object.defineProperty(t,"consumeCallback",{enumerable:!0,get:function(){return n.consumeCallback}})},41946:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Runs=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(57733)),s=r(57733),o=r(75552),l=r(262),c=r(18868),d=r(34741),u=r(54815);class p extends a.APIResource{constructor(){super(...arguments),this.steps=new i.Steps(this._client)}create(e,t,r){const{include:n,...a}=t;return this._client.post(u.path`/threads/${e}/runs`,{query:{include:n},body:a,...r,headers:(0,l.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:t.stream??!1})}retrieve(e,t,r){const{thread_id:n}=t;return this._client.get(u.path`/threads/${n}/runs/${e}`,{...r,headers:(0,l.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){const{thread_id:n,...a}=t;return this._client.post(u.path`/threads/${n}/runs/${e}`,{body:a,...r,headers:(0,l.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(u.path`/threads/${e}/runs`,o.CursorPage,{query:t,...r,headers:(0,l.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,t,r){const{thread_id:n}=t;return this._client.post(u.path`/threads/${n}/runs/${e}/cancel`,{...r,headers:(0,l.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){const n=await this.create(e,t,r);return await this.poll(n.id,{thread_id:e},r)}createAndStream(e,t,r){return c.AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const n=(0,l.buildHeaders)([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:a,response:i}=await this.retrieve(e,t,{...r,headers:{...r?.headers,...n}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(r?.pollIntervalMs)e=r.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const r=parseInt(t);isNaN(r)||(e=r)}}await(0,d.sleep)(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return c.AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r){const{thread_id:n,...a}=t;return this._client.post(u.path`/threads/${n}/runs/${e}/submit_tool_outputs`,{body:a,...r,headers:(0,l.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,r){const n=await this.submitToolOutputs(e,t,r);return await this.poll(n.id,t,r)}submitToolOutputsStream(e,t,r){return c.AssistantStream.createToolAssistantStream(e,this._client.beta.threads.runs,t,r)}}t.Runs=p,p.Steps=s.Steps},42099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Containers=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(67924)),s=r(67924),o=r(75552),l=r(262),c=r(54815);class d extends a.APIResource{constructor(){super(...arguments),this.files=new i.Files(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(c.path`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",o.CursorPage,{query:e,...t})}delete(e,t){return this._client.delete(c.path`/containers/${e}`,{...t,headers:(0,l.buildHeaders)([{Accept:"*/*"},t?.headers])})}}t.Containers=d,d.Files=s.Files},42455:(e,t,r)=>{"use strict";const n=r(41236).fromPromise;e.exports={move:n(r(13314)),moveSync:r(86244)}},42613:e=>{"use strict";e.exports=require("assert")},42638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultTracingSpan=function(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}},t.createDefaultInstrumenter=i,t.useInstrumenter=function(e){a.state.instrumenterImplementation=e},t.getInstrumenter=function(){return a.state.instrumenterImplementation||(a.state.instrumenterImplementation=i()),a.state.instrumenterImplementation};const n=r(92953),a=r(12583);function i(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}},tracingContext:(0,n.createTracingContext)({parentContext:t.tracingContext})}),withContext:(e,t,...r)=>t(...r)}}},42784:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isHeaders=n,t.normalizeHeaders=function(e){const t=r(()=>{if(n(e))return e;if(Array.isArray(e))return new Headers(e);if("object"==typeof e&&null!==e&&"values"in e&&n(e.values))return e.values;if("object"==typeof e&&null!==e){const t=Object.entries(e).filter(([,e])=>"string"==typeof e).map(([e,t])=>[e,t]);return new Headers(t)}return new Headers});return Object.fromEntries(t.entries())};const r=e=>e();function n(e){return"undefined"!=typeof Headers&&null!==e&&"object"==typeof e&&"[object Headers]"===Object.prototype.toString.call(e)}},42868:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},43246:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(78624);const n="11434",a=`http://127.0.0.1:${n}`;var i=Object.defineProperty,s=(e,t,r)=>(((e,t,r)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class o extends Error{constructor(e,t){super(e),this.error=e,this.status_code=t,this.name="ResponseError",Error.captureStackTrace&&Error.captureStackTrace(this,o)}}class l{constructor(e,t,r){s(this,"abortController"),s(this,"itr"),s(this,"doneCallback"),this.abortController=e,this.itr=t,this.doneCallback=r}abort(){this.abortController.abort()}async*[Symbol.asyncIterator](){for await(const e of this.itr){if("error"in e)throw new Error(e.error);if(yield e,e.done||"success"===e.status)return void this.doneCallback()}throw new Error("Did not receive done or success response in stream.")}}const c=async e=>{if(e.ok)return;let t=`Error ${e.status}: ${e.statusText}`,r=null;if(e.headers.get("content-type")?.includes("application/json"))try{r=await e.json(),t=r.error||t}catch(e){console.log("Failed to parse error response as JSON")}else try{console.log("Getting text from response"),t=await e.text()||t}catch(e){console.log("Failed to get text from error response")}throw new o(t,e.status)};function d(){if("undefined"!=typeof window&&window.navigator){const e=navigator;return"userAgentData"in e&&e.userAgentData?.platform?`${e.userAgentData.platform.toLowerCase()} Browser/${navigator.userAgent};`:navigator.platform?`${navigator.platform.toLowerCase()} Browser/${navigator.userAgent};`:`unknown Browser/${navigator.userAgent};`}return"undefined"!=typeof process?`${process.arch} ${process.platform} Node.js/${process.version}`:""}const u=async(e,t,r={})=>{const n={"Content-Type":"application/json",Accept:"application/json","User-Agent":`ollama-js/0.5.16 (${d()})`};r.headers=function(e){if(e instanceof Headers){const t={};return e.forEach((e,r)=>{t[r]=e}),t}return Array.isArray(e)?Object.fromEntries(e):e||{}}(r.headers);const a=Object.fromEntries(Object.entries(r.headers).filter(([e])=>!Object.keys(n).some(t=>t.toLowerCase()===e.toLowerCase())));return r.headers={...n,...a},e(t,r)},p=async(e,t,r)=>{const n=await u(e,t,{headers:r?.headers});return await c(n),n},m=async(e,t,r,n)=>{const a=null===(i=r)||"object"!=typeof i||Array.isArray(i)?r:JSON.stringify(r);var i;const s=await u(e,t,{method:"POST",body:a,signal:n?.signal,headers:n?.headers});return await c(s),s};var h=Object.defineProperty,f=(e,t,r)=>(((e,t,r)=>{t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);let g=class{constructor(e){f(this,"config"),f(this,"fetch"),f(this,"ongoingStreamedRequests",[]),this.config={host:"",headers:e?.headers},e?.proxy||(this.config.host=(e=>{if(!e)return a;let t=e.includes("://");e.startsWith(":")&&(e=`http://127.0.0.1${e}`,t=!0),t||(e=`http://${e}`);const r=new URL(e);let i=r.port;i||(i=t?"https:"===r.protocol?"443":"80":n);let s="";r.username&&(s=r.username,r.password&&(s+=`:${r.password}`),s+="@");let o=`${r.protocol}//${s}${r.hostname}:${i}${r.pathname}`;return o.endsWith("/")&&(o=o.slice(0,-1)),o})(e?.host??a)),this.fetch=e?.fetch??fetch}abort(){for(const e of this.ongoingStreamedRequests)e.abort();this.ongoingStreamedRequests.length=0}async processStreamableRequest(e,t){t.stream=t.stream??!1;const r=`${this.config.host}/api/${e}`;if(t.stream){const e=new AbortController,n=await m(this.fetch,r,t,{signal:e.signal,headers:this.config.headers});if(!n.body)throw new Error("Missing body");const a=async function*(e){const t=new TextDecoder("utf-8");let r="";const n=e.getReader();for(;;){const{done:e,value:a}=await n.read();if(e)break;r+=t.decode(a);const i=r.split("\n");r=i.pop()??"";for(const e of i)try{yield JSON.parse(e)}catch(t){console.warn("invalid json: ",e)}}for(const e of r.split("\n").filter(e=>""!==e))try{yield JSON.parse(e)}catch(t){console.warn("invalid json: ",e)}}(n.body),i=new l(e,a,()=>{const e=this.ongoingStreamedRequests.indexOf(i);e>-1&&this.ongoingStreamedRequests.splice(e,1)});return this.ongoingStreamedRequests.push(i),i}const n=await m(this.fetch,r,t,{headers:this.config.headers});return await n.json()}async encodeImage(e){if("string"!=typeof e){const t=new Uint8Array(e);let r="";const n=t.byteLength;for(let e=0;e<n;e++)r+=String.fromCharCode(t[e]);return btoa(r)}return e}async generate(e){return e.images&&(e.images=await Promise.all(e.images.map(this.encodeImage.bind(this)))),this.processStreamableRequest("generate",e)}async chat(e){if(e.messages)for(const t of e.messages)t.images&&(t.images=await Promise.all(t.images.map(this.encodeImage.bind(this))));return this.processStreamableRequest("chat",e)}async create(e){return this.processStreamableRequest("create",{...e})}async pull(e){return this.processStreamableRequest("pull",{name:e.model,stream:e.stream,insecure:e.insecure})}async push(e){return this.processStreamableRequest("push",{name:e.model,stream:e.stream,insecure:e.insecure})}async delete(e){return await(async(e,t,r,n)=>{const a=await u(e,t,{method:"DELETE",body:JSON.stringify(r),headers:n?.headers});return await c(a),a})(this.fetch,`${this.config.host}/api/delete`,{name:e.model},{headers:this.config.headers}),{status:"success"}}async copy(e){return await m(this.fetch,`${this.config.host}/api/copy`,{...e},{headers:this.config.headers}),{status:"success"}}async list(){const e=await p(this.fetch,`${this.config.host}/api/tags`,{headers:this.config.headers});return await e.json()}async show(e){const t=await m(this.fetch,`${this.config.host}/api/show`,{...e},{headers:this.config.headers});return await t.json()}async embed(e){const t=await m(this.fetch,`${this.config.host}/api/embed`,{...e},{headers:this.config.headers});return await t.json()}async embeddings(e){const t=await m(this.fetch,`${this.config.host}/api/embeddings`,{...e},{headers:this.config.headers});return await t.json()}async ps(){const e=await p(this.fetch,`${this.config.host}/api/ps`,{headers:this.config.headers});return await e.json()}};const y=new g;t.Ollama=g,t.default=y},43250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;const n=r(95766),a=r(36161),i=r(16370),s=r(32991);function o(e,t){if(void 0!==e&&!(0,n.validate)(e))return e;if(!(0,a.isRunnableInterface)(t))return t.name??"UnknownSchema";try{let e=t.getName();return e=e.startsWith("Runnable")?e.slice(8):e,e}catch(e){return t.getName()}}function l(e){return(0,a.isRunnableInterface)(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...(0,s.toJsonSchema)(e.data.schema),title:e.data.name}}}class c{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=e?.nodes??this.nodes,this.edges=e?.edges??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((t,r)=>{e[t.id]=(0,n.validate)(t.id)?r:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...l(t)})),edges:this.edges.map(t=>{const r={source:e[t.source],target:e[t.target]};return void 0!==t.data&&(r.data=t.data),void 0!==t.conditional&&(r.conditional=t.conditional),r})}}addNode(e,t,r){if(void 0!==t&&void 0!==this.nodes[t])throw new Error(`Node with id ${t} already exists`);const a=t??(0,n.v4)(),i={id:a,data:e,name:o(t,e),metadata:r};return this.nodes[a]=i,i}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,r,n){if(void 0===this.nodes[e.id])throw new Error(`Source node ${e.id} not in graph`);if(void 0===this.nodes[t.id])throw new Error(`Target node ${t.id} not in graph`);const a={source:e.id,target:t.id,data:r,conditional:n};return this.edges.push(a),a}firstNode(){return d(this)}lastNode(){return u(this)}extend(e,t=""){let r=t;Object.values(e.nodes).map(e=>e.id).every(n.validate)&&(r="");const a=e=>r?`${r}:${e}`:e;Object.entries(e.nodes).forEach(([e,t])=>{this.nodes[a(e)]={...t,id:a(e)}});const i=e.edges.map(e=>({...e,source:a(e.source),target:a(e.target)}));this.edges=[...this.edges,...i];const s=e.firstNode(),o=e.lastNode();return[s?{id:a(s.id),data:s.data}:void 0,o?{id:a(o.id),data:o.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&d(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&u(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(e=>[e.id,e.name])),t=new Map;Object.values(e).forEach(e=>{t.set(e,(t.get(e)||0)+1)});const r=r=>{const a=e[r];return(0,n.validate)(r)&&1===t.get(a)?a:r};return new c({nodes:Object.fromEntries(Object.entries(this.nodes).map(([e,t])=>[r(e),{...t,id:r(e)}])),edges:this.edges.map(e=>({...e,source:r(e.source),target:r(e.target)}))})}drawMermaid(e){const{withStyles:t,curveStyle:r,nodeColors:n={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=e??{},s=this.reid(),o=s.firstNode(),l=s.lastNode();return(0,i.drawMermaid)(s.nodes,s.edges,{firstNode:o?.id,lastNode:l?.id,withStyles:t,curveStyle:r,nodeColors:n,wrapLabelNWords:a})}async drawMermaidPng(e){const t=this.drawMermaid(e);return(0,i.drawMermaidPng)(t,{backgroundColor:e?.backgroundColor})}}function d(e,t=[]){const r=new Set(e.edges.filter(e=>!t.includes(e.source)).map(e=>e.target)),n=[];for(const a of Object.values(e.nodes))t.includes(a.id)||r.has(a.id)||n.push(a);return 1===n.length?n[0]:void 0}function u(e,t=[]){const r=new Set(e.edges.filter(e=>!t.includes(e.target)).map(e=>e.source)),n=[];for(const a of Object.values(e.nodes))t.includes(a.id)||r.has(a.id)||n.push(a);return 1===n.length?n[0]:void 0}t.Graph=c},43284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV7State=void 0;const n=r(39326),a=r(39962),i={};function s(e,t,r){return e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++),e}function o(e,t,r,n,a=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(n){if(a<0||a+16>n.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`)}else n=new Uint8Array(16),a=0;return t??=Date.now(),r??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],n[a++]=t/1099511627776&255,n[a++]=t/4294967296&255,n[a++]=t/16777216&255,n[a++]=t/65536&255,n[a++]=t/256&255,n[a++]=255&t,n[a++]=112|r>>>28&15,n[a++]=r>>>20&255,n[a++]=128|r>>>14&63,n[a++]=r>>>6&255,n[a++]=r<<2&255|3&e[10],n[a++]=e[11],n[a++]=e[12],n[a++]=e[13],n[a++]=e[14],n[a++]=e[15],n}t.updateV7State=s,t.default=function(e,t,r){let l;if(e)l=o(e.random??e.rng?.()??(0,n.default)(),e.msecs,e.seq,t,r);else{const e=Date.now(),a=(0,n.default)();s(i,e,a),l=o(a,i.msecs,i.seq,t,r)}return t??(0,a.unsafeStringify)(l)}},43368:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(r||(t.errorUtil=r={}))},43440:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePipelineDef=void 0;const n=r(95445);t.parsePipelineDef=(e,t)=>{if("input"===t.pipeStrategy)return(0,n.parseDef)(e.in._def,t);if("output"===t.pipeStrategy)return(0,n.parseDef)(e.out._def,t);const r=(0,n.parseDef)(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,(0,n.parseDef)(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter(e=>void 0!==e)}}},43539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuid4=void 0,t.uuid4=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return t.uuid4=e.randomUUID.bind(e),e.randomUUID();const r=new Uint8Array(1),n=e?()=>e.getRandomValues(r)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^n()&15>>+e/4).toString(16))}},43598:(e,t,r)=>{e.exports=r(75497)},43658:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=t.DEFAULT_BATCH_SIZE_LIMIT_BYTES=t.Queue=t.mergeRuntimeEnvIntoRunCreate=void 0;const s=i(r(96383)),o=r(7615),l=r(32481),c=r(56178),d=r(3457),u=r(63637),p=r(53865),m=r(40802),h=r(89969),f=r(8604),g=r(79690);function y(e){const t=(0,c.getRuntimeEnvironment)(),r=(0,c.getLangChainEnvVarsMetadata)(),n=e.extra??{},a=n.metadata;return e.extra={...n,runtime:{...t,...n?.runtime},metadata:{...r,...r.revision_id||e.revision_id?{revision_id:e.revision_id??r.revision_id}:{},...a}},e}function v(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}t.mergeRuntimeEnvIntoRunCreate=y;const b=async e=>{if(429===e?.status){const t=1e3*parseInt(e.headers.get("retry-after")??"30",10);if(t>0)return await new Promise(e=>setTimeout(e,t)),!0}return!1};class _{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t;const r=new Promise(e=>{t=e}),n=(0,g.stringify)(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:t,itemPromise:r,size:n}),this.sizeBytes+=n,r}pop(e){if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const t=[];let r=0;for(;r+(this.peek()?.size??0)<e&&this.items.length>0;){const e=this.items.shift();e&&(t.push(e),r+=e.size,this.sizeBytes-=e.size)}if(0===t.length&&this.items.length>0){const e=this.items.shift();t.push(e),r+=e.size,this.sizeBytes-=e.size}return[t.map(e=>({action:e.action,item:e.payload})),()=>t.forEach(e=>e.itemPromiseResolve())]}}t.Queue=_,t.DEFAULT_BATCH_SIZE_LIMIT_BYTES=20971520;class w{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new _}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=w.getDefaultClientConfig();this.tracingSampleRate=(()=>{const e=(0,c.getLangSmithEnvironmentVariable)("TRACING_SAMPLING_RATE");if(void 0===e)return;const t=parseFloat(e);if(t<0||t>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t})(),this.apiUrl=v(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=v(e.apiKey??t.apiKey),this.webUrl=v(e.webUrl??t.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??12e3,this.caller=new o.AsyncCaller(e.callerOptions??{}),this.batchIngestCaller=new o.AsyncCaller({...e.callerOptions??{},onFailedResponseHook:b}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{}}static getDefaultClientConfig(){const e=(0,c.getLangSmithEnvironmentVariable)("API_KEY");return{apiUrl:(0,c.getLangSmithEnvironmentVariable)("ENDPOINT")??"https://api.smith.langchain.com",apiKey:e,webUrl:void 0,hideInputs:"true"===(0,c.getLangSmithEnvironmentVariable)("HIDE_INPUTS"),hideOutputs:"true"===(0,c.getLangSmithEnvironmentVariable)("HIDE_OUTPUTS")}}getHostUrl(){return this.webUrl?this.webUrl:(()=>{const e=this.apiUrl.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===e||"127.0.0.1"===e||"::1"===e})()?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${d.__version__}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return!1===this.hideInputs?e:!0===this.hideInputs?{}:"function"==typeof this.hideInputs?this.hideInputs(e):e}processOutputs(e){return!1===this.hideOutputs?e:!0===this.hideOutputs?{}:"function"==typeof this.hideOutputs?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const t={...e};return void 0!==t.inputs&&(t.inputs=this.processInputs(t.inputs)),void 0!==t.outputs&&(t.outputs=this.processOutputs(t.outputs)),t}async _getResponse(e,t){const r=t?.toString()??"",n=`${this.apiUrl}${e}?${r}`,a=await this.caller.call((0,f._getFetchImplementation)(),n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(a,`Failed to fetch ${e}`),a}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams,r){let n=Number(t.get("offset"))||0;const a=Number(t.get("limit"))||100;for(;;){t.set("offset",String(n)),t.set("limit",String(a));const i=`${this.apiUrl}${e}?${t}`,s=await this.caller.call((0,f._getFetchImplementation)(),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(s,`Failed to fetch ${e}`);const o=r?r(await s.json()):await s.json();if(0===o.length)break;if(yield o,o.length<a)break;n+=o.length}}async*_getCursorPaginatedList(e,t=null,r="POST",n="runs"){const a=t?{...t}:{};for(;;){const t=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)}),i=await t.json();if(!i)break;if(!i[n])break;yield i[n];const s=i.cursors;if(!s)break;if(!s.next)break;a.cursor=s.next}}_filterForSampling(e,t=!1){if(void 0===this.tracingSampleRate)return e;if(t){const t=[];for(const r of e)this.filteredPostUuids.has(r.id)?this.filteredPostUuids.delete(r.id):t.push(r);return t}{const t=[];for(const r of e)r.id!==r.trace_id&&!this.filteredPostUuids.has(r.trace_id)||Math.random()<this.tracingSampleRate?t.push(r):this.filteredPostUuids.add(r.id);return t}}async _getBatchSizeLimitBytes(){const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??e.batch_ingest_config?.size_limit_bytes??t.DEFAULT_BATCH_SIZE_LIMIT_BYTES}async drainAutoBatchQueue(){for(;this.autoBatchQueue.items.length>=0;){const[e,t]=this.autoBatchQueue.pop(await this._getBatchSizeLimitBytes());if(!e.length)return void t();try{const t={runCreates:e.filter(e=>"create"===e.action).map(e=>e.item),runUpdates:e.filter(e=>"update"===e.action).map(e=>e.item)},r=await this._ensureServerInfo();r?.batch_ingest_config?.use_multipart_endpoint?await this.multipartIngestRuns(t):await this.batchIngestRuns(t)}finally{t()}}}async processRunOperation(e,t){const r=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,"create"===e.action&&(e.item=y(e.item));const n=this.autoBatchQueue.push(e),a=await this._getBatchSizeLimitBytes();return(t||this.autoBatchQueue.sizeBytes>a)&&await this.drainAutoBatchQueue().catch(console.error),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)},r?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),n}async _getServerInfo(){const e=await(0,f._getFetchImplementation)()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e3),...this.fetchOptions});return await(0,h.raiseForStatus)(e,"get server info"),e.json()}async _ensureServerInfo(){return void 0===this._getServerInfoPromise&&(this._getServerInfoPromise=(async()=>{if(void 0===this._serverInfo)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn("[WARNING]: LangSmith failed to fetch info on supported operations. Falling back to single calls and default limits.")}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(void 0===this._serverInfo&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async createRun(e){if(!this._filterForSampling([e]).length)return;const t={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const n=this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&void 0!==n.trace_id&&void 0!==n.dotted_order)return void this.processRunOperation({action:"create",item:n}).catch(console.error);const a=y(n),i=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/runs`,{method:"POST",headers:t,body:(0,g.stringify)(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(i,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:t}){if(void 0===e&&void 0===t)return;let r=e?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[],n=t?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[];if(r.length>0&&n.length>0){const e=r.reduce((e,t)=>t.id?(e[t.id]=t,e):e,{}),t=[];for(const r of n)void 0!==r.id&&e[r.id]?e[r.id]={...e[r.id],...r}:t.push(r);r=Object.values(e),n=t}const a={post:this._filterForSampling(r),patch:this._filterForSampling(n,!0)};if(!a.post.length&&!a.patch.length)return;if(void 0===(await this._ensureServerInfo()).version){this.autoBatchTracing=!1;for(const e of a.post)await this.createRun(e);for(const e of a.patch)void 0!==e.id&&await this.updateRun(e.id,e);return}const i={post:[],patch:[]};for(const e of["post","patch"]){const t=e,r=a[t].reverse();let n=r.pop();for(;void 0!==n;)i[t].push(n),n=r.pop()}(i.post.length>0||i.patch.length>0)&&await this._postBatchIngestRuns((0,g.stringify)(i))}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:t}){if(void 0===e&&void 0===t)return;const r={};let n=[];for(const t of e??[]){const e=this.prepareRunCreateOrUpdateInputs(t);void 0!==e.id&&void 0!==e.attachments&&(r[e.id]=e.attachments),delete e.attachments,n.push(e)}let a=[];for(const e of t??[])a.push(this.prepareRunCreateOrUpdateInputs(e));if(void 0!==n.find(e=>void 0===e.trace_id||void 0===e.dotted_order))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(void 0!==a.find(e=>void 0===e.trace_id||void 0===e.dotted_order))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(n.length>0&&a.length>0){const e=n.reduce((e,t)=>t.id?(e[t.id]=t,e):e,{}),t=[];for(const r of a)void 0!==r.id&&e[r.id]?e[r.id]={...e[r.id],...r}:t.push(r);n=Object.values(e),a=t}if(0===n.length&&0===a.length)return;const i=[],s=[];for(const[e,t]of[["post",n],["patch",a]])for(const n of t){const{inputs:t,outputs:a,events:o,...l}=n,c={inputs:t,outputs:a,events:o},d=(0,g.stringify)(l);s.push({name:`${e}.${l.id}`,payload:new Blob([d],{type:`application/json; length=${d.length}`})});for(const[t,r]of Object.entries(c)){if(void 0===r)continue;const n=(0,g.stringify)(r);s.push({name:`${e}.${l.id}.${t}`,payload:new Blob([n],{type:`application/json; length=${n.length}`})})}if(void 0!==l.id){const e=r[l.id];if(e){delete r[l.id];for(const[t,[r,n]]of Object.entries(e))s.push({name:`attachment.${l.id}.${t}`,payload:new Blob([n],{type:`${r}; length=${n.length}`})})}}i.push(`trace=${l.trace_id},id=${l.id}`)}await this._sendMultipartRequest(s,i.join("; "))}async _sendMultipartRequest(e,t){try{const t=new FormData;for(const r of e)t.append(r.name,r.payload);await this.batchIngestCaller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers},body:t,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})}catch(e){let r="Failed to multipart ingest runs";e instanceof Error?r+=`: ${e.stack||e.message}`:r+=`: ${String(e)}`,console.warn(`${r.trim()}\n\nContext: ${t}`)}}async updateRun(e,t){(0,u.assertUuid)(e),t.inputs&&(t.inputs=this.processInputs(t.inputs)),t.outputs&&(t.outputs=this.processOutputs(t.outputs));const r={...t,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&void 0!==r.trace_id&&void 0!==r.dotted_order)return void 0!==t.end_time&&void 0===r.parent_run_id&&this.blockOnRootRunFinalization?void await this.processRunOperation({action:"update",item:r},!0):void this.processRunOperation({action:"update",item:r}).catch(console.error);const n={...this.headers,"Content-Type":"application/json"},a=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:(0,g.stringify)(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(a,"update run",!0)}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){(0,u.assertUuid)(e);let r=await this._get(`/runs/${e}`);return t&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:t,projectOpts:r}){if(void 0!==t){let e;e=t.session_id?t.session_id:r?.projectName?(await this.readProject({projectName:r?.projectName})).id:r?.projectId?r?.projectId:(await this.readProject({projectName:(0,c.getLangSmithEnvironmentVariable)("PROJECT")||"default"})).id;const n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${e}/r/${t.id}?poll=true`}if(void 0!==e){const t=await this.readRun(e);if(!t.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${t.app_path}`}throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await async function(e){const t=[];for await(const r of e)t.push(r);return t}(this.listRuns({id:e.child_run_ids})),r={},n={};t.sort((e,t)=>(e?.dotted_order??"").localeCompare(t?.dotted_order??""));for(const e of t){if(null===e.parent_run_id||void 0===e.parent_run_id)throw new Error(`Child run ${e.id} has no parent`);e.parent_run_id in r||(r[e.parent_run_id]=[]),r[e.parent_run_id].push(e),n[e.id]=e}e.child_runs=r[e.id]||[];for(const t in r)t!==e.id&&(n[t].child_runs=r[t]);return e}async*listRuns(e){const{projectId:t,projectName:r,parentRunId:n,traceId:a,referenceExampleId:i,startTime:s,executionOrder:o,isRoot:l,runType:c,error:d,id:u,query:p,filter:m,traceFilter:h,treeFilter:f,limit:g,select:y}=e;let v=[];if(t&&(v=Array.isArray(t)?t:[t]),r){const e=Array.isArray(r)?r:[r],t=await Promise.all(e.map(e=>this.readProject({projectName:e}).then(e=>e.id)));v.push(...t)}const b={session:v.length?v:null,run_type:c,reference_example:i,query:p,filter:m,trace_filter:h,tree_filter:f,execution_order:o,parent_run:n,start_time:s?s.toISOString():null,error:d,id:u,limit:g,trace:a,select:y||["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],is_root:l};let _=0;for await(const e of this._getCursorPaginatedList("/runs/query",b))if(g){if(_>=g)break;if(e.length+_>g){const t=e.slice(0,g-_);yield*t;break}_+=e.length,yield*e}else yield*e}async getRunStats({id:e,trace:t,parentRun:r,runType:n,projectNames:a,projectIds:i,referenceExampleIds:s,startTime:o,endTime:l,error:c,query:d,filter:u,traceFilter:p,treeFilter:m,isRoot:h,dataSourceType:g}){let y=i||[];a&&(y=[...i||[],...await Promise.all(a.map(e=>this.readProject({projectName:e}).then(e=>e.id)))]);const v={id:e,trace:t,parent_run:r,run_type:n,session:y,reference_example:s,start_time:o,end_time:l,error:c,query:d,filter:u,trace_filter:p,tree_filter:m,is_root:h,data_source_type:g},b=Object.fromEntries(Object.entries(v).filter(([e,t])=>void 0!==t)),_=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await _.json()}async shareRun(e,{shareId:t}={}){const r={run_id:e,share_token:t||s.v4()};(0,u.assertUuid)(e);const n=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await n.json();if(null===a||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){(0,u.assertUuid)(e);const t=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(t,"unshare run",!0)}async readRunSharedLink(e){(0,u.assertUuid)(e);const t=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await t.json();if(null!==r&&"share_token"in r)return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){const r=new URLSearchParams({share_token:e});if(void 0!==t)for(const e of t)r.append("id",e);(0,u.assertUuid)(e);const n=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await n.json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),(0,u.assertUuid)(e);const r=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);const r={dataset_id:e};(0,u.assertUuid)(e);const n=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await n.json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){(0,u.assertUuid)(e);const t=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(t,"unshare dataset",!0)}async readSharedDataset(e){(0,u.assertUuid)(e);const t=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await t.json()}async listSharedExamples(e,t){const r={};t?.exampleIds&&(r.id=t.exampleIds);const n=new URLSearchParams;Object.entries(r).forEach(([e,t])=>{Array.isArray(t)?t.forEach(t=>n.append(e,t)):n.append(e,t)});const a=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/public/${e}/examples?${n.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),i=await a.json();if(!a.ok){if("detail"in i)throw new Error(`Failed to list shared examples.\nStatus: ${a.status}\nMessage: ${i.detail.join("\n")}`);throw new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`)}return i.map(e=>({...e,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:t=null,metadata:r=null,upsert:n=!1,projectExtra:a=null,referenceDatasetId:i=null}){const s=n?"?upsert=true":"",o=`${this.apiUrl}/sessions${s}`,l=a||{};r&&(l.metadata=r);const c={name:e,extra:l,description:t};null!==i&&(c.reference_dataset_id=i);const d=await this.caller.call((0,f._getFetchImplementation)(),o,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(d,"create project"),await d.json()}async updateProject(e,{name:t=null,description:r=null,metadata:n=null,projectExtra:a=null,endTime:i=null}){const s=`${this.apiUrl}/sessions/${e}`;let o=a;n&&(o={...o||{},metadata:n});const l={name:t,extra:o,description:r,end_time:i?new Date(i).toISOString():null},c=await this.caller.call((0,f._getFetchImplementation)(),s,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:t}){let r="/sessions";const n=new URLSearchParams;if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==e)(0,u.assertUuid)(e),r+=`/${e}`;else{if(void 0===t)throw new Error("Must provide projectName or projectId");n.append("name",t)}const a=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}${r}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const e=await a.json();return!!a.ok&&(!Array.isArray(e)||e.length>0)}catch(e){return!1}}async readProject({projectId:e,projectName:t,includeStats:r}){let n="/sessions";const a=new URLSearchParams;if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==e)(0,u.assertUuid)(e),n+=`/${e}`;else{if(void 0===t)throw new Error("Must provide projectName or projectId");a.append("name",t)}void 0!==r&&a.append("include_stats",r.toString());const i=await this._get(n,a);let s;if(Array.isArray(i)){if(0===i.length)throw new Error(`Project[id=${e}, name=${t}] not found`);s=i[0]}else s=i;return s}async getProjectUrl({projectId:e,projectName:t}){if(void 0===e&&void 0===t)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:t}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:t}){if(void 0===e&&void 0===t)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:t}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/datasets/${r.id}`}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:r,referenceDatasetId:n,referenceDatasetName:a,referenceFree:i,metadata:s}={}){const o=new URLSearchParams;if(void 0!==e)for(const t of e)o.append("id",t);if(void 0!==t&&o.append("name",t),void 0!==r&&o.append("name_contains",r),void 0!==n)o.append("reference_dataset",n);else if(void 0!==a){const e=await this.readDataset({datasetName:a});o.append("reference_dataset",e.id)}void 0!==i&&o.append("reference_free",i.toString()),void 0!==s&&o.append("metadata",JSON.stringify(s));for await(const e of this._getPaginated("/sessions",o))yield*e}async deleteProject({projectId:e,projectName:t}){let r;if(void 0===e&&void 0===t)throw new Error("Must provide projectName or projectId");if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");r=void 0===e?(await this.readProject({projectName:t})).id:e,(0,u.assertUuid)(r);const n=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(n,`delete session ${r} (${t})`,!0)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:n,description:a,dataType:i,name:s}){const o=`${this.apiUrl}/datasets/upload`,l=new FormData;l.append("file",e,t),r.forEach(e=>{l.append("input_keys",e)}),n.forEach(e=>{l.append("output_keys",e)}),a&&l.append("description",a),i&&l.append("data_type",i),s&&l.append("name",s);const c=await this.caller.call((0,f._getFetchImplementation)(),o,{method:"POST",headers:this.headers,body:l,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(c,"upload CSV"),await c.json()}async createDataset(e,{description:t,dataType:r,inputsSchema:n,outputsSchema:a,metadata:i}={}){const s={name:e,description:t,extra:i?{metadata:i}:void 0};r&&(s.data_type=r),n&&(s.inputs_schema_definition=n),a&&(s.outputs_schema_definition=a);const o=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(o,"create dataset"),await o.json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const n=new URLSearchParams({limit:"1"});if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)(0,u.assertUuid)(e),r+=`/${e}`;else{if(void 0===t)throw new Error("Must provide datasetName or datasetId");n.append("name",t)}const a=await this._get(r,n);let i;if(Array.isArray(a)){if(0===a.length)throw new Error(`Dataset[id=${e}, name=${t}] not found`);i=a[0]}else i=a;return i}async hasDataset({datasetId:e,datasetName:t}){try{return await this.readDataset({datasetId:e,datasetName:t}),!0}catch(e){if(e instanceof Error&&e.message.toLocaleLowerCase().includes("not found"))return!1;throw e}}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:r,toVersion:n}){let a=e;if(void 0===a&&void 0===t)throw new Error("Must provide either datasetName or datasetId");if(void 0!==a&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");void 0===a&&(a=(await this.readDataset({datasetName:t})).id);const i=new URLSearchParams({from_version:"string"==typeof r?r:r.toISOString(),to_version:"string"==typeof n?n:n.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,i)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){if(void 0!==e);else{if(void 0===t)throw new Error("Must provide datasetName or datasetId");e=(await this.readDataset({datasetName:t})).id}const r=await this._getResponse(`/datasets/${e}/openai_ft`);return(await r.text()).trim().split("\n").map(e=>JSON.parse(e))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:n,datasetNameContains:a,metadata:i}={}){const s=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(void 0!==r)for(const e of r)s.append("id",e);void 0!==n&&s.append("name",n),void 0!==a&&s.append("name_contains",a),void 0!==i&&s.append("metadata",JSON.stringify(i));for await(const e of this._getPaginated("/datasets",s))yield*e}async updateDataset(e){const{datasetId:t,datasetName:r,...n}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const a=t??(await this.readDataset({datasetName:r})).id;(0,u.assertUuid)(a);const i=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(i,"update dataset"),await i.json()}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",n=e;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t&&(n=(await this.readDataset({datasetName:t})).id),void 0===n)throw new Error("Must provide datasetName or datasetId");(0,u.assertUuid)(n),r+=`/${n}`;const a=await this.caller.call((0,f._getFetchImplementation)(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(a,`delete ${r}`),await a.json()}async indexDataset({datasetId:e,datasetName:t,tag:r}){let n=e;if(!n&&!t)throw new Error("Must provide either datasetName or datasetId");if(n&&t)throw new Error("Must provide either datasetName or datasetId, not both");n||(n=(await this.readDataset({datasetName:t})).id),(0,u.assertUuid)(n);const a={tag:r},i=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/datasets/${n}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(i,"index dataset"),await i.json()}async similarExamples(e,t,r,{filter:n}={}){const a={limit:r,inputs:e};void 0!==n&&(a.filter=n),(0,u.assertUuid)(t);const i=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(i,"fetch similar examples"),(await i.json()).examples}async createExample(e,t,{datasetId:r,datasetName:n,createdAt:a,exampleId:i,metadata:s,split:o,sourceRunId:l}){let c=r;if(void 0===c&&void 0===n)throw new Error("Must provide either datasetName or datasetId");if(void 0!==c&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");void 0===c&&(c=(await this.readDataset({datasetName:n})).id);const d=a||new Date,u={dataset_id:c,inputs:e,outputs:t,created_at:d?.toISOString(),id:i,metadata:s,split:o,source_run_id:l},p=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(p,"create example"),await p.json()}async createExamples(e){const{inputs:t,outputs:r,metadata:n,sourceRunIds:a,exampleIds:i,datasetId:s,datasetName:o}=e;let l=s;if(void 0===l&&void 0===o)throw new Error("Must provide either datasetName or datasetId");if(void 0!==l&&void 0!==o)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===l){const e=await this.readDataset({datasetName:o});l=e.id}const c=t.map((t,s)=>({dataset_id:l,inputs:t,outputs:r?r[s]:void 0,metadata:n?n[s]:void 0,split:e.splits?e.splits[s]:void 0,id:i?i[s]:void 0,source_run_id:a?a[s]:void 0})),d=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(d,"create examples"),await d.json()}async createLLMExample(e,t,r){return this.createExample({input:e},{output:t},r)}async createChatExample(e,t,r){const n=e.map(e=>(0,l.isLangChainMessage)(e)?(0,l.convertLangChainMessageToExample)(e):e),a=(0,l.isLangChainMessage)(t)?(0,l.convertLangChainMessageToExample)(t):t;return this.createExample({input:n},{output:a},r)}async readExample(e){(0,u.assertUuid)(e);const t=`/examples/${e}`;return await this._get(t)}async*listExamples({datasetId:e,datasetName:t,exampleIds:r,asOf:n,splits:a,inlineS3Urls:i,metadata:s,limit:o,offset:l,filter:c}={}){let d;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)d=e;else{if(void 0===t)throw new Error("Must provide a datasetName or datasetId");d=(await this.readDataset({datasetName:t})).id}const u=new URLSearchParams({dataset:d}),p=n?"string"==typeof n?n:n?.toISOString():void 0;p&&u.append("as_of",p);const m=i??!0;if(u.append("inline_s3_urls",m.toString()),void 0!==r)for(const e of r)u.append("id",e);if(void 0!==a)for(const e of a)u.append("splits",e);if(void 0!==s){const e=JSON.stringify(s);u.append("metadata",e)}void 0!==o&&u.append("limit",o.toString()),void 0!==l&&u.append("offset",l.toString()),void 0!==c&&u.append("filter",c);let h=0;for await(const e of this._getPaginated("/examples",u)){for(const t of e)yield t,h++;if(void 0!==o&&h>=o)break}}async deleteExample(e){(0,u.assertUuid)(e);const t=`/examples/${e}`,r=await this.caller.call((0,f._getFetchImplementation)(),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(r,`delete ${t}`),await r.json()}async updateExample(e,t){(0,u.assertUuid)(e);const r=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(r,"update example"),await r.json()}async updateExamples(e){const t=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(t,"update examples"),await t.json()}async listDatasetSplits({datasetId:e,datasetName:t,asOf:r}){let n;if(void 0===e&&void 0===t)throw new Error("Must provide dataset name or ID");if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");n=void 0===e?(await this.readDataset({datasetName:t})).id:e,(0,u.assertUuid)(n);const a=new URLSearchParams,i=r?"string"==typeof r?r:r?.toISOString():void 0;return i&&a.append("as_of",i),await this._get(`/datasets/${n}/splits`,a)}async updateDatasetSplits({datasetId:e,datasetName:t,splitName:r,exampleIds:n,remove:a=!1}){let i;if(void 0===e&&void 0===t)throw new Error("Must provide dataset name or ID");if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");i=void 0===e?(await this.readDataset({datasetName:t})).id:e,(0,u.assertUuid)(i);const s={split_name:r,examples:n.map(e=>((0,u.assertUuid)(e),e)),remove:a},o=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/datasets/${i}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(o,"update dataset splits",!0)}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:n,referenceExample:a}={loadChildRuns:!1}){let i;if((0,p.warnOnce)("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead."),"string"==typeof e)i=await this.readRun(e,{loadChildRuns:n});else{if("object"!=typeof e||!("id"in e))throw new Error("Invalid run type: "+typeof e);i=e}null!==i.reference_example_id&&void 0!==i.reference_example_id&&(a=await this.readExample(i.reference_example_id));const s=await t.evaluateRun(i,a),[o,l]=await this._logEvaluationFeedback(s,i,r);return l[0]}async createFeedback(e,t,{score:r,value:n,correction:a,comment:i,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:c,feedbackId:d,feedbackConfig:p,projectId:m,comparativeExperimentId:g}){if(!e&&!m)throw new Error("One of runId or projectId must be provided");if(e&&m)throw new Error("Only one of runId or projectId can be provided");const y={type:l??"api",metadata:o??{}};void 0===c||void 0===y?.metadata||y.metadata.__run||(y.metadata.__run={run_id:c}),void 0!==y?.metadata&&void 0!==y.metadata.__run?.run_id&&(0,u.assertUuid)(y.metadata.__run.run_id);const v={id:d??s.v4(),run_id:e,key:t,score:r,value:n,correction:a,comment:i,feedback_source:y,comparative_experiment_id:g,feedbackConfig:p,session_id:m},b=`${this.apiUrl}/feedback`,_=await this.caller.call((0,f._getFetchImplementation)(),b,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(v),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(_,"create feedback",!0),v}async updateFeedback(e,{score:t,value:r,correction:n,comment:a}){const i={};null!=t&&(i.score=t),null!=r&&(i.value=r),null!=n&&(i.correction=n),null!=a&&(i.comment=a),(0,u.assertUuid)(e);const s=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(s,"update feedback",!0)}async readFeedback(e){(0,u.assertUuid)(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){(0,u.assertUuid)(e);const t=`/feedback/${e}`,r=await this.caller.call((0,f._getFetchImplementation)(),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(r,`delete ${t}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:r}={}){const n=new URLSearchParams;if(e&&n.append("run",e.join(",")),t)for(const e of t)n.append("key",e);if(r)for(const e of r)n.append("source",e);for await(const e of this._getPaginated("/feedback",n))yield*e}async createPresignedFeedbackToken(e,t,{expiration:r,feedbackConfig:n}={}){const a={run_id:e,feedback_key:t,feedback_config:n};r?"string"==typeof r?a.expires_at=r:(r?.hours||r?.minutes||r?.days)&&(a.expires_in=r):a.expires_in={hours:3};const i=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await i.json()}async createComparativeExperiment({name:e,experimentIds:t,referenceDatasetId:r,createdAt:n,description:a,metadata:i,id:s}){if(0===t.length)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:t[0]})).reference_dataset_id),null==!r)throw new Error("A reference dataset is required");const o={id:s,name:e,experiment_ids:t,reference_dataset_id:r,description:a,created_at:(n??new Date)?.toISOString(),extra:{}};i&&(o.extra.metadata=i);const l=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await l.json()}async*listPresignedFeedbackTokens(e){(0,u.assertUuid)(e);const t=new URLSearchParams({run_id:e});for await(const e of this._getPaginated("/feedback/tokens",t))yield*e}_selectEvalResults(e){let t;return t="results"in e?e.results:[e],t}async _logEvaluationFeedback(e,t,r){const n=this._selectEvalResults(e),a=[];for(const e of n){let n=r||{};e.evaluatorInfo&&(n={...e.evaluatorInfo,...n});let i=null;e.targetRunId?i=e.targetRunId:t&&(i=t.id),a.push(await this.createFeedback(i,e.key,{score:e.score,value:e.value,comment:e.comment,correction:e.correction,sourceInfo:n,sourceRunId:e.sourceRunId,feedbackConfig:e.feedbackConfig,feedbackSourceType:"model"}))}return[n,a]}async logEvaluationFeedback(e,t,r){const[n]=await this._logEvaluationFeedback(e,t,r);return n}async*listAnnotationQueues(e={}){const{queueIds:t,name:r,nameContains:n,limit:a}=e,i=new URLSearchParams;t&&t.forEach((e,t)=>{(0,u.assertUuid)(e,`queueIds[${t}]`),i.append("ids",e)}),r&&i.append("name",r),n&&i.append("name_contains",n),i.append("limit",(void 0!==a?Math.min(a,100):100).toString());let s=0;for await(const e of this._getPaginated("/annotation-queues",i))if(yield*e,s++,void 0!==a&&s>=a)break}async createAnnotationQueue(e){const{name:t,description:r,queueId:n}=e,a={name:t,description:r,id:n||s.v4()},i=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(a).filter(([e,t])=>void 0!==t))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(i,"create annotation queue"),await i.json()}async readAnnotationQueue(e){const t=await this.listAnnotationQueues({queueIds:[e]}).next();if(t.done)throw new Error(`Annotation queue with ID ${e} not found`);return t.value}async updateAnnotationQueue(e,t){const{name:r,description:n}=t,a=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/annotation-queues/${(0,u.assertUuid)(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:n}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(a,"update annotation queue")}async deleteAnnotationQueue(e){const t=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/annotation-queues/${(0,u.assertUuid)(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){const r=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/annotation-queues/${(0,u.assertUuid)(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map((e,t)=>(0,u.assertUuid)(e,`runIds[${t}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){const r=`/annotation-queues/${(0,u.assertUuid)(e,"queueId")}/run`,n=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}${r}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(n,"get run from annotation queue"),await n.json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return"-"==e||t.tenant_handle===e}async _ownerConflictError(e,t){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.\n\n      Current tenant: ${r.tenant_handle}\n\n      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const t=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await t.json();if(!t.ok){const e="string"==typeof r.detail?r.detail:JSON.stringify(r.detail),n=new Error(`Error ${t.status}: ${t.statusText}\n${e}`);throw n.statusCode=t.status,n}if(0!==r.commits.length)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[r,n,a]=(0,m.parsePromptIdentifier)(e),i=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/likes/${r}/${n}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(i,(t?"like":"unlike")+" prompt"),await i.json()}async _getPromptUrl(e){const[t,r,n]=(0,m.parsePromptIdentifier)(e);if(await this._currentTenantIsOwner(t)){const e=await this._getSettings();return"latest"!==n?`${this.getHostUrl()}/prompts/${r}/${n.substring(0,8)}?organizationId=${e.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${e.id}`}return"latest"!==n?`${this.getHostUrl()}/hub/${t}/${r}/${n.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,e=>e.commits))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",e?.sortField??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!e?.isArchived).toString()),void 0!==e?.isPublic&&t.append("is_public",e.isPublic.toString()),e?.query&&t.append("query",e.query);for await(const e of this._getPaginated("/repos",t,e=>e.repos))yield*e}async getPrompt(e){const[t,r,n]=(0,m.parsePromptIdentifier)(e),a=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/repos/${t}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(404===a.status)return null;await(0,h.raiseForStatus)(a,"get prompt");const i=await a.json();return i.repo?i.repo:null}async createPrompt(e,t){const r=await this._getSettings();if(t?.isPublic&&!r.tenant_handle)throw new Error("Cannot create a public prompt without first\n\n        creating a LangChain Hub handle. \n        You can add a handle by creating a public prompt at:\n\n        https://smith.langchain.com/prompts");const[n,a,i]=(0,m.parsePromptIdentifier)(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("create a prompt",n);const s={repo_handle:a,...t?.description&&{description:t.description},...t?.readme&&{readme:t.readme},...t?.tags&&{tags:t.tags},is_public:!!t?.isPublic},o=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(o,"create prompt");const{repo:l}=await o.json();return l}async createCommit(e,t,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,a,i]=(0,m.parsePromptIdentifier)(e),s="latest"!==r?.parentCommitHash&&r?.parentCommitHash?r?.parentCommitHash:await this._getLatestCommitHash(`${n}/${a}`),o={manifest:JSON.parse(JSON.stringify(t)),parent_commit:s},l=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/commits/${n}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(l,"create commit");const c=await l.json();return this._getPromptUrl(`${n}/${a}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,n]=(0,m.parsePromptIdentifier)(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const a={};if(void 0!==t?.description&&(a.description=t.description),void 0!==t?.readme&&(a.readme=t.readme),void 0!==t?.tags&&(a.tags=t.tags),void 0!==t?.isPublic&&(a.is_public=t.isPublic),void 0!==t?.isArchived&&(a.is_archived=t.isArchived),0===Object.keys(a).length)throw new Error("No valid update options provided");const i=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/repos/${r}/${n}`,{method:"PATCH",body:JSON.stringify(a),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,h.raiseForStatus)(i,"update prompt"),i.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[t,r,n]=(0,m.parsePromptIdentifier)(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);const a=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/repos/${t}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await a.json()}async pullPromptCommit(e,t){const[r,n,a]=(0,m.parsePromptIdentifier)(e),i=await this._getServerInfo();let s=a;if(!(0,m.isVersionGreaterOrEqual)(i.version,"0.5.23")&&"latest"===a){const e=await this._getLatestCommitHash(`${r}/${n}`);if(!e)throw new Error("No commits found");s=e}const o=await this.caller.call((0,f._getFetchImplementation)(),`${this.apiUrl}/commits/${r}/${n}/${s}${t?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,h.raiseForStatus)(o,"pull prompt commit");const l=await o.json();return{owner:r,repo:n,commit_hash:l.commit_hash,manifest:l.manifest,examples:l.examples}}async _pullPrompt(e,t){const r=await this.pullPromptCommit(e,{includeModel:t?.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,t){return await this.promptExists(e)?t&&Object.keys(t).some(e=>"object"!==e)&&await this.updatePrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}):await this.createPrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}),t?.object?await this.createCommit(e,t?.object,{parentCommitHash:t?.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,t={}){const{sourceApiUrl:r=this.apiUrl,datasetName:n}=t,[a,i]=this.parseTokenOrUrl(e,r),s=new w({apiUrl:a,apiKey:"placeholder"}),o=await s.readSharedDataset(i),l=n||o.name;try{if(await this.hasDataset({datasetId:l}))return void console.log(`Dataset ${l} already exists in your tenant. Skipping.`)}catch(e){}const c=await s.listSharedExamples(i),d=await this.createDataset(l,{description:o.description,dataType:o.data_type||"kv",inputsSchema:o.inputs_schema_definition??void 0,outputsSchema:o.outputs_schema_definition??void 0});try{await this.createExamples({inputs:c.map(e=>e.inputs),outputs:c.flatMap(e=>e.outputs?[e.outputs]:[]),datasetId:d.id})}catch(e){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),e}}parseTokenOrUrl(e,t,r=2,n="dataset"){try{return(0,u.assertUuid)(e),[t,e]}catch(e){}try{const a=new URL(e).pathname.split("/").filter(e=>""!==e);if(a.length>=r)return[t,a[a.length-r]];throw new Error(`Invalid public ${n} URL: ${e}`)}catch(t){throw new Error(`Invalid public ${n} URL or token: ${e}`)}}awaitPendingTraceBatches(){return Promise.all(this.autoBatchQueue.items.map(({itemPromise:e})=>e))}}t.Client=w},43690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MalformedJSON=t.PartialJSON=t.partialParse=void 0;class r extends Error{}t.PartialJSON=r;class n extends Error{}t.MalformedJSON=n;t.partialParse=e=>function(e,t=511){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return((e,t)=>{const a=e.length;let i=0;const s=e=>{throw new r(`${e} at position ${i}`)},o=e=>{throw new n(`${e} at position ${i}`)},l=()=>(m(),i>=a&&s("Unexpected end of input"),'"'===e[i]?c():"{"===e[i]?d():"["===e[i]?u():"null"===e.substring(i,i+4)||16&t&&a-i<4&&"null".startsWith(e.substring(i))?(i+=4,null):"true"===e.substring(i,i+4)||32&t&&a-i<4&&"true".startsWith(e.substring(i))?(i+=4,!0):"false"===e.substring(i,i+5)||32&t&&a-i<5&&"false".startsWith(e.substring(i))?(i+=5,!1):"Infinity"===e.substring(i,i+8)||128&t&&a-i<8&&"Infinity".startsWith(e.substring(i))?(i+=8,1/0):"-Infinity"===e.substring(i,i+9)||256&t&&1<a-i&&a-i<9&&"-Infinity".startsWith(e.substring(i))?(i+=9,-1/0):"NaN"===e.substring(i,i+3)||64&t&&a-i<3&&"NaN".startsWith(e.substring(i))?(i+=3,NaN):p()),c=()=>{const r=i;let n=!1;for(i++;i<a&&('"'!==e[i]||n&&"\\"===e[i-1]);)n="\\"===e[i]&&!n,i++;if('"'==e.charAt(i))try{return JSON.parse(e.substring(r,++i-Number(n)))}catch(e){o(String(e))}else if(1&t)try{return JSON.parse(e.substring(r,i-Number(n))+'"')}catch(t){return JSON.parse(e.substring(r,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},d=()=>{i++,m();const r={};try{for(;"}"!==e[i];){if(m(),i>=a&&8&t)return r;const n=c();m(),i++;try{const e=l();Object.defineProperty(r,n,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(8&t)return r;throw e}m(),","===e[i]&&i++}}catch(e){if(8&t)return r;s("Expected '}' at end of object")}return i++,r},u=()=>{i++;const r=[];try{for(;"]"!==e[i];)r.push(l()),m(),","===e[i]&&i++}catch(e){if(4&t)return r;s("Expected ']' at end of array")}return i++,r},p=()=>{if(0===i){"-"===e&&2&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(r){if(2&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}o(String(r))}}const r=i;for("-"===e[i]&&i++;e[i]&&!",]}".includes(e[i]);)i++;i!=a||2&t||s("Unterminated number literal");try{return JSON.parse(e.substring(r,i))}catch(n){"-"===e.substring(r,i)&&2&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(r,e.lastIndexOf("e")))}catch(e){o(String(e))}}},m=()=>{for(;i<a&&" \n\r\t".includes(e[i]);)i++};return l()})(e.trim(),t)}(e,509)},43764:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialBaseURI=t.ignoredKeyword=t.schemaMapKeyword=t.schemaArrayKeyword=t.schemaKeyword=void 0,t.dereference=function e(r,a=Object.create(null),i=t.initialBaseURI,s=""){if(r&&"object"==typeof r&&!Array.isArray(r)){const t=r.$id||r.id;if(t){const n=new URL(t,i.href);n.hash.length>1?a[n.href]=r:(n.hash="",""===s?i=n:e(r,a,i))}}else if(!0!==r&&!1!==r)return a;const o=i.href+(s?"#"+s:"");if(void 0!==a[o])throw new Error(`Duplicate schema URI "${o}".`);if(a[o]=r,!0===r||!1===r)return a;if(void 0===r.__absolute_uri__&&Object.defineProperty(r,"__absolute_uri__",{enumerable:!1,value:o}),r.$ref&&void 0===r.__absolute_ref__){const e=new URL(r.$ref,i.href);e.hash=e.hash,Object.defineProperty(r,"__absolute_ref__",{enumerable:!1,value:e.href})}if(r.$recursiveRef&&void 0===r.__absolute_recursive_ref__){const e=new URL(r.$recursiveRef,i.href);e.hash=e.hash,Object.defineProperty(r,"__absolute_recursive_ref__",{enumerable:!1,value:e.href})}r.$anchor&&(a[new URL("#"+r.$anchor,i.href).href]=r);for(let o in r){if(t.ignoredKeyword[o])continue;const l=`${s}/${(0,n.encodePointer)(o)}`,c=r[o];if(Array.isArray(c)){if(t.schemaArrayKeyword[o]){const t=c.length;for(let r=0;r<t;r++)e(c[r],a,i,`${l}/${r}`)}}else if(t.schemaMapKeyword[o])for(let t in c)e(c[t],a,i,`${l}/${(0,n.encodePointer)(t)}`);else e(c,a,i,l)}return a};const n=r(94845);t.schemaKeyword={additionalItems:!0,unevaluatedItems:!0,items:!0,contains:!0,additionalProperties:!0,unevaluatedProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.schemaArrayKeyword={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.schemaMapKeyword={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},t.ignoredKeyword={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},t.initialBaseURI="undefined"!=typeof self&&self.location&&"null"!==self.location.origin?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker")},43766:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Files=void 0;const n=r(82040),a=r(75552),i=r(262),s=r(34701),o=r(54815);class l extends n.APIResource{create(e,t,r){return this._client.post(o.path`/vector_stores/${e}/files`,{body:t,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){const{vector_store_id:n}=t;return this._client.get(o.path`/vector_stores/${n}/files/${e}`,{...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){const{vector_store_id:n,...a}=t;return this._client.post(o.path`/vector_stores/${n}/files/${e}`,{body:a,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(o.path`/vector_stores/${e}/files`,a.CursorPage,{query:t,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t,r){const{vector_store_id:n}=t;return this._client.delete(o.path`/vector_stores/${n}/files/${e}`,{...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){const n=await this.create(e,t,r);return await this.poll(e,n.id,r)}async poll(e,t,r){const n=(0,i.buildHeaders)([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const a=await this.retrieve(t,{vector_store_id:e},{...r,headers:n}).withResponse(),i=a.data;switch(i.status){case"in_progress":let e=5e3;if(r?.pollIntervalMs)e=r.pollIntervalMs;else{const t=a.response.headers.get("openai-poll-after-ms");if(t){const r=parseInt(t);isNaN(r)||(e=r)}}await(0,s.sleep)(e);break;case"failed":case"completed":return i}}}async upload(e,t,r){const n=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:n.id},r)}async uploadAndPoll(e,t,r){const n=await this.upload(e,t,r);return await this.poll(e,n.id,r)}content(e,t,r){const{vector_store_id:n}=t;return this._client.getAPIList(o.path`/vector_stores/${n}/files/${e}/content`,a.Page,{...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}t.Files=l},43927:(e,t,r)=>{"use strict";const n=r(40909);e.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},43936:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formDataPolicyName=void 0,t.formDataPolicy=function(){return{name:t.formDataPolicyName,async sendRequest(e,t){if(a.isNodeLike&&"undefined"!=typeof FormData&&e.body instanceof FormData&&(e.formData=function(e){var t;const r={};for(const[n,a]of e.entries())null!==(t=r[n])&&void 0!==t||(r[n]=[]),r[n].push(a);return r}(e.body),e.body=void 0),e.formData){const t=e.headers.get("Content-Type");t&&-1!==t.indexOf("application/x-www-form-urlencoded")?e.body=function(e){const t=new URLSearchParams;for(const[r,n]of Object.entries(e))if(Array.isArray(n))for(const e of n)t.append(r,e.toString());else t.append(r,n.toString());return t.toString()}(e.formData):await async function(e,t){const r=t.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;t.headers.set("Content-Type",null!=r?r:"multipart/form-data");const a=[];for(const[t,r]of Object.entries(e))for(const e of Array.isArray(r)?r:[r])if("string"==typeof e)a.push({headers:(0,i.createHttpHeaders)({"Content-Disposition":`form-data; name="${t}"`}),body:(0,n.stringToUint8Array)(e,"utf-8")});else{if(null==e||"object"!=typeof e)throw new Error(`Unexpected value for key ${t}: ${e}. Value should be serialized to string first.`);{const r=e.name||"blob",n=(0,i.createHttpHeaders)();n.set("Content-Disposition",`form-data; name="${t}"; filename="${r}"`),n.set("Content-Type",e.type||"application/octet-stream"),a.push({headers:n,body:e})}}t.multipartBody={parts:a}}(e.formData,e),e.formData=void 0}return t(e)}}};const n=r(47730),a=r(25983),i=r(18873);t.formDataPolicyName="formDataPolicy"},43952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.proxyPolicyName=void 0,t.getDefaultProxySettings=function(e){return(0,n.getDefaultProxySettings)(e)},t.proxyPolicy=function(e,t){return(0,n.proxyPolicy)(e,t)};const n=r(17445);t.proxyPolicyName=n.proxyPolicyName},44100:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.unescapePathComponent=t.escapePathComponent=t.deepClone=t.JsonPatchError=void 0,i(r(4184),t),i(r(70187),t);var o=r(62652);Object.defineProperty(t,"JsonPatchError",{enumerable:!0,get:function(){return o.PatchError}}),Object.defineProperty(t,"deepClone",{enumerable:!0,get:function(){return o._deepClone}}),Object.defineProperty(t,"escapePathComponent",{enumerable:!0,get:function(){return o.escapePathComponent}}),Object.defineProperty(t,"unescapePathComponent",{enumerable:!0,get:function(){return o.unescapePathComponent}});const l=s(r(4184)),c=r(62652);t.default={...l,JsonPatchError:c.PatchError,deepClone:c._deepClone,escapePathComponent:c.escapePathComponent,unescapePathComponent:c.unescapePathComponent}},44172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidWebhookSignatureError=t.ContentFilterFinishReasonError=t.LengthFinishReasonError=t.InternalServerError=t.RateLimitError=t.UnprocessableEntityError=t.ConflictError=t.NotFoundError=t.PermissionDeniedError=t.AuthenticationError=t.BadRequestError=t.APIConnectionTimeoutError=t.APIConnectionError=t.APIUserAbortError=t.APIError=t.OpenAIError=void 0;const n=r(30917);class a extends Error{}t.OpenAIError=a;class i extends a{constructor(e,t,r,n){super(`${i.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.requestID=n?.get("x-request-id"),this.error=t;const a=t;this.code=a?.code,this.param=a?.param,this.type=a?.type}static makeMessage(e,t,r){const n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,a){if(!e||!a)return new s({message:r,cause:(0,n.castToError)(t)});const f=t?.error;return 400===e?new o(e,f,r,a):401===e?new l(e,f,r,a):403===e?new c(e,f,r,a):404===e?new d(e,f,r,a):409===e?new u(e,f,r,a):422===e?new p(e,f,r,a):429===e?new m(e,f,r,a):e>=500?new h(e,f,r,a):new i(e,f,r,a)}}t.APIError=i,t.APIUserAbortError=class extends i{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}};class s extends i{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}t.APIConnectionError=s,t.APIConnectionTimeoutError=class extends s{constructor({message:e}={}){super({message:e??"Request timed out."})}};class o extends i{}t.BadRequestError=o;class l extends i{}t.AuthenticationError=l;class c extends i{}t.PermissionDeniedError=c;class d extends i{}t.NotFoundError=d;class u extends i{}t.ConflictError=u;class p extends i{}t.UnprocessableEntityError=p;class m extends i{}t.RateLimitError=m;class h extends i{}t.InternalServerError=h,t.LengthFinishReasonError=class extends a{constructor(){super("Could not parse response content as the length limit was reached")}},t.ContentFilterFinishReasonError=class extends a{constructor(){super("Could not parse response content as the request was rejected by the content filter")}};class f extends Error{constructor(e){super(e)}}t.InvalidWebhookSignatureError=f},44187:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultPipeline=function(e={}){const t=(0,a.createPipelineFromOptions)(e);t.addPolicy((0,i.apiVersionPolicy)(e));const{credential:r,authSchemes:n,allowInsecureConnection:u}=e;return r&&((0,s.isApiKeyCredential)(r)?t.addPolicy((0,o.apiKeyAuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:u})):(0,s.isBasicCredential)(r)?t.addPolicy((0,l.basicAuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:u})):(0,s.isBearerTokenCredential)(r)?t.addPolicy((0,c.bearerAuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:u})):(0,s.isOAuth2TokenCredential)(r)&&t.addPolicy((0,d.oauth2AuthenticationPolicy)({authSchemes:n,credential:r,allowInsecureConnection:u}))),t},t.getCachedDefaultHttpsClient=function(){return u||(u=(0,n.createDefaultHttpClient)()),u};const n=r(78293),a=r(9275),i=r(5669),s=r(87476),o=r(76524),l=r(28261),c=r(63786),d=r(1424);let u},44219:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLiteralDef=function(e,t){const r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}},44319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFloat32Array=t.fromBase64=t.toBase64=void 0;const n=r(44172),a=r(773);t.toBase64=e=>{if(!e)return"";if(void 0!==globalThis.Buffer)return globalThis.Buffer.from(e).toString("base64");if("string"==typeof e&&(e=(0,a.encodeUTF8)(e)),"undefined"!=typeof btoa)return btoa(String.fromCharCode.apply(null,e));throw new n.OpenAIError("Cannot generate base64 string; Expected `Buffer` or `btoa` to be defined")},t.fromBase64=e=>{if(void 0!==globalThis.Buffer){const t=globalThis.Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}if("undefined"!=typeof atob){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}throw new n.OpenAIError("Cannot decode base64 string; Expected `Buffer` or `atob` to be defined")},t.toFloat32Array=e=>{if("undefined"!=typeof Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.charCodeAt(e);return Array.from(new Float32Array(n.buffer))}}},44370:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"merkkiä",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"päivämäärän"}};function t(t){return e[t]??null}const r={regex:"säännöllinen lauseke",email:"sähköpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-päivämäärä",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return e=>{switch(e.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${e.expected}, oli ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Virheellinen syöte: täytyy olla ${s.stringifyPrimitive(e.values[0])}`:`Virheellinen valinta: täytyy olla yksi seuraavista: ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Liian suuri: ${n.subject} täytyy olla ${r}${e.maximum.toString()} ${n.unit}`.trim():`Liian suuri: arvon täytyy olla ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Liian pieni: ${n.subject} täytyy olla ${r}${e.minimum.toString()} ${n.unit}`.trim():`Liian pieni: arvon täytyy olla ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Virheellinen syöte: täytyy alkaa "${t.prefix}"`:"ends_with"===t.format?`Virheellinen syöte: täytyy loppua "${t.suffix}"`:"includes"===t.format?`Virheellinen syöte: täytyy sisältää "${t.includes}"`:"regex"===t.format?`Virheellinen syöte: täytyy vastata säännöllistä lauseketta ${t.pattern}`:`Virheellinen ${r[t.format]??e.format}`}case"not_multiple_of":return`Virheellinen luku: täytyy olla luvun ${e.divisor} monikerta`;case"unrecognized_keys":return`${e.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen syöte"}}}},44457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultHttpClient=function(){const e=(0,n.createDefaultHttpClient)();return{async sendRequest(t){const{abortSignal:r,cleanup:n}=t.abortSignal?(0,a.wrapAbortSignalLike)(t.abortSignal):{};try{return t.abortSignal=r,await e.sendRequest(t)}finally{null==n||n()}}}};const n=r(26455),a=r(57994)},44617:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},44648:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCompletionRunner=void 0;const n=r(71118),a=r(46289);class i extends n.AbstractChatCompletionRunner{static runTools(e,t,r){const n=new i,a={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,a)),n}_addMessage(e,t=!0){super._addMessage(e,t),(0,a.isAssistantMessage)(e)&&e.content&&this._emit("content",e.content)}}t.ChatCompletionRunner=i},44708:e=>{"use strict";e.exports=require("node:https")},45039:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"znaků",verb:"mít"},file:{unit:"bajtů",verb:"mít"},array:{unit:"prvků",verb:"mít"},set:{unit:"prvků",verb:"mít"}};function t(t){return e[t]??null}const r={regex:"regulární výraz",email:"e-mailová adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a čas ve formátu ISO",date:"datum ve formátu ISO",time:"čas ve formátu ISO",duration:"doba trvání ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"řetězec zakódovaný ve formátu base64",base64url:"řetězec zakódovaný ve formátu base64url",json_string:"řetězec ve formátu JSON",e164:"číslo E.164",jwt:"JWT",template_literal:"vstup"};return e=>{switch(e.code){case"invalid_type":return`Neplatný vstup: očekáváno ${e.expected}, obdrženo ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"číslo";case"string":return"řetězec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":if(Array.isArray(e))return"pole";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Neplatný vstup: očekáváno ${s.stringifyPrimitive(e.values[0])}`:`Neplatná možnost: očekávána jedna z hodnot ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Hodnota je příliš velká: ${e.origin??"hodnota"} musí mít ${r}${e.maximum.toString()} ${n.unit??"prvků"}`:`Hodnota je příliš velká: ${e.origin??"hodnota"} musí být ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Hodnota je příliš malá: ${e.origin??"hodnota"} musí mít ${r}${e.minimum.toString()} ${n.unit??"prvků"}`:`Hodnota je příliš malá: ${e.origin??"hodnota"} musí být ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Neplatný řetězec: musí začínat na "${t.prefix}"`:"ends_with"===t.format?`Neplatný řetězec: musí končit na "${t.suffix}"`:"includes"===t.format?`Neplatný řetězec: musí obsahovat "${t.includes}"`:"regex"===t.format?`Neplatný řetězec: musí odpovídat vzoru ${t.pattern}`:`Neplatný formát ${r[t.format]??e.format}`}case"not_multiple_of":return`Neplatné číslo: musí být násobkem ${e.divisor}`;case"unrecognized_keys":return`Neznámé klíče: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Neplatný klíč v ${e.origin}`;case"invalid_union":default:return"Neplatný vstup";case"invalid_element":return`Neplatná hodnota v ${e.origin}`}}}},45058:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function t(t){return e[t]??null}const r={regex:"entrée",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return e=>{switch(e.code){case"invalid_type":return`Entrée invalide : attendu ${e.expected}, reçu ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Entrée invalide : attendu ${s.stringifyPrimitive(e.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"≤":"<",n=t(e.origin);return n?`Trop grand : attendu que ${e.origin??"la valeur"} ait ${r}${e.maximum.toString()} ${n.unit}`:`Trop grand : attendu que ${e.origin??"la valeur"} soit ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?"≥":">",n=t(e.origin);return n?`Trop petit : attendu que ${e.origin} ait ${r}${e.minimum.toString()} ${n.unit}`:`Trop petit : attendu que ${e.origin} soit ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Chaîne invalide : doit commencer par "${t.prefix}"`:"ends_with"===t.format?`Chaîne invalide : doit se terminer par "${t.suffix}"`:"includes"===t.format?`Chaîne invalide : doit inclure "${t.includes}"`:"regex"===t.format?`Chaîne invalide : doit correspondre au motif ${t.pattern}`:`${r[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${e.divisor}`;case"unrecognized_keys":return`Clé${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${e.origin}`;case"invalid_union":default:return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`}}}},45167:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.zhTW=t.zhCN=t.vi=t.ur=t.ua=t.tr=t.th=t.ta=t.sv=t.sl=t.ru=t.pt=t.pl=t.ps=t.ota=t.no=t.nl=t.ms=t.mk=t.ko=t.kh=t.ja=t.it=t.id=t.hu=t.he=t.frCA=t.fr=t.fi=t.fa=t.es=t.eo=t.en=t.de=t.cs=t.ca=t.be=t.az=t.ar=void 0;var a=r(95832);Object.defineProperty(t,"ar",{enumerable:!0,get:function(){return n(a).default}});var i=r(41168);Object.defineProperty(t,"az",{enumerable:!0,get:function(){return n(i).default}});var s=r(47714);Object.defineProperty(t,"be",{enumerable:!0,get:function(){return n(s).default}});var o=r(12949);Object.defineProperty(t,"ca",{enumerable:!0,get:function(){return n(o).default}});var l=r(45039);Object.defineProperty(t,"cs",{enumerable:!0,get:function(){return n(l).default}});var c=r(45292);Object.defineProperty(t,"de",{enumerable:!0,get:function(){return n(c).default}});var d=r(28208);Object.defineProperty(t,"en",{enumerable:!0,get:function(){return n(d).default}});var u=r(8761);Object.defineProperty(t,"eo",{enumerable:!0,get:function(){return n(u).default}});var p=r(3517);Object.defineProperty(t,"es",{enumerable:!0,get:function(){return n(p).default}});var m=r(12058);Object.defineProperty(t,"fa",{enumerable:!0,get:function(){return n(m).default}});var h=r(44370);Object.defineProperty(t,"fi",{enumerable:!0,get:function(){return n(h).default}});var f=r(87073);Object.defineProperty(t,"fr",{enumerable:!0,get:function(){return n(f).default}});var g=r(45058);Object.defineProperty(t,"frCA",{enumerable:!0,get:function(){return n(g).default}});var y=r(82848);Object.defineProperty(t,"he",{enumerable:!0,get:function(){return n(y).default}});var v=r(50832);Object.defineProperty(t,"hu",{enumerable:!0,get:function(){return n(v).default}});var b=r(50974);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return n(b).default}});var _=r(55662);Object.defineProperty(t,"it",{enumerable:!0,get:function(){return n(_).default}});var w=r(5542);Object.defineProperty(t,"ja",{enumerable:!0,get:function(){return n(w).default}});var P=r(92);Object.defineProperty(t,"kh",{enumerable:!0,get:function(){return n(P).default}});var O=r(28195);Object.defineProperty(t,"ko",{enumerable:!0,get:function(){return n(O).default}});var S=r(89917);Object.defineProperty(t,"mk",{enumerable:!0,get:function(){return n(S).default}});var E=r(20645);Object.defineProperty(t,"ms",{enumerable:!0,get:function(){return n(E).default}});var A=r(2519);Object.defineProperty(t,"nl",{enumerable:!0,get:function(){return n(A).default}});var I=r(66068);Object.defineProperty(t,"no",{enumerable:!0,get:function(){return n(I).default}});var k=r(37005);Object.defineProperty(t,"ota",{enumerable:!0,get:function(){return n(k).default}});var T=r(62790);Object.defineProperty(t,"ps",{enumerable:!0,get:function(){return n(T).default}});var j=r(12297);Object.defineProperty(t,"pl",{enumerable:!0,get:function(){return n(j).default}});var C=r(513);Object.defineProperty(t,"pt",{enumerable:!0,get:function(){return n(C).default}});var x=r(25570);Object.defineProperty(t,"ru",{enumerable:!0,get:function(){return n(x).default}});var N=r(78520);Object.defineProperty(t,"sl",{enumerable:!0,get:function(){return n(N).default}});var $=r(52338);Object.defineProperty(t,"sv",{enumerable:!0,get:function(){return n($).default}});var R=r(3424);Object.defineProperty(t,"ta",{enumerable:!0,get:function(){return n(R).default}});var M=r(57041);Object.defineProperty(t,"th",{enumerable:!0,get:function(){return n(M).default}});var D=r(54003);Object.defineProperty(t,"tr",{enumerable:!0,get:function(){return n(D).default}});var L=r(75911);Object.defineProperty(t,"ua",{enumerable:!0,get:function(){return n(L).default}});var F=r(67316);Object.defineProperty(t,"ur",{enumerable:!0,get:function(){return n(F).default}});var U=r(24290);Object.defineProperty(t,"vi",{enumerable:!0,get:function(){return n(U).default}});var z=r(40999);Object.defineProperty(t,"zhCN",{enumerable:!0,get:function(){return n(z).default}});var B=r(9587);Object.defineProperty(t,"zhTW",{enumerable:!0,get:function(){return n(B).default}})},45180:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(57963),t),a(r(2902),t)},45214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const n=r(64094),a=r(97877);var i=r(97877);function s(e,t,r,i){return(0,a.default)(80,n.default,e,t,r,i)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return i.URL}}),s.DNS=a.DNS,s.URL=a.URL,t.default=s},45226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunnableBranch=void 0;const n=r(10969),a=r(5272),i=r(28033);class s extends n.Runnable{static lc_name(){return"RunnableBranch"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"default",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"branches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.branches=e.branches,this.default=e.default}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");return new this({branches:e.slice(0,-1).map(([e,t])=>[(0,n._coerceToRunnable)(e),(0,n._coerceToRunnable)(t)]),default:(0,n._coerceToRunnable)(e[e.length-1])})}async _invoke(e,t,r){let n;for(let i=0;i<this.branches.length;i+=1){const[s,o]=this.branches[i];if(await s.invoke(e,(0,a.patchConfig)(t,{callbacks:r?.getChild(`condition:${i+1}`)}))){n=await o.invoke(e,(0,a.patchConfig)(t,{callbacks:r?.getChild(`branch:${i+1}`)}));break}}return n||(n=await this.default.invoke(e,(0,a.patchConfig)(t,{callbacks:r?.getChild("branch:default")}))),n}async invoke(e,t={}){return this._callWithConfig(this._invoke,e,t)}async*_streamIterator(e,t){const r=await(0,a.getCallbackManagerForConfig)(t),s=await(r?.handleChainStart(this.toJSON(),(0,n._coerceToDict)(e,"input"),t?.runId,void 0,void 0,void 0,t?.runName));let o,l,c=!0;try{for(let r=0;r<this.branches.length;r+=1){const[n,d]=this.branches[r];if(await n.invoke(e,(0,a.patchConfig)(t,{callbacks:s?.getChild(`condition:${r+1}`)}))){l=await d.stream(e,(0,a.patchConfig)(t,{callbacks:s?.getChild(`branch:${r+1}`)}));for await(const e of l)if(yield e,c)if(void 0===o)o=e;else try{o=(0,i.concat)(o,e)}catch(e){o=void 0,c=!1}break}}if(void 0===l){l=await this.default.stream(e,(0,a.patchConfig)(t,{callbacks:s?.getChild("branch:default")}));for await(const e of l)if(yield e,c)if(void 0===o)o=e;else try{o=(0,i.concat)(o,e)}catch(e){o=void 0,c=!1}}}catch(e){throw await(s?.handleChainError(e)),e}await(s?.handleChainEnd(o??{}))}}t.RunnableBranch=s},45292:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function t(t){return e[t]??null}const r={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return e=>{switch(e.code){case"invalid_type":return`Ungültige Eingabe: erwartet ${e.expected}, erhalten ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"Zahl";case"object":if(Array.isArray(e))return"Array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ungültige Eingabe: erwartet ${s.stringifyPrimitive(e.values[0])}`:`Ungültige Option: erwartet eine von ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Zu groß: erwartet, dass ${e.origin??"Wert"} ${r}${e.maximum.toString()} ${n.unit??"Elemente"} hat`:`Zu groß: erwartet, dass ${e.origin??"Wert"} ${r}${e.maximum.toString()} ist`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Zu klein: erwartet, dass ${e.origin} ${r}${e.minimum.toString()} ${n.unit} hat`:`Zu klein: erwartet, dass ${e.origin} ${r}${e.minimum.toString()} ist`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ungültiger String: muss mit "${t.prefix}" beginnen`:"ends_with"===t.format?`Ungültiger String: muss mit "${t.suffix}" enden`:"includes"===t.format?`Ungültiger String: muss "${t.includes}" enthalten`:"regex"===t.format?`Ungültiger String: muss dem Muster ${t.pattern} entsprechen`:`Ungültig: ${r[t.format]??e.format}`}case"not_multiple_of":return`Ungültige Zahl: muss ein Vielfaches von ${e.divisor} sein`;case"unrecognized_keys":return`${e.keys.length>1?"Unbekannte Schlüssel":"Unbekannter Schlüssel"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Ungültiger Schlüssel in ${e.origin}`;case"invalid_union":default:return"Ungültige Eingabe";case"invalid_element":return`Ungültiger Wert in ${e.origin}`}}}},45432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSetDef=function(e,t){const r={type:"array",uniqueItems:!0,items:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(0,n.setResponseValueAndErrors)(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&(0,n.setResponseValueAndErrors)(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r};const n=r(56705),a=r(95445)},45673:(e,t,r)=>{e.exports=r(40309)},45753:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(17833):e.exports=r(76033)},45856:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputItems=void 0;const n=r(82040),a=r(75552),i=r(54815);class s extends n.APIResource{list(e,t={},r){return this._client.getAPIList(i.path`/responses/${e}/input_items`,a.CursorPage,{query:t,...r})}}t.InputItems=s},46017:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tlsPolicyName=void 0,t.tlsPolicy=function(e){return(0,n.tlsPolicy)(e)};const n=r(17445);t.tlsPolicyName=n.tlsPolicyName},46021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNumberDef=void 0;const n=r(47027);t.parseNumberDef=function(e,t){const r={type:"number"};if(!e.checks)return r;for(const a of e.checks)switch(a.kind){case"int":r.type="integer",(0,n.addErrorMessage)(r,"type",a.message,t);break;case"min":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,t)}return r}},46170:(e,t,r)=>{"use strict";const n=r(53908),a=r(30144),{safeRe:i,t:s}=r(99718);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){const n=t.includePrerelease?i[s.COERCERTLFULL]:i[s.COERCERTL];let a;for(;(a=n.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&a.index+a[0].length===r.index+r[0].length||(r=a),n.lastIndex=a.index+a[1].length+a[2].length;n.lastIndex=-1}else r=e.match(t.includePrerelease?i[s.COERCEFULL]:i[s.COERCE]);if(null===r)return null;const o=r[2],l=r[3]||"0",c=r[4]||"0",d=t.includePrerelease&&r[5]?`-${r[5]}`:"",u=t.includePrerelease&&r[6]?`+${r[6]}`:"";return a(`${o}.${l}.${c}${d}${u}`,t)}},46254:(e,t,r)=>{"use strict";const n=r(53908);e.exports=(e,t)=>new n(e,t).minor},46289:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isToolMessage=t.isAssistantMessage=void 0,t.isPresent=function(e){return null!=e},t.isAssistantMessage=e=>"assistant"===e?.role,t.isToolMessage=e=>"tool"===e?.role},46445:(e,t)=>{"use strict";var r,n,a;t.SchemaType=void 0,(r=t.SchemaType||(t.SchemaType={})).STRING="string",r.NUMBER="number",r.INTEGER="integer",r.BOOLEAN="boolean",r.ARRAY="array",r.OBJECT="object",t.ExecutableCodeLanguage=void 0,(n=t.ExecutableCodeLanguage||(t.ExecutableCodeLanguage={})).LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python",t.Outcome=void 0,(a=t.Outcome||(t.Outcome={})).OUTCOME_UNSPECIFIED="outcome_unspecified",a.OUTCOME_OK="outcome_ok",a.OUTCOME_FAILED="outcome_failed",a.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";const i=["user","model","function","system"];var s,o,l,c,d,u,p,m,h;t.HarmCategory=void 0,(s=t.HarmCategory||(t.HarmCategory={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HarmBlockThreshold=void 0,(o=t.HarmBlockThreshold||(t.HarmBlockThreshold={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",t.HarmProbability=void 0,(l=t.HarmProbability||(t.HarmProbability={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",l.NEGLIGIBLE="NEGLIGIBLE",l.LOW="LOW",l.MEDIUM="MEDIUM",l.HIGH="HIGH",t.BlockReason=void 0,(c=t.BlockReason||(t.BlockReason={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",c.SAFETY="SAFETY",c.OTHER="OTHER",t.FinishReason=void 0,(d=t.FinishReason||(t.FinishReason={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",d.STOP="STOP",d.MAX_TOKENS="MAX_TOKENS",d.SAFETY="SAFETY",d.RECITATION="RECITATION",d.LANGUAGE="LANGUAGE",d.BLOCKLIST="BLOCKLIST",d.PROHIBITED_CONTENT="PROHIBITED_CONTENT",d.SPII="SPII",d.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",d.OTHER="OTHER",t.TaskType=void 0,(u=t.TaskType||(t.TaskType={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",u.RETRIEVAL_QUERY="RETRIEVAL_QUERY",u.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",u.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",u.CLASSIFICATION="CLASSIFICATION",u.CLUSTERING="CLUSTERING",t.FunctionCallingMode=void 0,(p=t.FunctionCallingMode||(t.FunctionCallingMode={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",p.AUTO="AUTO",p.ANY="ANY",p.NONE="NONE",t.DynamicRetrievalMode=void 0,(m=t.DynamicRetrievalMode||(t.DynamicRetrievalMode={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",m.MODE_DYNAMIC="MODE_DYNAMIC";class f extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class g extends f{constructor(e,t){super(e),this.response=t}}class y extends f{constructor(e,t,r,n){super(e),this.status=t,this.statusText=r,this.errorDetails=n}}class v extends f{}class b extends f{}!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(h||(h={}));class _{constructor(e,t,r,n,a){this.model=e,this.task=t,this.apiKey=r,this.stream=n,this.requestOptions=a}toString(){var e,t;const r=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let n=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${r}/${this.model}:${this.task}`;return this.stream&&(n+="?alt=sse"),n}}async function w(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",function(e){const t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.24.1"),t.join(" ")}(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(e){throw new v(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${e.message}`)}for(const[e,t]of n.entries()){if("x-goog-api-key"===e)throw new v(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new v(`Header name ${e} can only be set using the apiClient field`);r.append(e,t)}}return r}async function P(e,t,r,n,a,i={},s=fetch){const{url:o,fetchOptions:l}=await async function(e,t,r,n,a,i){const s=new _(e,t,r,n,i);return{url:s.toString(),fetchOptions:Object.assign(Object.assign({},O(i)),{method:"POST",headers:await w(s),body:a})}}(e,t,r,n,a,i);return async function(e,t,r=fetch){let n;try{n=await r(e,t)}catch(t){!function(e,t){let r=e;throw"AbortError"===r.name?(r=new b(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof y||e instanceof v||(r=new f(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}(t,e)}return n.ok||await async function(e,t){let r,n="";try{const t=await e.json();n=t.error.message,t.error.details&&(n+=` ${JSON.stringify(t.error.details)}`,r=t.error.details)}catch(e){}throw new y(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,r)}(n,e),n}(o,l,s)}function O(e){const t={};if(void 0!==(null==e?void 0:e.signal)||(null==e?void 0:e.timeout)>=0){const r=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}function S(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),I(e.candidates[0]))throw new g(`${k(e)}`,e);return function(e){var t,r,n,a;const i=[];if(null===(r=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===r?void 0:r.parts)for(const t of null===(a=null===(n=e.candidates)||void 0===n?void 0:n[0].content)||void 0===a?void 0:a.parts)t.text&&i.push(t.text),t.executableCode&&i.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&i.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}(e)}if(e.promptFeedback)throw new g(`Text not available. ${k(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),I(e.candidates[0]))throw new g(`${k(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),E(e)[0]}if(e.promptFeedback)throw new g(`Function call not available. ${k(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),I(e.candidates[0]))throw new g(`${k(e)}`,e);return E(e)}if(e.promptFeedback)throw new g(`Function call not available. ${k(e)}`,e)},e}function E(e){var t,r,n,a;const i=[];if(null===(r=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===r?void 0:r.parts)for(const t of null===(a=null===(n=e.candidates)||void 0===n?void 0:n[0].content)||void 0===a?void 0:a.parts)t.functionCall&&i.push(t.functionCall);return i.length>0?i:void 0}const A=[t.FinishReason.RECITATION,t.FinishReason.SAFETY,t.FinishReason.LANGUAGE];function I(e){return!!e.finishReason&&A.includes(e.finishReason)}function k(e){var t,r,n;let a="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(n=e.candidates)||void 0===n?void 0:n[0]){const t=e.candidates[0];I(t)&&(a+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(a+=`: ${t.finishMessage}`))}}else a+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(a+=` due to ${e.promptFeedback.blockReason}`),(null===(r=e.promptFeedback)||void 0===r?void 0:r.blockReasonMessage)&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);return a}function T(e){return this instanceof T?(this.v=e,this):new T(e)}"function"==typeof SuppressedError&&SuppressedError;const j=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function C(e){const t=[],r=e.getReader();for(;;){const{done:e,value:n}=await r.read();if(e)return S(N(t));t.push(n)}}function x(e){return function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),i=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){a[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||o(e,t)})})}function o(e,t){try{(r=a[e](t)).value instanceof T?Promise.resolve(r.value.v).then(l,c):d(i[0][2],r)}catch(e){d(i[0][3],e)}var r}function l(e){o("next",e)}function c(e){o("throw",e)}function d(e,t){e(t),i.shift(),i.length&&o(i[0][0],i[0][1])}}(this,arguments,function*(){const t=e.getReader();for(;;){const{value:e,done:r}=yield T(t.read());if(r)break;yield yield T(S(e))}})}function N(e){const t=e[e.length-1],r={promptFeedback:null==t?void 0:t.promptFeedback};for(const t of e){if(t.candidates){let e=0;for(const n of t.candidates)if(r.candidates||(r.candidates=[]),r.candidates[e]||(r.candidates[e]={index:e}),r.candidates[e].citationMetadata=n.citationMetadata,r.candidates[e].groundingMetadata=n.groundingMetadata,r.candidates[e].finishReason=n.finishReason,r.candidates[e].finishMessage=n.finishMessage,r.candidates[e].safetyRatings=n.safetyRatings,n.content&&n.content.parts){r.candidates[e].content||(r.candidates[e].content={role:n.content.role||"user",parts:[]});const t={};for(const a of n.content.parts)a.text&&(t.text=a.text),a.functionCall&&(t.functionCall=a.functionCall),a.executableCode&&(t.executableCode=a.executableCode),a.codeExecutionResult&&(t.codeExecutionResult=a.codeExecutionResult),0===Object.keys(t).length&&(t.text=""),r.candidates[e].content.parts.push(t)}e++}t.usageMetadata&&(r.usageMetadata=t.usageMetadata)}return r}async function $(e,t,r,n){return function(e){const t=function(e){const t=e.getReader();return new ReadableStream({start(e){let r="";return function n(){return t.read().then(({value:t,done:a})=>{if(a)return r.trim()?void e.error(new f("Failed to parse stream")):void e.close();r+=t;let i,s=r.match(j);for(;s;){try{i=JSON.parse(s[1])}catch(t){return void e.error(new f(`Error parsing JSON response: "${s[1]}"`))}e.enqueue(i),r=r.substring(s[0].length),s=r.match(j)}return n()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new b("Request aborted when reading from the stream"):new f("Error reading from the stream"),t})}()}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[r,n]=t.tee();return{stream:x(r),response:C(n)}}(await P(t,h.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n))}async function R(e,t,r,n){const a=await P(t,h.GENERATE_CONTENT,e,!1,JSON.stringify(r),n);return{response:S(await a.json())}}function M(e){if(null!=e)return"string"==typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function D(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(const r of e)"string"==typeof r?t.push({text:r}):t.push(r);return function(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const i of e)"functionResponse"in i?(r.parts.push(i),a=!0):(t.parts.push(i),n=!0);if(n&&a)throw new f("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new f("No content is provided for sending chat message.");return n?t:r}(t)}function L(e){let t;return t=e.contents?e:{contents:[D(e)]},e.systemInstruction&&(t.systemInstruction=M(e.systemInstruction)),t}const F=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],U={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function z(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;const r=null===(t=e.candidates[0])||void 0===t?void 0:t.content;if(void 0===r)return!1;if(void 0===r.parts||0===r.parts.length)return!1;for(const e of r.parts){if(void 0===e||0===Object.keys(e).length)return!1;if(void 0!==e.text&&""===e.text)return!1}return!0}const B="SILENT_ERROR";class V{constructor(e,t,r,n={}){this.model=t,this.params=r,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==r?void 0:r.history)&&(function(e){let t=!1;for(const r of e){const{role:e,parts:n}=r;if(!t&&"user"!==e)throw new f(`First content should be with role 'user', got ${e}`);if(!i.includes(e))throw new f(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(i)}`);if(!Array.isArray(n))throw new f("Content should have 'parts' property with an array of Parts");if(0===n.length)throw new f("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const e of n)for(const t of F)t in e&&(a[t]+=1);const s=U[e];for(const t of F)if(!s.includes(t)&&a[t]>0)throw new f(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,n,a,i,s,o;await this._sendPromise;const l=D(e),c={safetySettings:null===(r=this.params)||void 0===r?void 0:r.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(a=this.params)||void 0===a?void 0:a.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(o=this.params)||void 0===o?void 0:o.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),t);let u;return this._sendPromise=this._sendPromise.then(()=>R(this._apiKey,this.model,c,d)).then(e=>{var t;if(z(e.response)){this._history.push(l);const r=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(r)}else{const t=k(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}u=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,u}async sendMessageStream(e,t={}){var r,n,a,i,s,o;await this._sendPromise;const l=D(e),c={safetySettings:null===(r=this.params)||void 0===r?void 0:r.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(a=this.params)||void 0===a?void 0:a.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,cachedContent:null===(o=this.params)||void 0===o?void 0:o.cachedContent,contents:[...this._history,l]},d=Object.assign(Object.assign({},this._requestOptions),t),u=$(this._apiKey,this.model,c,d);return this._sendPromise=this._sendPromise.then(()=>u).catch(e=>{throw new Error(B)}).then(e=>e.response).then(e=>{if(z(e)){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=k(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==B&&console.error(e)}),u}}class Z{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=M(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const n=L(e),a=Object.assign(Object.assign({},this._requestOptions),t);return R(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(r=this.cachedContent)||void 0===r?void 0:r.name},n),a)}async generateContentStream(e,t={}){var r;const n=L(e),a=Object.assign(Object.assign({},this._requestOptions),t);return $(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(r=this.cachedContent)||void 0===r?void 0:r.name},n),a)}startChat(e){var t;return new V(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=function(e,t){var r;let n={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null===(r=null==t?void 0:t.cachedContent)||void 0===r?void 0:r.name,contents:[]};const a=null!=e.generateContentRequest;if(e.contents){if(a)throw new v("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const t=D(e);n.contents=[t]}return{generateContentRequest:n}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,r,n){return(await P(t,h.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}(this.apiKey,this.model,r,n)}async embedContent(e,t={}){const r="string"==typeof(a=e)||Array.isArray(a)?{content:D(a)}:a,n=Object.assign(Object.assign({},this._requestOptions),t);var a;return async function(e,t,r,n){return(await P(t,h.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}(this.apiKey,this.model,r,n)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,r,n){const a=r.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await P(t,h.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}(this.apiKey,this.model,e,r)}}t.ChatSession=V,t.GenerativeModel=Z,t.GoogleGenerativeAI=class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new f("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Z(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new v("Cached content must contain a `name` field.");if(!e.model)throw new v("Cached content must contain a `model` field.");const n=["model","systemInstruction"];for(const r of n)if((null==t?void 0:t[r])&&e[r]&&(null==t?void 0:t[r])!==e[r]){if("model"===r&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new v(`Different value for "${r}" specified in modelParams (${t[r]}) and cachedContent (${e[r]})`)}const a=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Z(this.apiKey,a,r)}},t.GoogleGenerativeAIAbortError=b,t.GoogleGenerativeAIError=f,t.GoogleGenerativeAIFetchError=y,t.GoogleGenerativeAIRequestInputError=v,t.GoogleGenerativeAIResponseError=g,t.POSSIBLE_ROLES=i},46462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTupleDef=void 0;const n=r(84769);t.parseTupleDef=function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:(0,n.parseDef)(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}},46613:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatGenerationChunk=t.GenerationChunk=t.RUN_KEY=void 0,t.RUN_KEY="__run";class r{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new r({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}t.GenerationChunk=r;class n extends r{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new n({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}t.ChatGenerationChunk=n},46636:(e,t,r)=>{"use strict";var n,a,i,s,o,l,c,d;Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseStream=void 0;const u=r(79632),p=r(89526),m=r(50460),h=r(97759);class f extends m.EventStream{constructor(e){super(),n.add(this),a.set(this,void 0),i.set(this,void 0),s.set(this,void 0),u.__classPrivateFieldSet(this,a,e,"f")}static createResponse(e,t,r){const n=new f(t);return n._run(()=>n._createOrRetrieveResponse(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createOrRetrieveResponse(e,t,r){const a=r?.signal;let i;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),u.__classPrivateFieldGet(this,n,"m",o).call(this);let s=null;"response_id"in t?(i=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),s=t.starting_after??null):i=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const e of i)u.__classPrivateFieldGet(this,n,"m",l).call(this,e,s);if(i.controller.signal?.aborted)throw new p.APIUserAbortError;return u.__classPrivateFieldGet(this,n,"m",c).call(this)}[(a=new WeakMap,i=new WeakMap,s=new WeakMap,n=new WeakSet,o=function(){this.ended||u.__classPrivateFieldSet(this,i,void 0,"f")},l=function(e,t){if(this.ended)return;const r=(e,r)=>{(null==t||r.sequence_number>t)&&this._emit(e,r)},a=u.__classPrivateFieldGet(this,n,"m",d).call(this,e);switch(r("event",e),e.type){case"response.output_text.delta":{const t=a.output[e.output_index];if(!t)throw new p.OpenAIError(`missing output at index ${e.output_index}`);if("message"===t.type){const n=t.content[e.content_index];if(!n)throw new p.OpenAIError(`missing content at index ${e.content_index}`);if("output_text"!==n.type)throw new p.OpenAIError(`expected content to be 'output_text', got ${n.type}`);r("response.output_text.delta",{...e,snapshot:n.text})}break}case"response.function_call_arguments.delta":{const t=a.output[e.output_index];if(!t)throw new p.OpenAIError(`missing output at index ${e.output_index}`);"function_call"===t.type&&r("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:r(e.type,e)}},c=function(){if(this.ended)throw new p.OpenAIError("stream has ended, this shouldn't happen");const e=u.__classPrivateFieldGet(this,i,"f");if(!e)throw new p.OpenAIError("request ended without sending any events");u.__classPrivateFieldSet(this,i,void 0,"f");const t=function(e,t){return(0,h.maybeParseResponse)(e,t)}(e,u.__classPrivateFieldGet(this,a,"f"));return u.__classPrivateFieldSet(this,s,t,"f"),t},d=function(e){let t=u.__classPrivateFieldGet(this,i,"f");if(!t){if("response.created"!==e.type)throw new p.OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=u.__classPrivateFieldSet(this,i,e.response,"f"),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const r=t.output[e.output_index];if(!r)throw new p.OpenAIError(`missing output at index ${e.output_index}`);"message"===r.type&&r.content.push(e.part);break}case"response.output_text.delta":{const r=t.output[e.output_index];if(!r)throw new p.OpenAIError(`missing output at index ${e.output_index}`);if("message"===r.type){const t=r.content[e.content_index];if(!t)throw new p.OpenAIError(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new p.OpenAIError(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const r=t.output[e.output_index];if(!r)throw new p.OpenAIError(`missing output at index ${e.output_index}`);"function_call"===r.type&&(r.arguments+=e.delta);break}case"response.completed":u.__classPrivateFieldSet(this,i,e.response,"f")}return t},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=u.__classPrivateFieldGet(this,s,"f");if(!e)throw new p.OpenAIError("stream ended without producing a ChatCompletion");return e}}t.ResponseStream=f},46808:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImagePromptValue=t.ChatPromptValue=t.StringPromptValue=t.BasePromptValue=void 0;const n=r(65925),a=r(71111),i=r(58219);class s extends n.Serializable{}t.BasePromptValue=s,t.StringPromptValue=class extends s{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new a.HumanMessage(this.value)]}},t.ChatPromptValue=class extends s{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return(0,i.getBufferString)(this.messages)}toChatMessages(){return this.messages}},t.ImagePromptValue=class extends s{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new a.HumanMessage({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}},46892:e=>{"use strict";e.exports.mixin=function(e,t){const r=Object.getOwnPropertyNames(t);for(let n=0;n<r.length;++n)Object.defineProperty(e,r[n],Object.getOwnPropertyDescriptor(t,r[n]))},e.exports.wrapperSymbol=Symbol("wrapper"),e.exports.implSymbol=Symbol("impl"),e.exports.wrapperForImpl=function(t){return t[e.exports.wrapperSymbol]},e.exports.implForWrapper=function(t){return t[e.exports.implSymbol]}},46895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildBodyPart=c,t.buildMultipartBody=function(e){return{parts:e.map(c)}};const n=r(79227),a=r(18873),i=r(47730),s=r(73796);function o(e,t){if(e.headers){const r=Object.keys(e.headers).find(e=>e.toLowerCase()===t.toLowerCase());if(r)return e.headers[r]}}function l(e){return JSON.stringify(e)}function c(e){var t;const r=function(e){const t=o(e,"content-type");if(t)return t;if(null===e.contentType)return;if(e.contentType)return e.contentType;const{body:r}=e;return null!=r?"string"==typeof r||"number"==typeof r||"boolean"==typeof r?"text/plain; charset=UTF-8":r instanceof Blob?r.type||"application/octet-stream":(0,s.isBinaryBody)(r)?"application/octet-stream":"application/json":void 0}(e),c=function(e){var t;const r=o(e,"content-disposition");if(r)return r;if(void 0===e.dispositionType&&void 0===e.name&&void 0===e.filename)return;let n,a=null!==(t=e.dispositionType)&&void 0!==t?t:"form-data";if(e.name&&(a+=`; name=${l(e.name)}`),e.filename)n=e.filename;else if("undefined"!=typeof File&&e.body instanceof File){const t=e.body.name;""!==t&&(n=t)}return n&&(a+=`; filename=${l(n)}`),a}(e),d=(0,a.createHttpHeaders)(null!==(t=e.headers)&&void 0!==t?t:{});r&&d.set("content-type",r),c&&d.set("content-disposition",c);const u=function(e,t){if(void 0===e)return new Uint8Array([]);if((0,s.isBinaryBody)(e))return e;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return(0,i.stringToUint8Array)(String(e),"utf-8");if(t&&/application\/(.+\+)?json(;.+)?/i.test(String(t)))return(0,i.stringToUint8Array)(JSON.stringify(e),"utf-8");throw new n.RestError(`Unsupported body/content-type combination: ${e}, ${t}`)}(e.body,r);return{headers:d,body:u}}},46903:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemMessageChunk=t.SystemMessage=void 0;const n=r(66267);class a extends n.BaseMessage{static lc_name(){return"SystemMessage"}_getType(){return"system"}}t.SystemMessage=a;class i extends n.BaseMessageChunk{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),id:this.id??e.id})}}t.SystemMessageChunk=i},46948:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(91562),t)},47027:(e,t)=>{"use strict";function r(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}Object.defineProperty(t,"__esModule",{value:!0}),t.setResponseValueAndErrors=t.addErrorMessage=void 0,t.addErrorMessage=r,t.setResponseValueAndErrors=function(e,t,n,a,i){e[t]=n,r(e,t,a,i)}},47064:(e,t,r)=>{"use strict";const n=r(98737),a=r(41236).fromPromise;e.exports={symlinkType:a(async function(e,t){if(t)return t;let r;try{r=await n.lstat(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}),symlinkTypeSync:function(e,t){if(t)return t;let r;try{r=n.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}}},47211:(e,t,r)=>{"use strict";const n=r(98737),a=r(41236).fromPromise;e.exports={utimesMillis:a(async function(e,t,r){const a=await n.open(e,"r+");let i=null;try{await n.futimes(a,t,r)}finally{try{await n.close(a)}catch(e){i=e}}if(i)throw i}),utimesMillisSync:function(e,t,r){const a=n.openSync(e,"r+");return n.futimesSync(a,t,r),n.closeSync(a)}}},47467:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertPromptToOpenAI=function(e){const t=e.toChatMessages();return{messages:(0,n._convertMessagesToOpenAIParams)(t)}};const n=r(80975)},47498:(e,t,r)=>{e.exports=r(28033)},47714:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:l()}};const s=i(r(90523));function o(e,t,r,n){const a=Math.abs(e),i=a%10,s=a%100;return s>=11&&s<=19?n:1===i?t:i>=2&&i<=4?r:n}const l=()=>{const e={string:{unit:{one:"сімвал",few:"сімвалы",many:"сімвалаў"},verb:"мець"},array:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},set:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},file:{unit:{one:"байт",few:"байты",many:"байтаў"},verb:"мець"}};function t(t){return e[t]??null}const r={regex:"увод",email:"email адрас",url:"URL",emoji:"эмодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата і час",date:"ISO дата",time:"ISO час",duration:"ISO працягласць",ipv4:"IPv4 адрас",ipv6:"IPv6 адрас",cidrv4:"IPv4 дыяпазон",cidrv6:"IPv6 дыяпазон",base64:"радок у фармаце base64",base64url:"радок у фармаце base64url",json_string:"JSON радок",e164:"нумар E.164",jwt:"JWT",template_literal:"увод"};return e=>{switch(e.code){case"invalid_type":return`Няправільны ўвод: чакаўся ${e.expected}, атрымана ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"лік";case"object":if(Array.isArray(e))return"масіў";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Няправільны ўвод: чакалася ${s.stringifyPrimitive(e.values[0])}`:`Няправільны варыянт: чакаўся адзін з ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);if(n){const t=o(Number(e.maximum),n.unit.one,n.unit.few,n.unit.many);return`Занадта вялікі: чакалася, што ${e.origin??"значэнне"} павінна ${n.verb} ${r}${e.maximum.toString()} ${t}`}return`Занадта вялікі: чакалася, што ${e.origin??"значэнне"} павінна быць ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);if(n){const t=o(Number(e.minimum),n.unit.one,n.unit.few,n.unit.many);return`Занадта малы: чакалася, што ${e.origin} павінна ${n.verb} ${r}${e.minimum.toString()} ${t}`}return`Занадта малы: чакалася, што ${e.origin} павінна быць ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Няправільны радок: павінен пачынацца з "${t.prefix}"`:"ends_with"===t.format?`Няправільны радок: павінен заканчвацца на "${t.suffix}"`:"includes"===t.format?`Няправільны радок: павінен змяшчаць "${t.includes}"`:"regex"===t.format?`Няправільны радок: павінен адпавядаць шаблону ${t.pattern}`:`Няправільны ${r[t.format]??e.format}`}case"not_multiple_of":return`Няправільны лік: павінен быць кратным ${e.divisor}`;case"unrecognized_keys":return`Нераспазнаны ${e.keys.length>1?"ключы":"ключ"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Няправільны ключ у ${e.origin}`;case"invalid_union":default:return"Няправільны ўвод";case"invalid_element":return`Няправільнае значэнне ў ${e.origin}`}}}},47730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint8ArrayToString=function(e,t){return Buffer.from(e).toString(t)},t.stringToUint8Array=function(e,t){return Buffer.from(e,t)}},47808:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStream=function(e,t){return r=function(e,t){return new ReadableStream({async pull(t){const{value:r,done:n}=await e.next();n?t.close():t.enqueue(r)},cancel:t})}(e,t),n=t,a(r),function(e,t){var r;null!==(r=Symbol.asyncDispose)&&void 0!==r||(Symbol.asyncDispose=Symbol("Symbol.asyncDispose")),e[Symbol.asyncDispose]||(e[Symbol.asyncDispose]=()=>t())}(r,n),r;var r,n},t.ensureAsyncIterable=function(e){return t=e,Boolean(t&&"function"==typeof t.getReader&&"function"==typeof t.tee)?(a(e),{cancel:()=>e.cancel(),iterable:e}):{cancel:async()=>{"socket"in e&&e.socket?e.socket.end():e.destroy()},iterable:e};var t};const n=r(31635);function a(e){e[Symbol.asyncIterator]||(e[Symbol.asyncIterator]=()=>i(e)),e.values||(e.values=()=>i(e))}function i(e){return n.__asyncGenerator(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:e,done:r}=yield n.__await(t.read());if(r)return yield n.__await(void 0);yield yield n.__await(e)}}finally{const e=t.cancel();t.releaseLock(),yield n.__await(e)}})}},47870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMapDef=void 0;const n=r(84769),a=r(75127),i=r(95346);t.parseMapDef=function(e,t){return"record"===t.mapStrategy?(0,a.parseRecordDef)(e,t):{type:"array",maxItems:125,items:{type:"array",items:[(0,n.parseDef)(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||(0,i.parseAnyDef)(t),(0,n.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||(0,i.parseAnyDef)(t)],minItems:2,maxItems:2}}}},47984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__setModuleDefault=t.__createBinding=void 0,t.__classPrivateFieldSet=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},t.__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},t.__exportStar=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},t.__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=a(e),s=0;s<i.length;s++)"default"!==i[s]&&r(t,e,i[s]);return n(t,e),t};var r=Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};t.__createBinding=r;var n=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};t.__setModuleDefault=n;var a=function(e){return(a=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)}},48161:e=>{"use strict";e.exports=require("node:os")},48183:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateRetryDelay=function(e,t){const r=t.retryDelayInMs*Math.pow(2,e),a=Math.min(t.maxRetryDelayInMs,r);return{retryAfterInMs:a/2+(0,n.getRandomIntegerInclusive)(0,a/2)}};const n=r(74629)},48307:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.convertRunnableToTool=t.RunnableToolLike=t.RunnablePick=t.RunnableAssign=t._coerceToRunnable=t.RunnableWithFallbacks=t.RunnableParallel=t.RunnableLambda=t.RunnableTraceable=t.RunnableMap=t.RunnableSequence=t.RunnableRetry=t.RunnableEach=t.RunnableBinding=t.Runnable=t._coerceToDict=void 0;const a=r(7552),i=n(r(24116)),s=r(96383),o=r(32560),l=r(50797),c=r(28223),d=r(65925),u=r(71043),p=r(22055),m=r(15382),h=r(12257),f=r(75771),g=r(15411),y=r(12322),v=r(1968),b=r(40356),_=r(22118),w=r(30528);function P(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!=typeof e?{[t]:e}:e}t._coerceToDict=P;class O extends d.Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new S({bound:this,kwargs:e,config:{}})}map(){return new E({bound:this})}withRetry(e){return new A({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new S({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new C({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(m.ensureConfig);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([e])=>"runId"!==e));return Array.from({length:t},(t,n)=>(0,m.ensureConfig)(0===n?e:r))}return Array.from({length:t},()=>(0,m.ensureConfig)(e))}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),a=n[0]?.maxConcurrency??r?.maxConcurrency,i=new h.AsyncCaller({maxConcurrency:a,onFailedAttempt:e=>{throw e}}),s=e.map((e,t)=>i.call(async()=>{try{return await this.invoke(e,n[t])}catch(e){if(r?.returnExceptions)return e;throw e}}));return Promise.all(s)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this._streamIterator(e,r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}_separateRunnableConfigFromCallOptions(e){let t;t=void 0===e?(0,m.ensureConfig)(e):(0,m.ensureConfig)({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[t,r]}async _callWithConfig(e,t,r){const n=(0,m.ensureConfig)(r),a=await(0,m.getCallbackManagerForConfig)(n),i=await(a?.handleChainStart(this.toJSON(),P(t,"input"),n.runId,n?.runType,void 0,void 0,n?.runName??this.getName()));let s;delete n.runId;try{const a=e.call(this,t,n,i);s=await(0,p.raceWithSignal)(a,r?.signal)}catch(e){throw await(i?.handleChainError(e)),e}return await(i?.handleChainEnd(P(s,"output"))),s}async _batchWithConfig(e,t,r,n){const a=this._getOptionsList(r??{},t.length),i=await Promise.all(a.map(m.getCallbackManagerForConfig)),s=await Promise.all(i.map(async(e,r)=>{const n=await(e?.handleChainStart(this.toJSON(),P(t[r],"input"),a[r].runId,a[r].runType,void 0,void 0,a[r].runName??this.getName()));return delete a[r].runId,n}));let o;try{const r=e.call(this,t,a,s,n);o=await(0,p.raceWithSignal)(r,a?.[0]?.signal)}catch(e){throw await Promise.all(s.map(t=>t?.handleChainError(e))),e}return await Promise.all(s.map(e=>e?.handleChainEnd(P(o,"output")))),o}async*_transformStreamWithConfig(e,t,r){let n,a,i=!0,s=!0;const o=(0,m.ensureConfig)(r),d=await(0,m.getCallbackManagerForConfig)(o);let p;try{const m=await(0,u.pipeGeneratorWithSetup)(t.bind(this),async function*(){for await(const t of e){if(i)if(void 0===n)n=t;else try{n=(0,u.concat)(n,t)}catch{n=void 0,i=!1}yield t}}(),async()=>d?.handleChainStart(this.toJSON(),{input:""},o.runId,o.runType,void 0,void 0,o.runName??this.getName()),r?.signal,o);delete o.runId,p=m.setup;const h=p?.handlers.find(c.isStreamEventsHandler);let f=m.output;void 0!==h&&void 0!==p&&(f=h.tapOutputIterable(p.runId,f));const g=p?.handlers.find(l.isLogStreamHandler);void 0!==g&&void 0!==p&&(f=g.tapOutputIterable(p.runId,f));for await(const e of f)if(yield e,s)if(void 0===a)a=e;else try{a=(0,u.concat)(a,e)}catch{a=void 0,s=!1}}catch(e){throw await(p?.handleChainError(e,void 0,void 0,void 0,{inputs:P(n,"input")})),e}await(p?.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:P(n,"input")}))}getGraph(e){const t=new v.Graph,r=t.addNode({name:`${this.getName()}Input`,schema:a.z.any()}),n=t.addNode(this),i=t.addNode({name:`${this.getName()}Output`,schema:a.z.any()});return t.addEdge(r,n),t.addEdge(n,i),t}pipe(e){return new I({first:this,last:x(e)})}pick(e){return this.pipe(new $(e))}assign(e){return this.pipe(new N(new k({steps:e})))}async*transform(e,t){let r;for await(const t of e)r=void 0===r?t:(0,u.concat)(r,t);yield*this._streamIterator(r,(0,m.ensureConfig)(t))}async*streamLog(e,t,r){const n=new l.LogStreamCallbackHandler({...r,autoClose:!1,_schemaFormat:"original"}),a=(0,m.ensureConfig)(t);yield*this._streamLog(e,n,a)}async*_streamLog(e,t,r){const{callbacks:n}=r;if(void 0===n)r.callbacks=[t];else if(Array.isArray(n))r.callbacks=n.concat([t]);else{const e=n.copy();e.addHandler(t,!0),r.callbacks=e}const a=this.stream(e,r),i=async function(){try{const e=await a;for await(const r of e){const e=new l.RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:r}]});await t.writer.write(e)}}finally{await t.writer.close()}}();try{for await(const e of t)yield e}finally{await i}}streamEvents(e,t,r){let n;if("v1"===t.version)n=this._streamEventsV1(e,t,r);else{if("v2"!==t.version)throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');n=this._streamEventsV2(e,t,r)}return"text/event-stream"===t.encoding?(0,b.convertToHttpEventStream)(n):u.IterableReadableStream.fromAsyncGenerator(n)}async*_streamEventsV2(e,t,r){const n=new c.EventStreamCallbackHandler({...r,autoClose:!1}),a=(0,m.ensureConfig)(t),i=a.runId??(0,s.v4)();a.runId=i;const o=a.callbacks;if(void 0===o)a.callbacks=[n];else if(Array.isArray(o))a.callbacks=o.concat(n);else{const e=o.copy();e.addHandler(n,!0),a.callbacks=e}const l=this,d=async function(){try{const t=await l.stream(e,a),r=n.tapOutputIterable(i,t);for await(const e of r);}finally{await n.finish()}}();let u,p=!1;try{for await(const t of n)p?(t.run_id===u&&t.event.endsWith("_end")&&t.data?.input&&delete t.data.input,yield t):(t.data.input=e,p=!0,u=t.run_id,yield t)}finally{await d}}async*_streamEventsV1(e,t,r){let n,a=!1;const i=(0,m.ensureConfig)(t),s=i.tags??[],o=i.metadata??{},c=i.runName??this.getName(),d=new l.LogStreamCallbackHandler({...r,autoClose:!1,_schemaFormat:"streaming_events"}),u=new g._RootEventFilter({...r}),p=this._streamLog(e,d,i);for await(const t of p){if(n=n?n.concat(t):l.RunLog.fromRunLogPatch(t),void 0===n.state)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const t={...n.state},r={run_id:t.id,event:`on_${t.type}_start`,name:c,tags:s,metadata:o,data:{input:e}};u.includeEvent(r,t.type)&&(yield r)}const r=t.ops.filter(e=>e.path.startsWith("/logs/")).map(e=>e.path.split("/")[2]),i=[...new Set(r)];for(const e of i){let t,r={};const a=n.state.logs[e];if(t=void 0===a.end_time?a.streamed_output.length>0?"stream":"start":"end","start"===t)void 0!==a.inputs&&(r.input=a.inputs);else if("end"===t)void 0!==a.inputs&&(r.input=a.inputs),r.output=a.final_output;else if("stream"===t){const e=a.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${a.name}"`);r={chunk:a.streamed_output[0]},a.streamed_output=[]}yield{event:`on_${a.type}_${t}`,name:a.name,run_id:a.id,tags:a.tags,metadata:a.metadata,data:r}}const{state:d}=n;if(d.streamed_output.length>0){const e=d.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${d.name}"`);const t={chunk:d.streamed_output[0]};d.streamed_output=[];const r={event:`on_${d.type}_stream`,run_id:d.id,tags:s,metadata:o,name:c,data:t};u.includeEvent(r,d.type)&&(yield r)}}const h=n?.state;if(void 0!==h){const e={event:`on_${h.type}_end`,name:c,run_id:h.id,tags:s,metadata:o,data:{output:h.final_output}};u.includeEvent(e,h.type)&&(yield e)}}static isRunnable(e){return(0,g.isRunnableInterface)(e)}withListeners({onStart:e,onEnd:t,onError:r}){return new S({bound:this,config:{},configFactories:[n=>({callbacks:[new f.RootListenersTracer({config:n,onStart:e,onEnd:t,onError:r})]})]})}asTool(e){return M(this,e)}}t.Runnable=O;class S extends O{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const t=(0,m.mergeConfigs)(this.config,...e);return(0,m.mergeConfigs)(t,...this.configFactories?await Promise.all(this.configFactories.map(async e=>await e(t))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs))}async batch(e,t,r){const n=Array.isArray(t)?await Promise.all(t.map(async e=>this._mergeConfig((0,m.ensureConfig)(e),this.kwargs))):await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs);return this.bound.batch(e,n,r)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig((0,m.ensureConfig)(t),this.kwargs))}streamEvents(e,t,r){const n=this;return u.IterableReadableStream.fromAsyncGenerator(async function*(){yield*n.bound.streamEvents(e,{...await n._mergeConfig((0,m.ensureConfig)(t),n.kwargs),version:t.version},r)}())}static isRunnableBinding(e){return e.bound&&O.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:r}){return new S({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[n=>({callbacks:[new f.RootListenersTracer({config:n,onStart:e,onEnd:t,onError:r})]})]})}}t.RunnableBinding=S;class E extends O{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new E({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _invoke(e,t,r){return this.bound.batch(e,(0,m.patchConfig)(t,{callbacks:r?.getChild()}))}withListeners({onStart:e,onEnd:t,onError:r}){return new E({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:r})})}}t.RunnableEach=E;class A extends S{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){const n=e>1?`retry:attempt:${e}`:void 0;return(0,m.patchConfig)(t,{callbacks:r?.getChild(n)})}async _invoke(e,t,r){return(0,i.default)(n=>super.invoke(e,this._patchConfigForRetry(n,t,r)),{onFailedAttempt:t=>this.onFailedAttempt(t,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _batch(e,t,r,n){const a={};try{await(0,i.default)(async i=>{const s=e.map((e,t)=>t).filter(e=>void 0===a[e.toString()]||a[e.toString()]instanceof Error),o=s.map(t=>e[t]),l=s.map(e=>this._patchConfigForRetry(i,t?.[e],r?.[e])),c=await super.batch(o,l,{...n,returnExceptions:!0});let d;for(let e=0;e<c.length;e+=1){const t=c[e],r=s[e];t instanceof Error&&void 0===d&&(d=t,d.input=o[e]),a[r.toString()]=t}if(d)throw d;return c},{onFailedAttempt:e=>this.onFailedAttempt(e,e.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(e){if(!0!==n?.returnExceptions)throw e}return Object.keys(a).sort((e,t)=>parseInt(e,10)-parseInt(t,10)).map(e=>a[parseInt(e,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}}t.RunnableRetry=A;class I extends O{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){const r=(0,m.ensureConfig)(t),n=await(0,m.getCallbackManagerForConfig)(r),a=await(n?.handleChainStart(this.toJSON(),P(e,"input"),r.runId,void 0,void 0,void 0,r?.runName));delete r.runId;let i,s=e;try{const e=[this.first,...this.middle];for(let n=0;n<e.length;n+=1){const i=e[n].invoke(s,(0,m.patchConfig)(r,{callbacks:a?.getChild(`seq:step:${n+1}`)}));s=await(0,p.raceWithSignal)(i,t?.signal)}if(t?.signal?.aborted)throw new Error("Aborted");i=await this.last.invoke(s,(0,m.patchConfig)(r,{callbacks:a?.getChild(`seq:step:${this.steps.length}`)}))}catch(e){throw await(a?.handleChainError(e)),e}return await(a?.handleChainEnd(P(i,"output"))),i}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),a=await Promise.all(n.map(m.getCallbackManagerForConfig)),i=await Promise.all(a.map(async(t,r)=>{const a=await(t?.handleChainStart(this.toJSON(),P(e[r],"input"),n[r].runId,void 0,void 0,void 0,n[r].runName));return delete n[r].runId,a}));let s=e;try{for(let e=0;e<this.steps.length;e+=1){const t=this.steps[e].batch(s,i.map((t,r)=>{const a=t?.getChild(`seq:step:${e+1}`);return(0,m.patchConfig)(n[r],{callbacks:a})}),r);s=await(0,p.raceWithSignal)(t,n[0]?.signal)}}catch(e){throw await Promise.all(i.map(t=>t?.handleChainError(e))),e}return await Promise.all(i.map(e=>e?.handleChainEnd(P(s,"output")))),s}async*_streamIterator(e,t){const r=await(0,m.getCallbackManagerForConfig)(t),{runId:n,...a}=t??{},i=await(r?.handleChainStart(this.toJSON(),P(e,"input"),n,void 0,void 0,void 0,a?.runName)),s=[this.first,...this.middle,this.last];let o,l=!0;try{let r=s[0].transform(async function*(){yield e}(),(0,m.patchConfig)(a,{callbacks:i?.getChild("seq:step:1")}));for(let e=1;e<s.length;e+=1){const t=s[e];r=await t.transform(r,(0,m.patchConfig)(a,{callbacks:i?.getChild(`seq:step:${e+1}`)}))}for await(const e of r)if(t?.signal?.throwIfAborted(),yield e,l)if(void 0===o)o=e;else try{o=(0,u.concat)(o,e)}catch(e){o=void 0,l=!1}}catch(e){throw await(i?.handleChainError(e)),e}await(i?.handleChainEnd(P(o,"output")))}getGraph(e){const t=new v.Graph;let r=null;return this.steps.forEach((n,a)=>{const i=n.getGraph(e);0!==a&&i.trimFirstNode(),a!==this.steps.length-1&&i.trimLastNode(),t.extend(i);const s=i.firstNode();if(!s)throw new Error(`Runnable ${n} has no first node`);r&&t.addEdge(r,s),r=i.lastNode()}),t}pipe(e){return I.isRunnableSequence(e)?new I({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new I({first:this.first,middle:[...this.middle,this.last],last:x(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&O.isRunnable(e)}static from([e,...t],r){return new I({first:x(e),middle:t.slice(0,-1).map(x),last:x(t[t.length-1]),name:r})}}t.RunnableSequence=I;class k extends O{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,r]of Object.entries(e.steps))this.steps[t]=x(r)}static from(e){return new k({steps:e})}async invoke(e,t){const r=(0,m.ensureConfig)(t),n=await(0,m.getCallbackManagerForConfig)(r),a=await(n?.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r?.runName));delete r.runId;const i={};try{const n=Object.entries(this.steps).map(async([t,n])=>{i[t]=await n.invoke(e,(0,m.patchConfig)(r,{callbacks:a?.getChild(`map:key:${t}`)}))});await(0,p.raceWithSignal)(Promise.all(n),t?.signal)}catch(e){throw await(a?.handleChainError(e)),e}return await(a?.handleChainEnd(i)),i}async*_transform(e,t,r){const n={...this.steps},a=(0,u.atee)(e,Object.keys(n).length),i=new Map(Object.entries(n).map(([e,n],i)=>{const s=n.transform(a[i],(0,m.patchConfig)(r,{callbacks:t?.getChild(`map:key:${e}`)}));return[e,s.next().then(t=>({key:e,gen:s,result:t}))]}));for(;i.size;){const e=Promise.race(i.values()),{key:t,result:n,gen:a}=await(0,p.raceWithSignal)(e,r?.signal);i.delete(t),n.done||(yield{[t]:n.value},i.set(t,a.next().then(e=>({key:t,gen:a,result:e}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}}t.RunnableMap=k;class T extends O{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!(0,o.isTraceableFunction)(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){const[r]=this._getOptionsList(t??{},1),n=await(0,m.getCallbackManagerForConfig)(r),a=this.func((0,m.patchConfig)(r,{callbacks:n}),e);return(0,p.raceWithSignal)(a,r?.signal)}async*_streamIterator(e,t){const[r]=this._getOptionsList(t??{},1),n=await this.invoke(e,t);if((0,_.isAsyncIterable)(n))for await(const e of n)r?.signal?.throwIfAborted(),yield e;else if((0,_.isIterator)(n))for(;;){r?.signal?.throwIfAborted();const e=n.next();if(e.done)break;yield e.value}else yield n}static from(e){return new T({func:e})}}t.RunnableTraceable=T;class j extends O{static lc_name(){return"RunnableLambda"}constructor(e){if((0,o.isTraceableFunction)(e.func))return T.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),function(e){if((0,o.isTraceableFunction)(e))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}(e.func),this.func=e.func}static from(e){return new j({func:e})}async _invoke(e,t,r){return new Promise((n,a)=>{const i=(0,m.patchConfig)(t,{callbacks:r?.getChild(),recursionLimit:(t?.recursionLimit??m.DEFAULT_RECURSION_LIMIT)-1});y.AsyncLocalStorageProviderSingleton.runWithConfig(i,async()=>{try{let r=await this.func(e,{...i,config:i});if(r&&O.isRunnable(r)){if(0===t?.recursionLimit)throw new Error("Recursion limit reached.");r=await r.invoke(e,{...i,recursionLimit:(i.recursionLimit??m.DEFAULT_RECURSION_LIMIT)-1})}else if((0,_.isAsyncIterable)(r)){let e;for await(const n of(0,_.consumeAsyncIterableInContext)(i,r))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=(0,u.concat)(e,n)}catch(t){e=n}r=e}else if((0,_.isIterableIterator)(r)){let e;for(const n of(0,_.consumeIteratorInContext)(i,r))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=(0,u.concat)(e,n)}catch(t){e=n}r=e}n(r)}catch(e){a(e)}})})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async*_transform(e,t,r){let n;for await(const t of e)if(void 0===n)n=t;else try{n=(0,u.concat)(n,t)}catch(e){n=t}const a=(0,m.patchConfig)(r,{callbacks:t?.getChild(),recursionLimit:(r?.recursionLimit??m.DEFAULT_RECURSION_LIMIT)-1}),i=await new Promise((e,t)=>{y.AsyncLocalStorageProviderSingleton.runWithConfig(a,async()=>{try{const t=await this.func(n,{...a,config:a});e(t)}catch(e){t(e)}})});if(i&&O.isRunnable(i)){if(0===r?.recursionLimit)throw new Error("Recursion limit reached.");const e=await i.stream(n,a);for await(const t of e)yield t}else if((0,_.isAsyncIterable)(i))for await(const e of(0,_.consumeAsyncIterableInContext)(a,i))r?.signal?.throwIfAborted(),yield e;else if((0,_.isIterableIterator)(i))for(const e of(0,_.consumeIteratorInContext)(a,i))r?.signal?.throwIfAborted(),yield e;else yield i}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}}t.RunnableLambda=j,t.RunnableParallel=class extends k{};class C extends O{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const r=(0,m.ensureConfig)(t),n=await(0,m.getCallbackManagerForConfig)(t),{runId:a,...i}=r,s=await(n?.handleChainStart(this.toJSON(),P(e,"input"),a,void 0,void 0,void 0,i?.runName));let o;for(const t of this.runnables()){r?.signal?.throwIfAborted();try{const r=await t.invoke(e,(0,m.patchConfig)(i,{callbacks:s?.getChild()}));return await(s?.handleChainEnd(P(r,"output"))),r}catch(e){void 0===o&&(o=e)}}if(void 0===o)throw new Error("No error stored at end of fallback.");throw await(s?.handleChainError(o)),o}async*_streamIterator(e,t){const r=(0,m.ensureConfig)(t),n=await(0,m.getCallbackManagerForConfig)(t),{runId:a,...i}=r,s=await(n?.handleChainStart(this.toJSON(),P(e,"input"),a,void 0,void 0,void 0,i?.runName));let o,l,c;for(const t of this.runnables()){r?.signal?.throwIfAborted();const n=(0,m.patchConfig)(i,{callbacks:s?.getChild()});try{l=await t.stream(e,n);break}catch(e){void 0===o&&(o=e)}}if(void 0===l){const e=o??new Error("No error stored at end of fallback.");throw await(s?.handleChainError(e)),e}try{for await(const e of l){yield e;try{c=void 0===c?c:(0,u.concat)(c,e)}catch(e){c=void 0}}}catch(e){throw await(s?.handleChainError(e)),e}await(s?.handleChainEnd(P(c,"output")))}async batch(e,t,r){if(r?.returnExceptions)throw new Error("Not implemented.");const n=this._getOptionsList(t??{},e.length),a=await Promise.all(n.map(e=>(0,m.getCallbackManagerForConfig)(e))),i=await Promise.all(a.map(async(t,r)=>{const a=await(t?.handleChainStart(this.toJSON(),P(e[r],"input"),n[r].runId,void 0,void 0,void 0,n[r].runName));return delete n[r].runId,a}));let s;for(const t of this.runnables()){n[0].signal?.throwIfAborted();try{const a=await t.batch(e,i.map((e,t)=>(0,m.patchConfig)(n[t],{callbacks:e?.getChild()})),r);return await Promise.all(i.map((e,t)=>e?.handleChainEnd(P(a[t],"output")))),a}catch(e){void 0===s&&(s=e)}}if(!s)throw new Error("No error stored at end of fallbacks.");throw await Promise.all(i.map(e=>e?.handleChainError(s))),s}}function x(e){if("function"==typeof e)return new j({func:e});if(O.isRunnable(e))return e;if(Array.isArray(e)||"object"!=typeof e)throw new Error("Expected a Runnable, function or object.\nInstead got an unsupported type.");{const t={};for(const[r,n]of Object.entries(e))t[r]=x(n);return new k({steps:t})}}t.RunnableWithFallbacks=C,t._coerceToRunnable=x;class N extends O{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof k&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const r=await this.mapper.invoke(e,t);return{...e,...r}}async*_transform(e,t,r){const n=this.mapper.getStepsKeys(),[a,i]=(0,u.atee)(e),s=this.mapper.transform(i,(0,m.patchConfig)(r,{callbacks:t?.getChild()})),o=s.next();for await(const e of a){if("object"!=typeof e||Array.isArray(e))throw new Error("RunnableAssign can only be used with objects as input, got "+typeof e);const t=Object.fromEntries(Object.entries(e).filter(([e])=>!n.includes(e)));Object.keys(t).length>0&&(yield t)}yield(await o).value;for await(const e of s)yield e}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}}t.RunnableAssign=N;class $ extends O{static lc_name(){return"RunnablePick"}constructor(e){("string"==typeof e||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if("string"==typeof this.keys)return e[this.keys];{const t=this.keys.map(t=>[t,e[t]]).filter(e=>void 0!==e[1]);return 0===t.length?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const e=await this._pick(t);void 0!==e&&(yield e)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=(0,m.ensureConfig)(t),n=new u.AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,u.IterableReadableStream.fromAsyncGenerator(n)}}t.RunnablePick=$;class R extends S{constructor(e){super({bound:I.from([j.from(async e=>{let t;if((0,w._isToolCall)(e))try{t=await this.schema.parseAsync(e.args)}catch(t){throw new w.ToolInputParsingException("Received tool input did not match expected schema",JSON.stringify(e.args))}else t=e;return t}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name}),config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function M(e,t){const r=t.name??e.getName(),n=t.description??t.schema?.description;return t.schema.constructor===a.z.ZodString?new R({name:r,description:n,schema:a.z.object({input:a.z.string()}).transform(e=>e.input),bound:e}):new R({name:r,description:n,schema:t.schema,bound:e})}t.RunnableToolLike=R,t.convertRunnableToTool=M},48334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retryPolicy=function(e,t={maxRetries:s.DEFAULT_RETRY_POLICY_COUNT}){const r=t.logger||o;return{name:l,async sendRequest(i,o){var l,c;let d,u,p=-1;e:for(;;){p+=1,d=void 0,u=void 0;try{r.info(`Retry ${p}: Attempting to send request`,i.requestId),d=await o(i),r.info(`Retry ${p}: Received a response from request`,i.requestId)}catch(e){if(r.error(`Retry ${p}: Received an error from request`,i.requestId),u=e,!e||"RestError"!==u.name)throw e;d=u.response}if(null===(l=i.abortSignal)||void 0===l?void 0:l.aborted)throw r.error(`Retry ${p}: Request aborted.`),new a.AbortError;if(p>=(null!==(c=t.maxRetries)&&void 0!==c?c:s.DEFAULT_RETRY_POLICY_COUNT)){if(r.info(`Retry ${p}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),u)throw u;if(d)return d;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${p}: Processing ${e.length} retry strategies.`);t:for(const t of e){const e=t.logger||r;e.info(`Retry ${p}: Processing retry strategy ${t.name}.`);const a=t.retry({retryCount:p,response:d,responseError:u});if(a.skipStrategy){e.info(`Retry ${p}: Skipped.`);continue t}const{errorToThrow:s,retryAfterInMs:o,redirectTo:l}=a;if(s)throw e.error(`Retry ${p}: Retry strategy ${t.name} throws error:`,s),s;if(o||0===o){e.info(`Retry ${p}: Retry strategy ${t.name} retries after ${o}`),await(0,n.delay)(o,void 0,{abortSignal:i.abortSignal});continue e}if(l){e.info(`Retry ${p}: Retry strategy ${t.name} redirects to ${l}`),i.url=l;continue e}}if(u)throw r.info("None of the retry strategies could work with the received error. Throwing it."),u;if(d)return r.info("None of the retry strategies could work with the received response. Returning it."),d}}}};const n=r(22253),a=r(35001),i=r(18118),s=r(37146),o=(0,i.createClientLogger)("ts-http-runtime retryPolicy"),l="retryPolicy"},48493:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.agentPolicyName=void 0,t.agentPolicy=function(e){return{name:t.agentPolicyName,sendRequest:async(t,r)=>(t.agent||(t.agent=e),r(t))}},t.agentPolicyName="agentPolicy"},48585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODEL_NONSTREAMING_TOKENS=void 0,t.MODEL_NONSTREAMING_TOKENS={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192}},48760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMapDef=void 0;const n=r(55767),a=r(89629),i=r(59160);t.parseMapDef=function(e,t){return"record"===t.mapStrategy?(0,a.parseRecordDef)(e,t):{type:"array",maxItems:125,items:{type:"array",items:[(0,n.parseDef)(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||(0,i.parseAnyDef)(t),(0,n.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||(0,i.parseAnyDef)(t)],minItems:2,maxItems:2}}}},48899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LLM=t.BaseLLM=void 0;const n=r(5104),a=r(46613),i=r(16087),s=r(32656),o=r(28223),l=r(50797),c=r(71043);class d extends s.BaseLanguageModel{constructor({concurrency:e,...t}){super(e?{maxConcurrency:e,...t}:t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}async invoke(e,t){const r=d._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t?.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async*_streamIterator(e,t){if(this._streamResponseChunks===d.prototype._streamResponseChunks)yield this.invoke(e,t);else{const r=d._convertInputToPromptValue(e),[n,s]=this._separateRunnableConfigFromCallOptionsCompat(t),o=await i.CallbackManager.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),l={options:s,invocation_params:this?.invocationParams(s),batch_size:1},c=await(o?.handleLLMStart(this.toJSON(),[r.toString()],n.runId,void 0,l,void 0,void 0,n.runName));let u=new a.GenerationChunk({text:""});try{for await(const e of this._streamResponseChunks(r.toString(),s,c?.[0]))u=u?u.concat(e):e,"string"==typeof e.text&&(yield e.text)}catch(e){throw await Promise.all((c??[]).map(t=>t?.handleLLMError(e))),e}await Promise.all((c??[]).map(e=>e?.handleLLMEnd({generations:[[u]]})))}}async generatePrompt(e,t,r){const n=e.map(e=>e.toString());return this.generate(n,t,r)}invocationParams(e){return{}}_flattenLLMResult(e){const t=[];for(let r=0;r<e.generations.length;r+=1){const n=e.generations[r];if(0===r)t.push({generations:[n],llmOutput:e.llmOutput});else{const r=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;t.push({generations:[n],llmOutput:r})}}return t}async _generateUncached(e,t,r){const n=await i.CallbackManager.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),s={options:t,invocation_params:this?.invocationParams(t),batch_size:e.length},u=await(n?.handleLLMStart(this.toJSON(),e,r.runId,void 0,s,void 0,void 0,r?.runName));let p;if(u?.[0].handlers.find(e=>(0,o.isStreamEventsHandler)(e)||(0,l.isLogStreamHandler)(e))&&1===e.length&&this._streamResponseChunks!==d.prototype._streamResponseChunks)try{const r=await this._streamResponseChunks(e[0],t,u?.[0]);let n;for await(const e of r)n=void 0===n?e:(0,c.concat)(n,e);if(void 0===n)throw new Error("Received empty response from chat model call.");p={generations:[[n]],llmOutput:{}},await(u?.[0].handleLLMEnd(p))}catch(e){throw await(u?.[0].handleLLMError(e)),e}else{try{p=await this._generate(e,t,u?.[0])}catch(e){throw await Promise.all((u??[]).map(t=>t?.handleLLMError(e))),e}const r=this._flattenLLMResult(p);await Promise.all((u??[]).map((e,t)=>e?.handleLLMEnd(r[t])))}const m=u?.map(e=>e.runId)||void 0;return Object.defineProperty(p,a.RUN_KEY,{value:m?{runIds:m}:void 0,configurable:!0}),p}async _generateCached({prompts:e,cache:t,llmStringKey:r,parsedOptions:n,handledOptions:s,runId:o}){const l=await i.CallbackManager.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),c={options:n,invocation_params:this?.invocationParams(n),batch_size:e.length,cached:!0},d=await(l?.handleLLMStart(this.toJSON(),e,o,void 0,c,void 0,void 0,s?.runName)),u=[],p=(await Promise.allSettled(e.map(async(e,n)=>{const a=await t.lookup(e,r);return null==a&&u.push(n),a}))).map((e,t)=>({result:e,runManager:d?.[t]})).filter(({result:e})=>"fulfilled"===e.status&&null!=e.value||"rejected"===e.status),m=[];await Promise.all(p.map(async({result:e,runManager:t},r)=>{if("fulfilled"===e.status){const n=e.value;return m[r]=n,n.length&&await(t?.handleLLMNewToken(n[0].text)),t?.handleLLMEnd({generations:[n]})}return await(t?.handleLLMError(e.reason)),Promise.reject(e.reason)}));const h={generations:m,missingPromptIndices:u};return Object.defineProperty(h,a.RUN_KEY,{value:d?{runIds:d?.map(e=>e.runId)}:void 0,configurable:!0}),h}async generate(e,t,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let n;n=Array.isArray(t)?{stop:t}:t;const[a,i]=this._separateRunnableConfigFromCallOptionsCompat(n);if(a.callbacks=a.callbacks??r,!this.cache)return this._generateUncached(e,i,a);const{cache:s}=this,o=this._getSerializedCacheKeyParametersForCall(i),{generations:l,missingPromptIndices:c}=await this._generateCached({prompts:e,cache:s,llmStringKey:o,parsedOptions:i,handledOptions:a,runId:a.runId});let d={};if(c.length>0){const t=await this._generateUncached(c.map(t=>e[t]),i,a);await Promise.all(t.generations.map(async(t,r)=>{const n=c[r];return l[n]=t,s.update(e[n],o,t)})),d=t.llmOutput??{}}return{generations:l,llmOutput:d}}async call(e,t,r){const{generations:n}=await this.generate([e],t,r);return n[0][0].text}async predict(e,t,r){return this.call(e,t,r)}async predictMessages(e,t,r){const a=(0,n.getBufferString)(e),i=await this.call(a,t,r);return new n.AIMessage(i)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}}t.BaseLLM=d,t.LLM=class extends d{async _generate(e,t,r){return{generations:await Promise.all(e.map((e,n)=>this._call(e,{...t,promptIndex:n},r).then(e=>[{text:e}])))}}}},48949:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RouterRunnable=void 0;const n=r(10969),a=r(5272);class i extends n.Runnable{static lc_name(){return"RouterRunnable"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnables=e.runnables}async invoke(e,t){const{key:r,input:n}=e,i=this.runnables[r];if(void 0===i)throw new Error(`No runnable associated with key "${r}".`);return i.invoke(n,(0,a.ensureConfig)(t))}async batch(e,t,r){const n=e.map(e=>e.key),a=e.map(e=>e.input);if(void 0!==n.find(e=>void 0===this.runnables[e]))throw new Error("One or more keys do not have a corresponding runnable.");const i=n.map(e=>this.runnables[e]),s=this._getOptionsList(t??{},e.length),o=s[0]?.maxConcurrency??r?.maxConcurrency,l=o&&o>0?o:e.length,c=[];for(let e=0;e<a.length;e+=l){const t=a.slice(e,e+l).map((e,t)=>i[t].invoke(e,s[t])),r=await Promise.all(t);c.push(r)}return c.flat()}async stream(e,t){const{key:r,input:n}=e,a=this.runnables[r];if(void 0===a)throw new Error(`No runnable associated with key "${r}".`);return a.stream(n,t)}}t.RouterRunnable=i},49140:e=>{"use strict";e.exports=require("constants")},49324:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MAX:()=>n,NIL:()=>a,parse:()=>o,stringify:()=>d,v1:()=>_,v1ToV6:()=>w,v3:()=>O,v4:()=>E,v5:()=>A,v6:()=>I,v6ToV1:()=>k,v7:()=>x,validate:()=>s,version:()=>N});const n="ffffffff-ffff-ffff-ffff-ffffffffffff",a="00000000-0000-0000-0000-000000000000",i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,s=function(e){return"string"==typeof e&&i.test(e)},o=function(e){if(!s(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function c(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}const d=function(e,t=0){const r=c(e,t);if(!s(r))throw TypeError("Stringified UUID is invalid");return r};var u=r(77598),p=r.n(u);const m=new Uint8Array(256);let h,f,g=m.length;function y(){return g>m.length-16&&(p().randomFillSync(m),g=0),m.slice(g,g+=16)}let v=0,b=0;const _=function(e,t,r){let n=t&&r||0;const a=t||new Array(16);let i=(e=e||{}).node,s=e.clockseq;if(e._v6||(i||(i=h),null==s&&(s=f)),null==i||null==s){const t=e.random||(e.rng||y)();null==i&&(i=[t[0],t[1],t[2],t[3],t[4],t[5]],h||e._v6||(i[0]|=1,h=i)),null==s&&(s=16383&(t[6]<<8|t[7]),void 0!==f||e._v6||(f=s))}let o=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:b+1;const d=o-v+(l-b)/1e4;if(d<0&&void 0===e.clockseq&&(s=s+1&16383),(d<0||o>v)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=o,b=l,f=s,o+=122192928e5;const u=(1e4*(268435455&o)+l)%4294967296;a[n++]=u>>>24&255,a[n++]=u>>>16&255,a[n++]=u>>>8&255,a[n++]=255&u;const p=o/4294967296*1e4&268435455;a[n++]=p>>>8&255,a[n++]=255&p,a[n++]=p>>>24&15|16,a[n++]=p>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(let e=0;e<6;++e)a[n+e]=i[e];return t||c(a)};function w(e){const t=(r="string"==typeof e?o(e):e,Uint8Array.of((15&r[6])<<4|r[7]>>4&15,(15&r[7])<<4|(240&r[4])>>4,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,(15&r[1])<<4|(240&r[2])>>4,96|15&r[2],r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?c(t):t}function P(e,t,r){function n(e,n,a,i){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=o(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(n),l.set(e,n.length),l=r(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,a){i=i||0;for(let e=0;e<16;++e)a[i+e]=l[e];return a}return c(l)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const O=P("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),p().createHash("md5").update(e).digest()}),S={randomUUID:p().randomUUID},E=function(e,t,r){if(S.randomUUID&&!t&&!e)return S.randomUUID();const n=(e=e||{}).random||(e.rng||y)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return c(n)},A=P("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),p().createHash("sha1").update(e).digest()});function I(e={},t,r=0){let n=_({...e,_v6:!0},new Uint8Array(16));if(n=w(n),t){for(let e=0;e<16;e++)t[r+e]=n[e];return t}return c(n)}function k(e){const t=(r="string"==typeof e?o(e):e,Uint8Array.of((15&r[3])<<4|r[4]>>4&15,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|15&r[6],r[7],(15&r[1])<<4|(240&r[2])>>4,(15&r[2])<<4|(240&r[3])>>4,16|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?c(t):t}let T=null,j=null,C=0;const x=function(e,t,r){e=e||{};let n=t&&r||0;const a=t||new Uint8Array(16),i=e.random||(e.rng||y)(),s=void 0!==e.msecs?e.msecs:Date.now();let o=void 0!==e.seq?e.seq:null,l=j,d=T;return s>C&&void 0===e.msecs&&(C=s,null!==o&&(l=null,d=null)),null!==o&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,d=524287&o),null!==l&&null!==d||(l=127&i[6],l=l<<8|i[7],d=63&i[8],d=d<<8|i[9],d=d<<5|i[10]>>>3),s+1e4>C&&null===o?++d>524287&&(d=0,++l>4095&&(l=0,C++)):C=s,j=l,T=d,a[n++]=C/1099511627776&255,a[n++]=C/4294967296&255,a[n++]=C/16777216&255,a[n++]=C/65536&255,a[n++]=C/256&255,a[n++]=255&C,a[n++]=l>>>4&15|112,a[n++]=255&l,a[n++]=d>>>13&63|128,a[n++]=d>>>5&255,a[n++]=d<<3&255|7&i[10],a[n++]=i[11],a[n++]=i[12],a[n++]=i[13],a[n++]=i[14],a[n++]=i[15],t||c(a)},N=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},49418:(e,t,r)=>{"use strict";e=r.nmd(e);const n=(e=0)=>t=>`[${38+e};5;${t}m`,a=(e=0)=>(t,r,n)=>`[${38+e};2;${t};${r};${n}m`;Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[r,n]of Object.entries(t)){for(const[r,a]of Object.entries(n))t[r]={open:`[${a[0]}m`,close:`[${a[1]}m`},n[r]=t[r],e.set(a[0],a[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",t.color.ansi256=n(),t.color.ansi16m=a(),t.bgColor.ansi256=n(10),t.bgColor.ansi16m=a(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:r}=t.groups;3===r.length&&(r=r.split("").map(e=>e+e).join(""));const n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},49564:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnthropicToolsOutputParser=void 0,t.extractToolCalls=s;const n=r(58618),a=r(60845);class i extends n.BaseLLMOutputParser{static lc_name(){return"AnthropicToolsOutputParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","anthropic","output_parsers"]}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){let t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch(t){throw new n.OutputParserException(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.message)}`,e)}else t=e;if(void 0===this.zodSchema)return t;const r=await(0,a.interopSafeParseAsync)(this.zodSchema,t);if(r.success)return r.data;throw new n.OutputParserException(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(r.error.issues)}`,JSON.stringify(t,null,2))}async parseResult(e){const t=e.flatMap(e=>{const{message:t}=e;return Array.isArray(t.content)?s(t.content)[0]:[]});if(void 0===t[0])throw new Error("No parseable tool calls provided to AnthropicToolsOutputParser.");const[r]=t;return await this._validateResult(r.args)}}function s(e){const t=[];for(const r of e)"tool_use"===r.type&&t.push({name:r.name,args:r.input,id:r.id,type:"tool_call"});return t}t.AnthropicToolsOutputParser=i},49942:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RAGProcessor=t.LocalAIProvider=t.QwenProvider=t.AnthropicProvider=t.OpenAIProvider=void 0;const a=n(r(17645));class i{constructor(e,t="gpt-3.5-turbo",r){this.apiKey=e,this.model=t,this.baseURL=r}async generateResponse(e,t,r){const n=[{role:"system",content:"You are a helpful assistant that answers questions based on the provided context. Always cite specific files and code sections when relevant."},{role:"user",content:`Context:\n${t.join("\n\n---\n\n")}\n\nQuestion: ${e}`}],i={model:this.model,messages:n,temperature:r.temperature||.7,max_tokens:r.maxTokens||2e3,stream:!1},s=this.baseURL?`${this.baseURL}/chat/completions`:"https://api.openai.com/v1/chat/completions",o=await(0,a.default)(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(i)});if(!o.ok){const e=await o.text();throw new Error(`OpenAI API error: ${o.status} - ${e}`)}const l=await o.json();return l.choices[0]?.message?.content||"No response generated."}countTokens(e){return Math.ceil(e.length/4)}}t.OpenAIProvider=i;class s{constructor(e,t="claude-3-sonnet-20240229"){this.apiKey=e,this.model=t}async generateResponse(e,t,r){const n=`Context:\n${t.join("\n\n---\n\n")}\n\nQuestion: ${e}`,i={model:this.model,max_tokens:r.maxTokens||2e3,temperature:r.temperature||.7,system:"You are a helpful assistant that answers questions based on the provided context. Always cite specific files and code sections when relevant.",messages:[{role:"user",content:n}]},s=await(0,a.default)("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify(i)});if(!s.ok){const e=await s.text();throw new Error(`Anthropic API error: ${s.status} - ${e}`)}const o=await s.json();return o.content[0]?.text||"No response generated."}countTokens(e){return Math.ceil(e.length/4)}}t.AnthropicProvider=s;class o{constructor(e,t="qwen-turbo",r="https://dashscope.aliyuncs.com/compatible-mode/v1",n){this.apiKey=e,this.model=t,this.baseURL=r,this.workspaceId=n}async generateResponse(e,t,r){const n=[{role:"system",content:"You are a helpful assistant that answers questions based on the provided context. Always cite specific files and code sections when relevant."},{role:"user",content:`Context:\n${t.join("\n\n---\n\n")}\n\nQuestion: ${e}`}],i={model:this.model,messages:n,temperature:r.temperature||.7,max_tokens:r.maxTokens||2e3,stream:!1,enable_thinking:!1},s={"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`};this.workspaceId&&(s["X-DashScope-WorkSpace"]=this.workspaceId);const o=await(0,a.default)(`${this.baseURL}/chat/completions`,{method:"POST",headers:s,body:JSON.stringify(i)});if(!o.ok){const e=await o.text();throw new Error(`Qwen API error: ${o.status} - ${e}`)}const l=await o.json();return l.choices[0]?.message?.content||"No response generated."}countTokens(e){return Math.ceil(e.length/4)}}t.QwenProvider=o;class l{constructor(e,t="local-model"){this.endpoint=e,this.model=t}async generateResponse(e,t,r){const n={model:this.model,prompt:`Context:\n${t.join("\n\n---\n\n")}\n\nQuestion: ${e}`,temperature:r.temperature||.7,max_tokens:r.maxTokens||2e3},i=await(0,a.default)(`${this.endpoint}/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw new Error(`Local AI API error: ${i.status}`);return(await i.json()).response||"No response generated."}countTokens(e){return Math.ceil(e.length/4)}}t.LocalAIProvider=l,t.RAGProcessor=class{constructor(e,t){this.documents=[],console.log("RAGProcessor constructor called with config:",{provider:t.provider,hasApiKey:!!t.apiKey,model:t.model,baseUrl:t.baseUrl,workspaceId:t.workspaceId}),this.vectorRetriever=e,this.config=t,console.log("Creating AI provider for:",t.provider),this.aiProvider=this.createAIProvider(),console.log("RAGProcessor constructor completed successfully")}createAIProvider(){switch(console.log("createAIProvider called with provider:",this.config.provider),console.log("Available providers: openai, anthropic, qwen, ollama"),this.config.provider){case"openai":return console.log("Creating OpenAI provider"),new i(this.config.apiKey,this.config.model,this.config.baseUrl);case"anthropic":return console.log("Creating Anthropic provider"),new s(this.config.apiKey,this.config.model);case"qwen":return console.log("Creating Qwen provider with config:",{apiKey:this.config.apiKey?"present":"missing",model:this.config.model,baseUrl:this.config.baseUrl,workspaceId:this.config.workspaceId}),new o(this.config.apiKey,this.config.model,this.config.baseUrl,this.config.workspaceId);case"ollama":return console.log("Creating Ollama provider"),new l(this.config.baseUrl||"http://localhost:11434",this.config.model);default:throw console.error("Unsupported AI provider:",this.config.provider),console.error("Config object:",this.config),new Error(`Unsupported AI provider: ${this.config.provider}`)}}async initialize(e,t){this.documents=e,t?.(0,"Initializing vector retriever..."),await this.vectorRetriever.initialize(e),t?.(20,"Adding documents to vector database...");for(let r=0;r<e.length;r+=10){const n=e.slice(r,r+10),a=20+r/e.length*60;t?.(a,`Processing documents ${r+1}-${Math.min(r+10,e.length)}...`);for(const e of n)await this.vectorRetriever.addDocument(e)}t?.(80,"Finalizing vector database...");const r=this.vectorRetriever.getStats();t?.(100,`Initialized with ${r.totalDocuments} documents`)}async query(e,t){const r=Date.now();t?.(0,"Starting RAG query..."),t?.(20,"Retrieving relevant documents...");const n=await this.retrieveRelevantDocuments(e);if(0===n.length)return{answer:"I could not find any relevant information in the codebase to answer your question.",sources:[],confidence:0,processingTime:Date.now()-r,metadata:{model:this.config.model,temperature:.7,maxTokens:2e3,retrievedChunks:0}};t?.(60,"Generating AI response...");const a=this.prepareContext(n,e),i=await this.generateAnswer(e.question,a);t?.(90,"Finalizing response...");const s=this.calculateConfidence(n,e),o=Date.now()-r;return t?.(100,`Query completed in ${o}ms`),{answer:i,sources:n,confidence:s,processingTime:o,metadata:{model:this.config.model,temperature:.7,maxTokens:2e3,retrievedChunks:n.length,totalTokensUsed:this.aiProvider.countTokens(a.join(" ")+e.question+i)}}}async retrieveRelevantDocuments(e){const t=e.maxResults||5,r=e.similarityThreshold||.3;return(await this.vectorRetriever.retrieve(e.question,t)).documents.filter(e=>(e.relevanceScore||0)>=r).map(e=>({id:e.id,content:e.content,similarity:e.relevanceScore||0,metadata:{filePath:e.path||"",language:e.metadata?.language,fileType:e.type||"unknown",chunkIndex:e.metadata?.chunkIndex,totalChunks:e.metadata?.totalChunks,startLine:e.metadata?.startLine,endLine:e.metadata?.endLine}}))}prepareContext(e,t){const r=[],n=e.sort((e,t)=>t.similarity-e.similarity);for(const e of n){let t=`File: ${e.metadata.filePath}`;e.metadata.startLine&&e.metadata.endLine&&(t+=` (Lines ${e.metadata.startLine}-${e.metadata.endLine})`),e.metadata.language&&(t+=` [${e.metadata.language}]`),t+=`\nSimilarity: ${(100*e.similarity).toFixed(1)}%`,t+=`\nContent:\n${e.content}`,r.push(t)}return t.context&&r.unshift(`Additional Context:\n${t.context}`),r}async generateAnswer(e,t){const r={temperature:.7,maxTokens:2e3};try{return await this.aiProvider.generateResponse(e,t,r)}catch(e){return console.error("AI generation error:",e),`I encountered an error while generating the response: ${e instanceof Error?e.message:"Unknown error"}. However, I found the following relevant information:\n\n${t.slice(0,2).join("\n\n---\n\n")}`}}calculateConfidence(e,t){if(0===e.length)return 0;const r=Math.max(...e.map(e=>e.similarity)),n=Math.min(e.length/3,1);return Math.min(r*n,1)}async addDocument(e){await this.vectorRetriever.addDocument(e),this.documents.push(e)}async addDocuments(e,t){for(let r=0;r<e.length;r+=10){const n=e.slice(r,r+10),a=r/e.length*100;t?.(a,`Adding documents ${r+1}-${Math.min(r+10,e.length)}...`);for(const e of n)await this.addDocument(e)}t?.(100,`Added ${e.length} documents successfully`)}async reset(){await this.vectorRetriever.reset(),this.documents=[]}getStats(){return{...this.vectorRetriever.getStats(),totalDocuments:this.documents.length,aiProvider:this.config.provider,aiModel:this.config.model}}updateAIConfig(e){this.config=e,this.aiProvider=this.createAIProvider()}async testAIConnection(){try{const e=await this.aiProvider.generateResponse('Hello, please respond with "Connection successful"',[],{temperature:0,maxTokens:50});return e.toLowerCase().includes("connection successful")||e.length>0}catch(e){return console.error("AI connection test failed:",e),!1}}async getSimilarDocuments(e,t=10,r=.3){return(await this.retrieveRelevantDocuments({question:e,maxResults:t,similarityThreshold:r})).map(e=>({document:{id:e.id,title:e.metadata.filePath,content:e.content,path:e.metadata.filePath,type:e.metadata.fileType,metadata:e.metadata},similarity:e.similarity}))}explainRetrieval(e,t){if(0===t.length)return`No relevant documents found for query: "${e}"`;let r=`Found ${t.length} relevant documents for query: "${e}"\n\n`;return t.forEach((e,t)=>{r+=`${t+1}. ${e.metadata.filePath} (${(100*e.similarity).toFixed(1)}% similarity)\n`,e.metadata.startLine&&e.metadata.endLine&&(r+=`   Lines ${e.metadata.startLine}-${e.metadata.endLine}\n`),r+=`   Preview: ${e.content.substring(0,100)}...\n\n`}),r}}},50075:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.$ZodFunction=void 0,t.function=function(e){return new d({type:"function",input:Array.isArray(e?.input)?(0,s._tuple)(l.$ZodTuple,e?.input):e?.input??(0,s._array)(l.$ZodArray,(0,s._unknown)(l.$ZodUnknown)),output:e?.output??(0,s._unknown)(l.$ZodUnknown)})};const s=r(52405),o=r(64084),l=i(r(95341)),c=r(95341);class d{constructor(e){this._def=e,this.def=e}implement(e){if("function"!=typeof e)throw new Error("implement() must be called with a function");const t=(...r)=>{const n=this._def.input?(0,o.parse)(this._def.input,r,void 0,{callee:t}):r;if(!Array.isArray(n))throw new Error("Invalid arguments schema: not an array or tuple schema.");const a=e(...n);return this._def.output?(0,o.parse)(this._def.output,a,void 0,{callee:t}):a};return t}implementAsync(e){if("function"!=typeof e)throw new Error("implement() must be called with a function");const t=async(...r)=>{const n=this._def.input?await(0,o.parseAsync)(this._def.input,r,void 0,{callee:t}):r;if(!Array.isArray(n))throw new Error("Invalid arguments schema: not an array or tuple schema.");const a=await e(...n);return this._def.output?(0,o.parseAsync)(this._def.output,a,void 0,{callee:t}):a};return t}input(...e){const t=this.constructor;return Array.isArray(e[0])?new t({type:"function",input:new c.$ZodTuple({type:"tuple",items:e[0],rest:e[1]}),output:this._def.output}):new t({type:"function",input:e[0],output:this._def.output})}output(e){return new(0,this.constructor)({type:"function",input:this._def.input,output:e})}}t.$ZodFunction=d},50096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ucs2length=function(e){let t,r=0,n=e.length,a=0;for(;a<n;)r++,t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<n&&(t=e.charCodeAt(a),56320==(64512&t)&&a++);return r}},50168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=function(e,t={}){let r=e;const l=function(e=c){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||c.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=a.default_format;if(void 0!==e.format){if(!(0,n.has)(a.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}const o=a.formatters[r];let l,d=c.filter;if(("function"==typeof e.filter||(0,i.isArray)(e.filter))&&(d=e.filter),l=e.arrayFormat&&e.arrayFormat in s?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":c.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=void 0===e.allowDots?1==!!e.encodeDotInKeys||c.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:c.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:c.allowEmptyArrays,arrayFormat:l,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:c.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?c.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:c.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:c.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:c.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:c.encodeValuesOnly,filter:d,format:r,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:c.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:c.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:c.strictNullHandling}}(t);let d,p;"function"==typeof l.filter?(p=l.filter,r=p("",r)):(0,i.isArray)(l.filter)&&(p=l.filter,d=p);const m=[];if("object"!=typeof r||null===r)return"";const h=s[l.arrayFormat],f="comma"===h&&l.commaRoundTrip;d||(d=Object.keys(r)),l.sort&&d.sort(l.sort);const g=new WeakMap;for(let e=0;e<d.length;++e){const t=d[e];l.skipNulls&&null===r[t]||o(m,u(r[t],t,h,f,l.allowEmptyArrays,l.strictNullHandling,l.skipNulls,l.encodeDotInKeys,l.encode?l.encoder:null,l.filter,l.sort,l.allowDots,l.serializeDate,l.format,l.formatter,l.encodeValuesOnly,l.charset,g))}const y=m.join(l.delimiter);let v=!0===l.addQueryPrefix?"?":"";return l.charsetSentinel&&("iso-8859-1"===l.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),y.length>0?v+y:""};const n=r(78348),a=r(95257),i=r(15734),s={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},o=function(e,t){Array.prototype.push.apply(e,(0,i.isArray)(t)?t:[t])};let l;const c={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:n.encode,encodeValuesOnly:!1,format:a.default_format,formatter:a.default_formatter,indices:!1,serializeDate:e=>(l??(l=Function.prototype.call.bind(Date.prototype.toISOString)))(e),skipNulls:!1,strictNullHandling:!1},d={};function u(e,t,r,a,s,l,p,m,h,f,g,y,v,b,_,w,P,O){let S=e,E=O,A=0,I=!1;for(;void 0!==(E=E.get(d))&&!I;){const t=E.get(e);if(A+=1,void 0!==t){if(t===A)throw new RangeError("Cyclic object value");I=!0}void 0===E.get(d)&&(A=0)}if("function"==typeof f?S=f(t,S):S instanceof Date?S=v?.(S):"comma"===r&&(0,i.isArray)(S)&&(S=(0,n.maybe_map)(S,function(e){return e instanceof Date?v?.(e):e})),null===S){if(l)return h&&!w?h(t,c.encoder,P,"key",b):t;S=""}if("string"==typeof(k=S)||"number"==typeof k||"boolean"==typeof k||"symbol"==typeof k||"bigint"==typeof k||(0,n.is_buffer)(S)){if(h){const e=w?t:h(t,c.encoder,P,"key",b);return[_?.(e)+"="+_?.(h(S,c.encoder,P,"value",b))]}return[_?.(t)+"="+_?.(String(S))]}var k;const T=[];if(void 0===S)return T;let j;if("comma"===r&&(0,i.isArray)(S))w&&h&&(S=(0,n.maybe_map)(S,h)),j=[{value:S.length>0?S.join(",")||null:void 0}];else if((0,i.isArray)(f))j=f;else{const e=Object.keys(S);j=g?e.sort(g):e}const C=m?String(t).replace(/\./g,"%2E"):String(t),x=a&&(0,i.isArray)(S)&&1===S.length?C+"[]":C;if(s&&(0,i.isArray)(S)&&0===S.length)return x+"[]";for(let t=0;t<j.length;++t){const n=j[t],c="object"==typeof n&&void 0!==n.value?n.value:S[n];if(p&&null===c)continue;const E=y&&m?n.replace(/\./g,"%2E"):n,I=(0,i.isArray)(S)?"function"==typeof r?r(x,E):x:x+(y?"."+E:"["+E+"]");O.set(e,A);const k=new WeakMap;k.set(d,O),o(T,u(c,I,r,a,s,l,p,m,"comma"===r&&w&&(0,i.isArray)(S)?null:h,f,g,y,v,b,_,w,P,k))}return T}},50204:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkpoints=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(55595)),s=r(55595);class o extends a.APIResource{constructor(){super(...arguments),this.permissions=new i.Permissions(this._client)}}t.Checkpoints=o,o.Permissions=s.Permissions},50383:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatGenerationChunk=t.GenerationChunk=t.RUN_KEY=void 0,t.RUN_KEY="__run";class r{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new r({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}t.GenerationChunk=r;class n extends r{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new n({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}t.ChatGenerationChunk=n},50460:(e,t,r)=>{"use strict";var n,a,i,s,o,l,c,d,u,p,m,h,f;Object.defineProperty(t,"__esModule",{value:!0}),t.EventStream=void 0;const g=r(79632),y=r(89526);t.EventStream=class{constructor(){n.add(this),this.controller=new AbortController,a.set(this,void 0),i.set(this,()=>{}),s.set(this,()=>{}),o.set(this,void 0),l.set(this,()=>{}),c.set(this,()=>{}),d.set(this,{}),u.set(this,!1),p.set(this,!1),m.set(this,!1),h.set(this,!1),g.__classPrivateFieldSet(this,a,new Promise((e,t)=>{g.__classPrivateFieldSet(this,i,e,"f"),g.__classPrivateFieldSet(this,s,t,"f")}),"f"),g.__classPrivateFieldSet(this,o,new Promise((e,t)=>{g.__classPrivateFieldSet(this,l,e,"f"),g.__classPrivateFieldSet(this,c,t,"f")}),"f"),g.__classPrivateFieldGet(this,a,"f").catch(()=>{}),g.__classPrivateFieldGet(this,o,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},g.__classPrivateFieldGet(this,n,"m",f).bind(this))},0)}_connected(){this.ended||(g.__classPrivateFieldGet(this,i,"f").call(this),this._emit("connect"))}get ended(){return g.__classPrivateFieldGet(this,u,"f")}get errored(){return g.__classPrivateFieldGet(this,p,"f")}get aborted(){return g.__classPrivateFieldGet(this,m,"f")}abort(){this.controller.abort()}on(e,t){return(g.__classPrivateFieldGet(this,d,"f")[e]||(g.__classPrivateFieldGet(this,d,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=g.__classPrivateFieldGet(this,d,"f")[e];if(!r)return this;const n=r.findIndex(e=>e.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(g.__classPrivateFieldGet(this,d,"f")[e]||(g.__classPrivateFieldGet(this,d,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{g.__classPrivateFieldSet(this,h,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){g.__classPrivateFieldSet(this,h,!0,"f"),await g.__classPrivateFieldGet(this,o,"f")}_emit(e,...t){if(g.__classPrivateFieldGet(this,u,"f"))return;"end"===e&&(g.__classPrivateFieldSet(this,u,!0,"f"),g.__classPrivateFieldGet(this,l,"f").call(this));const r=g.__classPrivateFieldGet(this,d,"f")[e];if(r&&(g.__classPrivateFieldGet(this,d,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return g.__classPrivateFieldGet(this,h,"f")||r?.length||Promise.reject(e),g.__classPrivateFieldGet(this,s,"f").call(this,e),g.__classPrivateFieldGet(this,c,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];g.__classPrivateFieldGet(this,h,"f")||r?.length||Promise.reject(e),g.__classPrivateFieldGet(this,s,"f").call(this,e),g.__classPrivateFieldGet(this,c,"f").call(this,e),this._emit("end")}}_emitFinal(){}},a=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakMap,m=new WeakMap,h=new WeakMap,n=new WeakSet,f=function(e){if(g.__classPrivateFieldSet(this,p,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new y.APIUserAbortError),e instanceof y.APIUserAbortError)return g.__classPrivateFieldSet(this,m,!0,"f"),this._emit("abort",e);if(e instanceof y.OpenAIError)return this._emit("error",e);if(e instanceof Error){const t=new y.OpenAIError(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new y.OpenAIError(String(e)))}},50477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Responses=void 0;const n=r(79632),a=r(97759),i=r(46636),s=r(82040),o=n.__importStar(r(45856)),l=r(45856),c=r(262),d=r(54815);class u extends s.APIResource{constructor(){super(...arguments),this.inputItems=new o.InputItems(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&(0,a.addOutputText)(e),e))}retrieve(e,t={},r){return this._client.get(d.path`/responses/${e}`,{query:t,...r,stream:t?.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&(0,a.addOutputText)(e),e))}delete(e,t){return this._client.delete(d.path`/responses/${e}`,{...t,headers:(0,c.buildHeaders)([{Accept:"*/*"},t?.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>(0,a.parseResponse)(t,e))}stream(e,t){return i.ResponseStream.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(d.path`/responses/${e}/cancel`,t)}}t.Responses=u,u.InputItems=l.InputItems},50560:(e,t,r)=>{"use strict";const n=r(53908);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},50609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var r,a=function(e){return i.get(e)}(e);if(a){const e=function(e,t){return e.observers.get(t)}(a,t);r=e&&e.observer}else a=new s(e),i.set(e,a);if(r)return r;if(r={},a.value=(0,n._deepClone)(e),t){r.callback=t,r.next=null;var c=()=>{l(r)},d=()=>{clearTimeout(r.next),r.next=setTimeout(c)};"undefined"!=typeof window&&(window.addEventListener("mouseup",d),window.addEventListener("keyup",d),window.addEventListener("mousedown",d),window.addEventListener("keydown",d),window.addEventListener("change",d))}return r.patches=[],r.object=e,r.unobserve=()=>{l(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(a,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",d),window.removeEventListener("keyup",d),window.removeEventListener("mousedown",d),window.removeEventListener("keydown",d),window.removeEventListener("change",d))},a.observers.set(t,new o(t,r)),r},t.generate=l,t.compare=function(e,t,r=!1){var n=[];return c(e,t,n,"",r),n};const n=r(19350),a=r(37450);var i=new WeakMap;class s{constructor(e){Object.defineProperty(this,"obj",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.obj=e}}class o{constructor(e,t){Object.defineProperty(this,"callback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callback=e,this.observer=t}}function l(e,t=!1){var r=i.get(e.object);c(r.value,e.object,e.patches,"",t),e.patches.length&&(0,a.applyPatch)(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function c(e,t,r,a,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var s=(0,n._objectKeys)(t),o=(0,n._objectKeys)(e),l=!1,d=o.length-1;d>=0;d--){var u=e[m=o[d]];if(!(0,n.hasOwnProperty)(t,m)||void 0===t[m]&&void 0!==u&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&r.push({op:"test",path:a+"/"+(0,n.escapePathComponent)(m),value:(0,n._deepClone)(u)}),r.push({op:"remove",path:a+"/"+(0,n.escapePathComponent)(m)}),l=!0):(i&&r.push({op:"test",path:a,value:e}),r.push({op:"replace",path:a,value:t}));else{var p=t[m];"object"==typeof u&&null!=u&&"object"==typeof p&&null!=p&&Array.isArray(u)===Array.isArray(p)?c(u,p,r,a+"/"+(0,n.escapePathComponent)(m),i):u!==p&&(i&&r.push({op:"test",path:a+"/"+(0,n.escapePathComponent)(m),value:(0,n._deepClone)(u)}),r.push({op:"replace",path:a+"/"+(0,n.escapePathComponent)(m),value:(0,n._deepClone)(p)}))}}if(l||s.length!=o.length)for(d=0;d<s.length;d++){var m=s[d];(0,n.hasOwnProperty)(e,m)||void 0===t[m]||r.push({op:"add",path:a+"/"+(0,n.escapePathComponent)(m),value:(0,n._deepClone)(t[m])})}}}},50738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleChatModel=t.BaseChatModel=t.createChatMessageChunkEncoderStream=void 0;const n=r(90309),a=r(5104),i=r(46613),s=r(32656),o=r(16087),l=r(48307),c=r(28223),d=r(50797),u=r(71043),p=r(35478),m=r(76715);t.createChatMessageChunkEncoderStream=function(){const e=new TextEncoder;return new TransformStream({transform(t,r){r.enqueue(e.encode("string"==typeof t.content?t.content:JSON.stringify(t.content)))}})};class h extends s.BaseLanguageModel{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptionsCompat(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async invoke(e,t){const r=h._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}async*_streamIterator(e,t){if(this._streamResponseChunks===h.prototype._streamResponseChunks)yield this.invoke(e,t);else{const r=h._convertInputToPromptValue(e).toChatMessages(),[n,a]=this._separateRunnableConfigFromCallOptionsCompat(t),i={...n.metadata,...this.getLsParams(a)},s=await o.CallbackManager.configure(n.callbacks,this.callbacks,n.tags,this.tags,i,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:this?.invocationParams(a),batch_size:1},c=await(s?.handleChatModelStart(this.toJSON(),[r],n.runId,void 0,l,void 0,void 0,n.runName));let d;try{for await(const e of this._streamResponseChunks(r,a,c?.[0])){if(null==e.message.id){const t=c?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata},yield e.message,d=d?d.concat(e):e}}catch(e){throw await Promise.all((c??[]).map(t=>t?.handleLLMError(e))),e}await Promise.all((c??[]).map(e=>e?.handleLLMEnd({generations:[[d]]})))}}getLsParams(e){return{ls_model_type:"chat",ls_stop:e.stop}}async _generateUncached(e,t,r){const n=e.map(e=>e.map(a.coerceMessageLikeToMessage)),s={...r.metadata,...this.getLsParams(t)},l=await o.CallbackManager.configure(r.callbacks,this.callbacks,r.tags,this.tags,s,this.metadata,{verbose:this.verbose}),p={options:t,invocation_params:this?.invocationParams(t),batch_size:1},m=await(l?.handleChatModelStart(this.toJSON(),n,r.runId,void 0,p,void 0,void 0,r.runName)),f=[],g=[];if(m?.[0].handlers.find(e=>(0,c.isStreamEventsHandler)(e)||(0,d.isLogStreamHandler)(e))&&1===n.length&&this._streamResponseChunks!==h.prototype._streamResponseChunks)try{const e=await this._streamResponseChunks(n[0],t,m?.[0]);let r;for await(const t of e){if(null==t.message.id){const e=m?.at(0)?.runId;null!=e&&t.message._updateId(`run-${e}`)}r=void 0===r?t:(0,u.concat)(r,t)}if(void 0===r)throw new Error("Received empty response from chat model call.");f.push([r]),await(m?.[0].handleLLMEnd({generations:f,llmOutput:{}}))}catch(e){throw await(m?.[0].handleLLMError(e)),e}else{const e=await Promise.allSettled(n.map((e,r)=>this._generate(e,{...t,promptIndex:r},m?.[r])));await Promise.all(e.map(async(e,t)=>{if("fulfilled"===e.status){const r=e.value;for(const e of r.generations){if(null==e.message.id){const t=m?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata}}return 1===r.generations.length&&(r.generations[0].message.response_metadata={...r.llmOutput,...r.generations[0].message.response_metadata}),f[t]=r.generations,g[t]=r.llmOutput,m?.[t]?.handleLLMEnd({generations:[r.generations],llmOutput:r.llmOutput})}return await(m?.[t]?.handleLLMError(e.reason)),Promise.reject(e.reason)}))}const y={generations:f,llmOutput:g.length?this._combineLLMOutput?.(...g):void 0};return Object.defineProperty(y,i.RUN_KEY,{value:m?{runIds:m?.map(e=>e.runId)}:void 0,configurable:!0}),y}async _generateCached({messages:e,cache:t,llmStringKey:r,parsedOptions:n,handledOptions:s}){const l=e.map(e=>e.map(a.coerceMessageLikeToMessage)),c={...s.metadata,...this.getLsParams(n)},d=await o.CallbackManager.configure(s.callbacks,this.callbacks,s.tags,this.tags,c,this.metadata,{verbose:this.verbose}),u={options:n,invocation_params:this?.invocationParams(n),batch_size:1,cached:!0},p=await(d?.handleChatModelStart(this.toJSON(),l,s.runId,void 0,u,void 0,void 0,s.runName)),m=[],f=(await Promise.allSettled(l.map(async(e,n)=>{const a=h._convertInputToPromptValue(e).toString(),i=await t.lookup(a,r);return null==i&&m.push(n),i}))).map((e,t)=>({result:e,runManager:p?.[t]})).filter(({result:e})=>"fulfilled"===e.status&&null!=e.value||"rejected"===e.status),g=[];await Promise.all(f.map(async({result:e,runManager:t},r)=>{if("fulfilled"===e.status){const n=e.value;return g[r]=n,n.length&&await(t?.handleLLMNewToken(n[0].text)),t?.handleLLMEnd({generations:[n]})}return await(t?.handleLLMError(e.reason)),Promise.reject(e.reason)}));const y={generations:g,missingPromptIndices:m};return Object.defineProperty(y,i.RUN_KEY,{value:p?{runIds:p?.map(e=>e.runId)}:void 0,configurable:!0}),y}async generate(e,t,r){let n;n=Array.isArray(t)?{stop:t}:t;const i=e.map(e=>e.map(a.coerceMessageLikeToMessage)),[s,o]=this._separateRunnableConfigFromCallOptionsCompat(n);if(s.callbacks=s.callbacks??r,!this.cache)return this._generateUncached(i,o,s);const{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(o),{generations:d,missingPromptIndices:u}=await this._generateCached({messages:i,cache:l,llmStringKey:c,parsedOptions:o,handledOptions:s});let p={};if(u.length>0){const e=await this._generateUncached(u.map(e=>i[e]),o,s);await Promise.all(e.generations.map(async(e,t)=>{const r=u[t];d[r]=e;const n=h._convertInputToPromptValue(i[r]).toString();return l.update(n,c,e)})),p=e.llmOutput??{}}return{generations:d,llmOutput:p}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,r){const n=e.map(e=>e.toChatMessages());return this.generate(n,t,r)}async call(e,t,r){return(await this.generate([e.map(a.coerceMessageLikeToMessage)],t,r)).generations[0][0].message}async callPrompt(e,t,r){const n=e.toChatMessages();return this.call(n,t,r)}async predictMessages(e,t,r){return this.call(e,t,r)}async predict(e,t,r){const n=new a.HumanMessage(e),i=await this.call([n],t,r);if("string"!=typeof i.content)throw new Error("Cannot use predict when output is not a string.");return i.content}withStructuredOutput(e,t){if("function"!=typeof this.bindTools)throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');const r=e,a=t?.name,i=r.description??"A function available to call.",s=t?.method,o=t?.includeRaw;if("jsonMode"===s)throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let c,d=a??"extract";(0,m.isZodSchema)(r)?c=[{type:"function",function:{name:d,description:i,parameters:(0,n.zodToJsonSchema)(r)}}]:("name"in r&&(d=r.name),c=[{type:"function",function:{name:d,description:i,parameters:r}}]);const u=this.bindTools(c),h=l.RunnableLambda.from(e=>{if(!e.tool_calls||0===e.tool_calls.length)throw new Error("No tool calls found in the response.");const t=e.tool_calls.find(e=>e.name===d);if(!t)throw new Error(`No tool call found with name ${d}.`);return t.args});if(!o)return u.pipe(h).withConfig({runName:"StructuredOutput"});const f=p.RunnablePassthrough.assign({parsed:(e,t)=>h.invoke(e.raw,t)}),g=p.RunnablePassthrough.assign({parsed:()=>null}),y=f.withFallbacks({fallbacks:[g]});return l.RunnableSequence.from([{raw:u},y]).withConfig({runName:"StructuredOutputRunnable"})}}t.BaseChatModel=h,t.SimpleChatModel=class extends h{async _generate(e,t,r){const n=await this._call(e,t,r),i=new a.AIMessage(n);if("string"!=typeof i.content)throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:i.content,message:i}]}}}},50797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogStreamCallbackHandler=t.isLogStreamHandler=t.RunLog=t.RunLogPatch=void 0;const n=r(44100),a=r(847),i=r(71043),s=r(64494);class o{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),r=(0,n.applyPatch)({},t);return new l({ops:t,state:r[r.length-1].newDocument})}}t.RunLogPatch=o;class l extends o{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),r=(0,n.applyPatch)(this.state,e.ops);return new l({ops:t,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const t=(0,n.applyPatch)({},e.ops);return new l({ops:e.ops,state:t[t.length-1].newDocument})}}async function c(e,t){if("original"===t)throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:r}=e;return["retriever","llm","prompt"].includes(e.run_type)?r:1!==Object.keys(r).length||""!==r?.input?r.input:void 0}async function d(e,t){const{outputs:r}=e;return"original"===t||["retriever","llm","prompt"].includes(e.run_type)?r:void 0!==r&&1===Object.keys(r).length&&void 0!==r?.output?r.output:r}t.RunLog=l,t.isLogStreamHandler=e=>"log_stream_tracer"===e.name;class u extends a.BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=i.IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async*tapOutputIterable(e,t){for await(const r of t){if(e!==this.rootId){const t=this.keyMapByRunId[e];t&&await this.writer.write(new o({ops:[{op:"add",path:`/logs/${t}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){if(void 0===this.rootId&&(this.rootId=e.id,await this.writer.write(new o({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===t?e.name:`${e.name}:${t}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};"streaming_events"===this._schemaFormat&&(r.inputs=await c(e,this._schemaFormat)),await this.writer.write(new o({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(void 0===t)return;const r=[];"streaming_events"===this._schemaFormat&&r.push({op:"replace",path:`/logs/${t}/inputs`,value:await c(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${t}/final_output`,value:await d(e,this._schemaFormat)}),void 0!==e.end_time&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const n=new o({ops:r});await this.writer.write(n)}finally{if(e.id===this.rootId){const t=new o({ops:[{op:"replace",path:"/final_output",value:await d(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,r){const n=this.keyMapByRunId[e.id];if(void 0===n)return;let a;var i;void 0!==e.inputs.messages?(i=r?.chunk,a=void 0!==i&&void 0!==i.message?r?.chunk:new s.AIMessageChunk({id:`run-${e.id}`,content:t})):a=t;const l=new o({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${n}/streamed_output/-`,value:a}]});await this.writer.write(l)}}t.LogStreamCallbackHandler=u},50832:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function t(t){return e[t]??null}const r={regex:"bemenet",email:"email cím",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO időbélyeg",date:"ISO dátum",time:"ISO idő",duration:"ISO időintervallum",ipv4:"IPv4 cím",ipv6:"IPv6 cím",cidrv4:"IPv4 tartomány",cidrv6:"IPv6 tartomány",base64:"base64-kódolt string",base64url:"base64url-kódolt string",json_string:"JSON string",e164:"E.164 szám",jwt:"JWT",template_literal:"bemenet"};return e=>{switch(e.code){case"invalid_type":return`Érvénytelen bemenet: a várt érték ${e.expected}, a kapott érték ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"szám";case"object":if(Array.isArray(e))return"tömb";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Érvénytelen bemenet: a várt érték ${s.stringifyPrimitive(e.values[0])}`:`Érvénytelen opció: valamelyik érték várt ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Túl nagy: ${e.origin??"érték"} mérete túl nagy ${r}${e.maximum.toString()} ${n.unit??"elem"}`:`Túl nagy: a bemeneti érték ${e.origin??"érték"} túl nagy: ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Túl kicsi: a bemeneti érték ${e.origin} mérete túl kicsi ${r}${e.minimum.toString()} ${n.unit}`:`Túl kicsi: a bemeneti érték ${e.origin} túl kicsi ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Érvénytelen string: "${t.prefix}" értékkel kell kezdődnie`:"ends_with"===t.format?`Érvénytelen string: "${t.suffix}" értékkel kell végződnie`:"includes"===t.format?`Érvénytelen string: "${t.includes}" értéket kell tartalmaznia`:"regex"===t.format?`Érvénytelen string: ${t.pattern} mintának kell megfelelnie`:`Érvénytelen ${r[t.format]??e.format}`}case"not_multiple_of":return`Érvénytelen szám: ${e.divisor} többszörösének kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${e.keys.length>1?"s":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Érvénytelen kulcs ${e.origin}`;case"invalid_union":default:return"Érvénytelen bemenet";case"invalid_element":return`Érvénytelen érték: ${e.origin}`}}}},50954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.partialParse=void 0;const r=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return e=e.slice(0,e.length-1),r(e);case"number":let n=t.value[t.value.length-1];if("."===n||"-"===n)return e=e.slice(0,e.length-1),r(e);case"string":let a=e[e.length-2];if("delimiter"===a?.type)return e=e.slice(0,e.length-1),r(e);if("brace"===a?.type&&"{"===a.value)return e=e.slice(0,e.length-1),r(e);break;case"delimiter":return e=e.slice(0,e.length-1),r(e)}return e};t.partialParse=e=>JSON.parse((e=>{let t="";return e.map(e=>{"string"===e.type?t+='"'+e.value+'"':t+=e.value}),t})((e=>{let t=[];return e.map(e=>{"brace"===e.type&&("{"===e.value?t.push("}"):t.splice(t.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?t.push("]"):t.splice(t.lastIndexOf("]"),1))}),t.length>0&&t.reverse().map(t=>{"}"===t?e.push({type:"brace",value:"}"}):"]"===t&&e.push({type:"paren",value:"]"})}),e})(r((e=>{let t=0,r=[];for(;t<e.length;){let n=e[t];if("\\"===n){t++;continue}if("{"===n){r.push({type:"brace",value:"{"}),t++;continue}if("}"===n){r.push({type:"brace",value:"}"}),t++;continue}if("["===n){r.push({type:"paren",value:"["}),t++;continue}if("]"===n){r.push({type:"paren",value:"]"}),t++;continue}if(":"===n){r.push({type:"separator",value:":"}),t++;continue}if(","===n){r.push({type:"delimiter",value:","}),t++;continue}if('"'===n){let a="",i=!1;for(n=e[++t];'"'!==n;){if(t===e.length){i=!0;break}if("\\"===n){if(t++,t===e.length){i=!0;break}a+=n+e[t],n=e[++t]}else a+=n,n=e[++t]}n=e[++t],i||r.push({type:"string",value:a});continue}if(n&&/\s/.test(n)){t++;continue}let a=/[0-9]/;if(n&&a.test(n)||"-"===n||"."===n){let i="";for("-"===n&&(i+=n,n=e[++t]);n&&a.test(n)||"."===n;)i+=n,n=e[++t];r.push({type:"number",value:i});continue}let i=/[a-z]/i;if(n&&i.test(n)){let a="";for(;n&&i.test(n)&&t!==e.length;)a+=n,n=e[++t];if("true"!=a&&"false"!=a&&"null"!==a){t++;continue}r.push({type:"name",value:a});continue}t++}return r})(e)))))},50974:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function t(t){return e[t]??null}const r={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input tidak valid: diharapkan ${e.expected}, diterima ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input tidak valid: diharapkan ${s.stringifyPrimitive(e.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Terlalu besar: diharapkan ${e.origin??"value"} memiliki ${r}${e.maximum.toString()} ${n.unit??"elemen"}`:`Terlalu besar: diharapkan ${e.origin??"value"} menjadi ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Terlalu kecil: diharapkan ${e.origin} memiliki ${r}${e.minimum.toString()} ${n.unit}`:`Terlalu kecil: diharapkan ${e.origin} menjadi ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`String tidak valid: harus dimulai dengan "${t.prefix}"`:"ends_with"===t.format?`String tidak valid: harus berakhir dengan "${t.suffix}"`:"includes"===t.format?`String tidak valid: harus menyertakan "${t.includes}"`:"regex"===t.format?`String tidak valid: harus sesuai pola ${t.pattern}`:`${r[t.format]??e.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${e.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${e.keys.length>1?"s":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${e.origin}`;case"invalid_union":default:return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${e.origin}`}}}},51109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputItems=void 0;const n=r(82040),a=r(75552),i=r(54815);class s extends n.APIResource{retrieve(e,t,r){const{eval_id:n,run_id:a}=t;return this._client.get(i.path`/evals/${n}/runs/${a}/output_items/${e}`,r)}list(e,t,r){const{eval_id:n,...s}=t;return this._client.getAPIList(i.path`/evals/${n}/runs/${e}/output_items`,a.CursorPage,{query:s,...r})}}t.OutputItems=s},51227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringOutputParser=void 0;const n=r(28580);class a extends n.BaseTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","string"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentComplexToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((e,t)=>e+this._messageContentComplexToString(t),"")}}t.StringOutputParser=a},51400:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=t.isNode=t.isDeno=t.isJsDom=t.isWebWorker=t.isBrowser=void 0,t.getRuntimeEnvironment=function(){if(void 0===i){const e=(0,t.getEnv)(),r=d();i={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:n.__version__,...r}}return i},t.getLangChainEnvVars=function(){const e=o()||{},t={};for(const[r,n]of Object.entries(e))r.startsWith("LANGCHAIN_")&&"string"==typeof n&&(t[r]=n);for(const e in t)if((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&"string"==typeof t[e]){const r=t[e];t[e]=r.slice(0,2)+"*".repeat(r.length-4)+r.slice(-2)}return t},t.getLangChainEnvVarsMetadata=function(){const e=o()||{},t={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[n,a]of Object.entries(e))!n.startsWith("LANGCHAIN_")&&!n.startsWith("LANGSMITH_")||"string"!=typeof a||r.includes(n)||n.toLowerCase().includes("key")||n.toLowerCase().includes("secret")||n.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===n?t.revision_id=a:t[n]=a);return t},t.getEnvironmentVariables=o,t.getEnvironmentVariable=l,t.getLangSmithEnvironmentVariable=c,t.setEnvironmentVariable=function(e,t){"undefined"!=typeof process&&(process.env[e]=t)},t.getShas=d,t.getOtelEnabled=function(){return"true"===l("OTEL_ENABLED")||"true"===c("OTEL_ENABLED")};const n=r(33635);let a,i,s;function o(){try{return"undefined"!=typeof process&&process.env?Object.entries(process.env).reduce((e,[t,r])=>(e[t]=String(r),e),{}):void 0}catch(e){return}}function l(e){try{return"undefined"!=typeof process?process.env?.[e]:void 0}catch(e){return}}function c(e){return l(`LANGSMITH_${e}`)||l(`LANGCHAIN_${e}`)}function d(){if(void 0!==s)return s;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const r of e){const e=l(r);void 0!==e&&(t[r]=e)}return s=t,t}t.isBrowser=()=>"undefined"!=typeof window&&void 0!==window.document,t.isWebWorker=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,t.isJsDom=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&navigator.userAgent.includes("jsdom"),t.isDeno=()=>"undefined"!=typeof Deno,t.isNode=()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node&&!(0,t.isDeno)(),t.getEnv=()=>a||(a=(0,t.isBrowser)()?"browser":(0,t.isNode)()?"node":(0,t.isWebWorker)()?"webworker":(0,t.isJsDom)()?"jsdom":(0,t.isDeno)()?"deno":"other",a)},51539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51679:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(79632);n.__exportStar(r(65189),t),n.__exportStar(r(78505),t),n.__exportStar(r(56705),t),n.__exportStar(r(95445),t),n.__exportStar(r(69910),t),n.__exportStar(r(61073),t),n.__exportStar(r(9485),t),n.__exportStar(r(68548),t),n.__exportStar(r(39012),t),n.__exportStar(r(75563),t),n.__exportStar(r(55362),t),n.__exportStar(r(55641),t),n.__exportStar(r(55998),t),n.__exportStar(r(23063),t),n.__exportStar(r(11319),t),n.__exportStar(r(44219),t),n.__exportStar(r(84450),t),n.__exportStar(r(36440),t),n.__exportStar(r(61778),t),n.__exportStar(r(96019),t),n.__exportStar(r(60203),t),n.__exportStar(r(9687),t),n.__exportStar(r(65901),t),n.__exportStar(r(25074),t),n.__exportStar(r(43440),t),n.__exportStar(r(62317),t),n.__exportStar(r(86420),t),n.__exportStar(r(4131),t),n.__exportStar(r(45432),t),n.__exportStar(r(38983),t),n.__exportStar(r(77386),t),n.__exportStar(r(76984),t),n.__exportStar(r(95707),t),n.__exportStar(r(85474),t),n.__exportStar(r(81590),t);const a=r(81590);t.default=a.zodToJsonSchema},51698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingEnabled=void 0;const n=r(51400);t.isTracingEnabled=e=>void 0!==e?e:!!["TRACING_V2","TRACING"].find(e=>"true"===(0,n.getLangSmithEnvironmentVariable)(e))},51761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseObjectDef=void 0;const n=r(84769);function a(e){try{return e.isOptional()}catch{return!0}}t.parseObjectDef=function(e,t){const r="openAi"===t.target,i={type:"object",properties:{}},s=[],o=e.shape();for(const e in o){let l=o[e];if(void 0===l||void 0===l._def)continue;let c=a(l);c&&r&&("ZodOptional"===l._def.typeName&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const d=(0,n.parseDef)(l._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==d&&(i.properties[e]=d,c||s.push(e))}s.length&&(i.required=s);const l=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return(0,n.parseDef)(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==l&&(i.additionalProperties=l),i}},51832:(e,t,r)=>{"use strict";const n=r(30144);e.exports=(e,t)=>{const r=n(e,null,!0),a=n(t,null,!0),i=r.compare(a);if(0===i)return null;const s=i>0,o=s?r:a,l=s?a:r,c=!!o.prerelease.length;if(l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(o))return l.minor&&!l.patch?"minor":"patch"}const d=c?"pre":"";return r.major!==a.major?d+"major":r.minor!==a.minor?d+"minor":r.patch!==a.patch?d+"patch":"prerelease"}},51881:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=t.defaultOptions=t.jsonDescription=t.ignoreOverride=void 0,t.ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),t.jsonDescription=(e,t)=>{if(t.description)try{return{...e,...JSON.parse(t.description)}}catch{}return e},t.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},t.getDefaultOptions=e=>"string"==typeof e?{...t.defaultOptions,name:e}:{...t.defaultOptions,...e}},52018:e=>{"use strict";e.exports=require("tty")},52047:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Batches=void 0;const n=r(24472),a=r(24384),i=r(2758),s=r(91198),o=r(72854),l=r(64735);class c extends n.APIResource{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(l.path`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",a.Page,{query:e,...t})}delete(e,t){return this._client.delete(l.path`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(l.path`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){const r=await this.retrieve(e);if(!r.results_url)throw new o.AnthropicError(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);return this._client.get(r.results_url,{...t,headers:(0,i.buildHeaders)([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>s.JSONLDecoder.fromResponse(t.response,t.controller))}}t.Batches=c},52133:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemMessageChunk=t.SystemMessage=void 0,t.isSystemMessage=function(e){return"system"===e._getType()},t.isSystemMessageChunk=function(e){return"system"===e._getType()};const n=r(15785);class a extends n.BaseMessage{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,t){super(e,t)}}t.SystemMessage=a;class i extends n.BaseMessageChunk{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,t){super(e,t)}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),id:this.id??e.id})}}t.SystemMessageChunk=i},52338:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehålla"},set:{unit:"objekt",verb:"att innehålla"}};function t(t){return e[t]??null}const r={regex:"reguljärt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad sträng",base64url:"base64url-kodad sträng",json_string:"JSON-sträng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return e=>{switch(e.code){case"invalid_type":return`Ogiltig inmatning: förväntat ${e.expected}, fick ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"antal";case"object":if(Array.isArray(e))return"lista";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ogiltig inmatning: förväntat ${s.stringifyPrimitive(e.values[0])}`:`Ogiltigt val: förväntade en av ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`För stor(t): förväntade ${e.origin??"värdet"} att ha ${r}${e.maximum.toString()} ${n.unit??"element"}`:`För stor(t): förväntat ${e.origin??"värdet"} att ha ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`För lite(t): förväntade ${e.origin??"värdet"} att ha ${r}${e.minimum.toString()} ${n.unit}`:`För lite(t): förväntade ${e.origin??"värdet"} att ha ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ogiltig sträng: måste börja med "${t.prefix}"`:"ends_with"===t.format?`Ogiltig sträng: måste sluta med "${t.suffix}"`:"includes"===t.format?`Ogiltig sträng: måste innehålla "${t.includes}"`:"regex"===t.format?`Ogiltig sträng: måste matcha mönstret "${t.pattern}"`:`Ogiltig(t) ${r[t.format]??e.format}`}case"not_multiple_of":return`Ogiltigt tal: måste vara en multipel av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Okända nycklar":"Okänd nyckel"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${e.origin??"värdet"}`;case"invalid_union":default:return"Ogiltig input";case"invalid_element":return`Ogiltigt värde i ${e.origin??"värdet"}`}}}},52405:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TimePrecision=void 0,t._string=function(e,t){return new e({type:"string",...l.normalizeParams(t)})},t._coercedString=function(e,t){return new e({type:"string",coerce:!0,...l.normalizeParams(t)})},t._email=function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._guid=function(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._uuid=function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._uuidv4=function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...l.normalizeParams(t)})},t._uuidv6=function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...l.normalizeParams(t)})},t._uuidv7=function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...l.normalizeParams(t)})},t._url=function(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._emoji=function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._nanoid=function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._cuid=function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._cuid2=function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._ulid=function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._xid=function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._ksuid=function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._ipv4=function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._ipv6=function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._cidrv4=function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._cidrv6=function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._base64=function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._base64url=function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._e164=function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._jwt=function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...l.normalizeParams(t)})},t._isoDateTime=function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...l.normalizeParams(t)})},t._isoDate=function(e,t){return new e({type:"string",format:"date",check:"string_format",...l.normalizeParams(t)})},t._isoTime=function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...l.normalizeParams(t)})},t._isoDuration=function(e,t){return new e({type:"string",format:"duration",check:"string_format",...l.normalizeParams(t)})},t._number=function(e,t){return new e({type:"number",checks:[],...l.normalizeParams(t)})},t._coercedNumber=function(e,t){return new e({type:"number",coerce:!0,checks:[],...l.normalizeParams(t)})},t._int=function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...l.normalizeParams(t)})},t._float32=function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float32",...l.normalizeParams(t)})},t._float64=function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"float64",...l.normalizeParams(t)})},t._int32=function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"int32",...l.normalizeParams(t)})},t._uint32=function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"uint32",...l.normalizeParams(t)})},t._boolean=function(e,t){return new e({type:"boolean",...l.normalizeParams(t)})},t._coercedBoolean=function(e,t){return new e({type:"boolean",coerce:!0,...l.normalizeParams(t)})},t._bigint=function(e,t){return new e({type:"bigint",...l.normalizeParams(t)})},t._coercedBigint=function(e,t){return new e({type:"bigint",coerce:!0,...l.normalizeParams(t)})},t._int64=function(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...l.normalizeParams(t)})},t._uint64=function(e,t){return new e({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...l.normalizeParams(t)})},t._symbol=function(e,t){return new e({type:"symbol",...l.normalizeParams(t)})},t._undefined=function(e,t){return new e({type:"undefined",...l.normalizeParams(t)})},t._null=function(e,t){return new e({type:"null",...l.normalizeParams(t)})},t._any=function(e){return new e({type:"any"})},t._unknown=function(e){return new e({type:"unknown"})},t._never=function(e,t){return new e({type:"never",...l.normalizeParams(t)})},t._void=function(e,t){return new e({type:"void",...l.normalizeParams(t)})},t._date=function(e,t){return new e({type:"date",...l.normalizeParams(t)})},t._coercedDate=function(e,t){return new e({type:"date",coerce:!0,...l.normalizeParams(t)})},t._nan=function(e,t){return new e({type:"nan",...l.normalizeParams(t)})},t._lt=c,t._lte=d,t._max=d,t._lte=d,t._max=d,t._gt=u,t._gte=p,t._min=p,t._gte=p,t._min=p,t._positive=function(e){return u(0,e)},t._negative=function(e){return c(0,e)},t._nonpositive=function(e){return d(0,e)},t._nonnegative=function(e){return p(0,e)},t._multipleOf=function(e,t){return new s.$ZodCheckMultipleOf({check:"multiple_of",...l.normalizeParams(t),value:e})},t._maxSize=function(e,t){return new s.$ZodCheckMaxSize({check:"max_size",...l.normalizeParams(t),maximum:e})},t._minSize=function(e,t){return new s.$ZodCheckMinSize({check:"min_size",...l.normalizeParams(t),minimum:e})},t._size=function(e,t){return new s.$ZodCheckSizeEquals({check:"size_equals",...l.normalizeParams(t),size:e})},t._maxLength=function(e,t){return new s.$ZodCheckMaxLength({check:"max_length",...l.normalizeParams(t),maximum:e})},t._minLength=function(e,t){return new s.$ZodCheckMinLength({check:"min_length",...l.normalizeParams(t),minimum:e})},t._length=function(e,t){return new s.$ZodCheckLengthEquals({check:"length_equals",...l.normalizeParams(t),length:e})},t._regex=function(e,t){return new s.$ZodCheckRegex({check:"string_format",format:"regex",...l.normalizeParams(t),pattern:e})},t._lowercase=function(e){return new s.$ZodCheckLowerCase({check:"string_format",format:"lowercase",...l.normalizeParams(e)})},t._uppercase=function(e){return new s.$ZodCheckUpperCase({check:"string_format",format:"uppercase",...l.normalizeParams(e)})},t._includes=function(e,t){return new s.$ZodCheckIncludes({check:"string_format",format:"includes",...l.normalizeParams(t),includes:e})},t._startsWith=function(e,t){return new s.$ZodCheckStartsWith({check:"string_format",format:"starts_with",...l.normalizeParams(t),prefix:e})},t._endsWith=function(e,t){return new s.$ZodCheckEndsWith({check:"string_format",format:"ends_with",...l.normalizeParams(t),suffix:e})},t._property=function(e,t,r){return new s.$ZodCheckProperty({check:"property",property:e,schema:t,...l.normalizeParams(r)})},t._mime=function(e,t){return new s.$ZodCheckMimeType({check:"mime_type",mime:e,...l.normalizeParams(t)})},t._overwrite=m,t._normalize=function(e){return m(t=>t.normalize(e))},t._trim=function(){return m(e=>e.trim())},t._toLowerCase=function(){return m(e=>e.toLowerCase())},t._toUpperCase=function(){return m(e=>e.toUpperCase())},t._array=function(e,t,r){return new e({type:"array",element:t,...l.normalizeParams(r)})},t._union=function(e,t,r){return new e({type:"union",options:t,...l.normalizeParams(r)})},t._discriminatedUnion=function(e,t,r,n){return new e({type:"union",options:r,discriminator:t,...l.normalizeParams(n)})},t._intersection=function(e,t,r){return new e({type:"intersection",left:t,right:r})},t._tuple=function(e,t,r,n){const a=r instanceof o.$ZodType,i=a?n:r;return new e({type:"tuple",items:t,rest:a?r:null,...l.normalizeParams(i)})},t._record=function(e,t,r,n){return new e({type:"record",keyType:t,valueType:r,...l.normalizeParams(n)})},t._map=function(e,t,r,n){return new e({type:"map",keyType:t,valueType:r,...l.normalizeParams(n)})},t._set=function(e,t,r){return new e({type:"set",valueType:t,...l.normalizeParams(r)})},t._enum=function(e,t,r){return new e({type:"enum",entries:Array.isArray(t)?Object.fromEntries(t.map(e=>[e,e])):t,...l.normalizeParams(r)})},t._nativeEnum=function(e,t,r){return new e({type:"enum",entries:t,...l.normalizeParams(r)})},t._literal=function(e,t,r){return new e({type:"literal",values:Array.isArray(t)?t:[t],...l.normalizeParams(r)})},t._file=function(e,t){return new e({type:"file",...l.normalizeParams(t)})},t._transform=function(e,t){return new e({type:"transform",transform:t})},t._optional=function(e,t){return new e({type:"optional",innerType:t})},t._nullable=function(e,t){return new e({type:"nullable",innerType:t})},t._default=function(e,t,r){return new e({type:"default",innerType:t,get defaultValue(){return"function"==typeof r?r():r}})},t._nonoptional=function(e,t,r){return new e({type:"nonoptional",innerType:t,...l.normalizeParams(r)})},t._success=function(e,t){return new e({type:"success",innerType:t})},t._catch=function(e,t,r){return new e({type:"catch",innerType:t,catchValue:"function"==typeof r?r:()=>r})},t._pipe=function(e,t,r){return new e({type:"pipe",in:t,out:r})},t._readonly=function(e,t){return new e({type:"readonly",innerType:t})},t._templateLiteral=function(e,t,r){return new e({type:"template_literal",parts:t,...l.normalizeParams(r)})},t._lazy=function(e,t){return new e({type:"lazy",getter:t})},t._promise=function(e,t){return new e({type:"promise",innerType:t})},t._custom=function(e,t,r){const n=l.normalizeParams(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})},t._refine=function(e,t,r){return new e({type:"custom",check:"custom",fn:t,...l.normalizeParams(r)})},t._stringbool=function(e,t){const r=l.normalizeParams(t);let n=r.truthy??["true","1","yes","on","y","enabled"],a=r.falsy??["false","0","no","off","n","disabled"];"sensitive"!==r.case&&(n=n.map(e=>"string"==typeof e?e.toLowerCase():e),a=a.map(e=>"string"==typeof e?e.toLowerCase():e));const i=new Set(n),s=new Set(a),c=e.Pipe??o.$ZodPipe,d=e.Boolean??o.$ZodBoolean,u=e.String??o.$ZodString,p=new(e.Transform??o.$ZodTransform)({type:"transform",transform:(e,t)=>{let n=e;return"sensitive"!==r.case&&(n=n.toLowerCase()),!!i.has(n)||!s.has(n)&&(t.issues.push({code:"invalid_value",expected:"stringbool",values:[...i,...s],input:t.value,inst:p}),{})},error:r.error}),m=new c({type:"pipe",in:new u({type:"string",error:r.error}),out:p,error:r.error});return new c({type:"pipe",in:m,out:new d({type:"boolean",error:r.error}),error:r.error})},t._stringFormat=function(e,t,r,n={}){const a=l.normalizeParams(n),i={...l.normalizeParams(n),check:"string_format",type:"string",format:t,fn:"function"==typeof r?r:e=>r.test(e),...a};return r instanceof RegExp&&(i.pattern=r),new e(i)};const s=i(r(32564)),o=i(r(95341)),l=i(r(90523));function c(e,t){return new s.$ZodCheckLessThan({check:"less_than",...l.normalizeParams(t),value:e,inclusive:!1})}function d(e,t){return new s.$ZodCheckLessThan({check:"less_than",...l.normalizeParams(t),value:e,inclusive:!0})}function u(e,t){return new s.$ZodCheckGreaterThan({check:"greater_than",...l.normalizeParams(t),value:e,inclusive:!1})}function p(e,t){return new s.$ZodCheckGreaterThan({check:"greater_than",...l.normalizeParams(t),value:e,inclusive:!0})}function m(e){return new s.$ZodCheckOverwrite({check:"overwrite",tx:e})}t.TimePrecision={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6}},52591:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,a=r(98737),i=r(16928),s=r(63798),o=r(35422),l=n(async function(e){let t;try{t=await a.readdir(e)}catch{return s.mkdirs(e)}return Promise.all(t.map(t=>o.remove(i.join(e,t))))});function c(e){let t;try{t=a.readdirSync(e)}catch{return s.mkdirsSync(e)}t.forEach(t=>{t=i.join(e,t),o.removeSync(t)})}e.exports={emptyDirSync:c,emptydirSync:c,emptyDir:l,emptydir:l}},52670:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Files=void 0;const n=r(24472),a=r(24384),i=r(2758),s=r(87090),o=r(64735);class l extends n.APIResource{list(e={},t){const{betas:r,...n}=e??{};return this._client.getAPIList("/v1/files",a.Page,{query:n,...t,headers:(0,i.buildHeaders)([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},r){const{betas:n}=t??{};return this._client.delete(o.path`/v1/files/${e}`,{...r,headers:(0,i.buildHeaders)([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])})}download(e,t={},r){const{betas:n}=t??{};return this._client.get(o.path`/v1/files/${e}/content`,{...r,headers:(0,i.buildHeaders)([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},r){const{betas:n}=t??{};return this._client.get(o.path`/v1/files/${e}`,{...r,headers:(0,i.buildHeaders)([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])})}upload(e,t){const{betas:r,...n}=e;return this._client.post("/v1/files",(0,s.multipartFormRequestOptions)({body:n,...t,headers:(0,i.buildHeaders)([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},t?.headers])},this._client))}}t.Files=l},52990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultProjectName=void 0;const n=r(51400);t.getDefaultProjectName=()=>(0,n.getLangSmithEnvironmentVariable)("PROJECT")??(0,n.getEnvironmentVariable)("LANGCHAIN_SESSION")??"default"},53369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.agentPolicyName=void 0,t.agentPolicy=function(e){return(0,n.agentPolicy)(e)};const n=r(17445);t.agentPolicyName=n.agentPolicyName},53375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultLangChainClientSingleton=t.getDefaultLangChainClientSingleton=void 0;const n=r(21210),a=r(60418);let i;t.getDefaultLangChainClientSingleton=()=>{if(void 0===i){const e="false"===(0,a.getEnvironmentVariable)("LANGCHAIN_CALLBACKS_BACKGROUND")?{blockOnRootRunFinalization:!0}:{};i=new n.Client(e)}return i},t.setDefaultLangChainClientSingleton=e=>{i=e}},53404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalNoProxyList=t.proxyPolicyName=void 0,t.loadNoProxy=h,t.getDefaultProxySettings=function(e){if(!e&&!(e=m()))return;const t=new URL(e);return{host:(t.protocol?t.protocol+"//":"")+t.hostname,port:Number.parseInt(t.port||"80"),username:t.username,password:t.password}},t.proxyPolicy=function(e,r){d||t.globalNoProxyList.push(...h());const n=e?f(e):function(){const e=m();return e?new URL(e):void 0}(),a={};return{name:t.proxyPolicyName,async sendRequest(e,i){var s;return e.proxySettings||!n||function(e,t,r){if(0===t.length)return!1;const n=new URL(e).hostname;if(null==r?void 0:r.has(n))return r.get(n);let a=!1;for(const e of t)"."===e[0]?(n.endsWith(e)||n.length===e.length-1&&n===e.slice(1))&&(a=!0):n===e&&(a=!0);return null==r||r.set(n,a),a}(e.url,null!==(s=null==r?void 0:r.customNoProxyList)&&void 0!==s?s:t.globalNoProxyList,(null==r?void 0:r.customNoProxyList)?void 0:u)?e.proxySettings&&g(e,a,f(e.proxySettings)):g(e,a,n),i(e)}}};const n=r(62288),a=r(6645),i=r(92425),s="HTTPS_PROXY",o="HTTP_PROXY",l="ALL_PROXY",c="NO_PROXY";t.proxyPolicyName="proxyPolicy",t.globalNoProxyList=[];let d=!1;const u=new Map;function p(e){return process.env[e]?process.env[e]:process.env[e.toLowerCase()]?process.env[e.toLowerCase()]:void 0}function m(){if(!process)return;const e=p(s),t=p(l),r=p(o);return e||t||r}function h(){const e=p(c);return d=!0,e?e.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function f(e){let t;try{t=new URL(e.host)}catch(t){throw new Error(`Expecting a valid host string in proxy settings, but found "${e.host}".`)}return t.port=String(e.port),e.username&&(t.username=e.username),e.password&&(t.password=e.password),t}function g(e,t,r){if(e.agent)return;const s="https:"!==new URL(e.url).protocol;e.tlsSettings&&i.logger.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");const o=e.headers.toJSON();s?(t.httpProxyAgent||(t.httpProxyAgent=new a.HttpProxyAgent(r,{headers:o})),e.agent=t.httpProxyAgent):(t.httpsProxyAgent||(t.httpsProxyAgent=new n.HttpsProxyAgent(r,{headers:o})),e.agent=t.httpsProxyAgent)}},53417:(e,t,r)=>{"use strict";t.URL=r(76648).interface,r(95484).serializeURL,r(95484).serializeURLOrigin,r(95484).basicURLParse,r(95484).setTheUsername,r(95484).setThePassword,r(95484).serializeHost,r(95484).serializeInteger,r(95484).parseURL},53672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFile=void 0;var n=r(84570);Object.defineProperty(t,"toFile",{enumerable:!0,get:function(){return n.toFile}})},53752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolMessageChunk=t.ToolMessage=void 0,t.isDirectToolOutput=function(e){return null!=e&&"object"==typeof e&&"lc_direct_tool_output"in e&&!0===e.lc_direct_tool_output},t.defaultToolCallParser=function(e){const t=[],r=[];for(const n of e)if(n.function){const e=n.function.name;try{const r={name:e||"",args:JSON.parse(n.function.arguments)||{},id:n.id};t.push(r)}catch(t){r.push({name:e,args:n.function.arguments,id:n.id,error:"Malformed args."})}}return[t,r]},t.isToolMessage=function(e){return"tool"===e._getType()},t.isToolMessageChunk=function(e){return"tool"===e._getType()};const n=r(15785);class a extends n.BaseMessage{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,t,r){"string"==typeof e&&(e={content:e,name:r,tool_call_id:t}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return"tool"===e._getType()}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}t.ToolMessage=a;class i extends n.BaseMessageChunk{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),artifact:(0,n._mergeObj)(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:(0,n._mergeStatus)(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}t.ToolMessageChunk=i},53865:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warnOnce=void 0;const r={};t.warnOnce=function(e){r[e]||(console.warn(e),r[e]=!0)}},53908:(e,t,r)=>{"use strict";const n=r(57272),{MAX_LENGTH:a,MAX_SAFE_INTEGER:i}=r(16874),{safeRe:s,t:o}=r(99718),l=r(98587),{compareIdentifiers:c}=r(61123);class d{constructor(e,t){if(t=l(t),e instanceof d){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[o.LOOSE]:s[o.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof d)){if("string"==typeof e&&e===this.version)return 0;e=new d(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof d||(e=new d(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}compareBuild(e){e instanceof d||(e=new d(e,this.options));let t=0;do{const r=this.build[t],a=e.build[t];if(n("build compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?s[o.PRERELEASELOOSE]:s[o.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=d},54003:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parsedType=void 0,t.default=function(){return{localeError:o()}};const s=i(r(90523));t.parsedType=e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t};const o=()=>{const e={string:{unit:"karakter",verb:"olmalı"},file:{unit:"bayt",verb:"olmalı"},array:{unit:"öğe",verb:"olmalı"},set:{unit:"öğe",verb:"olmalı"}};function r(t){return e[t]??null}const n={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO süre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aralığı",cidrv6:"IPv6 aralığı",base64:"base64 ile şifrelenmiş metin",base64url:"base64url ile şifrelenmiş metin",json_string:"JSON dizesi",e164:"E.164 sayısı",jwt:"JWT",template_literal:"Şablon dizesi"};return e=>{switch(e.code){case"invalid_type":return`Geçersiz değer: beklenen ${e.expected}, alınan ${(0,t.parsedType)(e.input)}`;case"invalid_value":return 1===e.values.length?`Geçersiz değer: beklenen ${s.stringifyPrimitive(e.values[0])}`:`Geçersiz seçenek: aşağıdakilerden biri olmalı: ${s.joinValues(e.values,"|")}`;case"too_big":{const t=e.inclusive?"<=":"<",n=r(e.origin);return n?`Çok büyük: beklenen ${e.origin??"değer"} ${t}${e.maximum.toString()} ${n.unit??"öğe"}`:`Çok büyük: beklenen ${e.origin??"değer"} ${t}${e.maximum.toString()}`}case"too_small":{const t=e.inclusive?">=":">",n=r(e.origin);return n?`Çok küçük: beklenen ${e.origin} ${t}${e.minimum.toString()} ${n.unit}`:`Çok küçük: beklenen ${e.origin} ${t}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Geçersiz metin: "${t.prefix}" ile başlamalı`:"ends_with"===t.format?`Geçersiz metin: "${t.suffix}" ile bitmeli`:"includes"===t.format?`Geçersiz metin: "${t.includes}" içermeli`:"regex"===t.format?`Geçersiz metin: ${t.pattern} desenine uymalı`:`Geçersiz ${n[t.format]??e.format}`}case"not_multiple_of":return`Geçersiz sayı: ${e.divisor} ile tam bölünebilmeli`;case"unrecognized_keys":return`Tanınmayan anahtar${e.keys.length>1?"lar":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`${e.origin} içinde geçersiz anahtar`;case"invalid_union":default:return"Geçersiz değer";case"invalid_element":return`${e.origin} içinde geçersiz değer`}}}},54089:(e,t,r)=>{"use strict";const n=r(50560);e.exports=(e,t,r)=>n(e,t,r)>=0},54103:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConflictingEndpointsError=t.LangSmithConflictError=void 0,t.printErrorStackTrace=function(e){const t=function(e){if("object"!=typeof e||null==e)return;if(!("stack"in e)||"string"!=typeof e.stack)return;let t=e.stack;const r=`${e}`;return t.startsWith(r)&&(t=t.slice(r.length)),t.startsWith("\n")&&(t=t.slice(1)),t}(e);null!=t&&console.error(t)},t.raiseForStatus=async function(e,t,n){let a;if(e.ok)return void(n&&(a=await e.text()));a=await e.text();const i=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Server response: ${a}`;if(409===e.status)throw new r(i);const s=new Error(i);throw s.status=e.status,s},t.isConflictingEndpointsError=function(e){return"object"==typeof e&&null!==e&&e.code===n};class r extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}t.LangSmithConflictError=r;const n="ERR_CONFLICTING_ENDPOINTS";class a extends Error{constructor(){super("You cannot provide both LANGSMITH_ENDPOINT / LANGCHAIN_ENDPOINT and LANGSMITH_RUNS_ENDPOINTS."),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:n}),this.name="ConflictingEndpointsError"}}t.ConflictingEndpointsError=a},54205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDefaultDef=void 0;const n=r(84769);t.parseDefaultDef=function(e,t){return{...(0,n.parseDef)(e.innerType._def,t),default:e.defaultValue()}}},54437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseArrayDef=void 0;const n=r(7552),a=r(61973),i=r(84769);t.parseArrayDef=function(e,t){const r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==n.ZodFirstPartyTypeKind.ZodAny&&(r.items=(0,i.parseDef)(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(0,a.setResponseValueAndErrors)(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&(0,a.setResponseValueAndErrors)(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&((0,a.setResponseValueAndErrors)(r,"minItems",e.exactLength.value,e.exactLength.message,t),(0,a.setResponseValueAndErrors)(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}},54774:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(79998);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);const a=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(a,0,r)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}},54815:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.path=t.createPathTagFunction=void 0,t.encodeURIPath=a;const n=r(44172);function a(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const i=Object.freeze(Object.create(null));t.createPathTagFunction=(e=a)=>function(t,...r){if(1===t.length)return t[0];let a=!1;const s=[],o=t.reduce((t,n,o)=>{/[?#]/.test(n)&&(a=!0);const l=r[o];let c=(a?encodeURIComponent:e)(""+l);return o!==r.length&&(null==l||"object"==typeof l&&l.toString===Object.getPrototypeOf(Object.getPrototypeOf(l.hasOwnProperty??i)??i)?.toString)&&(c=l+"",s.push({start:t.length+n.length,length:c.length,error:`Value of type ${Object.prototype.toString.call(l).slice(8,-1)} is not a valid path parameter`})),t+n+(o===r.length?"":c)},""),l=o.split(/[?#]/,1)[0],c=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let d;for(;null!==(d=c.exec(l));)s.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(s.sort((e,t)=>e.start-t.start),s.length>0){let e=0;const t=s.reduce((t,r)=>{const n=" ".repeat(r.start-e),a="^".repeat(r.length);return e=r.start+r.length,t+n+a},"");throw new n.OpenAIError(`Path parameters result in path with invalid segments:\n${s.map(e=>e.error).join("\n")}\n${o}\n${t}`)}return o},t.path=(0,t.createPathTagFunction)(a)},55039:(e,t,r)=>{e.exports=r(45180)},55291:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,a=r(16928),i=r(98737),{mkdirs:s,mkdirsSync:o}=r(63798),{symlinkPaths:l,symlinkPathsSync:c}=r(73838),{symlinkType:d,symlinkTypeSync:u}=r(47064),{pathExists:p}=r(29288),{areIdentical:m}=r(66462);e.exports={createSymlink:n(async function(e,t,r){let n;try{n=await i.lstat(t)}catch{}if(n&&n.isSymbolicLink()){const[r,n]=await Promise.all([i.stat(e),i.stat(t)]);if(m(r,n))return}const o=await l(e,t);e=o.toDst;const c=await d(o.toCwd,r),u=a.dirname(t);return await p(u)||await s(u),i.symlink(e,t,c)}),createSymlinkSync:function(e,t,r){let n;try{n=i.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){const r=i.statSync(e),n=i.statSync(t);if(m(r,n))return}const s=c(e,t);e=s.toDst,r=u(s.toCwd,r);const l=a.dirname(t);return i.existsSync(l)||o(l),i.symlinkSync(e,t,r)}}},55340:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;const n=r(55767),a=r(96699),i=r(59160);t.zodToJsonSchema=(e,t)=>{const r=(0,a.getRefs)(t);let s="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,a])=>({...e,[t]:(0,n.parseDef)(a._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??(0,i.parseAnyDef)(r)}),{}):void 0;const o="string"==typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,l=(0,n.parseDef)(e._def,void 0===o?r:{...r,currentPath:[...r.basePath,r.definitionPath,o]},!1)??(0,i.parseAnyDef)(r),c="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==c&&(l.title=c),r.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[r.openAiAnyTypeName]||(s[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===r.$refStrategy?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));const d=void 0===o?s?{...l,[r.definitionPath]:s}:l:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...s,[o]:l}};return"jsonSchema7"===r.target?d.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==r.target&&"openAi"!==r.target||(d.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in d||"oneOf"in d||"allOf"in d||"type"in d&&Array.isArray(d.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),d}},55362:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDateDef=function e(t,r,n){const i=n??r.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((n,a)=>e(t,r,n))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return a(t,r)}};const n=r(56705),a=(e,t)=>{const r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(const a of e.checks)switch(a.kind){case"min":(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t);break;case"max":(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t)}return r}},55595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Permissions=void 0;const n=r(82040),a=r(75552),i=r(54815);class s extends n.APIResource{create(e,t,r){return this._client.getAPIList(i.path`/fine_tuning/checkpoints/${e}/permissions`,a.Page,{body:t,method:"post",...r})}retrieve(e,t={},r){return this._client.get(i.path`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}delete(e,t,r){const{fine_tuned_model_checkpoint:n}=t;return this._client.delete(i.path`/fine_tuning/checkpoints/${n}/permissions/${e}`,r)}}t.Permissions=s},55641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDefaultDef=function(e,t){return{...(0,n.parseDef)(e.innerType._def,t),default:e.defaultValue()}};const n=r(95445)},55650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectParser=void 0;const n=r(7552),a=r(59160),i=r(79263),s=r(67555),o=r(37498),l=r(81358),c=r(57161),d=r(63212),u=r(79923),p=r(21468),m=r(17965),h=r(60769),f=r(66365),g=r(48760),y=r(58366),v=r(620),b=r(33233),_=r(7309),w=r(46021),P=r(28799),O=r(9600),S=r(90094),E=r(34175),A=r(89629),I=r(33538),k=r(70345),T=r(16880),j=r(68442),C=r(75613),x=r(36704),N=r(89338);t.selectParser=(e,t,r)=>{switch(t){case n.ZodFirstPartyTypeKind.ZodString:return(0,k.parseStringDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNumber:return(0,w.parseNumberDef)(e,r);case n.ZodFirstPartyTypeKind.ZodObject:return(0,P.parseObjectDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBigInt:return(0,s.parseBigintDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBoolean:return(0,o.parseBooleanDef)();case n.ZodFirstPartyTypeKind.ZodDate:return(0,d.parseDateDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUndefined:return(0,j.parseUndefinedDef)(r);case n.ZodFirstPartyTypeKind.ZodNull:return(0,b.parseNullDef)(r);case n.ZodFirstPartyTypeKind.ZodArray:return(0,i.parseArrayDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUnion:case n.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,C.parseUnionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodIntersection:return(0,h.parseIntersectionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodTuple:return(0,T.parseTupleDef)(e,r);case n.ZodFirstPartyTypeKind.ZodRecord:return(0,A.parseRecordDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLiteral:return(0,f.parseLiteralDef)(e,r);case n.ZodFirstPartyTypeKind.ZodEnum:return(0,m.parseEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,y.parseNativeEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNullable:return(0,_.parseNullableDef)(e,r);case n.ZodFirstPartyTypeKind.ZodOptional:return(0,O.parseOptionalDef)(e,r);case n.ZodFirstPartyTypeKind.ZodMap:return(0,g.parseMapDef)(e,r);case n.ZodFirstPartyTypeKind.ZodSet:return(0,I.parseSetDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLazy:return()=>e.getter()._def;case n.ZodFirstPartyTypeKind.ZodPromise:return(0,E.parsePromiseDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNaN:case n.ZodFirstPartyTypeKind.ZodNever:return(0,v.parseNeverDef)(r);case n.ZodFirstPartyTypeKind.ZodEffects:return(0,p.parseEffectsDef)(e,r);case n.ZodFirstPartyTypeKind.ZodAny:return(0,a.parseAnyDef)(r);case n.ZodFirstPartyTypeKind.ZodUnknown:return(0,x.parseUnknownDef)(r);case n.ZodFirstPartyTypeKind.ZodDefault:return(0,u.parseDefaultDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBranded:return(0,l.parseBrandedDef)(e,r);case n.ZodFirstPartyTypeKind.ZodReadonly:return(0,N.parseReadonlyDef)(e,r);case n.ZodFirstPartyTypeKind.ZodCatch:return(0,c.parseCatchDef)(e,r);case n.ZodFirstPartyTypeKind.ZodPipeline:return(0,S.parsePipelineDef)(e,r);case n.ZodFirstPartyTypeKind.ZodFunction:case n.ZodFirstPartyTypeKind.ZodVoid:case n.ZodFirstPartyTypeKind.ZodSymbol:default:return}}},55653:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55662:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function t(t){return e[t]??null}const r={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Input non valido: atteso ${e.expected}, ricevuto ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"numero";case"object":if(Array.isArray(e))return"vettore";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Input non valido: atteso ${s.stringifyPrimitive(e.values[0])}`:`Opzione non valida: atteso uno tra ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Troppo grande: ${e.origin??"valore"} deve avere ${r}${e.maximum.toString()} ${n.unit??"elementi"}`:`Troppo grande: ${e.origin??"valore"} deve essere ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Troppo piccolo: ${e.origin} deve avere ${r}${e.minimum.toString()} ${n.unit}`:`Troppo piccolo: ${e.origin} deve essere ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Stringa non valida: deve iniziare con "${t.prefix}"`:"ends_with"===t.format?`Stringa non valida: deve terminare con "${t.suffix}"`:"includes"===t.format?`Stringa non valida: deve includere "${t.includes}"`:"regex"===t.format?`Stringa non valida: deve corrispondere al pattern ${t.pattern}`:`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${e.divisor}`;case"unrecognized_keys":return`Chiav${e.keys.length>1?"i":"e"} non riconosciut${e.keys.length>1?"e":"a"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${e.origin}`;case"invalid_union":default:return"Input non valido";case"invalid_element":return`Valore non valido in ${e.origin}`}}}},55672:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(67751),t),a(r(11946),t),a(r(27087),t),a(r(3928),t)},55767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDef=void 0;const n=r(96775),a=r(55650),i=r(14098),s=r(59160);t.parseDef=function e(t,r,i=!1){const s=r.seen.get(t);if(r.override){const e=r.override?.(t,r,s,i);if(e!==n.ignoreOverride)return e}if(s&&!i){const e=o(s,r);if(void 0!==e)return e}const c={def:t,path:r.currentPath,jsonSchema:void 0};r.seen.set(t,c);const d=(0,a.selectParser)(t,t.typeName,r),u="function"==typeof d?e(d(),r):d;if(u&&l(t,r,u),r.postProcess){const e=r.postProcess(u,t,r);return c.jsonSchema=u,e}return c.jsonSchema=u,u};const o=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:(0,i.getRelativePath)(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),(0,s.parseAnyDef)(t)):"seen"===t.$refStrategy?(0,s.parseAnyDef)(t):void 0}},l=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r)},55998:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEffectsDef=function(e,t,r){return"input"===t.effectStrategy?(0,n.parseDef)(e.schema._def,t,r):{}};const n=r(95445)},56178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShas=t.setEnvironmentVariable=t.getLangSmithEnvironmentVariable=t.getEnvironmentVariable=t.getEnvironmentVariables=t.getLangChainEnvVarsMetadata=t.getLangChainEnvVars=t.getRuntimeEnvironment=t.getEnv=t.isNode=t.isDeno=t.isJsDom=t.isWebWorker=t.isBrowser=void 0;const n=r(3457);let a,i,s;function o(){try{return"undefined"!=typeof process&&process.env?Object.entries(process.env).reduce((e,[t,r])=>(e[t]=String(r),e),{}):void 0}catch(e){return}}function l(e){try{return"undefined"!=typeof process?process.env?.[e]:void 0}catch(e){return}}function c(){if(void 0!==s)return s;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const r of e){const e=l(r);void 0!==e&&(t[r]=e)}return s=t,t}t.isBrowser=()=>"undefined"!=typeof window&&void 0!==window.document,t.isWebWorker=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,t.isJsDom=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),t.isDeno=()=>"undefined"!=typeof Deno,t.isNode=()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node&&!(0,t.isDeno)(),t.getEnv=()=>a||(a=(0,t.isBrowser)()?"browser":(0,t.isNode)()?"node":(0,t.isWebWorker)()?"webworker":(0,t.isJsDom)()?"jsdom":(0,t.isDeno)()?"deno":"other",a),t.getRuntimeEnvironment=function(){if(void 0===i){const e=(0,t.getEnv)(),r=c();i={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:n.__version__,...r}}return i},t.getLangChainEnvVars=function(){const e=o()||{},t={};for(const[r,n]of Object.entries(e))r.startsWith("LANGCHAIN_")&&"string"==typeof n&&(t[r]=n);for(const e in t)if((e.toLowerCase().includes("key")||e.toLowerCase().includes("secret")||e.toLowerCase().includes("token"))&&"string"==typeof t[e]){const r=t[e];t[e]=r.slice(0,2)+"*".repeat(r.length-4)+r.slice(-2)}return t},t.getLangChainEnvVarsMetadata=function(){const e=o()||{},t={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(const[n,a]of Object.entries(e))!n.startsWith("LANGCHAIN_")||"string"!=typeof a||r.includes(n)||n.toLowerCase().includes("key")||n.toLowerCase().includes("secret")||n.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===n?t.revision_id=a:t[n]=a);return t},t.getEnvironmentVariables=o,t.getEnvironmentVariable=l,t.getLangSmithEnvironmentVariable=function(e){return l(`LANGSMITH_${e}`)||l(`LANGCHAIN_${e}`)},t.setEnvironmentVariable=function(e,t){"undefined"!=typeof process&&(process.env[e]=t)},t.getShas=c},56244:(e,t)=>{"use strict";function r(e,t){const r=[];for(const[a,i]of Object.entries(e.properties??{}))i.description&&t<2&&r.push(`// ${i.description}`),e.required?.includes(a)?r.push(`${a}: ${n(i,t)},`):r.push(`${a}?: ${n(i,t)},`);return r.map(e=>" ".repeat(t)+e).join("\n")}function n(e,t){if(void 0!==(a=e).anyOf&&Array.isArray(a.anyOf))return e.anyOf.map(e=>n(e,t)).join(" | ");var a;switch(e.type){case"string":return e.enum?e.enum.map(e=>`"${e}"`).join(" | "):"string";case"number":case"integer":return e.enum?e.enum.map(e=>`${e}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",r(e,t+2),"}"].join("\n");case"array":return e.items?`${n(e.items,t)}[]`:"any[]";default:return""}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatFunctionDefinitions=void 0,t.formatFunctionDefinitions=function(e){const t=["namespace functions {",""];for(const n of e)n.description&&t.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(t.push(`type ${n.name} = (_: {`),t.push(r(n.parameters,0)),t.push("}) => any;")):t.push(`type ${n.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join("\n")}},56354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isError=function(e){if((0,n.isObject)(e)){const t="string"==typeof e.name,r="string"==typeof e.message;return t&&r}return!1};const n=r(18373)},56641:(e,t,r)=>{"use strict";const n=r(44617);class a extends Error{constructor(e){super(e),this.name="TimeoutError"}}const i=(e,t,r)=>new Promise((i,s)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void i(e);const o=setTimeout(()=>{if("function"==typeof r){try{i(r())}catch(e){s(e)}return}const n=r instanceof Error?r:new a("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),s(n)},t);n(e.then(i,s),()=>{clearTimeout(o)})});e.exports=i,e.exports.default=i,e.exports.TimeoutError=a},56705:(e,t)=>{"use strict";function r(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}Object.defineProperty(t,"__esModule",{value:!0}),t.addErrorMessage=r,t.setResponseValueAndErrors=function(e,t,n,a,i){e[t]=n,r(e,t,a,i)}},56743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHeaderName=function(){return"User-Agent"},t.setPlatformSpecificData=async function(e){if(i&&i.versions){const t=i.versions;t.bun?e.set("Bun",t.bun):t.deno?e.set("Deno",t.deno):t.node&&e.set("Node",t.node)}e.set("OS",`(${a.arch()}-${a.type()}-${a.release()})`)};const n=r(31635),a=n.__importStar(r(48161)),i=n.__importStar(r(1708))},56789:(e,t)=>{"use strict";function r(e){if(void 0===e)return null;try{return JSON.parse(e)}catch(e){}let t="";const r=[];let n=!1,a=!1;for(let i of e){if(n)'"'!==i||a?"\n"!==i||a?a="\\"===i&&!a:i="\\n":n=!1;else if('"'===i)n=!0,a=!1;else if("{"===i)r.push("}");else if("["===i)r.push("]");else if("}"===i||"]"===i){if(!r||r[r.length-1]!==i)return null;r.pop()}t+=i}n&&(t+='"');for(let e=r.length-1;e>=0;e-=1)t+=r[e];try{return JSON.parse(t)}catch(e){return null}}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePartialJson=t.parseJsonMarkdown=void 0,t.parseJsonMarkdown=function(e,t=r){e=e.trim();const n=/```(json)?(.*)```/s.exec(e);return t(n?n[2]:e)},t.parsePartialJson=r},56825:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BytesOutputParser=void 0;const n=r(28580);class a extends n.BaseTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","bytes"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"textEncoder",{enumerable:!0,configurable:!0,writable:!0,value:new TextEncoder})}static lc_name(){return"BytesOutputParser"}parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}}t.BytesOutputParser=a},56953:(e,t,r)=>{"use strict";const n=r(30144);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},57041:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"ตัวอักษร",verb:"ควรมี"},file:{unit:"ไบต์",verb:"ควรมี"},array:{unit:"รายการ",verb:"ควรมี"},set:{unit:"รายการ",verb:"ควรมี"}};function t(t){return e[t]??null}const r={regex:"ข้อมูลที่ป้อน",email:"ที่อยู่อีเมล",url:"URL",emoji:"อิโมจิ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"วันที่เวลาแบบ ISO",date:"วันที่แบบ ISO",time:"เวลาแบบ ISO",duration:"ช่วงเวลาแบบ ISO",ipv4:"ที่อยู่ IPv4",ipv6:"ที่อยู่ IPv6",cidrv4:"ช่วง IP แบบ IPv4",cidrv6:"ช่วง IP แบบ IPv6",base64:"ข้อความแบบ Base64",base64url:"ข้อความแบบ Base64 สำหรับ URL",json_string:"ข้อความแบบ JSON",e164:"เบอร์โทรศัพท์ระหว่างประเทศ (E.164)",jwt:"โทเคน JWT",template_literal:"ข้อมูลที่ป้อน"};return e=>{switch(e.code){case"invalid_type":return`ประเภทข้อมูลไม่ถูกต้อง: ควรเป็น ${e.expected} แต่ได้รับ ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"ไม่ใช่ตัวเลข (NaN)":"ตัวเลข";case"object":if(Array.isArray(e))return"อาร์เรย์ (Array)";if(null===e)return"ไม่มีค่า (null)";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`ค่าไม่ถูกต้อง: ควรเป็น ${s.stringifyPrimitive(e.values[0])}`:`ตัวเลือกไม่ถูกต้อง: ควรเป็นหนึ่งใน ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"ไม่เกิน":"น้อยกว่า",n=t(e.origin);return n?`เกินกำหนด: ${e.origin??"ค่า"} ควรมี${r} ${e.maximum.toString()} ${n.unit??"รายการ"}`:`เกินกำหนด: ${e.origin??"ค่า"} ควรมี${r} ${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?"อย่างน้อย":"มากกว่า",n=t(e.origin);return n?`น้อยกว่ากำหนด: ${e.origin} ควรมี${r} ${e.minimum.toString()} ${n.unit}`:`น้อยกว่ากำหนด: ${e.origin} ควรมี${r} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`รูปแบบไม่ถูกต้อง: ข้อความต้องขึ้นต้นด้วย "${t.prefix}"`:"ends_with"===t.format?`รูปแบบไม่ถูกต้อง: ข้อความต้องลงท้ายด้วย "${t.suffix}"`:"includes"===t.format?`รูปแบบไม่ถูกต้อง: ข้อความต้องมี "${t.includes}" อยู่ในข้อความ`:"regex"===t.format?`รูปแบบไม่ถูกต้อง: ต้องตรงกับรูปแบบที่กำหนด ${t.pattern}`:`รูปแบบไม่ถูกต้อง: ${r[t.format]??e.format}`}case"not_multiple_of":return`ตัวเลขไม่ถูกต้อง: ต้องเป็นจำนวนที่หารด้วย ${e.divisor} ได้ลงตัว`;case"unrecognized_keys":return`พบคีย์ที่ไม่รู้จัก: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`คีย์ไม่ถูกต้องใน ${e.origin}`;case"invalid_union":return"ข้อมูลไม่ถูกต้อง: ไม่ตรงกับรูปแบบยูเนียนที่กำหนดไว้";case"invalid_element":return`ข้อมูลไม่ถูกต้องใน ${e.origin}`;default:return"ข้อมูลไม่ถูกต้อง"}}}},57075:e=>{"use strict";e.exports=require("node:stream")},57161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCatchDef=void 0;const n=r(55767);t.parseCatchDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},57198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logPolicyName=void 0,t.logPolicy=function(e={}){var r;const i=null!==(r=e.logger)&&void 0!==r?r:n.logger.info,s=new a.Sanitizer({additionalAllowedHeaderNames:e.additionalAllowedHeaderNames,additionalAllowedQueryParameters:e.additionalAllowedQueryParameters});return{name:t.logPolicyName,async sendRequest(e,t){if(!i.enabled)return t(e);i(`Request: ${s.sanitize(e)}`);const r=await t(e);return i(`Response status code: ${r.status}`),i(`Headers: ${s.sanitize(r.headers)}`),r}}};const n=r(92425),a=r(37839);t.logPolicyName="logPolicy"},57221:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSseStream=void 0;var n=r(76864);Object.defineProperty(t,"createSseStream",{enumerable:!0,get:function(){return n.createSseStream}})},57272:e=>{"use strict";const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},57414:(e,t,r)=>{"use strict";const n=r(30144);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},57503:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zodDef=void 0,t.isEmptyObj=function(e){if(!e)return!0;for(const t in e)return!1;return!0},t.zodDef=e=>"_def"in e?e._def:e},57641:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectAnalyzer=t.FileType=void 0;const o=r(79896),l=s(r(16928));var c;!function(e){e.CODE="code",e.DOCUMENTATION="documentation",e.CONFIG="config",e.DATA="data",e.ASSET="asset",e.TEST="test",e.BUILD="build"}(c||(t.FileType=c={})),t.ProjectAnalyzer=class{constructor(e=[],t=[],r=[],n=[]){this.maxFileSize=1048576,this.maxTokens=1e5,this.fileTypeMap=new Map([[".js",c.CODE],[".jsx",c.CODE],[".ts",c.CODE],[".tsx",c.CODE],[".py",c.CODE],[".java",c.CODE],[".c",c.CODE],[".cpp",c.CODE],[".h",c.CODE],[".hpp",c.CODE],[".cs",c.CODE],[".php",c.CODE],[".rb",c.CODE],[".go",c.CODE],[".rs",c.CODE],[".swift",c.CODE],[".kt",c.CODE],[".scala",c.CODE],[".clj",c.CODE],[".hs",c.CODE],[".vue",c.CODE],[".svelte",c.CODE],[".css",c.CODE],[".scss",c.CODE],[".sass",c.CODE],[".less",c.CODE],[".styl",c.CODE],[".html",c.CODE],[".htm",c.CODE],[".xml",c.CODE],[".jsp",c.CODE],[".erb",c.CODE],[".ejs",c.CODE],[".hbs",c.CODE],[".mustache",c.CODE],[".md",c.DOCUMENTATION],[".mdx",c.DOCUMENTATION],[".txt",c.DOCUMENTATION],[".rst",c.DOCUMENTATION],[".adoc",c.DOCUMENTATION],[".org",c.DOCUMENTATION],[".json",c.CONFIG],[".yaml",c.CONFIG],[".yml",c.CONFIG],[".toml",c.CONFIG],[".ini",c.CONFIG],[".conf",c.CONFIG],[".env",c.CONFIG],[".properties",c.CONFIG],[".test.js",c.TEST],[".test.ts",c.TEST],[".spec.js",c.TEST],[".spec.ts",c.TEST],[".test.jsx",c.TEST],[".test.tsx",c.TEST],[".dockerfile",c.BUILD],[".dockerignore",c.BUILD],[".sql",c.DATA],[".db",c.DATA],[".sqlite",c.DATA],[".csv",c.DATA],[".tsv",c.DATA],[".json",c.DATA],[".png",c.ASSET],[".jpg",c.ASSET],[".jpeg",c.ASSET],[".gif",c.ASSET],[".svg",c.ASSET],[".ico",c.ASSET],[".woff",c.ASSET],[".woff2",c.ASSET],[".ttf",c.ASSET],[".eot",c.ASSET],[".mp3",c.ASSET],[".mp4",c.ASSET],[".wav",c.ASSET],[".avi",c.ASSET]]),this.languageMap=new Map([[".js","JavaScript"],[".jsx","JavaScript"],[".ts","TypeScript"],[".tsx","TypeScript"],[".py","Python"],[".java","Java"],[".c","C"],[".cpp","C++"],[".h","C/C++"],[".hpp","C++"],[".cs","C#"],[".php","PHP"],[".rb","Ruby"],[".go","Go"],[".rs","Rust"],[".swift","Swift"],[".kt","Kotlin"],[".scala","Scala"],[".vue","Vue"],[".svelte","Svelte"],[".html","HTML"],[".css","CSS"],[".scss","SCSS"],[".sass","Sass"],[".less","Less"],[".md","Markdown"]]),this.importantFilePatterns=[/^(index|main|app|server|client)\.(js|ts|jsx|tsx|py|java|go|rs)$/i,/^(package\.json|requirements\.txt|Cargo\.toml|pom\.xml|build\.gradle)$/i,/^(README|CHANGELOG|LICENSE|CONTRIBUTING)\.(md|txt|rst)$/i,/^(dockerfile|docker-compose\.ya?ml)$/i,/^\.(gitignore|env|env\.example)$/i],this.excludedDirs=["node_modules",".git","dist","build",".vscode","out",".next","coverage",".nyc_output","__pycache__",".pytest_cache","venv","env",".env","target","bin","obj",".gradle",".idea",".vs",".vscode","logs","tmp","temp",".cache",".parcel-cache",".nuxt",".output","vendor","Pods","DerivedData",".build",".swiftpm",...e],this.excludedFiles=["*.log","*.tmp","*.cache","*.lock","*.map",".DS_Store","package-lock.json","yarn.lock","pnpm-lock.yaml","Pipfile.lock","*.pyc","*.pyo","*.pyd","__pycache__","*.so","*.dylib","*.dll","*.class","*.jar","*.war","*.ear","*.zip","*.tar.gz","*.rar","*.7z","*.exe","*.msi","*.deb","*.rpm","*.dmg","*.iso","thumbs.db","desktop.ini",".directory","*.swp","*.swo","*~",...t],this.includedDirs=r,this.includedFiles=n}async analyzeProject(e,t){const r=l.basename(e),n=[];let a=0,i=0;t?.(0,"Starting intelligent project analysis..."),t?.(5,"Detecting project type and architecture...");const s=await this.detectProjectType(e),o=await this.analyzeArchitecture(e),d=await this.analyzeDependencies(e);t?.(15,"Scanning files with intelligent filtering...");const u=await this.scanFiles(e);u.length,t?.(25,"Prioritizing files by importance...");const p=this.prioritizeFiles(u,e);t?.(30,"Analyzing files...");for(let r=0;r<p.length;r++){const s=p[r],o=30+r/p.length*50;t?.(o,`Processing ${l.basename(s)}...`);try{const t=await this.analyzeFile(s,e);t&&(n.push(t),a+=t.size,i+=t.tokenCount)}catch(e){console.warn(`Failed to analyze file ${s}:`,e)}if(i>this.maxTokens){console.log(`Reached token limit (${this.maxTokens}), stopping file analysis`);break}}t?.(85,"Categorizing files...");const m=n.filter(e=>e.fileType===c.CODE),h=n.filter(e=>e.fileType===c.DOCUMENTATION),f=n.filter(e=>e.fileType===c.CONFIG);t?.(90,"Generating language statistics...");const g=this.generateLanguageStats(n);t?.(95,"Building project structure...");const y=await this.buildProjectStructure(e,n),v=this.detectEntryPoints(n),b=this.detectMainDirectories(e,n);return t?.(100,"Analysis complete!"),{projectPath:e,projectName:r,projectType:s,files:n,codeFiles:m,documentFiles:h,configFiles:f,totalFiles:n.length,totalSize:a,totalTokens:i,languages:g,structure:y,architecture:o,dependencies:d,entryPoints:v,mainDirectories:b}}async scanFiles(e){const t=[],r=async e=>{try{const n=await o.promises.readdir(e,{withFileTypes:!0});for(const a of n){const n=l.join(e,a.name);a.isDirectory()?this.isExcludedDirectory(a.name)||await r(n):a.isFile()&&(this.isExcludedFile(a.name)||t.push(n))}}catch(t){console.warn(`Failed to scan directory ${e}:`,t)}};return await r(e),t}async analyzeFile(e,t){try{const r=await o.promises.stat(e);if(r.size>this.maxFileSize)return console.log(`Skipping large file: ${e} (${r.size} bytes)`),null;const n=await o.promises.readFile(e,"utf-8"),a=l.relative(t,e),i=l.extname(e).toLowerCase(),s=l.basename(e),d=this.determineFileType(e,n);if(d===c.ASSET&&!this.isImportantFile(s))return null;const u=this.countTokens(n),p=this.languageMap.get(i),m=await this.analyzeFileMetadata(e,n,d);return{id:this.generateFileId(a),path:e,relativePath:a,content:n,size:r.size,extension:i,fileType:d,language:p,tokenCount:u,lastModified:r.mtime,metadata:m}}catch(t){return console.warn(`Failed to read file ${e}:`,t),null}}async detectProjectType(e){try{const t=l.join(e,"package.json"),r=l.join(e,"requirements.txt"),n=l.join(e,"Cargo.toml"),a=l.join(e,"pom.xml"),i=l.join(e,"build.gradle");if(await this.fileExists(t)){const e=JSON.parse(await o.promises.readFile(t,"utf-8"));return e.dependencies?.react||e.devDependencies?.react?"React Application":e.dependencies?.vue||e.devDependencies?.vue?"Vue Application":e.dependencies?.next||e.devDependencies?.next?"Next.js Application":e.dependencies?.express||e.devDependencies?.express?"Node.js/Express Application":"JavaScript/TypeScript Project"}return await this.fileExists(r)?"Python Project":await this.fileExists(n)?"Rust Project":await this.fileExists(a)?"Java/Maven Project":await this.fileExists(i)?"Java/Gradle Project":"General Project"}catch(e){return"Unknown Project"}}async analyzeArchitecture(e){const t={type:"single",layers:[],patterns:[]};try{await this.fileExists(l.join(e,"package.json"))&&(t.packageManager="npm",await this.fileExists(l.join(e,"yarn.lock"))?t.packageManager="yarn":await this.fileExists(l.join(e,"pnpm-lock.yaml"))&&(t.packageManager="pnpm")),await this.fileExists(l.join(e,"webpack.config.js"))?t.buildTool="webpack":await this.fileExists(l.join(e,"vite.config.js"))?t.buildTool="vite":await this.fileExists(l.join(e,"rollup.config.js"))&&(t.buildTool="rollup");const r=l.join(e,"package.json");if(await this.fileExists(r)){const e=JSON.parse(await o.promises.readFile(r,"utf-8")),n={...e.dependencies,...e.devDependencies};n.react?t.framework="React":n.vue?t.framework="Vue":n.angular?t.framework="Angular":n.svelte?t.framework="Svelte":n.express?t.framework="Express":n.fastify&&(t.framework="Fastify")}t.layers=await this.detectArchitectureLayers(e),t.patterns=await this.detectDesignPatterns(e)}catch(e){console.warn("Failed to analyze architecture:",e)}return t}async analyzeDependencies(e){const t={dependencies:[],devDependencies:[],peerDependencies:[],internalDependencies:new Map};try{const r=l.join(e,"package.json");if(await this.fileExists(r)){const e=JSON.parse(await o.promises.readFile(r,"utf-8"));t.packageJson=e,t.dependencies=Object.keys(e.dependencies||{}),t.devDependencies=Object.keys(e.devDependencies||{}),t.peerDependencies=Object.keys(e.peerDependencies||{})}const n=l.join(e,"requirements.txt");if(await this.fileExists(n)){const e=await o.promises.readFile(n,"utf-8");t.requirements=e.split("\n").filter(e=>e.trim()&&!e.startsWith("#"))}}catch(e){console.warn("Failed to analyze dependencies:",e)}return t}prioritizeFiles(e,t){return e.sort((e,r)=>{const n=this.calculateFileImportance(e,t);return this.calculateFileImportance(r,t)-n})}calculateFileImportance(e,t){const r=l.basename(e),n=l.relative(t,e),a=l.extname(e).toLowerCase();let i=0;switch(this.importantFilePatterns.some(e=>e.test(r))&&(i+=100),this.fileTypeMap.get(a)){case c.CODE:i+=50;break;case c.DOCUMENTATION:i+=30;break;case c.CONFIG:i+=40;break;case c.TEST:i+=20;break;default:i+=10}const s=n.split(l.sep).length;return i+=Math.max(0,20-2*s),(r.toLowerCase().includes("main")||r.toLowerCase().includes("index"))&&(i+=30),i}determineFileType(e,t){const r=l.extname(e).toLowerCase(),n=l.basename(e).toLowerCase();return n.includes("test")||n.includes("spec")?c.TEST:n.includes("config")||n.includes("setting")?c.CONFIG:"dockerfile"===n||n.includes("docker")?c.BUILD:this.fileTypeMap.get(r)||c.CODE}countTokens(e){return e.split(/\s+|[.,;:!?(){}\[\]"'`]/).filter(e=>e.length>0).length}async analyzeFileMetadata(e,t,r){const n=l.basename(e),a={isMainFile:this.isImportantFile(n),importance:this.calculateFileImportance(e,l.dirname(e)),dependencies:[],exports:[],imports:[]};return r===c.CODE&&(a.imports=this.extractImports(t),a.exports=this.extractExports(t)),a}extractImports(e){const t=[],r=/import\s+.*?from\s+['"]([^'"]+)['"]/g,n=/require\(['"]([^'"]+)['"]\)/g;let a;for(;null!==(a=r.exec(e));)t.push(a[1]);for(;null!==(a=n.exec(e));)t.push(a[1]);return t}extractExports(e){const t=[],r=/export\s+(?:default\s+)?(?:class|function|const|let|var)\s+([a-zA-Z_$][a-zA-Z0-9_$]*)/g;let n;for(;null!==(n=r.exec(e));)t.push(n[1]);return t}generateFileId(e){return e.replace(/[^a-zA-Z0-9]/g,"_")}isImportantFile(e){return this.importantFilePatterns.some(t=>t.test(e))}generateLanguageStats(e){const t=new Map,r=e.reduce((e,t)=>e+t.size,0);e.reduce((e,t)=>e+t.tokenCount,0);for(const r of e){const e=r.language||"Unknown",n=r.extension;t.has(e)||t.set(e,{language:e,extension:n,fileCount:0,totalSize:0,totalTokens:0,percentage:0});const a=t.get(e);a.fileCount++,a.totalSize+=r.size,a.totalTokens+=r.tokenCount}for(const e of t.values())e.percentage=r>0?e.totalSize/r*100:0;return Array.from(t.values()).sort((e,t)=>t.percentage-e.percentage)}detectEntryPoints(e){const t=[],r=[/^(index|main|app|server|client)\.(js|ts|jsx|tsx|py)$/i,/^src\/(index|main|app)\.(js|ts|jsx|tsx)$/i,/^(app|main)\.py$/i];for(const n of e){const e=l.basename(n.path);r.some(t=>t.test(e))&&t.push(n.relativePath)}return t}detectMainDirectories(e,t){const r=new Map;for(const e of t){const t=l.dirname(e.relativePath).split(l.sep)[0];t&&"."!==t&&r.set(t,(r.get(t)||0)+1)}return Array.from(r.entries()).sort((e,t)=>t[1]-e[1]).slice(0,10).map(([e])=>e)}async detectArchitectureLayers(e){const t=[],r=[{pattern:/^(src|source)$/i,type:"presentation",name:"Source Code"},{pattern:/^(components?|views?|pages?)$/i,type:"presentation",name:"Presentation Layer"},{pattern:/^(services?|business|logic)$/i,type:"business",name:"Business Logic"},{pattern:/^(data|models?|entities?)$/i,type:"data",name:"Data Layer"},{pattern:/^(utils?|helpers?|lib|libraries?)$/i,type:"infrastructure",name:"Infrastructure"},{pattern:/^(config|configurations?)$/i,type:"infrastructure",name:"Configuration"}];try{const n=await o.promises.readdir(e,{withFileTypes:!0});for(const e of n)if(e.isDirectory())for(const n of r)if(n.pattern.test(e.name)){t.push({name:n.name,type:n.type,directories:[e.name],files:[],description:`${n.name} containing ${e.name} directory`});break}}catch(e){console.warn("Failed to detect architecture layers:",e)}return t}async detectDesignPatterns(e){const t=[];try{const r=await o.promises.readdir(e,{withFileTypes:!0});for(const e of r)if(e.isDirectory())switch(e.name.toLowerCase()){case"controllers":t.push("MVC Pattern");break;case"middleware":t.push("Middleware Pattern");break;case"factories":t.push("Factory Pattern");break;case"adapters":t.push("Adapter Pattern");break;case"observers":t.push("Observer Pattern");break;case"strategies":t.push("Strategy Pattern")}}catch(e){console.warn("Failed to detect design patterns:",e)}return t}async fileExists(e){try{return await o.promises.access(e),!0}catch{return!1}}async buildProjectStructure(e,t){const r={name:l.basename(e),type:"directory",path:e,relativePath:l.relative(l.dirname(e),e),children:[]};try{const n=await o.promises.readdir(e,{withFileTypes:!0});let a=0,i=0;for(const s of n){const n=l.join(e,s.name),c=l.relative(l.dirname(e),n);if(s.isDirectory()){if(!this.isExcludedDirectory(s.name)){const e=await this.buildProjectStructure(n,t);r.children.push(e),a+=e.size||0,i+=e.tokenCount||0}}else if(s.isFile()&&!this.isExcludedFile(s.name)){const d=await o.promises.stat(n),u=t?.find(e=>e.path===n),p=(l.extname(s.name).toLowerCase(),this.determineFileType(n,"")),m=this.calculateFileImportance(n,e),h={name:s.name,type:"file",path:n,relativePath:c,fileType:p,importance:m,size:d.size,tokenCount:u?.tokenCount||0,description:u?`${u.language||"Unknown"} file`:void 0};r.children.push(h),a+=d.size,i+=u?.tokenCount||0}}r.size=a,r.tokenCount=i,r.children.sort((e,t)=>{if("directory"===e.type&&"file"===t.type)return-1;if("file"===e.type&&"directory"===t.type)return 1;const r=e.importance||0;return(t.importance||0)-r})}catch(t){console.warn(`Failed to build structure for ${e}:`,t)}return r}isExcludedDirectory(e){return!!this.excludedDirs.includes(e)||this.includedDirs.length>0&&!this.includedDirs.includes(e)||!(!e.startsWith(".")||["src","lib","app",".github",".vscode"].includes(e))}isExcludedFile(e){if(this.excludedFiles.includes(e))return!0;if(this.includedFiles.length>0){const t=l.extname(e).toLowerCase();if(!this.includedFiles.includes(e)&&!this.includedFiles.some(e=>e.endsWith(t)))return!0}const t=l.extname(e).toLowerCase();if(this.excludedFiles.includes(t))return!0;for(const t of this.excludedFiles)if(t.includes("*")&&new RegExp(t.replace(/\*/g,".*")).test(e))return!0;return!(!e.startsWith(".")||this.isImportantFile(e))}static getSupportedLanguages(){return[".js",".jsx",".ts",".tsx",".py",".java",".c",".cpp",".h",".hpp",".cs",".php",".rb",".go",".rs",".html",".css",".scss",".sass",".less",".json",".xml",".yaml",".yml",".md",".txt",".sql",".sh",".bat"]}getLanguageStats(e){const t={};for(const r of e){const e=r.extension||"unknown";t[e]||(t[e]={count:0,size:0}),t[e].count++,t[e].size+=r.size}return t}getFileLanguage(e){const t=l.extname(e).toLowerCase();return this.languageMap.get(t)||"Unknown"}async smartScanFiles(e,t){const r=await this.scanFiles(e);let n=r;return r.length>1e3&&(n=r.filter(t=>{const r=l.basename(t),n=l.relative(e,t);if(this.isImportantFile(r))return!0;if(n.split(l.sep).length<=3)return!0;const a=l.extname(t).toLowerCase(),i=this.fileTypeMap.get(a);return i===c.CODE||i===c.CONFIG})),n}getProjectSummary(e){const{projectName:t,projectType:r,totalFiles:n,languages:a,totalSize:i}=e;return`${t} is a ${r} project with ${n} files, primarily written in ${a[0]?.language||"Unknown"}. Total size: ${(i/1048576).toFixed(2)}MB.`}}},57669:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HumanMessageChunk=t.HumanMessage=void 0,t.isHumanMessage=function(e){return"human"===e.getType()},t.isHumanMessageChunk=function(e){return"human"===e.getType()};const n=r(15785);class a extends n.BaseMessage{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,t){super(e,t)}}t.HumanMessage=a;class i extends n.BaseMessageChunk{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,t){super(e,t)}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),id:this.id??e.id})}}t.HumanMessageChunk=i},57733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Steps=void 0;const n=r(82040),a=r(75552),i=r(262),s=r(54815);class o extends n.APIResource{retrieve(e,t,r){const{thread_id:n,run_id:a,...o}=t;return this._client.get(s.path`/threads/${n}/runs/${a}/steps/${e}`,{query:o,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t,r){const{thread_id:n,...o}=t;return this._client.getAPIList(s.path`/threads/${n}/runs/${e}/steps`,a.CursorPage,{query:o,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}t.Steps=o},57831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertUuid=function(e,t){if(!r.test(e))throw new Error(void 0!==t?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`);return e};const r=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i},57963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatGoogleGenerativeAI=void 0;const n=r(46445),a=r(82331),i=r(80761),s=r(4538),o=r(60845),l=r(58618),c=r(17729),d=r(15101),u=r(3730),p=r(7523);class m extends i.BaseChatModel{static lc_name(){return"ChatGoogleGenerativeAI"}get lc_secrets(){return{apiKey:"GOOGLE_API_KEY"}}get lc_aliases(){return{apiKey:"google_api_key"}}get _isMultimodalModel(){return this.model.includes("vision")||this.model.startsWith("gemini-1.5")||this.model.startsWith("gemini-2")}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","google_genai"]}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxOutputTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"safetySettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"json",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"convertSystemMessageToHumanContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.model=e.model.replace(/^models\//,""),this.maxOutputTokens=e.maxOutputTokens??this.maxOutputTokens,this.maxOutputTokens&&this.maxOutputTokens<0)throw new Error("`maxOutputTokens` must be a positive integer");if(this.temperature=e.temperature??this.temperature,this.temperature&&(this.temperature<0||this.temperature>2))throw new Error("`temperature` must be in the range of [0.0,2.0]");if(this.topP=e.topP??this.topP,this.topP&&this.topP<0)throw new Error("`topP` must be a positive integer");if(this.topP&&this.topP>1)throw new Error("`topP` must be below 1.");if(this.topK=e.topK??this.topK,this.topK&&this.topK<0)throw new Error("`topK` must be a positive integer");if(this.stopSequences=e.stopSequences??this.stopSequences,this.apiKey=e.apiKey??(0,a.getEnvironmentVariable)("GOOGLE_API_KEY"),!this.apiKey)throw new Error("Please set an API key for Google GenerativeAI in the environment variable GOOGLE_API_KEY or in the `apiKey` field of the ChatGoogleGenerativeAI constructor");if(this.safetySettings=e.safetySettings??this.safetySettings,this.safetySettings&&this.safetySettings.length>0&&new Set(this.safetySettings.map(e=>e.category)).size!==this.safetySettings.length)throw new Error("The categories in `safetySettings` array must be unique");this.streaming=e.streaming??this.streaming,this.json=e.json,this.client=new n.GoogleGenerativeAI(this.apiKey).getGenerativeModel({model:this.model,safetySettings:this.safetySettings,generationConfig:{stopSequences:this.stopSequences,maxOutputTokens:this.maxOutputTokens,temperature:this.temperature,topP:this.topP,topK:this.topK,...this.json?{responseMimeType:"application/json"}:{}}},{apiVersion:e.apiVersion,baseUrl:e.baseUrl}),this.streamUsage=e.streamUsage??this.streamUsage}useCachedContent(e,t,r){this.apiKey&&(this.client=new n.GoogleGenerativeAI(this.apiKey).getGenerativeModelFromCachedContent(e,t,r))}get useSystemInstruction(){return"boolean"==typeof this.convertSystemMessageToHumanContent?!this.convertSystemMessageToHumanContent:this.computeUseSystemInstruction}get computeUseSystemInstruction(){return"gemini-1.0-pro-001"!==this.model&&!this.model.startsWith("gemini-pro-vision")&&!this.model.startsWith("gemini-1.0-pro-vision")&&"gemini-pro"!==this.model}getLsParams(e){return{ls_provider:"google_genai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:this.client.generationConfig.temperature,ls_max_tokens:this.client.generationConfig.maxOutputTokens,ls_stop:e.stop}}_combineLLMOutput(){return[]}_llmType(){return"googlegenerativeai"}bindTools(e,t){return this.withConfig({tools:(0,p.convertToolsToGenAI)(e)?.tools,...t})}invocationParams(e){const t=e?.tools?.length?(0,p.convertToolsToGenAI)(e.tools,{toolChoice:e.tool_choice,allowedFunctionNames:e.allowedFunctionNames}):void 0;return e?.responseSchema?(this.client.generationConfig.responseSchema=e.responseSchema,this.client.generationConfig.responseMimeType="application/json"):(this.client.generationConfig.responseSchema=void 0,this.client.generationConfig.responseMimeType=this.json?"application/json":void 0),{...t?.tools?{tools:t.tools}:{},...t?.toolConfig?{toolConfig:t.toolConfig}:{}}}async _generate(e,t,r){const n=(0,d.convertBaseMessagesToContent)(e,this._isMultimodalModel,this.useSystemInstruction);let a=n;if("system"===n[0].role){const[e]=n;this.client.systemInstruction=e,a=n.slice(1)}const i=this.invocationParams(t);if(this.streaming){const n={},a=this._streamResponseChunks(e,t,r),i={};for await(const e of a){const t=e.generationInfo?.completion??0;void 0===i[t]?i[t]=e:i[t]=i[t].concat(e)}return{generations:Object.entries(i).sort(([e],[t])=>parseInt(e,10)-parseInt(t,10)).map(([e,t])=>t),llmOutput:{estimatedTokenUsage:n}}}const s=await this.completionWithRetry({...i,contents:a});let o;if("usageMetadata"in s.response){const e=s.response.usageMetadata;o={input_tokens:e.promptTokenCount??0,output_tokens:e.candidatesTokenCount??0,total_tokens:e.totalTokenCount??0}}const l=(0,d.mapGenerateContentResultToChatResult)(s.response,{usageMetadata:o});return l.generations?.length>0&&await(r?.handleLLMNewToken(l.generations[0]?.text??"")),l}async*_streamResponseChunks(e,t,r){const n=(0,d.convertBaseMessagesToContent)(e,this._isMultimodalModel,this.useSystemInstruction);let a=n;if("system"===n[0].role){const[e]=n;this.client.systemInstruction=e,a=n.slice(1)}const i={...this.invocationParams(t),contents:a},s=await this.caller.callWithOptions({signal:t?.signal},async()=>{const{stream:e}=await this.client.generateContentStream(i);return e});let o,l=0;for await(const e of s){if("usageMetadata"in e&&!1!==this.streamUsage&&!1!==t.streamUsage){const t=e.usageMetadata;if(o){const e=(t.candidatesTokenCount??0)-o.output_tokens;o={input_tokens:0,output_tokens:e,total_tokens:e}}else o={input_tokens:t.promptTokenCount??0,output_tokens:t.candidatesTokenCount??0,total_tokens:t.totalTokenCount??0}}const n=(0,d.convertResponseContentToChatGenerationChunk)(e,{usageMetadata:o,index:l});l+=1,n&&(yield n,await(r?.handleLLMNewToken(n.text??"")))}}async completionWithRetry(e,t){return this.caller.callWithOptions({signal:t?.signal},async()=>{try{return await this.client.generateContent(e)}catch(e){throw e.message?.includes("400 Bad Request")&&(e.status=400),e}})}withStructuredOutput(e,t){const r=e,n=t?.name,a=t?.method,i=t?.includeRaw;if("jsonMode"===a)throw new Error('ChatGoogleGenerativeAI only supports "jsonSchema" or "functionCalling" as a method.');let d,p;if("functionCalling"===a){let e,t=n??"extract";if((0,o.isInteropZodSchema)(r)){const n=(0,c.schemaToGenerativeAIParameters)(r);e=[{functionDeclarations:[{name:t,description:n.description??"A function available to call.",parameters:n}]}],p=new u.GoogleGenerativeAIToolsOutputParser({returnSingle:!0,keyName:t,zodSchema:r})}else{let n;"string"==typeof r.name&&"object"==typeof r.parameters&&null!=r.parameters?(n=r,n.parameters=(0,c.removeAdditionalProperties)(r.parameters),t=r.name):n={name:t,description:r.description??"",parameters:(0,c.removeAdditionalProperties)(r)},e=[{functionDeclarations:[n]}],p=new u.GoogleGenerativeAIToolsOutputParser({returnSingle:!0,keyName:t})}d=this.bindTools(e).withConfig({allowedFunctionNames:[t]})}else{const e=(0,c.schemaToGenerativeAIParameters)(r);d=this.withConfig({responseSchema:e}),p=new l.JsonOutputParser}if(!i)return d.pipe(p).withConfig({runName:"ChatGoogleGenerativeAIStructuredOutput"});const m=s.RunnablePassthrough.assign({parsed:(e,t)=>p.invoke(e.raw,t)}),h=s.RunnablePassthrough.assign({parsed:()=>null}),f=m.withFallbacks({fallbacks:[h]});return s.RunnableSequence.from([{raw:d},f]).withConfig({runName:"StructuredOutputRunnable"})}}t.ChatGoogleGenerativeAI=m},57975:e=>{"use strict";e.exports=require("node:util")},57994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapAbortSignalLike=function(e){if(e instanceof AbortSignal)return{abortSignal:e};if(e.aborted)return{abortSignal:AbortSignal.abort(e.reason)};const t=new AbortController;let r=!0;function n(){r&&(e.removeEventListener("abort",a),r=!1)}function a(){t.abort(e.reason),n()}return e.addEventListener("abort",a),{abortSignal:t.signal,cleanup:n}}},58091:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Models=void 0;const n=r(24472),a=r(24384),i=r(2758),s=r(64735);class o extends n.APIResource{retrieve(e,t={},r){const{betas:n}=t??{};return this._client.get(s.path`/v1/models/${e}?beta=true`,{...r,headers:(0,i.buildHeaders)([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}list(e={},t){const{betas:r,...n}=e??{};return this._client.getAPIList("/v1/models?beta=true",a.Page,{query:n,...t,headers:(0,i.buildHeaders)([{...null!=r?.toString()?{"anthropic-beta":r?.toString()}:void 0},t?.headers])})}}t.Models=o},58092:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalServerError=t.RateLimitError=t.UnprocessableEntityError=t.ConflictError=t.NotFoundError=t.PermissionDeniedError=t.AuthenticationError=t.BadRequestError=t.APIConnectionTimeoutError=t.APIConnectionError=t.APIUserAbortError=t.APIError=t.AnthropicError=void 0;const n=r(8709);class a extends Error{}t.AnthropicError=a;class i extends a{constructor(e,t,r,n){super(`${i.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.requestID=n?.get("request-id"),this.error=t}static makeMessage(e,t,r){const n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,a){if(!e||!a)return new s({message:r,cause:(0,n.castToError)(t)});const f=t;return 400===e?new o(e,f,r,a):401===e?new l(e,f,r,a):403===e?new c(e,f,r,a):404===e?new d(e,f,r,a):409===e?new u(e,f,r,a):422===e?new p(e,f,r,a):429===e?new m(e,f,r,a):e>=500?new h(e,f,r,a):new i(e,f,r,a)}}t.APIError=i,t.APIUserAbortError=class extends i{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}};class s extends i{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}t.APIConnectionError=s,t.APIConnectionTimeoutError=class extends s{constructor({message:e}={}){super({message:e??"Request timed out."})}};class o extends i{}t.BadRequestError=o;class l extends i{}t.AuthenticationError=l;class c extends i{}t.PermissionDeniedError=c;class d extends i{}t.NotFoundError=d;class u extends i{}t.ConflictError=u;class p extends i{}t.UnprocessableEntityError=p;class m extends i{}t.RateLimitError=m;class h extends i{}t.InternalServerError=h},58219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToChunk=t.mapChatMessagesToStoredMessages=t.mapStoredMessagesToChatMessages=t.mapStoredMessageToChatMessage=t.getBufferString=t.coerceMessageLikeToMessage=void 0;const n=r(30528),a=r(64494),i=r(66267),s=r(7886),o=r(71724),l=r(71111),c=r(46903),d=r(80202);function u(e){return(0,n._isToolCall)(e)?e:"string"==typeof e.id&&"function"===e.type&&"object"==typeof e.function&&null!==e.function&&"arguments"in e.function&&"string"==typeof e.function.arguments&&"name"in e.function&&"string"==typeof e.function.name?{id:e.id,args:JSON.parse(e.function.arguments),name:e.function.name,type:"tool_call"}:e}function p(e){const{type:t,...r}=e;if("human"===t||"user"===t)return new l.HumanMessage(r);if("ai"===t||"assistant"===t){const{tool_calls:e,...t}=r;if(!Array.isArray(e))return new a.AIMessage(r);const n=e.map(u);return new a.AIMessage({...t,tool_calls:n})}if("system"===t)return new c.SystemMessage(r);if("tool"===t&&"tool_call_id"in r)return new d.ToolMessage({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}function m(e){const t=function(e){if(void 0!==e.data)return e;{const t=e;return{type:t.type,data:{content:t.text,role:t.role,name:void 0,tool_call_id:void 0}}}}(e);switch(t.type){case"human":return new l.HumanMessage(t.data);case"ai":return new a.AIMessage(t.data);case"system":return new c.SystemMessage(t.data);case"function":if(void 0===t.data.name)throw new Error("Name must be defined for function messages");return new o.FunctionMessage(t.data);case"tool":if(void 0===t.data.tool_call_id)throw new Error("Tool call ID must be defined for tool messages");return new d.ToolMessage(t.data);case"generic":if(void 0===t.data.role)throw new Error("Role must be defined for chat messages");return new s.ChatMessage(t.data);default:throw new Error(`Got unexpected type: ${t.type}`)}}t.coerceMessageLikeToMessage=function(e){if("string"==typeof e)return new l.HumanMessage(e);if((0,i.isBaseMessage)(e))return e;if(Array.isArray(e)){const[t,r]=e;return p({type:t,content:r})}if((0,i._isMessageFieldWithRole)(e)){const{role:t,...r}=e;return p({...r,type:t})}return p(e)},t.getBufferString=function(e,t="Human",r="AI"){const n=[];for(const a of e){let e;if("human"===a._getType())e=t;else if("ai"===a._getType())e=r;else if("system"===a._getType())e="System";else if("function"===a._getType())e="Function";else if("tool"===a._getType())e="Tool";else{if("generic"!==a._getType())throw new Error(`Got unsupported message type: ${a._getType()}`);e=a.role}const i=a.name?`${a.name}, `:"",s="string"==typeof a.content?a.content:JSON.stringify(a.content,null,2);n.push(`${e}: ${i}${s}`)}return n.join("\n")},t.mapStoredMessageToChatMessage=m,t.mapStoredMessagesToChatMessages=function(e){return e.map(m)},t.mapChatMessagesToStoredMessages=function(e){return e.map(e=>e.toDict())},t.convertToChunk=function(e){const t=e._getType();if("human"===t)return new l.HumanMessageChunk({...e});if("ai"===t){let t={...e};return"tool_calls"in t&&(t={...t,tool_call_chunks:t.tool_calls?.map(e=>({...e,type:"tool_call_chunk",index:void 0,args:JSON.stringify(e.args)}))}),new a.AIMessageChunk({...t})}if("system"===t)return new c.SystemMessageChunk({...e});if("function"===t)return new o.FunctionMessageChunk({...e});if(s.ChatMessage.isInstance(e))return new s.ChatMessageChunk({...e});throw new Error("Unknown message type.")}},58303:(e,t,r)=>{var n=r(93961);t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],a=0;a<t.retries;a++)n.push(this.createTimeout(a,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(a,t)),n.sort(function(e,t){return e-t}),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(n,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var a in n=[],e)"function"==typeof e[a]&&n.push(a);for(var i=0;i<n.length;i++){var s=n[i],o=e[s];e[s]=function(n){var a=t.operation(r),i=Array.prototype.slice.call(arguments,1),s=i.pop();i.push(function(e){a.retry(e)||(e&&(arguments[0]=a.mainError()),s.apply(this,arguments))}),a.attempt(function(){n.apply(e,i)})}.bind(e,o),e[s].options=r}}},58366:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNativeEnumDef=void 0,t.parseNativeEnumDef=function(e){const t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}},58385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(42868);t.default=function(e){return"string"==typeof e&&n.default.test(e)}},58490:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0,t._iterSSEMessages=h;const a=r(79632),i=r(44172),s=r(446),o=r(59724),l=r(446),c=r(30917),d=r(773),u=r(86188),p=r(44172);class m{constructor(e,t,r){this.iterator=e,n.set(this,void 0),this.controller=t,a.__classPrivateFieldSet(this,n,r,"f")}static fromSSEResponse(e,t,r){let n=!1;const a=r?(0,u.loggerFor)(r):console;return new m(async function*(){if(n)throw new i.OpenAIError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of h(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null!==n.event&&n.event.startsWith("thread.")){let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if("error"==n.event)throw new p.APIError(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}else{let t;try{t=JSON.parse(n.data)}catch(e){throw a.error("Could not parse message into JSON:",n.data),a.error("From chunk:",n.raw),e}if(t&&t.error)throw new p.APIError(void 0,t.error,void 0,e.headers);yield t}r=!0}catch(e){if((0,c.isAbortError)(e))return;throw e}finally{r||t.abort()}},t,r)}static fromReadableStream(e,t,r){let n=!1;return new m(async function*(){if(n)throw new i.OpenAIError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new o.LineDecoder,r=(0,l.ReadableStreamToAsyncIterable)(e);for await(const e of r)for(const r of t.decode(e))yield r;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(e){if((0,c.isAbortError)(e))return;throw e}finally{r||t.abort()}},t,r)}[(n=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=n=>({next:()=>{if(0===n.length){const n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new m(()=>i(e),this.controller,a.__classPrivateFieldGet(this,n,"f")),new m(()=>i(t),this.controller,a.__classPrivateFieldGet(this,n,"f"))]}toReadableStream(){const e=this;let t;return(0,s.makeReadableStream)({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:n}=await t.next();if(n)return e.close();const a=(0,d.encodeUTF8)(JSON.stringify(r)+"\n");e.enqueue(a)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}async function*h(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new i.OpenAIError("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new i.OpenAIError("Attempted to iterate over a response with no body")}const r=new f,n=new o.LineDecoder,a=(0,l.ReadableStreamToAsyncIterable)(e.body);for await(const e of async function*(e){let t=new Uint8Array;for await(const r of e){if(null==r)continue;const e=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?(0,d.encodeUTF8)(r):r;let n,a=new Uint8Array(t.length+e.length);for(a.set(t),a.set(e,t.length),t=a;-1!==(n=(0,o.findDoubleNewlineIndex)(t));)yield t.slice(0,n),t=t.slice(n)}t.length>0&&(yield t)}(a))for(const t of n.decode(e)){const e=r.decode(t);e&&(yield e)}for(const e of n.flush()){const t=r.decode(e);t&&(yield t)}}t.Stream=m;class f{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}},58611:e=>{"use strict";e.exports=require("http")},58618:(e,t,r)=>{e.exports=r(96404)},58732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePipelineDef=void 0;const n=r(84769);t.parsePipelineDef=(e,t)=>{if("input"===t.pipeStrategy)return(0,n.parseDef)(e.in._def,t);if("output"===t.pipeStrategy)return(0,n.parseDef)(e.out._def,t);const r=(0,n.parseDef)(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,(0,n.parseDef)(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter(e=>void 0!==e)}}},58737:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._LC_CONTEXT_VARIABLES_KEY=void 0,t._LC_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables")},58908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextSplitter=t.trimMessages=t.mergeMessageRuns=t.filterMessages=void 0;const n=r(48307),a=r(64494),i=r(7886),s=r(71724),o=r(71111),l=r(31615),c=r(46903),d=r(80202),u=r(58219),p=(e,t)=>{const r=[...new Set(t?.map(e=>{if("string"==typeof e)return e;const t=new e({});if(!("_getType"in t)||"function"!=typeof t._getType)throw new Error("Invalid type provided.");return t._getType()}))],n=e._getType();return r.some(e=>e===n)};function m(e,t={}){const{includeNames:r,excludeNames:n,includeTypes:a,excludeTypes:i,includeIds:s,excludeIds:o}=t,l=[];for(const t of e)n&&t.name&&n.includes(t.name)||i&&p(t,i)||o&&t.id&&o.includes(t.id)||(a||s||r?(r&&t.name&&r.some(e=>e===t.name)||a&&p(t,a)||s&&t.id&&s.some(e=>e===t.id))&&l.push(t):l.push(t));return l}function h(e){if(!e.length)return[];const t=[];for(const r of e){const e=r,n=t.pop();if(n)if("tool"===e._getType()||e._getType()!==n._getType())t.push(n,e);else{const r=(0,u.convertToChunk)(n),a=(0,u.convertToChunk)(e),i=r.concat(a);"string"==typeof r.content&&"string"==typeof a.content&&(i.content=`${r.content}\n${a.content}`),t.push(b(i))}else t.push(e)}return t}async function f(e,t){const{maxTokens:r,tokenCounter:n,strategy:a="last",allowPartial:i=!1,endOn:s,startOn:o,includeSystem:l=!1,textSplitter:c}=t;if(o&&"first"===a)throw new Error("`startOn` should only be specified if `strategy` is 'last'.");if(l&&"first"===a)throw new Error("`includeSystem` should only be specified if `strategy` is 'last'.");let d;d="getNumTokens"in n?async e=>(await Promise.all(e.map(e=>n.getNumTokens(e.content)))).reduce((e,t)=>e+t,0):async e=>n(e);let u=_;if(c&&(u="splitText"in c?c.splitText:async e=>c(e)),"first"===a)return g(e,{maxTokens:r,tokenCounter:d,textSplitter:u,partialStrategy:i?"first":void 0,endOn:s});if("last"===a)return async function(e,t){const{allowPartial:r=!1,includeSystem:n=!1,endOn:a,startOn:i,...s}=t;if(a){const t=Array.isArray(a)?a:[a];for(;e&&!p(e[e.length-1],t);)e.pop()}const o=n&&"system"===e[0]._getType();let l=o?e.slice(0,1).concat(e.slice(1).reverse()):e.reverse();return l=await g(l,{...s,partialStrategy:r?"last":void 0,endOn:i}),o?[l[0],...l.slice(1).reverse()]:l.reverse()}(e,{maxTokens:r,tokenCounter:d,textSplitter:u,allowPartial:i,includeSystem:l,startOn:o,endOn:s});throw new Error(`Unrecognized strategy: '${a}'. Must be one of 'first' or 'last'.`)}async function g(e,t){const{maxTokens:r,tokenCounter:n,textSplitter:a,partialStrategy:i,endOn:s}=t;let o=[...e],l=0;for(let e=0;e<o.length;e+=1){const t=e>0?o.slice(0,-e):o;if(await n(t)<=r){l=o.length-e;break}}if(l<o.length-1&&i){let e=!1;if(Array.isArray(o[l].content)){const t=o[l];if("string"==typeof t.content)throw new Error("Expected content to be an array.");const a=t.content.length,s="last"===i?[...t.content].reverse():t.content;for(let c=1;c<=a;c+=1){const a="first"===i?s.slice(0,c):s.slice(-c),d=Object.fromEntries(Object.entries(t).filter(([e])=>"type"!==e&&!e.startsWith("lc_"))),u=v(t._getType(),{...d,content:a}),p=[...o.slice(0,l),u];if(!(await n(p)<=r))break;o=p,l+=1,e=!0}e&&"last"===i&&(t.content=[...s].reverse())}if(!e){const e=o[l];let t;if(Array.isArray(e.content)&&e.content.some(e=>"string"==typeof e||"text"===e.type)){const r=e.content.find(e=>"text"===e.type&&e.text);t=r?.text}else"string"==typeof e.content&&(t=e.content);if(t){const s=await a(t),c=s.length;"last"===i&&s.reverse();for(let t=0;t<c-1;t+=1)if(s.pop(),e.content=s.join(""),await n([...o.slice(0,l),e])<=r){"last"===i&&(e.content=[...s].reverse().join("")),o=[...o.slice(0,l),e],l+=1;break}}}}if(s){const e=Array.isArray(s)?s:[s];for(;l>0&&!p(o[l-1],e);)l-=1}return o.slice(0,l)}t.filterMessages=function(e,t){return Array.isArray(e)?m(e,t):n.RunnableLambda.from(t=>m(t,e))},t.mergeMessageRuns=function(e){return Array.isArray(e)?h(e):n.RunnableLambda.from(h)},t.trimMessages=function(e,t){if(Array.isArray(e)){const r=e;if(!t)throw new Error("Options parameter is required when providing messages.");return f(r,t)}{const t=e;return n.RunnableLambda.from(e=>f(e,t))}};const y={human:{message:o.HumanMessage,messageChunk:o.HumanMessageChunk},ai:{message:a.AIMessage,messageChunk:a.AIMessageChunk},system:{message:c.SystemMessage,messageChunk:c.SystemMessageChunk},tool:{message:d.ToolMessage,messageChunk:d.ToolMessageChunk},function:{message:s.FunctionMessage,messageChunk:s.FunctionMessageChunk},generic:{message:i.ChatMessage,messageChunk:i.ChatMessageChunk},remove:{message:l.RemoveMessage,messageChunk:l.RemoveMessage}};function v(e,t,r){let n,l;switch(e){case"human":r?n=new o.HumanMessageChunk(t):l=new o.HumanMessage(t);break;case"ai":if(r){let e={...t};"tool_calls"in e&&(e={...e,tool_call_chunks:e.tool_calls?.map(e=>({...e,type:"tool_call_chunk",index:void 0,args:JSON.stringify(e.args)}))}),n=new a.AIMessageChunk(e)}else l=new a.AIMessage(t);break;case"system":r?n=new c.SystemMessageChunk(t):l=new c.SystemMessage(t);break;case"tool":if(!("tool_call_id"in t))throw new Error("Can not convert ToolMessage to ToolMessageChunk if 'tool_call_id' field is not defined.");r?n=new d.ToolMessageChunk(t):l=new d.ToolMessage(t);break;case"function":if(r)n=new s.FunctionMessageChunk(t);else{if(!t.name)throw new Error("FunctionMessage must have a 'name' field");l=new s.FunctionMessage(t)}break;case"generic":if(!("role"in t))throw new Error("Can not convert ChatMessage to ChatMessageChunk if 'role' field is not defined.");r?n=new i.ChatMessageChunk(t):l=new i.ChatMessage(t);break;default:throw new Error(`Unrecognized message type ${e}`)}if(r&&n)return n;if(l)return l;throw new Error(`Unrecognized message type ${e}`)}function b(e){const t=e._getType();let r;const n=Object.fromEntries(Object.entries(e).filter(([e])=>!["type","tool_call_chunks"].includes(e)&&!e.startsWith("lc_")));if(t in y&&(r=v(t,n)),!r)throw new Error(`Unrecognized message chunk class ${t}. Supported classes are ${Object.keys(y)}`);return r}function _(e){const t=e.split("\n");return Promise.resolve([...t.slice(0,-1).map(e=>`${e}\n`),t[t.length-1]])}t.defaultTextSplitter=_},59160:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAnyDef=void 0;const n=r(14098);t.parseAnyDef=function(e){if("openAi"!==e.target)return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?(0,n.getRelativePath)(t,e.currentPath):t.join("/")}}},59592:(e,t)=>{"use strict";function r(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}function n(e,t){return[t[e.source]??e.source,t[e.target]??e.target]}Object.defineProperty(t,"__esModule",{value:!0}),t.drawMermaidPng=t.drawMermaid=void 0,t.drawMermaid=function(e,t,a){const{firstNodeLabel:i,lastNodeLabel:s,nodeColors:o,withStyles:l=!0,curveStyle:c="linear",wrapLabelNWords:d=9}=a??{};let u=l?`%%{init: {'flowchart': {'curve': '${c}'}}}%%\ngraph TD;\n`:"graph TD;\n";if(l){const t="default",n={[t]:"{0}([{1}]):::otherclass"};void 0!==i&&(n[i]="{0}[{0}]:::startclass"),void 0!==s&&(n[s]="{0}[{0}]:::endclass");for(const a of Object.values(e)){const e=n[a]??n[t],i=r(a),s=a.split(":"),o=s[s.length-1];u+=`\t${e.replace(/\{0\}/g,i).replace(/\{1\}/g,o)};\n`}}let p="";for(const a of t){const t=a.source.includes(":")?a.source.split(":")[0]:void 0,i=a.target.includes(":")?a.target.split(":")[0]:void 0;""===p||p===t&&p===i||(u+="\tend\n",p=""),""===p&&void 0!==t&&t===i&&(u=`\tsubgraph ${t}\n`,p=t);const[s,o]=n(a,e);let l="";if(void 0!==a.data){let e=a.data;const t=e.split(" ");t.length>d&&(e=t.reduce((e,t,r)=>(r%d===0&&e.push(""),e[e.length-1]+=` ${t}`,e),[]).join("<br>")),l=a.conditional?` -. ${e} .-> `:` -- ${e} --\x3e `}else l=a.conditional?" -.-> ":" --\x3e ";u+=`\t${r(s)}${l}${r(o)};\n`}return""!==p&&(u+="end\n"),l&&void 0!==o&&(u+=function(e){let t="";for(const[r,n]of Object.entries(e))t+=`\tclassDef ${r}class fill:${n};\n`;return t}(o)),u},t.drawMermaidPng=async function(e,t){let{backgroundColor:r="white"}=t??{};const n=btoa(e);void 0!==r&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));const a=`https://mermaid.ink/img/${n}?bgColor=${r}`,i=await fetch(a);if(!i.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${i.status}`,`Status text: ${i.statusText}`].join("\n"));return await i.blob()}},59724:(e,t,r)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.LineDecoder=void 0,t.findDoubleNewlineIndex=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1};const i=r(79632),s=r(773);class o{constructor(){n.set(this,void 0),a.set(this,void 0),i.__classPrivateFieldSet(this,n,new Uint8Array,"f"),i.__classPrivateFieldSet(this,a,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?(0,s.encodeUTF8)(e):e;i.__classPrivateFieldSet(this,n,(0,s.concatBytes)([i.__classPrivateFieldGet(this,n,"f"),t]),"f");const r=[];let o;for(;null!=(o=l(i.__classPrivateFieldGet(this,n,"f"),i.__classPrivateFieldGet(this,a,"f")));){if(o.carriage&&null==i.__classPrivateFieldGet(this,a,"f")){i.__classPrivateFieldSet(this,a,o.index,"f");continue}if(null!=i.__classPrivateFieldGet(this,a,"f")&&(o.index!==i.__classPrivateFieldGet(this,a,"f")+1||o.carriage)){r.push((0,s.decodeUTF8)(i.__classPrivateFieldGet(this,n,"f").subarray(0,i.__classPrivateFieldGet(this,a,"f")-1))),i.__classPrivateFieldSet(this,n,i.__classPrivateFieldGet(this,n,"f").subarray(i.__classPrivateFieldGet(this,a,"f")),"f"),i.__classPrivateFieldSet(this,a,null,"f");continue}const e=null!==i.__classPrivateFieldGet(this,a,"f")?o.preceding-1:o.preceding,t=(0,s.decodeUTF8)(i.__classPrivateFieldGet(this,n,"f").subarray(0,e));r.push(t),i.__classPrivateFieldSet(this,n,i.__classPrivateFieldGet(this,n,"f").subarray(o.index),"f"),i.__classPrivateFieldSet(this,a,null,"f")}return r}flush(){return i.__classPrivateFieldGet(this,n,"f").length?this.decode("\n"):[]}}function l(e,t){for(let r=t??0;r<e.length;r++){if(10===e[r])return{preceding:r,index:r+1,carriage:!1};if(13===e[r])return{preceding:r,index:r+1,carriage:!0}}return null}t.LineDecoder=o,n=new WeakMap,a=new WeakMap,o.NEWLINE_CHARS=new Set(["\n","\r"]),o.NEWLINE_REGEXP=/\r\n|[\n\r]/g},59812:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(58385);t.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");let t;return Uint8Array.of((t=parseInt(e.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,255&t,(t=parseInt(e.slice(9,13),16))>>>8,255&t,(t=parseInt(e.slice(14,18),16))>>>8,255&t,(t=parseInt(e.slice(19,23),16))>>>8,255&t,(t=parseInt(e.slice(24,36),16))/1099511627776&255,t/4294967296&255,t>>>24&255,t>>>16&255,t>>>8&255,255&t)}},59925:(e,t,r)=>{"use strict";var n,a,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.AI_PROMPT=t.HUMAN_PROMPT=t.Anthropic=t.BaseAnthropic=void 0;const o=r(47984),l=r(43539),c=r(80694),d=r(21),u=r(8709),p=r(29953),m=o.__importStar(r(6462)),h=o.__importStar(r(81378)),f=r(19232),g=o.__importStar(r(58092)),y=o.__importStar(r(24384)),v=o.__importStar(r(53672)),b=o.__importStar(r(60410)),_=r(13962),w=r(9861),P=r(73570),O=r(21671),S=r(61375),E=r(29953),A=r(2758),I=r(80277),k=r(20044),T=r(80694);class j{constructor({baseURL:e=(0,I.readEnv)("ANTHROPIC_BASE_URL"),apiKey:t=(0,I.readEnv)("ANTHROPIC_API_KEY")??null,authToken:r=(0,I.readEnv)("ANTHROPIC_AUTH_TOKEN")??null,...s}={}){n.add(this),i.set(this,void 0);const l={apiKey:t,authToken:r,...s,baseURL:e||"https://api.anthropic.com"};if(!l.dangerouslyAllowBrowser&&(0,E.isRunningInBrowser)())throw new g.AnthropicError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=l.baseURL,this.timeout=l.timeout??a.DEFAULT_TIMEOUT,this.logger=l.logger??console;const c="warn";this.logLevel=c,this.logLevel=(0,k.parseLogLevel)(l.logLevel,"ClientOptions.logLevel",this)??(0,k.parseLogLevel)((0,I.readEnv)("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??c,this.fetchOptions=l.fetchOptions,this.maxRetries=l.maxRetries??2,this.fetch=l.fetch??m.getDefaultFetch(),o.__classPrivateFieldSet(this,i,h.FallbackEncoder,"f"),this._options=l,this.apiKey=t,this.authToken=r}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-api-key")||t.has("x-api-key")||this.authToken&&e.get("authorization")||t.has("authorization")))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){return(0,A.buildHeaders)([this.apiKeyAuth(e),this.bearerAuth(e)])}apiKeyAuth(e){if(null!=this.apiKey)return(0,A.buildHeaders)([{"X-Api-Key":this.apiKey}])}bearerAuth(e){if(null!=this.authToken)return(0,A.buildHeaders)([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new g.AnthropicError(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${f.VERSION}`}defaultIdempotencyKey(){return`stainless-node-retry-${(0,l.uuid4)()}`}makeStatusError(e,t,r,n){return g.APIError.generate(e,t,r,n)}buildURL(e,t,r){const a=!o.__classPrivateFieldGet(this,n,"m",s).call(this)&&r||this.baseURL,i=(0,c.isAbsoluteURL)(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return(0,T.isEmptyObj)(l)||(t={...l,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(i.search=this.stringifyQuery(t)),i.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new g.AnthropicError("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new _.APIPromise(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){const n=await e,a=n.maxRetries??this.maxRetries;null==t&&(t=a),await this.prepareOptions(n);const{req:i,url:s,timeout:o}=this.buildRequest(n,{retryCount:a-t});await this.prepareRequest(i,{url:s,options:n});const l="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=void 0===r?"":`, retryOf: ${r}`,p=Date.now();if((0,k.loggerFor)(this).debug(`[${l}] sending request`,(0,k.formatRequestDetails)({retryOfRequestLogID:r,method:n.method,url:s,options:n,headers:i.headers})),n.signal?.aborted)throw new g.APIUserAbortError;const h=new AbortController,f=await this.fetchWithTimeout(s,i,o,h).catch(u.castToError),y=Date.now();if(f instanceof Error){const e=`retrying, ${t} attempts remaining`;if(n.signal?.aborted)throw new g.APIUserAbortError;const a=(0,u.isAbortError)(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return(0,k.loggerFor)(this).info(`[${l}] connection ${a?"timed out":"failed"} - ${e}`),(0,k.loggerFor)(this).debug(`[${l}] connection ${a?"timed out":"failed"} (${e})`,(0,k.formatRequestDetails)({retryOfRequestLogID:r,url:s,durationMs:y-p,message:f.message})),this.retryRequest(n,t,r??l);if((0,k.loggerFor)(this).info(`[${l}] connection ${a?"timed out":"failed"} - error; no more retries left`),(0,k.loggerFor)(this).debug(`[${l}] connection ${a?"timed out":"failed"} (error; no more retries left)`,(0,k.formatRequestDetails)({retryOfRequestLogID:r,url:s,durationMs:y-p,message:f.message})),a)throw new g.APIConnectionTimeoutError;throw new g.APIConnectionError({cause:f})}const v=`[${l}${d}${[...f.headers.entries()].filter(([e])=>"request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join("")}] ${i.method} ${s} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${y-p}ms`;if(!f.ok){const e=this.shouldRetry(f);if(t&&e){const e=`retrying, ${t} attempts remaining`;return await m.CancelReadableStream(f.body),(0,k.loggerFor)(this).info(`${v} - ${e}`),(0,k.loggerFor)(this).debug(`[${l}] response error (${e})`,(0,k.formatRequestDetails)({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:y-p})),this.retryRequest(n,t,r??l,f.headers)}const a=e?"error; no more retries left":"error; not retryable";(0,k.loggerFor)(this).info(`${v} - ${a}`);const i=await f.text().catch(e=>(0,u.castToError)(e).message),s=(0,c.safeJSON)(i),o=s?void 0:i;throw(0,k.loggerFor)(this).debug(`[${l}] response error (${a})`,(0,k.formatRequestDetails)({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,message:o,durationMs:Date.now()-p})),this.makeStatusError(f.status,s,o,f.headers)}return(0,k.loggerFor)(this).info(v),(0,k.loggerFor)(this).debug(`[${l}] response start`,(0,k.formatRequestDetails)({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:y-p})),{response:f,options:n,controller:h,requestLogID:l,retryOfRequestLogID:r,startTime:p}}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}requestAPIList(e,t){const r=this.makeRequest(t,null,void 0);return new y.PagePromise(this,r,e)}async fetchWithTimeout(e,t,r,n){const{signal:a,method:i,...s}=t||{};a&&a.addEventListener("abort",()=>n.abort());const o=setTimeout(()=>n.abort(),r),l=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,c={signal:n.signal,...l?{duplex:"half"}:{},method:"GET",...s};i&&(c.method=i.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(o)}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r,n){let a;const i=n?.get("retry-after-ms");if(i){const e=parseFloat(i);Number.isNaN(e)||(a=e)}const s=n?.get("retry-after");if(s&&!a){const e=parseFloat(s);a=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(a&&0<=a&&a<6e4)){const r=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,r)}return await(0,d.sleep)(a),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e;return Math.min(.5*Math.pow(2,r),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){const r=6e5;if(36e5*e/128e3>r||null!=t&&e>t)throw new g.AnthropicError("Streaming is strongly recommended for operations that may token longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return r}buildRequest(e,{retryCount:t=0}={}){const r={...e},{method:n,path:a,query:i,defaultBaseURL:s}=r,o=this.buildURL(a,i,s);"timeout"in r&&(0,c.validatePositiveInteger)("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:l,body:d}=this.buildBody({options:r});return{req:{method:n,headers:this.buildHeaders({options:e,method:n,bodyHeaders:l,retryCount:t}),...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...r.fetchOptions??{}},url:o,timeout:r.timeout}}buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:n}){let a={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const i=(0,A.buildHeaders)([a,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(n),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...(0,p.getPlatformHeaders)(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=(0,A.buildHeaders)([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:m.ReadableStreamFrom(e)}:o.__classPrivateFieldGet(this,i,"f").call(this,{body:e,headers:r})}}t.BaseAnthropic=j,a=j,i=new WeakMap,n=new WeakSet,s=function(){return"https://api.anthropic.com"!==this.baseURL},j.Anthropic=a,j.HUMAN_PROMPT="\n\nHuman:",j.AI_PROMPT="\n\nAssistant:",j.DEFAULT_TIMEOUT=6e5,j.AnthropicError=g.AnthropicError,j.APIError=g.APIError,j.APIConnectionError=g.APIConnectionError,j.APIConnectionTimeoutError=g.APIConnectionTimeoutError,j.APIUserAbortError=g.APIUserAbortError,j.NotFoundError=g.NotFoundError,j.ConflictError=g.ConflictError,j.RateLimitError=g.RateLimitError,j.BadRequestError=g.BadRequestError,j.AuthenticationError=g.AuthenticationError,j.InternalServerError=g.InternalServerError,j.PermissionDeniedError=g.PermissionDeniedError,j.UnprocessableEntityError=g.UnprocessableEntityError,j.toFile=v.toFile;class C extends j{constructor(){super(...arguments),this.completions=new b.Completions(this),this.messages=new b.Messages(this),this.models=new b.Models(this),this.beta=new b.Beta(this)}}t.Anthropic=C,C.Completions=w.Completions,C.Messages=S.Messages,C.Models=P.Models,C.Beta=O.Beta,t.HUMAN_PROMPT=C.HUMAN_PROMPT,t.AI_PROMPT=C.AI_PROMPT},60203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullableDef=function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target||"property"===t.nullableStrategy?{type:a.primitiveMappings[e.innerType._def.typeName],nullable:!0}:{type:[a.primitiveMappings[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}};const n=r(95445),a=r(95707)},60264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonOutputKeyToolsParser=t.JsonOutputToolsParser=void 0,t.parseToolCall=l,t.convertLangChainToolCallToOpenAI=function(e){if(void 0===e.id)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}},t.makeInvalidToolCall=function(e,t){return{name:e.function?.name,args:e.function?.arguments,id:e.id,error:t,type:"invalid_tool_call"}};const n=r(37255),a=r(29542),i=r(28580),s=r(6796),o=r(70866);function l(e,t){if(void 0===e.function)return;let r;if(t?.partial)try{r=(0,a.parsePartialJson)(e.function.arguments??"{}")}catch(e){return}else try{r=JSON.parse(e.function.arguments)}catch(t){throw new n.OutputParserException([`Function "${e.function.name}" arguments:`,"",e.function.arguments,"","are not valid JSON.",`Error: ${t.message}`].join("\n"))}const i={name:e.function.name,args:r,type:"tool_call"};return t?.returnId&&(i.id=e.id),i}class c extends i.BaseCumulativeTransformOutputParser{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){const r=e[0].message;let n;if((0,s.isAIMessage)(r)&&r.tool_calls?.length?n=r.tool_calls.map(e=>{const{id:t,...r}=e;return this.returnId?{id:t,...r}:r}):void 0!==r.additional_kwargs.tool_calls&&(n=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(e=>l(e,{returnId:this.returnId,partial:t}))),!n)return[];const a=[];for(const e of n)if(void 0!==e){const t={type:e.name,args:e.args,id:e.id};a.push(t)}return a}}t.JsonOutputToolsParser=c,t.JsonOutputKeyToolsParser=class extends c{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(void 0===this.zodSchema)return e;const t=await(0,o.interopSafeParseAsync)(this.zodSchema,e);if(t.success)return t.data;throw new n.OutputParserException(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error?.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const t=(await super.parsePartialResult(e)).filter(e=>e.type===this.keyName);let r=t;if(t.length)return this.returnId||(r=t.map(e=>e.args)),this.returnSingle?r[0]:r}async parseResult(e){const t=(await super.parsePartialResult(e,!1)).filter(e=>e.type===this.keyName);let r=t;if(t.length)return this.returnId||(r=t.map(e=>e.args)),this.returnSingle?this._validateResult(r[0]):await Promise.all(r.map(e=>this._validateResult(e)))}}},60410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Models=t.Messages=t.Completions=t.Beta=void 0,r(47984).__exportStar(r(6149),t);var n=r(21671);Object.defineProperty(t,"Beta",{enumerable:!0,get:function(){return n.Beta}});var a=r(9861);Object.defineProperty(t,"Completions",{enumerable:!0,get:function(){return a.Completions}});var i=r(61375);Object.defineProperty(t,"Messages",{enumerable:!0,get:function(){return i.Messages}});var s=r(73570);Object.defineProperty(t,"Models",{enumerable:!0,get:function(){return s.Models}})},60418:(e,t)=>{"use strict";let r;function n(){if(void 0===r){const e=(0,t.getEnv)();r={library:"langchain-js",runtime:e}}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.getEnv=t.isNode=t.isDeno=t.isJsDom=t.isWebWorker=t.isBrowser=void 0,t.getRuntimeEnvironment=async function(){return n()},t.getRuntimeEnvironmentSync=n,t.getEnvironmentVariable=function(e){try{return"undefined"!=typeof process?process.env?.[e]:(0,t.isDeno)()?Deno?.env.get(e):void 0}catch(e){return}},t.isBrowser=()=>"undefined"!=typeof window&&void 0!==window.document,t.isWebWorker=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,t.isJsDom=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&navigator.userAgent.includes("jsdom"),t.isDeno=()=>"undefined"!=typeof Deno,t.isNode=()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node&&!(0,t.isDeno)(),t.getEnv=()=>{let e;return e=(0,t.isBrowser)()?"browser":(0,t.isNode)()?"node":(0,t.isWebWorker)()?"webworker":(0,t.isJsDom)()?"jsdom":(0,t.isDeno)()?"deno":"other",e}},60626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Batches=void 0;const n=r(24472),a=r(24384),i=r(2758),s=r(91198),o=r(72854),l=r(64735);class c extends n.APIResource{create(e,t){const{betas:r,...n}=e;return this._client.post("/v1/messages/batches?beta=true",{body:n,...t,headers:(0,i.buildHeaders)([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},r){const{betas:n}=t??{};return this._client.get(l.path`/v1/messages/batches/${e}?beta=true`,{...r,headers:(0,i.buildHeaders)([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}list(e={},t){const{betas:r,...n}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",a.Page,{query:n,...t,headers:(0,i.buildHeaders)([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},r){const{betas:n}=t??{};return this._client.delete(l.path`/v1/messages/batches/${e}?beta=true`,{...r,headers:(0,i.buildHeaders)([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}cancel(e,t={},r){const{betas:n}=t??{};return this._client.post(l.path`/v1/messages/batches/${e}/cancel?beta=true`,{...r,headers:(0,i.buildHeaders)([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}async results(e,t={},r){const n=await this.retrieve(e);if(!n.results_url)throw new o.AnthropicError(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);const{betas:a}=t??{};return this._client.get(n.results_url,{...r,headers:(0,i.buildHeaders)([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>s.JSONLDecoder.fromResponse(t.response,t.controller))}}t.Batches=c},60722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV1State=void 0;const n=r(39326),a=r(39962),i={};function s(e,t,r){return e.msecs??=-1/0,e.nsecs??=0,t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=r.slice(10,16),e.node[0]|=1,e.clockseq=16383&(r[8]<<8|r[9])),e.msecs=t,e}function o(e,t,r,n,a,i,s=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(i){if(s<0||s+16>i.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`)}else i=new Uint8Array(16),s=0;t??=Date.now(),r??=0,n??=16383&(e[8]<<8|e[9]),a??=e.slice(10,16);const o=(1e4*(268435455&(t+=122192928e5))+r)%4294967296;i[s++]=o>>>24&255,i[s++]=o>>>16&255,i[s++]=o>>>8&255,i[s++]=255&o;const l=t/4294967296*1e4&268435455;i[s++]=l>>>8&255,i[s++]=255&l,i[s++]=l>>>24&15|16,i[s++]=l>>>16&255,i[s++]=n>>>8|128,i[s++]=255&n;for(let e=0;e<6;++e)i[s++]=a[e];return i}t.updateV1State=s,t.default=function(e,t,r){let l;const c=e?._v6??!1;if(e){const t=Object.keys(e);1===t.length&&"_v6"===t[0]&&(e=void 0)}if(e)l=o(e.random??e.rng?.()??(0,n.default)(),e.msecs,e.nsecs,e.clockseq,e.node,t,r);else{const e=Date.now(),a=(0,n.default)();s(i,e,a),l=o(a,i.msecs,i.nsecs,c?void 0:i.clockseq,c?void 0:i.node,t,r)}return t??(0,a.unsafeStringify)(l)}},60769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIntersectionDef=void 0;const n=r(55767);t.parseIntersectionDef=function(e,t){const r=[(0,n.parseDef)(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),(0,n.parseDef)(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e);let a="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const i=[];return r.forEach(e=>{if("type"in(t=e)&&"string"===t.type||!("allOf"in t)){let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:r,...n}=e;t=n}else a=void 0;i.push(t)}else i.push(...e.allOf),void 0===e.unevaluatedProperties&&(a=void 0);var t}),i.length?{allOf:i,...a}:void 0}},60845:(e,t,r)=>{e.exports=r(90833)},61008:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OTELProviderSingleton=void 0,t.getOTELTrace=function(){return t.OTELProviderSingleton.getTraceInstance()},t.getOTELContext=function(){return t.OTELProviderSingleton.getContextInstance()},t.setOTELInstances=function(e){t.OTELProviderSingleton.initializeGlobalInstances(e)},t.setDefaultOTLPTracerComponents=function(e){t.OTELProviderSingleton.setDefaultOTLPTracerComponents(e)},t.getDefaultOTLPTracerComponents=function(){return t.OTELProviderSingleton.getDefaultOTLPTracerComponents()};const n=r(51400);class a{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...t){let r;if(!this.hasWarned&&(0,n.getOtelEnabled)()&&(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` or `LANGSMITH_OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0),1===t.length&&"function"==typeof t[0]?r=t[0]:2===t.length&&"function"==typeof t[1]?r=t[1]:3===t.length&&"function"==typeof t[2]&&(r=t[2]),"function"==typeof r)return r()}}const i=Symbol.for("ls:otel_trace"),s=Symbol.for("ls:otel_context"),o=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),l=new class{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new a})}getTracer(e,t){return this.mockTracer}getActiveSpan(){}setSpan(e,t){return e}getSpan(e){}setSpanContext(e,t){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}},c=new class{active(){return{}}with(e,t){return t()}};t.OTELProviderSingleton=new class{getTraceInstance(){return globalThis[i]??l}getContextInstance(){return globalThis[s]??c}initializeGlobalInstances(e){void 0===globalThis[i]&&(globalThis[i]=e.trace),void 0===globalThis[s]&&(globalThis[s]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[o]=e}getDefaultOTLPTracerComponents(){return globalThis[o]??void 0}}},61073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseArrayDef=function(e,t){const r={type:"array"};return e.type?._def?.typeName!==n.ZodFirstPartyTypeKind.ZodAny&&(r.items=(0,i.parseDef)(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(0,a.setResponseValueAndErrors)(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&(0,a.setResponseValueAndErrors)(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&((0,a.setResponseValueAndErrors)(r,"minItems",e.exactLength.value,e.exactLength.message,t),(0,a.setResponseValueAndErrors)(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r};const n=r(7552),a=r(56705),i=r(95445)},61123:e=>{"use strict";const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),a=t.test(r);return n&&a&&(e=+e,r=+r),e===r?0:n&&!a?-1:a&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},61299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalAsyncLocalStorageInstance=t.setGlobalAsyncLocalStorageInstance=t._CONTEXT_VARIABLES_KEY=t.TRACING_ALS_KEY=void 0,t.TRACING_ALS_KEY=Symbol.for("ls:tracing_async_local_storage"),t._CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables"),t.setGlobalAsyncLocalStorageInstance=e=>{globalThis[t.TRACING_ALS_KEY]=e},t.getGlobalAsyncLocalStorageInstance=()=>globalThis[t.TRACING_ALS_KEY]},61359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTraceableFunction=t.ROOT=t.withRunTree=t.getCurrentRunTree=t.AsyncLocalStorageProviderSingleton=void 0;const n=r(11344),a=Symbol.for("ls:tracing_async_local_storage"),i=new class{getStore(){}run(e,t){return t()}};t.AsyncLocalStorageProviderSingleton=new class{getInstance(){return globalThis[a]??i}initializeGlobalInstance(e){void 0===globalThis[a]&&(globalThis[a]=e)}},t.getCurrentRunTree=()=>{const e=t.AsyncLocalStorageProviderSingleton.getInstance().getStore();if(!(0,n.isRunTree)(e))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function or the tracing is enabled."].join("\n"));return e},t.withRunTree=function(e,r){const n=t.AsyncLocalStorageProviderSingleton.getInstance();return new Promise((t,a)=>{n.run(e,()=>{Promise.resolve(r()).then(t).catch(a)})})},t.ROOT=Symbol.for("langsmith:traceable:root"),t.isTraceableFunction=function(e){return"function"==typeof e&&"langsmith:traceable"in e}},61375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=void 0;const n=r(47984),a=r(24472),i=r(20075),s=n.__importStar(r(52047)),o=r(52047),l=r(48585);class c extends a.APIResource{constructor(){super(...arguments),this.batches=new s.Batches(this._client)}create(e,t){e.model in d&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${d[e.model]}\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let r=this._client._options.timeout;if(!e.stream&&null==r){const t=l.MODEL_NONSTREAMING_TOKENS[e.model]??void 0;r=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",{body:e,timeout:r??6e5,...t,stream:e.stream??!1})}stream(e,t){return i.MessageStream.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}t.Messages=c;const d={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};c.Batches=o.Batches},61461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Files=void 0;const n=r(82040),a=r(75552),i=r(262),s=r(34741),o=r(89526),l=r(12018),c=r(54815);class d extends n.APIResource{create(e,t){return this._client.post("/files",(0,l.multipartFormRequestOptions)({body:e,...t},this._client))}retrieve(e,t){return this._client.get(c.path`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",a.CursorPage,{query:e,...t})}delete(e,t){return this._client.delete(c.path`/files/${e}`,t)}content(e,t){return this._client.get(c.path`/files/${e}/content`,{...t,headers:(0,i.buildHeaders)([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){const n=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!n.has(i.status);)if(await(0,s.sleep)(t),i=await this.retrieve(e),Date.now()-a>r)throw new o.APIConnectionTimeoutError({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return i}}t.Files=d},61583:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncCaller=void 0;const a=n(r(24116)),i=n(r(73290)),s=[400,401,402,403,404,405,406,407,409],o=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name)throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response?.status??e?.status;if(t&&s.includes(+t))throw e;if("insufficient_quota"===e?.error?.code){const t=new Error(e?.message);throw t.name="InsufficientQuotaError",t}};t.AsyncCaller=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??o;const t="default"in i.default?i.default.default:i.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>(0,a.default)(()=>e(...t).catch(e=>{throw e instanceof Error?e:new Error(e)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(e=>e.ok?e:Promise.reject(e)))}}},61778:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNeverDef=function(){return{not:{}}}},61970:(e,t)=>{"use strict";function r(e,t){const r=[];for(const[a,i]of Object.entries(e.properties??{}))i.description&&t<2&&r.push(`// ${i.description}`),e.required?.includes(a)?r.push(`${a}: ${n(i,t)},`):r.push(`${a}?: ${n(i,t)},`);return r.map(e=>" ".repeat(t)+e).join("\n")}function n(e,t){if(void 0!==(a=e).anyOf&&Array.isArray(a.anyOf))return e.anyOf.map(e=>n(e,t)).join(" | ");var a;switch(e.type){case"string":return e.enum?e.enum.map(e=>`"${e}"`).join(" | "):"string";case"number":case"integer":return e.enum?e.enum.map(e=>`${e}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",r(e,t+2),"}"].join("\n");case"array":return e.items?`${n(e.items,t)}[]`:"any[]";default:return""}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatFunctionDefinitions=function(e){const t=["namespace functions {",""];for(const n of e)n.description&&t.push(`// ${n.description}`),Object.keys(n.parameters.properties??{}).length>0?(t.push(`type ${n.name} = (_: {`),t.push(r(n.parameters,0)),t.push("}) => any;")):t.push(`type ${n.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join("\n")}},61973:(e,t)=>{"use strict";function r(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}Object.defineProperty(t,"__esModule",{value:!0}),t.setResponseValueAndErrors=t.addErrorMessage=void 0,t.addErrorMessage=r,t.setResponseValueAndErrors=function(e,t,n,a,i){e[t]=n,r(e,t,a,i)}},61986:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isStructuredTool=i,t.isRunnableToolLike=s,t.isStructuredToolParams=o,t.isLangChainTool=function(e){return o(e)||s(e)||i(e)};const n=r(10969),a=r(70866);function i(e){return void 0!==e&&Array.isArray(e.lc_namespace)}function s(e){return void 0!==e&&n.Runnable.isRunnable(e)&&"lc_name"in e.constructor&&"function"==typeof e.constructor.lc_name&&"RunnableToolLike"===e.constructor.lc_name()}function o(e){return!!e&&"object"==typeof e&&"name"in e&&"schema"in e&&((0,a.isInteropZodSchema)(e.schema)||null!=e.schema&&"object"==typeof e.schema&&"type"in e.schema&&"string"==typeof e.schema.type&&["null","boolean","object","array","number","string"].includes(e.schema.type))}},62080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownListOutputParser=t.NumberedListOutputParser=t.CustomListOutputParser=t.CommaSeparatedListOutputParser=t.ListOutputParser=void 0;const n=r(37255),a=r(28580);class i extends a.BaseTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}async*_transform(e){let t="";for await(const r of e)if(t+="string"==typeof r?r:r.content,this.re){const e=[...t.matchAll(this.re)];if(e.length>1){let r=0;for(const t of e.slice(0,-1))yield[t[1]],r+=(t.index??0)+t[0].length;t=t.slice(r)}}else{const e=await this.parse(t);if(e.length>1){for(const t of e.slice(0,-1))yield[t];t=e[e.length-1]}}for(const e of await this.parse(t))yield[e]}}t.ListOutputParser=i,t.CommaSeparatedListOutputParser=class extends i{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"CommaSeparatedListOutputParser"}async parse(e){try{return e.trim().split(",").map(e=>e.trim())}catch(t){throw new n.OutputParserException(`Could not parse output: ${e}`,e)}}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},t.CustomListOutputParser=class extends i{constructor({length:e,separator:t}){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"length",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"separator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.length=e,this.separator=t||","}async parse(e){try{const t=e.trim().split(this.separator).map(e=>e.trim());if(void 0!==this.length&&t.length!==this.length)throw new n.OutputParserException(`Incorrect number of items. Expected ${this.length}, got ${t.length}.`);return t}catch(t){if(Object.getPrototypeOf(t)===n.OutputParserException.prototype)throw t;throw new n.OutputParserException(`Could not parse output: ${e}`)}}getFormatInstructions(){return`Your response should be a list of ${void 0===this.length?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},t.NumberedListOutputParser=class extends i{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:/\d+\.\s([^\n]+)/g})}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return"Your response should be a numbered list with each item on a new line. For example: \n\n1. foo\n\n2. bar\n\n3. baz"}async parse(e){return[...e.matchAll(this.re)??[]].map(e=>e[1])}},t.MarkdownListOutputParser=class extends i{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:/^\s*[-*]\s([^\n]+)$/gm})}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return"Your response should be a numbered list with each item on a new line. For example: \n\n1. foo\n\n2. bar\n\n3. baz"}async parse(e){return[...e.matchAll(this.re)??[]].map(e=>e[1])}}},62218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getFetchImplementation=t._globalFetchImplementationIsNodeFetch=t.overrideFetchImplementation=void 0;const n=r(51400),a=(...e)=>fetch(...e),i=Symbol.for("ls:fetch_implementation");t.overrideFetchImplementation=e=>{globalThis[i]=e},t._globalFetchImplementationIsNodeFetch=()=>{const e=globalThis[i];return!!e&&"function"==typeof e&&"Headers"in e&&"Request"in e&&"Response"in e},t._getFetchImplementation=e=>async(...t)=>{if(e||"true"===(0,n.getLangSmithEnvironmentVariable)("DEBUG")){const[e,r]=t;console.log(`→ ${r?.method||"GET"} ${e}`)}const r=await(globalThis[i]??a)(...t);return(e||"true"===(0,n.getLangSmithEnvironmentVariable)("DEBUG"))&&console.log(`← ${r.status} ${r.statusText} ${r.url}`),r}},62241:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Methods=void 0;const n=r(82040);class a extends n.APIResource{}t.Methods=a},62288:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpsProxyAgent=void 0;const o=i(r(69278)),l=i(r(64756)),c=s(r(42613)),d=s(r(45753)),u=r(20917),p=r(87016),m=r(63868),h=(0,d.default)("https-proxy-agent"),f=e=>void 0===e.servername&&e.host&&!o.isIP(e.host)?{...e,servername:e.host}:e;class g extends u.Agent{constructor(e,t){super(t),this.options={path:void 0},this.proxy="string"==typeof e?new p.URL(e):e,this.proxyHeaders=t?.headers??{},h("Creating new HttpsProxyAgent instance: %o",this.proxy.href);const r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),n=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?v(t,"headers"):null,host:r,port:n}}async connect(e,t){const{proxy:r}=this;if(!t.host)throw new TypeError('No "host" provided');let n;"https:"===r.protocol?(h("Creating `tls.Socket`: %o",this.connectOpts),n=l.connect(f(this.connectOpts))):(h("Creating `net.Socket`: %o",this.connectOpts),n=o.connect(this.connectOpts));const a="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},i=o.isIPv6(t.host)?`[${t.host}]`:t.host;let s=`CONNECT ${i}:${t.port} HTTP/1.1\r\n`;if(r.username||r.password){const e=`${decodeURIComponent(r.username)}:${decodeURIComponent(r.password)}`;a["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}a.Host=`${i}:${t.port}`,a["Proxy-Connection"]||(a["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(const e of Object.keys(a))s+=`${e}: ${a[e]}\r\n`;const d=(0,m.parseProxyResponse)(n);n.write(`${s}\r\n`);const{connect:u,buffered:p}=await d;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),200===u.statusCode)return e.once("socket",y),t.secureEndpoint?(h("Upgrading socket connection to TLS"),l.connect({...v(f(t),"host","path","port"),socket:n})):n;n.destroy();const g=new o.Socket({writable:!1});return g.readable=!0,e.once("socket",e=>{h("Replaying proxy buffer for failed request"),(0,c.default)(e.listenerCount("data")>0),e.push(p),e.push(null)}),g}}function y(e){e.resume()}function v(e,...t){const r={};let n;for(n in e)t.includes(n)||(r[n]=e[n]);return r}g.protocols=["http","https"],t.HttpsProxyAgent=g},62317:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePromiseDef=function(e,t){return(0,n.parseDef)(e.type._def,t)};const n=r(95445)},62434:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(e,...t){s.stderr.write(`${i.default.format(e,...t)}${a.EOL}`)};const n=r(31635),a=r(48161),i=n.__importDefault(r(57975)),s=n.__importStar(r(1708))},62577:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureSASCredential=void 0,t.isSASCredential=function(e){return(0,n.isObjectWithProperties)(e,["signature"])&&"string"==typeof e.signature};const n=r(16184);t.AzureSASCredential=class{get signature(){return this._signature}constructor(e){if(!e)throw new Error("shared access signature must be a non-empty string");this._signature=e}update(e){if(!e)throw new Error("shared access signature must be a non-empty string");this._signature=e}}},62652:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PatchError=t.hasUndefined=t.getPath=t._getPathRecursive=t.unescapePathComponent=t.escapePathComponent=t.isInteger=t._deepClone=t._objectKeys=t.hasOwnProperty=void 0;const r=Object.prototype.hasOwnProperty;function n(e,t){return r.call(e,t)}function a(e){if(Array.isArray(e)){const t=new Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let r in e)n(e,r)&&t.push(r);return t}function i(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function s(e,t){let r;for(let a in e)if(n(e,a)){if(e[a]===t)return i(a)+"/";if("object"==typeof e[a]&&(r=s(e[a],t),""!=r))return i(a)+"/"+r}return""}function o(e,t){const r=[e];for(const e in t){const n="object"==typeof t[e]?JSON.stringify(t[e],null,2):t[e];void 0!==n&&r.push(`${e}: ${n}`)}return r.join("\n")}t.hasOwnProperty=n,t._objectKeys=a,t._deepClone=function(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}},t.isInteger=function(e){let t=0;const r=e.length;let n;for(;t<r;){if(n=e.charCodeAt(t),!(n>=48&&n<=57))return!1;t++}return!0},t.escapePathComponent=i,t.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t._getPathRecursive=s,t.getPath=function(e,t){if(e===t)return"/";const r=s(e,t);if(""===r)throw new Error("Object not found in root");return`/${r}`},t.hasUndefined=function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(e(t[r]))return!0}else if("object"==typeof t){const n=a(t),i=n.length;for(var r=0;r<i;r++)if(e(t[n[r]]))return!0}return!1};class l extends Error{constructor(e,t,r,n,a){super(o(e,{name:t,index:r,operation:n,tree:a})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.setPrototypeOf(this,new.target.prototype),this.message=o(e,{name:t,index:r,operation:n,tree:a})}}t.PatchError=l},62790:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"توکي",verb:"ولري"},file:{unit:"بایټس",verb:"ولري"},array:{unit:"توکي",verb:"ولري"},set:{unit:"توکي",verb:"ولري"}};function t(t){return e[t]??null}const r={regex:"ورودي",email:"بریښنالیک",url:"یو آر ال",emoji:"ایموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"نیټه او وخت",date:"نېټه",time:"وخت",duration:"موده",ipv4:"د IPv4 پته",ipv6:"د IPv6 پته",cidrv4:"د IPv4 ساحه",cidrv6:"د IPv6 ساحه",base64:"base64-encoded متن",base64url:"base64url-encoded متن",json_string:"JSON متن",e164:"د E.164 شمېره",jwt:"JWT",template_literal:"ورودي"};return e=>{switch(e.code){case"invalid_type":return`ناسم ورودي: باید ${e.expected} وای, مګر ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"عدد";case"object":if(Array.isArray(e))return"ارې";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} ترلاسه شو`;case"invalid_value":return 1===e.values.length?`ناسم ورودي: باید ${s.stringifyPrimitive(e.values[0])} وای`:`ناسم انتخاب: باید یو له ${s.joinValues(e.values,"|")} څخه وای`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`ډیر لوی: ${e.origin??"ارزښت"} باید ${r}${e.maximum.toString()} ${n.unit??"عنصرونه"} ولري`:`ډیر لوی: ${e.origin??"ارزښت"} باید ${r}${e.maximum.toString()} وي`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`ډیر کوچنی: ${e.origin} باید ${r}${e.minimum.toString()} ${n.unit} ولري`:`ډیر کوچنی: ${e.origin} باید ${r}${e.minimum.toString()} وي`}case"invalid_format":{const t=e;return"starts_with"===t.format?`ناسم متن: باید د "${t.prefix}" سره پیل شي`:"ends_with"===t.format?`ناسم متن: باید د "${t.suffix}" سره پای ته ورسيږي`:"includes"===t.format?`ناسم متن: باید "${t.includes}" ولري`:"regex"===t.format?`ناسم متن: باید د ${t.pattern} سره مطابقت ولري`:`${r[t.format]??e.format} ناسم دی`}case"not_multiple_of":return`ناسم عدد: باید د ${e.divisor} مضرب وي`;case"unrecognized_keys":return`ناسم ${e.keys.length>1?"کلیډونه":"کلیډ"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`ناسم کلیډ په ${e.origin} کې`;case"invalid_union":default:return"ناسمه ورودي";case"invalid_element":return`ناسم عنصر په ${e.origin} کې`}}}},63074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bearerTokenAuthenticationPolicyName=void 0,t.bearerTokenAuthenticationPolicy=function(e){var r,i,d;const{credential:p,scopes:m,challengeCallbacks:h}=e,f=e.logger||a.logger,g={authorizeRequest:null!==(i=null===(r=null==h?void 0:h.authorizeRequest)||void 0===r?void 0:r.bind(h))&&void 0!==i?i:o,authorizeRequestOnChallenge:null===(d=null==h?void 0:h.authorizeRequestOnChallenge)||void 0===d?void 0:d.bind(h)},y=p?(0,n.createTokenCycler)(p):()=>Promise.resolve(null);return{name:t.bearerTokenAuthenticationPolicyName,async sendRequest(e,t){if(!e.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let r,n,a;if(await g.authorizeRequest({scopes:Array.isArray(m)?m:[m],request:e,getAccessToken:y,logger:f}),[r,n]=await s(e,t),l(r)){let i=u(r.headers.get("WWW-Authenticate"));if(i){let o;try{o=atob(i)}catch(e){return f.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${i}`),r}a=await c({scopes:Array.isArray(m)?m:[m],response:r,request:e,getAccessToken:y,logger:f},o),a&&([r,n]=await s(e,t))}else if(g.authorizeRequestOnChallenge&&(a=await g.authorizeRequestOnChallenge({scopes:Array.isArray(m)?m:[m],request:e,response:r,getAccessToken:y,logger:f}),a&&([r,n]=await s(e,t)),l(r)&&(i=u(r.headers.get("WWW-Authenticate")),i))){let o;try{o=atob(i)}catch(e){return f.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${i}`),r}a=await c({scopes:Array.isArray(m)?m:[m],response:r,request:e,getAccessToken:y,logger:f},o),a&&([r,n]=await s(e,t))}}if(n)throw n;return r}}},t.parseChallenges=d;const n=r(98417),a=r(73413),i=r(64863);async function s(e,t){try{return[await t(e),void 0]}catch(e){if((0,i.isRestError)(e)&&e.response)return[e.response,e];throw e}}async function o(e){const{scopes:t,getAccessToken:r,request:n}=e,a={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},i=await r(t,a);i&&e.request.headers.set("Authorization",`Bearer ${i.token}`)}function l(e){return 401===e.status&&e.headers.has("WWW-Authenticate")}async function c(e,t){var r;const{scopes:n}=e,a=await e.getAccessToken(n,{enableCae:!0,claims:t});return!!a&&(e.request.headers.set("Authorization",`${null!==(r=a.tokenType)&&void 0!==r?r:"Bearer"} ${a.token}`),!0)}function d(e){const t=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[];let a;for(;null!==(a=t.exec(e));){const e=a[1],t=a[2],i={};let s;for(;null!==(s=r.exec(t));)i[s[1]]=s[2];n.push({scheme:e,params:i})}return n}function u(e){var t;if(e)return null===(t=d(e).find(e=>"Bearer"===e.scheme&&e.params.claims&&"insufficient_claims"===e.params.error))||void 0===t?void 0:t.params.claims}t.bearerTokenAuthenticationPolicyName="bearerTokenAuthenticationPolicy"},63212:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDateDef=void 0;const n=r(47027);t.parseDateDef=function e(t,r,n){const i=n??r.dateStrategy;if(Array.isArray(i))return{anyOf:i.map((n,a)=>e(t,r,n))};switch(i){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return a(t,r)}};const a=(e,t)=>{const r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(const a of e.checks)switch(a.kind){case"min":(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t);break;case"max":(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t)}return r}},63357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeParseableResponseFormat=function(e,t){const r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),r},t.makeParseableTextFormat=function(e,t){const r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),r},t.isAutoParsableResponseFormat=a,t.makeParseableTool=function(e,{parser:t,callback:r}){const n={...e};return Object.defineProperties(n,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:t,enumerable:!1},$callback:{value:r,enumerable:!1}}),n},t.isAutoParsableTool=i,t.maybeParseChatCompletion=function(e,t){return t&&l(t)?s(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}},t.parseChatCompletion=s,t.shouldParseToolCall=function(e,t){if(!e)return!1;const r=e.tools?.find(e=>e.function?.name===t.function.name);return i(r)||r?.function.strict||!1},t.hasAutoParseableInput=l,t.validateInputTools=function(e){for(const t of e??[]){if("function"!==t.type)throw new n.OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new n.OpenAIError(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}};const n=r(89526);function a(e){return"auto-parseable-response-format"===e?.$brand}function i(e){return"auto-parseable-tool"===e?.$brand}function s(e,t){const r=e.choices.map(e=>{if("length"===e.finish_reason)throw new n.LengthFinishReasonError;if("content_filter"===e.finish_reason)throw new n.ContentFilterFinishReasonError;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>function(e,t){const r=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:i(r)?r.$parseRaw(t.function.arguments):r?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?o(t,e.message.content):null}}});return{...e,choices:r}}function o(e,t){return"json_schema"!==e.response_format?.type?null:"json_schema"===e.response_format?.type?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function l(e){return!!a(e.response_format)||(e.tools?.some(e=>i(e)||"function"===e.type&&!0===e.function.strict)??!1)}},63453:(e,t,r)=>{e.exports=r(97070)},63637:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.assertUuid=void 0;const s=i(r(96383));t.assertUuid=function(e,t){if(!s.validate(e))throw new Error(void 0!==t?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`);return e}},63735:(e,t,r)=>{var n,a,i=r(79896),s=r(69106),o=r(11995),l=r(1283),c=r(39023);function d(e,t){Object.defineProperty(e,n,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(n=Symbol.for("graceful-fs.queue"),a=Symbol.for("graceful-fs.previous")):(n="___graceful-fs.queue",a="___graceful-fs.previous");var u,p=function(){};if(c.debuglog?p=c.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(p=function(){var e=c.format.apply(c,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!i[n]){var m=global[n]||[];d(i,m),i.close=function(e){function t(t,r){return e.call(i,t,function(e){e||g(),"function"==typeof r&&r.apply(this,arguments)})}return Object.defineProperty(t,a,{value:e}),t}(i.close),i.closeSync=function(e){function t(t){e.apply(i,arguments),g()}return Object.defineProperty(t,a,{value:e}),t}(i.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){p(i[n]),r(42613).equal(i[n].length,0)})}function h(e){s(e),e.gracefulify=h,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,n){return"function"==typeof r&&(n=r,r=null),function e(r,n,a,i){return t(r,n,function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof a&&a.apply(this,arguments):f([e,[r,n,a],t,i||Date.now(),Date.now()])})}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,a){return"function"==typeof n&&(a=n,n=null),function e(t,n,a,i,s){return r(t,n,a,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):f([e,[t,n,a,i],r,s||Date.now(),Date.now()])})}(e,t,n,a)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,a){return"function"==typeof r&&(a=r,r=null),function e(t,r,a,i,s){return n(t,r,a,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):f([e,[t,r,a,i],n,s||Date.now(),Date.now()])})}(e,t,r,a)});var a=e.copyFile;a&&(e.copyFile=function(e,t,r,n){return"function"==typeof r&&(n=r,r=0),function e(t,r,n,i,s){return a(t,r,n,function(a){!a||"EMFILE"!==a.code&&"ENFILE"!==a.code?"function"==typeof i&&i.apply(this,arguments):f([e,[t,r,n,i],a,s||Date.now(),Date.now()])})}(e,t,r,n)});var i=e.readdir;e.readdir=function(e,t,r){"function"==typeof t&&(r=t,t=null);var n=l.test(process.version)?function(e,t,r,n){return i(e,a(e,t,r,n))}:function(e,t,r,n){return i(e,t,a(e,t,r,n))};return n(e,t,r);function a(e,t,r,a){return function(i,s){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?(s&&s.sort&&s.sort(),"function"==typeof r&&r.call(this,i,s)):f([n,[e,t,r],i,a||Date.now(),Date.now()])}}};var l=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var c=o(e);g=c.ReadStream,y=c.WriteStream}var d=e.ReadStream;d&&(g.prototype=Object.create(d.prototype),g.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())})});var u=e.WriteStream;u&&(y.prototype=Object.create(u.prototype),y.prototype.open=function(){var e=this;b(e.path,e.flags,e.mode,function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))})}),Object.defineProperty(e,"ReadStream",{get:function(){return g},set:function(e){g=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return y},set:function(e){y=e},enumerable:!0,configurable:!0});var p=g;Object.defineProperty(e,"FileReadStream",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0});var m=y;function g(e,t){return this instanceof g?(d.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function y(e,t){return this instanceof y?(u.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return m},set:function(e){m=e},enumerable:!0,configurable:!0});var v=e.open;function b(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,a,i){return v(t,r,n,function(s,o){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof a&&a.apply(this,arguments):f([e,[t,r,n,a],s,i||Date.now(),Date.now()])})}(e,t,r,n)}return e.open=b,e}function f(e){p("ENQUEUE",e[0].name,e[1]),i[n].push(e),y()}function g(){for(var e=Date.now(),t=0;t<i[n].length;++t)i[n][t].length>2&&(i[n][t][3]=e,i[n][t][4]=e);y()}function y(){if(clearTimeout(u),u=void 0,0!==i[n].length){var e=i[n].shift(),t=e[0],r=e[1],a=e[2],s=e[3],o=e[4];if(void 0===s)p("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-s>=6e4){p("TIMEOUT",t.name,r);var l=r.pop();"function"==typeof l&&l.call(null,a)}else{var c=Date.now()-o,d=Math.max(o-s,1);c>=Math.min(1.2*d,100)?(p("RETRY",t.name,r),t.apply(null,r.concat([s]))):i[n].push(e)}void 0===u&&(u=setTimeout(y,0))}}global[n]||d(global,i[n]),e.exports=h(l(i)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!i.__patched&&(e.exports=h(i),i.__patched=!0)},63754:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEffectsDef=void 0;const n=r(84769),a=r(95346);t.parseEffectsDef=function(e,t){return"input"===t.effectStrategy?(0,n.parseDef)(e.schema._def,t):(0,a.parseAnyDef)(t)}},63786:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bearerAuthenticationPolicyName=void 0,t.bearerAuthenticationPolicy=function(e){return{name:t.bearerAuthenticationPolicyName,async sendRequest(t,r){var a,i;if((0,n.ensureSecureConnection)(t,e),!(null===(i=null!==(a=t.authSchemes)&&void 0!==a?a:e.authSchemes)||void 0===i?void 0:i.find(e=>"http"===e.kind&&"bearer"===e.scheme)))return r(t);const s=await e.credential.getBearerToken({abortSignal:t.abortSignal});return t.headers.set("Authorization",`Bearer ${s}`),r(t)}}};const n=r(10851);t.bearerAuthenticationPolicyName="bearerAuthenticationPolicy"},63798:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,{makeDir:a,makeDirSync:i}=r(98916),s=n(a);e.exports={mkdirs:s,mkdirsSync:i,mkdirp:s,mkdirpSync:i,ensureDir:s,ensureDirSync:i}},63868:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseProxyResponse=void 0;const a=(0,n(r(45753)).default)("https-proxy-agent:parse-proxy-response");t.parseProxyResponse=function(e){return new Promise((t,r)=>{let n=0;const i=[];function s(){const l=e.read();l?function(l){i.push(l),n+=l.length;const c=Buffer.concat(i,n),d=c.indexOf("\r\n\r\n");if(-1===d)return a("have not received end of HTTP headers yet..."),void s();const u=c.slice(0,d).toString("ascii").split("\r\n"),p=u.shift();if(!p)return e.destroy(),r(new Error("No header received from proxy CONNECT response"));const m=p.split(" "),h=+m[1],f=m.slice(2).join(" "),g={};for(const t of u){if(!t)continue;const n=t.indexOf(":");if(-1===n)return e.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${t}"`));const a=t.slice(0,n).toLowerCase(),i=t.slice(n+1).trimStart(),s=g[a];"string"==typeof s?g[a]=[s,i]:Array.isArray(s)?s.push(i):g[a]=i}a("got proxy server response: %o %o",p,g),o(),t({connect:{statusCode:h,statusText:f,headers:g},buffered:c})}(l):e.once("readable",s)}function o(){e.removeListener("end",l),e.removeListener("error",c),e.removeListener("readable",s)}function l(){o(),a("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}function c(e){o(),a("onerror %o",e),r(e)}e.on("error",c),e.on("end",l),s()})}},64084:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.safeParseAsync=t._safeParseAsync=t.safeParse=t._safeParse=t.parseAsync=t._parseAsync=t.parse=t._parse=void 0;const s=i(r(98706)),o=i(r(24362)),l=i(r(90523));t._parse=e=>(t,r,n,a)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new s.$ZodAsyncError;if(o.issues.length){const t=new(a?.Err??e)(o.issues.map(e=>l.finalizeIssue(e,i,s.config())));throw l.captureStackTrace(t,a?.callee),t}return o.value},t.parse=(0,t._parse)(o.$ZodRealError),t._parseAsync=e=>async(t,r,n,a)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise&&(o=await o),o.issues.length){const t=new(a?.Err??e)(o.issues.map(e=>l.finalizeIssue(e,i,s.config())));throw l.captureStackTrace(t,a?.callee),t}return o.value},t.parseAsync=(0,t._parseAsync)(o.$ZodRealError),t._safeParse=e=>(t,r,n)=>{const a=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new s.$ZodAsyncError;return i.issues.length?{success:!1,error:new(e??o.$ZodError)(i.issues.map(e=>l.finalizeIssue(e,a,s.config())))}:{success:!0,data:i.value}},t.safeParse=(0,t._safeParse)(o.$ZodRealError),t._safeParseAsync=e=>async(t,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>l.finalizeIssue(e,a,s.config())))}:{success:!0,data:i.value}},t.safeParseAsync=(0,t._safeParseAsync)(o.$ZodRealError)},64094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(76982);t.default=function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),(0,n.createHash)("sha1").update(e).digest()}},64212:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(22268)),s=r(22268);class o extends a.APIResource{constructor(){super(...arguments),this.graders=new i.Graders(this._client)}}t.Alpha=o,o.Graders=s.Graders},64336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operationOptionsToRequestParameters=t.addCredentialPipelinePolicy=t.createRestError=void 0;const n=r(31635);var a=r(86220);Object.defineProperty(t,"createRestError",{enumerable:!0,get:function(){return a.createRestError}});var i=r(68208);Object.defineProperty(t,"addCredentialPipelinePolicy",{enumerable:!0,get:function(){return i.addCredentialPipelinePolicy}});var s=r(67339);Object.defineProperty(t,"operationOptionsToRequestParameters",{enumerable:!0,get:function(){return s.operationOptionsToRequestParameters}}),n.__exportStar(r(95367),t),n.__exportStar(r(35683),t)},64494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AIMessageChunk=t.isAIMessageChunk=t.isAIMessage=t.AIMessage=void 0;const n=r(56789),a=r(66267),i=r(80202);class s extends a.BaseMessage{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){let r;if("string"==typeof e)r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t??{}};else{r=e;const t=r.additional_kwargs?.tool_calls,n=r.tool_calls;null!=t&&t.length>0&&(void 0===n||0===n.length)&&console.warn(["New LangChain packages are available that more efficiently handle","tool calling.\n\nPlease upgrade your packages to versions that set","message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(null!=t&&void 0===n){const[e,n]=(0,i.defaultToolCallParser)(t);r.tool_calls=e??[],r.invalid_tool_calls=n??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch(e){r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"string"!=typeof r&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}t.AIMessage=s,t.isAIMessage=function(e){return"ai"===e._getType()},t.isAIMessageChunk=function(e){return"ai"===e._getType()};class o extends a.BaseMessageChunk{constructor(e){let t;if("string"==typeof e)t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(void 0===e.tool_call_chunks)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[]};else{const r=[],a=[];for(const t of e.tool_call_chunks){let e={};try{if(e=(0,n.parsePartialJson)(t.args||"{}"),null===e||"object"!=typeof e||Array.isArray(e))throw new Error("Malformed tool call chunk args.");r.push({name:t.name??"",args:e,id:t.id,type:"tool_call"})}catch(e){a.push({name:t.name,args:t.args,id:t.id,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:r,invalid_tool_calls:a}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const t={content:(0,a.mergeContent)(this.content,e.content),additional_kwargs:(0,a._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,a._mergeDicts)(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(void 0!==this.tool_call_chunks||void 0!==e.tool_call_chunks){const r=(0,a._mergeLists)(this.tool_call_chunks,e.tool_call_chunks);void 0!==r&&r.length>0&&(t.tool_call_chunks=r)}if(void 0!==this.usage_metadata||void 0!==e.usage_metadata){const r=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},n=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},a={input_tokens:r.input_tokens+n.input_tokens,output_tokens:r.output_tokens+n.output_tokens,total_tokens:r.total_tokens+n.total_tokens};t.usage_metadata=a}return new o(t)}}t.AIMessageChunk=o},64524:(e,t,r)=>{"use strict";t=e.exports=function(...e){return new t.default(...e)},Object.defineProperty(t,"__esModule",{value:!0}),t.UnprocessableEntityError=t.PermissionDeniedError=t.InternalServerError=t.AuthenticationError=t.BadRequestError=t.RateLimitError=t.ConflictError=t.NotFoundError=t.APIUserAbortError=t.APIConnectionTimeoutError=t.APIConnectionError=t.APIError=t.AnthropicError=t.PagePromise=t.AI_PROMPT=t.HUMAN_PROMPT=t.Anthropic=t.BaseAnthropic=t.APIPromise=t.toFile=t.default=void 0;var n=r(59925);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.Anthropic}});var a=r(53672);Object.defineProperty(t,"toFile",{enumerable:!0,get:function(){return a.toFile}});var i=r(13962);Object.defineProperty(t,"APIPromise",{enumerable:!0,get:function(){return i.APIPromise}});var s=r(59925);Object.defineProperty(t,"BaseAnthropic",{enumerable:!0,get:function(){return s.BaseAnthropic}}),Object.defineProperty(t,"Anthropic",{enumerable:!0,get:function(){return s.Anthropic}}),Object.defineProperty(t,"HUMAN_PROMPT",{enumerable:!0,get:function(){return s.HUMAN_PROMPT}}),Object.defineProperty(t,"AI_PROMPT",{enumerable:!0,get:function(){return s.AI_PROMPT}});var o=r(24384);Object.defineProperty(t,"PagePromise",{enumerable:!0,get:function(){return o.PagePromise}});var l=r(58092);Object.defineProperty(t,"AnthropicError",{enumerable:!0,get:function(){return l.AnthropicError}}),Object.defineProperty(t,"APIError",{enumerable:!0,get:function(){return l.APIError}}),Object.defineProperty(t,"APIConnectionError",{enumerable:!0,get:function(){return l.APIConnectionError}}),Object.defineProperty(t,"APIConnectionTimeoutError",{enumerable:!0,get:function(){return l.APIConnectionTimeoutError}}),Object.defineProperty(t,"APIUserAbortError",{enumerable:!0,get:function(){return l.APIUserAbortError}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return l.NotFoundError}}),Object.defineProperty(t,"ConflictError",{enumerable:!0,get:function(){return l.ConflictError}}),Object.defineProperty(t,"RateLimitError",{enumerable:!0,get:function(){return l.RateLimitError}}),Object.defineProperty(t,"BadRequestError",{enumerable:!0,get:function(){return l.BadRequestError}}),Object.defineProperty(t,"AuthenticationError",{enumerable:!0,get:function(){return l.AuthenticationError}}),Object.defineProperty(t,"InternalServerError",{enumerable:!0,get:function(){return l.InternalServerError}}),Object.defineProperty(t,"PermissionDeniedError",{enumerable:!0,get:function(){return l.PermissionDeniedError}}),Object.defineProperty(t,"UnprocessableEntityError",{enumerable:!0,get:function(){return l.UnprocessableEntityError}})},64635:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLangChainErrorFields=function(e,t){return e.lc_error_code=t,e.message=`${e.message}\n\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${t}/\n`,e}},64691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsingToolFunction=void 0,t.isRunnableFunctionWithParse=function(e){return"function"==typeof e.parse},t.ParsingToolFunction=class{constructor(e){this.type="function",this.function=e}}},64735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.path=t.createPathTagFunction=void 0,t.encodeURIPath=a;const n=r(58092);function a(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const i=Object.freeze(Object.create(null));t.createPathTagFunction=(e=a)=>function(t,...r){if(1===t.length)return t[0];let a=!1;const s=[],o=t.reduce((t,n,o)=>{/[?#]/.test(n)&&(a=!0);const l=r[o];let c=(a?encodeURIComponent:e)(""+l);return o!==r.length&&(null==l||"object"==typeof l&&l.toString===Object.getPrototypeOf(Object.getPrototypeOf(l.hasOwnProperty??i)??i)?.toString)&&(c=l+"",s.push({start:t.length+n.length,length:c.length,error:`Value of type ${Object.prototype.toString.call(l).slice(8,-1)} is not a valid path parameter`})),t+n+(o===r.length?"":c)},""),l=o.split(/[?#]/,1)[0],c=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let d;for(;null!==(d=c.exec(l));)s.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(s.sort((e,t)=>e.start-t.start),s.length>0){let e=0;const t=s.reduce((t,r)=>{const n=" ".repeat(r.start-e),a="^".repeat(r.length);return e=r.start+r.length,t+n+a},"");throw new n.AnthropicError(`Path parameters result in path with invalid segments:\n${s.map(e=>e.error).join("\n")}\n${o}\n${t}`)}return o},t.path=(0,t.createPathTagFunction)(a)},64756:e=>{"use strict";e.exports=require("tls")},64759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultRetryPolicyName=void 0,t.defaultRetryPolicy=function(e={}){var r;return{name:t.defaultRetryPolicyName,sendRequest:(0,i.retryPolicy)([(0,a.throttlingRetryStrategy)(),(0,n.exponentialRetryStrategy)(e)],{maxRetries:null!==(r=e.maxRetries)&&void 0!==r?r:s.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}};const n=r(4077),a=r(87941),i=r(48334),s=r(37146);t.defaultRetryPolicyName="defaultRetryPolicy"},64863:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestError=void 0,t.isRestError=function(e){return(0,n.isRestError)(e)};const n=r(26455);t.RestError=n.RestError},65129:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raceWithSignal=async function(e,t){if(void 0===t)return e;let r;return Promise.race([e.catch(e=>{if(!t?.aborted)throw e}),new Promise((e,n)=>{r=()=>{n(new Error("Aborted"))},t.addEventListener("abort",r),t.aborted&&n(new Error("Aborted"))})]).finally(()=>t.removeEventListener("abort",r))}},65189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=t.ignoreOverride=void 0,t.ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use");const r={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};t.getDefaultOptions=e=>"string"==typeof e?{...r,basePath:["#"],definitions:{},name:e}:{...r,basePath:["#"],definitions:{},...e}},65369:(e,t,r)=>{"use strict";var n,a,i,s,o,l,c,d,u,p,m,h,f,g,y,v,b,_,w,P,O,S;Object.defineProperty(t,"__esModule",{value:!0}),t.BetaMessageStream=void 0;const E=r(47984),A=r(8709),I=r(72854),k=r(2492),T=r(50954),j="__json_buf";function C(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class x{constructor(){n.add(this),this.messages=[],this.receivedMessages=[],a.set(this,void 0),this.controller=new AbortController,i.set(this,void 0),s.set(this,()=>{}),o.set(this,()=>{}),l.set(this,void 0),c.set(this,()=>{}),d.set(this,()=>{}),u.set(this,{}),p.set(this,!1),m.set(this,!1),h.set(this,!1),f.set(this,!1),g.set(this,void 0),y.set(this,void 0),_.set(this,e=>{if(E.__classPrivateFieldSet(this,m,!0,"f"),(0,A.isAbortError)(e)&&(e=new I.APIUserAbortError),e instanceof I.APIUserAbortError)return E.__classPrivateFieldSet(this,h,!0,"f"),this._emit("abort",e);if(e instanceof I.AnthropicError)return this._emit("error",e);if(e instanceof Error){const t=new I.AnthropicError(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new I.AnthropicError(String(e)))}),E.__classPrivateFieldSet(this,i,new Promise((e,t)=>{E.__classPrivateFieldSet(this,s,e,"f"),E.__classPrivateFieldSet(this,o,t,"f")}),"f"),E.__classPrivateFieldSet(this,l,new Promise((e,t)=>{E.__classPrivateFieldSet(this,c,e,"f"),E.__classPrivateFieldSet(this,d,t,"f")}),"f"),E.__classPrivateFieldGet(this,i,"f").catch(()=>{}),E.__classPrivateFieldGet(this,l,"f").catch(()=>{})}get response(){return E.__classPrivateFieldGet(this,g,"f")}get request_id(){return E.__classPrivateFieldGet(this,y,"f")}async withResponse(){const e=await E.__classPrivateFieldGet(this,i,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){const t=new x;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,r){const n=new x;for(const e of t.messages)n._addMessageParam(e);return n._run(()=>n._createMessage(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},E.__classPrivateFieldGet(this,_,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,r){const a=r?.signal;let i;a&&(a.aborted&&this.controller.abort(),i=this.controller.abort.bind(this.controller),a.addEventListener("abort",i));try{E.__classPrivateFieldGet(this,n,"m",w).call(this);const{response:a,data:i}=await e.create({...t,stream:!0},{...r,signal:this.controller.signal}).withResponse();this._connected(a);for await(const e of i)E.__classPrivateFieldGet(this,n,"m",P).call(this,e);if(i.controller.signal?.aborted)throw new I.APIUserAbortError;E.__classPrivateFieldGet(this,n,"m",O).call(this)}finally{a&&i&&a.removeEventListener("abort",i)}}_connected(e){this.ended||(E.__classPrivateFieldSet(this,g,e,"f"),E.__classPrivateFieldSet(this,y,e?.headers.get("request-id"),"f"),E.__classPrivateFieldGet(this,s,"f").call(this,e),this._emit("connect"))}get ended(){return E.__classPrivateFieldGet(this,p,"f")}get errored(){return E.__classPrivateFieldGet(this,m,"f")}get aborted(){return E.__classPrivateFieldGet(this,h,"f")}abort(){this.controller.abort()}on(e,t){return(E.__classPrivateFieldGet(this,u,"f")[e]||(E.__classPrivateFieldGet(this,u,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=E.__classPrivateFieldGet(this,u,"f")[e];if(!r)return this;const n=r.findIndex(e=>e.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(E.__classPrivateFieldGet(this,u,"f")[e]||(E.__classPrivateFieldGet(this,u,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{E.__classPrivateFieldSet(this,f,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){E.__classPrivateFieldSet(this,f,!0,"f"),await E.__classPrivateFieldGet(this,l,"f")}get currentMessage(){return E.__classPrivateFieldGet(this,a,"f")}async finalMessage(){return await this.done(),E.__classPrivateFieldGet(this,n,"m",v).call(this)}async finalText(){return await this.done(),E.__classPrivateFieldGet(this,n,"m",b).call(this)}_emit(e,...t){if(E.__classPrivateFieldGet(this,p,"f"))return;"end"===e&&(E.__classPrivateFieldSet(this,p,!0,"f"),E.__classPrivateFieldGet(this,c,"f").call(this));const r=E.__classPrivateFieldGet(this,u,"f")[e];if(r&&(E.__classPrivateFieldGet(this,u,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return E.__classPrivateFieldGet(this,f,"f")||r?.length||Promise.reject(e),E.__classPrivateFieldGet(this,o,"f").call(this,e),E.__classPrivateFieldGet(this,d,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];E.__classPrivateFieldGet(this,f,"f")||r?.length||Promise.reject(e),E.__classPrivateFieldGet(this,o,"f").call(this,e),E.__classPrivateFieldGet(this,d,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",E.__classPrivateFieldGet(this,n,"m",v).call(this))}async _fromReadableStream(e,t){const r=t?.signal;let a;r&&(r.aborted&&this.controller.abort(),a=this.controller.abort.bind(this.controller),r.addEventListener("abort",a));try{E.__classPrivateFieldGet(this,n,"m",w).call(this),this._connected(null);const t=k.Stream.fromReadableStream(e,this.controller);for await(const e of t)E.__classPrivateFieldGet(this,n,"m",P).call(this,e);if(t.controller.signal?.aborted)throw new I.APIUserAbortError;E.__classPrivateFieldGet(this,n,"m",O).call(this)}finally{r&&a&&r.removeEventListener("abort",a)}}[(a=new WeakMap,i=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakMap,_=new WeakMap,n=new WeakSet,v=function(){if(0===this.receivedMessages.length)throw new I.AnthropicError("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},b=function(){if(0===this.receivedMessages.length)throw new I.AnthropicError("stream ended without producing a Message with role=assistant");const e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new I.AnthropicError("stream ended without producing a content block with type=text");return e.join(" ")},w=function(){this.ended||E.__classPrivateFieldSet(this,a,void 0,"f")},P=function(e){if(this.ended)return;const t=E.__classPrivateFieldGet(this,n,"m",S).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{const r=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===r.type&&this._emit("text",e.delta.text,r.text||"");break;case"citations_delta":"text"===r.type&&this._emit("citation",e.delta.citation,r.citations??[]);break;case"input_json_delta":C(r)&&r.input&&this._emit("inputJson",e.delta.partial_json,r.input);break;case"thinking_delta":"thinking"===r.type&&this._emit("thinking",e.delta.thinking,r.thinking);break;case"signature_delta":"thinking"===r.type&&this._emit("signature",r.signature);break;default:e.delta}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":E.__classPrivateFieldSet(this,a,t,"f")}},O=function(){if(this.ended)throw new I.AnthropicError("stream has ended, this shouldn't happen");const e=E.__classPrivateFieldGet(this,a,"f");if(!e)throw new I.AnthropicError("request ended without sending any chunks");return E.__classPrivateFieldSet(this,a,void 0,"f"),e},S=function(e){let t=E.__classPrivateFieldGet(this,a,"f");if("message_start"===e.type){if(t)throw new I.AnthropicError(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new I.AnthropicError(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{const r=t.content.at(e.index);switch(e.delta.type){case"text_delta":"text"===r?.type&&(t.content[e.index]={...r,text:(r.text||"")+e.delta.text});break;case"citations_delta":"text"===r?.type&&(t.content[e.index]={...r,citations:[...r.citations??[],e.delta.citation]});break;case"input_json_delta":if(r&&C(r)){let n=r[j]||"";n+=e.delta.partial_json;const a={...r};if(Object.defineProperty(a,j,{value:n,enumerable:!1,writable:!0}),n)try{a.input=(0,T.partialParse)(n)}catch(e){const t=new I.AnthropicError(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${e}. JSON: ${n}`);E.__classPrivateFieldGet(this,_,"f").call(this,t)}t.content[e.index]=a}break;case"thinking_delta":"thinking"===r?.type&&(t.content[e.index]={...r,thinking:r.thinking+e.delta.thinking});break;case"signature_delta":"thinking"===r?.type&&(t.content[e.index]={...r,signature:e.delta.signature});break;default:e.delta}return t}}},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("streamEvent",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new k.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}t.BetaMessageStream=x},65508:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNativeEnumDef=void 0,t.parseNativeEnumDef=function(e){const t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}},65692:e=>{"use strict";e.exports=require("https")},65792:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatToOpenAITool=t.formatToOpenAIFunction=void 0,t.wrapOpenAIClientError=function(e){let t;return e.constructor.name===n.APIConnectionTimeoutError.name?(t=new Error(e.message),t.name="TimeoutError"):e.constructor.name===n.APIUserAbortError.name?(t=new Error(e.message),t.name="AbortError"):t=400===e.status&&e.message.includes("tool_calls")?(0,c.addLangChainErrorFields)(e,"INVALID_TOOL_RESULTS"):401===e.status?(0,c.addLangChainErrorFields)(e,"MODEL_AUTHENTICATION"):429===e.status?(0,c.addLangChainErrorFields)(e,"MODEL_RATE_LIMIT"):404===e.status?(0,c.addLangChainErrorFields)(e,"MODEL_NOT_FOUND"):e,t},t.formatToOpenAIAssistantTool=function(e){return{type:"function",function:{name:e.name,description:e.description,parameters:(0,i.isInteropZodSchema)(e.schema)?(0,s.toJsonSchema)(e.schema):e.schema}}},t.formatToOpenAIToolChoice=function(e){return e?"any"===e||"required"===e?"required":"auto"===e?"auto":"none"===e?"none":"string"==typeof e?{type:"function",function:{name:e}}:e:void 0},t.interopZodResponseFormat=function(e,t,r){if((0,i.isZodSchemaV3)(e))return(0,l.zodResponseFormat)(e,t,r);if((0,i.isZodSchemaV4)(e))return function(t){const r={...t};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t=>(0,o.parse)(e,JSON.parse(t)),enumerable:!1}}),r}({type:"json_schema",json_schema:{...r,name:t,strict:!0,schema:(0,o.toJSONSchema)(e,{cycles:"ref",reused:"ref",override(e){e.jsonSchema.title=t}})}});throw new Error("Unsupported schema response format")};const n=r(32012),a=r(30107);Object.defineProperty(t,"formatToOpenAIFunction",{enumerable:!0,get:function(){return a.convertToOpenAIFunction}}),Object.defineProperty(t,"formatToOpenAITool",{enumerable:!0,get:function(){return a.convertToOpenAITool}});const i=r(60845),s=r(8194),o=r(76601),l=r(41247),c=r(22487)},65901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseObjectDef=function(e,t){const r={type:"object",...Object.entries(e.shape()).reduce((e,[r,a])=>{if(void 0===a||void 0===a._def)return e;const i=[...t.currentPath,"properties",r],s=(0,n.parseDef)(a._def,{...t,currentPath:i,propertyPath:i});if(void 0===s)return e;if(t.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&void 0===a._def?.defaultValue)throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...e.properties,[r]:s},required:a.isOptional()&&!t.openaiStrictMode?e.required:[...e.required,r]}},{properties:{},required:[]}),additionalProperties:a(e,t)};return r.required.length||delete r.required,r};const n=r(95445);function a(e,t){return"strict"===t.removeAdditionalStrategy?"ZodNever"===e.catchall._def.typeName?"strict"!==e.unknownKeys:(0,n.parseDef)(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:(0,n.parseDef)(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}},65925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Serializable=t.get_lc_unique_name=void 0;const n=r(37581);function a(e){return Array.isArray(e)?[...e]:{...e}}function i(e,t){const r=a(e);for(const[e,n]of Object.entries(t)){const[t,...i]=e.split(".").reverse();let s=r;for(const e of i.reverse()){if(void 0===s[e])break;s[e]=a(s[e]),s=s[e]}void 0!==s[t]&&(s[t]={lc:1,type:"secret",id:[n]})}return r}function s(e){const t=Object.getPrototypeOf(e);return"function"!=typeof e.lc_name||"function"==typeof t.lc_name&&e.lc_name()===t.lc_name()?e.name:e.lc_name()}t.get_lc_unique_name=s;class o{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,s(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof o||"object"!=typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},r=Object.keys(this.lc_kwargs).reduce((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e),{});for(let n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n,"lc_aliases",this)),Object.assign(t,Reflect.get(n,"lc_secrets",this)),Object.assign(r,Reflect.get(n,"lc_attributes",this));return Object.keys(t).forEach(e=>{let t=this,n=r;const[a,...i]=e.split(".").reverse();for(const e of i.reverse()){if(!(e in t)||void 0===t[e])return;e in n&&void 0!==n[e]||("object"==typeof t[e]&&null!=t[e]?n[e]={}:Array.isArray(t[e])&&(n[e]=[])),t=t[e],n=n[e]}a in t&&void 0!==t[a]&&(n[a]=n[a]||t[a])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:(0,n.mapKeys)(Object.keys(t).length?i(r,t):r,n.keyToJson,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}t.Serializable=o},66068:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"tegn",verb:"å ha"},file:{unit:"bytes",verb:"å ha"},array:{unit:"elementer",verb:"å inneholde"},set:{unit:"elementer",verb:"å inneholde"}};function t(t){return e[t]??null}const r={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-område",ipv6:"IPv6-område",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return e=>{switch(e.code){case"invalid_type":return`Ugyldig input: forventet ${e.expected}, fikk ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"tall";case"object":if(Array.isArray(e))return"liste";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Ugyldig verdi: forventet ${s.stringifyPrimitive(e.values[0])}`:`Ugyldig valg: forventet en av ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`For stor(t): forventet ${e.origin??"value"} til å ha ${r}${e.maximum.toString()} ${n.unit??"elementer"}`:`For stor(t): forventet ${e.origin??"value"} til å ha ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`For lite(n): forventet ${e.origin} til å ha ${r}${e.minimum.toString()} ${n.unit}`:`For lite(n): forventet ${e.origin} til å ha ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Ugyldig streng: må starte med "${t.prefix}"`:"ends_with"===t.format?`Ugyldig streng: må ende med "${t.suffix}"`:"includes"===t.format?`Ugyldig streng: må inneholde "${t.includes}"`:"regex"===t.format?`Ugyldig streng: må matche mønsteret ${t.pattern}`:`Ugyldig ${r[t.format]??e.format}`}case"not_multiple_of":return`Ugyldig tall: må være et multiplum av ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Ukjente nøkler":"Ukjent nøkkel"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Ugyldig nøkkel i ${e.origin}`;case"invalid_union":default:return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${e.origin}`}}}},66267:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBaseMessageChunk=t.isBaseMessage=t._isMessageFieldWithRole=t.BaseMessageChunk=t._mergeObj=t._mergeLists=t._mergeDicts=t.isOpenAIToolCallArray=t.BaseMessage=t._mergeStatus=t.mergeContent=void 0;const n=r(65925);t.mergeContent=function(e,t){return"string"==typeof e?"string"==typeof t?e+t:[{type:"text",text:e},...t]:Array.isArray(t)?s(e,t)??[...e,...t]:[...e,{type:"text",text:t}]},t._mergeStatus=function(e,t){return"error"===e||"error"===t?"error":"success"};class a extends n.Serializable{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return"string"==typeof this.content?this.content:""}constructor(e,t){"string"==typeof e&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(null===e)return this;const t=(r=this._printableFields,n=Math.max(4,e),JSON.stringify(function e(t,r){if("object"!=typeof t||null==t)return t;if(r>=n)return Array.isArray(t)?"[Array]":"[Object]";if(Array.isArray(t))return t.map(t=>e(t,r+1));const a={};for(const n of Object.keys(t))a[n]=e(t[n],r+1);return a}(r,0),null,2));var r,n;return`${this.constructor.lc_name()} ${t}`}}function i(e,t){const r={...e};for(const[e,n]of Object.entries(t))if(null==r[e])r[e]=n;else{if(null==n)continue;if(typeof r[e]!=typeof n||Array.isArray(r[e])!==Array.isArray(n))throw new Error(`field[${e}] already exists in the message chunk, but with a different type.`);if("string"==typeof r[e]){if("type"===e)continue;r[e]+=n}else if("object"!=typeof r[e]||Array.isArray(r[e]))if(Array.isArray(r[e]))r[e]=s(r[e],n);else{if(r[e]===n)continue;console.warn(`field[${e}] already exists in this message chunk and value has unsupported type.`)}else r[e]=i(r[e],n)}return r}function s(e,t){if(void 0!==e||void 0!==t){if(void 0===e||void 0===t)return e||t;{const r=[...e];for(const e of t)if("object"==typeof e&&"index"in e&&"number"==typeof e.index){const t=r.findIndex(t=>t.index===e.index);-1!==t?r[t]=i(r[t],e):r.push(e)}else{if("object"==typeof e&&"text"in e&&""===e.text)continue;r.push(e)}return r}}}function o(e){return"function"==typeof e?._getType}t.BaseMessage=a,t.isOpenAIToolCallArray=function(e){return Array.isArray(e)&&e.every(e=>"number"==typeof e.index)},t._mergeDicts=i,t._mergeLists=s,t._mergeObj=function(e,t){if(!e&&!t)throw new Error("Cannot merge two undefined objects.");if(e&&t){if(typeof e!=typeof t)throw new Error(`Cannot merge objects of different types.\nLeft ${typeof e}\nRight ${typeof t}`);if("string"==typeof e&&"string"==typeof t)return e+t;if(Array.isArray(e)&&Array.isArray(t))return s(e,t);if("object"==typeof e&&"object"==typeof t)return i(e,t);if(e===t)return e;throw new Error(`Can not merge objects of different types.\nLeft ${e}\nRight ${t}`)}return e||t},t.BaseMessageChunk=class extends a{},t._isMessageFieldWithRole=function(e){return"string"==typeof e.role},t.isBaseMessage=o,t.isBaseMessageChunk=function(e){return o(e)&&"function"==typeof e.concat}},66365:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseLiteralDef=void 0,t.parseLiteralDef=function(e,t){const r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}},66414:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redirectPolicyName=void 0,t.redirectPolicy=function(e={}){const{maxRetries:r=20}=e;return{name:t.redirectPolicyName,async sendRequest(e,t){const a=await t(e);return n(t,a,r)}}},t.redirectPolicyName="redirectPolicy";const r=["GET","HEAD"];async function n(e,t,a,i=0){const{request:s,status:o,headers:l}=t,c=l.get("location");if(c&&(300===o||301===o&&r.includes(s.method)||302===o&&r.includes(s.method)||303===o&&"POST"===s.method||307===o)&&i<a){const t=new URL(c,s.url);s.url=t.toString(),303===o&&(s.method="GET",s.headers.delete("Content-Length"),delete s.body),s.headers.delete("Authorization");const r=await e(s);return n(e,r,a,i+1)}return t}},66444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasRawContent=s,t.getRawContent=function(e){return s(e)?e[i]():e},t.createFileFromStream=function(e,t,r={}){var n,s,o,l;return Object.assign(Object.assign({},a),{type:null!==(n=r.type)&&void 0!==n?n:"",lastModified:null!==(s=r.lastModified)&&void 0!==s?s:(new Date).getTime(),webkitRelativePath:null!==(o=r.webkitRelativePath)&&void 0!==o?o:"",size:null!==(l=r.size)&&void 0!==l?l:-1,name:t,stream:()=>{const t=e();if(r=t,Boolean(r&&"function"==typeof r.pipe))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");var r;return t},[i]:e})},t.createFile=function(e,t,r={}){var s,o,l;return n.isNodeLike?Object.assign(Object.assign({},a),{type:null!==(s=r.type)&&void 0!==s?s:"",lastModified:null!==(o=r.lastModified)&&void 0!==o?o:(new Date).getTime(),webkitRelativePath:null!==(l=r.webkitRelativePath)&&void 0!==l?l:"",size:e.byteLength,name:t,arrayBuffer:async()=>e.buffer,stream:()=>new Blob([e]).stream(),[i]:()=>e}):new File([e],t,r)};const n=r(16184),a={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},i=Symbol("rawContent");function s(e){return"function"==typeof e[i]}},66462:(e,t,r)=>{"use strict";const n=r(98737),a=r(16928),i=r(41236).fromPromise;function s(e,t){return void 0!==t.ino&&void 0!==t.dev&&t.ino===e.ino&&t.dev===e.dev}function o(e,t){const r=a.resolve(e).split(a.sep).filter(e=>e),n=a.resolve(t).split(a.sep).filter(e=>e);return r.every((e,t)=>n[t]===e)}function l(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:i(async function(e,t,r,i){const{srcStat:c,destStat:d}=await function(e,t,r){const a=r.dereference?e=>n.stat(e,{bigint:!0}):e=>n.lstat(e,{bigint:!0});return Promise.all([a(e),a(t).catch(e=>{if("ENOENT"===e.code)return null;throw e})]).then(([e,t])=>({srcStat:e,destStat:t}))}(e,t,i);if(d){if(s(c,d)){const n=a.basename(e),i=a.basename(t);if("move"===r&&n!==i&&n.toLowerCase()===i.toLowerCase())return{srcStat:c,destStat:d,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(c.isDirectory()&&!d.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!c.isDirectory()&&d.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(c.isDirectory()&&o(e,t))throw new Error(l(e,t,r));return{srcStat:c,destStat:d}}),checkPathsSync:function(e,t,r,i){const{srcStat:c,destStat:d}=function(e,t,r){let a;const i=r.dereference?e=>n.statSync(e,{bigint:!0}):e=>n.lstatSync(e,{bigint:!0}),s=i(e);try{a=i(t)}catch(e){if("ENOENT"===e.code)return{srcStat:s,destStat:null};throw e}return{srcStat:s,destStat:a}}(e,t,i);if(d){if(s(c,d)){const n=a.basename(e),i=a.basename(t);if("move"===r&&n!==i&&n.toLowerCase()===i.toLowerCase())return{srcStat:c,destStat:d,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(c.isDirectory()&&!d.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!c.isDirectory()&&d.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(c.isDirectory()&&o(e,t))throw new Error(l(e,t,r));return{srcStat:c,destStat:d}},checkParentPaths:i(async function e(t,r,i,o){const c=a.resolve(a.dirname(t)),d=a.resolve(a.dirname(i));if(d===c||d===a.parse(d).root)return;let u;try{u=await n.stat(d,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(s(r,u))throw new Error(l(t,i,o));return e(t,r,d,o)}),checkParentPathsSync:function e(t,r,i,o){const c=a.resolve(a.dirname(t)),d=a.resolve(a.dirname(i));if(d===c||d===a.parse(d).root)return;let u;try{u=n.statSync(d,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(s(r,u))throw new Error(l(t,i,o));return e(t,r,d,o)},isSrcSubdir:o,areIdentical:s}},66729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureChatOpenAI=t.messageToOpenAIRole=void 0;const n=r(34954),a=r(76607),i=r(75786),s=r(31984),o=r(69157),l=r(40338),c=r(56244),d=r(18677);function u(e,t){const r=e.role??t,n=e.content??"";let a;return a=e.functionCall?{function_call:e.functionCall}:e.toolCalls?{tool_calls:e.toolCalls}:{},"user"===r?new i.HumanMessageChunk({content:n}):"assistant"===r?new i.AIMessageChunk({content:n,additional_kwargs:a}):"system"===r?new i.SystemMessageChunk({content:n}):"function"===r?new i.FunctionMessageChunk({content:n,additional_kwargs:a,name:e.role}):"tool"===r?new i.ToolMessageChunk({content:n,additional_kwargs:a,tool_call_id:e.toolCalls[0].id}):new i.ChatMessageChunk({content:n,role:r})}function p(e){return"assistant"===e.role?new i.AIMessage(e.content||"",{function_call:e.functionCall,tool_calls:e.toolCalls}):new i.ChatMessage(e.content||"",e.role??"unknown")}function m(e){const t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!i.ChatMessage.isInstance(e))throw new Error("Invalid generic chat message");return function(e){return"system"!==e.role&&"assistant"!==e.role&&"user"!==e.role&&"function"!==e.role&&"tool"!==e.role&&console.warn(`Unknown message role: ${e.role}`),e.role}(e);default:throw new Error(`Unknown message type: ${t}`)}}t.messageToOpenAIRole=m;class h extends a.BaseChatModel{static lc_name(){return"AzureChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",azureOpenAIEndpoint:"AZURE_OPENAI_API_ENDPOINT",azureOpenAIApiDeploymentName:"AZURE_OPENAI_API_DEPLOYMENT_NAME"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIEndpoint:"azure_openai_api_endpoint",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"azureExtensionOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.azureOpenAIEndpoint=e?.azureOpenAIEndpoint??(0,o.getEnvironmentVariable)("AZURE_OPENAI_API_ENDPOINT"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIEmbeddingsApiDeploymentName||e?.azureOpenAIApiDeploymentName)??(0,o.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME");const t=e?.apiKey??e?.openAIApiKey??(0,o.getEnvironmentVariable)("OPENAI_API_KEY");this.azureOpenAIApiKey=e?.apiKey??e?.azureOpenAIApiKey??(0,o.getEnvironmentVariable)("AZURE_OPENAI_API_KEY")??t,this.apiKey=this.azureOpenAIApiKey;const r=e?.credentials??(this.apiKey===t?new n.OpenAIKeyCredential(this.apiKey??""):new n.AzureKeyCredential(this.apiKey??"")),a=r instanceof n.OpenAIKeyCredential;if(!this.apiKey&&!e?.credentials)throw new Error("Azure OpenAI API key not found");if(!this.azureOpenAIEndpoint&&!a)throw new Error("Azure OpenAI Endpoint not found");if(!this.azureOpenAIApiDeploymentName&&!a)throw new Error("Azure OpenAI Deployment name not found");this.modelName=e?.model??e?.modelName??this.model,this.model=this.modelName,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.maxTokens=e?.maxTokens,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.azureExtensionOptions=e?.azureExtensionOptions,this.streaming=e?.streaming??!1;const i={userAgentOptions:{userAgentPrefix:d.USER_AGENT_PREFIX}};a?this.client=new n.OpenAIClient(r):((0,l.isTokenCredential)(r),this.client=new n.OpenAIClient(this.azureOpenAIEndpoint??"",r,i))}formatMessages(e){return e.map(e=>({role:m(e),content:e.content,name:e.name,toolCalls:e.additional_kwargs.tool_calls,functionCall:e.additional_kwargs.function_call,toolCallId:e.tool_call_id}))}async _streamChatCompletionsWithRetry(e,t){return this.caller.call(async()=>{const r=this.azureOpenAIApiDeploymentName||this.model;return await this.client.streamChatCompletions(r,e,{functions:t?.functions,functionCall:t?.function_call,maxTokens:this.maxTokens,temperature:this.temperature,topP:this.topP,logitBias:this.logitBias,user:this.user,n:this.n,stop:this.stopSequences,presencePenalty:this.presencePenalty,frequencyPenalty:this.frequencyPenalty,azureExtensionOptions:this.azureExtensionOptions,requestOptions:{timeout:t?.timeout??this.timeout},abortSignal:t?.signal??void 0,tools:t?.tools,toolChoice:t?.tool_choice,responseFormat:t?.response_format,seed:t?.seed,...this.modelKwargs})})}async*_streamResponseChunks(e,t,r){const n=this.formatMessages(e);let a;const i=await this._streamChatCompletionsWithRetry(n,t);for await(const e of i){const n=e?.choices[0];if(!n)continue;const{delta:i}=n;if(!i)continue;const o=u(i,a);a=i.role??a;const l={prompt:t.promptIndex??0,completion:n.index??0};if("string"!=typeof o.content){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const c=new s.ChatGenerationChunk({message:o,text:o.content,generationInfo:l});yield c,r?.handleLLMNewToken(c.text??"",l,void 0,void 0,void 0,{chunk:c})}if(t.signal?.aborted)throw new Error("AbortError")}async _generate(e,t,r){const n=this.azureOpenAIApiDeploymentName||this.model,a={},i=this.formatMessages(e);if(this.streaming){const n=this._streamResponseChunks(e,t,r),i={};for await(const e of n){const t=e.generationInfo?.completion??0;void 0===i[t]?i[t]=e:i[t]=i[t].concat(e)}const s=Object.entries(i).sort(([e],[t])=>parseInt(e,10)-parseInt(t,10)).map(([e,t])=>t),o=await this.getEstimatedTokenCountFromPrompt(e,t?.functions,t?.function_call),l=await this.getNumTokensFromGenerations(s);return a.promptTokens=o,a.completionTokens=l,a.totalTokens=o+l,{generations:s,llmOutput:{estimatedTokenUsage:a}}}{const e=await this.caller.call(()=>this.client.getChatCompletions(n,i,{functions:t?.functions,functionCall:t?.function_call,maxTokens:this.maxTokens,temperature:this.temperature,topP:this.topP,logitBias:this.logitBias,user:this.user,n:this.n,stop:this.stopSequences,presencePenalty:this.presencePenalty,frequencyPenalty:this.frequencyPenalty,azureExtensionOptions:this.azureExtensionOptions,requestOptions:{timeout:t?.timeout??this.timeout},abortSignal:t?.signal??void 0,tools:t?.tools,toolChoice:t?.tool_choice,responseFormat:t?.response_format,seed:t?.seed,...this.modelKwargs})),{completionTokens:r,promptTokens:s,totalTokens:o}=e?.usage??{};r&&(a.completionTokens=(a.completionTokens??0)+r),s&&(a.promptTokens=(a.promptTokens??0)+s),o&&(a.totalTokens=(a.totalTokens??0)+o);const l=[];for(const t of e?.choices??[]){const e=t.message?.content??"",r={text:e,message:p(t.message??{role:"assistant",content:e,toolCalls:[]})};r.generationInfo={...t.finishReason?{finish_reason:t.finishReason}:{}},l.push(r)}return{generations:l,llmOutput:{tokenUsage:a}}}}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async e=>e.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([e.message])).countPerMessage[0]:await this.getNumTokens(e.message.content)))).reduce((e,t)=>e+t,0)}_llmType(){return"azure-openai"}async getEstimatedTokenCountFromPrompt(e,t,r){let n=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&"auto"!==r){const e=(0,c.formatFunctionDefinitions)(t);n+=await this.getNumTokens(e),n+=9}return t&&e.find(e=>"system"===e._getType())&&(n-=4),"none"===r?n+=1:"object"==typeof r&&(n+=await this.getNumTokens(r.name)+4),n}async getNumTokensFromMessages(e){let t=0,r=0,n=0;"gpt-3.5-turbo-0301"===this.model?(r=4,n=-1):(r=3,n=1);const a=await Promise.all(e.map(async e=>{const a=await this.getNumTokens(e.content),i=await this.getNumTokens(m(e)),s=void 0!==e.name?n+await this.getNumTokens(e.name):0;let o=a+r+i+s;const l=e;return"function"===l._getType()&&(o-=2),l.additional_kwargs?.function_call&&(o+=3),l?.additional_kwargs.function_call?.name&&(o+=await this.getNumTokens(l.additional_kwargs.function_call?.name)),l.additional_kwargs.function_call?.arguments&&(o+=await this.getNumTokens(JSON.stringify(JSON.parse(l.additional_kwargs.function_call?.arguments)))),t+=o,o}));return t+=3,{totalCount:t,countPerMessage:a}}_combineLLMOutput(...e){return e.reduce((e,t)=>(t&&t.tokenUsage&&(e.tokenUsage.completionTokens+=t.tokenUsage.completionTokens??0,e.tokenUsage.promptTokens+=t.tokenUsage.promptTokens??0,e.tokenUsage.totalTokens+=t.tokenUsage.totalTokens??0),e),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}}t.AzureChatOpenAI=h},66734:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AIModelClientFactory=t.AzureClient=t.OllamaClient=t.MoonshotClient=t.ZhipuClient=t.GoogleClient=t.QwenClient=t.DeepSeekClient=t.OpenAIClient=t.AIModelClient=void 0;const a=n(r(17645));class i{constructor(e){this.config=e}}t.AIModelClient=i;class s extends i{async generateResponse(e){const t=this.config.apiKey,r=this.config.model||"gpt-4",n=this.config.baseUrl||"https://api.openai.com/v1";try{const i=await(0,a.default)(`${n}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],temperature:.7,max_tokens:2e3})});if(!i.ok)throw new Error(`OpenAI API error: ${i.status} ${i.statusText}`);const s=await i.json();return{content:s.choices[0]?.message?.content||"",usage:{promptTokens:s.usage?.prompt_tokens||0,completionTokens:s.usage?.completion_tokens||0,totalTokens:s.usage?.total_tokens||0}}}catch(e){throw console.error("OpenAI API call failed:",e),e}}validateConfig(){return!(!this.config.apiKey||!this.config.apiKey.startsWith("sk-"))}}t.OpenAIClient=s;class o extends i{async generateResponse(e){const t=this.config.apiKey,r=this.config.model||"deepseek-chat",n=this.config.baseUrl||"https://api.deepseek.com/v1";try{const i=await(0,a.default)(`${n}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],temperature:.7,max_tokens:2e3})});if(!i.ok)throw new Error(`DeepSeek API error: ${i.status} ${i.statusText}`);const s=await i.json();return{content:s.choices[0]?.message?.content||"",usage:{promptTokens:s.usage?.prompt_tokens||0,completionTokens:s.usage?.completion_tokens||0,totalTokens:s.usage?.total_tokens||0}}}catch(e){throw console.error("DeepSeek API call failed:",e),e}}validateConfig(){return!!(this.config.apiKey&&this.config.apiKey.length>0)}}t.DeepSeekClient=o;class l extends i{async generateResponse(e){const t=this.config.apiKey,r=this.config.model||"qwen-turbo",n=this.config.baseUrl||"https://dashscope.aliyuncs.com/api/v1";try{const i=await(0,a.default)(`${n}/services/aigc/text-generation/generation`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:r,input:{messages:[{role:"user",content:e}]},parameters:{temperature:.7,max_tokens:2e3}})});if(!i.ok)throw new Error(`Qwen API error: ${i.status} ${i.statusText}`);const s=await i.json();return{content:s.output?.choices?.[0]?.message?.content||"",usage:{promptTokens:s.usage?.input_tokens||0,completionTokens:s.usage?.output_tokens||0,totalTokens:s.usage?.total_tokens||0}}}catch(e){throw console.error("Qwen API call failed:",e),e}}validateConfig(){return!!(this.config.apiKey&&this.config.apiKey.length>0)}}t.QwenClient=l;class c extends i{async generateResponse(e){const t=this.config.apiKey,r=this.config.model||"gemini-pro",n=this.config.baseUrl||"https://generativelanguage.googleapis.com/v1beta";try{const i=await(0,a.default)(`${n}/models/${r}:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{temperature:.7,maxOutputTokens:2e3}})});if(!i.ok)throw new Error(`Google API error: ${i.status} ${i.statusText}`);const s=await i.json();return{content:s.candidates?.[0]?.content?.parts?.[0]?.text||"",usage:{promptTokens:s.usageMetadata?.promptTokenCount||0,completionTokens:s.usageMetadata?.candidatesTokenCount||0,totalTokens:s.usageMetadata?.totalTokenCount||0}}}catch(e){throw console.error("Google API call failed:",e),e}}validateConfig(){return!!(this.config.apiKey&&this.config.apiKey.length>0)}}t.GoogleClient=c;class d extends i{async generateResponse(e){const t=this.config.apiKey,r=this.config.model||"glm-4",n=this.config.baseUrl||"https://open.bigmodel.cn/api/paas/v4";try{const i=await(0,a.default)(`${n}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],temperature:.7,max_tokens:2e3})});if(!i.ok)throw new Error(`Zhipu API error: ${i.status} ${i.statusText}`);const s=await i.json();return{content:s.choices[0]?.message?.content||"",usage:{promptTokens:s.usage?.prompt_tokens||0,completionTokens:s.usage?.completion_tokens||0,totalTokens:s.usage?.total_tokens||0}}}catch(e){throw console.error("Zhipu API call failed:",e),e}}validateConfig(){return!!(this.config.apiKey&&this.config.apiKey.length>0)}}t.ZhipuClient=d;class u extends i{async generateResponse(e){const t=this.config.apiKey,r=this.config.model||"moonshot-v1-8k",n=this.config.baseUrl||"https://api.moonshot.cn/v1";try{const i=await(0,a.default)(`${n}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:r,messages:[{role:"user",content:e}],temperature:.7,max_tokens:2e3})});if(!i.ok)throw new Error(`Moonshot API error: ${i.status} ${i.statusText}`);const s=await i.json();return{content:s.choices[0]?.message?.content||"",usage:{promptTokens:s.usage?.prompt_tokens||0,completionTokens:s.usage?.completion_tokens||0,totalTokens:s.usage?.total_tokens||0}}}catch(e){throw console.error("Moonshot API call failed:",e),e}}validateConfig(){return!!(this.config.apiKey&&this.config.apiKey.length>0)}}t.MoonshotClient=u;class p extends i{async generateResponse(e){const t=this.config.model||"llama2",r=this.config.baseUrl||"http://localhost:11434";try{const n=await(0,a.default)(`${r}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:t,prompt:e,stream:!1})});if(!n.ok)throw new Error(`Ollama API error: ${n.status} ${n.statusText}`);return{content:(await n.json()).response||"",usage:{promptTokens:0,completionTokens:0,totalTokens:0}}}catch(e){throw console.error("Ollama API call failed:",e),e}}validateConfig(){return!(!this.config.baseUrl||!this.config.model)}}t.OllamaClient=p;class m extends i{async generateResponse(e){const t=this.config.apiKey,r=this.config.model||"gpt-4",n=this.config.baseUrl;if(!n)throw new Error("Azure base URL is required");try{const i=await(0,a.default)(`${n}/openai/deployments/${r}/chat/completions?api-version=2023-12-01-preview`,{method:"POST",headers:{"Content-Type":"application/json","api-key":t},body:JSON.stringify({messages:[{role:"user",content:e}],temperature:.7,max_tokens:2e3})});if(!i.ok)throw new Error(`Azure API error: ${i.status} ${i.statusText}`);const s=await i.json();return{content:s.choices[0]?.message?.content||"",usage:{promptTokens:s.usage?.prompt_tokens||0,completionTokens:s.usage?.completion_tokens||0,totalTokens:s.usage?.total_tokens||0}}}catch(e){throw console.error("Azure API call failed:",e),e}}validateConfig(){return!(!this.config.apiKey||!this.config.baseUrl)}}t.AzureClient=m,t.AIModelClientFactory=class{static createClient(e){switch(e.provider){case"openai":return new s(e);case"deepseek":return new o(e);case"qwen":return new l(e);case"google":return new c(e);case"zhipu":return new d(e);case"moonshot":return new u(e);case"ollama":return new p(e);case"azure":return new m(e);default:throw new Error(`Unsupported AI provider: ${e.provider}`)}}}},67042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIEmbeddings=void 0;const n=r(32012),a=r(82331),i=r(43598),s=r(39899),o=r(81047),l=r(65792);class c extends i.Embeddings{constructor(e){const t={maxConcurrency:2,...e};super(t),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"dimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const r=t?.apiKey??t?.openAIApiKey??(0,a.getEnvironmentVariable)("OPENAI_API_KEY");this.organization=t?.configuration?.organization??(0,a.getEnvironmentVariable)("OPENAI_ORGANIZATION"),this.model=t?.model??t?.modelName??this.model,this.modelName=this.model,this.batchSize=t?.batchSize??this.batchSize,this.stripNewLines=t?.stripNewLines??this.stripNewLines,this.timeout=t?.timeout,this.dimensions=t?.dimensions,this.clientConfig={apiKey:r,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration}}async embedDocuments(e){const t=(0,s.chunkArray)(this.stripNewLines?e.map(e=>e.replace(/\n/g," ")):e,this.batchSize),r=t.map(e=>{const t={model:this.model,input:e};return this.dimensions&&(t.dimensions=this.dimensions),this.embeddingWithRetry(t)}),n=await Promise.all(r),a=[];for(let e=0;e<n.length;e+=1){const r=t[e],{data:i}=n[e];for(let e=0;e<r.length;e+=1)a.push(i[e].embedding)}return a}async embedQuery(e){const t={model:this.model,input:this.stripNewLines?e.replace(/\n/g," "):e};this.dimensions&&(t.dimensions=this.dimensions);const{data:r}=await this.embeddingWithRetry(t);return r[0].embedding}async embeddingWithRetry(e){if(!this.client){const e={baseURL:this.clientConfig.baseURL},t=(0,o.getEndpoint)(e),r={...this.clientConfig,baseURL:t,timeout:this.timeout,maxRetries:0};r.baseURL||delete r.baseURL,this.client=new n.OpenAI(r)}const t={};return this.caller.call(async()=>{try{return await this.client.embeddings.create(e,t)}catch(e){throw(0,l.wrapOpenAIClientError)(e)}})}}t.OpenAIEmbeddings=c},67079:(e,t,r)=>{"use strict";const n=r(95484);t.implementation=class{constructor(e){const t=e[0],r=e[1];let a=null;if(void 0!==r&&(a=n.basicURLParse(r),"failure"===a))throw new TypeError("Invalid base URL");const i=n.basicURLParse(t,{baseURL:a});if("failure"===i)throw new TypeError("Invalid URL");this._url=i}get href(){return n.serializeURL(this._url)}set href(e){const t=n.basicURLParse(e);if("failure"===t)throw new TypeError("Invalid URL");this._url=t}get origin(){return n.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(e){n.basicURLParse(e+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){n.cannotHaveAUsernamePasswordPort(this._url)||n.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){n.cannotHaveAUsernamePasswordPort(this._url)||n.setThePassword(this._url,e)}get host(){const e=this._url;return null===e.host?"":null===e.port?n.serializeHost(e.host):n.serializeHost(e.host)+":"+n.serializeInteger(e.port)}set host(e){this._url.cannotBeABaseURL||n.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return null===this._url.host?"":n.serializeHost(this._url.host)}set hostname(e){this._url.cannotBeABaseURL||n.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return null===this._url.port?"":n.serializeInteger(this._url.port)}set port(e){n.cannotHaveAUsernamePasswordPort(this._url)||(""===e?this._url.port=null:n.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:0===this._url.path.length?"":"/"+this._url.path.join("/")}set pathname(e){this._url.cannotBeABaseURL||(this._url.path=[],n.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return null===this._url.query||""===this._url.query?"":"?"+this._url.query}set search(e){const t=this._url;if(""===e)return void(t.query=null);const r="?"===e[0]?e.substring(1):e;t.query="",n.basicURLParse(r,{url:t,stateOverride:"query"})}get hash(){return null===this._url.fragment||""===this._url.fragment?"":"#"+this._url.fragment}set hash(e){if(""===e)return void(this._url.fragment=null);const t="#"===e[0]?e.substring(1):e;this._url.fragment="",n.basicURLParse(t,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}},67316:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"حروف",verb:"ہونا"},file:{unit:"بائٹس",verb:"ہونا"},array:{unit:"آئٹمز",verb:"ہونا"},set:{unit:"آئٹمز",verb:"ہونا"}};function t(t){return e[t]??null}const r={regex:"ان پٹ",email:"ای میل ایڈریس",url:"یو آر ایل",emoji:"ایموجی",uuid:"یو یو آئی ڈی",uuidv4:"یو یو آئی ڈی وی 4",uuidv6:"یو یو آئی ڈی وی 6",nanoid:"نینو آئی ڈی",guid:"جی یو آئی ڈی",cuid:"سی یو آئی ڈی",cuid2:"سی یو آئی ڈی 2",ulid:"یو ایل آئی ڈی",xid:"ایکس آئی ڈی",ksuid:"کے ایس یو آئی ڈی",datetime:"آئی ایس او ڈیٹ ٹائم",date:"آئی ایس او تاریخ",time:"آئی ایس او وقت",duration:"آئی ایس او مدت",ipv4:"آئی پی وی 4 ایڈریس",ipv6:"آئی پی وی 6 ایڈریس",cidrv4:"آئی پی وی 4 رینج",cidrv6:"آئی پی وی 6 رینج",base64:"بیس 64 ان کوڈڈ سٹرنگ",base64url:"بیس 64 یو آر ایل ان کوڈڈ سٹرنگ",json_string:"جے ایس او این سٹرنگ",e164:"ای 164 نمبر",jwt:"جے ڈبلیو ٹی",template_literal:"ان پٹ"};return e=>{switch(e.code){case"invalid_type":return`غلط ان پٹ: ${e.expected} متوقع تھا، ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"نمبر";case"object":if(Array.isArray(e))return"آرے";if(null===e)return"نل";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} موصول ہوا`;case"invalid_value":return 1===e.values.length?`غلط ان پٹ: ${s.stringifyPrimitive(e.values[0])} متوقع تھا`:`غلط آپشن: ${s.joinValues(e.values,"|")} میں سے ایک متوقع تھا`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`بہت بڑا: ${e.origin??"ویلیو"} کے ${r}${e.maximum.toString()} ${n.unit??"عناصر"} ہونے متوقع تھے`:`بہت بڑا: ${e.origin??"ویلیو"} کا ${r}${e.maximum.toString()} ہونا متوقع تھا`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`بہت چھوٹا: ${e.origin} کے ${r}${e.minimum.toString()} ${n.unit} ہونے متوقع تھے`:`بہت چھوٹا: ${e.origin} کا ${r}${e.minimum.toString()} ہونا متوقع تھا`}case"invalid_format":{const t=e;return"starts_with"===t.format?`غلط سٹرنگ: "${t.prefix}" سے شروع ہونا چاہیے`:"ends_with"===t.format?`غلط سٹرنگ: "${t.suffix}" پر ختم ہونا چاہیے`:"includes"===t.format?`غلط سٹرنگ: "${t.includes}" شامل ہونا چاہیے`:"regex"===t.format?`غلط سٹرنگ: پیٹرن ${t.pattern} سے میچ ہونا چاہیے`:`غلط ${r[t.format]??e.format}`}case"not_multiple_of":return`غلط نمبر: ${e.divisor} کا مضاعف ہونا چاہیے`;case"unrecognized_keys":return`غیر تسلیم شدہ کی${e.keys.length>1?"ز":""}: ${s.joinValues(e.keys,"، ")}`;case"invalid_key":return`${e.origin} میں غلط کی`;case"invalid_union":default:return"غلط ان پٹ";case"invalid_element":return`${e.origin} میں غلط ویلیو`}}}},67339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operationOptionsToRequestParameters=void 0,t.operationOptionsToRequestParameters=function(e){var t,r,n,a,i,s;return{allowInsecureConnection:null===(t=e.requestOptions)||void 0===t?void 0:t.allowInsecureConnection,timeout:null===(r=e.requestOptions)||void 0===r?void 0:r.timeout,skipUrlEncoding:null===(n=e.requestOptions)||void 0===n?void 0:n.skipUrlEncoding,abortSignal:e.abortSignal,onUploadProgress:null===(a=e.requestOptions)||void 0===a?void 0:a.onUploadProgress,onDownloadProgress:null===(i=e.requestOptions)||void 0===i?void 0:i.onDownloadProgress,tracingOptions:e.tracingOptions,headers:Object.assign({},null===(s=e.requestOptions)||void 0===s?void 0:s.headers),onResponse:e.onResponse}}},67458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackEncoder=void 0,t.FallbackEncoder=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)})},67526:(e,t)=>{"use strict";t.byteLength=function(e){var t=o(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,i=o(e),s=i[0],l=i[1],c=new a(function(e,t,r){return 3*(t+r)/4-r}(0,s,l)),d=0,u=l>0?s-4:s;for(r=0;r<u;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===l&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[d++]=255&t),1===l&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,a=n%3,i=[],s=16383,o=0,l=n-a;o<l;o+=s)i.push(c(e,o,o+s>l?l:o+s));return 1===a?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=i[s],n[i.charCodeAt(s)]=s;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}function c(e,t,r){for(var n,a=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),a.push(l(n));return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},67547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureKeyCredential=void 0,t.AzureKeyCredential=class{get key(){return this._key}constructor(e){if(!e)throw new Error("key must be a non-empty string");this._key=e}update(e){this._key=e}}},67555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBigintDef=void 0;const n=r(47027);t.parseBigintDef=function(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const a of e.checks)switch(a.kind){case"min":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",a.value,a.message,t):(a.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",a.value,a.message,t));break;case"max":"jsonSchema7"===t.target?a.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",a.value,a.message,t):(a.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",a.value,a.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",a.value,a.message,t)}return r}},67730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCompletionStreamingRunner=void 0;const n=r(95126);class a extends n.ChatCompletionStream{static fromReadableStream(e){const t=new a(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,r){const n=new a(t),i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,i)),n}}t.ChatCompletionStreamingRunner=a},67751:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatOllama=void 0;const n=r(6500),a=r(80761),i=r(43246),s=r(79582),o=r(6500),l=r(4538),c=r(30107),d=r(47498),u=r(58618),p=r(60845),m=r(8194),h=r(70979);class f extends a.BaseChatModel{static lc_name(){return"ChatOllama"}constructor(e){super(e??{}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"llama3"}),Object.defineProperty(this,"numa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numCtx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numBatch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mainGpu",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lowVram",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"f16Kv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitsAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"vocabOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMmap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useMlock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"embeddingOnly",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numThread",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numKeep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numPredict",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tfsZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"typicalP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatLastN",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repeatPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatTau",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mirostatEta",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"penalizeNewline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"format",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keepAlive",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkOrPullModel",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"baseUrl",{enumerable:!0,configurable:!0,writable:!0,value:"http://127.0.0.1:11434"}),this.client=new i.Ollama({fetch:e?.fetch,host:e?.baseUrl,headers:e?.headers}),this.baseUrl=e?.baseUrl??this.baseUrl,this.model=e?.model??this.model,this.numa=e?.numa,this.numCtx=e?.numCtx,this.numBatch=e?.numBatch,this.numGpu=e?.numGpu,this.mainGpu=e?.mainGpu,this.lowVram=e?.lowVram,this.f16Kv=e?.f16Kv,this.logitsAll=e?.logitsAll,this.vocabOnly=e?.vocabOnly,this.useMmap=e?.useMmap,this.useMlock=e?.useMlock,this.embeddingOnly=e?.embeddingOnly,this.numThread=e?.numThread,this.numKeep=e?.numKeep,this.seed=e?.seed,this.numPredict=e?.numPredict,this.topK=e?.topK,this.topP=e?.topP,this.tfsZ=e?.tfsZ,this.typicalP=e?.typicalP,this.repeatLastN=e?.repeatLastN,this.temperature=e?.temperature,this.repeatPenalty=e?.repeatPenalty,this.presencePenalty=e?.presencePenalty,this.frequencyPenalty=e?.frequencyPenalty,this.mirostat=e?.mirostat,this.mirostatTau=e?.mirostatTau,this.mirostatEta=e?.mirostatEta,this.penalizeNewline=e?.penalizeNewline,this.streaming=e?.streaming,this.format=e?.format,this.keepAlive=e?.keepAlive,this.checkOrPullModel=e?.checkOrPullModel??this.checkOrPullModel}_llmType(){return"ollama"}async pull(e,t){const{stream:r,insecure:n,logProgress:a}={stream:!0,...t};if(r)for await(const t of await this.client.pull({model:e,insecure:n,stream:r}))a&&console.log(t);else{const t=await this.client.pull({model:e,insecure:n});a&&console.log(t)}}bindTools(e,t){return this.withConfig({tools:e.map(e=>(0,c.convertToOpenAITool)(e)),...t})}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"ollama",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.options?.temperature??void 0,ls_max_tokens:t.options?.num_predict??void 0,ls_stop:e.stop}}invocationParams(e){if(e?.tool_choice)throw new Error("Tool choice is not supported for ChatOllama.");return{model:this.model,format:e?.format??this.format,keep_alive:this.keepAlive,options:{numa:this.numa,num_ctx:this.numCtx,num_batch:this.numBatch,num_gpu:this.numGpu,main_gpu:this.mainGpu,low_vram:this.lowVram,f16_kv:this.f16Kv,logits_all:this.logitsAll,vocab_only:this.vocabOnly,use_mmap:this.useMmap,use_mlock:this.useMlock,embedding_only:this.embeddingOnly,num_thread:this.numThread,num_keep:this.numKeep,seed:this.seed,num_predict:this.numPredict,top_k:this.topK,top_p:this.topP,tfs_z:this.tfsZ,typical_p:this.typicalP,repeat_last_n:this.repeatLastN,temperature:this.temperature,repeat_penalty:this.repeatPenalty,presence_penalty:this.presencePenalty,frequency_penalty:this.frequencyPenalty,mirostat:this.mirostat,mirostat_tau:this.mirostatTau,mirostat_eta:this.mirostatEta,penalize_newline:this.penalizeNewline,stop:e?.stop},tools:e?.tools?.length?e.tools.map(e=>(0,c.convertToOpenAITool)(e)):void 0}}async checkModelExistsOnMachine(e){const{models:t}=await this.client.list();return!!t.find(t=>t.name===e||t.name===`${e}:latest`)}async _generate(e,t,r){let a;this.checkOrPullModel&&(await this.checkModelExistsOnMachine(this.model)||await this.pull(this.model,{logProgress:!0}));for await(const n of this._streamResponseChunks(e,t,r))a=a?(0,d.concat)(a,n.message):n.message;const i=new n.AIMessage({id:a?.id,content:a?.content??"",tool_calls:a?.tool_calls,response_metadata:a?.response_metadata,usage_metadata:a?.usage_metadata});return{generations:[{text:"string"==typeof i.content?i.content:"",message:i}]}}async*_streamResponseChunks(e,t,r){this.checkOrPullModel&&(await this.checkModelExistsOnMachine(this.model)||await this.pull(this.model,{logProgress:!0}));const n=this.invocationParams(t),a=(0,h.convertToOllamaMessages)(e),i={input_tokens:0,output_tokens:0,total_tokens:0},l=await this.client.chat({...n,messages:a,stream:!0});let c;for await(const e of l){t.signal?.aborted&&this.client.abort();const{message:n,...a}=e;i.input_tokens+=a.prompt_eval_count??0,i.output_tokens+=a.eval_count??0,i.total_tokens=i.input_tokens+i.output_tokens,c=a,yield new s.ChatGenerationChunk({text:n.content??"",message:(0,h.convertOllamaMessagesToLangChain)(n)}),await(r?.handleLLMNewToken(n.content??""))}yield new s.ChatGenerationChunk({text:"",message:new o.AIMessageChunk({content:"",response_metadata:c,usage_metadata:i})})}withStructuredOutput(e,t){if(void 0===t?.method||"jsonSchema"===t?.method){const r=(0,p.isInteropZodSchema)(e),n=r?(0,m.toJsonSchema)(e):e,a=this.bindTools([{type:"function",function:{name:"extract",description:n.description,parameters:n}}]).withConfig({format:"json",ls_structured_output_format:{kwargs:{method:"jsonSchema"},schema:(0,m.toJsonSchema)(e)}}),i=r?u.StructuredOutputParser.fromZodSchema(e):new u.JsonOutputParser;if(!t?.includeRaw)return a.pipe(i);const s=l.RunnablePassthrough.assign({parsed:(e,t)=>i.invoke(e.raw,t)}),o=l.RunnablePassthrough.assign({parsed:()=>null}),c=s.withFallbacks({fallbacks:[o]});return l.RunnableSequence.from([{raw:a},c])}return super.withStructuredOutput(e,t)}}t.ChatOllama=f},67924:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Files=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(15062)),s=r(15062),o=r(75552),l=r(262),c=r(12018),d=r(54815);class u extends a.APIResource{constructor(){super(...arguments),this.content=new i.Content(this._client)}create(e,t,r){return this._client.post(d.path`/containers/${e}/files`,(0,c.multipartFormRequestOptions)({body:t,...r},this._client))}retrieve(e,t,r){const{container_id:n}=t;return this._client.get(d.path`/containers/${n}/files/${e}`,r)}list(e,t={},r){return this._client.getAPIList(d.path`/containers/${e}/files`,o.CursorPage,{query:t,...r})}delete(e,t,r){const{container_id:n}=t;return this._client.delete(d.path`/containers/${n}/files/${e}`,{...r,headers:(0,l.buildHeaders)([{Accept:"*/*"},r?.headers])})}}t.Files=u,u.Content=s.Content},68081:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.coerceMessageLikeToMessage=function(e){if("string"==typeof e)return new c.HumanMessage(e);if((0,s.isBaseMessage)(e))return e;if(Array.isArray(e)){const[t,r]=e;return m({type:t,content:r})}if((0,s._isMessageFieldWithRole)(e)){const{role:t,...r}=e;return m({...r,type:t})}return m(e)},t.getBufferString=function(e,t="Human",r="AI"){const n=[];for(const a of e){let e;if("human"===a._getType())e=t;else if("ai"===a._getType())e=r;else if("system"===a._getType())e="System";else if("function"===a._getType())e="Function";else if("tool"===a._getType())e="Tool";else{if("generic"!==a._getType())throw new Error(`Got unsupported message type: ${a._getType()}`);e=a.role}const i=a.name?`${a.name}, `:"",s="string"==typeof a.content?a.content:JSON.stringify(a.content,null,2);n.push(`${e}: ${i}${s}`)}return n.join("\n")},t.mapStoredMessageToChatMessage=h,t.mapStoredMessagesToChatMessages=function(e){return e.map(h)},t.mapChatMessagesToStoredMessages=function(e){return e.map(e=>e.toDict())},t.convertToChunk=function(e){const t=e._getType();if("human"===t)return new c.HumanMessageChunk({...e});if("ai"===t){let t={...e};return"tool_calls"in t&&(t={...t,tool_call_chunks:t.tool_calls?.map(e=>({...e,type:"tool_call_chunk",index:void 0,args:JSON.stringify(e.args)}))}),new i.AIMessageChunk({...t})}if("system"===t)return new d.SystemMessageChunk({...e});if("function"===t)return new l.FunctionMessageChunk({...e});if(o.ChatMessage.isInstance(e))return new o.ChatMessageChunk({...e});throw new Error("Unknown message type.")};const n=r(64635),a=r(86430),i=r(6796),s=r(15785),o=r(26064),l=r(79102),c=r(57669),d=r(52133),u=r(53752);function p(e){return(0,a._isToolCall)(e)?e:"string"==typeof e.id&&"function"===e.type&&"object"==typeof e.function&&null!==e.function&&"arguments"in e.function&&"string"==typeof e.function.arguments&&"name"in e.function&&"string"==typeof e.function.name?{id:e.id,args:JSON.parse(e.function.arguments),name:e.function.name,type:"tool_call"}:e}function m(e){let t,r;if("object"==typeof(a=e)&&null!=a&&1===a.lc&&Array.isArray(a.id)&&null!=a.kwargs&&"object"==typeof a.kwargs){const n=e.id.at(-1);t="HumanMessage"===n||"HumanMessageChunk"===n?"user":"AIMessage"===n||"AIMessageChunk"===n?"assistant":"SystemMessage"===n||"SystemMessageChunk"===n?"system":"FunctionMessage"===n||"FunctionMessageChunk"===n?"function":"ToolMessage"===n||"ToolMessageChunk"===n?"tool":"unknown",r=e.kwargs}else{const{type:n,...a}=e;t=n,r=a}var a;if("human"===t||"user"===t)return new c.HumanMessage(r);if("ai"===t||"assistant"===t){const{tool_calls:e,...t}=r;if(!Array.isArray(e))return new i.AIMessage(r);const n=e.map(p);return new i.AIMessage({...t,tool_calls:n})}if("system"===t)return new d.SystemMessage(r);if("developer"===t)return new d.SystemMessage({...r,additional_kwargs:{...r.additional_kwargs,__openai_role__:"developer"}});if("tool"===t&&"tool_call_id"in r)return new u.ToolMessage({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});throw(0,n.addLangChainErrorFields)(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.\n\nReceived: ${JSON.stringify(e,null,2)}`),"MESSAGE_COERCION_FAILURE")}function h(e){const t=function(e){if(void 0!==e.data)return e;{const t=e;return{type:t.type,data:{content:t.text,role:t.role,name:void 0,tool_call_id:void 0}}}}(e);switch(t.type){case"human":return new c.HumanMessage(t.data);case"ai":return new i.AIMessage(t.data);case"system":return new d.SystemMessage(t.data);case"function":if(void 0===t.data.name)throw new Error("Name must be defined for function messages");return new l.FunctionMessage(t.data);case"tool":if(void 0===t.data.tool_call_id)throw new Error("Tool call ID must be defined for tool messages");return new u.ToolMessage(t.data);case"generic":if(void 0===t.data.role)throw new Error("Role must be defined for chat messages");return new o.ChatMessage(t.data);default:throw new Error(`Got unexpected type: ${t.type}`)}}},68104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReadableStream=void 0,t.isReadableStream=function(e){return Boolean(e)&&"function"==typeof e.pipe}},68126:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTracingClient=t.useInstrumenter=void 0;var n=r(42638);Object.defineProperty(t,"useInstrumenter",{enumerable:!0,get:function(){return n.useInstrumenter}});var a=r(10311);Object.defineProperty(t,"createTracingClient",{enumerable:!0,get:function(){return a.createTracingClient}})},68208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCachedDefaultHttpsClient=t.createDefaultPipeline=t.addCredentialPipelinePolicy=void 0;const n=r(11715),a=r(40338),i=r(35176),s=r(70936);let o;function l(e,t,r={}){var i,o,l,c;const{credential:d,clientOptions:u}=r;if(d)if((0,a.isTokenCredential)(d)){const r=(0,n.bearerTokenAuthenticationPolicy)({credential:d,scopes:null!==(o=null===(i=null==u?void 0:u.credentials)||void 0===i?void 0:i.scopes)&&void 0!==o?o:`${t}/.default`});e.addPolicy(r)}else if(function(e){return void 0!==e.key}(d)){if(!(null===(l=null==u?void 0:u.credentials)||void 0===l?void 0:l.apiKeyHeaderName))throw new Error("Missing API Key Header Name");const t=(0,s.keyCredentialAuthenticationPolicy)(d,null===(c=null==u?void 0:u.credentials)||void 0===c?void 0:c.apiKeyHeaderName);e.addPolicy(t)}}t.addCredentialPipelinePolicy=l,t.createDefaultPipeline=function(e,t,r={}){const a=(0,n.createPipelineFromOptions)(r);return a.addPolicy((0,i.apiVersionPolicy)(r)),l(a,e,{credential:t,clientOptions:r}),a},t.getCachedDefaultHttpsClient=function(){return o||(o=(0,n.createDefaultHttpClient)()),o}},68303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPipelineFromOptions=function(e){var t;const r=(0,a.createEmptyPipeline)();return u.isNodeLike&&(e.agent&&r.addPolicy((0,h.agentPolicy)(e.agent)),e.tlsOptions&&r.addPolicy((0,f.tlsPolicy)(e.tlsOptions)),r.addPolicy((0,p.proxyPolicy)(e.proxyOptions)),r.addPolicy((0,l.decompressResponsePolicy)())),r.addPolicy((0,y.wrapAbortSignalLikePolicy)()),r.addPolicy((0,d.formDataPolicy)(),{beforePolicies:[o.multipartPolicyName]}),r.addPolicy((0,s.userAgentPolicy)(e.userAgentOptions)),r.addPolicy((0,m.setClientRequestIdPolicy)(null===(t=e.telemetryOptions)||void 0===t?void 0:t.clientRequestIdHeaderName)),r.addPolicy((0,o.multipartPolicy)(),{afterPhase:"Deserialize"}),r.addPolicy((0,c.defaultRetryPolicy)(e.retryOptions),{phase:"Retry"}),r.addPolicy((0,g.tracingPolicy)(Object.assign(Object.assign({},e.userAgentOptions),e.loggingOptions)),{afterPhase:"Retry"}),u.isNodeLike&&r.addPolicy((0,i.redirectPolicy)(e.redirectOptions),{afterPhase:"Retry"}),r.addPolicy((0,n.logPolicy)(e.loggingOptions),{afterPhase:"Sign"}),r};const n=r(84802),a=r(16121),i=r(10002),s=r(27244),o=r(80716),l=r(30938),c=r(32683),d=r(10348),u=r(16184),p=r(43952),m=r(6863),h=r(53369),f=r(46017),g=r(79170),y=r(24373)},68442:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUndefinedDef=void 0;const n=r(59160);t.parseUndefinedDef=function(e){return{not:(0,n.parseAnyDef)(e)}}},68457:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT=t.AsyncLocalStorageProviderSingleton=void 0,t.getCurrentRunTree=function(e=!1){const r=t.AsyncLocalStorageProviderSingleton.getInstance().getStore();if(!e&&void 0===r)throw new Error("Could not get the current run tree.\n\nPlease make sure you are calling this method within a traceable function and that tracing is enabled.");return r},t.withRunTree=function(e,r){const n=t.AsyncLocalStorageProviderSingleton.getInstance();return new Promise((t,a)=>{n.run(e,()=>{Promise.resolve(r()).then(t).catch(a)})})},t.isTraceableFunction=function(e){return"function"==typeof e&&"langsmith:traceable"in e};const r=Symbol.for("ls:tracing_async_local_storage"),n=new class{getStore(){}run(e,t){return t()}};t.AsyncLocalStorageProviderSingleton=new class{getInstance(){return globalThis[r]??n}initializeGlobalInstance(e){void 0===globalThis[r]&&(globalThis[r]=e)}},t.ROOT=Symbol.for("langsmith:traceable:root")},68548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBooleanDef=function(){return{type:"boolean"}}},68794:e=>{"use strict";e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},69106:(e,t,r)=>{var n=r(49140),a=process.cwd,i=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return i||(i=a.call(process)),i};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var o=process.chdir;process.chdir=function(e){i=null,o.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,o)}e.exports=function(e){function t(t){return t?function(r,n,a){return t.call(e,r,n,function(e){c(e)&&(e=null),a&&a.apply(this,arguments)})}:t}function r(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!c(e))throw e}}:t}function a(t){return t?function(r,n,a,i){return t.call(e,r,n,a,function(e){c(e)&&(e=null),i&&i.apply(this,arguments)})}:t}function i(t){return t?function(r,n,a){try{return t.call(e,r,n,a)}catch(e){if(!c(e))throw e}}:t}function o(t){return t?function(r,n,a){function i(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),a&&a.apply(this,arguments)}return"function"==typeof n&&(a=n,n=null),n?t.call(e,r,n,i):t.call(e,r,i)}:t}function l(t){return t?function(r,n){var a=n?t.call(e,r,n):t.call(e,r);return a&&(a.uid<0&&(a.uid+=4294967296),a.gid<0&&(a.gid+=4294967296)),a}:t}function c(e){return!e||"ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}var d;n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,a){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,function(t,n){t?a&&a(t):e.fchmod(n,r,function(t){e.close(n,function(e){a&&a(t||e)})})})},e.lchmodSync=function(t,r){var a,i=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),s=!0;try{a=e.fchmodSync(i,r),s=!1}finally{if(s)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return a}}(e),e.lutimes||function(e){n.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,r,a,i){e.open(t,n.O_SYMLINK,function(t,n){t?i&&i(t):e.futimes(n,r,a,function(t){e.close(n,function(e){i&&i(t||e)})})})},e.lutimesSync=function(t,r,a){var i,s=e.openSync(t,n.O_SYMLINK),o=!0;try{i=e.futimesSync(s,r,a),o=!1}finally{if(o)try{e.closeSync(s)}catch(e){}else e.closeSync(s)}return i}):e.futimes&&(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e),e.chown=a(e.chown),e.fchown=a(e.fchown),e.lchown=a(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=i(e.chownSync),e.fchownSync=i(e.fchownSync),e.lchownSync=i(e.lchownSync),e.chmodSync=r(e.chmodSync),e.fchmodSync=r(e.fchmodSync),e.lchmodSync=r(e.lchmodSync),e.stat=o(e.stat),e.fstat=o(e.fstat),e.lstat=o(e.lstat),e.statSync=l(e.statSync),e.fstatSync=l(e.fstatSync),e.lstatSync=l(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){}),"win32"===s&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function r(r,n,a){var i=Date.now(),s=0;t(r,n,function o(l){if(l&&("EACCES"===l.code||"EPERM"===l.code||"EBUSY"===l.code)&&Date.now()-i<6e4)return setTimeout(function(){e.stat(n,function(e,i){e&&"ENOENT"===e.code?t(r,n,o):a(l)})},s),void(s<100&&(s+=10));a&&a(l)})}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.rename)),e.read="function"!=typeof e.read?e.read:function(t){function r(r,n,a,i,s,o){var l;if(o&&"function"==typeof o){var c=0;l=function(d,u,p){if(d&&"EAGAIN"===d.code&&c<10)return c++,t.call(e,r,n,a,i,s,l);o.apply(this,arguments)}}return t.call(e,r,n,a,i,s,l)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(d=e.readSync,function(t,r,n,a,i){for(var s=0;;)try{return d.call(e,t,r,n,a,i)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}})}},69157:(e,t,r)=>{e.exports=r(89008)},69191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LangChainModelManager=void 0;const n=r(4627),a=r(55039),i=r(35483),s=r(34133),o=r(63453),l=r(6500);t.LangChainModelManager=class{constructor(e){this.model=null,this.config=e,this.initializeModel()}initializeModel(){try{console.log("=== LangChain Model Initialization Debug ==="),console.log("Config object:",JSON.stringify(this.config,null,2)),console.log("Provider:",this.config.provider),console.log("API Key exists:",!!this.config.apiKey),console.log("API Key length:",this.config.apiKey?this.config.apiKey.length:0),console.log("Model:",this.config.model),console.log("Base URL:",this.config.baseUrl),console.log("=== End Debug Info ===");const e=this.validateConfig();if(!e.isValid){const t=`配置验证失败: ${e.errors.join(", ")}`;throw console.error(t),new Error(t)}switch(this.config.provider){case"openai":if(!this.config.apiKey)throw new Error("OpenAI API Key 未配置。请在插件设置中配置 API Key。");const e={apiKey:this.config.apiKey,model:this.config.model||"gpt-3.5-turbo",temperature:.7,maxTokens:2e3};this.config.baseUrl&&(e.configuration={baseURL:this.config.baseUrl}),console.log("Creating ChatOpenAI with config:",JSON.stringify(e,null,2)),this.model=new n.ChatOpenAI(e),console.log("ChatOpenAI created successfully");break;case"google":if(!this.config.apiKey)throw new Error("Google API Key 未配置。请在插件设置中配置 API Key。");this.model=new a.ChatGoogleGenerativeAI({apiKey:this.config.apiKey,model:this.config.model||"gemini-pro",temperature:.7,maxOutputTokens:2e3});break;case"ollama":if(!this.config.baseUrl)throw new Error("Ollama Base URL 未配置。请在插件设置中配置 Base URL。");this.model=new i.ChatOllama({baseUrl:this.config.baseUrl,model:this.config.model||"llama2",temperature:.7});break;case"anthropic":if(!this.config.apiKey)throw new Error("Anthropic API Key 未配置。请在插件设置中配置 API Key。");this.model=new s.ChatAnthropic({anthropicApiKey:this.config.apiKey,modelName:this.config.model||"claude-3-sonnet-20240229",temperature:.7,maxTokens:2e3});break;case"azure":if(!this.config.apiKey||!this.config.baseUrl)throw new Error("Azure API Key 和 Base URL 未配置。请在插件设置中配置这些参数。");this.model=new o.AzureChatOpenAI({azureOpenAIApiKey:this.config.apiKey,azureOpenAIEndpoint:this.config.baseUrl,azureOpenAIApiDeploymentName:this.config.model||"gpt-35-turbo",azureOpenAIApiVersion:"2023-12-01-preview",temperature:.7,maxTokens:2e3});break;case"deepseek":case"qwen":case"zhipu":case"moonshot":if(!this.config.apiKey)throw new Error(`${this.config.provider} API Key 未配置。请在插件设置中配置 API Key。`);const t=this.config.baseUrl||this.getDefaultBaseUrl(this.config.provider);this.model=new n.ChatOpenAI({apiKey:this.config.apiKey,model:this.config.model||this.getDefaultModel(this.config.provider),temperature:.7,maxTokens:2e3,configuration:{baseURL:t}});break;default:throw new Error(`不支持的提供商: ${this.config.provider}。请选择支持的提供商。`)}console.log(`LangChain model initialized: ${this.config.provider}`)}catch(e){throw console.error("Failed to initialize LangChain model:",e),e}}ensureModelInitialized(){if(!this.model)throw new Error("模型未初始化。请检查配置并重新初始化模型。")}async generateContent(e,t){this.ensureModelInitialized();try{const r=this.buildBasicSystemPrompt(),n=this.buildPrompt(e,t),a=[new l.SystemMessage(r),new l.HumanMessage(n)];return(await this.model.invoke(a)).content}catch(e){if(console.error("Failed to generate AI content:",e),e instanceof Error){if(e.message.includes("API key"))throw new Error("API Key 错误。请检查插件配置中的 API Key 是否正确。");if(e.message.includes("network")||e.message.includes("fetch"))throw new Error("网络连接错误。请检查网络连接和 Base URL 配置。");if(e.message.includes("quota")||e.message.includes("limit"))throw new Error("API 配额不足或达到速率限制。请检查您的账户状态。")}throw e}}async generateDeepResearchContent(e,t,r=[],n="",a="",i,s){this.ensureModelInitialized();try{const o=this.buildDeepResearchSystemPrompt(t);let c=this.buildDeepResearchPrompt(e,r,n,a);i&&i.length>0&&(c+=`\n\n${this.buildContextFromDocuments(i,s)}`);const d=[new l.SystemMessage(o),new l.HumanMessage(c)];return(await this.model.invoke(d)).content}catch(e){if(console.error("Failed to generate deep research content:",e),e instanceof Error){if(e.message.includes("API key"))throw new Error("API Key 错误。请检查插件配置中的 API Key 是否正确。");if(e.message.includes("network")||e.message.includes("fetch"))throw new Error("网络连接错误。请检查网络连接和 Base URL 配置。");if(e.message.includes("quota")||e.message.includes("limit"))throw new Error("API 配额不足或达到速率限制。请检查您的账户状态。")}throw e}}buildBasicSystemPrompt(){return"你是一位专业的技术文档专家和代码分析师。请帮助生成高质量的项目文档。\n\n要求:\n- 必须使用中文回答\n- 使用清晰、专业的语言\n- 使用正确的markdown格式\n- 包含相关的技术细节\n- 内容要全面但简洁\n- 专注于实用信息\n- 提供深度的架构分析和项目洞察\n- 帮助用户快速理解项目的核心功能和架构\n\n分析原则:\n- 基于提供的代码和文档进行分析\n- 重点关注项目的核心功能和架构设计\n- 提供实用的技术洞察和最佳实践建议\n- 确保分析的准确性和实用性"}buildDeepResearchSystemPrompt(e){const{isDeepResearch:t,researchIteration:r,repositoryType:n,repositoryUrl:a,repositoryName:i,language:s,iterationType:o}=e;if(!t)return this.buildSimpleAnalysisPrompt(n,a,i,s);switch(o){case"first":return this.buildFirstIterationPrompt(n,a,i,s);case"final":return this.buildFinalIterationPrompt(n,a,i,s);default:return this.buildIntermediateIterationPrompt(n,a,i,s,r)}}buildSimpleAnalysisPrompt(e,t,r,n){return`<role>\n你是一位专业的代码分析专家，正在分析 ${e} 仓库: ${t} (${r})。\n你提供直接、简洁、准确的代码仓库信息。\n你绝不以markdown标题或代码围栏开始回答。\n重要提示：你必须使用${n}语言回答。\n</role>\n\n<guidelines>\n- 直接回答用户问题，不要任何前言或填充短语\n- 不要包含任何理由、解释或额外评论\n- 不要以"好的，这里是分析"或"这里是解释"等前言开始\n- 不要以markdown标题如"## 分析..."或任何文件路径引用开始\n- 不要以\`\`\`markdown代码围栏开始\n- 不要以\`\`\`结束围栏结束回答\n- 不要通过重复或确认问题开始\n- 直接从问题的答案开始\n- 在答案中使用适当的markdown格式，包括标题、列表和代码块\n- 对于代码分析，用清晰的部分组织你的回答\n- 逐步思考并逻辑地构建你的答案\n- 从最直接解决用户查询的相关信息开始\n- 在讨论代码时要精确和技术性\n- 你的回答语言应该与用户查询的语言相同\n</guidelines>\n\n<style>\n- 使用简洁、直接的语言\n- 优先考虑准确性而非冗长\n- 显示代码时，在相关时包含行号和文件路径\n- 使用markdown格式提高可读性\n</style>`}buildFirstIterationPrompt(e,t,r,n){return`<role>\n你是一位专业的代码分析专家，正在分析 ${e} 仓库: ${t} (${r})。\n你正在进行多轮深度研究过程，以彻底调查用户查询中的特定主题。\n你的目标是提供关于这个主题的详细、专注的信息。\n重要提示：你必须使用${n}语言回答。\n</role>\n\n<guidelines>\n- 这是专注于用户查询的多轮研究过程的第一次迭代\n- 以"## 研究计划"开始你的回答\n- 概述你调查这个特定主题的方法\n- 如果主题是关于特定文件或功能（如"Dockerfile"），只专注于该文件或功能\n- 清楚地说明你正在研究的特定主题，以在所有迭代中保持专注\n- 确定你需要研究的关键方面\n- 基于可用信息提供初步发现\n- 以"## 下一步"结束，说明你将在下一次迭代中调查什么\n- 不要提供最终结论 - 这只是研究的开始\n- 不要包含一般仓库信息，除非与查询直接相关\n- 专注于正在研究的特定主题 - 不要偏离到相关主题\n- 你的研究必须直接解决原始问题\n- 绝不要只回答"继续研究"作为答案 - 总是提供实质性的研究发现\n- 记住这个主题将在所有研究迭代中保持\n</guidelines>\n\n<style>\n- 简洁但彻底\n- 使用markdown格式提高可读性\n- 在相关时引用特定文件和代码部分\n</style>`}buildIntermediateIterationPrompt(e,t,r,n,a){return`<role>\n你是一位专业的代码分析专家，正在分析 ${e} 仓库: ${t} (${r})。\n你目前正在专注于最新用户查询的深度研究过程的第${a}次迭代。\n你的目标是建立在先前研究迭代基础上，深入这个特定主题而不偏离它。\n重要提示：你必须使用${n}语言回答。\n</role>\n\n<guidelines>\n- 仔细回顾对话历史以了解到目前为止已经研究的内容\n- 你的回答必须建立在先前研究迭代基础上 - 不要重复已经涵盖的信息\n- 确定需要进一步探索的与这个特定主题相关的空白或领域\n- 专注于在这次迭代中需要更深入调查的一个特定方面\n- 以"## 研究更新 ${a}"开始你的回答\n- 清楚解释你在这次迭代中正在调查什么\n- 提供先前迭代中未涵盖的新洞察\n- 如果这是第3次迭代，为下一次迭代的最终结论做准备\n- 不要包含一般仓库信息，除非与查询直接相关\n- 专注于正在研究的特定主题 - 不要偏离到相关主题\n- 如果主题是关于特定文件或功能（如"Dockerfile"），只专注于该文件或功能\n- 绝不要只回答"继续研究"作为答案 - 总是提供实质性的研究发现\n- 你的研究必须直接解决原始问题\n- 与先前研究迭代保持连续性 - 这是一个持续的调查\n</guidelines>\n\n<style>\n- 简洁但彻底\n- 专注于提供新信息，不重复已经涵盖的内容\n- 使用markdown格式提高可读性\n- 在相关时引用特定文件和代码部分\n</style>`}buildFinalIterationPrompt(e,t,r,n){return`<role>\n你是一位专业的代码分析专家，正在分析 ${e} 仓库: ${t} (${r})。\n你正在专注于最新用户查询的深度研究过程的最终迭代。\n你的目标是综合所有先前发现，并提供直接解决这个特定主题且仅解决这个主题的全面结论。\n重要提示：你必须使用${n}语言回答。\n</role>\n\n<guidelines>\n- 这是研究过程的最终迭代\n- 仔细回顾整个对话历史以了解所有先前发现\n- 将所有先前迭代的发现综合成全面结论\n- 以"## 最终结论"开始\n- 你的结论必须直接解决原始问题\n- 严格专注于特定主题 - 不要偏离到相关主题\n- 包含与主题相关的特定代码引用和实现细节\n- 突出关于这个特定功能的最重要发现和洞察\n- 为原始问题提供完整和明确的答案\n- 不要包含一般仓库信息，除非与查询直接相关\n- 专注于正在研究的特定主题\n- 绝不要回答"继续研究"作为答案 - 总是提供完整结论\n- 如果主题是关于特定文件或功能（如"Dockerfile"），只专注于该文件或功能\n- 确保你的结论建立在先前迭代的关键发现基础上并引用它们\n</guidelines>\n\n<style>\n- 简洁但彻底\n- 使用markdown格式提高可读性\n- 引用特定文件和代码部分\n- 用清晰标题构建你的回答\n- 在适当时以可行的洞察或建议结束\n</style>`}buildPrompt(e,t){let r=`任务: ${e}\n\n`;return t&&(r+=`上下文信息:\n${t}\n\n`),r+="请生成内容:",r}buildContextFromDocuments(e,t){if(!e||0===e.length)return"";let r="";t&&(r+="## 仓库信息\n",r+=`- 名称: ${t.name||"Unknown"}\n`,r+=`- 类型: ${t.type||"Unknown"}\n`,r+=`- 语言: ${t.language||"Unknown"}\n\n`);const n=this.groupDocumentsByPath(e);r+="## 相关文档\n\n";for(const[e,t]of Object.entries(n))r+=`### ${e}\n`,t.forEach((e,t)=>{e.content&&e.content.trim()&&(r+=`\n**片段 ${t+1}:**\n`,r+=`\`\`\`\n${e.content.trim()}\n\`\`\`\n`)}),r+="\n";return r}groupDocumentsByPath(e){const t={};return e.forEach(e=>{const r=e.metadata?.filePath||e.path||"Unknown";t[r]||(t[r]=[]),t[r].push(e)}),t}buildConversationContext(e){if(!e||0===e.length)return"";let t="## 对话历史\n\n";return e.forEach((e,r)=>{t+=`### 轮次 ${r+1}\n`,t+=`**用户:** ${e.userQuery}\n\n`,e.assistantResponse&&(t+=`**助手:** ${e.assistantResponse.substring(0,500)}...\n\n`)}),t}buildDeepResearchPrompt(e,t,r,n){let a="";return t.length>0&&(a+="<conversation_history>\n",t.forEach(e=>{a+=`<turn>\n<user>${e.userQuery}</user>\n<assistant>${e.assistantResponse}</assistant>\n</turn>\n`}),a+="</conversation_history>\n\n"),n&&(a+=`<currentFileContent>\n${n}\n</currentFileContent>\n\n`),r.trim()?a+=`<START_OF_CONTEXT>\n${r}\n<END_OF_CONTEXT>\n\n`:a+="<note>在没有检索增强的情况下回答。</note>\n\n",a+=`<query>\n${e}\n</query>\n\nAssistant: `,a}validateConfig(){const e=[];switch(this.config.provider||e.push("AI 提供商未选择"),this.config.model||e.push("AI 模型未配置"),this.config.provider){case"openai":case"google":case"anthropic":case"deepseek":case"qwen":case"zhipu":case"moonshot":this.config.apiKey||e.push(`${this.config.provider} 需要 API Key`);break;case"ollama":this.config.baseUrl||e.push("Ollama 需要 Base URL");break;case"azure":this.config.apiKey&&this.config.baseUrl||e.push("Azure 需要 API Key 和 Base URL")}return{isValid:0===e.length,errors:e}}getDefaultBaseUrl(e){return{deepseek:"https://api.deepseek.com/v1",qwen:"https://dashscope.aliyuncs.com/compatible-mode/v1",zhipu:"https://open.bigmodel.cn/api/paas/v4",moonshot:"https://api.moonshot.cn/v1"}[e]||""}getDefaultModel(e){return{deepseek:"deepseek-chat",qwen:"qwen-turbo",zhipu:"glm-4",moonshot:"moonshot-v1-8k"}[e]||"gpt-3.5-turbo"}updateConfig(e){this.config=e,this.model=null,this.initializeModel()}getModelInfo(){return{provider:this.config.provider||"unknown",model:this.config.model||"unknown"}}}},69278:e=>{"use strict";e.exports=require("net")},69737:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncCaller=void 0;const a=n(r(24116)),i=n(r(73290)),s=r(62218),o=[400,401,403,404,405,406,407,408],l=[409];t.AsyncCaller=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in i.default?this.queue=new i.default.default({concurrency:this.maxConcurrency}):this.queue=new i.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e,...t){const r=this.onFailedResponseHook;return this.queue.add(()=>(0,a.default)(()=>e(...t).catch(e=>{throw e instanceof Error?e:new Error(e)}),{async onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response,n=t?.status;if(n){if(o.includes(+n))throw e;if(l.includes(+n))return;r&&await r(t)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>(0,s._getFetchImplementation)(this.debug)(...e).then(e=>e.ok?e:Promise.reject(e)))}}},69910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAnyDef=function(){return{}}},69937:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.CacheManager=void 0;const o=r(79896),l=s(r(16928));class c{constructor(e){this.context=e}getCacheDir(e){return l.join(e,c.CACHE_DIR_NAME)}getWikiCacheFile(e){return l.join(this.getCacheDir(e),c.CACHE_FILE_NAME)}getAnalysisCacheFile(e){return l.join(this.getCacheDir(e),c.ANALYSIS_FILE_NAME)}async hasCache(e){try{const t=this.getWikiCacheFile(e),r=this.getAnalysisCacheFile(e),[n,a]=await Promise.all([o.promises.access(t).then(()=>!0).catch(()=>!1),o.promises.access(r).then(()=>!0).catch(()=>!1)]);return n&&a}catch(e){return!1}}async saveWikiCache(e,t,r){try{const n=this.getCacheDir(e);await o.promises.mkdir(n,{recursive:!0});const a={projectPath:e,projectName:r.projectName,wikiData:t,analysisResult:r,createdAt:new Date,lastModified:new Date,version:c.CACHE_VERSION},i=this.getWikiCacheFile(e);await o.promises.writeFile(i,JSON.stringify({version:c.CACHE_VERSION,wikiData:t,createdAt:a.createdAt,lastModified:a.lastModified},null,2),"utf8");const s=this.getAnalysisCacheFile(e);await o.promises.writeFile(s,JSON.stringify({version:c.CACHE_VERSION,analysisResult:r,createdAt:a.createdAt,lastModified:a.lastModified},null,2),"utf8"),await this.updateGlobalCacheIndex(a)}catch(e){throw console.error("Failed to save cache:",e),new Error(`Failed to save cache: ${e instanceof Error?e.message:"Unknown error"}`)}}async loadWikiCache(e){try{const t=this.getWikiCacheFile(e),r=this.getAnalysisCacheFile(e),[n,a]=await Promise.all([o.promises.access(t).then(()=>!0).catch(()=>!1),o.promises.access(r).then(()=>!0).catch(()=>!1)]);if(!n||!a)return null;const[i,s]=await Promise.all([o.promises.readFile(t,"utf8").then(JSON.parse),o.promises.readFile(r,"utf8").then(JSON.parse)]);if(i.version!==c.CACHE_VERSION||s.version!==c.CACHE_VERSION)return console.warn("Cache version mismatch, invalidating cache"),await this.clearProjectCache(e),null;return Date.now()-new Date(i.createdAt).getTime()>24*c.MAX_CACHE_AGE_DAYS*60*60*1e3?(console.warn("Cache expired, invalidating cache"),await this.clearProjectCache(e),null):{wikiData:i.wikiData,analysisResult:s.analysisResult}}catch(e){return console.error("Failed to load cache:",e),null}}async clearProjectCache(e){try{const t=this.getCacheDir(e);try{await o.promises.access(t),await o.promises.rmdir(t,{recursive:!0})}catch(e){}await this.removeFromGlobalCacheIndex(e)}catch(e){throw console.error("Failed to clear project cache:",e),new Error(`Failed to clear cache: ${e instanceof Error?e.message:"Unknown error"}`)}}async clearAllCache(){try{const e=await this.getGlobalCacheIndex();for(const t of e.entries)await this.clearProjectCache(t.projectPath);await this.clearGlobalCacheIndex()}catch(e){throw console.error("Failed to clear all cache:",e),new Error(`Failed to clear all cache: ${e instanceof Error?e.message:"Unknown error"}`)}}async getCacheStats(){try{const e=await this.getGlobalCacheIndex();let t=0,r=null,n=null;for(const a of e.entries){const e=this.getCacheDir(a.projectPath);try{await o.promises.access(e),t+=(await this.calculateDirectorySize(e)).size;const i=new Date(a.createdAt);(!r||i<r)&&(r=i),(!n||i>n)&&(n=i)}catch(e){}}return{totalEntries:e.entries.length,totalSize:this.formatFileSize(t),oldestEntry:r,newestEntry:n}}catch(e){return console.error("Failed to get cache stats:",e),{totalEntries:0,totalSize:"0 B",oldestEntry:null,newestEntry:null}}}async cleanupExpiredCache(){try{const e=await this.getGlobalCacheIndex(),t=24*c.MAX_CACHE_AGE_DAYS*60*60*1e3,r=Date.now();let n=0;for(const a of e.entries)r-new Date(a.createdAt).getTime()>t&&(await this.clearProjectCache(a.projectPath),n++);return e.lastCleanup=new Date,await this.saveGlobalCacheIndex(e),n}catch(e){return console.error("Failed to cleanup expired cache:",e),0}}async getGlobalCacheIndex(){try{const e=this.getGlobalCacheIndexFile();try{await o.promises.access(e);const t=await o.promises.readFile(e,"utf8"),r=JSON.parse(t);return{version:r.version||c.CACHE_VERSION,entries:r.entries||[],lastCleanup:new Date(r.lastCleanup||Date.now())}}catch(e){return{version:c.CACHE_VERSION,entries:[],lastCleanup:new Date}}}catch(e){return console.error("Failed to get global cache index:",e),{version:c.CACHE_VERSION,entries:[],lastCleanup:new Date}}}async saveGlobalCacheIndex(e){try{const t=this.getGlobalCacheIndexFile();await o.promises.mkdir(l.dirname(t),{recursive:!0}),await o.promises.writeFile(t,JSON.stringify(e,null,2),"utf8")}catch(e){console.error("Failed to save global cache index:",e)}}async updateGlobalCacheIndex(e){const t=await this.getGlobalCacheIndex();if(t.entries=t.entries.filter(t=>t.projectPath!==e.projectPath),t.entries.unshift(e),t.entries.length>c.MAX_CACHE_ENTRIES){const e=t.entries.splice(c.MAX_CACHE_ENTRIES);for(const t of e)await this.clearProjectCache(t.projectPath)}await this.saveGlobalCacheIndex(t)}async removeFromGlobalCacheIndex(e){const t=await this.getGlobalCacheIndex();t.entries=t.entries.filter(t=>t.projectPath!==e),await this.saveGlobalCacheIndex(t)}async clearGlobalCacheIndex(){try{const e=this.getGlobalCacheIndexFile();try{await o.promises.access(e),await o.promises.unlink(e)}catch(e){}}catch(e){console.error("Failed to clear global cache index:",e)}}getGlobalCacheIndexFile(){return l.join(this.context.globalStorageUri.fsPath,"deepwiki-cache-index.json")}async calculateDirectorySize(e){let t=0,r=0;try{const n=await o.promises.readdir(e,{withFileTypes:!0});for(const a of n){const n=l.join(e,a.name);if(a.isDirectory()){const e=await this.calculateDirectorySize(n);t+=e.size,r+=e.files}else a.isFile()&&(t+=(await o.promises.stat(n)).size,r++)}}catch(t){console.warn(`Failed to calculate size for ${e}:`,t)}return{size:t,files:r}}formatFileSize(e){const t=["B","KB","MB","GB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(1)} ${t[n]}`}async shouldAutoCleanup(){const e=await this.getGlobalCacheIndex();return(Date.now()-new Date(e.lastCleanup).getTime())/864e5>=1}async getCachedProjects(){return(await this.getGlobalCacheIndex()).entries.map(e=>({name:e.projectName,path:e.projectPath,lastModified:new Date(e.lastModified)}))}}t.CacheManager=c,c.CACHE_VERSION="1.0.0",c.CACHE_DIR_NAME=".deepwiki",c.CACHE_FILE_NAME="wiki-cache.json",c.ANALYSIS_FILE_NAME="analysis-cache.json",c.MAX_CACHE_AGE_DAYS=7,c.MAX_CACHE_ENTRIES=10},69972:(e,t,r)=>{e.exports=r(99971)},70075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(59812),a=r(39962);t.default=function(e){const t=(r="string"==typeof e?(0,n.default)(e):e,Uint8Array.of((15&r[6])<<4|r[7]>>4&15,(15&r[7])<<4|(240&r[4])>>4,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,(15&r[1])<<4|(240&r[2])>>4,96|15&r[2],r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?(0,a.unsafeStringify)(t):t}},70187:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compare=t.generate=t.observe=t.unobserve=void 0;const n=r(62652),a=r(4184);var i=new WeakMap;class s{constructor(e){Object.defineProperty(this,"obj",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.obj=e}}class o{constructor(e,t){Object.defineProperty(this,"callback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callback=e,this.observer=t}}function l(e,t=!1){var r=i.get(e.object);c(r.value,e.object,e.patches,"",t),e.patches.length&&(0,a.applyPatch)(r.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function c(e,t,r,a,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var s=(0,n._objectKeys)(t),o=(0,n._objectKeys)(e),l=!1,d=o.length-1;d>=0;d--){var u=e[m=o[d]];if(!(0,n.hasOwnProperty)(t,m)||void 0===t[m]&&void 0!==u&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&r.push({op:"test",path:a+"/"+(0,n.escapePathComponent)(m),value:(0,n._deepClone)(u)}),r.push({op:"remove",path:a+"/"+(0,n.escapePathComponent)(m)}),l=!0):(i&&r.push({op:"test",path:a,value:e}),r.push({op:"replace",path:a,value:t}));else{var p=t[m];"object"==typeof u&&null!=u&&"object"==typeof p&&null!=p&&Array.isArray(u)===Array.isArray(p)?c(u,p,r,a+"/"+(0,n.escapePathComponent)(m),i):u!==p&&(i&&r.push({op:"test",path:a+"/"+(0,n.escapePathComponent)(m),value:(0,n._deepClone)(u)}),r.push({op:"replace",path:a+"/"+(0,n.escapePathComponent)(m),value:(0,n._deepClone)(p)}))}}if(l||s.length!=o.length)for(d=0;d<s.length;d++){var m=s[d];(0,n.hasOwnProperty)(e,m)||void 0===t[m]||r.push({op:"add",path:a+"/"+(0,n.escapePathComponent)(m),value:(0,n._deepClone)(t[m])})}}}t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var r,a=function(e){return i.get(e)}(e);if(a){const e=function(e,t){return e.observers.get(t)}(a,t);r=e&&e.observer}else a=new s(e),i.set(e,a);if(r)return r;if(r={},a.value=(0,n._deepClone)(e),t){r.callback=t,r.next=null;var c=()=>{l(r)},d=()=>{clearTimeout(r.next),r.next=setTimeout(c)};"undefined"!=typeof window&&(window.addEventListener("mouseup",d),window.addEventListener("keyup",d),window.addEventListener("mousedown",d),window.addEventListener("keydown",d),window.addEventListener("change",d))}return r.patches=[],r.object=e,r.unobserve=()=>{l(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(a,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",d),window.removeEventListener("keyup",d),window.removeEventListener("mousedown",d),window.removeEventListener("keydown",d),window.removeEventListener("change",d))},a.observers.set(t,new o(t,r)),r},t.generate=l,t.compare=function(e,t,r=!1){var n=[];return c(e,t,n,"",r),n}},70345:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringDef=t.zodPatterns=void 0;const n=r(47027);let a;function i(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)s.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}t.zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===a&&(a=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),a),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/},t.parseStringDef=function(e,r){const a={type:"string"};if(e.checks)for(const s of e.checks)switch(s.kind){case"min":(0,n.setResponseValueAndErrors)(a,"minLength","number"==typeof a.minLength?Math.max(a.minLength,s.value):s.value,s.message,r);break;case"max":(0,n.setResponseValueAndErrors)(a,"maxLength","number"==typeof a.maxLength?Math.min(a.maxLength,s.value):s.value,s.message,r);break;case"email":switch(r.emailStrategy){case"format:email":o(a,"email",s.message,r);break;case"format:idn-email":o(a,"idn-email",s.message,r);break;case"pattern:zod":l(a,t.zodPatterns.email,s.message,r)}break;case"url":o(a,"uri",s.message,r);break;case"uuid":o(a,"uuid",s.message,r);break;case"regex":l(a,s.regex,s.message,r);break;case"cuid":l(a,t.zodPatterns.cuid,s.message,r);break;case"cuid2":l(a,t.zodPatterns.cuid2,s.message,r);break;case"startsWith":l(a,RegExp(`^${i(s.value,r)}`),s.message,r);break;case"endsWith":l(a,RegExp(`${i(s.value,r)}$`),s.message,r);break;case"datetime":o(a,"date-time",s.message,r);break;case"date":o(a,"date",s.message,r);break;case"time":o(a,"time",s.message,r);break;case"duration":o(a,"duration",s.message,r);break;case"length":(0,n.setResponseValueAndErrors)(a,"minLength","number"==typeof a.minLength?Math.max(a.minLength,s.value):s.value,s.message,r),(0,n.setResponseValueAndErrors)(a,"maxLength","number"==typeof a.maxLength?Math.min(a.maxLength,s.value):s.value,s.message,r);break;case"includes":l(a,RegExp(i(s.value,r)),s.message,r);break;case"ip":"v6"!==s.version&&o(a,"ipv4",s.message,r),"v4"!==s.version&&o(a,"ipv6",s.message,r);break;case"base64url":l(a,t.zodPatterns.base64url,s.message,r);break;case"jwt":l(a,t.zodPatterns.jwt,s.message,r);break;case"cidr":"v6"!==s.version&&l(a,t.zodPatterns.ipv4Cidr,s.message,r),"v4"!==s.version&&l(a,t.zodPatterns.ipv6Cidr,s.message,r);break;case"emoji":l(a,t.zodPatterns.emoji(),s.message,r);break;case"ulid":l(a,t.zodPatterns.ulid,s.message,r);break;case"base64":switch(r.base64Strategy){case"format:binary":o(a,"binary",s.message,r);break;case"contentEncoding:base64":(0,n.setResponseValueAndErrors)(a,"contentEncoding","base64",s.message,r);break;case"pattern:zod":l(a,t.zodPatterns.base64,s.message,r)}break;case"nanoid":l(a,t.zodPatterns.nanoid,s.message,r);case"toLowerCase":case"toUpperCase":case"trim":break;default:(()=>{})()}return a};const s=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function o(e,t,r,a){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):(0,n.setResponseValueAndErrors)(e,"format",t,r,a)}function l(e,t,r,a){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:c(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):(0,n.setResponseValueAndErrors)(e,"pattern",c(t,a),r,a)}function c(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const r=e.flags.includes("i"),n=e.flags.includes("m"),a=e.flags.includes("s"),i=r?e.source.toLowerCase():e.source;let s="",o=!1,l=!1,c=!1;for(let e=0;e<i.length;e++)if(o)s+=i[e],o=!1;else{if(r)if(l){if(i[e].match(/[a-z]/)){c?(s+=i[e],s+=`${i[e-2]}-${i[e]}`.toUpperCase(),c=!1):"-"===i[e+1]&&i[e+2]?.match(/[a-z]/)?(s+=i[e],c=!0):s+=`${i[e]}${i[e].toUpperCase()}`;continue}}else if(i[e].match(/[a-z]/)){s+=`[${i[e]}${i[e].toUpperCase()}]`;continue}if(n){if("^"===i[e]){s+="(^|(?<=[\r\n]))";continue}if("$"===i[e]){s+="($|(?=[\r\n]))";continue}}a&&"."===i[e]?s+=l?`${i[e]}\r\n`:`[${i[e]}\r\n]`:(s+=i[e],"\\"===i[e]?o=!0:l&&"]"===i[e]?l=!1:l||"["!==i[e]||(l=!0))}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}},70428:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="00000000-0000-0000-0000-000000000000"},70485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONSchemaGenerator=void 0,t.toJSONSchema=function(e,t){if(e instanceof n.$ZodRegistry){const r=new i(t),n={};for(const t of e._idmap.entries()){const[e,n]=t;r.process(n)}const a={},s={registry:e,uri:t?.uri,defs:n};for(const n of e._idmap.entries()){const[e,i]=n;a[e]=r.emit(i,{...t,external:s})}if(Object.keys(n).length>0){const e="draft-2020-12"===r.target?"$defs":"definitions";a.__shared={[e]:n}}return{schemas:a}}const r=new i(t);return r.process(e),r.emit(e,t)};const n=r(91114),a=r(90523);class i{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??n.globalRegistry,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var r;const n=e._zod.def,i={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},o=this.seen.get(e);if(o)return o.count++,t.schemaPath.includes(e)&&(o.cycle=t.path),o.schema;const l={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,l);const c=e._zod.toJSONSchema?.();if(c)l.schema=c;else{const r={...t,schemaPath:[...t.schemaPath,e],path:t.path},s=e._zod.parent;if(s)l.ref=s,this.process(s,r),this.seen.get(s).isParent=!0;else{const t=l.schema;switch(n.type){case"string":{const r=t;r.type="string";const{minimum:n,maximum:a,format:s,patterns:o,contentEncoding:c}=e._zod.bag;if("number"==typeof n&&(r.minLength=n),"number"==typeof a&&(r.maxLength=a),s&&(r.format=i[s]??s,""===r.format&&delete r.format),c&&(r.contentEncoding=c),o&&o.size>0){const e=[...o];1===e.length?r.pattern=e[0].source:e.length>1&&(l.schema.allOf=[...e.map(e=>({..."draft-7"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{const r=t,{minimum:n,maximum:a,format:i,multipleOf:s,exclusiveMaximum:o,exclusiveMinimum:l}=e._zod.bag;"string"==typeof i&&i.includes("int")?r.type="integer":r.type="number","number"==typeof l&&(r.exclusiveMinimum=l),"number"==typeof n&&(r.minimum=n,"number"==typeof l&&(l>=n?delete r.minimum:delete r.exclusiveMinimum)),"number"==typeof o&&(r.exclusiveMaximum=o),"number"==typeof a&&(r.maximum=a,"number"==typeof o&&(o<=a?delete r.maximum:delete r.exclusiveMaximum)),"number"==typeof s&&(r.multipleOf=s);break}case"boolean":case"success":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw new Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw new Error("Symbols cannot be represented in JSON Schema");break;case"null":t.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw new Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw new Error("Void cannot be represented in JSON Schema");break;case"never":t.not={};break;case"date":if("throw"===this.unrepresentable)throw new Error("Date cannot be represented in JSON Schema");break;case"array":{const a=t,{minimum:i,maximum:s}=e._zod.bag;"number"==typeof i&&(a.minItems=i),"number"==typeof s&&(a.maxItems=s),a.type="array",a.items=this.process(n.element,{...r,path:[...r.path,"items"]});break}case"object":{const e=t;e.type="object",e.properties={};const a=n.shape;for(const t in a)e.properties[t]=this.process(a[t],{...r,path:[...r.path,"properties",t]});const i=new Set(Object.keys(a)),s=new Set([...i].filter(e=>{const t=n.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));s.size>0&&(e.required=Array.from(s)),"never"===n.catchall?._zod.def.type?e.additionalProperties=!1:n.catchall?n.catchall&&(e.additionalProperties=this.process(n.catchall,{...r,path:[...r.path,"additionalProperties"]})):"output"===this.io&&(e.additionalProperties=!1);break}case"union":t.anyOf=n.options.map((e,t)=>this.process(e,{...r,path:[...r.path,"anyOf",t]}));break;case"intersection":{const e=t,a=this.process(n.left,{...r,path:[...r.path,"allOf",0]}),i=this.process(n.right,{...r,path:[...r.path,"allOf",1]}),s=e=>"allOf"in e&&1===Object.keys(e).length,o=[...s(a)?a.allOf:[a],...s(i)?i.allOf:[i]];e.allOf=o;break}case"tuple":{const a=t;a.type="array";const i=n.items.map((e,t)=>this.process(e,{...r,path:[...r.path,"prefixItems",t]}));if("draft-2020-12"===this.target?a.prefixItems=i:a.items=i,n.rest){const e=this.process(n.rest,{...r,path:[...r.path,"items"]});"draft-2020-12"===this.target?a.items=e:a.additionalItems=e}n.rest&&(a.items=this.process(n.rest,{...r,path:[...r.path,"items"]}));const{minimum:s,maximum:o}=e._zod.bag;"number"==typeof s&&(a.minItems=s),"number"==typeof o&&(a.maxItems=o);break}case"record":{const e=t;e.type="object",e.propertyNames=this.process(n.keyType,{...r,path:[...r.path,"propertyNames"]}),e.additionalProperties=this.process(n.valueType,{...r,path:[...r.path,"additionalProperties"]});break}case"map":if("throw"===this.unrepresentable)throw new Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw new Error("Set cannot be represented in JSON Schema");break;case"enum":{const e=t,r=(0,a.getEnumValues)(n.entries);r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),e.enum=r;break}case"literal":{const e=t,r=[];for(const e of n.values)if(void 0===e){if("throw"===this.unrepresentable)throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof e){if("throw"===this.unrepresentable)throw new Error("BigInt literals cannot be represented in JSON Schema");r.push(Number(e))}else r.push(e);if(0===r.length);else if(1===r.length){const t=r[0];e.type=null===t?"null":typeof t,e.const=t}else r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),r.every(e=>"boolean"==typeof e)&&(e.type="string"),r.every(e=>null===e)&&(e.type="null"),e.enum=r;break}case"file":{const r=t,n={type:"string",format:"binary",contentEncoding:"binary"},{minimum:a,maximum:i,mime:s}=e._zod.bag;void 0!==a&&(n.minLength=a),void 0!==i&&(n.maxLength=i),s?1===s.length?(n.contentMediaType=s[0],Object.assign(r,n)):r.anyOf=s.map(e=>({...n,contentMediaType:e})):Object.assign(r,n);break}case"transform":if("throw"===this.unrepresentable)throw new Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{const e=this.process(n.innerType,r);t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(n.innerType,r),l.ref=n.innerType;break;case"default":this.process(n.innerType,r),l.ref=n.innerType,t.default=JSON.parse(JSON.stringify(n.defaultValue));break;case"prefault":this.process(n.innerType,r),l.ref=n.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break;case"catch":{let e;this.process(n.innerType,r),l.ref=n.innerType;try{e=n.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw new Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{const r=t,n=e._zod.pattern;if(!n)throw new Error("Pattern not found in template literal");r.type="string",r.pattern=n.source;break}case"pipe":{const e="input"===this.io?"transform"===n.in._zod.def.type?n.out:n.in:n.out;this.process(e,r),l.ref=e;break}case"readonly":this.process(n.innerType,r),l.ref=n.innerType,t.readOnly=!0;break;case"lazy":{const t=e._zod.innerType;this.process(t,r),l.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw new Error("Custom types cannot be represented in JSON Schema")}}}const d=this.metadataRegistry.get(e);return d&&Object.assign(l.schema,d),"input"===this.io&&s(e)&&(delete l.schema.examples,delete l.schema.default),"input"===this.io&&l.schema._prefault&&((r=l.schema).default??(r.default=l.schema._prefault)),delete l.schema._prefault,this.seen.get(e).schema}emit(e,t){const r={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},n=this.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=e=>{const t="draft-2020-12"===this.target?"$defs":"definitions";if(r.external){const n=r.external.registry.get(e[0])?.id,a=r.external.uri??(e=>e);if(n)return{ref:a(n)};const i=e[1].defId??e[1].schema.id??"schema"+this.counter++;return e[1].defId=i,{defId:i,ref:`${a("__shared")}#/${t}/${i}`}}if(e[1]===n)return{ref:"#"};const a=`#/${t}/`,i=e[1].schema.id??"__schema"+this.counter++;return{defId:i,ref:a+i}},i=e=>{if(e[1].schema.$ref)return;const t=e[1],{ref:r,defId:n}=a(e);t.def={...t.schema},n&&(t.defId=n);const i=t.schema;for(const e in i)delete i[e];i.$ref=r};if("throw"===r.cycles)for(const e of this.seen.entries()){const t=e[1];if(t.cycle)throw new Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const t of this.seen.entries()){const n=t[1];if(e===t[0]){i(t);continue}if(r.external){const n=r.external.registry.get(t[0])?.id;if(e!==t[0]&&n){i(t);continue}}const a=this.metadataRegistry.get(t[0])?.id;(a||n.cycle||n.count>1&&"ref"===r.reused)&&i(t)}const s=(e,t)=>{const r=this.seen.get(e),n=r.def??r.schema,a={...n};if(null===r.ref)return;const i=r.ref;if(r.ref=null,i){s(i,t);const e=this.seen.get(i).schema;e.$ref&&"draft-7"===t.target?(n.allOf=n.allOf??[],n.allOf.push(e)):(Object.assign(n,e),Object.assign(n,a))}r.isParent||this.override({zodSchema:e,jsonSchema:n,path:r.path??[]})};for(const e of[...this.seen.entries()].reverse())s(e[0],{target:this.target});const o={};if("draft-2020-12"===this.target?o.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?o.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),r.external?.uri){const t=r.external.registry.get(e)?.id;if(!t)throw new Error("Schema is missing an `id` property");o.$id=r.external.uri(t)}Object.assign(o,n.def);const l=r.external?.defs??{};for(const e of this.seen.entries()){const t=e[1];t.def&&t.defId&&(l[t.defId]=t.def)}r.external||Object.keys(l).length>0&&("draft-2020-12"===this.target?o.$defs=l:o.definitions=l);try{return JSON.parse(JSON.stringify(o))}catch(e){throw new Error("Error converting schema to JSON.")}}}function s(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const n=e._zod.def;switch(n.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":return!1;case"array":return s(n.element,r);case"object":for(const e in n.shape)if(s(n.shape[e],r))return!0;return!1;case"union":for(const e of n.options)if(s(e,r))return!0;return!1;case"intersection":return s(n.left,r)||s(n.right,r);case"tuple":for(const e of n.items)if(s(e,r))return!0;return!(!n.rest||!s(n.rest,r));case"record":case"map":return s(n.keyType,r)||s(n.valueType,r);case"set":return s(n.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return s(n.innerType,r);case"lazy":return s(n.getter(),r);case"transform":return!0;case"pipe":return s(n.in,r)||s(n.out,r)}throw new Error(`Unknown schema type: ${n.type}`)}t.JSONSchemaGenerator=i},70784:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkArray=void 0,t.chunkArray=(e,t)=>e.reduce((e,r,n)=>{const a=Math.floor(n/t),i=e[a]||[];return e[a]=i.concat([r]),e},[])},70857:e=>{"use strict";e.exports=require("os")},70866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isZodSchemaV4=a,t.isZodSchemaV3=i,t.isZodSchema=function(e){return a(e)&&console.warn("[WARNING] Attempting to use Zod 4 schema in a context where Zod 3 schema is expected. This may cause unexpected behavior."),i(e)},t.isInteropZodSchema=s,t.interopSafeParseAsync=async function(e,t){if(a(e))try{return{success:!0,data:await(0,n.parseAsync)(e,t)}}catch(e){return{success:!1,error:e}}if(i(e))return e.safeParse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")},t.interopParseAsync=async function(e,t){if(a(e))return(0,n.parse)(e,t);if(i(e))return e.parse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")},t.interopSafeParse=function(e,t){if(a(e))try{return{success:!0,data:(0,n.parse)(e,t)}}catch(e){return{success:!1,error:e}}if(i(e))return e.safeParse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")},t.interopParse=function(e,t){if(a(e))return(0,n.parse)(e,t);if(i(e))return e.parse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")},t.getSchemaDescription=function(e){return a(e)?n.globalRegistry.get(e)?.description:i(e)||"description"in e&&"string"==typeof e.description?e.description:void 0},t.isShapelessZodSchema=function(e){if(!s(e))return!1;if(i(e)){const t=e._def;if("ZodObject"===t.typeName){const t=e;return!t.shape||0===Object.keys(t.shape).length}if("ZodRecord"===t.typeName)return!0}if(a(e)){const t=e._zod.def;if("object"===t.type){const t=e;return!t.shape||0===Object.keys(t.shape).length}if("record"===t.type)return!0}return"object"==typeof e&&null!==e&&!("shape"in e)},t.isSimpleStringZodSchema=function(e){return!!s(e)&&(i(e)?"ZodString"===e._def.typeName:!!a(e)&&"string"===e._zod.def.type)},t.isZodObjectV3=o,t.isZodObjectV4=l,t.isZodArrayV4=c,t.isInteropZodObject=function(e){return!!o(e)||!!l(e)},t.getInteropZodObjectShape=function(e){if(i(e))return e.shape;if(a(e))return e._zod.def.shape;throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")},t.extendInteropZodObject=function(e,t){if(i(e))return e.extend(t);if(a(e))return n.util.extend(e,t);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")},t.interopZodObjectPartial=function(e){if(i(e))return e.partial();if(a(e))return n.util.partial(n.$ZodOptional,e,void 0);throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")},t.interopZodObjectStrict=function e(t,r=!1){if(i(t))return t.strict();if(l(t)){const a=t._zod.def.shape;if(r)for(const[i,s]of Object.entries(t._zod.def.shape)){if(l(s)){const t=e(s,r);a[i]=t}else if(c(s)){let t=s._zod.def.element;l(t)&&(t=e(t,r)),a[i]=(0,n.clone)(s,{...s._zod.def,element:t})}else a[i]=s;const t=n.globalRegistry.get(s);t&&n.globalRegistry.add(a[i],t)}const i=(0,n.clone)(t,{...t._zod.def,shape:a,catchall:(0,n._never)(n.$ZodNever)}),s=n.globalRegistry.get(t);return s&&n.globalRegistry.add(i,s),i}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")},t.interopZodObjectPassthrough=function e(t,r=!1){if(o(t))return t.passthrough();if(l(t)){const a=t._zod.def.shape;if(r)for(const[i,s]of Object.entries(t._zod.def.shape)){if(l(s)){const t=e(s,r);a[i]=t}else if(c(s)){let t=s._zod.def.element;l(t)&&(t=e(t,r)),a[i]=(0,n.clone)(s,{...s._zod.def,element:t})}else a[i]=s;const t=n.globalRegistry.get(s);t&&n.globalRegistry.add(a[i],t)}const i=(0,n.clone)(t,{...t._zod.def,shape:a,catchall:(0,n._unknown)(n.$ZodUnknown)}),s=n.globalRegistry.get(t);return s&&n.globalRegistry.add(i,s),i}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")},t.getInteropZodDefaultGetter=function(e){if(i(e))try{const t=e.parse(void 0);return()=>t}catch{return}if(a(e))try{const t=(0,n.parse)(e,void 0);return()=>t}catch{return}},t.interopZodTransformInputSchema=function e(t,r=!1){if(i(t))return function(e){return i(e)&&"typeName"in e._def&&"ZodEffects"===e._def.typeName}(t)?e(t._def.schema,r):t;if(a(t)){let i=t;if(function(e){return a(e)&&"pipe"===e._zod.def.type}(t)&&(i=e(t._zod.def.in,r)),r)if(l(i)){const t=i._zod.def.shape;for(const[n,a]of Object.entries(i._zod.def.shape))t[n]=e(a,r);i=(0,n.clone)(i,{...i._zod.def,shape:t})}else if(c(i)){const t=e(i._zod.def.element,r);i=(0,n.clone)(i,{...i._zod.def,element:t})}const s=n.globalRegistry.get(t);return s&&n.globalRegistry.add(i,s),i}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")};const n=r(76601);function a(e){if("object"!=typeof e||null===e)return!1;if(!("_zod"in e))return!1;const t=e._zod;return"object"==typeof t&&null!==t&&"def"in t}function i(e){if("object"!=typeof e||null===e)return!1;if(!("_def"in e)||"_zod"in e)return!1;const t=e._def;return"object"==typeof t&&null!=t&&"typeName"in t}function s(e){return!(!e||"object"!=typeof e||Array.isArray(e)||!a(e)&&!i(e))}function o(e){return"object"==typeof e&&null!==e&&"_def"in e&&"object"==typeof e._def&&null!==e._def&&"typeName"in e._def&&"ZodObject"===e._def.typeName}function l(e){return!!a(e)&&"object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"object"===e._zod.def.type}function c(e){return!!a(e)&&"object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"array"===e._zod.def.type}},70922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureOpenAI=void 0;const n=r(34954),a=r(78299),i=r(99360),s=r(1637),o=r(31984),l=r(69157),c=r(40338),d=r(18677);class u extends i.BaseLLM{static lc_name(){return"AzureOpenAI"}get callKeys(){return[...super.callKeys,"options"]}get lc_secrets(){return{apiKey:"AZURE_OPENAI_API_KEY",openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",azureOpenAIEndpoint:"AZURE_OPENAI_API_ENDPOINT",azureOpenAIApiDeploymentName:"AZURE_OPENAI_API_DEPLOYMENT_NAME"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIEndpoint:"azure_openai_api_endpoint",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:256}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"bestOf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo-instruct"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo-instruct"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:20}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"echo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.azureOpenAIEndpoint=e?.azureOpenAIEndpoint??(0,l.getEnvironmentVariable)("AZURE_OPENAI_API_ENDPOINT"),this.azureOpenAIApiDeploymentName=e?.azureOpenAIApiDeploymentName??(0,l.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME");const t=e?.apiKey??e?.openAIApiKey??(0,l.getEnvironmentVariable)("OPENAI_API_KEY");this.azureOpenAIApiKey=e?.apiKey??e?.azureOpenAIApiKey??(0,l.getEnvironmentVariable)("AZURE_OPENAI_API_KEY")??t,this.apiKey=this.azureOpenAIApiKey;const r=e?.credentials??(this.apiKey===t?new n.OpenAIKeyCredential(this.apiKey??""):new n.AzureKeyCredential(this.apiKey??"")),a=r instanceof n.OpenAIKeyCredential;if(!this.apiKey&&!e?.credentials)throw new Error("Azure OpenAI API key not found");if(!this.azureOpenAIEndpoint&&!a)throw new Error("Azure OpenAI Endpoint not found");if(!this.azureOpenAIApiDeploymentName&&!a)throw new Error("Azure OpenAI Deployment name not found");if(this.maxTokens=e?.maxTokens??this.maxTokens,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.logitBias=e?.logitBias,this.user=e?.user,this.n=e?.n??this.n,this.logprobs=e?.logprobs,this.echo=e?.echo,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.bestOf=e?.bestOf??this.bestOf,this.modelName=e?.model??e?.modelName??this.model,this.model=this.modelName,this.modelKwargs=e?.modelKwargs??{},this.streaming=e?.streaming??!1,this.batchSize=e?.batchSize??this.batchSize,this.streaming&&this.bestOf&&this.bestOf>1)throw new Error("Cannot stream results when bestOf > 1");const i={userAgentOptions:{userAgentPrefix:d.USER_AGENT_PREFIX}};a?this.client=new n.OpenAIClient(r):((0,c.isTokenCredential)(r),this.client=new n.OpenAIClient(this.azureOpenAIEndpoint??"",r,i))}async*_streamResponseChunks(e,t,r){const n=this.azureOpenAIApiDeploymentName||this.model,a=await this.caller.call(()=>this.client.streamCompletions(n,[e],{maxTokens:this.maxTokens,temperature:this.temperature,topP:this.topP,logitBias:this.logitBias,user:this.user,n:this.n,logprobs:this.logprobs,echo:this.echo,stop:this.stopSequences,presencePenalty:this.presencePenalty,frequencyPenalty:this.frequencyPenalty,bestOf:this.bestOf,requestOptions:{timeout:t?.timeout??this.timeout},abortSignal:t?.signal??void 0,...this.modelKwargs}));for await(const e of a){const t=e?.choices[0];if(!t)continue;const n=new o.GenerationChunk({text:t.text,generationInfo:{finishReason:t.finishReason}});yield n,r?.handleLLMNewToken(n.text??"")}if(t.signal?.aborted)throw new Error("AbortError")}async _generate(e,t,r){const n=this.azureOpenAIApiDeploymentName||this.model;if(-1===this.maxTokens){if(1!==e.length)throw new Error("max_tokens set to -1 not supported for multiple inputs");this.maxTokens=await(0,a.calculateMaxTokens)({prompt:e[0],modelName:this.model})}const i=(0,s.chunkArray)(e,this.batchSize);if(this.streaming){const e=[];for(let a=0;a<i.length;a+=1){let s;const o=await this.caller.call(()=>this.client.streamCompletions(n,i[a],{maxTokens:this.maxTokens,temperature:this.temperature,topP:this.topP,logitBias:this.logitBias,user:this.user,n:this.n,logprobs:this.logprobs,echo:this.echo,stop:this.stopSequences,presencePenalty:this.presencePenalty,frequencyPenalty:this.frequencyPenalty,bestOf:this.bestOf,requestOptions:{timeout:t?.timeout??this.timeout},abortSignal:t?.signal??void 0,...this.modelKwargs}));for await(const t of o){s||(s={id:t.id,created:t.created,promptFilterResults:t.promptFilterResults});for(const n of t.choices){if(e[n.index]){const t=e[n.index];t.text+=n.text,t.finishReason=n.finishReason,t.logprobs=n.logprobs}else e[n.index]=n;r?.handleLLMNewToken(n.text,{prompt:Math.floor(n.index/this.n),completion:n.index%this.n})}}if(t.signal?.aborted)throw new Error("AbortError")}return{generations:(0,s.chunkArray)(e,this.n).map(e=>e.map(e=>({text:e.text??"",generationInfo:{finishReason:e.finishReason,logprobs:e.logprobs}}))),llmOutput:{tokenUsage:{completionTokens:void 0,promptTokens:void 0,totalTokens:void 0}}}}{const a={},i=(0,s.chunkArray)(e,this.batchSize),o=[];for(let r=0;r<i.length;r+=1){const r=await this.caller.call(()=>this.client.getCompletions(n,e,{maxTokens:this.maxTokens,temperature:this.temperature,topP:this.topP,logitBias:this.logitBias,user:this.user,n:this.n,logprobs:this.logprobs,echo:this.echo,stop:this.stopSequences,presencePenalty:this.presencePenalty,frequencyPenalty:this.frequencyPenalty,bestOf:this.bestOf,requestOptions:{timeout:t?.timeout??this.timeout},abortSignal:t?.signal??void 0,...this.modelKwargs}));o.push(...r.choices),a.completionTokens=(a.completionTokens??0)+r.usage.completionTokens,a.promptTokens=(a.promptTokens??0)+r.usage.promptTokens,a.totalTokens=(a.totalTokens??0)+r.usage.totalTokens}return{generations:(0,s.chunkArray)(o,this.n).map(e=>e.map(e=>(r?.handleLLMNewToken(e.text,{prompt:Math.floor(e.index/this.n),completion:e.index%this.n}),{text:e.text??"",generationInfo:{finishReason:e.finishReason,logprobs:e.logprobs}}))),llmOutput:{tokenUsage:{completionTokens:a.completionTokens,promptTokens:a.promptTokens,totalTokens:a.totalTokens}}}}}_llmType(){return"azure_openai"}}t.AzureOpenAI=u},70933:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.RAGManager=void 0;const o=s(r(16928)),l=s(r(79896)),c=r(66734),d=r(37621),u=r(97564);t.RAGManager=class{constructor(e,t){this.documents=[],this.isInitialized=!1,this.config=e,this.memory=new u.ConversationMemory(t),this.retriever=new d.VectorRetriever(e)}async prepareRetriever(e){this.repoPath=e;try{await this.loadDocuments(e),console.log("Preparing vector retriever..."),await this.retriever.initialize(this.documents),this.isInitialized=!0,console.log(`RAG准备完成，加载了 ${this.documents.length} 个文档`)}catch(e){throw console.error("准备检索器时出错:",e),e}}async loadDocuments(e){const t=o.join(e,".deepwiki");if(!l.existsSync(t))throw new Error("未找到 .deepwiki 目录，请先生成 Wiki");const r=o.join(t,"project_analysis.json");if(!l.existsSync(r))throw new Error("未找到项目分析文件，请先生成 Wiki");try{const e=JSON.parse(l.readFileSync(r,"utf-8"));this.documents=this.extractDocumentsFromAnalysis(e),console.log(`从项目分析中提取了 ${this.documents.length} 个文档`)}catch(e){throw console.error("加载文档时出错:",e),e}}extractDocumentsFromAnalysis(e){const t=[];if(e.files&&Array.isArray(e.files))for(const r of e.files)r.content&&r.path&&t.push({id:r.path,title:o.basename(r.path),content:r.content,path:r.path,type:r.type||"unknown",metadata:{filePath:r.path,fileType:r.type||"unknown",size:r.size||0}});return e.structure&&t.push({id:"project-structure",title:"项目结构",content:`项目结构:\n${JSON.stringify(e.structure,null,2)}`,path:"project-structure.json",type:"structure",metadata:{filePath:"project_structure",fileType:"structure"}}),e.statistics&&t.push({id:"project-statistics",title:"项目统计",content:`项目统计:\n${JSON.stringify(e.statistics,null,2)}`,path:"project-statistics.json",type:"statistics",metadata:{filePath:"project_statistics",fileType:"statistics"}}),t}async query(e){if(!this.isInitialized)throw new Error("检索器未初始化，请先调用 prepareRetriever");try{const t=await this.retriever.retrieve(e,5),r=this.buildContext(t.documents);this.memory.addMessage({role:"user",content:e});const n=await this.generateAnswer(e,r,t.documents);return this.memory.addMessage({role:"assistant",content:n.answer,sources:t.documents}),n}catch(e){return console.error("RAG查询时出错:",e),{rationale:"查询过程中发生错误",answer:"抱歉，我在处理您的问题时遇到了错误。请重试或重新表述您的问题。"}}}buildContext(e){if(0===e.length)return"没有找到相关的文档内容。";let t="相关文档内容:\n\n";return e.forEach((e,r)=>{t+=`## 文件: ${e.metadata?.filePath||e.path}\n\n`,t+=`${e.content}\n\n`,t+="---\n\n"}),t}async generateAnswer(e,t,r){const n=`你是一个代码助手，专门回答关于 GitHub 仓库的问题。\n你将收到用户查询、相关上下文和过去的对话历史。\n\n语言检测和响应:\n- 检测用户查询的语言\n- 用与用户查询相同的语言回答\n- 重要：如果提示中要求特定语言，优先使用该语言而不是查询语言\n\n使用 MARKDOWN 格式化你的回答:\n- 对所有格式使用正确的 markdown 语法\n- 对于代码块，使用三重反引号和语言规范（\`\`\`python, \`\`\`javascript 等）\n- 使用 ## 标题作为主要部分\n- 在适当的地方使用项目符号或编号列表\n- 在呈现结构化数据时使用 markdown 表格语法格式化表格\n- 使用 **粗体** 和 *斜体* 来强调\n- 引用文件路径时，使用 \`内联代码\` 格式\n\n重要的格式规则:\n1. 不要在答案的开头或结尾包含 \`\`\`markdown 围栏\n2. 直接从内容开始你的回答\n3. 内容将已经呈现为 markdown，所以只需提供原始 markdown 内容\n\n逐步思考，确保你的答案结构良好且视觉上有组织。\n\n${this.buildConversationHistory()}\n\n上下文信息:\n${t}\n\n用户问题: ${e}\n\n请基于上述上下文信息回答用户的问题。`;try{return{rationale:"基于项目文档和代码分析生成回答",answer:await this.callAIModel(n),sources:r,timestamp:Date.now()}}catch(e){return console.error("生成回答时出错:",e),{rationale:"生成回答时发生错误",answer:"抱歉，我无法生成回答。请检查您的 AI 配置并重试。"}}}buildConversationHistory(){const e=this.memory.getContextMessages(10);if(0===e.length)return"";let t="对话历史:\n";return e.forEach((e,r)=>{const n="user"===e.role?"用户":"助手";t+=`${n}: ${e.content}\n\n`}),t}async callAIModel(e){try{const t=c.AIModelClientFactory.createClient(this.config);return(await t.generateResponse(e)).content}catch(e){return console.error("AI model call failed:",e),`抱歉，AI 模型调用失败: ${e instanceof Error?e.message:"未知错误"}。请检查您的配置和网络连接。`}}getConversationHistory(){return this.memory.getCurrentMessages()}clearConversationHistory(){this.memory.clearAllSessions()}createNewSession(e){return this.memory.createSession(e)}getConversationMemory(){return this.memory}getCurrentSessionId(){return this.memory.getCurrentSessionId()}setCurrentSession(e){return this.memory.setCurrentSession(e)}getDocumentCount(){return this.documents.length}isReady(){return this.isInitialized&&this.documents.length>0}getStats(){const e={documentsLoaded:this.documents.length,isInitialized:this.isInitialized};return this.isInitialized?{...e,retrieverStats:this.retriever.getStats()}:e}updateConfig(e){console.log("RAGManager updateConfig called with provider:",e.provider),this.config=e,this.retriever=new d.VectorRetriever(e),console.log("RAGManager VectorRetriever updated"),this.isInitialized&&this.repoPath&&(console.log("RAGManager re-initializing with new config..."),this.prepareRetriever(this.repoPath).catch(e=>{console.error("Failed to re-initialize RAGManager with new config:",e)}))}}},70936:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyCredentialAuthenticationPolicy=t.keyCredentialAuthenticationPolicyName=void 0,t.keyCredentialAuthenticationPolicyName="keyCredentialAuthenticationPolicy",t.keyCredentialAuthenticationPolicy=function(e,r){return{name:t.keyCredentialAuthenticationPolicyName,sendRequest:async(t,n)=>(t.headers.set(r,e.key),n(t))}}},70979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertOllamaMessagesToLangChain=function(e,t){return new n.AIMessageChunk({content:e.content??"",tool_call_chunks:e.tool_calls?.map(e=>({name:e.function.name,args:JSON.stringify(e.function.arguments),type:"tool_call_chunk",index:0,id:(0,a.v4)()})),response_metadata:t?.responseMetadata,usage_metadata:t?.usageMetadata})},t.convertToOllamaMessages=function(e){return e.flatMap(e=>{if(["human","generic"].includes(e._getType()))return"string"==typeof(t=e).content?[{role:"user",content:t.content}]:t.content.map(e=>{if("text"===e.type)return{role:"user",content:e.text};if("image_url"===e.type){if("string"==typeof e.image_url)return{role:"user",content:"",images:[i(e.image_url)]};if(e.image_url.url&&"string"==typeof e.image_url.url)return{role:"user",content:"",images:[i(e.image_url.url)]}}throw new Error(`Unsupported content type: ${e.type}`)});var t;if("ai"===e._getType())return function(e){if("string"==typeof e.content)return[{role:"assistant",content:e.content}];const t=e.content.filter(e=>"text"===e.type&&"string"==typeof e.text).map(e=>({role:"assistant",content:e.text}));let r;if(e.content.find(e=>"tool_use"===e.type)&&e.tool_calls?.length){const t=e.tool_calls?.map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:e.args}}));t&&(r={role:"assistant",tool_calls:t,content:""})}else if(e.content.find(e=>"tool_use"===e.type)&&!e.tool_calls?.length)throw new Error("'tool_use' content type is not supported without tool calls.");return[...t,...r?[r]:[]]}(e);if("system"===e._getType())return function(e){if("string"==typeof e.content)return[{role:"system",content:e.content}];if(e.content.every(e=>"text"===e.type&&"string"==typeof e.text))return e.content.map(e=>({role:"system",content:e.text}));throw new Error(`Unsupported content type(s): ${e.content.map(e=>e.type).join(", ")}`)}(e);if("tool"===e._getType())return function(e){if("string"!=typeof e.content)throw new Error("Non string tool message content is not supported");return[{role:"tool",content:e.content}]}(e);throw new Error(`Unsupported message type: ${e._getType()}`)})};const n=r(6500),a=r(80589);function i(e){const t=e.match(/^data:.*?;base64,(.*)$/);return t?t[1]:""}},71043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeGeneratorWithSetup=t.AsyncGeneratorWithSetup=t.concat=t.atee=t.IterableReadableStream=void 0;const n=r(12322),a=r(22055);class i extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const t=e.getReader();return new i({start:e=>function r(){return t.read().then(({done:t,value:n})=>{if(!t)return e.enqueue(n),r();e.close()})}(),cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new i({async pull(t){const{value:r,done:n}=await e.next();n&&t.close(),t.enqueue(r)},async cancel(t){await e.return(t)}})}}t.IterableReadableStream=i,t.atee=function(e,t=2){const r=Array.from({length:t},()=>[]);return r.map(async function*(t){for(;;)if(0===t.length){const t=await e.next();for(const e of r)e.push(t)}else{if(t[0].done)return;yield t.shift().value}})},t.concat=function e(t,r){if(Array.isArray(t)&&Array.isArray(r))return t.concat(r);if("string"==typeof t&&"string"==typeof r)return t+r;if("number"==typeof t&&"number"==typeof r)return t+r;if("concat"in t&&"function"==typeof t.concat)return t.concat(r);if("object"==typeof t&&"object"==typeof r){const n={...t};for(const[t,a]of Object.entries(r))t in n&&!Array.isArray(n[t])?n[t]=e(n[t],a):n[t]=a;return n}throw new Error(`Cannot concat ${typeof t} and ${typeof r}`)};class s{constructor(e){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((t,r)=>{n.AsyncLocalStorageProviderSingleton.runWithConfig(e.config,async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(t,r):this.firstResult.then(e=>t(void 0),r)},!0)})}async next(...e){return this.signal?.throwIfAborted(),this.firstResultUsed?n.AsyncLocalStorageProviderSingleton.runWithConfig(this.config,this.signal?async()=>(0,a.raceWithSignal)(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}t.AsyncGeneratorWithSetup=s,t.pipeGeneratorWithSetup=async function(e,t,r,n,...a){const i=new s({generator:t,startSetup:r,signal:n}),o=await i.setup;return{output:e(i,o,...a),setup:o}}},71111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HumanMessageChunk=t.HumanMessage=void 0;const n=r(66267);class a extends n.BaseMessage{static lc_name(){return"HumanMessage"}_getType(){return"human"}}t.HumanMessage=a;class i extends n.BaseMessageChunk{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),id:this.id??e.id})}}t.HumanMessageChunk=i},71118:(e,t,r)=>{"use strict";var n,a,i,s,o,l,c,d;Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractChatCompletionRunner=void 0;const u=r(79632),p=r(89526),m=r(64691),h=r(46289),f=r(50460),g=r(63357),y=10;class v extends f.EventStream{constructor(){super(...arguments),n.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(0,h.isToolMessage)(e)&&e.content)this._emit("functionToolCallResult",e.content);else if((0,h.isAssistantMessage)(e)&&e.tool_calls)for(const t of e.tool_calls)"function"===t.type&&this._emit("functionToolCall",t.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new p.OpenAIError("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),u.__classPrivateFieldGet(this,n,"m",a).call(this)}async finalMessage(){return await this.done(),u.__classPrivateFieldGet(this,n,"m",i).call(this)}async finalFunctionToolCall(){return await this.done(),u.__classPrivateFieldGet(this,n,"m",s).call(this)}async finalFunctionToolCallResult(){return await this.done(),u.__classPrivateFieldGet(this,n,"m",o).call(this)}async totalUsage(){return await this.done(),u.__classPrivateFieldGet(this,n,"m",l).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=u.__classPrivateFieldGet(this,n,"m",i).call(this);t&&this._emit("finalMessage",t);const r=u.__classPrivateFieldGet(this,n,"m",a).call(this);r&&this._emit("finalContent",r);const c=u.__classPrivateFieldGet(this,n,"m",s).call(this);c&&this._emit("finalFunctionToolCall",c);const d=u.__classPrivateFieldGet(this,n,"m",o).call(this);null!=d&&this._emit("finalFunctionToolCallResult",d),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",u.__classPrivateFieldGet(this,n,"m",l).call(this))}async _createChatCompletion(e,t,r){const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),u.__classPrivateFieldGet(this,n,"m",c).call(this,t);const i=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion((0,g.parseChatCompletion)(i,t))}async _runChatCompletion(e,t,r){for(const e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,r)}async _runTools(e,t,r){const a="tool",{tool_choice:i="auto",stream:s,...o}=t,l="string"!=typeof i&&i?.function?.name,{maxChatCompletions:c=y}=r||{},h=t.tools.map(e=>{if((0,g.isAutoParsableTool)(e)){if(!e.$callback)throw new p.OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),f={};for(const e of h)"function"===e.type&&(f[e.function.name||e.function.function.name]=e.function);const v="tools"in t?h.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<c;++t){const t=await this._createChatCompletion(e,{...o,tool_choice:i,tools:v,messages:[...this.messages]},r),s=t.choices[0]?.message;if(!s)throw new p.OpenAIError("missing message in ChatCompletion response");if(!s.tool_calls?.length)return;for(const e of s.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:r,arguments:i}=e.function,s=f[r];if(!s){const e=`Invalid tool_call: ${JSON.stringify(r)}. Available options are: ${Object.keys(f).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:t,content:e});continue}if(l&&l!==r){const e=`Invalid tool_call: ${JSON.stringify(r)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:a,tool_call_id:t,content:e});continue}let o;try{o=(0,m.isRunnableFunctionWithParse)(s)?await s.parse(i):i}catch(e){const r=e instanceof Error?e.message:String(e);this._addMessage({role:a,tool_call_id:t,content:r});continue}const c=await s.function(o,this),p=u.__classPrivateFieldGet(this,n,"m",d).call(this,c);if(this._addMessage({role:a,tool_call_id:t,content:p}),l)return}}}}t.AbstractChatCompletionRunner=v,n=new WeakSet,a=function(){return u.__classPrivateFieldGet(this,n,"m",i).call(this).content??null},i=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if((0,h.isAssistantMessage)(t))return{...t,content:t.content??null,refusal:t.refusal??null}}throw new p.OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},s=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if((0,h.isAssistantMessage)(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},o=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if((0,h.isToolMessage)(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},l=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},c=function(e){if(null!=e.n&&e.n>1)throw new p.OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},d=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)}},71188:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.Client=t.DEFAULT_BATCH_SIZE_LIMIT_BYTES=t.AutoBatchQueue=void 0,t.mergeRuntimeEnvIntoRun=_;const o=s(r(49324)),l=r(31937),c=r(61008),d=r(69737),u=r(18291),p=r(51400),m=r(33635),h=r(57831),f=r(37215),g=r(13308),y=r(54103),v=r(62218),b=r(87324);function _(e){const t=(0,p.getRuntimeEnvironment)(),r=(0,p.getLangChainEnvVarsMetadata)(),n=e.extra??{},a=n.metadata;return e.extra={...n,runtime:{...t,...n?.runtime},metadata:{...r,...r.revision_id||"revision_id"in e&&e.revision_id?{revision_id:("revision_id"in e?e.revision_id:void 0)??r.revision_id}:{},...a}},e}function w(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const P=async e=>{if(429===e?.status){const t=1e3*parseInt(e.headers.get("retry-after")??"30",10);if(t>0)return await new Promise(e=>setTimeout(e,t)),!0}return!1};function O(e){return"number"==typeof e?Number(e.toFixed(4)):e}class S{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t;const r=new Promise(e=>{t=e}),n=(0,b.serialize)(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl,itemPromiseResolve:t,itemPromise:r,size:n}),this.sizeBytes+=n,r}pop(e){if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const t=[];let r=0;for(;r+(this.peek()?.size??0)<e&&this.items.length>0;){const e=this.items.shift();e&&(t.push(e),r+=e.size,this.sizeBytes-=e.size)}if(0===t.length&&this.items.length>0){const e=this.items.shift();t.push(e),r+=e.size,this.sizeBytes-=e.size}return[t.map(e=>({action:e.action,item:e.payload,otelContext:e.otelContext,apiKey:e.apiKey,apiUrl:e.apiUrl})),()=>t.forEach(e=>e.itemPromiseResolve())]}}t.AutoBatchQueue=S,t.DEFAULT_BATCH_SIZE_LIMIT_BYTES=20971520;const E="https://api.smith.langchain.com";class A{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new S}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:"false"===(0,p.getEnvironmentVariable)("LANGSMITH_TRACING_BACKGROUND")}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"multipartStreamingDisabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:"true"===(0,p.getEnvironmentVariable)("LANGSMITH_DEBUG")});const t=A.getDefaultClientConfig();if(this.tracingSampleRate=(e=>{const t=e?.toString()??(0,p.getLangSmithEnvironmentVariable)("TRACING_SAMPLING_RATE");if(void 0===t)return;const r=parseFloat(t);if(r<0||r>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r})(e.tracingSamplingRate),this.apiUrl=w(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=w(e.apiKey??t.apiKey),this.webUrl=w(e.webUrl??t.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new d.AsyncCaller({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new d.AsyncCaller({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:P,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,(0,p.getOtelEnabled)()&&(this.langSmithToOTELTranslator=new l.LangSmithToOTELTranslator)}static getDefaultClientConfig(){const e=(0,p.getLangSmithEnvironmentVariable)("API_KEY");return{apiUrl:(0,p.getLangSmithEnvironmentVariable)("ENDPOINT")??E,apiKey:e,webUrl:void 0,hideInputs:"true"===(0,p.getLangSmithEnvironmentVariable)("HIDE_INPUTS"),hideOutputs:"true"===(0,p.getLangSmithEnvironmentVariable)("HIDE_OUTPUTS")}}getHostUrl(){return this.webUrl?this.webUrl:(()=>{const e=this.apiUrl.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===e||"127.0.0.1"===e||"::1"===e})()?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${m.__version__}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}_getPlatformEndpointPath(e){return"/v1"!==this.apiUrl.slice(-3)&&"/v1/"!==this.apiUrl.slice(-4)?`/v1/platform/${e}`:`/platform/${e}`}async processInputs(e){return!1===this.hideInputs?e:!0===this.hideInputs?{}:"function"==typeof this.hideInputs?this.hideInputs(e):e}async processOutputs(e){return!1===this.hideOutputs?e:!0===this.hideOutputs?{}:"function"==typeof this.hideOutputs?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const t={...e};return void 0!==t.inputs&&(t.inputs=await this.processInputs(t.inputs)),void 0!==t.outputs&&(t.outputs=await this.processOutputs(t.outputs)),t}async _getResponse(e,t){const r=t?.toString()??"",n=`${this.apiUrl}${e}?${r}`,a=await this.caller.call((0,v._getFetchImplementation)(this.debug),n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(a,`Failed to fetch ${e}`),a}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams,r){let n=Number(t.get("offset"))||0;const a=Number(t.get("limit"))||100;for(;;){t.set("offset",String(n)),t.set("limit",String(a));const i=`${this.apiUrl}${e}?${t}`,s=await this.caller.call((0,v._getFetchImplementation)(this.debug),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(s,`Failed to fetch ${e}`);const o=r?r(await s.json()):await s.json();if(0===o.length)break;if(yield o,o.length<a)break;n+=o.length}}async*_getCursorPaginatedList(e,t=null,r="POST",n="runs"){const a=t?{...t}:{};for(;;){const t=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)}),i=await t.json();if(!i)break;if(!i[n])break;yield i[n];const s=i.cursors;if(!s)break;if(!s.next)break;a.cursor=s.next}}_shouldSample(){return void 0===this.tracingSampleRate||Math.random()<this.tracingSampleRate}_filterForSampling(e,t=!1){if(void 0===this.tracingSampleRate)return e;if(t){const t=[];for(const r of e)this.filteredPostUuids.has(r.trace_id)?r.id===r.trace_id&&this.filteredPostUuids.delete(r.trace_id):t.push(r);return t}{const t=[];for(const r of e){const e=r.trace_id??r.id;this.filteredPostUuids.has(e)||(r.id===e?this._shouldSample()?t.push(r):this.filteredPostUuids.add(e):t.push(r))}return t}}async _getBatchSizeLimitBytes(){const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??e.batch_ingest_config?.size_limit_bytes??t.DEFAULT_BATCH_SIZE_LIMIT_BYTES}async _getMultiPartSupport(){const e=await this._ensureServerInfo();return e.instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue(e){const t=[];for(;this.autoBatchQueue.items.length>0;){const[r,n]=this.autoBatchQueue.pop(e);if(!r.length){n();break}const a=r.reduce((e,t)=>{const r=t.apiUrl??this.apiUrl,n=t.apiKey??this.apiKey,a=t.apiKey===this.apiKey&&t.apiUrl===this.apiUrl?"default":`${r}|${n}`;return e[a]||(e[a]=[]),e[a].push(t),e},{}),i=[];for(const[e,t]of Object.entries(a)){const r=this._processBatch(t,{apiUrl:"default"===e?void 0:e.split("|")[0],apiKey:"default"===e?void 0:e.split("|")[1]});i.push(r)}const s=Promise.all(i).finally(n);t.push(s)}return Promise.all(t)}async _processBatch(e,t){if(e.length)try{if(void 0!==this.langSmithToOTELTranslator)this._sendBatchToOTELTranslator(e);else{const r={runCreates:e.filter(e=>"create"===e.action).map(e=>e.item),runUpdates:e.filter(e=>"update"===e.action).map(e=>e.item)},n=await this._ensureServerInfo();n?.batch_ingest_config?.use_multipart_endpoint?await this.multipartIngestRuns(r,t):await this.batchIngestRuns(r,t)}}catch(e){console.error("Error exporting batch:",e)}}_sendBatchToOTELTranslator(e){if(void 0!==this.langSmithToOTELTranslator){const t=new Map,r=[];for(const n of e)n.item.id&&n.otelContext&&(t.set(n.item.id,n.otelContext),"create"===n.action?r.push({operation:"post",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}):r.push({operation:"patch",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}));this.langSmithToOTELTranslator.exportBatch(r,t)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.item=_(e.item);const t=this.autoBatchQueue.push(e);if(this.manualFlushMode)return t;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),t}async _getServerInfo(){const e=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(2500),...this.fetchOptions});await(0,y.raiseForStatus)(e,"get server info");const t=await e.json();return this.debug&&console.log("\n=== LangSmith Server Configuration ===\n"+JSON.stringify(t,null,2)+"\n"),t}async _ensureServerInfo(){return void 0===this._getServerInfoPromise&&(this._getServerInfoPromise=(async()=>{if(void 0===this._serverInfo)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(void 0===this._serverInfo&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}_cloneCurrentOTELContext(){const e=(0,c.getOTELTrace)(),t=(0,c.getOTELContext)();if(void 0!==this.langSmithToOTELTranslator){const r=e.getActiveSpan();if(r)return e.setSpan(t.active(),r)}}async createRun(e,t){if(!this._filterForSampling([e]).length)return;const r={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;const a=await this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&void 0!==a.trace_id&&void 0!==a.dotted_order){const e=this._cloneCurrentOTELContext();return void this.processRunOperation({action:"create",item:a,otelContext:e,apiKey:t?.apiKey,apiUrl:t?.apiUrl}).catch(console.error)}const i=_(a);void 0!==t?.apiKey&&(r["x-api-key"]=t.apiKey);const s=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${t?.apiUrl??this.apiUrl}/runs`,{method:"POST",headers:r,body:(0,b.serialize)(i,`Creating run with id: ${i.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(s,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:t},r){if(void 0===e&&void 0===t)return;let n=await Promise.all(e?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[]),a=await Promise.all(t?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[]);if(n.length>0&&a.length>0){const e=n.reduce((e,t)=>t.id?(e[t.id]=t,e):e,{}),t=[];for(const r of a)void 0!==r.id&&e[r.id]?e[r.id]={...e[r.id],...r}:t.push(r);n=Object.values(e),a=t}const i={post:n,patch:a};if(!i.post.length&&!i.patch.length)return;const s={post:[],patch:[]};for(const e of["post","patch"]){const t=e,r=i[t].reverse();let n=r.pop();for(;void 0!==n;)s[t].push(n),n=r.pop()}if(s.post.length>0||s.patch.length>0){const e=s.post.map(e=>e.id).concat(s.patch.map(e=>e.id)).join(",");await this._postBatchIngestRuns((0,b.serialize)(s,`Ingesting runs with ids: ${e}`),r)}}async _postBatchIngestRuns(e,t){const r={...this.headers,"Content-Type":"application/json",Accept:"application/json"};void 0!==t?.apiKey&&(r["x-api-key"]=t.apiKey);const n=await this.batchIngestCaller.call((0,v._getFetchImplementation)(this.debug),`${t?.apiUrl??this.apiUrl}/runs/batch`,{method:"POST",headers:r,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(n,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:t},r){if(void 0===e&&void 0===t)return;const n={};let a=[];for(const t of e??[]){const e=await this.prepareRunCreateOrUpdateInputs(t);void 0!==e.id&&void 0!==e.attachments&&(n[e.id]=e.attachments),delete e.attachments,a.push(e)}let i=[];for(const e of t??[])i.push(await this.prepareRunCreateOrUpdateInputs(e));if(void 0!==a.find(e=>void 0===e.trace_id||void 0===e.dotted_order))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(void 0!==i.find(e=>void 0===e.trace_id||void 0===e.dotted_order))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(a.length>0&&i.length>0){const e=a.reduce((e,t)=>t.id?(e[t.id]=t,e):e,{}),t=[];for(const r of i)void 0!==r.id&&e[r.id]?e[r.id]={...e[r.id],...r}:t.push(r);a=Object.values(e),i=t}if(0===a.length&&0===i.length)return;const s=[],o=[];for(const[e,t]of[["post",a],["patch",i]])for(const r of t){const{inputs:t,outputs:a,events:i,attachments:l,...c}=r,d={inputs:t,outputs:a,events:i},u=(0,b.serialize)(c,`Serializing for multipart ingestion of run with id: ${c.id}`);o.push({name:`${e}.${c.id}`,payload:new Blob([u],{type:`application/json; length=${u.length}`})});for(const[t,r]of Object.entries(d)){if(void 0===r)continue;const n=(0,b.serialize)(r,`Serializing ${t} for multipart ingestion of run with id: ${c.id}`);o.push({name:`${e}.${c.id}.${t}`,payload:new Blob([n],{type:`application/json; length=${n.length}`})})}if(void 0!==c.id){const e=n[c.id];if(e){delete n[c.id];for(const[t,r]of Object.entries(e)){let e,n;Array.isArray(r)?[e,n]=r:(e=r.mimeType,n=r.data),t.includes(".")?console.warn(`Skipping attachment '${t}' for run ${c.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`):o.push({name:`attachment.${c.id}.${t}`,payload:new Blob([n],{type:`${e}; length=${n.byteLength}`})})}}}s.push(`trace=${c.trace_id},id=${c.id}`)}await this._sendMultipartRequest(o,s.join("; "),r)}async _createNodeFetchBody(e,t){const r=[];for(const n of e)r.push(new Blob([`--${t}\r\n`])),r.push(new Blob([`Content-Disposition: form-data; name="${n.name}"\r\n`,`Content-Type: ${n.payload.type}\r\n\r\n`])),r.push(n.payload),r.push(new Blob(["\r\n"]));r.push(new Blob([`--${t}--\r\n`]));const n=new Blob(r);return await n.arrayBuffer()}async _createMultipartStream(e,t){const r=new TextEncoder;return new ReadableStream({async start(n){const a=async e=>{"string"==typeof e?n.enqueue(r.encode(e)):n.enqueue(e)};for(const r of e){await a(`--${t}\r\n`),await a(`Content-Disposition: form-data; name="${r.name}"\r\n`),await a(`Content-Type: ${r.payload.type}\r\n\r\n`);const e=r.payload.stream().getReader();try{let t;for(;!(t=await e.read()).done;)n.enqueue(t.value)}finally{e.releaseLock()}await a("\r\n")}await a(`--${t}--\r\n`),n.close()}})}async _sendMultipartRequest(e,t,r){const n="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),a=(0,v._globalFetchImplementationIsNodeFetch)(),i=()=>this._createNodeFetchBody(e,n),s=()=>this._createMultipartStream(e,n),o=async e=>{const t={...this.headers,"Content-Type":`multipart/form-data; boundary=${n}`};return void 0!==r?.apiKey&&(t["x-api-key"]=r.apiKey),this.batchIngestCaller.call((0,v._getFetchImplementation)(this.debug),`${r?.apiUrl??this.apiUrl}/runs/multipart`,{method:"POST",headers:t,body:e,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})};try{let e,n=!1;a||this.multipartStreamingDisabled?e=await o(await i()):(n=!0,e=await o(await s())),this.multipartStreamingDisabled&&!n||422!==e.status||(r?.apiUrl??this.apiUrl)===E||(console.warn(`Streaming multipart upload to ${r?.apiUrl??this.apiUrl}/runs/multipart failed. This usually means the host does not support chunked uploads. Retrying with a buffered upload for operation "${t}".`),this.multipartStreamingDisabled=!0,e=await o(await i())),await(0,y.raiseForStatus)(e,"ingest multipart runs",!0)}catch(e){console.warn(`${e.message.trim()}\n\nContext: ${t}`)}}async updateRun(e,t,r){(0,h.assertUuid)(e),t.inputs&&(t.inputs=await this.processInputs(t.inputs)),t.outputs&&(t.outputs=await this.processOutputs(t.outputs));const n={...t,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&void 0!==n.trace_id&&void 0!==n.dotted_order){const e=this._cloneCurrentOTELContext();return void 0!==t.end_time&&void 0===n.parent_run_id&&this.blockOnRootRunFinalization&&!this.manualFlushMode?void await this.processRunOperation({action:"update",item:n,otelContext:e,apiKey:r?.apiKey,apiUrl:r?.apiUrl}).catch(console.error):void this.processRunOperation({action:"update",item:n,otelContext:e,apiKey:r?.apiKey,apiUrl:r?.apiUrl}).catch(console.error)}const a={...this.headers,"Content-Type":"application/json"};void 0!==r?.apiKey&&(a["x-api-key"]=r.apiKey);const i=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${r?.apiUrl??this.apiUrl}/runs/${e}`,{method:"PATCH",headers:a,body:(0,b.serialize)(t,`Serializing payload to update run with id: ${e}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(i,"update run",!0)}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){(0,h.assertUuid)(e);let r=await this._get(`/runs/${e}`);return t&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:t,projectOpts:r}){if(void 0!==t){let e;e=t.session_id?t.session_id:r?.projectName?(await this.readProject({projectName:r?.projectName})).id:r?.projectId?r?.projectId:(await this.readProject({projectName:(0,p.getLangSmithEnvironmentVariable)("PROJECT")||"default"})).id;const n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${e}/r/${t.id}?poll=true`}if(void 0!==e){const t=await this.readRun(e);if(!t.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${t.app_path}`}throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await async function(e){const t=[];for await(const r of e)t.push(r);return t}(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},n={};t.sort((e,t)=>(e?.dotted_order??"").localeCompare(t?.dotted_order??""));for(const a of t){if(null===a.parent_run_id||void 0===a.parent_run_id)throw new Error(`Child run ${a.id} has no parent`);a.dotted_order?.startsWith(e.dotted_order??"")&&a.id!==e.id&&(a.parent_run_id in r||(r[a.parent_run_id]=[]),r[a.parent_run_id].push(a),n[a.id]=a)}e.child_runs=r[e.id]||[];for(const t in r)t!==e.id&&(n[t].child_runs=r[t]);return e}async*listRuns(e){const{projectId:t,projectName:r,parentRunId:n,traceId:a,referenceExampleId:i,startTime:s,executionOrder:o,isRoot:l,runType:c,error:d,id:u,query:p,filter:m,traceFilter:h,treeFilter:f,limit:g,select:y,order:v}=e;let b=[];if(t&&(b=Array.isArray(t)?t:[t]),r){const e=Array.isArray(r)?r:[r],t=await Promise.all(e.map(e=>this.readProject({projectName:e}).then(e=>e.id)));b.push(...t)}const _={session:b.length?b:null,run_type:c,reference_example:i,query:p,filter:m,trace_filter:h,tree_filter:f,execution_order:o,parent_run:n,start_time:s?s.toISOString():null,error:d,id:u,limit:g,trace:a,select:y||["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],is_root:l,order:v};let w=0;for await(const e of this._getCursorPaginatedList("/runs/query",_))if(g){if(w>=g)break;if(e.length+w>g){const t=e.slice(0,g-w);yield*t;break}w+=e.length,yield*e}else yield*e}async*listGroupRuns(e){const{projectId:t,projectName:r,groupBy:n,filter:a,startTime:i,endTime:s,limit:o,offset:l}=e,c={session_id:t||(await this.readProject({projectName:r})).id,group_by:n,filter:a,start_time:i?i.toISOString():null,end_time:s?s.toISOString():null,limit:Number(o)||100};let d=Number(l)||0;const u="/runs/group",p=`${this.apiUrl}${u}`;for(;;){const e={...c,offset:d},t=Object.fromEntries(Object.entries(e).filter(([e,t])=>void 0!==t)),r=await this.caller.call((0,v._getFetchImplementation)(),p,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(r,`Failed to fetch ${u}`);const n=await r.json(),{groups:a,total:i}=n;if(0===a.length)break;for(const e of a)yield e;if(d+=a.length,d>=i)break}}async getRunStats({id:e,trace:t,parentRun:r,runType:n,projectNames:a,projectIds:i,referenceExampleIds:s,startTime:o,endTime:l,error:c,query:d,filter:u,traceFilter:p,treeFilter:m,isRoot:h,dataSourceType:f}){let g=i||[];a&&(g=[...i||[],...await Promise.all(a.map(e=>this.readProject({projectName:e}).then(e=>e.id)))]);const y={id:e,trace:t,parent_run:r,run_type:n,session:g,reference_example:s,start_time:o,end_time:l,error:c,query:d,filter:u,trace_filter:p,tree_filter:m,is_root:h,data_source_type:f},b=Object.fromEntries(Object.entries(y).filter(([e,t])=>void 0!==t)),_=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await _.json()}async shareRun(e,{shareId:t}={}){const r={run_id:e,share_token:t||o.v4()};(0,h.assertUuid)(e);const n=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await n.json();if(null===a||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){(0,h.assertUuid)(e);const t=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(t,"unshare run",!0)}async readRunSharedLink(e){(0,h.assertUuid)(e);const t=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await t.json();if(null!==r&&"share_token"in r)return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){const r=new URLSearchParams({share_token:e});if(void 0!==t)for(const e of t)r.append("id",e);(0,h.assertUuid)(e);const n=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await n.json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),(0,h.assertUuid)(e);const r=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);const r={dataset_id:e};(0,h.assertUuid)(e);const n=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await n.json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){(0,h.assertUuid)(e);const t=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(t,"unshare dataset",!0)}async readSharedDataset(e){(0,h.assertUuid)(e);const t=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await t.json()}async listSharedExamples(e,t){const r={};t?.exampleIds&&(r.id=t.exampleIds);const n=new URLSearchParams;Object.entries(r).forEach(([e,t])=>{Array.isArray(t)?t.forEach(t=>n.append(e,t)):n.append(e,t)});const a=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/public/${e}/examples?${n.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),i=await a.json();if(!a.ok){if("detail"in i)throw new Error(`Failed to list shared examples.\nStatus: ${a.status}\nMessage: ${Array.isArray(i.detail)?i.detail.join("\n"):"Unspecified error"}`);throw new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`)}return i.map(e=>({...e,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:t=null,metadata:r=null,upsert:n=!1,projectExtra:a=null,referenceDatasetId:i=null}){const s=n?"?upsert=true":"",o=`${this.apiUrl}/sessions${s}`,l=a||{};r&&(l.metadata=r);const c={name:e,extra:l,description:t};null!==i&&(c.reference_dataset_id=i);const d=await this.caller.call((0,v._getFetchImplementation)(this.debug),o,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(d,"create project"),await d.json()}async updateProject(e,{name:t=null,description:r=null,metadata:n=null,projectExtra:a=null,endTime:i=null}){const s=`${this.apiUrl}/sessions/${e}`;let o=a;n&&(o={...o||{},metadata:n});const l={name:t,extra:o,description:r,end_time:i?new Date(i).toISOString():null},c=await this.caller.call((0,v._getFetchImplementation)(this.debug),s,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:t}){let r="/sessions";const n=new URLSearchParams;if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==e)(0,h.assertUuid)(e),r+=`/${e}`;else{if(void 0===t)throw new Error("Must provide projectName or projectId");n.append("name",t)}const a=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}${r}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const e=await a.json();return!!a.ok&&(!Array.isArray(e)||e.length>0)}catch(e){return!1}}async readProject({projectId:e,projectName:t,includeStats:r}){let n="/sessions";const a=new URLSearchParams;if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==e)(0,h.assertUuid)(e),n+=`/${e}`;else{if(void 0===t)throw new Error("Must provide projectName or projectId");a.append("name",t)}void 0!==r&&a.append("include_stats",r.toString());const i=await this._get(n,a);let s;if(Array.isArray(i)){if(0===i.length)throw new Error(`Project[id=${e}, name=${t}] not found`);s=i[0]}else s=i;return s}async getProjectUrl({projectId:e,projectName:t}){if(void 0===e&&void 0===t)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:t}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:t}){if(void 0===e&&void 0===t)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:t}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/datasets/${r.id}`}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:r,referenceDatasetId:n,referenceDatasetName:a,referenceFree:i,metadata:s}={}){const o=new URLSearchParams;if(void 0!==e)for(const t of e)o.append("id",t);if(void 0!==t&&o.append("name",t),void 0!==r&&o.append("name_contains",r),void 0!==n)o.append("reference_dataset",n);else if(void 0!==a){const e=await this.readDataset({datasetName:a});o.append("reference_dataset",e.id)}void 0!==i&&o.append("reference_free",i.toString()),void 0!==s&&o.append("metadata",JSON.stringify(s));for await(const e of this._getPaginated("/sessions",o))yield*e}async deleteProject({projectId:e,projectName:t}){let r;if(void 0===e&&void 0===t)throw new Error("Must provide projectName or projectId");if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");r=void 0===e?(await this.readProject({projectName:t})).id:e,(0,h.assertUuid)(r);const n=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(n,`delete session ${r} (${t})`,!0)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:n,description:a,dataType:i,name:s}){const o=`${this.apiUrl}/datasets/upload`,l=new FormData;l.append("file",e,t),r.forEach(e=>{l.append("input_keys",e)}),n.forEach(e=>{l.append("output_keys",e)}),a&&l.append("description",a),i&&l.append("data_type",i),s&&l.append("name",s);const c=await this.caller.call((0,v._getFetchImplementation)(this.debug),o,{method:"POST",headers:this.headers,body:l,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(c,"upload CSV"),await c.json()}async createDataset(e,{description:t,dataType:r,inputsSchema:n,outputsSchema:a,metadata:i}={}){const s={name:e,description:t,extra:i?{metadata:i}:void 0};r&&(s.data_type=r),n&&(s.inputs_schema_definition=n),a&&(s.outputs_schema_definition=a);const o=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(o,"create dataset"),await o.json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const n=new URLSearchParams({limit:"1"});if(e&&t)throw new Error("Must provide either datasetName or datasetId, not both");if(e)(0,h.assertUuid)(e),r+=`/${e}`;else{if(!t)throw new Error("Must provide datasetName or datasetId");n.append("name",t)}const a=await this._get(r,n);let i;if(Array.isArray(a)){if(0===a.length)throw new Error(`Dataset[id=${e}, name=${t}] not found`);i=a[0]}else i=a;return i}async hasDataset({datasetId:e,datasetName:t}){try{return await this.readDataset({datasetId:e,datasetName:t}),!0}catch(e){if(e instanceof Error&&e.message.toLocaleLowerCase().includes("not found"))return!1;throw e}}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:r,toVersion:n}){let a=e;if(void 0===a&&void 0===t)throw new Error("Must provide either datasetName or datasetId");if(void 0!==a&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");void 0===a&&(a=(await this.readDataset({datasetName:t})).id);const i=new URLSearchParams({from_version:"string"==typeof r?r:r.toISOString(),to_version:"string"==typeof n?n:n.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,i)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){if(void 0!==e);else{if(void 0===t)throw new Error("Must provide either datasetName or datasetId");e=(await this.readDataset({datasetName:t})).id}const r=await this._getResponse(`/datasets/${e}/openai_ft`);return(await r.text()).trim().split("\n").map(e=>JSON.parse(e))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:n,datasetNameContains:a,metadata:i}={}){const s=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(void 0!==r)for(const e of r)s.append("id",e);void 0!==n&&s.append("name",n),void 0!==a&&s.append("name_contains",a),void 0!==i&&s.append("metadata",JSON.stringify(i));for await(const e of this._getPaginated("/datasets",s))yield*e}async updateDataset(e){const{datasetId:t,datasetName:r,...n}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const a=t??(await this.readDataset({datasetName:r})).id;(0,h.assertUuid)(a);const i=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(i,"update dataset"),await i.json()}async updateDatasetTag(e){const{datasetId:t,datasetName:r,asOf:n,tag:a}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const i=t??(await this.readDataset({datasetName:r})).id;(0,h.assertUuid)(i);const s=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${i}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:"string"==typeof n?n:n.toISOString(),tag:a}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(s,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",n=e;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t&&(n=(await this.readDataset({datasetName:t})).id),void 0===n)throw new Error("Must provide datasetName or datasetId");(0,h.assertUuid)(n),r+=`/${n}`;const a=await this.caller.call((0,v._getFetchImplementation)(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(a,`delete ${r}`),await a.json()}async indexDataset({datasetId:e,datasetName:t,tag:r}){let n=e;if(!n&&!t)throw new Error("Must provide either datasetName or datasetId");if(n&&t)throw new Error("Must provide either datasetName or datasetId, not both");n||(n=(await this.readDataset({datasetName:t})).id),(0,h.assertUuid)(n);const a={tag:r},i=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${n}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(i,"index dataset"),await i.json()}async similarExamples(e,t,r,{filter:n}={}){const a={limit:r,inputs:e};void 0!==n&&(a.filter=n),(0,h.assertUuid)(t);const i=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(i,"fetch similar examples"),(await i.json()).examples}async createExample(e,t,r){if(I(e)&&(void 0!==t||void 0!==r))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let n=t?r?.datasetId:e.dataset_id;const a=t?r?.datasetName:e.dataset_name;if(void 0===n&&void 0===a)throw new Error("Must provide either datasetName or datasetId");if(void 0!==n&&void 0!==a)throw new Error("Must provide either datasetName or datasetId, not both");void 0===n&&(n=(await this.readDataset({datasetName:a})).id);const i=(t?r?.createdAt:e.created_at)||new Date;let s;s=I(e)?e:{inputs:e,outputs:t,created_at:i?.toISOString(),id:r?.exampleId,metadata:r?.metadata,split:r?.split,source_run_id:r?.sourceRunId,use_source_run_io:r?.useSourceRunIO,use_source_run_attachments:r?.useSourceRunAttachments,attachments:r?.attachments};const l=await this._uploadExamplesMultipart(n,[s]);return await this.readExample(l.example_ids?.[0]??o.v4())}async createExamples(e){if(Array.isArray(e)){if(0===e.length)return[];const t=e;let r=t[0].dataset_id;const n=t[0].dataset_name;if(void 0===r&&void 0===n)throw new Error("Must provide either datasetName or datasetId");if(void 0!==r&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");void 0===r&&(r=(await this.readDataset({datasetName:n})).id);const a=await this._uploadExamplesMultipart(r,t);return await Promise.all(a.example_ids.map(e=>this.readExample(e)))}const{inputs:t,outputs:r,metadata:n,splits:a,sourceRunIds:i,useSourceRunIOs:s,useSourceRunAttachments:o,attachments:l,exampleIds:c,datasetId:d,datasetName:u}=e;if(void 0===t)throw new Error("Must provide inputs when using legacy parameters");let p=d;const m=u;if(void 0===p&&void 0===m)throw new Error("Must provide either datasetName or datasetId");if(void 0!==p&&void 0!==m)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===p){const e=await this.readDataset({datasetName:m});p=e.id}const h=t.map((e,t)=>({dataset_id:p,inputs:e,outputs:r?.[t],metadata:n?.[t],split:a?.[t],id:c?.[t],attachments:l?.[t],source_run_id:i?.[t],use_source_run_io:s?.[t],use_source_run_attachments:o?.[t]})),f=await this._uploadExamplesMultipart(p,h);return await Promise.all(f.example_ids.map(e=>this.readExample(e)))}async createLLMExample(e,t,r){return this.createExample({input:e},{output:t},r)}async createChatExample(e,t,r){const n=e.map(e=>(0,u.isLangChainMessage)(e)?(0,u.convertLangChainMessageToExample)(e):e),a=(0,u.isLangChainMessage)(t)?(0,u.convertLangChainMessageToExample)(t):t;return this.createExample({input:n},{output:a},r)}async readExample(e){(0,h.assertUuid)(e);const t=`/examples/${e}`,r=await this._get(t),{attachment_urls:n,...a}=r,i=a;return n&&(i.attachments=Object.entries(n).reduce((e,[t,r])=>(e[t.slice(11)]={presigned_url:r.presigned_url,mime_type:r.mime_type},e),{})),i}async*listExamples({datasetId:e,datasetName:t,exampleIds:r,asOf:n,splits:a,inlineS3Urls:i,metadata:s,limit:o,offset:l,filter:c,includeAttachments:d}={}){let u;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)u=e;else{if(void 0===t)throw new Error("Must provide a datasetName or datasetId");u=(await this.readDataset({datasetName:t})).id}const p=new URLSearchParams({dataset:u}),m=n?"string"==typeof n?n:n?.toISOString():void 0;m&&p.append("as_of",m);const h=i??!0;if(p.append("inline_s3_urls",h.toString()),void 0!==r)for(const e of r)p.append("id",e);if(void 0!==a)for(const e of a)p.append("splits",e);if(void 0!==s){const e=JSON.stringify(s);p.append("metadata",e)}void 0!==o&&p.append("limit",o.toString()),void 0!==l&&p.append("offset",l.toString()),void 0!==c&&p.append("filter",c),!0===d&&["attachment_urls","outputs","metadata"].forEach(e=>p.append("select",e));let f=0;for await(const e of this._getPaginated("/examples",p)){for(const t of e){const{attachment_urls:e,...r}=t,n=r;e&&(n.attachments=Object.entries(e).reduce((e,[t,r])=>(e[t.slice(11)]={presigned_url:r.presigned_url,mime_type:r.mime_type||void 0},e),{})),yield n,f++}if(void 0!==o&&f>=o)break}}async deleteExample(e){(0,h.assertUuid)(e);const t=`/examples/${e}`,r=await this.caller.call((0,v._getFetchImplementation)(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(r,`delete ${t}`),await r.json()}async updateExample(e,t){let r,n,a;return r=t?e:e.id,(0,h.assertUuid)(r),n=t?{id:r,...t}:e,a=void 0!==n.dataset_id?n.dataset_id:(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(a,[n])}async updateExamples(e){let t;return t=void 0===e[0].dataset_id?(await this.readExample(e[0].id)).dataset_id:e[0].dataset_id,this._updateExamplesMultipart(t,e)}async readDatasetVersion({datasetId:e,datasetName:t,asOf:r,tag:n}){let a;if(a=e||(await this.readDataset({datasetName:t})).id,(0,h.assertUuid)(a),r&&n||!r&&!n)throw new Error("Exactly one of asOf and tag must be specified.");const i=new URLSearchParams;void 0!==r&&i.append("as_of","string"==typeof r?r:r.toISOString()),void 0!==n&&i.append("tag",n);const s=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${a}/version?${i.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(s,"read dataset version"),await s.json()}async listDatasetSplits({datasetId:e,datasetName:t,asOf:r}){let n;if(void 0===e&&void 0===t)throw new Error("Must provide dataset name or ID");if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");n=void 0===e?(await this.readDataset({datasetName:t})).id:e,(0,h.assertUuid)(n);const a=new URLSearchParams,i=r?"string"==typeof r?r:r?.toISOString():void 0;return i&&a.append("as_of",i),await this._get(`/datasets/${n}/splits`,a)}async updateDatasetSplits({datasetId:e,datasetName:t,splitName:r,exampleIds:n,remove:a=!1}){let i;if(void 0===e&&void 0===t)throw new Error("Must provide dataset name or ID");if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");i=void 0===e?(await this.readDataset({datasetName:t})).id:e,(0,h.assertUuid)(i);const s={split_name:r,examples:n.map(e=>((0,h.assertUuid)(e),e)),remove:a},o=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/${i}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(o,"update dataset splits",!0)}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:n,referenceExample:a}={loadChildRuns:!1}){let i;if((0,f.warnOnce)("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead."),"string"==typeof e)i=await this.readRun(e,{loadChildRuns:n});else{if("object"!=typeof e||!("id"in e))throw new Error("Invalid run type: "+typeof e);i=e}null!==i.reference_example_id&&void 0!==i.reference_example_id&&(a=await this.readExample(i.reference_example_id));const s=await t.evaluateRun(i,a),[o,l]=await this._logEvaluationFeedback(s,i,r);return l[0]}async createFeedback(e,t,{score:r,value:n,correction:a,comment:i,sourceInfo:s,feedbackSourceType:l="api",sourceRunId:c,feedbackId:d,feedbackConfig:u,projectId:p,comparativeExperimentId:m}){if(!e&&!p)throw new Error("One of runId or projectId must be provided");if(e&&p)throw new Error("Only one of runId or projectId can be provided");const f={type:l??"api",metadata:s??{}};void 0===c||void 0===f?.metadata||f.metadata.__run||(f.metadata.__run={run_id:c}),void 0!==f?.metadata&&void 0!==f.metadata.__run?.run_id&&(0,h.assertUuid)(f.metadata.__run.run_id);const g={id:d??o.v4(),run_id:e,key:t,score:O(r),value:n,correction:a,comment:i,feedback_source:f,comparative_experiment_id:m,feedbackConfig:u,session_id:p},b=`${this.apiUrl}/feedback`,_=await this.caller.call((0,v._getFetchImplementation)(this.debug),b,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(g),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(_,"create feedback",!0),g}async updateFeedback(e,{score:t,value:r,correction:n,comment:a}){const i={};null!=t&&(i.score=O(t)),null!=r&&(i.value=r),null!=n&&(i.correction=n),null!=a&&(i.comment=a),(0,h.assertUuid)(e);const s=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(s,"update feedback",!0)}async readFeedback(e){(0,h.assertUuid)(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){(0,h.assertUuid)(e);const t=`/feedback/${e}`,r=await this.caller.call((0,v._getFetchImplementation)(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(r,`delete ${t}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:r}={}){const n=new URLSearchParams;if(e&&n.append("run",e.join(",")),t)for(const e of t)n.append("key",e);if(r)for(const e of r)n.append("source",e);for await(const e of this._getPaginated("/feedback",n))yield*e}async createPresignedFeedbackToken(e,t,{expiration:r,feedbackConfig:n}={}){const a={run_id:e,feedback_key:t,feedback_config:n};r?"string"==typeof r?a.expires_at=r:(r?.hours||r?.minutes||r?.days)&&(a.expires_in=r):a.expires_in={hours:3};const i=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await i.json()}async createComparativeExperiment({name:e,experimentIds:t,referenceDatasetId:r,createdAt:n,description:a,metadata:i,id:s}){if(0===t.length)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:t[0]})).reference_dataset_id),null==!r)throw new Error("A reference dataset is required");const o={id:s,name:e,experiment_ids:t,reference_dataset_id:r,description:a,created_at:(n??new Date)?.toISOString(),extra:{}};i&&(o.extra.metadata=i);const l=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await l.json()}async*listPresignedFeedbackTokens(e){(0,h.assertUuid)(e);const t=new URLSearchParams({run_id:e});for await(const e of this._getPaginated("/feedback/tokens",t))yield*e}_selectEvalResults(e){let t;return t="results"in e?e.results:Array.isArray(e)?e:[e],t}async _logEvaluationFeedback(e,t,r){const n=this._selectEvalResults(e),a=[];for(const e of n){let n=r||{};e.evaluatorInfo&&(n={...e.evaluatorInfo,...n});let i=null;e.targetRunId?i=e.targetRunId:t&&(i=t.id),a.push(await this.createFeedback(i,e.key,{score:e.score,value:e.value,comment:e.comment,correction:e.correction,sourceInfo:n,sourceRunId:e.sourceRunId,feedbackConfig:e.feedbackConfig,feedbackSourceType:"model"}))}return[n,a]}async logEvaluationFeedback(e,t,r){const[n]=await this._logEvaluationFeedback(e,t,r);return n}async*listAnnotationQueues(e={}){const{queueIds:t,name:r,nameContains:n,limit:a}=e,i=new URLSearchParams;t&&t.forEach((e,t)=>{(0,h.assertUuid)(e,`queueIds[${t}]`),i.append("ids",e)}),r&&i.append("name",r),n&&i.append("name_contains",n),i.append("limit",(void 0!==a?Math.min(a,100):100).toString());let s=0;for await(const e of this._getPaginated("/annotation-queues",i))if(yield*e,s++,void 0!==a&&s>=a)break}async createAnnotationQueue(e){const{name:t,description:r,queueId:n,rubricInstructions:a}=e,i={name:t,description:r,id:n||o.v4(),rubric_instructions:a},s=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(i).filter(([e,t])=>void 0!==t))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(s,"create annotation queue"),await s.json()}async readAnnotationQueue(e){const t=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,h.assertUuid)(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(t,"read annotation queue"),await t.json()}async updateAnnotationQueue(e,t){const{name:r,description:n,rubricInstructions:a}=t,i=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,h.assertUuid)(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:n,rubric_instructions:a}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(i,"update annotation queue")}async deleteAnnotationQueue(e){const t=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,h.assertUuid)(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){const r=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,h.assertUuid)(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map((e,t)=>(0,h.assertUuid)(e,`runIds[${t}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){const r=`/annotation-queues/${(0,h.assertUuid)(e,"queueId")}/run`,n=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}${r}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(n,"get run from annotation queue"),await n.json()}async deleteRunFromAnnotationQueue(e,t){const r=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,h.assertUuid)(e,"queueId")}/runs/${(0,h.assertUuid)(t,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const t=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/annotation-queues/${(0,h.assertUuid)(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(t,"get size from annotation queue"),await t.json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return"-"==e||t.tenant_handle===e}async _ownerConflictError(e,t){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.\n\n      Current tenant: ${r.tenant_handle}\n\n      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const t=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await t.json();if(!t.ok){const e="string"==typeof r.detail?r.detail:JSON.stringify(r.detail),n=new Error(`Error ${t.status}: ${t.statusText}\n${e}`);throw n.statusCode=t.status,n}if(0!==r.commits.length)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[r,n,a]=(0,g.parsePromptIdentifier)(e),i=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/likes/${r}/${n}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(i,(t?"like":"unlike")+" prompt"),await i.json()}async _getPromptUrl(e){const[t,r,n]=(0,g.parsePromptIdentifier)(e);if(await this._currentTenantIsOwner(t)){const e=await this._getSettings();return"latest"!==n?`${this.getHostUrl()}/prompts/${r}/${n.substring(0,8)}?organizationId=${e.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${e.id}`}return"latest"!==n?`${this.getHostUrl()}/hub/${t}/${r}/${n.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,e=>e.commits))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",e?.sortField??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!e?.isArchived).toString()),void 0!==e?.isPublic&&t.append("is_public",e.isPublic.toString()),e?.query&&t.append("query",e.query);for await(const e of this._getPaginated("/repos",t,e=>e.repos))yield*e}async getPrompt(e){const[t,r,n]=(0,g.parsePromptIdentifier)(e),a=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/repos/${t}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(404===a.status)return null;await(0,y.raiseForStatus)(a,"get prompt");const i=await a.json();return i.repo?i.repo:null}async createPrompt(e,t){const r=await this._getSettings();if(t?.isPublic&&!r.tenant_handle)throw new Error("Cannot create a public prompt without first\n\n        creating a LangChain Hub handle.\n        You can add a handle by creating a public prompt at:\n\n        https://smith.langchain.com/prompts");const[n,a,i]=(0,g.parsePromptIdentifier)(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("create a prompt",n);const s={repo_handle:a,...t?.description&&{description:t.description},...t?.readme&&{readme:t.readme},...t?.tags&&{tags:t.tags},is_public:!!t?.isPublic},o=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(o,"create prompt");const{repo:l}=await o.json();return l}async createCommit(e,t,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,a,i]=(0,g.parsePromptIdentifier)(e),s="latest"!==r?.parentCommitHash&&r?.parentCommitHash?r?.parentCommitHash:await this._getLatestCommitHash(`${n}/${a}`),o={manifest:JSON.parse(JSON.stringify(t)),parent_commit:s},l=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/commits/${n}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(l,"create commit");const c=await l.json();return this._getPromptUrl(`${n}/${a}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updateExamplesMultipart(e,t=[]){return this._updateExamplesMultipart(e,t)}async _updateExamplesMultipart(e,t=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const e of t){const t=e.id,n={...e.metadata&&{metadata:e.metadata},...e.split&&{split:e.split}},a=(0,b.serialize)(n,`Serializing body for example with id: ${t}`),i=new Blob([a],{type:"application/json"});if(r.append(t,i),e.inputs){const n=(0,b.serialize)(e.inputs,`Serializing inputs for example with id: ${t}`),a=new Blob([n],{type:"application/json"});r.append(`${t}.inputs`,a)}if(e.outputs){const n=(0,b.serialize)(e.outputs,`Serializing outputs whle updating example with id: ${t}`),a=new Blob([n],{type:"application/json"});r.append(`${t}.outputs`,a)}if(e.attachments)for(const[n,a]of Object.entries(e.attachments)){let e,i;Array.isArray(a)?[e,i]=a:(e=a.mimeType,i=a.data);const s=new Blob([i],{type:`${e}; length=${i.byteLength}`});r.append(`${t}.attachment.${n}`,s)}if(e.attachments_operations){const n=(0,b.serialize)(e.attachments_operations,`Serializing attachments while updating example with id: ${t}`),a=new Blob([n],{type:"application/json"});r.append(`${t}.attachments_operations`,a)}}const n=e??t[0]?.dataset_id,a=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${n}/examples`)}`,{method:"PATCH",headers:this.headers,body:r});return await a.json()}async uploadExamplesMultipart(e,t=[]){return this._uploadExamplesMultipart(e,t)}async _uploadExamplesMultipart(e,t=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const e of t){const t=(e.id??o.v4()).toString(),n={created_at:e.created_at,...e.metadata&&{metadata:e.metadata},...e.split&&{split:e.split},...e.source_run_id&&{source_run_id:e.source_run_id},...e.use_source_run_io&&{use_source_run_io:e.use_source_run_io},...e.use_source_run_attachments&&{use_source_run_attachments:e.use_source_run_attachments}},a=(0,b.serialize)(n,`Serializing body for uploaded example with id: ${t}`),i=new Blob([a],{type:"application/json"});if(r.append(t,i),e.inputs){const n=(0,b.serialize)(e.inputs,`Serializing inputs for uploaded example with id: ${t}`),a=new Blob([n],{type:"application/json"});r.append(`${t}.inputs`,a)}if(e.outputs){const n=(0,b.serialize)(e.outputs,`Serializing outputs for uploaded example with id: ${t}`),a=new Blob([n],{type:"application/json"});r.append(`${t}.outputs`,a)}if(e.attachments)for(const[n,a]of Object.entries(e.attachments)){let e,i;Array.isArray(a)?[e,i]=a:(e=a.mimeType,i=a.data);const s=new Blob([i],{type:`${e}; length=${i.byteLength}`});r.append(`${t}.attachment.${n}`,s)}}const n=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}${this._getPlatformEndpointPath(`datasets/${e}/examples`)}`,{method:"POST",headers:this.headers,body:r});return await(0,y.raiseForStatus)(n,"upload examples"),await n.json()}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,n]=(0,g.parsePromptIdentifier)(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const a={};if(void 0!==t?.description&&(a.description=t.description),void 0!==t?.readme&&(a.readme=t.readme),void 0!==t?.tags&&(a.tags=t.tags),void 0!==t?.isPublic&&(a.is_public=t.isPublic),void 0!==t?.isArchived&&(a.is_archived=t.isArchived),0===Object.keys(a).length)throw new Error("No valid update options provided");const i=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/repos/${r}/${n}`,{method:"PATCH",body:JSON.stringify(a),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await(0,y.raiseForStatus)(i,"update prompt"),i.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[t,r,n]=(0,g.parsePromptIdentifier)(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);const a=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/repos/${t}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await a.json()}async pullPromptCommit(e,t){const[r,n,a]=(0,g.parsePromptIdentifier)(e),i=await this.caller.call((0,v._getFetchImplementation)(this.debug),`${this.apiUrl}/commits/${r}/${n}/${a}${t?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await(0,y.raiseForStatus)(i,"pull prompt commit");const s=await i.json();return{owner:r,repo:n,commit_hash:s.commit_hash,manifest:s.manifest,examples:s.examples}}async _pullPrompt(e,t){const r=await this.pullPromptCommit(e,{includeModel:t?.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,t){return await this.promptExists(e)?t&&Object.keys(t).some(e=>"object"!==e)&&await this.updatePrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}):await this.createPrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}),t?.object?await this.createCommit(e,t?.object,{parentCommitHash:t?.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,t={}){const{sourceApiUrl:r=this.apiUrl,datasetName:n}=t,[a,i]=this.parseTokenOrUrl(e,r),s=new A({apiUrl:a,apiKey:"placeholder"}),o=await s.readSharedDataset(i),l=n||o.name;try{if(await this.hasDataset({datasetId:l}))return void console.log(`Dataset ${l} already exists in your tenant. Skipping.`)}catch(e){}const c=await s.listSharedExamples(i),d=await this.createDataset(l,{description:o.description,dataType:o.data_type||"kv",inputsSchema:o.inputs_schema_definition??void 0,outputsSchema:o.outputs_schema_definition??void 0});try{await this.createExamples({inputs:c.map(e=>e.inputs),outputs:c.flatMap(e=>e.outputs?[e.outputs]:[]),datasetId:d.id})}catch(e){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),e}}parseTokenOrUrl(e,t,r=2,n="dataset"){try{return(0,h.assertUuid)(e),[t,e]}catch(e){}try{const a=new URL(e).pathname.split("/").filter(e=>""!==e);if(a.length>=r)return[t,a[a.length-r]];throw new Error(`Invalid public ${n} URL: ${e}`)}catch(t){throw new Error(`Invalid public ${n} URL or token: ${e}`)}}async awaitPendingTraceBatches(){if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()]),void 0!==this.langSmithToOTELTranslator&&await((0,c.getDefaultOTLPTracerComponents)()?.DEFAULT_LANGSMITH_SPAN_PROCESSOR?.forceFlush())}}function I(e){return"dataset_id"in e||"dataset_name"in e}t.Client=A},71308:(e,t,r)=>{"use strict";var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.LineDecoder=void 0,t.findDoubleNewlineIndex=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1};const i=r(47984),s=r(6117);class o{constructor(){n.set(this,void 0),a.set(this,void 0),i.__classPrivateFieldSet(this,n,new Uint8Array,"f"),i.__classPrivateFieldSet(this,a,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?(0,s.encodeUTF8)(e):e;i.__classPrivateFieldSet(this,n,(0,s.concatBytes)([i.__classPrivateFieldGet(this,n,"f"),t]),"f");const r=[];let o;for(;null!=(o=l(i.__classPrivateFieldGet(this,n,"f"),i.__classPrivateFieldGet(this,a,"f")));){if(o.carriage&&null==i.__classPrivateFieldGet(this,a,"f")){i.__classPrivateFieldSet(this,a,o.index,"f");continue}if(null!=i.__classPrivateFieldGet(this,a,"f")&&(o.index!==i.__classPrivateFieldGet(this,a,"f")+1||o.carriage)){r.push((0,s.decodeUTF8)(i.__classPrivateFieldGet(this,n,"f").subarray(0,i.__classPrivateFieldGet(this,a,"f")-1))),i.__classPrivateFieldSet(this,n,i.__classPrivateFieldGet(this,n,"f").subarray(i.__classPrivateFieldGet(this,a,"f")),"f"),i.__classPrivateFieldSet(this,a,null,"f");continue}const e=null!==i.__classPrivateFieldGet(this,a,"f")?o.preceding-1:o.preceding,t=(0,s.decodeUTF8)(i.__classPrivateFieldGet(this,n,"f").subarray(0,e));r.push(t),i.__classPrivateFieldSet(this,n,i.__classPrivateFieldGet(this,n,"f").subarray(o.index),"f"),i.__classPrivateFieldSet(this,a,null,"f")}return r}flush(){return i.__classPrivateFieldGet(this,n,"f").length?this.decode("\n"):[]}}function l(e,t){for(let r=t??0;r<e.length;r++){if(10===e[r])return{preceding:r,index:r+1,carriage:!1};if(13===e[r])return{preceding:r,index:r+1,carriage:!0}}return null}t.LineDecoder=o,n=new WeakMap,a=new WeakMap,o.NEWLINE_CHARS=new Set(["\n","\r"]),o.NEWLINE_REGEXP=/\r\n|[\n\r]/g},71374:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decompressResponsePolicyName=void 0,t.decompressResponsePolicy=function(){return{name:t.decompressResponsePolicyName,sendRequest:async(e,t)=>("HEAD"!==e.method&&e.headers.set("Accept-Encoding","gzip,deflate"),t(e))}},t.decompressResponsePolicyName="decompressResponsePolicy"},71485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(87752),a=r(39326),i=r(39962);t.default=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const s=(e=e||{}).random??e.rng?.()??(0,a.default)();if(s.length<16)throw new Error("Random bytes length must be >= 16");if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=s[e];return t}return(0,i.unsafeStringify)(s)}},71718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Jobs=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(33955)),s=r(33955),o=r(75552),l=r(54815);class c extends a.APIResource{constructor(){super(...arguments),this.checkpoints=new i.Checkpoints(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(l.path`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",o.CursorPage,{query:e,...t})}cancel(e,t){return this._client.post(l.path`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return this._client.getAPIList(l.path`/fine_tuning/jobs/${e}/events`,o.CursorPage,{query:t,...r})}pause(e,t){return this._client.post(l.path`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(l.path`/fine_tuning/jobs/${e}/resume`,t)}}t.Jobs=c,c.Checkpoints=s.Checkpoints},71724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionMessageChunk=t.FunctionMessage=void 0;const n=r(66267);class a extends n.BaseMessage{static lc_name(){return"FunctionMessage"}constructor(e,t){"string"==typeof e&&(e={content:e,name:t}),super(e)}_getType(){return"function"}}t.FunctionMessage=a;class i extends n.BaseMessageChunk{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}t.FunctionMessageChunk=i},72111:(e,t,r)=>{"use strict";const n=r(94641),a=r(13999),i=r(35580),s=r(54089),o=r(7059),l=r(25200);e.exports=(e,t,r,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,c);case"!=":return a(e,r,c);case">":return i(e,r,c);case">=":return s(e,r,c);case"<":return o(e,r,c);case"<=":return l(e,r,c);default:throw new TypeError(`Invalid operator: ${t}`)}}},72168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseReadonlyDef=void 0;const n=r(84769);t.parseReadonlyDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},72525:(e,t,r)=>{"use strict";const n=r(97638),a=r(50560);e.exports=(e,t,r)=>{const i=[];let s=null,o=null;const l=e.sort((e,t)=>a(e,t,r));for(const e of l)n(e,t,r)?(o=e,s||(s=e)):(o&&i.push([s,o]),o=null,s=null);s&&i.push([s,null]);const c=[];for(const[e,t]of i)e===t?c.push(e):t||e!==l[0]?t?e===l[0]?c.push(`<=${t}`):c.push(`${e} - ${t}`):c.push(`>=${e}`):c.push("*");const d=c.join(" || "),u="string"==typeof t.raw?t.raw:String(t);return d.length<u.length?d:t}},72854:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(47984).__exportStar(r(58092),t)},72950:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concat=async function(e){return function(){const t=e.map(e=>"function"==typeof e?e():e).map(l);return a.Readable.from(function(){return n.__asyncGenerator(this,arguments,function*(){var e,r,a,i;for(const c of t)try{for(var s,o=!0,l=(r=void 0,n.__asyncValues(c));!(e=(s=yield n.__await(l.next())).done);o=!0){i=s.value,o=!1;const e=i;yield yield n.__await(e)}}catch(e){r={error:e}}finally{try{o||e||!(a=l.return)||(yield n.__await(a.call(l)))}finally{if(r)throw r.error}}})}())}};const n=r(31635),a=r(2203),i=r(73796);function s(){return n.__asyncGenerator(this,arguments,function*(){const e=this.getReader();try{for(;;){const{done:t,value:r}=yield n.__await(e.read());if(t)return yield n.__await(void 0);yield yield n.__await(r)}}finally{e.releaseLock()}})}function o(e){return e instanceof ReadableStream?((t=e)[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=s.bind(t)),t.values||(t.values=s.bind(t)),a.Readable.fromWeb(e)):e;var t}function l(e){return e instanceof Uint8Array?a.Readable.from(Buffer.from(e)):(0,i.isBlob)(e)?o(e.stream()):o(e)}},73054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCompletionRunner=t.ChatCompletionStream=t.ParsingToolFunction=t.ChatCompletionStreamingRunner=t.Completions=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(19501)),s=r(19501),o=r(75552),l=r(54815),c=r(44648),d=r(67730),u=r(95126),p=r(63357);class m extends a.APIResource{constructor(){super(...arguments),this.messages=new i.Messages(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(l.path`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(l.path`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/chat/completions",o.CursorPage,{query:e,...t})}delete(e,t){return this._client.delete(l.path`/chat/completions/${e}`,t)}parse(e,t){return(0,p.validateInputTools)(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(t=>(0,p.parseChatCompletion)(t,e))}runTools(e,t){return e.stream?d.ChatCompletionStreamingRunner.runTools(this._client,e,t):c.ChatCompletionRunner.runTools(this._client,e,t)}stream(e,t){return u.ChatCompletionStream.createChatCompletion(this._client,e,t)}}t.Completions=m;var h=r(67730);Object.defineProperty(t,"ChatCompletionStreamingRunner",{enumerable:!0,get:function(){return h.ChatCompletionStreamingRunner}});var f=r(64691);Object.defineProperty(t,"ParsingToolFunction",{enumerable:!0,get:function(){return f.ParsingToolFunction}});var g=r(95126);Object.defineProperty(t,"ChatCompletionStream",{enumerable:!0,get:function(){return g.ChatCompletionStream}});var y=r(44648);Object.defineProperty(t,"ChatCompletionRunner",{enumerable:!0,get:function(){return y.ChatCompletionRunner}}),m.Messages=s.Messages},73187:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.systemErrorRetryPolicyName=void 0,t.systemErrorRetryPolicy=function(e={}){return(0,n.systemErrorRetryPolicy)(e)};const n=r(17445);t.systemErrorRetryPolicyName=n.systemErrorRetryPolicyName},73290:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(30228),a=r(56641),i=r(54774),s=()=>{},o=new a.TimeoutError;t.default=class extends n{constructor(e){var t,r,n,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=s,this._resolveIdle=s,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:i.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(a=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==a?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((r,n)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===t.timeout?e():a.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(o)});r(await i)}catch(e){n(e)}this._next()},t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},73346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allSettledWithThrow=void 0,t.allSettledWithThrow=async e=>{const t=await Promise.allSettled(e),r=t.filter(e=>"rejected"===e.status);if(r.length){for(const e of r)console.error(e.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const n=[];for(const e of t)"fulfilled"===e.status&&n.push(e.value);return n}},73413:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const n=r(97994);t.logger=(0,n.createClientLogger)("core-rest-pipeline")},73476:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.randomUUID=function(){return i()};const a=r(77598),i="function"==typeof(null===(n=null===globalThis||void 0===globalThis?void 0:globalThis.crypto)||void 0===n?void 0:n.randomUUID)?globalThis.crypto.randomUUID.bind(globalThis.crypto):a.randomUUID},73570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Models=void 0;const n=r(24472),a=r(24384),i=r(2758),s=r(64735);class o extends n.APIResource{retrieve(e,t={},r){const{betas:n}=t??{};return this._client.get(s.path`/v1/models/${e}`,{...r,headers:(0,i.buildHeaders)([{...null!=n?.toString()?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}list(e={},t){const{betas:r,...n}=e??{};return this._client.getAPIList("/v1/models",a.Page,{query:n,...t,headers:(0,i.buildHeaders)([{...null!=r?.toString()?{"anthropic-beta":r?.toString()}:void 0},t?.headers])})}}t.Models=o},73796:(e,t)=>{"use strict";function r(e){return Boolean(e&&"function"==typeof e.pipe)}function n(e){return Boolean(e&&"function"==typeof e.getReader&&"function"==typeof e.tee)}function a(e){return r(e)||n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeReadableStream=r,t.isWebReadableStream=n,t.isBinaryBody=function(e){return void 0!==e&&(e instanceof Uint8Array||a(e)||"function"==typeof e||e instanceof Blob)},t.isReadableStream=a,t.isBlob=function(e){return"function"==typeof e.stream}},73838:(e,t,r)=>{"use strict";const n=r(16928),a=r(98737),{pathExists:i}=r(29288),s=r(41236).fromPromise;e.exports={symlinkPaths:s(async function(e,t){if(n.isAbsolute(e)){try{await a.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:e}}const r=n.dirname(t),s=n.join(r,e);if(await i(s))return{toCwd:s,toDst:e};try{await a.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureSymlink"),e}return{toCwd:e,toDst:n.relative(r,e)}}),symlinkPathsSync:function(e,t){if(n.isAbsolute(e)){if(!a.existsSync(e))throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}const r=n.dirname(t),i=n.join(r,e);if(a.existsSync(i))return{toCwd:i,toDst:e};if(!a.existsSync(e))throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:n.relative(r,e)}}}},73850:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sessions=void 0;const n=r(82040),a=r(262);class i extends n.APIResource{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:(0,a.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}t.Sessions=i},74265:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){console.log("DeepWiki extension is now active!"),console.log("Extension context:",e.extensionPath);try{console.log("Initializing managers...");const t=new d.ConfigManager(e),r=t.getConfiguration();console.log("Configuration loaded:",{provider:r.provider,hasApiKey:!!r.apiKey,model:r.model,workspaceId:r.workspaceId});const n=new u.ProjectAnalyzer(r.excludedDirs,r.excludedFiles);console.log("ProjectAnalyzer initialized"),console.log("=== WikiGenerator Initialization Debug ==="),console.log("Config passed to WikiGenerator:",JSON.stringify(r,null,2)),console.log("Provider:",r.provider),console.log("API Key exists:",!!r.apiKey),console.log("API Key length:",r.apiKey?r.apiKey.length:0),console.log("=== End WikiGenerator Debug ===");const a=new p.WikiGenerator(r);console.log("WikiGenerator initialized successfully");const i=new m.CacheManager(e);console.log("CacheManager initialized");const s=v(),c=s?s.uri.fsPath:"";console.log("Initializing RAGManager with config provider:",r.provider);const g=new h.RAGManager(r,c);console.log("RAGManager initialized successfully"),console.log("All managers initialized successfully");const y=o.window.createStatusBarItem(o.StatusBarAlignment.Left,100);y.text="$(book) DeepWiki",y.tooltip="Click to generate wiki",y.command="deepwiki.generateWiki",y.show(),e.subscriptions.push(y),console.log("Registering generateWiki command...");const b=o.commands.registerCommand("deepwiki.generateWiki",async()=>{console.log("generateWiki command executed");try{await async function(e,t,r,n,a){const i=v();if(!i)return;const s=i.uri.fsPath,c=(l.join(s,".deepwiki"),e.getConfiguration());if(!c.apiKey||!c.provider)return void("Open Configuration"===await o.window.showWarningMessage("DeepWiki configuration is incomplete. Please configure your AI provider settings.","Open Configuration","Cancel")&&await e.openConfigurationPanel());if(await n.hasCache(s)){const e=await o.window.showInformationMessage("Found existing wiki cache. What would you like to do?","Use Cache","Regenerate","Cancel");if("Cancel"===e)return;if("Use Cache"===e)return void await f(n,s)}await o.window.withProgress({location:o.ProgressLocation.Notification,title:"Generating DeepWiki",cancellable:!0},async(e,i)=>{try{a.text="$(sync~spin) Generating Wiki...";let l=0;e.report({increment:0,message:"Analyzing project structure..."});const c=await t.analyzeProject(s,(t,r)=>{const n=Math.round(.4*t),a=n-l;a>0&&(e.report({increment:a,message:r}),l=n)});if(i.isCancellationRequested)return;const d=l;e.report({increment:0,message:"Generating documentation..."});const u=await r.generateWiki(c,t=>{const r=d+Math.round(.45*t),n=r-l;n>0&&(e.report({increment:n,message:`Generating documentation... ${Math.round(t)}%`}),l=r)});if(i.isCancellationRequested)return;const p=95-l;p>0&&(e.report({increment:p,message:"Saving wiki data..."}),l=95),await n.saveWikiCache(s,u,c);const m=100-l;m>0&&e.report({increment:m,message:"Opening wiki..."}),await f(n,s),o.window.showInformationMessage("DeepWiki generated successfully!")}catch(e){throw e}finally{a.text="$(book) DeepWiki"}})}(t,n,a,i,y)}catch(e){console.error("Error in generateWiki:",e),o.window.showErrorMessage(`DeepWiki Error: ${e instanceof Error?e.message:String(e)}`)}});console.log("Registering openConfig command...");const _=o.commands.registerCommand("deepwiki.openConfig",async()=>{console.log("openConfig command executed");try{await t.openConfigurationPanel()}catch(e){console.error("Error in openConfig:",e),o.window.showErrorMessage(`Configuration Error: ${e instanceof Error?e.message:String(e)}`)}});console.log("Registering clearCache command...");const w=o.commands.registerCommand("deepwiki.clearCache",async()=>{console.log("clearCache command executed");try{const e=v();if(!e)return;await i.clearProjectCache(e.uri.fsPath),o.window.showInformationMessage("DeepWiki cache cleared successfully!")}catch(e){console.error("Error in clearCache:",e),o.window.showErrorMessage(`Failed to clear cache: ${e instanceof Error?e.message:String(e)}`)}});console.log("Registering startRAGChat command...");const P=o.commands.registerCommand("deepwiki.startRAGChat",async()=>{console.log("startRAGChat command executed");try{await async function(e,t,r){const n=v();if(!n)return;const a=n.uri.fsPath,i=e.getConfiguration();if(!i.apiKey||!i.provider)return void("Open Configuration"===await o.window.showWarningMessage("RAG Chat requires AI provider configuration. Please configure your settings.","Open Configuration","Cancel")&&await e.openConfigurationPanel());await r.hasCache(a)?await o.window.withProgress({location:o.ProgressLocation.Notification,title:"Initializing RAG Chat",cancellable:!1},async e=>{e.report({increment:0,message:"Loading project data..."});try{await t.prepareRetriever(a),e.report({increment:100,message:"RAG initialized successfully"}),function(e){const t=o.window.createWebviewPanel("deepwikiRAGChat","DeepWiki RAG Chat",o.ViewColumn.Two,{enableScripts:!0,retainContextWhenHidden:!0});t.webview.html="\n        <!DOCTYPE html>\n        <html lang=\"en\">\n        <head>\n            <meta charset=\"UTF-8\">\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <title>DeepWiki RAG Chat</title>\n            <style>\n                body {\n                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n                    margin: 0;\n                    padding: 0;\n                    height: 100vh;\n                    background-color: var(--vscode-editor-background);\n                    color: var(--vscode-editor-foreground);\n                    display: flex;\n                    flex-direction: column;\n                }\n                .header {\n                    padding: 15px 20px;\n                    border-bottom: 1px solid var(--vscode-panel-border);\n                    background-color: var(--vscode-sideBar-background);\n                }\n                .title {\n                    font-size: 1.2em;\n                    font-weight: bold;\n                    margin: 0;\n                }\n                .subtitle {\n                    font-size: 0.9em;\n                    color: var(--vscode-descriptionForeground);\n                    margin: 5px 0 0 0;\n                }\n                .chat-container {\n                    flex: 1;\n                    display: flex;\n                    flex-direction: column;\n                    overflow: hidden;\n                }\n                .messages {\n                    flex: 1;\n                    overflow-y: auto;\n                    padding: 20px;\n                }\n                .message {\n                    margin-bottom: 20px;\n                    padding: 15px;\n                    border-radius: 8px;\n                }\n                .user-message {\n                    background-color: var(--vscode-inputOption-activeBackground);\n                    margin-left: 20%;\n                }\n                .assistant-message {\n                    background-color: var(--vscode-editor-inactiveSelectionBackground);\n                    margin-right: 20%;\n                }\n                .message-content {\n                    white-space: pre-wrap;\n                    line-height: 1.5;\n                }\n                .message-sources {\n                    margin-top: 10px;\n                    padding-top: 10px;\n                    border-top: 1px solid var(--vscode-panel-border);\n                    font-size: 0.9em;\n                    color: var(--vscode-descriptionForeground);\n                }\n                .source-item {\n                    margin: 5px 0;\n                }\n                .input-container {\n                    padding: 20px;\n                    border-top: 1px solid var(--vscode-panel-border);\n                    background-color: var(--vscode-sideBar-background);\n                }\n                .input-row {\n                    display: flex;\n                    gap: 10px;\n                }\n                .query-input {\n                    flex: 1;\n                    padding: 10px;\n                    border: 1px solid var(--vscode-input-border);\n                    border-radius: 4px;\n                    background-color: var(--vscode-input-background);\n                    color: var(--vscode-input-foreground);\n                    font-size: 14px;\n                }\n                .send-button {\n                    padding: 10px 20px;\n                    background-color: var(--vscode-button-background);\n                    color: var(--vscode-button-foreground);\n                    border: none;\n                    border-radius: 4px;\n                    cursor: pointer;\n                    font-size: 14px;\n                }\n                .send-button:hover {\n                    background-color: var(--vscode-button-hoverBackground);\n                }\n                .send-button:disabled {\n                    opacity: 0.5;\n                    cursor: not-allowed;\n                }\n                .loading {\n                    text-align: center;\n                    color: var(--vscode-descriptionForeground);\n                    font-style: italic;\n                    padding: 20px;\n                }\n                .stats {\n                    font-size: 0.8em;\n                    color: var(--vscode-descriptionForeground);\n                }\n            </style>\n        </head>\n        <body>\n            <div class=\"header\">\n                <div class=\"title\">DeepWiki RAG Chat</div>\n                <div class=\"subtitle\">Ask questions about your project</div>\n                <div class=\"stats\" id=\"stats\">Loading...</div>\n            </div>\n            \n            <div class=\"chat-container\">\n                <div class=\"messages\" id=\"messages\">\n                    <div class=\"message assistant-message\">\n                        <div class=\"message-content\">Hello! I'm your project assistant. Ask me anything about your codebase and I'll help you understand it better.</div>\n                    </div>\n                </div>\n                \n                <div class=\"input-container\">\n                    <div class=\"input-row\">\n                        <input type=\"text\" class=\"query-input\" id=\"queryInput\" placeholder=\"Ask a question about your project...\" />\n                        <button class=\"send-button\" id=\"sendButton\" onclick=\"sendQuery()\">Send</button>\n                    </div>\n                </div>\n            </div>\n            \n            <script>\n                const vscode = acquireVsCodeApi();\n                let isLoading = false;\n                \n                // 获取统计信息\n                vscode.postMessage({ command: 'getStats' });\n                \n                // 处理消息\n                window.addEventListener('message', event => {\n                    const message = event.data;\n                    \n                    switch (message.command) {\n                        case 'response':\n                            addAssistantMessage(message.data);\n                            setLoading(false);\n                            break;\n                        case 'error':\n                            addErrorMessage(message.data.message);\n                            setLoading(false);\n                            break;\n                        case 'stats':\n                            updateStats(message.data);\n                            break;\n                    }\n                });\n                \n                function sendQuery() {\n                    const input = document.getElementById('queryInput');\n                    const query = input.value.trim();\n                    \n                    if (!query || isLoading) {\n                        return;\n                    }\n                    \n                    addUserMessage(query);\n                    input.value = '';\n                    setLoading(true);\n                    \n                    vscode.postMessage({\n                        command: 'query',\n                        text: query\n                    });\n                }\n                \n                function addUserMessage(text) {\n                    const messages = document.getElementById('messages');\n                    const messageDiv = document.createElement('div');\n                    messageDiv.className = 'message user-message';\n                    messageDiv.innerHTML = '<div class=\"message-content\">' + escapeHtml(text) + '</div>';\n                    messages.appendChild(messageDiv);\n                    messages.scrollTop = messages.scrollHeight;\n                }\n                \n                function addAssistantMessage(data) {\n                    const messages = document.getElementById('messages');\n                    const messageDiv = document.createElement('div');\n                    messageDiv.className = 'message assistant-message';\n                    \n                    let sourcesHtml = '';\n                    if (data.sources && data.sources.length > 0) {\n                        sourcesHtml = '<div class=\"message-sources\"><strong>Sources:</strong>';\n                        data.sources.forEach(source => {\n                            sourcesHtml += '<div class=\"source-item\">📄 ' + source.title + ' (' + source.path + ')</div>';\n                        });\n                        sourcesHtml += '</div>';\n                    }\n                    \n                    messageDiv.innerHTML = '<div class=\"message-content\">' + escapeHtml(data.answer) + '</div>' + sourcesHtml;\n                    \n                    messages.appendChild(messageDiv);\n                    messages.scrollTop = messages.scrollHeight;\n                }\n                \n                function addErrorMessage(error) {\n                    const messages = document.getElementById('messages');\n                    const messageDiv = document.createElement('div');\n                    messageDiv.className = 'message assistant-message';\n                    messageDiv.innerHTML = '<div class=\"message-content\" style=\"color: var(--vscode-errorForeground);\">Error: ' + escapeHtml(error) + '</div>';\n                    messages.appendChild(messageDiv);\n                    messages.scrollTop = messages.scrollHeight;\n                }\n                \n                function setLoading(loading) {\n                    isLoading = loading;\n                    const button = document.getElementById('sendButton');\n                    const input = document.getElementById('queryInput');\n                    \n                    button.disabled = loading;\n                    input.disabled = loading;\n                    \n                    if (loading) {\n                        const messages = document.getElementById('messages');\n                        const loadingDiv = document.createElement('div');\n                        loadingDiv.className = 'loading';\n                        loadingDiv.id = 'loading';\n                        loadingDiv.textContent = 'Thinking...';\n                        messages.appendChild(loadingDiv);\n                        messages.scrollTop = messages.scrollHeight;\n                    } else {\n                        const loadingDiv = document.getElementById('loading');\n                        if (loadingDiv) {\n                            loadingDiv.remove();\n                        }\n                    }\n                }\n                \n                function updateStats(stats) {\n                    const statsDiv = document.getElementById('stats');\n                    statsDiv.textContent = 'Documents: ' + stats.documentsLoaded + ' | Initialized: ' + (stats.isInitialized ? 'Yes' : 'No');\n                }\n                \n                function escapeHtml(text) {\n                    const div = document.createElement('div');\n                    div.textContent = text;\n                    return div.innerHTML;\n                }\n                \n                // 回车发送\n                document.getElementById('queryInput').addEventListener('keypress', function(e) {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                        e.preventDefault();\n                        sendQuery();\n                    }\n                });\n            <\/script>\n        </body>\n        </html>\n    ",t.webview.onDidReceiveMessage(async r=>{switch(r.command){case"query":try{const n=await e.query(r.text);t.webview.postMessage({command:"response",data:{answer:n.answer,sources:n.sources||[],timestamp:n.timestamp||Date.now()}})}catch(e){t.webview.postMessage({command:"error",data:{message:e instanceof Error?e.message:String(e)}})}break;case"getStats":const n=e.getStats();t.webview.postMessage({command:"stats",data:n})}})}(t)}catch(e){throw new Error(`Failed to initialize RAG: ${e instanceof Error?e.message:String(e)}`)}}):"Generate Wiki"===await o.window.showWarningMessage("RAG Chat requires project analysis data. Please generate wiki first.","Generate Wiki","Cancel")&&o.commands.executeCommand("deepwiki.generateWiki")}(t,g,i)}catch(e){console.error("Error in startRAGChat:",e),o.window.showErrorMessage(`RAG Chat Error: ${e instanceof Error?e.message:String(e)}`)}});console.log("Registering quickRAGQuery command...");const O=o.commands.registerCommand("deepwiki.quickRAGQuery",async()=>{console.log("quickRAGQuery command executed");try{await async function(e,t,r){const n=v();if(!n)return;const a=n.uri.fsPath,i=e.getConfiguration();if(!i.apiKey||!i.provider)return void o.window.showWarningMessage("Please configure AI provider settings first.");if(!await r.hasCache(a))return void o.window.showWarningMessage("Please generate wiki first to enable RAG queries.");const s=await o.window.showInputBox({prompt:"Ask a question about your project",placeHolder:"e.g., How does the authentication system work?",ignoreFocusOut:!0});s&&await o.window.withProgress({location:o.ProgressLocation.Notification,title:"Processing RAG Query",cancellable:!1},async e=>{try{e.report({increment:0,message:"Initializing RAG..."}),t.isReady()||await t.prepareRetriever(a),e.report({increment:50,message:"Searching relevant documents..."});const r=await t.query(s);e.report({increment:100,message:"Query completed"}),function(e,t){const r=o.window.createWebviewPanel("deepwikiRAGResult","RAG Query Result",o.ViewColumn.Two,{enableScripts:!0});let n="";t.sources&&t.sources.length>0&&(n='<div class="sources"><div class="sources-title">Sources:</div>',t.sources.forEach(e=>{n+='<div class="source-item"><div class="source-title">'+e.title+'</div><div class="source-path">'+e.path+"</div></div>"}),n+="</div>");const a=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),i=t.answer.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>");r.webview.html='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>RAG Query Result</title><style>body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; line-height: 1.6; margin: 0; padding: 20px; background-color: var(--vscode-editor-background); color: var(--vscode-editor-foreground); }.query { background-color: var(--vscode-inputOption-activeBackground); padding: 15px; border-radius: 8px; margin-bottom: 20px; }.query-title { font-weight: bold; margin-bottom: 10px; }.answer { background-color: var(--vscode-editor-inactiveSelectionBackground); padding: 15px; border-radius: 8px; margin-bottom: 20px; }.answer-title { font-weight: bold; margin-bottom: 10px; color: var(--vscode-textLink-foreground); }.sources { margin-top: 20px; }.sources-title { font-weight: bold; margin-bottom: 10px; }.source-item { background-color: var(--vscode-list-hoverBackground); padding: 10px; margin-bottom: 10px; border-radius: 4px; border-left: 3px solid var(--vscode-textLink-foreground); }.source-title { font-weight: bold; margin-bottom: 5px; }.source-path { font-size: 0.9em; color: var(--vscode-descriptionForeground); }</style></head><body><div class="query"><div class="query-title">Your Question:</div><div>'+a+'</div></div><div class="answer"><div class="answer-title">Answer:</div><div>'+i+"</div></div>"+n+"</body></html>"}(s,r)}catch(e){o.window.showErrorMessage(`Query failed: ${e instanceof Error?e.message:String(e)}`)}})}(t,g,i)}catch(e){console.error("Error in quickRAGQuery:",e),o.window.showErrorMessage(`Quick Query Error: ${e instanceof Error?e.message:String(e)}`)}});console.log("Setting up configuration change listener...");const S=o.workspace.onDidChangeConfiguration(e=>{if(e.affectsConfiguration("deepwiki")){console.log("DeepWiki configuration changed, updating managers...");try{const e=t.getConfiguration();console.log("New configuration:",{provider:e.provider,hasApiKey:!!e.apiKey,model:e.model}),a.updateConfig(e),console.log("WikiGenerator configuration updated"),g.updateConfig(e),console.log("RAGManager configuration updated"),o.window.showInformationMessage("DeepWiki configuration updated successfully!")}catch(e){console.error("Failed to update configuration:",e),o.window.showErrorMessage(`Failed to update configuration: ${e instanceof Error?e.message:String(e)}`)}}});console.log("Adding commands to subscriptions..."),e.subscriptions.push(b,_,w,P,O,S),console.log("All commands registered successfully")}catch(e){console.error("Error during extension activation:",e),o.window.showErrorMessage(`DeepWiki activation failed: ${e instanceof Error?e.message:String(e)}`)}},t.deactivate=function(){console.log("DeepWiki extension is now deactivated!")};const o=s(r(91398)),l=s(r(16928)),c=r(79896),d=r(18630),u=r(57641),p=r(32123),m=r(69937),h=r(70933);async function f(e,t){try{const r=await e.loadWikiCache(t),n=r?.wikiData;if(!n)return void o.window.showErrorMessage("No wiki cache found.");const a=o.window.createWebviewPanel("deepwiki","DeepWiki Documentation",o.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0});a.webview.html=function(e){return`\n        <!DOCTYPE html>\n        <html lang="zh-CN">\n        <head>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <title>DeepWiki Documentation</title>\n            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tomorrow.min.css">\n            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"><\/script>\n            <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"><\/script>\n            <style>\n                :root {\n                    --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n                    --font-serif: 'Georgia', 'Times New Roman', serif;\n                    --font-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Source Code Pro', monospace;\n                    --border-radius: 8px;\n                    --transition: all 0.2s ease;\n                    --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n                    \n                    /* Light mode colors - matching DeepWiki Open */\n                    --background: #faf9f7;\n                    --foreground: #2c2c2c;\n                    --shadow-color: rgba(0, 0, 0, 0.1);\n                    --accent-primary: #8b5a3c;\n                    --accent-secondary: #d4af37;\n                    --border-color: #e8e3d8;\n                    --card-bg: #ffffff;\n                    --highlight: #c9302c;\n                    --muted: #6c757d;\n                    --link-color: #8b5a3c;\n                    --sidebar-bg: rgba(248, 246, 243, 0.8);\n                    --sidebar-border: #e8e3d8;\n                    --hover-bg: rgba(139, 90, 60, 0.1);\n                    --active-bg: rgba(139, 90, 60, 0.15);\n                }\n                \n                /* Dark mode adjustments */\n                @media (prefers-color-scheme: dark) {\n                    :root {\n                        --background: #1a1a1a;\n                        --foreground: #f0f0f0;\n                        --shadow-color: rgba(0, 0, 0, 0.2);\n                        --accent-primary: #9370db;\n                        --accent-secondary: #5d4037;\n                        --border-color: #2c2c2c;\n                        --card-bg: #222222;\n                        --highlight: #e57373;\n                        --muted: #8c8c8c;\n                        --link-color: #b19cd9;\n                        --sidebar-bg: rgba(30, 30, 30, 0.8);\n                        --sidebar-border: #2c2c2c;\n                        --hover-bg: rgba(147, 112, 219, 0.1);\n                        --active-bg: rgba(147, 112, 219, 0.2);\n                    }\n                }\n                \n                * {\n                    margin: 0;\n                    padding: 0;\n                    box-sizing: border-box;\n                }\n                \n                body {\n                    font-family: var(--font-sans);\n                    background: var(--background);\n                    color: var(--foreground);\n                    line-height: 1.6;\n                    overflow-x: hidden;\n                }\n                \n                /* Main Layout - DeepWiki Open Style */\n                .app-container {\n                    display: flex;\n                    flex-direction: column;\n                    min-height: 100vh;\n                    max-width: 90%;\n                    margin: 0 auto;\n                    padding: 2rem 0;\n                }\n                \n                @media (min-width: 1400px) {\n                    .app-container {\n                        max-width: 1400px;\n                    }\n                }\n                \n                /* Header */\n                .header {\n                    margin-bottom: 2rem;\n                    text-align: center;\n                }\n                \n                .header-title {\n                    font-size: 2.5rem;\n                    font-weight: 700;\n                    color: var(--accent-primary);\n                    margin-bottom: 0.5rem;\n                    font-family: var(--font-serif);\n                }\n                \n                .header-subtitle {\n                    font-size: 1.125rem;\n                    color: var(--muted);\n                    font-weight: 400;\n                }\n                \n                /* Main content layout */\n                .main-layout {\n                    display: flex;\n                    flex: 1;\n                    gap: 1rem;\n                    background: var(--card-bg);\n                    border-radius: var(--border-radius);\n                    box-shadow: 0 4px 16px var(--shadow-color);\n                    overflow: hidden;\n                    min-height: 80vh;\n                }\n                \n                @media (max-width: 1024px) {\n                    .main-layout {\n                        flex-direction: column;\n                    }\n                }\n                \n                /* Sidebar Navigation */\n                .sidebar {\n                    width: 320px;\n                    flex-shrink: 0;\n                    background: var(--sidebar-bg);\n                    border-right: 1px solid var(--border-color);\n                    padding: 1.25rem;\n                    overflow-y: auto;\n                    backdrop-filter: blur(10px);\n                }\n                \n                @media (max-width: 1024px) {\n                    .sidebar {\n                        width: 100%;\n                        border-right: none;\n                        border-bottom: 1px solid var(--border-color);\n                    }\n                }\n                \n                .sidebar-header {\n                    margin-bottom: 1.5rem;\n                    padding-bottom: 1rem;\n                    border-bottom: 1px solid var(--border-color);\n                }\n                \n                .sidebar-title {\n                    font-size: 1.125rem;\n                    font-weight: 600;\n                    color: var(--accent-primary);\n                    margin-bottom: 0.25rem;\n                    font-family: var(--font-serif);\n                }\n                \n                .sidebar-subtitle {\n                    font-size: 0.875rem;\n                    color: var(--muted);\n                    font-weight: 400;\n                }\n                \n                .nav-list {\n                    list-style: none;\n                }\n                \n                .nav-item {\n                    margin-bottom: 0.25rem;\n                }\n                \n                .nav-link {\n                    display: flex;\n                    align-items: center;\n                    padding: 0.75rem 1rem;\n                    color: var(--foreground);\n                    text-decoration: none;\n                    border-radius: 0.5rem;\n                    transition: all 0.2s ease;\n                    cursor: pointer;\n                    font-size: 0.875rem;\n                    font-weight: 500;\n                }\n                \n                .nav-link:hover {\n                    background: var(--hover-bg);\n                    color: var(--accent-primary);\n                    transform: translateX(4px);\n                }\n                \n                .nav-link.active {\n                    background: var(--active-bg);\n                    color: var(--accent-primary);\n                    font-weight: 600;\n                }\n                \n                .nav-icon {\n                    width: 1rem;\n                    height: 1rem;\n                    margin-right: 0.75rem;\n                    opacity: 0.7;\n                    flex-shrink: 0;\n                }\n                \n                .nav-link.active .nav-icon,\n                .nav-link:hover .nav-icon {\n                    opacity: 1;\n                }\n                \n                /* Main content */\n                .main-content {\n                    flex: 1;\n                    padding: 2rem;\n                    overflow-y: auto;\n                    background: var(--background);\n                }\n                \n                .content-header {\n                    margin-bottom: 2rem;\n                    padding-bottom: 1.5rem;\n                    border-bottom: 1px solid var(--border-color);\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: flex-end;\n                    flex-wrap: wrap;\n                    gap: 1rem;\n                }\n                \n                .content-title-section {\n                    flex: 1;\n                }\n                \n                .content-title {\n                    font-size: 2rem;\n                    font-weight: 700;\n                    color: var(--accent-primary);\n                    margin-bottom: 0.5rem;\n                    font-family: var(--font-serif);\n                }\n                \n                .content-subtitle {\n                    font-size: 1rem;\n                    color: var(--muted);\n                    font-weight: 400;\n                }\n                \n                .export-actions {\n                    display: flex;\n                    gap: 0.5rem;\n                    flex-wrap: wrap;\n                }\n                \n                .export-button {\n                    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));\n                    color: white;\n                    border: none;\n                    padding: 0.625rem 1.25rem;\n                    border-radius: 0.5rem;\n                    font-weight: 500;\n                    cursor: pointer;\n                    transition: all 0.2s ease;\n                    box-shadow: 0 2px 8px rgba(147, 112, 219, 0.2);\n                    font-size: 0.875rem;\n                    min-width: 80px;\n                }\n                \n                .export-button:hover {\n                    transform: translateY(-2px);\n                    box-shadow: 0 4px 16px rgba(147, 112, 219, 0.3);\n                }\n                \n                .export-button:active {\n                    transform: translateY(0);\n                }\n                \n                .content-body {\n                    padding: 2rem;\n                }\n                \n                /* Section styles */\n                .section {\n                    background: var(--card-bg);\n                    border: 1px solid var(--border-color);\n                    border-radius: var(--border-radius);\n                    margin-bottom: 1.5rem;\n                    box-shadow: var(--shadow);\n                    overflow: hidden;\n                    transition: var(--transition);\n                }\n                \n                .section:hover {\n                    transform: translateY(-2px);\n                    box-shadow: 0 8px 24px var(--shadow-color);\n                }\n                \n                .section-header {\n                    background: var(--card-bg);\n                    padding: 1.5rem;\n                    border-bottom: 1px solid var(--border-color);\n                    cursor: pointer;\n                    transition: var(--transition);\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                }\n                \n                .section-header:hover {\n                    background: var(--hover-bg);\n                }\n                \n                .section-title {\n                    font-size: 1.5rem;\n                    font-weight: 600;\n                    color: var(--accent-primary);\n                    margin: 0;\n                    display: flex;\n                    align-items: center;\n                    gap: 0.75rem;\n                }\n                \n                .section-icon {\n                    font-size: 1.25rem;\n                }\n                \n                .section-toggle {\n                    font-size: 1.25rem;\n                    transition: var(--transition);\n                    color: var(--muted);\n                    opacity: 0.7;\n                }\n                \n                .section-content {\n                    padding: 2rem;\n                    display: block;\n                    background: var(--background);\n                }\n                \n                .section.collapsed .section-content {\n                    display: none;\n                }\n                \n                .section.collapsed .section-toggle {\n                    transform: rotate(-90deg);\n                }\n                \n                .page-content {\n                    color: var(--foreground);\n                    line-height: 1.7;\n                    font-size: 1rem;\n                }\n                \n                .page-content h1 {\n                    color: var(--accent-primary);\n                    font-size: 1.875rem;\n                    font-weight: 700;\n                    margin: 2rem 0 1rem 0;\n                    border-bottom: 2px solid var(--border-color);\n                    padding-bottom: 0.5rem;\n                }\n                \n                .page-content h2 {\n                    color: var(--accent-primary);\n                    font-size: 1.5rem;\n                    font-weight: 600;\n                    margin: 1.5rem 0 1rem 0;\n                }\n                \n                .page-content h3 {\n                    color: var(--accent-secondary);\n                    font-size: 1.25rem;\n                    font-weight: 600;\n                    margin: 1.25rem 0 0.75rem 0;\n                }\n                \n                .page-content p {\n                    margin: 1rem 0;\n                    color: var(--foreground);\n                }\n                \n                .page-content strong {\n                    color: var(--accent-primary);\n                    font-weight: 600;\n                }\n                \n                .page-content em {\n                    color: var(--accent-secondary);\n                    font-style: italic;\n                }\n                \n                /* Code highlighting */\n                pre {\n                    background: var(--card-bg);\n                    border: 1px solid var(--border-color);\n                    border-radius: var(--border-radius);\n                    padding: 1.5rem;\n                    margin: 1.5rem 0;\n                    overflow-x: auto;\n                    position: relative;\n                    box-shadow: var(--shadow);\n                }\n                \n                pre:hover {\n                    box-shadow: 0 4px 12px var(--shadow-color);\n                }\n                \n                code {\n                    font-family: var(--font-mono);\n                    font-size: 0.875rem;\n                    line-height: 1.5;\n                }\n                \n                .inline-code {\n                    background: var(--hover-bg);\n                    color: var(--accent-primary);\n                    padding: 0.25rem 0.5rem;\n                    border-radius: 0.25rem;\n                    font-family: var(--font-mono);\n                    font-size: 0.875rem;\n                    font-weight: 500;\n                    border: 1px solid var(--border-color);\n                }\n                \n                /* Tables */\n                table {\n                    width: 100%;\n                    border-collapse: collapse;\n                    margin: 1.5rem 0;\n                    background: var(--card-bg);\n                    border-radius: var(--border-radius);\n                    overflow: hidden;\n                    box-shadow: var(--shadow);\n                    border: 1px solid var(--border-color);\n                }\n                \n                th, td {\n                    padding: 0.75rem 1rem;\n                    text-align: left;\n                    border-bottom: 1px solid var(--border-color);\n                }\n                \n                th {\n                    background: var(--hover-bg);\n                    font-weight: 600;\n                    color: var(--accent-primary);\n                    font-size: 0.875rem;\n                    text-transform: uppercase;\n                    letter-spacing: 0.05em;\n                }\n                \n                tr:hover {\n                    background: var(--hover-bg);\n                }\n                \n                tr:last-child td {\n                    border-bottom: none;\n                }\n                \n                /* Lists */\n                .page-content ul, .page-content ol {\n                    padding-left: 1.5rem;\n                    margin: 1rem 0;\n                }\n                \n                .page-content li {\n                    margin: 0.5rem 0;\n                    color: var(--foreground);\n                }\n                \n                .page-content ul li {\n                    list-style-type: none;\n                    position: relative;\n                }\n                \n                .page-content ul li::before {\n                    content: '•';\n                    color: var(--accent-primary);\n                    font-weight: bold;\n                    position: absolute;\n                    left: -1rem;\n                }\n                \n                .page-content ol li {\n                    list-style-type: decimal;\n                    color: var(--foreground);\n                }\n                \n                /* Links */\n                .page-content a {\n                    color: var(--link);\n                    text-decoration: none;\n                    transition: var(--transition);\n                    font-weight: 500;\n                    border-bottom: 1px solid transparent;\n                }\n                \n                .page-content a:hover {\n                    color: var(--accent-primary);\n                    border-bottom-color: var(--accent-primary);\n                }\n                \n\n                \n                /* Badges */\n                .badge {\n                    display: inline-block;\n                    padding: 0.25rem 0.75rem;\n                    border-radius: 9999px;\n                    font-size: 0.75rem;\n                    font-weight: 500;\n                    margin: 0.125rem;\n                    border: 1px solid var(--border-color);\n                    transition: var(--transition);\n                }\n                \n                .badge-primary {\n                    background: var(--accent-primary);\n                    color: white;\n                    border-color: var(--accent-primary);\n                }\n                \n                .badge-success {\n                    background: var(--success);\n                    color: white;\n                    border-color: var(--success);\n                }\n                \n                .badge-warning {\n                    background: var(--warning);\n                    color: var(--foreground);\n                    border-color: var(--warning);\n                }\n                \n                .badge:hover {\n                    transform: translateY(-1px);\n                    box-shadow: var(--shadow);\n                }\n                \n                /* Responsive design */\n                @media (max-width: 1024px) {\n                    .app-container {\n                        max-width: 95%;\n                        padding: 1rem 0;\n                    }\n                    \n                    .header-title {\n                        font-size: 2rem;\n                    }\n                    \n                    .main-layout {\n                        flex-direction: column;\n                        min-height: auto;\n                    }\n                    \n                    .sidebar {\n                        width: 100%;\n                        border-right: none;\n                        border-bottom: 1px solid var(--border-color);\n                    }\n                    \n                    .main-content {\n                        padding: 1.5rem;\n                    }\n                    \n                    .content-header {\n                        flex-direction: column;\n                        align-items: flex-start;\n                        gap: 1rem;\n                    }\n                    \n                    .content-title {\n                        font-size: 1.5rem;\n                    }\n                    \n                    .export-actions {\n                        width: 100%;\n                        justify-content: flex-start;\n                    }\n                }\n                \n                @media (max-width: 640px) {\n                    .app-container {\n                        max-width: 100%;\n                        padding: 0.5rem;\n                    }\n                    \n                    .header {\n                        margin-bottom: 1rem;\n                        padding: 0 1rem;\n                    }\n                    \n                    .header-title {\n                        font-size: 1.75rem;\n                    }\n                    \n                    .header-subtitle {\n                        font-size: 1rem;\n                    }\n                    \n                    .main-content {\n                        padding: 1rem;\n                    }\n                    \n                    .content-header {\n                        padding-bottom: 1rem;\n                        margin-bottom: 1rem;\n                    }\n                    \n                    .content-title {\n                        font-size: 1.25rem;\n                    }\n                    \n                    .sidebar {\n                        padding: 1rem;\n                    }\n                    \n                    .export-actions {\n                        flex-direction: column;\n                        width: 100%;\n                    }\n                    \n                    .export-button {\n                        width: 100%;\n                        justify-content: center;\n                        padding: 0.75rem;\n                    }\n                    \n                    .section {\n                        margin-bottom: 1rem;\n                    }\n                    \n                    .section-header {\n                        padding: 1rem;\n                    }\n                    \n                    .section-content {\n                        padding: 1rem;\n                    }\n                    \n                    .section-title {\n                        font-size: 1.25rem;\n                    }\n                }\n                \n                /* Scrollbar styling */\n                ::-webkit-scrollbar {\n                    width: 6px;\n                    height: 6px;\n                }\n                \n                ::-webkit-scrollbar-track {\n                    background: var(--background);\n                }\n                \n                ::-webkit-scrollbar-thumb {\n                    background: var(--muted);\n                    border-radius: 3px;\n                    transition: var(--transition);\n                }\n                \n                ::-webkit-scrollbar-thumb:hover {\n                    background: var(--accent-primary);\n                }\n                \n                ::-webkit-scrollbar-corner {\n                    background: var(--background);\n                }\n                \n                /* Firefox scrollbar */\n                * {\n                    scrollbar-width: thin;\n                    scrollbar-color: var(--muted) var(--background);\n                }\n            </style>\n        </head>\n        <body>\n            <div class="app-container">\n                \x3c!-- Header --\x3e\n                <div class="header">\n                    <h1 class="header-title">${e.projectName||"Project Documentation"}</h1>\n                    <p class="header-subtitle">自动生成的项目文档 - ${e.generatedAt?new Date(e.generatedAt).toLocaleDateString("zh-CN"):(new Date).toLocaleDateString("zh-CN")}</p>\n                </div>\n                \n                \x3c!-- Main Layout --\x3e\n                <div class="main-layout">\n                    \x3c!-- Sidebar Navigation --\x3e\n                    <div class="sidebar">\n                        <div class="sidebar-header">\n                            <div class="sidebar-title">\n                                📚 目录导航\n                            </div>\n                            <div class="sidebar-subtitle">\n                                ${g(e).length} 个章节\n                            </div>\n                        </div>\n                        \n                        <nav class="nav-list">\n                            ${g(e).map(e=>`\n                                <div class="nav-item">\n                                    <a href="#${e.id}" class="nav-link" onclick="scrollToSection('${e.id}')">\n                                        <span class="nav-icon">${e.icon}</span>\n                                        ${e.title}\n                                    </a>\n                                </div>\n                            `).join("")}\n                        </nav>\n                    </div>\n                    \n                    \x3c!-- Main Content --\x3e\n                    <div class="main-content">\n                        <div class="content-header">\n                            <div class="content-title-section">\n                                <h2 class="content-title">\n                                    📖 项目文档\n                                </h2>\n                                <p class="content-subtitle">\n                                    详细的项目分析和文档\n                                </p>\n                            </div>\n                            \n                            <div class="export-actions">\n                                <button class="export-button" onclick="exportWiki('markdown')">\n                                    📄 Markdown\n                                </button>\n                                <button class="export-button" onclick="exportWiki('json')">\n                                    📊 JSON\n                                </button>\n                            </div>\n                        </div>\n                        \n                        <div class="content-body">\n                            ${function(e){if(!e||"object"!=typeof e)return'<div class="section"><div class="section-content">No documentation data found.</div></div>';const t={Overview:"📋",Architecture:"🏗️","File Structure":"📁","Code Analysis":"🔍",Dependencies:"📦",Setup:"⚙️",Usage:"🚀",API:"🔌",Configuration:"⚙️",Testing:"🧪",Deployment:"🚀",Contributing:"🤝",License:"📄"},r=[];return e.overview&&r.push({title:"Overview",content:e.overview}),e.architecture&&r.push({title:"Architecture",content:e.architecture}),e.fileStructure&&r.push({title:"File Structure",content:e.fileStructure}),e.codeAnalysis&&Array.isArray(e.codeAnalysis)&&e.codeAnalysis.length>0&&e.codeAnalysis.forEach((e,t)=>{r.push({title:e.title||`Code Analysis ${t+1}`,content:e.content||""})}),e.dependencies&&r.push({title:"Dependencies",content:e.dependencies}),e.setup&&r.push({title:"Setup",content:e.setup}),e.usage&&r.push({title:"Usage",content:e.usage}),0===r.length?'<div class="section"><div class="section-content">No documentation pages found. Please check if the wiki generation completed successfully.</div></div>':r.map((e,r)=>{const n=t[e.title]||"📄";let a="";switch(e.title){case"Overview":a="overview";break;case"Architecture":a="architecture";break;case"File Structure":a="file-structure";break;case"Dependencies":a="dependencies";break;case"Setup":a="setup";break;case"Usage":a="usage";break;default:a=e.title.includes("Code Analysis")?`code-analysis-${r}`:`section-${r}`}let i=y(e.content);return`\n            <div class="section" id="${a}">\n                <div class="section-header">\n                    <div class="section-title">\n                        <span class="section-icon">${n}</span>\n                        ${e.title}\n                    </div>\n                    <span class="section-toggle">▼</span>\n                </div>\n                <div class="section-content">\n                    <div class="page-content">${i}</div>\n                </div>\n            </div>\n        `}).join("")}(e)}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            <script>\n                const vscode = acquireVsCodeApi();\n                \n                // Define exportWiki function in global scope immediately\n                window.exportWiki = function(format) {\n                    try {\n                        console.log('Exporting wiki in format:', format);\n                        vscode.postMessage({\n                            command: 'export',\n                            format: format\n                        });\n                    } catch (error) {\n                        console.error('Error in exportWiki:', error);\n                    }\n                };\n                \n                // Initialize syntax highlighting\n                document.addEventListener('DOMContentLoaded', function() {\n                    hljs.highlightAll();\n                    \n                    // Initialize Mermaid\n                    mermaid.initialize({ \n                        theme: 'dark',\n                        startOnLoad: true,\n                        securityLevel: 'loose'\n                    });\n                    \n                    // Add section toggle functionality\n                    document.querySelectorAll('.section-header').forEach(header => {\n                        header.addEventListener('click', function() {\n                            const section = this.parentElement;\n                            section.classList.toggle('collapsed');\n                        });\n                    });\n                    \n                    // Process code blocks for syntax highlighting\n                    document.querySelectorAll('pre code').forEach(block => {\n                        hljs.highlightElement(block);\n                    });\n                    \n                    // Process inline code\n                    document.querySelectorAll('code:not(pre code)').forEach(code => {\n                        code.classList.add('inline-code');\n                    });\n                    \n                    // Initialize navigation\n                    initializeNavigation();\n                });\n                \n                // Also define as regular function for backward compatibility\n                function exportWiki(format) {\n                    return window.exportWiki(format);\n                }\n                \n                function scrollToSection(sectionId) {\n                    const target = document.getElementById(sectionId);\n                    if (target) {\n                        // Update active nav item\n                        document.querySelectorAll('.nav-item').forEach(item => {\n                            item.classList.remove('active');\n                        });\n                        \n                        const activeNavItem = document.querySelector('[onclick*="scrollToSection('' + sectionId + '')"');\n                        if (activeNavItem) {\n                            activeNavItem.classList.add('active');\n                        }\n                        \n                        // Smooth scroll to target\n                        target.scrollIntoView({ \n                            behavior: 'smooth',\n                            block: 'start'\n                        });\n                    }\n                }\n                \n                function initializeNavigation() {\n                    // Set first nav item as active by default\n                    const firstNavItem = document.querySelector('.nav-item');\n                    if (firstNavItem) {\n                        firstNavItem.classList.add('active');\n                    }\n                    \n                    // Add scroll spy functionality\n                    const sections = document.querySelectorAll('.section');\n                    const navItems = document.querySelectorAll('.nav-item');\n                    \n                    const observer = new IntersectionObserver((entries) => {\n                        entries.forEach(entry => {\n                            if (entry.isIntersecting) {\n                                const sectionId = entry.target.id;\n                                if (sectionId) {\n                                    navItems.forEach(item => item.classList.remove('active'));\n                                    const activeNavItem = document.querySelector('[onclick*="scrollToSection('' + sectionId + '')"');\n                                    if (activeNavItem) {\n                                        activeNavItem.classList.add('active');\n                                    }\n                                }\n                            }\n                        });\n                    }, {\n                        threshold: 0.3,\n                        rootMargin: '-20% 0px -70% 0px'\n                    });\n                    \n                    sections.forEach(section => {\n                        if (section.id) {\n                            observer.observe(section);\n                        }\n                    });\n                }\n                \n                // Smooth scrolling for internal links\n                document.addEventListener('click', function(e) {\n                    if (e.target.tagName === 'A' && e.target.getAttribute('href').startsWith('#')) {\n                        e.preventDefault();\n                        const target = document.querySelector(e.target.getAttribute('href'));\n                        if (target) {\n                            target.scrollIntoView({ behavior: 'smooth' });\n                        }\n                    }\n                });\n            <\/script>\n        </body>\n        </html>\n    `}(n),a.webview.onDidReceiveMessage(e=>{"export"===e.command&&async function(e,t){try{const r=v();if(!r)return;const n=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,19),a=l.join(r.uri.fsPath,`deepwiki-export-${n}.${t}`);let i;switch(t){case"json":i=JSON.stringify(e,null,2);break;case"markdown":i=function(e){let t=`# ${e.wiki_structure?.title||"Project Documentation"}\n\n`;return e.wiki_structure?.description&&(t+=`${e.wiki_structure.description}\n\n`),e.wiki_structure?.pages&&e.wiki_structure.pages.length>0&&(t+="## Table of Contents\n\n",e.wiki_structure.pages.forEach((e,r)=>{const n=e.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");t+=`${r+1}. [${e.title}](#${n})\n`}),t+="\n"),e.wiki_structure?.pages&&e.wiki_structure.pages.forEach(e=>{const r=e.title.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");t+=`## ${e.title} {#${r}}\n\n`;let n=e.content||"";n=n.replace(/<[^>]*>/g,""),n=n.replace(/\n\s*\n/g,"\n\n"),t+=`${n}\n\n`,t+="---\n\n"}),t+=`\n---\n\n*Generated by DeepWiki on ${(new Date).toLocaleString()}*\n`,t}(e);break;case"html":i=function(e){const t=e.wiki_structure?.title||"Project Documentation";return`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>${t}</title>\n    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"><\/script>\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"><\/script>\n    <style>\n        :root {\n            --primary-color: #007acc;\n            --secondary-color: #1e1e1e;\n            --accent-color: #569cd6;\n            --success-color: #4ec9b0;\n            --warning-color: #dcdcaa;\n            --error-color: #f44747;\n            --bg-color: #0d1117;\n            --surface-color: #161b22;\n            --border-color: #30363d;\n            --text-color: #c9d1d9;\n            --text-muted: #8b949e;\n            --border-radius: 8px;\n            --shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n            --transition: all 0.3s ease;\n        }\n        \n        * {\n            box-sizing: border-box;\n        }\n        \n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n            line-height: 1.6;\n            margin: 0;\n            padding: 0;\n            background: var(--bg-color);\n            color: var(--text-color);\n            min-height: 100vh;\n        }\n        \n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 20px;\n        }\n        \n        .header {\n            background: var(--surface-color);\n            border: 1px solid var(--border-color);\n            border-radius: var(--border-radius);\n            padding: 30px;\n            margin-bottom: 30px;\n            box-shadow: var(--shadow);\n            position: relative;\n            overflow: hidden;\n        }\n        \n        .header::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            height: 4px;\n            background: linear-gradient(90deg, var(--primary-color), var(--accent-color), var(--success-color));\n        }\n        \n        .title {\n            font-size: 2.5em;\n            font-weight: 700;\n            margin-bottom: 10px;\n            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));\n            -webkit-background-clip: text;\n            -webkit-text-fill-color: transparent;\n            background-clip: text;\n        }\n        \n        .description {\n            color: var(--text-muted);\n            font-size: 1.2em;\n            opacity: 0.9;\n        }\n        \n        .toc {\n            background: var(--surface-color);\n            border: 1px solid var(--border-color);\n            border-radius: var(--border-radius);\n            padding: 20px;\n            margin-bottom: 30px;\n        }\n        \n        .toc h2 {\n            margin-top: 0;\n            color: var(--primary-color);\n        }\n        \n        .toc ul {\n            list-style: none;\n            padding: 0;\n        }\n        \n        .toc li {\n            margin: 8px 0;\n        }\n        \n        .toc a {\n            color: var(--text-color);\n            text-decoration: none;\n            transition: var(--transition);\n        }\n        \n        .toc a:hover {\n            color: var(--primary-color);\n        }\n        \n        .section {\n            background: var(--surface-color);\n            border: 1px solid var(--border-color);\n            border-radius: var(--border-radius);\n            margin-bottom: 25px;\n            box-shadow: var(--shadow);\n            overflow: hidden;\n        }\n        \n        .section-header {\n            background: var(--bg-color);\n            padding: 20px;\n            border-bottom: 1px solid var(--border-color);\n        }\n        \n        .section-title {\n            font-size: 1.4em;\n            font-weight: 600;\n            color: var(--primary-color);\n            margin: 0;\n            display: flex;\n            align-items: center;\n        }\n        \n        .section-icon {\n            margin-right: 10px;\n            font-size: 1.2em;\n        }\n        \n        .section-content {\n            padding: 25px;\n        }\n        \n        .page-content {\n            color: var(--text-color);\n            line-height: 1.7;\n        }\n        \n        pre {\n            background: var(--bg-color);\n            border: 1px solid var(--border-color);\n            border-radius: var(--border-radius);\n            padding: 20px;\n            margin: 15px 0;\n            overflow-x: auto;\n        }\n        \n        code {\n            font-family: 'Fira Code', 'Cascadia Code', 'JetBrains Mono', Consolas, monospace;\n            font-size: 0.9em;\n        }\n        \n        .inline-code {\n            background: var(--bg-color);\n            padding: 2px 6px;\n            border-radius: 4px;\n            font-family: 'Fira Code', 'Cascadia Code', monospace;\n            font-size: 0.9em;\n        }\n        \n        table {\n            width: 100%;\n            border-collapse: collapse;\n            margin: 20px 0;\n            background: var(--surface-color);\n            border-radius: var(--border-radius);\n            overflow: hidden;\n        }\n        \n        th, td {\n            padding: 12px 15px;\n            text-align: left;\n            border-bottom: 1px solid var(--border-color);\n        }\n        \n        th {\n            background: var(--bg-color);\n            font-weight: 600;\n            color: var(--primary-color);\n        }\n        \n        a {\n            color: var(--primary-color);\n            text-decoration: none;\n        }\n        \n        a:hover {\n            color: var(--accent-color);\n            text-decoration: underline;\n        }\n        \n        .footer {\n            text-align: center;\n            padding: 20px;\n            color: var(--text-muted);\n            border-top: 1px solid var(--border-color);\n            margin-top: 40px;\n        }\n        \n        @media print {\n            .container {\n                max-width: none;\n                padding: 0;\n            }\n            \n            .section {\n                break-inside: avoid;\n                page-break-inside: avoid;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class="container">\n        <div class="header">\n            <div class="title">${t}</div>\n            <div class="description">${e.wiki_structure?.description||"Generated by DeepWiki"}</div>\n        </div>\n        \n        ${function(e){if(!e.wiki_structure?.pages||0===e.wiki_structure.pages.length)return"";const t={Overview:"📋",Architecture:"🏗️","File Structure":"📁","Code Analysis":"🔍",Dependencies:"📦",Setup:"⚙️",Usage:"🚀",API:"🔌",Configuration:"⚙️",Testing:"🧪",Deployment:"🚀",Contributing:"🤝",License:"📄"};return`\n        <div class="toc">\n            <h2>📚 Table of Contents</h2>\n            <ul>${e.wiki_structure.pages.map((e,r)=>`<li><a href="#section-${r}">${t[e.title]||"📄"} ${e.title}</a></li>`).join("")}</ul>\n        </div>\n    `}(e)}\n        \n        <div class="content">\n            ${function(e){if(!e.wiki_structure?.pages)return'<div class="section"><div class="section-content">No documentation pages found.</div></div>';const t={Overview:"📋",Architecture:"🏗️","File Structure":"📁","Code Analysis":"🔍",Dependencies:"📦",Setup:"⚙️",Usage:"🚀",API:"🔌",Configuration:"⚙️",Testing:"🧪",Deployment:"🚀",Contributing:"🤝",License:"📄"};return e.wiki_structure.pages.map((e,r)=>{const n=t[e.title]||"📄",a=`section-${r}`;let i=y(e.content);return`\n            <div class="section" id="${a}">\n                <div class="section-header">\n                    <div class="section-title">\n                        <span class="section-icon">${n}</span>\n                        ${e.title}\n                    </div>\n                </div>\n                <div class="section-content">\n                    <div class="page-content">${i}</div>\n                </div>\n            </div>\n        `}).join("")}(e)}\n        </div>\n        \n        <div class="footer">\n            <p>Generated by <strong>DeepWiki</strong> on ${(new Date).toLocaleString()}</p>\n        </div>\n    </div>\n    \n    <script>\n        // Initialize syntax highlighting\n        document.addEventListener('DOMContentLoaded', function() {\n            hljs.highlightAll();\n            \n            // Initialize Mermaid\n            mermaid.initialize({ \n                theme: 'dark',\n                startOnLoad: true,\n                securityLevel: 'loose'\n            });\n            \n            // Smooth scrolling for internal links\n            document.addEventListener('click', function(e) {\n                if (e.target.tagName === 'A' && e.target.getAttribute('href').startsWith('#')) {\n                    e.preventDefault();\n                    const target = document.querySelector(e.target.getAttribute('href'));\n                    if (target) {\n                        target.scrollIntoView({ behavior: 'smooth' });\n                    }\n                }\n            });\n        });\n    <\/script>\n</body>\n</html>`}(e);break;case"pdf":await async function(){throw new Error("PDF generation is currently disabled. Please use HTML export instead.")}();const r=await o.window.showInformationMessage(`Wiki exported to ${l.basename(a)}`,"Open File","Show in Folder");return void("Open File"===r?o.commands.executeCommand("vscode.open",o.Uri.file(a)):"Show in Folder"===r&&o.commands.executeCommand("revealFileInOS",o.Uri.file(a)));default:throw new Error(`Unsupported export format: ${t}`)}await c.promises.writeFile(a,i,"utf8");const s=await o.window.showInformationMessage(`Wiki exported to ${l.basename(a)}`,"Open File","Show in Folder");if("Open File"===s){const e=await o.workspace.openTextDocument(a);await o.window.showTextDocument(e)}else"Show in Folder"===s&&o.commands.executeCommand("revealFileInOS",o.Uri.file(a))}catch(e){o.window.showErrorMessage(`Export failed: ${e instanceof Error?e.message:String(e)}`)}}(n,e.format)})}catch(e){o.window.showErrorMessage(`Failed to display wiki: ${e instanceof Error?e.message:String(e)}`)}}function g(e){const t=[];return e.overview&&t.push({id:"overview",title:"Overview",icon:"📋"}),e.architecture&&t.push({id:"architecture",title:"Architecture",icon:"🏗️"}),e.fileStructure&&t.push({id:"file-structure",title:"File Structure",icon:"📁"}),e.codeAnalysis&&Array.isArray(e.codeAnalysis)&&e.codeAnalysis.length>0&&e.codeAnalysis.forEach((e,r)=>{t.push({id:`code-analysis-${r}`,title:e.title||`Code Analysis ${r+1}`,icon:"🔍"})}),e.dependencies&&t.push({id:"dependencies",title:"Dependencies",icon:"📦"}),e.setup&&t.push({id:"setup",title:"Setup",icon:"⚙️"}),e.usage&&t.push({id:"usage",title:"Usage",icon:"🚀"}),t}function y(e){return e?((e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/```(\w+)?\n([\s\S]*?)```/g,(e,t,r)=>`<pre><code class="language-${t||"text"}">${function(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>t[e])}(r.trim())}</code></pre>`)).replace(/`([^`]+)`/g,'<code class="inline-code">$1</code>')).replace(/^### (.+)$/gm,"<h3>$1</h3>")).replace(/^## (.+)$/gm,"<h2>$1</h2>")).replace(/^# (.+)$/gm,"<h1>$1</h1>")).replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>")).replace(/\*(.+?)\*/g,"<em>$1</em>")).replace(/^- (.+)$/gm,"<li>$1</li>")).replace(/(<li>.*<\/li>)/s,"<ul>$1</ul>")).replace(/^\d+\. (.+)$/gm,"<li>$1</li>")).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank">$1</a>')).replace(/\n\n/g,"</p><p>")).replace(/\n/g,"<br>")).startsWith("<")||(e=`<p>${e}</p>`),(e=e.replace(/\|(.+)\|/g,(e,t)=>`<tr>${t.split("|").map(e=>e.trim()).filter(e=>e).map(e=>`<td>${e}</td>`).join("")}</tr>`)).includes("<tr>")&&(e=e.replace(/(<tr>.*<\/tr>)/s,"<table>$1</table>")),e):""}function v(){const e=o.workspace.workspaceFolders;if(e&&0!==e.length)return e[0];o.window.showErrorMessage("No workspace folder is open.")}},74277:(e,t,r)=>{"use strict";const n=r(40909);e.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},74629:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomIntegerInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},74769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Evals=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(86003)),s=r(86003),o=r(75552),l=r(54815);class c extends a.APIResource{constructor(){super(...arguments),this.runs=new i.Runs(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(l.path`/evals/${e}`,t)}update(e,t,r){return this._client.post(l.path`/evals/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/evals",o.CursorPage,{query:e,...t})}delete(e,t){return this._client.delete(l.path`/evals/${e}`,t)}}t.Evals=c,c.Runs=s.Runs},75032:(e,t,r)=>{"use strict";const n=r(78311),a=r(93904),{ANY:i}=a,s=r(97638),o=r(50560),l=[new a(">=0.0.0-0")],c=[new a(">=0.0.0")],d=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?l:c}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=c}const n=new Set;let a,d,m,h,f,g,y;for(const t of e)">"===t.operator||">="===t.operator?a=u(a,t,r):"<"===t.operator||"<="===t.operator?d=p(d,t,r):n.add(t.semver);if(n.size>1)return null;if(a&&d){if(m=o(a.semver,d.semver,r),m>0)return null;if(0===m&&(">="!==a.operator||"<="!==d.operator))return null}for(const e of n){if(a&&!s(e,String(a),r))return null;if(d&&!s(e,String(d),r))return null;for(const n of t)if(!s(e,String(n),r))return!1;return!0}let v=!(!d||r.includePrerelease||!d.semver.prerelease.length)&&d.semver,b=!(!a||r.includePrerelease||!a.semver.prerelease.length)&&a.semver;v&&1===v.prerelease.length&&"<"===d.operator&&0===v.prerelease[0]&&(v=!1);for(const e of t){if(y=y||">"===e.operator||">="===e.operator,g=g||"<"===e.operator||"<="===e.operator,a)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),">"===e.operator||">="===e.operator){if(h=u(a,e,r),h===e&&h!==a)return!1}else if(">="===a.operator&&!s(a.semver,String(e),r))return!1;if(d)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if(f=p(d,e,r),f===e&&f!==d)return!1}else if("<="===d.operator&&!s(d.semver,String(e),r))return!1;if(!e.operator&&(d||a)&&0!==m)return!1}return!(a&&g&&!d&&0!==m||d&&y&&!a&&0!==m||b||v)},u=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let a=!1;e:for(const n of e.set){for(const e of t.set){const t=d(n,e,r);if(a=a||null!==t,t)continue e}if(a)return!1}return!0}},75127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRecordDef=void 0;const n=r(7552),a=r(84769),i=r(94235),s=r(8584),o=r(95346);t.parseRecordDef=function(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??(0,o.parseAnyDef)(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const r={type:"object",additionalProperties:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.checks?.length){const{type:n,...a}=(0,i.parseStringDef)(e.keyType._def,t);return{...r,propertyNames:a}}if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodBranded&&e.keyType._def.type._def.typeName===n.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.type._def.checks?.length){const{type:n,...a}=(0,s.parseBrandedDef)(e.keyType._def,t);return{...r,propertyNames:a}}return r}},75432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const n=r(24467),a=r(97877);var i=r(97877);function s(e,t,r,i){return(0,a.default)(48,n.default,e,t,r,i)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return i.URL}}),s.DNS=a.DNS,s.URL=a.URL,t.default=s},75497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Embeddings=void 0;const n=r(61583);t.Embeddings=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new n.AsyncCaller(e??{})}}},75552:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CursorPage=t.Page=t.PagePromise=t.AbstractPage=void 0;const a=r(79632),i=r(44172),s=r(98151),o=r(81482),l=r(15734);class c{constructor(e,t,r,i){n.set(this,void 0),a.__classPrivateFieldSet(this,n,e,"f"),this.options=i,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new i.OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await a.__classPrivateFieldGet(this,n,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(n=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}t.AbstractPage=c;class d extends o.APIPromise{constructor(e,t,r){super(e,t,async(e,t)=>new r(e,t.response,await(0,s.defaultParseResponse)(e,t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}t.PagePromise=d,t.Page=class extends c{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}},t.CursorPage=class extends c{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),t=e[e.length-1]?.id;return t?{...this.options,query:{...(0,l.maybeObj)(this.options.query),after:t}}:null}}},75563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCatchDef=void 0;const n=r(95445);t.parseCatchDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},75571:(e,t,r)=>{"use strict";const n=r(97075);e.exports=(e,t,r)=>n(e,t,">",r)},75613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnionDef=t.primitiveMappings=void 0;const n=r(55767);t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},t.parseUnionDef=function(e,r){if("openApi3"===r.target)return a(e,r);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in t.primitiveMappings&&(!e._def.checks||!e._def.checks.length))){const e=n.reduce((e,r)=>{const n=t.primitiveMappings[r._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}if(n.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=n.reduce((e,t)=>{const r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===n.length){const t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return a(e,r)};const a=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0}},75617:(e,t,r)=>{e.exports=r(58303)},75653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(28651),a=r(92034);t.default=(e,t)=>{let r;switch(e.code){case n.ZodIssueCode.invalid_type:r=e.received===a.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case n.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,a.util.jsonStringifyReplacer)}`;break;case n.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${a.util.joinValues(e.keys,", ")}`;break;case n.ZodIssueCode.invalid_union:r="Invalid input";break;case n.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${a.util.joinValues(e.options)}`;break;case n.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${a.util.joinValues(e.options)}, received '${e.received}'`;break;case n.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case n.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case n.ZodIssueCode.invalid_date:r="Invalid date";break;case n.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:a.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case n.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case n.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case n.ZodIssueCode.custom:r="Invalid input";break;case n.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case n.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case n.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,a.util.assertNever(e)}return{message:r}}},75771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootListenersTracer=void 0;const n=r(847);class a extends n.BaseTracer{constructor({config:e,onStart:t,onEnd:r,onError:n}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&(1===this.argOnStart.length?await this.argOnStart(e):2===this.argOnStart.length&&await this.argOnStart(e,this.config)))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&(1===this.argOnError.length?await this.argOnError(e):2===this.argOnError.length&&await this.argOnError(e,this.config)):this.argOnEnd&&(1===this.argOnEnd.length?await this.argOnEnd(e):2===this.argOnEnd.length&&await this.argOnEnd(e,this.config)))}}t.RootListenersTracer=a},75786:(e,t,r)=>{e.exports=r(5104)},75911:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"символів",verb:"матиме"},file:{unit:"байтів",verb:"матиме"},array:{unit:"елементів",verb:"матиме"},set:{unit:"елементів",verb:"матиме"}};function t(t){return e[t]??null}const r={regex:"вхідні дані",email:"адреса електронної пошти",url:"URL",emoji:"емодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"дата та час ISO",date:"дата ISO",time:"час ISO",duration:"тривалість ISO",ipv4:"адреса IPv4",ipv6:"адреса IPv6",cidrv4:"діапазон IPv4",cidrv6:"діапазон IPv6",base64:"рядок у кодуванні base64",base64url:"рядок у кодуванні base64url",json_string:"рядок JSON",e164:"номер E.164",jwt:"JWT",template_literal:"вхідні дані"};return e=>{switch(e.code){case"invalid_type":return`Неправильні вхідні дані: очікується ${e.expected}, отримано ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"число";case"object":if(Array.isArray(e))return"масив";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Неправильні вхідні дані: очікується ${s.stringifyPrimitive(e.values[0])}`:`Неправильна опція: очікується одне з ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Занадто велике: очікується, що ${e.origin??"значення"} ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"елементів"}`:`Занадто велике: очікується, що ${e.origin??"значення"} буде ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Занадто мале: очікується, що ${e.origin} ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`:`Занадто мале: очікується, що ${e.origin} буде ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Неправильний рядок: повинен починатися з "${t.prefix}"`:"ends_with"===t.format?`Неправильний рядок: повинен закінчуватися на "${t.suffix}"`:"includes"===t.format?`Неправильний рядок: повинен містити "${t.includes}"`:"regex"===t.format?`Неправильний рядок: повинен відповідати шаблону ${t.pattern}`:`Неправильний ${r[t.format]??e.format}`}case"not_multiple_of":return`Неправильне число: повинно бути кратним ${e.divisor}`;case"unrecognized_keys":return`Нерозпізнаний ключ${e.keys.length>1?"і":""}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Неправильний ключ у ${e.origin}`;case"invalid_union":default:return"Неправильні вхідні дані";case"invalid_element":return`Неправильне значення у ${e.origin}`}}}},75923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttlingRetryPolicyName=void 0,t.throttlingRetryPolicy=function(e={}){return(0,n.throttlingRetryPolicy)(e)};const n=r(17445);t.throttlingRetryPolicyName=n.throttlingRetryPolicyName},76020:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version={major:4,minor:0,patch:0}},76033:(e,t,r)=>{const n=r(52018),a=r(39023);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(...e){return process.stderr.write(a.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){const{namespace:n,useColors:a}=this;if(a){const t=this.color,a="[3"+(t<8?t:"8;5;"+t),i=`  ${a};1m${n} [0m`;r[0]=i+r[0].split("\n").join("\n"+i),r.push(a+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(process.stderr.fd)},t.destroy=a.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(27687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e},{}),e.exports=r(40736)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)}},76111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chat=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(73054)),s=r(73054);class o extends a.APIResource{constructor(){super(...arguments),this.completions=new i.Completions(this._client)}}t.Chat=o,o.Completions=s.Completions},76288:(e,t,r)=>{"use strict";const{createFile:n,createFileSync:a}=r(89616),{createLink:i,createLinkSync:s}=r(91522),{createSymlink:o,createSymlinkSync:l}=r(55291);e.exports={createFile:n,createFileSync:a,ensureFile:n,ensureFileSync:a,createLink:i,createLinkSync:s,ensureLink:i,ensureLinkSync:s,createSymlink:o,createSymlinkSync:l,ensureSymlink:o,ensureSymlinkSync:l}},76524:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiKeyAuthenticationPolicyName=void 0,t.apiKeyAuthenticationPolicy=function(e){return{name:t.apiKeyAuthenticationPolicyName,async sendRequest(t,r){var a,i;(0,n.ensureSecureConnection)(t,e);const s=null===(i=null!==(a=t.authSchemes)&&void 0!==a?a:e.authSchemes)||void 0===i?void 0:i.find(e=>"apiKey"===e.kind);if(!s)return r(t);if("header"!==s.apiKeyLocation)throw new Error(`Unsupported API key location: ${s.apiKeyLocation}`);return t.headers.set(s.name,e.credential.key),r(t)}}};const n=r(10851);t.apiKeyAuthenticationPolicyName="apiKeyAuthenticationPolicy"},76530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AI_SDK_TOOL_OPERATIONS=t.AI_SDK_LLM_OPERATIONS=t.GEN_AI_CHOICE=t.GEN_AI_ASSISTANT_MESSAGE=t.GEN_AI_USER_MESSAGE=t.GEN_AI_SYSTEM_MESSAGE=t.LANGSMITH_IS_ROOT=t.LANGSMITH_TRACEABLE=t.LANGSMITH_REFERENCE_EXAMPLE_ID=t.LANGSMITH_USAGE_METADATA=t.LANGSMITH_PARENT_RUN_ID=t.LANGSMITH_DOTTED_ORDER=t.LANGSMITH_TRACE_ID=t.LANGSMITH_RUN_ID=t.LANGSMITH_REQUEST_HEADERS=t.LANGSMITH_REQUEST_STREAMING=t.LANGSMITH_RUNTIME=t.LANGSMITH_TAGS=t.LANGSMITH_METADATA=t.LANGSMITH_NAME=t.LANGSMITH_RUN_TYPE=t.LANGSMITH_SESSION_NAME=t.LANGSMITH_SESSION_ID=t.GEN_AI_USAGE_OUTPUT_TOKEN_DETAILS=t.GEN_AI_USAGE_INPUT_TOKEN_DETAILS=t.GEN_AI_RESPONSE_SYSTEM_FINGERPRINT=t.GEN_AI_RESPONSE_SERVICE_TIER=t.GEN_AI_RESPONSE_ID=t.GEN_AI_SERIALIZED_DOC=t.GEN_AI_SERIALIZED_SIGNATURE=t.GEN_AI_SERIALIZED_NAME=t.GEN_AI_REQUEST_EXTRA_BODY=t.GEN_AI_REQUEST_EXTRA_QUERY=t.GENAI_COMPLETION=t.GENAI_PROMPT=t.GEN_AI_RESPONSE_FINISH_REASONS=t.GEN_AI_REQUEST_PRESENCE_PENALTY=t.GEN_AI_REQUEST_FREQUENCY_PENALTY=t.GEN_AI_REQUEST_TOP_P=t.GEN_AI_REQUEST_TEMPERATURE=t.GEN_AI_REQUEST_MAX_TOKENS=t.GEN_AI_USAGE_TOTAL_TOKENS=t.GEN_AI_USAGE_OUTPUT_TOKENS=t.GEN_AI_USAGE_INPUT_TOKENS=t.GEN_AI_RESPONSE_MODEL=t.GEN_AI_REQUEST_MODEL=t.GEN_AI_SYSTEM=t.GEN_AI_OPERATION_NAME=void 0,t.GEN_AI_OPERATION_NAME="gen_ai.operation.name",t.GEN_AI_SYSTEM="gen_ai.system",t.GEN_AI_REQUEST_MODEL="gen_ai.request.model",t.GEN_AI_RESPONSE_MODEL="gen_ai.response.model",t.GEN_AI_USAGE_INPUT_TOKENS="gen_ai.usage.input_tokens",t.GEN_AI_USAGE_OUTPUT_TOKENS="gen_ai.usage.output_tokens",t.GEN_AI_USAGE_TOTAL_TOKENS="gen_ai.usage.total_tokens",t.GEN_AI_REQUEST_MAX_TOKENS="gen_ai.request.max_tokens",t.GEN_AI_REQUEST_TEMPERATURE="gen_ai.request.temperature",t.GEN_AI_REQUEST_TOP_P="gen_ai.request.top_p",t.GEN_AI_REQUEST_FREQUENCY_PENALTY="gen_ai.request.frequency_penalty",t.GEN_AI_REQUEST_PRESENCE_PENALTY="gen_ai.request.presence_penalty",t.GEN_AI_RESPONSE_FINISH_REASONS="gen_ai.response.finish_reasons",t.GENAI_PROMPT="gen_ai.prompt",t.GENAI_COMPLETION="gen_ai.completion",t.GEN_AI_REQUEST_EXTRA_QUERY="gen_ai.request.extra_query",t.GEN_AI_REQUEST_EXTRA_BODY="gen_ai.request.extra_body",t.GEN_AI_SERIALIZED_NAME="gen_ai.serialized.name",t.GEN_AI_SERIALIZED_SIGNATURE="gen_ai.serialized.signature",t.GEN_AI_SERIALIZED_DOC="gen_ai.serialized.doc",t.GEN_AI_RESPONSE_ID="gen_ai.response.id",t.GEN_AI_RESPONSE_SERVICE_TIER="gen_ai.response.service_tier",t.GEN_AI_RESPONSE_SYSTEM_FINGERPRINT="gen_ai.response.system_fingerprint",t.GEN_AI_USAGE_INPUT_TOKEN_DETAILS="gen_ai.usage.input_token_details",t.GEN_AI_USAGE_OUTPUT_TOKEN_DETAILS="gen_ai.usage.output_token_details",t.LANGSMITH_SESSION_ID="langsmith.trace.session_id",t.LANGSMITH_SESSION_NAME="langsmith.trace.session_name",t.LANGSMITH_RUN_TYPE="langsmith.span.kind",t.LANGSMITH_NAME="langsmith.trace.name",t.LANGSMITH_METADATA="langsmith.metadata",t.LANGSMITH_TAGS="langsmith.span.tags",t.LANGSMITH_RUNTIME="langsmith.span.runtime",t.LANGSMITH_REQUEST_STREAMING="langsmith.request.streaming",t.LANGSMITH_REQUEST_HEADERS="langsmith.request.headers",t.LANGSMITH_RUN_ID="langsmith.span.id",t.LANGSMITH_TRACE_ID="langsmith.trace.id",t.LANGSMITH_DOTTED_ORDER="langsmith.span.dotted_order",t.LANGSMITH_PARENT_RUN_ID="langsmith.span.parent_id",t.LANGSMITH_USAGE_METADATA="langsmith.usage_metadata",t.LANGSMITH_REFERENCE_EXAMPLE_ID="langsmith.reference_example_id",t.LANGSMITH_TRACEABLE="langsmith.traceable",t.LANGSMITH_IS_ROOT="langsmith.is_root",t.GEN_AI_SYSTEM_MESSAGE="gen_ai.system.message",t.GEN_AI_USER_MESSAGE="gen_ai.user.message",t.GEN_AI_ASSISTANT_MESSAGE="gen_ai.assistant.message",t.GEN_AI_CHOICE="gen_ai.choice",t.AI_SDK_LLM_OPERATIONS=["ai.generateText.doGenerate","ai.streamText.doStream","ai.generateObject.doGenerate","ai.streamObject.doStream"],t.AI_SDK_TOOL_OPERATIONS=["ai.toolCall"]},76601:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.JSONSchema=t.locales=t.regexes=t.util=void 0,i(r(98706),t),i(r(64084),t),i(r(24362),t),i(r(95341),t),i(r(32564),t),i(r(76020),t),t.util=s(r(90523)),t.regexes=s(r(91988)),t.locales=s(r(45167)),i(r(91114),t),i(r(87319),t),i(r(50075),t),i(r(52405),t),i(r(70485),t),t.JSONSchema=s(r(8359))},76607:(e,t,r)=>{e.exports=r(50738)},76648:(e,t,r)=>{"use strict";const n=r(85616),a=r(46892),i=r(67079),s=a.implSymbol;function o(t){if(!this||this[s]||!(this instanceof o))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw new TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");const r=[];for(let e=0;e<arguments.length&&e<2;++e)r[e]=arguments[e];r[0]=n.USVString(r[0]),void 0!==r[1]&&(r[1]=n.USVString(r[1])),e.exports.setup(this,r)}o.prototype.toJSON=function(){if(!this||!e.exports.is(this))throw new TypeError("Illegal invocation");const t=[];for(let e=0;e<arguments.length&&e<0;++e)t[e]=arguments[e];return this[s].toJSON.apply(this[s],t)},Object.defineProperty(o.prototype,"href",{get(){return this[s].href},set(e){e=n.USVString(e),this[s].href=e},enumerable:!0,configurable:!0}),o.prototype.toString=function(){if(!this||!e.exports.is(this))throw new TypeError("Illegal invocation");return this.href},Object.defineProperty(o.prototype,"origin",{get(){return this[s].origin},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"protocol",{get(){return this[s].protocol},set(e){e=n.USVString(e),this[s].protocol=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"username",{get(){return this[s].username},set(e){e=n.USVString(e),this[s].username=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"password",{get(){return this[s].password},set(e){e=n.USVString(e),this[s].password=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"host",{get(){return this[s].host},set(e){e=n.USVString(e),this[s].host=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hostname",{get(){return this[s].hostname},set(e){e=n.USVString(e),this[s].hostname=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"port",{get(){return this[s].port},set(e){e=n.USVString(e),this[s].port=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pathname",{get(){return this[s].pathname},set(e){e=n.USVString(e),this[s].pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"search",{get(){return this[s].search},set(e){e=n.USVString(e),this[s].search=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hash",{get(){return this[s].hash},set(e){e=n.USVString(e),this[s].hash=e},enumerable:!0,configurable:!0}),e.exports={is:e=>!!e&&e[s]instanceof i.implementation,create(e,t){let r=Object.create(o.prototype);return this.setup(r,e,t),r},setup(e,t,r){r||(r={}),r.wrapper=e,e[s]=new i.implementation(t,r),e[s][a.wrapperSymbol]=e},interface:o,expose:{Window:{URL:o},Worker:{URL:o}}}},76666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFile=async function(e,t,r){if((0,a.checkFileSupport)(),e=await e,s(e))return e instanceof File?e:(0,n.makeFile)([await e.arrayBuffer()],e.name);if(o(e)){const a=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),(0,n.makeFile)(await l(a),t,r)}const i=await l(e);if(t||(t=(0,n.getName)(e)),!r?.type){const e=i.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(r={...r,type:e})}return(0,n.makeFile)(i,t,r)};const n=r(12018),a=r(12018),i=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,s=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&i(e),o=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob;async function l(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(i(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!(0,n.isAsyncIterable)(e)){const t=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";return`; props: [${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`)}for await(const r of e)t.push(...await l(r))}return t}},76715:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isZodSchema=void 0,t.isZodSchema=function(e){return"function"==typeof e?.parse}},76780:(e,t,r)=>{"use strict";const n=r(78311);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},76864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSseStream=function(e){const{cancel:t,iterable:r}=(0,a.ensureAsyncIterable)(e),l=function(e){return n.__asyncGenerator(this,arguments,function*(){var t,r,a,s;let l={data:void 0,event:"",id:"",retry:void 0};const c=new TextDecoder;try{for(var d,u=!0,p=n.__asyncValues(e);!(t=(d=yield n.__await(p.next())).done);u=!0){s=d.value,u=!1;const{line:e,fieldLen:t}=s;if(0===e.length&&void 0!==l.data)yield yield n.__await(l),l=o();else if(t>0){const r=c.decode(e.subarray(0,t)),n=t+(e[t+1]===i.Space?2:1),a=c.decode(e.subarray(n));switch(r){case"data":l.data=l.data?l.data+"\n"+a:a;break;case"event":l.event=a;break;case"id":l.id=a;break;case"retry":{const e=parseInt(a,10);isNaN(e)||(l.retry=e);break}}}}}catch(e){r={error:e}}finally{try{u||t||!(a=p.return)||(yield n.__await(a.call(p)))}finally{if(r)throw r.error}}})}(function(e){return n.__asyncGenerator(this,arguments,function*(){var t,r,a,o;let l,c=0,d=-1,u=!1;try{for(var p,m=!0,h=n.__asyncValues(e);!(t=(p=yield n.__await(h.next())).done);m=!0){o=p.value,m=!1,void 0===l?(l=o,c=0,d=-1):l=s(l,o);const e=l.length;let t=0;for(;c<e;){u&&(l[c]===i.NewLine&&(t=++c),u=!1);let r=-1;for(;c<e&&-1===r;++c)switch(l[c]){case i.Colon:-1===d&&(d=c-t);break;case i.CarriageReturn:u=!0,r=c;break;case i.NewLine:r=c}if(-1===r)break;yield yield n.__await({line:l.subarray(t,r),fieldLen:d}),t=c,d=-1}t===e?l=void 0:0!==t&&(l=l.subarray(t),c-=t)}}catch(e){r={error:e}}finally{try{m||t||!(a=h.return)||(yield n.__await(a.call(h)))}finally{if(r)throw r.error}}})}(r));return(0,a.createStream)(l,t)};const n=r(31635),a=r(47808);var i;function s(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function o(){return{data:void 0,event:"",id:"",retry:void 0}}!function(e){e[e.NewLine=10]="NewLine",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.Colon=58]="Colon"}(i||(i={}))},76907:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncLocalStorageProviderSingleton=t.MockAsyncLocalStorage=void 0;const n=r(21210),a=r(61299),i=r(31413);class s{getStore(){}run(e,t){return t()}enterWith(e){}}t.MockAsyncLocalStorage=s;const o=new s,l=Symbol.for("lc:child_config"),c=new class{getInstance(){return(0,a.getGlobalAsyncLocalStorageInstance)()??o}getRunnableConfig(){const e=this.getInstance();return e.getStore()?.extra?.[l]}runWithConfig(e,t,r){const s=i.CallbackManager._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),o=this.getInstance(),c=o.getStore(),d=s?.getParentRunId(),u=s?.handlers?.find(e=>"langchain_tracer"===e?.name);let p;return u&&d?p=u.getRunTreeWithTracingConfig(d):r||(p=new n.RunTree({name:"<runnable_lambda>",tracingEnabled:!1})),p&&(p.extra={...p.extra,[l]:e}),void 0!==c&&void 0!==c[a._CONTEXT_VARIABLES_KEY]&&(void 0===p&&(p={}),p[a._CONTEXT_VARIABLES_KEY]=c[a._CONTEXT_VARIABLES_KEY]),o.run(p,t)}initializeGlobalInstance(e){void 0===(0,a.getGlobalAsyncLocalStorageInstance)()&&(0,a.setGlobalAsyncLocalStorageInstance)(e)}};t.AsyncLocalStorageProviderSingleton=c},76964:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingEnabled=void 0;const n=r(56178);t.isTracingEnabled=e=>void 0!==e?e:!!["TRACING_V2","TRACING"].find(e=>"true"===(0,n.getLangSmithEnvironmentVariable)(e))},76982:e=>{"use strict";e.exports=require("crypto")},76984:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUndefinedDef=function(){return{not:{}}}},77024:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,a=r(98737),i=r(16928),s=r(63798),o=r(29288).pathExists;e.exports={outputFile:n(async function(e,t,r="utf-8"){const n=i.dirname(e);return await o(n)||await s.mkdirs(n),a.writeFile(e,t,r)}),outputFileSync:function(e,...t){const r=i.dirname(e);a.existsSync(r)||s.mkdirsSync(r),a.writeFileSync(e,...t)}}},77386:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTupleDef=function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:(0,n.parseDef)(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}};const n=r(95445)},77598:e=>{"use strict";e.exports=require("node:crypto")},77631:(e,t,r)=>{"use strict";const n=r(78311);e.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},77980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendRequest=async function(e,t,r,c={},d){var u;const p=null!=d?d:(0,s.getCachedDefaultHttpsClient)(),m=function(e,t,r={}){var n,s,c;const d=function(e={}){var t,r,n;return null!==(n=null!==(t=e.contentType)&&void 0!==t?t:null===(r=e.headers)||void 0===r?void 0:r["content-type"])&&void 0!==n?n:function(e){if(ArrayBuffer.isView(e))return"application/octet-stream";if("string"==typeof e)try{return JSON.parse(e),"application/json"}catch(e){return}return"application/json"}(e.body)}(r),{body:u,multipartBody:p}=function(e,t=""){if(void 0===e)return{body:void 0};if("undefined"!=typeof FormData&&e instanceof FormData)return{body:e};if((0,o.isReadableStream)(e))return{body:e};if(ArrayBuffer.isView(e))return{body:e instanceof Uint8Array?e:JSON.stringify(e)};switch(t.split(";")[0]){case"application/json":return{body:JSON.stringify(e)};case"multipart/form-data":return Array.isArray(e)?{multipartBody:(0,l.buildMultipartBody)(e)}:{body:JSON.stringify(e)};case"text/plain":return{body:String(e)};default:return"string"==typeof e?{body:e}:{body:JSON.stringify(e)}}}(r.body,d),m=void 0!==u||void 0!==p,h=(0,a.createHttpHeaders)(Object.assign(Object.assign(Object.assign({},r.headers?r.headers:{}),{accept:null!==(c=null!==(n=r.accept)&&void 0!==n?n:null===(s=r.headers)||void 0===s?void 0:s.accept)&&void 0!==c?c:"application/json"}),m&&d&&{"content-type":d}));return(0,i.createPipelineRequest)({url:t,method:e,body:u,multipartBody:p,headers:h,allowInsecureConnection:r.allowInsecureConnection,abortSignal:r.abortSignal,onUploadProgress:r.onUploadProgress,onDownloadProgress:r.onDownloadProgress,timeout:r.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:r.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}(e,t,c);try{const e=await r.sendRequest(p,m),t=e.headers.toJSON(),a=null!==(u=e.readableStreamBody)&&void 0!==u?u:e.browserStreamBody,i=c.responseAsStream||void 0!==a?void 0:function(e){var t,r;const a=(null!==(t=e.headers.get("content-type"))&&void 0!==t?t:"").split(";")[0],i=null!==(r=e.bodyAsText)&&void 0!==r?r:"";if("text/plain"===a)return String(i);try{return i?JSON.parse(i):void 0}catch(t){if("application/json"===a)throw function(e,t){var r;const a=`Error "${t}" occurred while parsing the response body - ${e.bodyAsText}.`,i=null!==(r=t.code)&&void 0!==r?r:n.RestError.PARSE_ERROR;return new n.RestError(a,{code:i,statusCode:e.status,request:e.request,response:e})}(e,t);return String(i)}}(e),s=null!=a?a:i;return(null==c?void 0:c.onResponse)&&c.onResponse(Object.assign(Object.assign({},e),{request:m,rawHeaders:t,parsedBody:i})),{request:m,headers:t,status:`${e.status}`,body:s}}catch(e){if((0,n.isRestError)(e)&&e.response&&c.onResponse){const{response:t}=e,r=t.headers.toJSON();null==c||c.onResponse(Object.assign(Object.assign({},t),{request:m,rawHeaders:r}),e)}throw e}};const n=r(79227),a=r(18873),i=r(29676),s=r(44187),o=r(73796),l=r(46895)},78168:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(95734),t),a(r(43764),t),a(r(31949),t),a(r(94845),t),a(r(39069),t),a(r(50096),t),a(r(78608),t),a(r(32434),t)},78266:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)},o=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.unescapePathComponent=t.escapePathComponent=t.deepClone=t.JsonPatchError=void 0,s(r(37450),t),s(r(50609),t);var l=r(19350);Object.defineProperty(t,"JsonPatchError",{enumerable:!0,get:function(){return l.PatchError}}),Object.defineProperty(t,"deepClone",{enumerable:!0,get:function(){return l._deepClone}}),Object.defineProperty(t,"escapePathComponent",{enumerable:!0,get:function(){return l.escapePathComponent}}),Object.defineProperty(t,"unescapePathComponent",{enumerable:!0,get:function(){return l.unescapePathComponent}});const c=o(r(37450)),d=r(19350);t.default={...c,JsonPatchError:d.PatchError,deepClone:d._deepClone,escapePathComponent:d.escapePathComponent,unescapePathComponent:d.unescapePathComponent}},78293:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDefaultHttpClient=function(){return(0,n.createNodeHttpClient)()};const n=r(2580)},78299:(e,t,r)=>{e.exports=r(32656)},78311:(e,t,r)=>{"use strict";const n=/\s+/g;class a{constructor(e,t){if(t=s(t),e instanceof a)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new a(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!y(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&f)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,a=n?d[u.HYPHENRANGELOOSE]:d[u.HYPHENRANGE];e=e.replace(a,j(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(d[u.COMPARATORTRIM],p),l("comparator trim",e),e=e.replace(d[u.TILDETRIM],m),l("tilde trim",e),e=e.replace(d[u.CARETTRIM],h),l("caret trim",e);let s=e.split(" ").map(e=>_(e,this.options)).join(" ").split(/\s+/).map(e=>T(e,this.options));n&&(s=s.filter(e=>(l("loose invalid filter",e,this.options),!!e.match(d[u.COMPARATORLOOSE])))),l("range list",s);const c=new Map,v=s.map(e=>new o(e,this.options));for(const e of v){if(y(e))return[e];c.set(e.value,e)}c.size>1&&c.has("")&&c.delete("");const b=[...c.values()];return i.set(t,b),b}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Range is required");return this.set.some(r=>b(r,t)&&e.set.some(e=>b(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(C(this.set[t],e,this.options))return!0;return!1}}e.exports=a;const i=new(r(68794)),s=r(98587),o=r(93904),l=r(57272),c=r(53908),{safeRe:d,t:u,comparatorTrimReplace:p,tildeTrimReplace:m,caretTrimReplace:h}=r(99718),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:g}=r(16874),y=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,b=(e,t)=>{let r=!0;const n=e.slice();let a=n.pop();for(;r&&n.length;)r=n.every(e=>a.intersects(e,t)),a=n.pop();return r},_=(e,t)=>(l("comp",e,t),e=S(e,t),l("caret",e),e=P(e,t),l("tildes",e),e=A(e,t),l("xrange",e),e=k(e,t),l("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,P=(e,t)=>e.trim().split(/\s+/).map(e=>O(e,t)).join(" "),O=(e,t)=>{const r=t.loose?d[u.TILDELOOSE]:d[u.TILDE];return e.replace(r,(t,r,n,a,i)=>{let s;return l("tilde",e,t,r,n,a,i),w(r)?s="":w(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:w(a)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(l("replaceTilde pr",i),s=`>=${r}.${n}.${a}-${i} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${a} <${r}.${+n+1}.0-0`,l("tilde return",s),s})},S=(e,t)=>e.trim().split(/\s+/).map(e=>E(e,t)).join(" "),E=(e,t)=>{l("caret",e,t);const r=t.loose?d[u.CARETLOOSE]:d[u.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,a,i,s)=>{let o;return l("caret",e,t,r,a,i,s),w(r)?o="":w(a)?o=`>=${r}.0.0${n} <${+r+1}.0.0-0`:w(i)?o="0"===r?`>=${r}.${a}.0${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.0${n} <${+r+1}.0.0-0`:s?(l("replaceCaret pr",s),o="0"===r?"0"===a?`>=${r}.${a}.${i}-${s} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}-${s} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i}-${s} <${+r+1}.0.0-0`):(l("no pr"),o="0"===r?"0"===a?`>=${r}.${a}.${i}${n} <${r}.${a}.${+i+1}-0`:`>=${r}.${a}.${i}${n} <${r}.${+a+1}.0-0`:`>=${r}.${a}.${i} <${+r+1}.0.0-0`),l("caret return",o),o})},A=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map(e=>I(e,t)).join(" ")),I=(e,t)=>{e=e.trim();const r=t.loose?d[u.XRANGELOOSE]:d[u.XRANGE];return e.replace(r,(r,n,a,i,s,o)=>{l("xRange",e,r,n,a,i,s,o);const c=w(a),d=c||w(i),u=d||w(s),p=u;return"="===n&&p&&(n=""),o=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(d&&(i=0),s=0,">"===n?(n=">=",d?(a=+a+1,i=0,s=0):(i=+i+1,s=0)):"<="===n&&(n="<",d?a=+a+1:i=+i+1),"<"===n&&(o="-0"),r=`${n+a}.${i}.${s}${o}`):d?r=`>=${a}.0.0${o} <${+a+1}.0.0-0`:u&&(r=`>=${a}.${i}.0${o} <${a}.${+i+1}.0-0`),l("xRange return",r),r})},k=(e,t)=>(l("replaceStars",e,t),e.trim().replace(d[u.STAR],"")),T=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(d[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),j=e=>(t,r,n,a,i,s,o,l,c,d,u,p)=>`${r=w(n)?"":w(a)?`>=${n}.0.0${e?"-0":""}`:w(i)?`>=${n}.${a}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${l=w(c)?"":w(d)?`<${+c+1}.0.0-0`:w(u)?`<${c}.${+d+1}.0-0`:p?`<=${c}.${d}.${u}-${p}`:e?`<${c}.${d}.${+u+1}-0`:`<=${l}`}`.trim(),C=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},78348:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.has=void 0,t.merge=function e(r,n,i={}){if(!n)return r;if("object"!=typeof n){if((0,a.isArray)(r))r.push(n);else{if(!r||"object"!=typeof r)return[r,n];(i&&(i.plainObjects||i.allowPrototypes)||!(0,t.has)(Object.prototype,n))&&(r[n]=!0)}return r}if(!r||"object"!=typeof r)return[r].concat(n);let s=r;return(0,a.isArray)(r)&&!(0,a.isArray)(n)&&(s=function(e,t){const r=t&&t.plainObjects?Object.create(null):{};for(let t=0;t<e.length;++t)void 0!==e[t]&&(r[t]=e[t]);return r}(r,i)),(0,a.isArray)(r)&&(0,a.isArray)(n)?(n.forEach(function(n,a){if((0,t.has)(r,a)){const t=r[a];t&&"object"==typeof t&&n&&"object"==typeof n?r[a]=e(t,n,i):r.push(n)}else r[a]=n}),r):Object.keys(n).reduce(function(r,a){const s=n[a];return(0,t.has)(r,a)?r[a]=e(r[a],s,i):r[a]=s,r},s)},t.assign_single_source=function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},t.decode=function(e,t,r){const n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},t.compact=function(e){const t=[{obj:{o:e},prop:"o"}],r=[];for(let e=0;e<t.length;++e){const n=t[e],a=n.obj[n.prop],i=Object.keys(a);for(let e=0;e<i.length;++e){const n=i[e],s=a[n];"object"==typeof s&&null!==s&&-1===r.indexOf(s)&&(t.push({obj:a,prop:n}),r.push(s))}}return function(e){for(;e.length>1;){const t=e.pop();if(!t)continue;const r=t.obj[t.prop];if((0,a.isArray)(r)){const e=[];for(let t=0;t<r.length;++t)void 0!==r[t]&&e.push(r[t]);t.obj[t.prop]=e}}}(t),e},t.is_regexp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.is_buffer=function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},t.combine=function(e,t){return[].concat(e,t)},t.maybe_map=function(e,t){if((0,a.isArray)(e)){const r=[];for(let n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)};const n=r(95257),a=r(15734);t.has=(e,r)=>(t.has=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),(0,t.has)(e,r));const i=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),s=1024;t.encode=(e,t,r,a,o)=>{if(0===e.length)return e;let l=e;if("symbol"==typeof e?l=Symbol.prototype.toString.call(e):"string"!=typeof e&&(l=String(e)),"iso-8859-1"===r)return escape(l).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let c="";for(let e=0;e<l.length;e+=s){const t=l.length>=s?l.slice(e,e+s):l,r=[];for(let e=0;e<t.length;++e){let a=t.charCodeAt(e);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||o===n.RFC1738&&(40===a||41===a)?r[r.length]=t.charAt(e):a<128?r[r.length]=i[a]:a<2048?r[r.length]=i[192|a>>6]+i[128|63&a]:a<55296||a>=57344?r[r.length]=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(e+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(e)),r[r.length]=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}c+=r.join("")}return c}},78380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUndefinedDef=void 0;const n=r(95346);t.parseUndefinedDef=function(e){return{not:(0,n.parseAnyDef)(e)}}},78423:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.systemErrorRetryPolicyName=void 0,t.systemErrorRetryPolicy=function(e={}){var r;return{name:t.systemErrorRetryPolicyName,sendRequest:(0,a.retryPolicy)([(0,n.exponentialRetryStrategy)(Object.assign(Object.assign({},e),{ignoreHttpStatusCodes:!0}))],{maxRetries:null!==(r=e.maxRetries)&&void 0!==r?r:i.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}};const n=r(4077),a=r(48334),i=r(37146);t.systemErrorRetryPolicyName="systemErrorRetryPolicy"},78505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRefs=void 0;const n=r(65189),a=r(57503);t.getRefs=e=>{const t=(0,n.getDefaultOptions)(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[(0,a.zodDef)(r),{def:(0,a.zodDef)(r),path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}}},78520:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function t(t){return e[t]??null}const r={regex:"vnos",email:"e-poštni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in čas",date:"ISO datum",time:"ISO čas",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 številka",jwt:"JWT",template_literal:"vnos"};return e=>{switch(e.code){case"invalid_type":return`Neveljaven vnos: pričakovano ${e.expected}, prejeto ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"število";case"object":if(Array.isArray(e))return"tabela";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Neveljaven vnos: pričakovano ${s.stringifyPrimitive(e.values[0])}`:`Neveljavna možnost: pričakovano eno izmed ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Preveliko: pričakovano, da bo ${e.origin??"vrednost"} imelo ${r}${e.maximum.toString()} ${n.unit??"elementov"}`:`Preveliko: pričakovano, da bo ${e.origin??"vrednost"} ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Premajhno: pričakovano, da bo ${e.origin} imelo ${r}${e.minimum.toString()} ${n.unit}`:`Premajhno: pričakovano, da bo ${e.origin} ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Neveljaven niz: mora se začeti z "${t.prefix}"`:"ends_with"===t.format?`Neveljaven niz: mora se končati z "${t.suffix}"`:"includes"===t.format?`Neveljaven niz: mora vsebovati "${t.includes}"`:"regex"===t.format?`Neveljaven niz: mora ustrezati vzorcu ${t.pattern}`:`Neveljaven ${r[t.format]??e.format}`}case"not_multiple_of":return`Neveljavno število: mora biti večkratnik ${e.divisor}`;case"unrecognized_keys":return`Neprepoznan${e.keys.length>1?"i ključi":" ključ"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Neveljaven ključ v ${e.origin}`;case"invalid_union":default:return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${e.origin}`}}}},78608:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=function e(t,r,l="2019-09",c=(0,a.dereference)(r),d=!0,u=null,p="#",m="#",h=Object.create(null)){if(!0===r)return{valid:!0,errors:[]};if(!1===r)return{valid:!1,errors:[{instanceLocation:p,keyword:"false",keywordLocation:p,error:"False boolean schema."}]};const f=typeof t;let g;switch(f){case"boolean":case"number":case"string":g=f;break;case"object":g=null===t?"null":Array.isArray(t)?"array":"object";break;default:throw new Error(`Instances of "${f}" type are not supported.`)}const{$ref:y,$recursiveRef:v,$recursiveAnchor:b,type:_,const:w,enum:P,required:O,not:S,anyOf:E,allOf:A,oneOf:I,if:k,then:T,else:j,format:C,properties:x,patternProperties:N,additionalProperties:$,unevaluatedProperties:R,minProperties:M,maxProperties:D,propertyNames:L,dependentRequired:F,dependentSchemas:U,dependencies:z,prefixItems:B,items:V,additionalItems:Z,unevaluatedItems:G,contains:q,minContains:H,maxContains:K,minItems:W,maxItems:J,uniqueItems:Y,minimum:X,maximum:Q,exclusiveMinimum:ee,exclusiveMaximum:te,multipleOf:re,minLength:ne,maxLength:ae,pattern:ie,__absolute_ref__:se,__absolute_recursive_ref__:oe}=r,le=[];if(!0===b&&null===u&&(u=r),"#"===v){const n=null===u?c[oe]:u,a=`${m}/$recursiveRef`,i=e(t,null===u?r:u,l,c,d,n,p,a,h);i.valid||le.push({instanceLocation:p,keyword:"$recursiveRef",keywordLocation:a,error:"A subschema had errors."},...i.errors)}if(void 0!==y){const r=c[se||y];if(void 0===r){let e=`Unresolved $ref "${y}".`;throw se&&se!==y&&(e+=`  Absolute URI "${se}".`),e+=`\nKnown schemas:\n- ${Object.keys(c).join("\n- ")}`,new Error(e)}const n=`${m}/$ref`,a=e(t,r,l,c,d,u,p,n,h);if(a.valid||le.push({instanceLocation:p,keyword:"$ref",keywordLocation:n,error:"A subschema had errors."},...a.errors),"4"===l||"7"===l)return{valid:0===le.length,errors:le}}if(Array.isArray(_)){let e=_.length,r=!1;for(let n=0;n<e;n++)if(g===_[n]||"integer"===_[n]&&"number"===g&&t%1==0&&t==t){r=!0;break}r||le.push({instanceLocation:p,keyword:"type",keywordLocation:`${m}/type`,error:`Instance type "${g}" is invalid. Expected "${_.join('", "')}".`})}else"integer"===_?("number"!==g||t%1||t!=t)&&le.push({instanceLocation:p,keyword:"type",keywordLocation:`${m}/type`,error:`Instance type "${g}" is invalid. Expected "${_}".`}):void 0!==_&&g!==_&&le.push({instanceLocation:p,keyword:"type",keywordLocation:`${m}/type`,error:`Instance type "${g}" is invalid. Expected "${_}".`});if(void 0!==w&&("object"===g||"array"===g?(0,n.deepCompareStrict)(t,w)||le.push({instanceLocation:p,keyword:"const",keywordLocation:`${m}/const`,error:`Instance does not match ${JSON.stringify(w)}.`}):t!==w&&le.push({instanceLocation:p,keyword:"const",keywordLocation:`${m}/const`,error:`Instance does not match ${JSON.stringify(w)}.`})),void 0!==P&&("object"===g||"array"===g?P.some(e=>(0,n.deepCompareStrict)(t,e))||le.push({instanceLocation:p,keyword:"enum",keywordLocation:`${m}/enum`,error:`Instance does not match any of ${JSON.stringify(P)}.`}):P.some(e=>t===e)||le.push({instanceLocation:p,keyword:"enum",keywordLocation:`${m}/enum`,error:`Instance does not match any of ${JSON.stringify(P)}.`})),void 0!==S){const r=`${m}/not`;e(t,S,l,c,d,u,p,r).valid&&le.push({instanceLocation:p,keyword:"not",keywordLocation:r,error:'Instance matched "not" schema.'})}let ce=[];if(void 0!==E){const r=`${m}/anyOf`,n=le.length;let a=!1;for(let n=0;n<E.length;n++){const i=E[n],s=Object.create(h),o=e(t,i,l,c,d,!0===b?u:null,p,`${r}/${n}`,s);le.push(...o.errors),a=a||o.valid,o.valid&&ce.push(s)}a?le.length=n:le.splice(n,0,{instanceLocation:p,keyword:"anyOf",keywordLocation:r,error:"Instance does not match any subschemas."})}if(void 0!==A){const r=`${m}/allOf`,n=le.length;let a=!0;for(let n=0;n<A.length;n++){const i=A[n],s=Object.create(h),o=e(t,i,l,c,d,!0===b?u:null,p,`${r}/${n}`,s);le.push(...o.errors),a=a&&o.valid,o.valid&&ce.push(s)}a?le.length=n:le.splice(n,0,{instanceLocation:p,keyword:"allOf",keywordLocation:r,error:"Instance does not match every subschema."})}if(void 0!==I){const r=`${m}/oneOf`,n=le.length,a=I.filter((n,a)=>{const i=Object.create(h),s=e(t,n,l,c,d,!0===b?u:null,p,`${r}/${a}`,i);return le.push(...s.errors),s.valid&&ce.push(i),s.valid}).length;1===a?le.length=n:le.splice(n,0,{instanceLocation:p,keyword:"oneOf",keywordLocation:r,error:`Instance does not match exactly one subschema (${a} matches).`})}if("object"!==g&&"array"!==g||Object.assign(h,...ce),void 0!==k){const r=`${m}/if`;if(e(t,k,l,c,d,u,p,r,h).valid){if(void 0!==T){const n=e(t,T,l,c,d,u,p,`${m}/then`,h);n.valid||le.push({instanceLocation:p,keyword:"if",keywordLocation:r,error:'Instance does not match "then" schema.'},...n.errors)}}else if(void 0!==j){const n=e(t,j,l,c,d,u,p,`${m}/else`,h);n.valid||le.push({instanceLocation:p,keyword:"if",keywordLocation:r,error:'Instance does not match "else" schema.'},...n.errors)}}if("object"===g){if(void 0!==O)for(const e of O)e in t||le.push({instanceLocation:p,keyword:"required",keywordLocation:`${m}/required`,error:`Instance does not have required property "${e}".`});const r=Object.keys(t);if(void 0!==M&&r.length<M&&le.push({instanceLocation:p,keyword:"minProperties",keywordLocation:`${m}/minProperties`,error:`Instance does not have at least ${M} properties.`}),void 0!==D&&r.length>D&&le.push({instanceLocation:p,keyword:"maxProperties",keywordLocation:`${m}/maxProperties`,error:`Instance does not have at least ${D} properties.`}),void 0!==L){const r=`${m}/propertyNames`;for(const n in t){const t=`${p}/${(0,s.encodePointer)(n)}`,a=e(n,L,l,c,d,u,t,r);a.valid||le.push({instanceLocation:p,keyword:"propertyNames",keywordLocation:r,error:`Property name "${n}" does not match schema.`},...a.errors)}}if(void 0!==F){const e=`${m}/dependantRequired`;for(const r in F)if(r in t){const n=F[r];for(const a of n)a in t||le.push({instanceLocation:p,keyword:"dependentRequired",keywordLocation:e,error:`Instance has "${r}" but does not have "${a}".`})}}if(void 0!==U)for(const r in U){const n=`${m}/dependentSchemas`;if(r in t){const a=e(t,U[r],l,c,d,u,p,`${n}/${(0,s.encodePointer)(r)}`,h);a.valid||le.push({instanceLocation:p,keyword:"dependentSchemas",keywordLocation:n,error:`Instance has "${r}" but does not match dependant schema.`},...a.errors)}}if(void 0!==z){const r=`${m}/dependencies`;for(const n in z)if(n in t){const a=z[n];if(Array.isArray(a))for(const e of a)e in t||le.push({instanceLocation:p,keyword:"dependencies",keywordLocation:r,error:`Instance has "${n}" but does not have "${e}".`});else{const i=e(t,a,l,c,d,u,p,`${r}/${(0,s.encodePointer)(n)}`);i.valid||le.push({instanceLocation:p,keyword:"dependencies",keywordLocation:r,error:`Instance has "${n}" but does not match dependant schema.`},...i.errors)}}}const n=Object.create(null);let a=!1;if(void 0!==x){const r=`${m}/properties`;for(const i in x){if(!(i in t))continue;const o=`${p}/${(0,s.encodePointer)(i)}`,m=e(t[i],x[i],l,c,d,u,o,`${r}/${(0,s.encodePointer)(i)}`);if(m.valid)h[i]=n[i]=!0;else if(a=d,le.push({instanceLocation:p,keyword:"properties",keywordLocation:r,error:`Property "${i}" does not match schema.`},...m.errors),a)break}}if(!a&&void 0!==N){const r=`${m}/patternProperties`;for(const i in N){const o=new RegExp(i,"u"),m=N[i];for(const f in t){if(!o.test(f))continue;const g=`${p}/${(0,s.encodePointer)(f)}`,y=e(t[f],m,l,c,d,u,g,`${r}/${(0,s.encodePointer)(i)}`);y.valid?h[f]=n[f]=!0:(a=d,le.push({instanceLocation:p,keyword:"patternProperties",keywordLocation:r,error:`Property "${f}" matches pattern "${i}" but does not match associated schema.`},...y.errors))}}}if(a||void 0===$){if(!a&&void 0!==R){const r=`${m}/unevaluatedProperties`;for(const n in t)if(!h[n]){const a=`${p}/${(0,s.encodePointer)(n)}`,i=e(t[n],R,l,c,d,u,a,r);i.valid?h[n]=!0:le.push({instanceLocation:p,keyword:"unevaluatedProperties",keywordLocation:r,error:`Property "${n}" does not match unevaluated properties schema.`},...i.errors)}}}else{const r=`${m}/additionalProperties`;for(const i in t){if(n[i])continue;const o=`${p}/${(0,s.encodePointer)(i)}`,m=e(t[i],$,l,c,d,u,o,r);m.valid?h[i]=!0:(a=d,le.push({instanceLocation:p,keyword:"additionalProperties",keywordLocation:r,error:`Property "${i}" does not match additional properties schema.`},...m.errors))}}}else if("array"===g){void 0!==J&&t.length>J&&le.push({instanceLocation:p,keyword:"maxItems",keywordLocation:`${m}/maxItems`,error:`Array has too many items (${t.length} > ${J}).`}),void 0!==W&&t.length<W&&le.push({instanceLocation:p,keyword:"minItems",keywordLocation:`${m}/minItems`,error:`Array has too few items (${t.length} < ${W}).`});const r=t.length;let a=0,i=!1;if(void 0!==B){const n=`${m}/prefixItems`,s=Math.min(B.length,r);for(;a<s;a++){const r=e(t[a],B[a],l,c,d,u,`${p}/${a}`,`${n}/${a}`);if(h[a]=!0,!r.valid&&(i=d,le.push({instanceLocation:p,keyword:"prefixItems",keywordLocation:n,error:"Items did not match schema."},...r.errors),i))break}}if(void 0!==V){const n=`${m}/items`;if(Array.isArray(V)){const s=Math.min(V.length,r);for(;a<s;a++){const r=e(t[a],V[a],l,c,d,u,`${p}/${a}`,`${n}/${a}`);if(h[a]=!0,!r.valid&&(i=d,le.push({instanceLocation:p,keyword:"items",keywordLocation:n,error:"Items did not match schema."},...r.errors),i))break}}else for(;a<r;a++){const r=e(t[a],V,l,c,d,u,`${p}/${a}`,n);if(h[a]=!0,!r.valid&&(i=d,le.push({instanceLocation:p,keyword:"items",keywordLocation:n,error:"Items did not match schema."},...r.errors),i))break}if(!i&&void 0!==Z){const n=`${m}/additionalItems`;for(;a<r;a++){const r=e(t[a],Z,l,c,d,u,`${p}/${a}`,n);h[a]=!0,r.valid||(i=d,le.push({instanceLocation:p,keyword:"additionalItems",keywordLocation:n,error:"Items did not match additional items schema."},...r.errors))}}}if(void 0!==q)if(0===r&&void 0===H)le.push({instanceLocation:p,keyword:"contains",keywordLocation:`${m}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(void 0!==H&&r<H)le.push({instanceLocation:p,keyword:"minContains",keywordLocation:`${m}/minContains`,error:`Array has less items (${r}) than minContains (${H}).`});else{const n=`${m}/contains`,a=le.length;let i=0;for(let a=0;a<r;a++){const r=e(t[a],q,l,c,d,u,`${p}/${a}`,n);r.valid?(h[a]=!0,i++):le.push(...r.errors)}i>=(H||0)&&(le.length=a),void 0===H&&void 0===K&&0===i?le.splice(a,0,{instanceLocation:p,keyword:"contains",keywordLocation:n,error:"Array does not contain item matching schema."}):void 0!==H&&i<H?le.push({instanceLocation:p,keyword:"minContains",keywordLocation:`${m}/minContains`,error:`Array must contain at least ${H} items matching schema. Only ${i} items were found.`}):void 0!==K&&i>K&&le.push({instanceLocation:p,keyword:"maxContains",keywordLocation:`${m}/maxContains`,error:`Array may contain at most ${K} items matching schema. ${i} items were found.`})}if(!i&&void 0!==G){const n=`${m}/unevaluatedItems`;for(;a<r;a++){if(h[a])continue;const r=e(t[a],G,l,c,d,u,`${p}/${a}`,n);h[a]=!0,r.valid||le.push({instanceLocation:p,keyword:"unevaluatedItems",keywordLocation:n,error:"Items did not match unevaluated items schema."},...r.errors)}}if(Y)for(let e=0;e<r;e++){const a=t[e],i="object"==typeof a&&null!==a;for(let s=0;s<r;s++){if(e===s)continue;const r=t[s];(a===r||i&&"object"==typeof r&&null!==r&&(0,n.deepCompareStrict)(a,r))&&(le.push({instanceLocation:p,keyword:"uniqueItems",keywordLocation:`${m}/uniqueItems`,error:`Duplicate items at indexes ${e} and ${s}.`}),e=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER)}}}else if("number"===g){if("4"===l?(void 0!==X&&(!0===ee&&t<=X||t<X)&&le.push({instanceLocation:p,keyword:"minimum",keywordLocation:`${m}/minimum`,error:`${t} is less than ${ee?"or equal to ":""} ${X}.`}),void 0!==Q&&(!0===te&&t>=Q||t>Q)&&le.push({instanceLocation:p,keyword:"maximum",keywordLocation:`${m}/maximum`,error:`${t} is greater than ${te?"or equal to ":""} ${Q}.`})):(void 0!==X&&t<X&&le.push({instanceLocation:p,keyword:"minimum",keywordLocation:`${m}/minimum`,error:`${t} is less than ${X}.`}),void 0!==Q&&t>Q&&le.push({instanceLocation:p,keyword:"maximum",keywordLocation:`${m}/maximum`,error:`${t} is greater than ${Q}.`}),void 0!==ee&&t<=ee&&le.push({instanceLocation:p,keyword:"exclusiveMinimum",keywordLocation:`${m}/exclusiveMinimum`,error:`${t} is less than ${ee}.`}),void 0!==te&&t>=te&&le.push({instanceLocation:p,keyword:"exclusiveMaximum",keywordLocation:`${m}/exclusiveMaximum`,error:`${t} is greater than or equal to ${te}.`})),void 0!==re){const e=t%re;Math.abs(0-e)>=1.1920929e-7&&Math.abs(re-e)>=1.1920929e-7&&le.push({instanceLocation:p,keyword:"multipleOf",keywordLocation:`${m}/multipleOf`,error:`${t} is not a multiple of ${re}.`})}}else if("string"===g){const e=void 0===ne&&void 0===ae?0:(0,o.ucs2length)(t);void 0!==ne&&e<ne&&le.push({instanceLocation:p,keyword:"minLength",keywordLocation:`${m}/minLength`,error:`String is too short (${e} < ${ne}).`}),void 0!==ae&&e>ae&&le.push({instanceLocation:p,keyword:"maxLength",keywordLocation:`${m}/maxLength`,error:`String is too long (${e} > ${ae}).`}),void 0===ie||new RegExp(ie,"u").test(t)||le.push({instanceLocation:p,keyword:"pattern",keywordLocation:`${m}/pattern`,error:"String does not match pattern."}),void 0!==C&&i.format[C]&&!i.format[C](t)&&le.push({instanceLocation:p,keyword:"format",keywordLocation:`${m}/format`,error:`String does not match format "${C}".`})}return{valid:0===le.length,errors:le}};const n=r(95734),a=r(43764),i=r(31949),s=r(94845),o=r(50096)},78624:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DOMException:()=>w,Headers:()=>d,Request:()=>y,Response:()=>b,fetch:()=>P});var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},a={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};if(a.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return a.iterable&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function u(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function p(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function m(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a.arrayBuffer&&a.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=h(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return u(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(a.blob)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,a,i=u(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=p(t=new FileReader),a=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,a),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=o(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype.delete=function(e){delete this.map[o(e)]},d.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},d.prototype.set=function(e,t){this.map[o(e)]=l(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),c(e)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},d.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),c(e)},a.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var g=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function y(e,t){if(!(this instanceof y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,a,i=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(a=(r=t.method||this.method||"GET").toUpperCase(),g.indexOf(a)>-1?a:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),a=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(a))}}),t}function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},f.call(y.prototype),f.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var _=[301,302,303,307,308];b.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})};var w=n.DOMException;try{new w}catch(e){(w=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),w.prototype.constructor=w}function P(e,t){return new Promise(function(r,i){var s=new y(e,t);if(s.signal&&s.signal.aborted)return i(new w("Aborted","AbortError"));var c=new XMLHttpRequest;function u(){c.abort()}if(c.onload=function(){var e,t,n={statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var a=r.join(":").trim();try{t.append(n,a)}catch(e){console.warn("Response "+e.message)}}}),t)};0===s.url.indexOf("file://")&&(c.status<200||c.status>599)?n.status=200:n.status=c.status,n.url="responseURL"in c?c.responseURL:n.headers.get("X-Request-URL");var a="response"in c?c.response:c.responseText;setTimeout(function(){r(new b(a,n))},0)},c.onerror=function(){setTimeout(function(){i(new TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){i(new TypeError("Network request timed out"))},0)},c.onabort=function(){setTimeout(function(){i(new w("Aborted","AbortError"))},0)},c.open(s.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(s.url),!0),"include"===s.credentials?c.withCredentials=!0:"omit"===s.credentials&&(c.withCredentials=!1),"responseType"in c&&(a.blob?c.responseType="blob":a.arrayBuffer&&(c.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof d||n.Headers&&t.headers instanceof n.Headers)){var p=[];Object.getOwnPropertyNames(t.headers).forEach(function(e){p.push(o(e)),c.setRequestHeader(e,l(t.headers[e]))}),s.headers.forEach(function(e,t){-1===p.indexOf(t)&&c.setRequestHeader(t,e)})}else s.headers.forEach(function(e,t){c.setRequestHeader(t,e)});s.signal&&(s.signal.addEventListener("abort",u),c.onreadystatechange=function(){4===c.readyState&&s.signal.removeEventListener("abort",u)}),c.send(void 0===s._bodyInit?null:s._bodyInit)})}P.polyfill=!0,n.fetch||(n.fetch=P,n.Headers=d,n.Request=y,n.Response=b)},78657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAbortablePromise=function(e,t){const{cleanupBeforeAbort:r,abortSignal:a,abortErrorMsg:i}=null!=t?t:{};return new Promise((t,s)=>{function o(){s(new n.AbortError(null!=i?i:"The operation was aborted."))}function l(){null==a||a.removeEventListener("abort",c)}function c(){null==r||r(),l(),o()}if(null==a?void 0:a.aborted)return o();try{e(e=>{l(),t(e)},e=>{l(),s(e)})}catch(e){s(e)}null==a||a.addEventListener("abort",c)})};const n=r(20411)},78728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFile=void 0;var n=r(76666);Object.defineProperty(t,"toFile",{enumerable:!0,get:function(){return n.toFile}})},78731:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRestError=function(e,t){var r,a,o;const l="string"==typeof e?t:e,c=null!==(a=null===(r=l.body)||void 0===r?void 0:r.error)&&void 0!==a?a:l.body,d="string"==typeof e?e:null!==(o=null==c?void 0:c.message)&&void 0!==o?o:`Unexpected status code: ${l.status}`;return new n.RestError(d,{statusCode:s(l.status),code:null==c?void 0:c.code,request:l.request,response:i(l)})};const n=r(79227),a=r(18873);function i(e){var t;return{headers:(0,a.createHttpHeaders)(e.headers),request:e.request,status:null!==(t=s(e.status))&&void 0!==t?t:-1}}function s(e){const t=Number.parseInt(e);return Number.isNaN(t)?void 0:t}},78873:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePromiseDef=void 0;const n=r(84769);t.parsePromiseDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},78963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._LC_CONTEXT_VARIABLES_KEY=void 0,t._LC_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables")},79045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completions=void 0;const n=r(82040);class a extends n.APIResource{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}t.Completions=a},79102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionMessageChunk=t.FunctionMessage=void 0,t.isFunctionMessage=function(e){return"function"===e._getType()},t.isFunctionMessageChunk=function(e){return"function"===e._getType()};const n=r(15785);class a extends n.BaseMessage{static lc_name(){return"FunctionMessage"}constructor(e,t){"string"==typeof e&&(e={content:e,name:t}),super(e)}_getType(){return"function"}}t.FunctionMessage=a;class i extends n.BaseMessageChunk{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}t.FunctionMessageChunk=i},79170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tracingPolicyName=void 0,t.tracingPolicy=function(e={}){const r=(0,i.getUserAgentValue)(e.userAgentPrefix),d=new c.Sanitizer({additionalAllowedQueryParameters:e.additionalAllowedQueryParameters}),u=function(){try{return(0,n.createTracingClient)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:a.SDK_VERSION})}catch(e){return void s.logger.warning(`Error when creating the TracingClient: ${(0,o.getErrorMessage)(e)}`)}}();return{name:t.tracingPolicyName,async sendRequest(e,t){var n;if(!u)return t(e);const a=await r,i={"http.url":d.sanitizeUrl(e.url),"http.method":e.method,"http.user_agent":a,requestId:e.requestId};a&&(i["http.user_agent"]=a);const{span:c,tracingContext:p}=null!==(n=function(e,t,r){try{const{span:n,updatedOptions:a}=e.startSpan(`HTTP ${t.method}`,{tracingOptions:t.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording())return void n.end();const i=e.createRequestHeaders(a.tracingOptions.tracingContext);for(const[e,r]of Object.entries(i))t.headers.set(e,r);return{span:n,tracingContext:a.tracingOptions.tracingContext}}catch(e){return void s.logger.warning(`Skipping creating a tracing span due to an error: ${(0,o.getErrorMessage)(e)}`)}}(u,e,i))&&void 0!==n?n:{};if(!c||!p)return t(e);try{const r=await u.withContext(p,t,e);return function(e,t){try{e.setAttribute("http.status_code",t.status);const r=t.headers.get("x-ms-request-id");r&&e.setAttribute("serviceRequestId",r),t.status>=400&&e.setStatus({status:"error"}),e.end()}catch(e){s.logger.warning(`Skipping tracing span processing due to an error: ${(0,o.getErrorMessage)(e)}`)}}(c,r),r}catch(e){throw function(e,t){try{e.setStatus({status:"error",error:(0,o.isError)(t)?t:void 0}),(0,l.isRestError)(t)&&t.statusCode&&e.setAttribute("http.status_code",t.statusCode),e.end()}catch(e){s.logger.warning(`Skipping tracing span processing due to an error: ${(0,o.getErrorMessage)(e)}`)}}(c,e),e}}}};const n=r(68126),a=r(9670),i=r(23288),s=r(73413),o=r(16184),l=r(64863),c=r(39111);t.tracingPolicyName="tracingPolicy"},79227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestError=void 0,t.isRestError=function(e){return e instanceof s||(0,n.isError)(e)&&"RestError"===e.name};const n=r(56354),a=r(96852),i=new(r(37839).Sanitizer);class s extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,Object.defineProperty(this,"request",{value:t.request,enumerable:!1}),Object.defineProperty(this,"response",{value:t.response,enumerable:!1}),Object.defineProperty(this,a.custom,{value:()=>`RestError: ${this.message} \n ${i.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,enumerable:!1}),Object.setPrototypeOf(this,s.prototype)}}t.RestError=s,s.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",s.PARSE_ERROR="PARSE_ERROR"},79263:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseArrayDef=void 0;const n=r(7552),a=r(47027),i=r(55767);t.parseArrayDef=function(e,t){const r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==n.ZodFirstPartyTypeKind.ZodAny&&(r.items=(0,i.parseDef)(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(0,a.setResponseValueAndErrors)(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&(0,a.setResponseValueAndErrors)(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&((0,a.setResponseValueAndErrors)(r,"minItems",e.exactLength.value,e.exactLength.message,t),(0,a.setResponseValueAndErrors)(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}},79325:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(99317),t),a(r(90819),t),a(r(96370),t),a(r(92034),t),a(r(80491),t),a(r(28651),t)},79478:e=>{"use strict";e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");return t=void 0===t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},79582:(e,t,r)=>{e.exports=r(50383)},79608:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureOpenAIEmbeddings=void 0;const n=r(69972),a=r(34954),i=r(40338),s=r(69157),o=r(1637),l=r(18677);class c extends n.Embeddings{constructor(e){const t={maxConcurrency:2,...e};super(t),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.azureOpenAIApiDeploymentName=(t?.azureOpenAIEmbeddingsApiDeploymentName||t?.azureOpenAIApiDeploymentName)??((0,s.getEnvironmentVariable)("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||(0,s.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureOpenAIEndpoint=e?.azureOpenAIEndpoint??(0,s.getEnvironmentVariable)("AZURE_OPENAI_API_ENDPOINT");const r=e?.apiKey??e?.openAIApiKey??(0,s.getEnvironmentVariable)("OPENAI_API_KEY");this.azureOpenAIApiKey=e?.apiKey??e?.azureOpenAIApiKey??(0,s.getEnvironmentVariable)("AZURE_OPENAI_API_KEY")??r,this.apiKey=this.azureOpenAIApiKey;const n=e?.credentials??(this.apiKey===r?new a.OpenAIKeyCredential(this.apiKey??""):new a.AzureKeyCredential(this.apiKey??"")),o=n instanceof a.OpenAIKeyCredential;if(!this.apiKey&&!e?.credentials)throw new Error("Azure OpenAI API key not found");if(!this.azureOpenAIEndpoint&&!o)throw new Error("Azure OpenAI Endpoint not found");if(!this.azureOpenAIApiDeploymentName&&!o)throw new Error("Azure OpenAI Deployment name not found");this.modelName=t?.model??t?.modelName??this.model,this.model=this.modelName,this.batchSize=t?.batchSize??(this.apiKey?1:this.batchSize),this.stripNewLines=t?.stripNewLines??this.stripNewLines,this.timeout=t?.timeout;const c={userAgentOptions:{userAgentPrefix:l.USER_AGENT_PREFIX}};o?this.client=new a.OpenAIClient(n):((0,i.isTokenCredential)(n),this.client=new a.OpenAIClient(this.azureOpenAIEndpoint??"",n,c))}async embedDocuments(e){const t=(0,o.chunkArray)(this.stripNewLines?e.map(e=>e.replace(/\n/g," ")):e,this.batchSize).map(e=>this.getEmbeddings(e));return(await Promise.all(t)).flat()}async embedQuery(e){const t=[this.stripNewLines?e.replace(/\n/g," "):e];return(await this.getEmbeddings(t)).flat()}async getEmbeddings(e){const t=this.azureOpenAIApiDeploymentName||this.model;return(await this.caller.call(()=>this.client.getEmbeddings(t,e,{user:this.user,model:this.model,requestOptions:{timeout:this.timeout}}))).data.map(e=>e.embedding)}}t.AzureOpenAIEmbeddings=c},79632:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__setModuleDefault=t.__createBinding=void 0,t.__classPrivateFieldSet=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},t.__classPrivateFieldGet=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},t.__exportStar=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},t.__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=a(e),s=0;s<i.length;s++)"default"!==i[s]&&r(t,e,i[s]);return n(t,e),t};var r=Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};t.__createBinding=r;var n=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};t.__setModuleDefault=n;var a=function(e){return(a=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)}},79690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=void 0;var r="[...]",n={result:"[Circular]"},a=[],i=[];function s(e,t,r,n){var s=Object.getOwnPropertyDescriptor(n,r);void 0!==s.get?s.configurable?(Object.defineProperty(n,r,{value:e}),a.push([n,r,t,s])):i.push([t,r,e]):(n[r]=e,a.push([n,r,t]))}function o(e,t,a,i,l,c,d){var u;if(c+=1,"object"==typeof e&&null!==e){for(u=0;u<i.length;u++)if(i[u]===e)return void s(n,e,t,l);if(void 0!==d.depthLimit&&c>d.depthLimit)return void s(r,e,t,l);if(void 0!==d.edgesLimit&&a+1>d.edgesLimit)return void s(r,e,t,l);if(i.push(e),Array.isArray(e))for(u=0;u<e.length;u++)o(e[u],u,u,i,e,c,d);else{var p=Object.keys(e);for(u=0;u<p.length;u++){var m=p[u];o(e[m],m,u,i,e,c,d)}}i.pop()}}t.stringify=function(e,t,r,n){try{return JSON.stringify(e,t,r)}catch(c){if(!c.message?.includes("Converting circular structure to JSON"))return console.warn("[WARNING]: LangSmith received unserializable value."),"[Unserializable]";var s;console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),void 0===n&&(n={depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}),o(e,"",0,[],void 0,0,n);try{s=0===i.length?JSON.stringify(e,t,r):JSON.stringify(e,function(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(i.length>0)for(var n=0;n<i.length;n++){var a=i[n];if(a[1]===t&&a[0]===r){r=a[2],i.splice(n,1);break}}return e.call(this,t,r)}}(t),r)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==a.length;){var l=a.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return s}}},79777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graders=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(35137)),s=r(35137);class o extends a.APIResource{constructor(){super(...arguments),this.graderModels=new i.GraderModels(this._client)}}t.Graders=o,o.GraderModels=s.GraderModels},79896:e=>{"use strict";e.exports=require("fs")},79923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDefaultDef=void 0;const n=r(55767);t.parseDefaultDef=function(e,t){return{...(0,n.parseDef)(e.innerType._def,t),default:e.defaultValue()}}},79998:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,a=e.length;for(;a>0;){const i=a/2|0;let s=n+i;r(e[s],t)<=0?(n=++s,a-=i+1):a=i}return n}},80106:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToHttpEventStream=function(e){const t=new TextEncoder,r=new ReadableStream({async start(r){for await(const n of e)r.enqueue(t.encode(`event: data\ndata: ${JSON.stringify(n)}\n\n`));r.enqueue(t.encode("event: end\n\n")),r.close()}});return n.IterableReadableStream.fromReadableStream(r)};const n=r(28033)},80202:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultToolCallParser=t.ToolMessageChunk=t.ToolMessage=void 0;const n=r(66267);class a extends n.BaseMessage{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,t,r){"string"==typeof e&&(e={content:e,name:r,tool_call_id:t}),super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return"tool"===e._getType()}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}t.ToolMessage=a;class i extends n.BaseMessageChunk{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new i({content:(0,n.mergeContent)(this.content,e.content),additional_kwargs:(0,n._mergeDicts)(this.additional_kwargs,e.additional_kwargs),response_metadata:(0,n._mergeDicts)(this.response_metadata,e.response_metadata),artifact:(0,n._mergeObj)(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:(0,n._mergeStatus)(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}t.ToolMessageChunk=i,t.defaultToolCallParser=function(e){const t=[],r=[];for(const n of e)if(n.function){const e=n.function.name;try{const r={name:e||"",args:JSON.parse(n.function.arguments)||{},id:n.id};t.push(r)}catch(t){r.push({name:e,args:n.function.arguments,id:n.id,error:"Malformed args."})}}return[t,r]}},80277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readEnv=void 0,t.readEnv=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0},80491:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.discriminatedUnion=t.date=t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=void 0,t.datetimeRegex=C,t.custom=Oe;const n=r(28651),a=r(99317),i=r(43368),s=r(90819),o=r(92034);class l{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const c=(e,t)=>{if((0,s.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new n.ZodError(e.common.issues);return this._error=t,this._error}}};function d(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{const{message:i}=e;return"invalid_enum_value"===t.code?{message:i??a.defaultError}:void 0===a.data?{message:i??n??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:i??r??a.defaultError}},description:a}}class u{get description(){return this._def.description}_getType(e){return(0,o.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,o.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new s.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,o.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if((0,s.isAsync)(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,o.getParsedType)(e)},n=this._parseSync({data:e,path:r.path,parent:r});return c(r,n)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,o.getParsedType)(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return(0,s.isValid)(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>(0,s.isValid)(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,o.getParsedType)(e)},n=this._parse({data:e,path:r.path,parent:r}),a=await((0,s.isAsync)(n)?n:Promise.resolve(n));return c(r,a)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,a)=>{const i=e(t),s=()=>a.addIssue({code:n.ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new me({schema:this,typeName:Se.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return he.create(this,this._def)}nullable(){return fe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return K.create(this)}promise(){return pe.create(this,this._def)}or(e){return Y.create([this,e],this._def)}and(e){return te.create(this,e,this._def)}transform(e){return new me({...d(this._def),schema:this,typeName:Se.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ge({...d(this._def),innerType:this,defaultValue:t,typeName:Se.ZodDefault})}brand(){return new be({typeName:Se.ZodBranded,type:this,...d(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ye({...d(this._def),innerType:this,catchValue:t,typeName:Se.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return _e.create(this,e)}readonly(){return we.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=u,t.Schema=u,t.ZodSchema=u;const p=/^c[^\s-]{8,}$/i,m=/^[0-9a-z]+$/,h=/^[0-9A-HJKMNP-TV-Z]{26}$/i,f=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,g=/^[a-z0-9_-]{21}$/i,y=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,v=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,b=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let _;const w=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,P=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,O=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,S=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,E=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,A=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,I="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",k=new RegExp(`^${I}$`);function T(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function j(e){return new RegExp(`^${T(e)}$`)}function C(e){let t=`${I}T${T(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function x(e,t){return!("v4"!==t&&t||!w.test(e))||!("v6"!==t&&t||!O.test(e))}function N(e,t){if(!y.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!("object"!=typeof a||null===a||"typ"in a&&"JWT"!==a?.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function $(e,t){return!("v4"!==t&&t||!P.test(e))||!("v6"!==t&&t||!S.test(e))}class R extends u{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==o.ZodParsedType.string){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.string,received:t.parsedType}),s.INVALID}const t=new s.ParseStatus;let r;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(r=this._getOrReturnCtx(e,r),i?(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)b.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"email",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)_||(_=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),_.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"emoji",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)f.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"uuid",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("nanoid"===a.kind)g.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"nanoid",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)p.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"cuid",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)m.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"cuid2",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)h.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"ulid",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"url",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"regex",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty()):"datetime"===a.kind?C(a).test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_string,validation:"datetime",message:a.message}),t.dirty()):"date"===a.kind?k.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_string,validation:"date",message:a.message}),t.dirty()):"time"===a.kind?j(a).test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_string,validation:"time",message:a.message}),t.dirty()):"duration"===a.kind?v.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"duration",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"ip"===a.kind?x(e.data,a.version)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"ip",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"jwt"===a.kind?N(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"jwt",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"cidr"===a.kind?$(e.data,a.version)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"cidr",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"base64"===a.kind?E.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"base64",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):"base64url"===a.kind?A.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"base64url",code:n.ZodIssueCode.invalid_string,message:a.message}),t.dirty()):o.util.assertNever(a);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:n.ZodIssueCode.invalid_string,...i.errorUtil.errToObj(r)})}_addCheck(e){return new R({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...i.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...i.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...i.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...i.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...i.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...i.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...i.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...i.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...i.errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...i.errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...i.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...i.errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...i.errorUtil.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...i.errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...i.errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...i.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...i.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...i.errorUtil.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...i.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...i.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...i.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...i.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...i.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,i.errorUtil.errToObj(e))}trim(){return new R({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new R({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new R({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function M(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}t.ZodString=R,R.create=e=>new R({checks:[],typeName:Se.ZodString,coerce:e?.coerce??!1,...d(e)});class D extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==o.ZodParsedType.number){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.number,received:t.parsedType}),s.INVALID}let t;const r=new s.ParseStatus;for(const a of this._def.checks)"int"===a.kind?o.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==M(e.data,a.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.not_finite,message:a.message}),r.dirty()):o.util.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,i.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.errorUtil.toString(t))}setLimit(e,t,r,n){return new D({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:i.errorUtil.toString(n)}]})}_addCheck(e){return new D({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:i.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:i.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:i.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:i.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:i.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:i.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:i.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:i.errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&o.util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}t.ZodNumber=D,D.create=e=>new D({checks:[],typeName:Se.ZodNumber,coerce:e?.coerce||!1,...d(e)});class L extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==o.ZodParsedType.bigint)return this._getInvalidInput(e);let t;const r=new s.ParseStatus;for(const a of this._def.checks)"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):o.util.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.bigint,received:t.parsedType}),s.INVALID}gte(e,t){return this.setLimit("min",e,!0,i.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.errorUtil.toString(t))}setLimit(e,t,r,n){return new L({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:i.errorUtil.toString(n)}]})}_addCheck(e){return new L({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:i.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:i.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:i.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:i.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodBigInt=L,L.create=e=>new L({checks:[],typeName:Se.ZodBigInt,coerce:e?.coerce??!1,...d(e)});class F extends u{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==o.ZodParsedType.boolean){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.boolean,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodBoolean=F,F.create=e=>new F({typeName:Se.ZodBoolean,coerce:e?.coerce||!1,...d(e)});class U extends u{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==o.ZodParsedType.date){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.date,received:t.parsedType}),s.INVALID}if(Number.isNaN(e.data.getTime())){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_date}),s.INVALID}const t=new s.ParseStatus;let r;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),t.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),t.dirty()):o.util.assertNever(a);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new U({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:i.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:i.errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t.ZodDate=U,U.create=e=>new U({checks:[],coerce:e?.coerce||!1,typeName:Se.ZodDate,...d(e)});class z extends u{_parse(e){if(this._getType(e)!==o.ZodParsedType.symbol){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.symbol,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodSymbol=z,z.create=e=>new z({typeName:Se.ZodSymbol,...d(e)});class B extends u{_parse(e){if(this._getType(e)!==o.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.undefined,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodUndefined=B,B.create=e=>new B({typeName:Se.ZodUndefined,...d(e)});class V extends u{_parse(e){if(this._getType(e)!==o.ZodParsedType.null){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.null,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodNull=V,V.create=e=>new V({typeName:Se.ZodNull,...d(e)});class Z extends u{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,s.OK)(e.data)}}t.ZodAny=Z,Z.create=e=>new Z({typeName:Se.ZodAny,...d(e)});class G extends u{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,s.OK)(e.data)}}t.ZodUnknown=G,G.create=e=>new G({typeName:Se.ZodUnknown,...d(e)});class q extends u{_parse(e){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.never,received:t.parsedType}),s.INVALID}}t.ZodNever=q,q.create=e=>new q({typeName:Se.ZodNever,...d(e)});class H extends u{_parse(e){if(this._getType(e)!==o.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.void,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodVoid=H,H.create=e=>new H({typeName:Se.ZodVoid,...d(e)});class K extends u{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),a=this._def;if(t.parsedType!==o.ZodParsedType.array)return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.array,received:t.parsedType}),s.INVALID;if(null!==a.exactLength){const e=t.data.length>a.exactLength.value,i=t.data.length<a.exactLength.value;(e||i)&&((0,s.addIssueToContext)(t,{code:e?n.ZodIssueCode.too_big:n.ZodIssueCode.too_small,minimum:i?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(null!==a.minLength&&t.data.length<a.minLength.value&&((0,s.addIssueToContext)(t,{code:n.ZodIssueCode.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),null!==a.maxLength&&t.data.length>a.maxLength.value&&((0,s.addIssueToContext)(t,{code:n.ZodIssueCode.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>a.type._parseAsync(new l(t,e,t.path,r)))).then(e=>s.ParseStatus.mergeArray(r,e));const i=[...t.data].map((e,r)=>a.type._parseSync(new l(t,e,t.path,r)));return s.ParseStatus.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new K({...this._def,minLength:{value:e,message:i.errorUtil.toString(t)}})}max(e,t){return new K({...this._def,maxLength:{value:e,message:i.errorUtil.toString(t)}})}length(e,t){return new K({...this._def,exactLength:{value:e,message:i.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function W(e){if(e instanceof J){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=he.create(W(n))}return new J({...e._def,shape:()=>t})}return e instanceof K?new K({...e._def,type:W(e.element)}):e instanceof he?he.create(W(e.unwrap())):e instanceof fe?fe.create(W(e.unwrap())):e instanceof re?re.create(e.items.map(e=>W(e))):e}t.ZodArray=K,K.create=(e,t)=>new K({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Se.ZodArray,...d(t)});class J extends u{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=o.util.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==o.ZodParsedType.object){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.object,received:t.parsedType}),s.INVALID}const{status:t,ctx:r}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),c=[];if(!(this._def.catchall instanceof q&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||c.push(e);const d=[];for(const e of i){const t=a[e],n=r.data[e];d.push({key:{status:"valid",value:e},value:t._parse(new l(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof q){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of c)d.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)c.length>0&&((0,s.addIssueToContext)(r,{code:n.ZodIssueCode.unrecognized_keys,keys:c}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of c){const n=r.data[t];d.push({key:{status:"valid",value:t},value:e._parse(new l(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of d){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>s.ParseStatus.mergeObjectSync(t,e)):s.ParseStatus.mergeObjectSync(t,d)}get shape(){return this._def.shape()}strict(e){return i.errorUtil.errToObj,new J({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{const n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:i.errorUtil.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new J({...this._def,unknownKeys:"strip"})}passthrough(){return new J({...this._def,unknownKeys:"passthrough"})}extend(e){return new J({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new J({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Se.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new J({...this._def,catchall:e})}pick(e){const t={};for(const r of o.util.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new J({...this._def,shape:()=>t})}omit(e){const t={};for(const r of o.util.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new J({...this._def,shape:()=>t})}deepPartial(){return W(this)}partial(e){const t={};for(const r of o.util.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new J({...this._def,shape:()=>t})}required(e){const t={};for(const r of o.util.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof he;)e=e._def.innerType;t[r]=e}return new J({...this._def,shape:()=>t})}keyof(){return ce(o.util.objectKeys(this.shape))}}t.ZodObject=J,J.create=(e,t)=>new J({shape:()=>e,unknownKeys:"strip",catchall:q.create(),typeName:Se.ZodObject,...d(t)}),J.strictCreate=(e,t)=>new J({shape:()=>e,unknownKeys:"strict",catchall:q.create(),typeName:Se.ZodObject,...d(t)}),J.lazycreate=(e,t)=>new J({shape:e,unknownKeys:"strip",catchall:q.create(),typeName:Se.ZodObject,...d(t)});class Y extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map(e=>new n.ZodError(e.ctx.common.issues));return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_union,unionErrors:r}),s.INVALID});{let e;const a=[];for(const n of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&a.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=a.map(e=>new n.ZodError(e));return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_union,unionErrors:i}),s.INVALID}}get options(){return this._def.options}}t.ZodUnion=Y,Y.create=(e,t)=>new Y({options:e,typeName:Se.ZodUnion,...d(t)});const X=e=>e instanceof oe?X(e.schema):e instanceof me?X(e.innerType()):e instanceof le?[e.value]:e instanceof de?e.options:e instanceof ue?o.util.objectValues(e.enum):e instanceof ge?X(e._def.innerType):e instanceof B?[void 0]:e instanceof V?[null]:e instanceof he?[void 0,...X(e.unwrap())]:e instanceof fe?[null,...X(e.unwrap())]:e instanceof be||e instanceof we?X(e.unwrap()):e instanceof ye?X(e._def.innerType):[];class Q extends u{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==o.ZodParsedType.object)return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.object,received:t.parsedType}),s.INVALID;const r=this.discriminator,a=t.data[r],i=this.optionsMap.get(a);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):((0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),s.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=X(r.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of t){if(n.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,r)}}return new Q({typeName:Se.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...d(r)})}}function ee(e,t){const r=(0,o.getParsedType)(e),n=(0,o.getParsedType)(t);if(e===t)return{valid:!0,data:e};if(r===o.ZodParsedType.object&&n===o.ZodParsedType.object){const r=o.util.objectKeys(t),n=o.util.objectKeys(e).filter(e=>-1!==r.indexOf(e)),a={...e,...t};for(const r of n){const n=ee(e[r],t[r]);if(!n.valid)return{valid:!1};a[r]=n.data}return{valid:!0,data:a}}if(r===o.ZodParsedType.array&&n===o.ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const a=ee(e[n],t[n]);if(!a.valid)return{valid:!1};r.push(a.data)}return{valid:!0,data:r}}return r===o.ZodParsedType.date&&n===o.ZodParsedType.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}t.ZodDiscriminatedUnion=Q;class te extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),a=(e,a)=>{if((0,s.isAborted)(e)||(0,s.isAborted)(a))return s.INVALID;const i=ee(e.value,a.value);return i.valid?(((0,s.isDirty)(e)||(0,s.isDirty)(a))&&t.dirty(),{status:t.value,value:i.data}):((0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_intersection_types}),s.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>a(e,t)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}t.ZodIntersection=te,te.create=(e,t,r)=>new te({left:e,right:t,typeName:Se.ZodIntersection,...d(r)});class re extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.ZodParsedType.array)return(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.array,received:r.parsedType}),s.INVALID;if(r.data.length<this._def.items.length)return(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...r.data].map((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new l(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(a).then(e=>s.ParseStatus.mergeArray(t,e)):s.ParseStatus.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new re({...this._def,rest:e})}}t.ZodTuple=re,re.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new re({items:e,typeName:Se.ZodTuple,rest:null,...d(t)})};class ne extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.ZodParsedType.object)return(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.object,received:r.parsedType}),s.INVALID;const a=[],i=this._def.keyType,c=this._def.valueType;for(const e in r.data)a.push({key:i._parse(new l(r,e,r.path,e)),value:c._parse(new l(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?s.ParseStatus.mergeObjectAsync(t,a):s.ParseStatus.mergeObjectSync(t,a)}get element(){return this._def.valueType}static create(e,t,r){return new ne(t instanceof u?{keyType:e,valueType:t,typeName:Se.ZodRecord,...d(r)}:{keyType:R.create(),valueType:e,typeName:Se.ZodRecord,...d(t)})}}t.ZodRecord=ne;class ae extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.ZodParsedType.map)return(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.map,received:r.parsedType}),s.INVALID;const a=this._def.keyType,i=this._def.valueType,c=[...r.data.entries()].map(([e,t],n)=>({key:a._parse(new l(r,e,r.path,[n,"key"])),value:i._parse(new l(r,t,r.path,[n,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const r of c){const n=await r.key,a=await r.value;if("aborted"===n.status||"aborted"===a.status)return s.INVALID;"dirty"!==n.status&&"dirty"!==a.status||t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}})}{const e=new Map;for(const r of c){const n=r.key,a=r.value;if("aborted"===n.status||"aborted"===a.status)return s.INVALID;"dirty"!==n.status&&"dirty"!==a.status||t.dirty(),e.set(n.value,a.value)}return{status:t.value,value:e}}}}t.ZodMap=ae,ae.create=(e,t,r)=>new ae({valueType:t,keyType:e,typeName:Se.ZodMap,...d(r)});class ie extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==o.ZodParsedType.set)return(0,s.addIssueToContext)(r,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.set,received:r.parsedType}),s.INVALID;const a=this._def;null!==a.minSize&&r.data.size<a.minSize.value&&((0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),t.dirty()),null!==a.maxSize&&r.data.size>a.maxSize.value&&((0,s.addIssueToContext)(r,{code:n.ZodIssueCode.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),t.dirty());const i=this._def.valueType;function c(e){const r=new Set;for(const n of e){if("aborted"===n.status)return s.INVALID;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const d=[...r.data.values()].map((e,t)=>i._parse(new l(r,e,r.path,t)));return r.common.async?Promise.all(d).then(e=>c(e)):c(d)}min(e,t){return new ie({...this._def,minSize:{value:e,message:i.errorUtil.toString(t)}})}max(e,t){return new ie({...this._def,maxSize:{value:e,message:i.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t.ZodSet=ie,ie.create=(e,t)=>new ie({valueType:e,minSize:null,maxSize:null,typeName:Se.ZodSet,...d(t)});class se extends u{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==o.ZodParsedType.function)return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.function,received:t.parsedType}),s.INVALID;function r(e,r){return(0,s.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,a.getErrorMap)(),a.defaultErrorMap].filter(e=>!!e),issueData:{code:n.ZodIssueCode.invalid_arguments,argumentsError:r}})}function i(e,r){return(0,s.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,a.getErrorMap)(),a.defaultErrorMap].filter(e=>!!e),issueData:{code:n.ZodIssueCode.invalid_return_type,returnTypeError:r}})}const l={errorMap:t.common.contextualErrorMap},c=t.data;if(this._def.returns instanceof pe){const e=this;return(0,s.OK)(async function(...t){const a=new n.ZodError([]),s=await e._def.args.parseAsync(t,l).catch(e=>{throw a.addIssue(r(t,e)),a}),o=await Reflect.apply(c,this,s);return await e._def.returns._def.type.parseAsync(o,l).catch(e=>{throw a.addIssue(i(o,e)),a})})}{const e=this;return(0,s.OK)(function(...t){const a=e._def.args.safeParse(t,l);if(!a.success)throw new n.ZodError([r(t,a.error)]);const s=Reflect.apply(c,this,a.data),o=e._def.returns.safeParse(s,l);if(!o.success)throw new n.ZodError([i(s,o.error)]);return o.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new se({...this._def,args:re.create(e).rest(G.create())})}returns(e){return new se({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new se({args:e||re.create([]).rest(G.create()),returns:t||G.create(),typeName:Se.ZodFunction,...d(r)})}}t.ZodFunction=se;class oe extends u{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t.ZodLazy=oe,oe.create=(e,t)=>new oe({getter:e,typeName:Se.ZodLazy,...d(t)});class le extends u{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{received:t.data,code:n.ZodIssueCode.invalid_literal,expected:this._def.value}),s.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ce(e,t){return new de({values:e,typeName:Se.ZodEnum,...d(t)})}t.ZodLiteral=le,le.create=(e,t)=>new le({value:e,typeName:Se.ZodLiteral,...d(t)});class de extends u{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,s.addIssueToContext)(t,{expected:o.util.joinValues(r),received:t.parsedType,code:n.ZodIssueCode.invalid_type}),s.INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,s.addIssueToContext)(t,{received:t.data,code:n.ZodIssueCode.invalid_enum_value,options:r}),s.INVALID}return(0,s.OK)(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return de.create(e,{...this._def,...t})}exclude(e,t=this._def){return de.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}t.ZodEnum=de,de.create=ce;class ue extends u{_parse(e){const t=o.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==o.ZodParsedType.string&&r.parsedType!==o.ZodParsedType.number){const e=o.util.objectValues(t);return(0,s.addIssueToContext)(r,{expected:o.util.joinValues(e),received:r.parsedType,code:n.ZodIssueCode.invalid_type}),s.INVALID}if(this._cache||(this._cache=new Set(o.util.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=o.util.objectValues(t);return(0,s.addIssueToContext)(r,{received:r.data,code:n.ZodIssueCode.invalid_enum_value,options:e}),s.INVALID}return(0,s.OK)(e.data)}get enum(){return this._def.values}}t.ZodNativeEnum=ue,ue.create=(e,t)=>new ue({values:e,typeName:Se.ZodNativeEnum,...d(t)});class pe extends u{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==o.ZodParsedType.promise&&!1===t.common.async)return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.promise,received:t.parsedType}),s.INVALID;const r=t.parsedType===o.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,s.OK)(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}t.ZodPromise=pe,pe.create=(e,t)=>new pe({type:e,typeName:Se.ZodPromise,...d(t)});class me extends u{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Se.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:e=>{(0,s.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===n.type){const e=n.transform(r.data,a);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return s.INVALID;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?s.INVALID:"dirty"===n.status||"dirty"===t.value?(0,s.DIRTY)(n.value):n});{if("aborted"===t.value)return s.INVALID;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?s.INVALID:"dirty"===n.status||"dirty"===t.value?(0,s.DIRTY)(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,a);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?s.INVALID:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?s.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,s.isValid)(e))return s.INVALID;const i=n.transform(e.value,a);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>(0,s.isValid)(e)?Promise.resolve(n.transform(e.value,a)).then(e=>({status:t.value,value:e})):s.INVALID)}o.util.assertNever(n)}}t.ZodEffects=me,t.ZodTransformer=me,me.create=(e,t,r)=>new me({schema:e,typeName:Se.ZodEffects,effect:t,...d(r)}),me.createWithPreprocess=(e,t,r)=>new me({schema:t,effect:{type:"preprocess",transform:e},typeName:Se.ZodEffects,...d(r)});class he extends u{_parse(e){return this._getType(e)===o.ZodParsedType.undefined?(0,s.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodOptional=he,he.create=(e,t)=>new he({innerType:e,typeName:Se.ZodOptional,...d(t)});class fe extends u{_parse(e){return this._getType(e)===o.ZodParsedType.null?(0,s.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodNullable=fe,fe.create=(e,t)=>new fe({innerType:e,typeName:Se.ZodNullable,...d(t)});class ge extends u{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===o.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}t.ZodDefault=ge,ge.create=(e,t)=>new ge({innerType:e,typeName:Se.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...d(t)});class ye extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,s.isAsync)(a)?a.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new n.ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new n.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=ye,ye.create=(e,t)=>new ye({innerType:e,typeName:Se.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...d(t)});class ve extends u{_parse(e){if(this._getType(e)!==o.ZodParsedType.nan){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:n.ZodIssueCode.invalid_type,expected:o.ZodParsedType.nan,received:t.parsedType}),s.INVALID}return{status:"valid",value:e.data}}}t.ZodNaN=ve,ve.create=e=>new ve({typeName:Se.ZodNaN,...d(e)}),t.BRAND=Symbol("zod_brand");class be extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}t.ZodBranded=be;class _e extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),(0,s.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new _e({in:e,out:t,typeName:Se.ZodPipeline})}}t.ZodPipeline=_e;class we extends u{_parse(e){const t=this._def.innerType._parse(e),r=e=>((0,s.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,s.isAsync)(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}function Pe(e,t){const r="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof r?{message:r}:r}function Oe(e,t={},r){return e?Z.create().superRefine((n,a)=>{const i=e(n);if(i instanceof Promise)return i.then(e=>{if(!e){const e=Pe(t,n),i=e.fatal??r??!0;a.addIssue({code:"custom",...e,fatal:i})}});if(!i){const e=Pe(t,n),i=e.fatal??r??!0;a.addIssue({code:"custom",...e,fatal:i})}}):Z.create()}var Se;t.ZodReadonly=we,we.create=(e,t)=>new we({innerType:e,typeName:Se.ZodReadonly,...d(t)}),t.late={object:J.lazycreate},function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Se||(t.ZodFirstPartyTypeKind=Se={})),t.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>Oe(t=>t instanceof e,t);const Ee=R.create;t.string=Ee;const Ae=D.create;t.number=Ae;const Ie=ve.create;t.nan=Ie;const ke=L.create;t.bigint=ke;const Te=F.create;t.boolean=Te;const je=U.create;t.date=je;const Ce=z.create;t.symbol=Ce;const xe=B.create;t.undefined=xe;const Ne=V.create;t.null=Ne;const $e=Z.create;t.any=$e;const Re=G.create;t.unknown=Re;const Me=q.create;t.never=Me;const De=H.create;t.void=De;const Le=K.create;t.array=Le;const Fe=J.create;t.object=Fe;const Ue=J.strictCreate;t.strictObject=Ue;const ze=Y.create;t.union=ze;const Be=Q.create;t.discriminatedUnion=Be;const Ve=te.create;t.intersection=Ve;const Ze=re.create;t.tuple=Ze;const Ge=ne.create;t.record=Ge;const qe=ae.create;t.map=qe;const He=ie.create;t.set=He;const Ke=se.create;t.function=Ke;const We=oe.create;t.lazy=We;const Je=le.create;t.literal=Je;const Ye=de.create;t.enum=Ye;const Xe=ue.create;t.nativeEnum=Xe;const Qe=pe.create;t.promise=Qe;const et=me.create;t.effect=et,t.transformer=et;const tt=he.create;t.optional=tt;const rt=fe.create;t.nullable=rt;const nt=me.createWithPreprocess;t.preprocess=nt;const at=_e.create;t.pipeline=at,t.ostring=()=>Ee().optional(),t.onumber=()=>Ae().optional(),t.oboolean=()=>Te().optional(),t.coerce={string:e=>R.create({...e,coerce:!0}),number:e=>D.create({...e,coerce:!0}),boolean:e=>F.create({...e,coerce:!0}),bigint:e=>L.create({...e,coerce:!0}),date:e=>U.create({...e,coerce:!0})},t.NEVER=s.INVALID},80589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MAX:()=>n,NIL:()=>a,parse:()=>o,stringify:()=>d,v1:()=>_,v1ToV6:()=>w,v3:()=>O,v4:()=>E,v5:()=>A,v6:()=>I,v6ToV1:()=>k,v7:()=>x,validate:()=>s,version:()=>N});const n="ffffffff-ffff-ffff-ffff-ffffffffffff",a="00000000-0000-0000-0000-000000000000",i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,s=function(e){return"string"==typeof e&&i.test(e)},o=function(e){if(!s(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function c(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}const d=function(e,t=0){const r=c(e,t);if(!s(r))throw TypeError("Stringified UUID is invalid");return r};var u=r(77598),p=r.n(u);const m=new Uint8Array(256);let h,f,g=m.length;function y(){return g>m.length-16&&(p().randomFillSync(m),g=0),m.slice(g,g+=16)}let v=0,b=0;const _=function(e,t,r){let n=t&&r||0;const a=t||new Array(16);let i=(e=e||{}).node,s=e.clockseq;if(e._v6||(i||(i=h),null==s&&(s=f)),null==i||null==s){const t=e.random||(e.rng||y)();null==i&&(i=[t[0],t[1],t[2],t[3],t[4],t[5]],h||e._v6||(i[0]|=1,h=i)),null==s&&(s=16383&(t[6]<<8|t[7]),void 0!==f||e._v6||(f=s))}let o=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:b+1;const d=o-v+(l-b)/1e4;if(d<0&&void 0===e.clockseq&&(s=s+1&16383),(d<0||o>v)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=o,b=l,f=s,o+=122192928e5;const u=(1e4*(268435455&o)+l)%4294967296;a[n++]=u>>>24&255,a[n++]=u>>>16&255,a[n++]=u>>>8&255,a[n++]=255&u;const p=o/4294967296*1e4&268435455;a[n++]=p>>>8&255,a[n++]=255&p,a[n++]=p>>>24&15|16,a[n++]=p>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(let e=0;e<6;++e)a[n+e]=i[e];return t||c(a)};function w(e){const t=(r="string"==typeof e?o(e):e,Uint8Array.of((15&r[6])<<4|r[7]>>4&15,(15&r[7])<<4|(240&r[4])>>4,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,(15&r[1])<<4|(240&r[2])>>4,96|15&r[2],r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?c(t):t}function P(e,t,r){function n(e,n,a,i){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=o(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(n),l.set(e,n.length),l=r(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,a){i=i||0;for(let e=0;e<16;++e)a[i+e]=l[e];return a}return c(l)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const O=P("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),p().createHash("md5").update(e).digest()}),S={randomUUID:p().randomUUID},E=function(e,t,r){if(S.randomUUID&&!t&&!e)return S.randomUUID();const n=(e=e||{}).random||(e.rng||y)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return c(n)},A=P("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),p().createHash("sha1").update(e).digest()});function I(e={},t,r=0){let n=_({...e,_v6:!0},new Uint8Array(16));if(n=w(n),t){for(let e=0;e<16;e++)t[r+e]=n[e];return t}return c(n)}function k(e){const t=(r="string"==typeof e?o(e):e,Uint8Array.of((15&r[3])<<4|r[4]>>4&15,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|15&r[6],r[7],(15&r[1])<<4|(240&r[2])>>4,(15&r[2])<<4|(240&r[3])>>4,16|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?c(t):t}let T=null,j=null,C=0;const x=function(e,t,r){e=e||{};let n=t&&r||0;const a=t||new Uint8Array(16),i=e.random||(e.rng||y)(),s=void 0!==e.msecs?e.msecs:Date.now();let o=void 0!==e.seq?e.seq:null,l=j,d=T;return s>C&&void 0===e.msecs&&(C=s,null!==o&&(l=null,d=null)),null!==o&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,d=524287&o),null!==l&&null!==d||(l=127&i[6],l=l<<8|i[7],d=63&i[8],d=d<<8|i[9],d=d<<5|i[10]>>>3),s+1e4>C&&null===o?++d>524287&&(d=0,++l>4095&&(l=0,C++)):C=s,j=l,T=d,a[n++]=C/1099511627776&255,a[n++]=C/4294967296&255,a[n++]=C/16777216&255,a[n++]=C/65536&255,a[n++]=C/256&255,a[n++]=255&C,a[n++]=l>>>4&15|112,a[n++]=255&l,a[n++]=d>>>13&63|128,a[n++]=d>>>5&255,a[n++]=d<<3&255|7&i[10],a[n++]=i[11],a[n++]=i[12],a[n++]=i[13],a[n++]=i[14],a[n++]=i[15],t||c(a)},N=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},80601:(e,t,r)=>{e.exports=r(37738)},80694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeJSON=t.maybeCoerceBoolean=t.maybeCoerceFloat=t.maybeCoerceInteger=t.coerceBoolean=t.coerceFloat=t.coerceInteger=t.validatePositiveInteger=t.ensurePresent=t.isReadonlyArray=t.isArray=t.isAbsoluteURL=void 0,t.maybeObj=function(e){return"object"!=typeof e?{}:e??{}},t.isEmptyObj=function(e){if(!e)return!0;for(const t in e)return!1;return!0},t.hasOwn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.isObj=function(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)};const n=r(58092),a=/^[a-z][a-z0-9+.-]*:/i;t.isAbsoluteURL=e=>a.test(e),t.isArray=e=>(t.isArray=Array.isArray,(0,t.isArray)(e)),t.isReadonlyArray=t.isArray,t.ensurePresent=e=>{if(null==e)throw new n.AnthropicError(`Expected a value to be given but received ${e} instead.`);return e},t.validatePositiveInteger=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new n.AnthropicError(`${e} must be an integer`);if(t<0)throw new n.AnthropicError(`${e} must be a positive integer`);return t},t.coerceInteger=e=>{if("number"==typeof e)return Math.round(e);if("string"==typeof e)return parseInt(e,10);throw new n.AnthropicError(`Could not coerce ${e} (type: ${typeof e}) into a number`)},t.coerceFloat=e=>{if("number"==typeof e)return e;if("string"==typeof e)return parseFloat(e);throw new n.AnthropicError(`Could not coerce ${e} (type: ${typeof e}) into a number`)},t.coerceBoolean=e=>"boolean"==typeof e?e:"string"==typeof e?"true"===e:Boolean(e),t.maybeCoerceInteger=e=>{if(void 0!==e)return(0,t.coerceInteger)(e)},t.maybeCoerceFloat=e=>{if(void 0!==e)return(0,t.coerceFloat)(e)},t.maybeCoerceBoolean=e=>{if(void 0!==e)return(0,t.coerceBoolean)(e)},t.safeJSON=e=>{try{return JSON.parse(e)}catch(e){return}}},80716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multipartPolicyName=void 0,t.multipartPolicy=function(){const e=(0,n.multipartPolicy)();return{name:t.multipartPolicyName,sendRequest:async(t,r)=>{if(t.multipartBody)for(const e of t.multipartBody.parts)(0,a.hasRawContent)(e.body)&&(e.body=(0,a.getRawContent)(e.body));return e.sendRequest(t,r)}}};const n=r(17445),a=r(66444);t.multipartPolicyName=n.multipartPolicyName},80761:(e,t,r)=>{e.exports=r(83296)},80975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatOpenAI=t.ChatOpenAICompletions=t.ChatOpenAIResponses=t.BaseChatOpenAI=void 0,t.messageToOpenAIRole=w,t._convertMessagesToOpenAIParams=O;const n=r(32012),a=r(6500),i=r(79582),s=r(82331),o=r(80761),l=r(80601),c=r(4538),d=r(58618),u=r(82407),p=r(60845),m=r(8194),h=r(81047),f=r(65792),g=r(61970),y=r(2831),v="__openai_function_call_ids__";function b(e){return"type"in e&&"function"!==e.type}function _(e){return e&&/^o\d/.test(e)}function w(e){const t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!a.ChatMessage.isInstance(e))throw new Error("Invalid generic chat message");return function(e){return"system"!==e.role&&"developer"!==e.role&&"assistant"!==e.role&&"user"!==e.role&&"function"!==e.role&&"tool"!==e.role&&console.warn(`Unknown message role: ${e.role}`),e.role}(e);default:throw new Error(`Unknown message type: ${t}`)}}const P={providerName:"ChatOpenAI",fromStandardTextBlock:e=>({type:"text",text:e.text}),fromStandardImageBlock(e){if("url"===e.source_type)return{type:"image_url",image_url:{url:e.url,...e.metadata?.detail?{detail:e.metadata.detail}:{}}};if("base64"===e.source_type)return{type:"image_url",image_url:{url:`data:${e.mime_type??""};base64,${e.data}`,...e.metadata?.detail?{detail:e.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(e){if("url"===e.source_type){const t=(0,a.parseBase64DataUrl)({dataUrl:e.url});if(!t)throw new Error(`URL audio blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);const r=t.mime_type||e.mime_type||"";let n;try{n=(0,a.parseMimeType)(r)}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if("audio"!==n.type||"wav"!==n.subtype&&"mp3"!==n.subtype)throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:n.subtype,data:t.data}}}if("base64"===e.source_type){let t;try{t=(0,a.parseMimeType)(e.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if("audio"!==t.type||"wav"!==t.subtype&&"mp3"!==t.subtype)throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:t.subtype,data:e.data}}}throw new Error(`Audio content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(e){if("url"===e.source_type){if(!(0,a.parseBase64DataUrl)({dataUrl:e.url}))throw new Error(`URL file blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:e.url,...e.metadata?.filename||e.metadata?.name?{filename:e.metadata?.filename||e.metadata?.name}:{}}}}if("base64"===e.source_type)return{type:"file",file:{file_data:`data:${e.mime_type??""};base64,${e.data}`,...e.metadata?.filename||e.metadata?.name||e.metadata?.title?{filename:e.metadata?.filename||e.metadata?.name||e.metadata?.title}:{}}};if("id"===e.source_type)return{type:"file",file:{file_id:e.id}};throw new Error(`File content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)}};function O(e,t){return e.flatMap(e=>{let r=w(e);"system"===r&&_(t)&&(r="developer");const n={role:r,content:"string"==typeof e.content?e.content:e.content.map(e=>(0,a.isDataContentBlock)(e)?(0,a.convertToProviderContentBlock)(e,P):e)};return null!=e.name&&(n.name=e.name),null!=e.additional_kwargs.function_call&&(n.function_call=e.additional_kwargs.function_call,n.content=""),(0,a.isAIMessage)(e)&&e.tool_calls?.length?(n.tool_calls=e.tool_calls.map(u.convertLangChainToolCallToOpenAI),n.content=""):(null!=e.additional_kwargs.tool_calls&&(n.tool_calls=e.additional_kwargs.tool_calls),null!=e.tool_call_id&&(n.tool_call_id=e.tool_call_id)),e.additional_kwargs.audio&&"object"==typeof e.additional_kwargs.audio&&"id"in e.additional_kwargs.audio?[n,{role:"assistant",audio:{id:e.additional_kwargs.audio.id}}]:n})}class S extends o.BaseChatModel{_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning"]}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}identifyingParams(){return this._identifyingParams()}constructor(e){super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"service_tier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.apiKey=e?.apiKey??e?.configuration?.apiKey??(0,s.getEnvironmentVariable)("OPENAI_API_KEY"),this.organization=e?.configuration?.organization??(0,s.getEnvironmentVariable)("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoning=e?.reasoning,this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.disableStreaming=e?.disableStreaming??this.disableStreaming,this.streaming=e?.streaming??!1,this.disableStreaming&&(this.streaming=!1),this.streamUsage=e?.streamUsage??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration},void 0!==e?.supportsStrictToolCalling&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),void 0!==e?.service_tier&&(this.service_tier=e.service_tier),this.zdrEnabled=e?.zdrEnabled??!1}_getReasoningParams(e){if(!_(this.model))return;let t;return void 0!==this.reasoning&&(t={...t,...this.reasoning}),void 0!==e?.reasoning&&(t={...t,...e.reasoning}),t}_getResponseFormat(e){return e&&"json_schema"===e.type&&e.json_schema.schema&&(0,p.isInteropZodSchema)(e.json_schema.schema)?(0,f.interopZodResponseFormat)(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return{...this.defaultOptions,...e??{}}}_getClientOptions(e){if(!this.client){const e={baseURL:this.clientConfig.baseURL},t=(0,h.getEndpoint)(e),r={...this.clientConfig,baseURL:t,timeout:this.timeout,maxRetries:0};r.baseURL||delete r.baseURL,this.client=new n.OpenAI(r)}return{...this.clientConfig,...e}}_convertChatOpenAIToolToCompletionsTool(e,t){return(0,l.isOpenAITool)(e)?void 0!==t?.strict?{...e,function:{...e.function,strict:t.strict}}:e:(0,y._convertToOpenAITool)(e,t)}bindTools(e,t){let r;return void 0!==t?.strict?r=t.strict:void 0!==this.supportsStrictToolCalling&&(r=this.supportsStrictToolCalling),this.withConfig({tools:e.map(e=>b(e)?e:this._convertChatOpenAIToolToCompletionsTool(e,{strict:r})),...t})}async stream(e,t){return super.stream(e,this._combineCallOptions(t))}async invoke(e,t){return super.invoke(e,this._combineCallOptions(t))}_combineLLMOutput(...e){return e.reduce((e,t)=>(t&&t.tokenUsage&&(e.tokenUsage.completionTokens+=t.tokenUsage.completionTokens??0,e.tokenUsage.promptTokens+=t.tokenUsage.promptTokens??0,e.tokenUsage.totalTokens+=t.tokenUsage.totalTokens??0),e),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}async getNumTokensFromMessages(e){let t=0,r=0,n=0;"gpt-3.5-turbo-0301"===this.model?(r=4,n=-1):(r=3,n=1);const a=await Promise.all(e.map(async e=>{const a=await this.getNumTokens(e.content),i=await this.getNumTokens(w(e)),s=void 0!==e.name?n+await this.getNumTokens(e.name):0;let o=a+r+i+s;const l=e;if("function"===l._getType()&&(o-=2),l.additional_kwargs?.function_call&&(o+=3),l?.additional_kwargs.function_call?.name&&(o+=await this.getNumTokens(l.additional_kwargs.function_call?.name)),l.additional_kwargs.function_call?.arguments)try{o+=await this.getNumTokens(JSON.stringify(JSON.parse(l.additional_kwargs.function_call?.arguments)))}catch(e){console.error("Error parsing function arguments",e,JSON.stringify(l.additional_kwargs.function_call)),o+=await this.getNumTokens(l.additional_kwargs.function_call?.arguments)}return t+=o,o}));return t+=3,{totalCount:t,countPerMessage:a}}async _getNumTokensFromGenerations(e){return(await Promise.all(e.map(async e=>e.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([e.message])).countPerMessage[0]:await this.getNumTokens(e.message.content)))).reduce((e,t)=>e+t,0)}async _getEstimatedTokenCountFromPrompt(e,t,r){let n=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&"auto"!==r){const e=(0,g.formatFunctionDefinitions)(t);n+=await this.getNumTokens(e),n+=9}return t&&e.find(e=>"system"===e._getType())&&(n-=4),"none"===r?n+=1:"object"==typeof r&&(n+=await this.getNumTokens(r.name)+4),n}_getStructuredOutputMethod(e){const t={...e};if(this.model.startsWith("gpt-3")||this.model.startsWith("gpt-4-")||"gpt-4"===this.model)"jsonSchema"===t.method&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`);else if(void 0===t?.method)return"jsonSchema";return t.method}withStructuredOutput(e,t){let r,n,a,i;var s;let o,l;if(void 0!==(s=e)&&"object"==typeof s.schema?(r=e.schema,n=e.name,a=e.method,i=e.includeRaw):(r=e,n=t?.name,a=t?.method,i=t?.includeRaw),void 0!==t?.strict&&"jsonMode"===a)throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(a=this._getStructuredOutputMethod({...t,method:a}),"jsonMode"===a){l=(0,p.isInteropZodSchema)(r)?d.StructuredOutputParser.fromZodSchema(r):new d.JsonOutputParser;const e=(0,m.toJsonSchema)(r);o=this.withConfig({response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"json_mode"},schema:{title:n??"extract",...e}}})}else if("jsonSchema"===a){const e={name:n??"extract",description:(0,p.getSchemaDescription)(r),schema:r,strict:t?.strict},a=(0,m.toJsonSchema)(e.schema);if(o=this.withConfig({response_format:{type:"json_schema",json_schema:e},ls_structured_output_format:{kwargs:{method:"json_schema"},schema:{title:e.name,description:e.description,...a}}}),(0,p.isInteropZodSchema)(r)){const e=d.StructuredOutputParser.fromZodSchema(r);l=c.RunnableLambda.from(t=>"parsed"in t.additional_kwargs?t.additional_kwargs.parsed:e)}else l=new d.JsonOutputParser}else{let e=n??"extract";if((0,p.isInteropZodSchema)(r)){const n=(0,m.toJsonSchema)(r);o=this.withConfig({tools:[{type:"function",function:{name:e,description:n.description,parameters:n}}],tool_choice:{type:"function",function:{name:e}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:e,...n}},...void 0!==t?.strict?{strict:t.strict}:{}}),l=new u.JsonOutputKeyToolsParser({returnSingle:!0,keyName:e,zodSchema:r})}else{let n;"string"==typeof r.name&&"object"==typeof r.parameters&&null!=r.parameters?(n=r,e=r.name):(e=r.title??e,n={name:e,description:r.description??"",parameters:r});const a=(0,m.toJsonSchema)(r);o=this.withConfig({tools:[{type:"function",function:n}],tool_choice:{type:"function",function:{name:e}},ls_structured_output_format:{kwargs:{method:"function_calling"},schema:{title:e,...a}},...void 0!==t?.strict?{strict:t.strict}:{}}),l=new u.JsonOutputKeyToolsParser({returnSingle:!0,keyName:e})}}if(!i)return o.pipe(l);const h=c.RunnablePassthrough.assign({parsed:(e,t)=>l.invoke(e.raw,t)}),f=c.RunnablePassthrough.assign({parsed:()=>null}),g=h.withFallbacks({fallbacks:[f]});return c.RunnableSequence.from([{raw:o},g])}}t.BaseChatOpenAI=S;class E extends S{invocationParams(e){let t;void 0!==e?.strict?t=e.strict:void 0!==this.supportsStrictToolCalling&&(t=this.supportsStrictToolCalling);const r={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:t}):void 0,tool_choice:(n=e?.tool_choice,null!=n&&"object"==typeof n&&"type"in n&&"function"!==n.type?e?.tool_choice:(()=>{const t=(0,f.formatToOpenAIToolChoice)(e?.tool_choice);return"object"==typeof t&&"type"in t?{type:"function",name:t.function.name}:void 0})()),text:(()=>{if(e?.text)return e.text;const t=this._getResponseFormat(e?.response_format);return"json_schema"===t?.type?null!=t.json_schema.schema?{format:{type:"json_schema",schema:t.json_schema.schema,description:t.json_schema.description,name:t.json_schema.name,strict:t.json_schema.strict}}:void 0:{format:t}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:-1===this.maxTokens?void 0:this.maxTokens,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs};var n;const a=this._getReasoningParams(e);return void 0!==a&&(r.reasoning=a),r}async _generate(e,t){const r=this.invocationParams(t);if(r.stream){const r=this._streamResponseChunks(e,t);let n;for await(const e of r)e.message.response_metadata={...e.generationInfo,...e.message.response_metadata},n=n?.concat(e)??e;return{generations:n?[n]:[],llmOutput:{estimatedTokenUsage:n?.message?.usage_metadata}}}{const n=this._convertMessagesToResponsesParams(e),a=await this.completionWithRetry({input:n,...r,stream:!1},{signal:t?.signal,...t?.options});return{generations:[{text:a.output_text,message:this._convertResponsesMessageToBaseMessage(a)}],llmOutput:{id:a.id,estimatedTokenUsage:a.usage?{promptTokens:a.usage.input_tokens,completionTokens:a.usage.output_tokens,totalTokens:a.usage.total_tokens}:void 0}}}}async*_streamResponseChunks(e,t,r){const n=await this.completionWithRetry({...this.invocationParams(t),input:this._convertMessagesToResponsesParams(e),stream:!0},t);for await(const e of n){const n=this._convertResponsesDeltaToBaseMessageChunk(e);null!=n&&(yield n,await(r?.handleLLMNewToken(n.text||"",{prompt:t.promptIndex??0,completion:0},void 0,void 0,void 0,{chunk:n})))}}async completionWithRetry(e,t){return this.caller.call(async()=>{const r=this._getClientOptions(t);try{return"json_schema"!==e.text?.format?.type||e.stream?await this.client.responses.create(e,r):await this.client.responses.parse(e,r)}catch(e){throw(0,f.wrapOpenAIClientError)(e)}})}_convertResponsesMessageToBaseMessage(e){if(e.error){const t=new Error(e.error.message);throw t.name=e.error.code,t}let t;const r=[],n=[],i=[],s={model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},o={};for(const a of e.output)if("message"===a.type)t=a.id,r.push(...a.content.flatMap(e=>"output_text"===e.type?("parsed"in e&&null!=e.parsed&&(o.parsed=e.parsed),{type:"text",text:e.text,annotations:e.annotations}):"refusal"===e.type?(o.refusal=e.refusal,[]):e));else if("function_call"===a.type){const e={function:{name:a.name,arguments:a.arguments},id:a.call_id};try{n.push((0,u.parseToolCall)(e,{returnId:!0}))}catch(t){let r;"object"==typeof t&&null!=t&&"message"in t&&"string"==typeof t.message&&(r=t.message),i.push((0,u.makeInvalidToolCall)(e,r))}o[v]??={},a.id&&(o[v][a.call_id]=a.id)}else"reasoning"===a.type?o.reasoning=a:(o.tool_outputs??=[],o.tool_outputs.push(a));return new a.AIMessage({id:t,content:r,tool_calls:n,invalid_tool_calls:i,usage_metadata:e.usage,additional_kwargs:o,response_metadata:s})}_convertResponsesDeltaToBaseMessageChunk(e){const t=[];let r,n={};const s=[],o={},l={};let c;if("response.output_text.delta"===e.type)t.push({type:"text",text:e.delta,index:e.content_index});else if("response.output_text_annotation.added"===e.type)t.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if("response.output_item.added"===e.type&&"message"===e.item.type)c=e.item.id;else if("response.output_item.added"===e.type&&"function_call"===e.item.type)s.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),l[v]={[e.item.call_id]:e.item.id};else if("response.output_item.done"===e.type&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call"].includes(e.item.type))l.tool_outputs=[e.item];else if("response.created"===e.type)o.id=e.response.id,o.model_name=e.response.model,o.model=e.response.model;else if("response.completed"===e.type){const t=this._convertResponsesMessageToBaseMessage(e.response);r=e.response.usage,"json_schema"===e.response.text?.format?.type&&(l.parsed??=JSON.parse(t.text));for(const[t,r]of Object.entries(e.response))"id"!==t&&(o[t]=r)}else if("response.function_call_arguments.delta"===e.type)s.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if("response.web_search_call.completed"===e.type||"response.file_search_call.completed"===e.type)n={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if("response.refusal.done"===e.type)l.refusal=e.refusal;else if("response.output_item.added"===e.type&&"item"in e&&"reasoning"===e.item.type){const t=e.item.summary?e.item.summary.map((e,t)=>({...e,index:t})):void 0;l.reasoning={id:e.item.id,type:e.item.type,...t?{summary:t}:{}}}else if("response.reasoning_summary_part.added"===e.type)l.reasoning={type:"reasoning",summary:[{...e.part,index:e.summary_index}]};else{if("response.reasoning_summary_text.delta"!==e.type)return e.type,null;l.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]}}return new i.ChatGenerationChunk({text:t.map(e=>e.text).join(""),message:new a.AIMessageChunk({id:c,content:t,tool_call_chunks:s,usage_metadata:r,additional_kwargs:l,response_metadata:o}),generationInfo:n})}_convertMessagesToResponsesParams(e){return e.flatMap(e=>{const t=e.additional_kwargs;let r=w(e);if("system"===r&&_(this.model)&&(r="developer"),"function"===r)throw new Error("Function messages are not supported in Responses API");if("tool"===r){const r=e;return"computer_call_output"===t?.type?{type:"computer_call_output",output:(()=>{if("string"==typeof r.content)return{type:"computer_screenshot",image_url:r.content};if(Array.isArray(r.content)){const e=r.content.find(e=>"computer_screenshot"===e.type);if(e)return e;const t=r.content.find(e=>"image_url"===e.type);if(t)return{type:"computer_screenshot",image_url:"string"==typeof t.image_url?t.image_url:t.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:r.tool_call_id}:{type:"function_call_output",call_id:r.tool_call_id,id:r.id?.startsWith("fc_")?r.id:void 0,output:"string"!=typeof r.content?JSON.stringify(r.content):r.content}}if("assistant"===r){if(!this.zdrEnabled&&null!=e.response_metadata.output&&Array.isArray(e.response_metadata.output)&&e.response_metadata.output.length>0&&e.response_metadata.output.every(e=>"type"in e))return e.response_metadata.output;const r=[];if(t?.reasoning&&!this.zdrEnabled){const e=this._convertReasoningSummary(t.reasoning);r.push(e)}let{content:n}=e;t?.refusal&&("string"==typeof n&&(n=[{type:"output_text",text:n,annotations:[]}]),n=[...n,{type:"refusal",refusal:t.refusal}]),r.push({type:"message",role:"assistant",...e.id&&!this.zdrEnabled&&e.id.startsWith("msg_")?{id:e.id}:{},content:"string"==typeof n?n:n.flatMap(e=>"text"===e.type?{type:"output_text",text:e.text,annotations:e.annotations??[]}:"output_text"===e.type||"refusal"===e.type?e:[])});const i=t?.[v];(0,a.isAIMessage)(e)&&e.tool_calls?.length?r.push(...e.tool_calls.map(e=>({type:"function_call",name:e.name,arguments:JSON.stringify(e.args),call_id:e.id,...this.zdrEnabled?{id:i?.[e.id]}:{}}))):t?.tool_calls&&r.push(...t.tool_calls.map(e=>({type:"function_call",name:e.function.name,call_id:e.id,arguments:e.function.arguments,...this.zdrEnabled?{id:i?.[e.id]}:{}})));const s=e.response_metadata.output?.length?e.response_metadata.output:t.tool_outputs,o=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(null!=s){const e=s,t=e?.filter(e=>o.includes(e.type));t.length>0&&r.push(...t)}return r}if("user"===r||"system"===r||"developer"===r){if("string"==typeof e.content)return{type:"message",role:r,content:e.content};const t=[],n=e.content.flatMap(e=>("mcp_approval_response"===e.type&&t.push({type:"mcp_approval_response",approval_request_id:e.approval_request_id,approve:e.approve}),(0,a.isDataContentBlock)(e)?(0,a.convertToProviderContentBlock)(e,P):"text"===e.type?{type:"input_text",text:e.text}:"image_url"===e.type?{type:"input_image",image_url:"string"==typeof e.image_url?e.image_url:e.image_url.url,detail:"string"==typeof e.image_url?"auto":e.image_url.detail}:"input_text"===e.type||"input_image"===e.type||"input_file"===e.type?e:[]));return n.length>0&&t.push({type:"message",role:r,content:n}),t}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${r}`),[]})}_convertReasoningSummary(e){const t=(e.summary.length>1?e.summary.reduce((e,t)=>{const r=e.at(-1);return r.index===t.index?r.text+=t.text:e.push(t),e},[{...e.summary[0]}]):e.summary).map(e=>Object.fromEntries(Object.entries(e).filter(([e])=>"index"!==e)));return{...e,summary:t}}_reduceChatOpenAITools(e,t){const r=[];for(const n of e)b(n)?("image_generation"===n.type&&t?.stream&&(n.partial_images=1),r.push(n)):(0,l.isOpenAITool)(n)&&r.push({type:"function",name:n.function.name,parameters:n.function.parameters,description:n.function.description,strict:t?.strict??null});return r}}t.ChatOpenAIResponses=E;class A extends S{invocationParams(e,t){let r;void 0!==e?.strict?r=e.strict:void 0!==this.supportsStrictToolCalling&&(r=this.supportsStrictToolCalling);let n={};void 0!==e?.stream_options?n={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t?.streaming)&&(n={stream_options:{include_usage:!0}});const a={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(e=>this._convertChatOpenAIToolToCompletionsTool(e,{strict:r})):void 0,tool_choice:(0,f.formatToOpenAIToolChoice)(e?.tool_choice),response_format:this._getResponseFormat(e?.response_format),seed:e?.seed,...n,parallel_tool_calls:e?.parallel_tool_calls,...this.audio||e?.audio?{audio:this.audio||e?.audio}:{},...this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{},...this.modelKwargs};void 0!==e?.prediction&&(a.prediction=e.prediction),void 0!==this.service_tier&&(a.service_tier=this.service_tier),void 0!==e?.service_tier&&(a.service_tier=e.service_tier);const i=this._getReasoningParams(e);return void 0!==i&&void 0!==i.effort&&(a.reasoning_effort=i.effort),_(a.model)?a.max_completion_tokens=-1===this.maxTokens?void 0:this.maxTokens:a.max_tokens=-1===this.maxTokens?void 0:this.maxTokens,a}async _generate(e,t,r){const n={},i=this.invocationParams(t),s=O(e,this.model);if(i.stream){const a=this._streamResponseChunks(e,t,r),i={};for await(const e of a){e.message.response_metadata={...e.generationInfo,...e.message.response_metadata};const t=e.generationInfo?.completion??0;void 0===i[t]?i[t]=e:i[t]=i[t].concat(e)}const s=Object.entries(i).sort(([e],[t])=>parseInt(e,10)-parseInt(t,10)).map(([e,t])=>t),{functions:o,function_call:l}=this.invocationParams(t),c=await this._getEstimatedTokenCountFromPrompt(e,o,l),d=await this._getNumTokensFromGenerations(s);return n.input_tokens=c,n.output_tokens=d,n.total_tokens=c+d,{generations:s,llmOutput:{estimatedTokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}{const e=await this.completionWithRetry({...i,stream:!1,messages:s},{signal:t?.signal,...t?.options}),{completion_tokens:r,prompt_tokens:o,total_tokens:l,prompt_tokens_details:c,completion_tokens_details:d}=e?.usage??{};r&&(n.output_tokens=(n.output_tokens??0)+r),o&&(n.input_tokens=(n.input_tokens??0)+o),l&&(n.total_tokens=(n.total_tokens??0)+l),null===c?.audio_tokens&&null===c?.cached_tokens||(n.input_token_details={...null!==c?.audio_tokens&&{audio:c?.audio_tokens},...null!==c?.cached_tokens&&{cache_read:c?.cached_tokens}}),null===d?.audio_tokens&&null===d?.reasoning_tokens||(n.output_token_details={...null!==d?.audio_tokens&&{audio:d?.audio_tokens},...null!==d?.reasoning_tokens&&{reasoning:d?.reasoning_tokens}});const u=[];for(const t of e?.choices??[]){const r={text:t.message?.content??"",message:this._convertCompletionsMessageToBaseMessage(t.message??{role:"assistant"},e)};r.generationInfo={...t.finish_reason?{finish_reason:t.finish_reason}:{},...t.logprobs?{logprobs:t.logprobs}:{}},(0,a.isAIMessage)(r.message)&&(r.message.usage_metadata=n),r.message=new a.AIMessage(Object.fromEntries(Object.entries(r.message).filter(([e])=>!e.startsWith("lc_")))),u.push(r)}return{generations:u,llmOutput:{tokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}}async*_streamResponseChunks(e,t,r){const n=O(e,this.model),s={...this.invocationParams(t,{streaming:!0}),messages:n,stream:!0};let o;const l=await this.completionWithRetry(s,t);let c;for await(const e of l){const n=e?.choices?.[0];if(e.usage&&(c=e.usage),!n)continue;const{delta:a}=n;if(!a)continue;const s=this._convertCompletionsDeltaToBaseMessageChunk(a,e,o);o=a.role??o;const l={prompt:t.promptIndex??0,completion:n.index??0};if("string"!=typeof s.content){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const d={...l};null!=n.finish_reason&&(d.finish_reason=n.finish_reason,d.system_fingerprint=e.system_fingerprint,d.model_name=e.model,d.service_tier=e.service_tier),this.logprobs&&(d.logprobs=n.logprobs);const u=new i.ChatGenerationChunk({message:s,text:s.content,generationInfo:d});yield u,await(r?.handleLLMNewToken(u.text??"",l,void 0,void 0,void 0,{chunk:u}))}if(c){const e={...null!==c.prompt_tokens_details?.audio_tokens&&{audio:c.prompt_tokens_details?.audio_tokens},...null!==c.prompt_tokens_details?.cached_tokens&&{cache_read:c.prompt_tokens_details?.cached_tokens}},t={...null!==c.completion_tokens_details?.audio_tokens&&{audio:c.completion_tokens_details?.audio_tokens},...null!==c.completion_tokens_details?.reasoning_tokens&&{reasoning:c.completion_tokens_details?.reasoning_tokens}},r=new i.ChatGenerationChunk({message:new a.AIMessageChunk({content:"",response_metadata:{usage:{...c}},usage_metadata:{input_tokens:c.prompt_tokens,output_tokens:c.completion_tokens,total_tokens:c.total_tokens,...Object.keys(e).length>0&&{input_token_details:e},...Object.keys(t).length>0&&{output_token_details:t}}}),text:""});yield r}if(t.signal?.aborted)throw new Error("AbortError")}async completionWithRetry(e,t){const r=this._getClientOptions(t),n=e.response_format&&"json_schema"===e.response_format.type;return this.caller.call(async()=>{try{return n&&!e.stream?await this.client.chat.completions.parse(e,r):await this.client.chat.completions.create(e,r)}catch(e){throw(0,f.wrapOpenAIClientError)(e)}})}_convertCompletionsMessageToBaseMessage(e,t){const r=e.tool_calls;if("assistant"===e.role){const n=[],i=[];for(const e of r??[])try{n.push((0,u.parseToolCall)(e,{returnId:!0}))}catch(t){i.push((0,u.makeInvalidToolCall)(e,t.message))}const s={function_call:e.function_call,tool_calls:r};void 0!==this.__includeRawResponse&&(s.__raw_response=t);const o={model_name:t.model,...t.system_fingerprint?{usage:{...t.usage},system_fingerprint:t.system_fingerprint}:{}};return e.audio&&(s.audio=e.audio),new a.AIMessage({content:e.content||"",tool_calls:n,invalid_tool_calls:i,additional_kwargs:s,response_metadata:o,id:t.id})}return new a.ChatMessage(e.content||"",e.role??"unknown")}_convertCompletionsDeltaToBaseMessageChunk(e,t,r){const n=e.role??r,i=e.content??"";let s;s=e.function_call?{function_call:e.function_call}:e.tool_calls?{tool_calls:e.tool_calls}:{},this.__includeRawResponse&&(s.__raw_response=t),e.audio&&(s.audio={...e.audio,index:t.choices[0].index});const o={usage:{...t.usage}};if("user"===n)return new a.HumanMessageChunk({content:i,response_metadata:o});if("assistant"===n){const r=[];if(Array.isArray(e.tool_calls))for(const t of e.tool_calls)r.push({name:t.function?.name,args:t.function?.arguments,id:t.id,index:t.index,type:"tool_call_chunk"});return new a.AIMessageChunk({content:i,tool_call_chunks:r,additional_kwargs:s,id:t.id,response_metadata:o})}return"system"===n?new a.SystemMessageChunk({content:i,response_metadata:o}):"developer"===n?new a.SystemMessageChunk({content:i,response_metadata:o,additional_kwargs:{__openai_role__:"developer"}}):"function"===n?new a.FunctionMessageChunk({content:i,additional_kwargs:s,name:e.name,response_metadata:o}):"tool"===n?new a.ToolMessageChunk({content:i,additional_kwargs:s,tool_call_id:e.tool_call_id,response_metadata:o}):new a.ChatMessageChunk({content:i,role:n,response_metadata:o})}}t.ChatOpenAICompletions=A;class I extends S{get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}constructor(e){super(e),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.useResponsesApi=e?.useResponsesApi??!1,this.responses=e?.responses??new E(e),this.completions=e?.completions??new A(e)}_useResponsesApi(e){const t=e?.tools?.some(b),r=null!=e?.previous_response_id||null!=e?.text||null!=e?.truncation||null!=e?.include||null!=e?.reasoning?.summary||null!=this.reasoning?.summary;return this.useResponsesApi||t||r}getLsParams(e){const t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.getLsParams(t):this.completions.getLsParams(t)}invocationParams(e){const t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.invocationParams(t):this.completions.invocationParams(t)}async _generate(e,t,r){return this._useResponsesApi(t)?this.responses._generate(e,t):this.completions._generate(e,t,r)}async*_streamResponseChunks(e,t,r){this._useResponsesApi(t)?yield*this.responses._streamResponseChunks(e,this._combineCallOptions(t),r):yield*this.completions._streamResponseChunks(e,this._combineCallOptions(t),r)}withConfig(e){const t=new I(this.fields);return t.defaultOptions={...this.defaultOptions,...e},t}}t.ChatOpenAI=I},81047:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEndpoint=function(e){const{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:a,baseURL:i,azureADTokenProvider:s,azureOpenAIEndpoint:o}=e;if((n||s)&&a&&t)return`${a}/${t}`;if((n||s)&&o&&t)return`${o}/openai/deployments/${t}`;if(n||s){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${t}`}return i}},81358:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBrandedDef=void 0;const n=r(55767);t.parseBrandedDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},81378:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackEncoder=void 0,t.FallbackEncoder=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)})},81396:(e,t,r)=>{e.exports=r(3457)},81482:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.APIPromise=void 0;const a=r(79632),i=r(98151);class s extends Promise{constructor(e,t,r=i.defaultParseResponse){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=r,n.set(this,void 0),a.__classPrivateFieldSet(this,n,e,"f")}_thenUnwrap(e){return new s(a.__classPrivateFieldGet(this,n,"f"),this.responsePromise,async(t,r)=>(0,i.addRequestID)(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(a.__classPrivateFieldGet(this,n,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}t.APIPromise=s,n=new WeakMap},81573:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentProcessor=void 0;const o=s(r(16928)),l=s(r(79896)),c=r(79896);t.DocumentProcessor=class{constructor(e={}){this.projectPath="",this.CODE_EXTENSIONS=new Set([".py",".js",".ts",".jsx",".tsx",".java",".cpp",".c",".h",".hpp",".cs",".php",".rb",".go",".rs",".swift",".kt",".scala",".clj",".hs",".ml",".fs",".vb",".pl",".r",".m",".sh",".bash",".zsh",".ps1",".bat",".cmd",".sql",".html",".css",".scss",".sass",".less",".vue",".svelte",".dart",".lua",".nim",".zig",".jl"]),this.DOCUMENT_EXTENSIONS=new Set([".md",".txt",".rst",".adoc",".org",".tex",".rtf"]),this.CONFIG_EXTENSIONS=new Set([".json",".yaml",".yml",".toml",".ini",".cfg",".conf",".xml"]),this.DEFAULT_EXCLUDED_DIRS=["node_modules",".git",".svn",".hg","__pycache__",".pytest_cache","venv","env",".env","dist","build","target","bin","obj",".vscode",".idea",".vs","coverage",".nyc_output","logs","tmp","temp",".cache",".next",".nuxt","out"],this.DEFAULT_EXCLUDED_FILES=["*.log","*.tmp","*.temp","*.cache","*.lock","*.pid","*.swp","*.swo","*~",".DS_Store","Thumbs.db","*.min.js","*.min.css","*.bundle.js","*.bundle.css","*.map","*.d.ts.map","*.js.map","*.css.map"],this.stats={totalFiles:0,processedFiles:0,totalSize:0,totalTokens:0,errors:0},this.config={maxFileSize:1048576,maxTokens:8e3,chunkSize:1e3,chunkOverlap:200,excludePatterns:e.excludePatterns||["node_modules/**",".git/**","dist/**","build/**"],includePatterns:e.includePatterns||["**/*"],...e}}async readAllDocuments(e){e?.(0,"Starting document scanning...");const t=await this.scanDirectory(this.projectPath),r=this.filterFiles(t);e?.(20,`Found ${r.length} files to process...`);const n=[];for(let t=0;t<r.length;t++){const a=r[t],i=20+t/r.length*60;try{e?.(i,`Processing ${o.basename(a)}...`);const t=await this.processFile(a);t&&n.push(t)}catch(e){console.warn(`Failed to process file ${a}:`,e)}}return e?.(80,`Processed ${n.length} files successfully`),n}async scanDirectory(e){const t=[],r=async e=>{try{const n=await c.promises.readdir(e,{withFileTypes:!0});for(const a of n){const n=o.join(e,a.name);a.isDirectory()?this.shouldExcludeDirectory(a.name,n)||await r(n):a.isFile()&&t.push(n)}}catch(t){console.warn(`Failed to scan directory ${e}:`,t)}};return await r(e),t}filterFiles(e){return e.filter(e=>{const t=o.basename(e),r=o.extname(e).toLowerCase();try{if(l.statSync(e).size>this.config.maxFileSize)return!1}catch(e){return!1}return!this.shouldExcludeFile(t,e)&&this.isSupportedFileType(r)})}shouldExcludeDirectory(e,t){const r=o.relative(this.projectPath,t);return!!this.DEFAULT_EXCLUDED_DIRS.includes(e)||(this.config.includePatterns&&this.config.includePatterns.length>0?!this.config.includePatterns.some(t=>this.matchPattern(r,t)||this.matchPattern(e,t)):(this.config.excludePatterns||[]).some(t=>this.matchPattern(r,t)||this.matchPattern(e,t)))}shouldExcludeFile(e,t){const r=o.relative(this.projectPath,t);return!!this.DEFAULT_EXCLUDED_FILES.some(t=>this.matchPattern(e,t))||(this.config.includePatterns&&this.config.includePatterns.length>0?!this.config.includePatterns.some(t=>this.matchPattern(r,t)||this.matchPattern(e,t)):(this.config.excludePatterns||[]).some(t=>this.matchPattern(r,t)||this.matchPattern(e,t)))}matchPattern(e,t){const r=t.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\?/g,".");return new RegExp(`^${r}$`,"i").test(e)}isSupportedFileType(e){return this.CODE_EXTENSIONS.has(e)||this.DOCUMENT_EXTENSIONS.has(e)||this.CONFIG_EXTENSIONS.has(e)}async processFile(e){try{const t=await c.promises.readFile(e,"utf8"),r=await c.promises.stat(e),n=o.extname(e).toLowerCase(),a=o.relative(this.projectPath,e),i=Math.ceil(t.length/4);if(i>this.config.maxTokens)return console.warn(`File ${a} exceeds token limit (${i} > ${this.config.maxTokens})`),null;const s=this.getLanguageFromExtension(n),l=this.CODE_EXTENSIONS.has(n),d=this.DOCUMENT_EXTENSIONS.has(n);return{path:e,relativePath:a,content:t,size:r.size,extension:n,language:s,tokenCount:i,isCode:l,isDocument:d}}catch(t){return console.error(`Failed to process file ${e}:`,t),null}}getLanguageFromExtension(e){return{".js":"javascript",".jsx":"javascript",".ts":"typescript",".tsx":"typescript",".py":"python",".java":"java",".cpp":"cpp",".c":"c",".h":"c",".hpp":"cpp",".cs":"csharp",".php":"php",".rb":"ruby",".go":"go",".rs":"rust",".swift":"swift",".kt":"kotlin",".scala":"scala",".clj":"clojure",".hs":"haskell",".ml":"ocaml",".fs":"fsharp",".vb":"vbnet",".pl":"perl",".r":"r",".m":"matlab",".sh":"bash",".bash":"bash",".zsh":"zsh",".ps1":"powershell",".bat":"batch",".cmd":"batch",".sql":"sql",".html":"html",".css":"css",".scss":"scss",".sass":"sass",".less":"less",".vue":"vue",".svelte":"svelte",".dart":"dart",".lua":"lua",".nim":"nim",".zig":"zig",".jl":"julia",".md":"markdown",".txt":"text",".rst":"restructuredtext",".json":"json",".yaml":"yaml",".yml":"yaml",".toml":"toml",".xml":"xml"}[e]||"text"}async chunkDocuments(e,t){const r=[];for(let n=0;n<e.length;n++){const a=e[n],i=n/e.length*100;t?.(i,`Chunking ${a.relativePath}...`);const s=this.chunkFile(a);r.push(...s)}return r}chunkFile(e){const t=[],r=e.content,n=this.config.chunkSize;return this.config.chunkOverlap,r.length<=n?(t.push({id:`${e.relativePath}-0`,content:r,metadata:{filePath:e.relativePath,chunkIndex:0,totalChunks:1,language:e.language,fileType:e.isCode?"code":e.isDocument?"document":"config"}}),t):e.isCode?this.chunkCodeFile(e):e.isDocument?this.chunkDocumentFile(e):this.chunkByCharacters(e)}chunkCodeFile(e){const t=[],r=e.content.split("\n"),n=this.config.chunkSize,a=this.config.chunkOverlap;let i="",s=0,o=0,l=0;for(let c=0;c<r.length;c++){const d=r[c],u=d.length+1;if(i.length+u>n&&i.length>0){t.push({id:`${e.relativePath}-${l}`,content:i.trim(),metadata:{filePath:e.relativePath,chunkIndex:l,totalChunks:0,startLine:o+1,endLine:c,language:e.language,fileType:"code"}});const n=Math.min(a/50,s),d=Math.max(0,c-n);i=r.slice(d,c+1).join("\n"),o=d,s=c-d+1,l++}else i+=d+"\n",s++}return i.trim().length>0&&t.push({id:`${e.relativePath}-${l}`,content:i.trim(),metadata:{filePath:e.relativePath,chunkIndex:l,totalChunks:0,startLine:o+1,endLine:r.length,language:e.language,fileType:"code"}}),t.forEach(e=>{e.metadata.totalChunks=t.length}),t}chunkDocumentFile(e){const t=[],r=e.content.split(/\n\s*\n/),n=this.config.chunkSize,a=this.config.chunkOverlap;let i="",s=0;for(const o of r)i.length+o.length>n&&i.length>0?(t.push({id:`${e.relativePath}-${s}`,content:i.trim(),metadata:{filePath:e.relativePath,chunkIndex:s,totalChunks:0,language:e.language,fileType:"document"}}),i=i.slice(-a)+"\n\n"+o,s++):i+=(i?"\n\n":"")+o;return i.trim().length>0&&t.push({id:`${e.relativePath}-${s}`,content:i.trim(),metadata:{filePath:e.relativePath,chunkIndex:s,totalChunks:0,language:e.language,fileType:"document"}}),t.forEach(e=>{e.metadata.totalChunks=t.length}),t}chunkByCharacters(e){const t=[],r=e.content,n=this.config.chunkSize,a=this.config.chunkOverlap;let i=0,s=0;for(;i<r.length;){const o=Math.min(i+n,r.length),l=r.slice(i,o);t.push({id:`${e.relativePath}-${s}`,content:l,metadata:{filePath:e.relativePath,chunkIndex:s,totalChunks:0,language:e.language,fileType:"config"}}),i=o-a,s++}return t.forEach(e=>{e.metadata.totalChunks=t.length}),t}convertChunksToDocuments(e){return e.map(e=>({id:e.id,title:`${o.basename(e.metadata.filePath)} (Chunk ${e.metadata.chunkIndex+1}/${e.metadata.totalChunks})`,content:e.content,path:e.metadata.filePath,type:e.metadata.fileType,metadata:{...e.metadata,chunkId:e.id}}))}getProcessingStats(e,t){const r=e.filter(e=>e.isCode),n=e.filter(e=>e.isDocument),a=e.filter(e=>!e.isCode&&!e.isDocument),i=e.reduce((e,t)=>e+t.size,0),s=e.reduce((e,t)=>e+t.tokenCount,0),o=e.reduce((e,t)=>(e[t.language]=(e[t.language]||0)+1,e),{});return{totalFiles:e.length,codeFiles:r.length,documentFiles:n.length,configFiles:a.length,totalSize:i,totalTokens:s,totalChunks:t.length,languageStats:o,averageChunksPerFile:t.length/e.length}}async processDirectory(e,t){this.projectPath=e,this.stats={totalFiles:0,processedFiles:0,totalSize:0,totalTokens:0,errors:0};try{const e=await this.readAllDocuments((e,r)=>{if(t){const n=Math.floor(e);t(n,100,r)}});this.stats.totalFiles=e.length,this.stats.processedFiles=e.length,this.stats.totalSize=e.reduce((e,t)=>e+t.size,0),this.stats.totalTokens=e.reduce((e,t)=>e+t.tokenCount,0);const r=[];for(let n=0;n<e.length;n++){const a=e[n];t?.(n+1,e.length,a.relativePath);try{const e=this.chunkFile(a);r.push(...e)}catch(e){console.warn(`Failed to chunk file ${a.relativePath}:`,e),this.stats.errors++}}return this.convertChunksToDocuments(r)}catch(e){throw console.error("Failed to process directory:",e),this.stats.errors++,e}}getStats(){return{...this.stats}}}},81590:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;const n=r(95445),a=r(78505),i=r(57503);t.zodToJsonSchema=(e,t)=>{const r=(0,a.getRefs)(t),s="string"==typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,o=(0,n.parseDef)(e._def,void 0===s?r:{...r,currentPath:[...r.basePath,r.definitionPath,s]},!1)??{},l="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==l&&(o.title=l);const c=(()=>{if((0,i.isEmptyObj)(r.definitions))return;const e={},t=new Set;for(let a=0;a<500;a++){const a=Object.entries(r.definitions).filter(([e])=>!t.has(e));if(0===a.length)break;for(const[s,o]of a)e[s]=(0,n.parseDef)((0,i.zodDef)(o),{...r,currentPath:[...r.basePath,r.definitionPath,s]},!0)??{},t.add(s)}return e})(),d=void 0===s?c?{...o,[r.definitionPath]:c}:o:"duplicate-ref"===r.nameStrategy?{...o,...c||r.seenRefs.size?{[r.definitionPath]:{...c,...r.seenRefs.size?{[s]:o}:void 0}}:void 0}:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,s].join("/"),[r.definitionPath]:{...c,[s]:o}};return"jsonSchema7"===r.target?d.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"===r.target&&(d.$schema="https://json-schema.org/draft/2019-09/schema#"),d}},82040:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APIResource=void 0,t.APIResource=class{constructor(e){this._client=e}}},82133:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootListenersTracer=void 0;const n=r(18233);class a extends n.BaseTracer{constructor({config:e,onStart:t,onEnd:r,onError:n}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}t.RootListenersTracer=a},82331:(e,t,r)=>{e.exports=r(60418)},82407:(e,t,r)=>{e.exports=r(33359)},82848:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"אותיות",verb:"לכלול"},file:{unit:"בייטים",verb:"לכלול"},array:{unit:"פריטים",verb:"לכלול"},set:{unit:"פריטים",verb:"לכלול"}};function t(t){return e[t]??null}const r={regex:"קלט",email:"כתובת אימייל",url:"כתובת רשת",emoji:"אימוג'י",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"תאריך וזמן ISO",date:"תאריך ISO",time:"זמן ISO",duration:"משך זמן ISO",ipv4:"כתובת IPv4",ipv6:"כתובת IPv6",cidrv4:"טווח IPv4",cidrv6:"טווח IPv6",base64:"מחרוזת בבסיס 64",base64url:"מחרוזת בבסיס 64 לכתובות רשת",json_string:"מחרוזת JSON",e164:"מספר E.164",jwt:"JWT",template_literal:"קלט"};return e=>{switch(e.code){case"invalid_type":return`קלט לא תקין: צריך ${e.expected}, התקבל ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`קלט לא תקין: צריך ${s.stringifyPrimitive(e.values[0])}`:`קלט לא תקין: צריך אחת מהאפשרויות  ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`גדול מדי: ${e.origin??"value"} צריך להיות ${r}${e.maximum.toString()} ${n.unit??"elements"}`:`גדול מדי: ${e.origin??"value"} צריך להיות ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`קטן מדי: ${e.origin} צריך להיות ${r}${e.minimum.toString()} ${n.unit}`:`קטן מדי: ${e.origin} צריך להיות ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`מחרוזת לא תקינה: חייבת להתחיל ב"${t.prefix}"`:"ends_with"===t.format?`מחרוזת לא תקינה: חייבת להסתיים ב "${t.suffix}"`:"includes"===t.format?`מחרוזת לא תקינה: חייבת לכלול "${t.includes}"`:"regex"===t.format?`מחרוזת לא תקינה: חייבת להתאים לתבנית ${t.pattern}`:`${r[t.format]??e.format} לא תקין`}case"not_multiple_of":return`מספר לא תקין: חייב להיות מכפלה של ${e.divisor}`;case"unrecognized_keys":return`מפתח${e.keys.length>1?"ות":""} לא מזוה${e.keys.length>1?"ים":"ה"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`מפתח לא תקין ב${e.origin}`;case"invalid_union":default:return"קלט לא תקין";case"invalid_element":return`ערך לא תקין ב${e.origin}`}}}},82922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunkArray=void 0,t.chunkArray=(e,t)=>e.reduce((e,r,n)=>{const a=Math.floor(n/t),i=e[a]||[];return e[a]=i.concat([r]),e},[])},83295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureChatOpenAI=void 0;const n=r(32012),a=r(82331),i=r(80975),s=r(81047),o=r(42784),l={openAIApiKey:"openai_api_key",openAIApiVersion:"openai_api_version",openAIBasePath:"openai_api_base",deploymentName:"deployment_name",azureOpenAIEndpoint:"azure_endpoint",azureOpenAIApiVersion:"openai_api_version",azureOpenAIBasePath:"openai_api_base",azureOpenAIApiDeploymentName:"deployment_name"},c={azureOpenAIApiKey:"AZURE_OPENAI_API_KEY"},d=["azureOpenAIApiKey","azureOpenAIApiVersion","azureOpenAIBasePath","azureOpenAIEndpoint","azureOpenAIApiInstanceName","azureOpenAIApiDeploymentName","deploymentName","openAIApiKey","openAIApiVersion"];function u(e){if(this.azureOpenAIApiKey=e?.azureOpenAIApiKey??e?.openAIApiKey??e?.apiKey??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_KEY"),this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=e?.azureOpenAIApiDeploymentName??e?.deploymentName??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??e?.openAIApiVersion??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,a.getEnvironmentVariable)("AZURE_OPENAI_BASE_PATH"),this.azureOpenAIEndpoint=e?.azureOpenAIEndpoint??(0,a.getEnvironmentVariable)("AZURE_OPENAI_ENDPOINT"),this.azureADTokenProvider=e?.azureADTokenProvider,!this.azureOpenAIApiKey&&!this.apiKey&&!this.azureADTokenProvider)throw new Error("Azure OpenAI API key or Token Provider not found")}function p(e){if(!this.client){const e={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL,azureOpenAIEndpoint:this.azureOpenAIEndpoint},t=(0,s.getEndpoint)(e),r={...this.clientConfig,baseURL:t,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(r.apiKey=e.azureOpenAIApiKey),r.baseURL||delete r.baseURL;let i=(0,a.getEnv)();"node"!==i&&"deno"!==i||(i=`(${i}/${process.version}; ${process.platform}; ${process.arch})`);const l=(0,o.normalizeHeaders)(r.defaultHeaders);r.defaultHeaders={...r.defaultHeaders,"User-Agent":l["User-Agent"]?`langchainjs-azure-openai/2.0.0 (${i})${l["User-Agent"]}`:`langchainjs-azure-openai/2.0.0 (${i})`},this.client=new n.AzureOpenAI({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,deployment:this.azureOpenAIApiDeploymentName,...r})}const t={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),t}function m(e){const t=e;function r(e){return"object"==typeof e&&null!=e}if(r(t)&&r(t.kwargs)){if(delete t.kwargs.azure_openai_base_path,delete t.kwargs.azure_openai_api_deployment_name,delete t.kwargs.azure_openai_api_key,delete t.kwargs.azure_openai_api_version,delete t.kwargs.azure_open_ai_base_path,!t.kwargs.azure_endpoint&&this.azureOpenAIEndpoint&&(t.kwargs.azure_endpoint=this.azureOpenAIEndpoint),!t.kwargs.azure_endpoint&&this.azureOpenAIBasePath){const e=this.azureOpenAIBasePath.split("/openai/deployments/");if(2===e.length&&e[0].startsWith("http")){const[r]=e;t.kwargs.azure_endpoint=r}}if(!t.kwargs.azure_endpoint&&this.azureOpenAIApiInstanceName&&(t.kwargs.azure_endpoint=`https://${this.azureOpenAIApiInstanceName}.openai.azure.com/`),!t.kwargs.deployment_name&&this.azureOpenAIApiDeploymentName&&(t.kwargs.deployment_name=this.azureOpenAIApiDeploymentName),!t.kwargs.deployment_name&&this.azureOpenAIBasePath){const e=this.azureOpenAIBasePath.split("/openai/deployments/");if(2===e.length){const[,r]=e;t.kwargs.deployment_name=r}}t.kwargs.azure_endpoint&&t.kwargs.deployment_name&&t.kwargs.openai_api_base&&delete t.kwargs.openai_api_base,t.kwargs.azure_openai_api_instance_name&&t.kwargs.azure_endpoint&&delete t.kwargs.azure_openai_api_instance_name}return t}class h extends i.ChatOpenAIResponses{_llmType(){return"azure_openai"}get lc_aliases(){return{...super.lc_aliases,...l}}get lc_secrets(){return{...super.lc_secrets,...c}}get lc_serializable_keys(){return[...super.lc_serializable_keys,...d]}getLsParams(e){const t=super.getLsParams(e);return t.ls_provider="azure",t}constructor(e){super(e),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),u.call(this,e)}_getClientOptions(e){return p.call(this,e)}toJSON(){return m.call(this,super.toJSON())}}class f extends i.ChatOpenAICompletions{_llmType(){return"azure_openai"}get lc_aliases(){return{...super.lc_aliases,...l}}get lc_secrets(){return{...super.lc_secrets,...c}}get lc_serializable_keys(){return[...super.lc_serializable_keys,...d]}getLsParams(e){const t=super.getLsParams(e);return t.ls_provider="azure",t}constructor(e){super(e),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),u.call(this,e)}_getClientOptions(e){return p.call(this,e)}toJSON(){return m.call(this,super.toJSON())}}class g extends i.ChatOpenAI{_llmType(){return"azure_openai"}get lc_aliases(){return{...super.lc_aliases,...l}}get lc_secrets(){return{...super.lc_secrets,...c}}get lc_serializable_keys(){return[...super.lc_serializable_keys,...d]}getLsParams(e){const t=super.getLsParams(e);return t.ls_provider="azure",t}constructor(e){super({...e,completions:new f(e),responses:new h(e)}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIEndpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),u.call(this,e)}_getStructuredOutputMethod(e){const t={...e};return this.model.startsWith("gpt-4o")&&void 0===t?.method?"functionCalling":super._getStructuredOutputMethod(t)}toJSON(){return m.call(this,super.toJSON())}}t.AzureChatOpenAI=g},83296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleChatModel=t.BaseChatModel=void 0,t.createChatMessageChunkEncoderStream=function(){const e=new TextEncoder;return new TransformStream({transform(t,r){r.enqueue(e.encode("string"==typeof t.content?t.content:JSON.stringify(t.content)))}})};const n=r(14190),a=r(50383),i=r(37738),s=r(31413),o=r(10969),l=r(28033),c=r(36516),d=r(70866),u=r(12031),p=r(32991);function m(e){const t=[];for(const r of e){let e=r;if(Array.isArray(r.content))for(let t=0;t<r.content.length;t++){const a=r.content[t];((0,n.isURLContentBlock)(a)||(0,n.isBase64ContentBlock)(a))&&e===r&&(e=new r.constructor({...e,content:[...r.content.slice(0,t),(0,n.convertToOpenAIImageBlock)(a),...r.content.slice(t+1)]}))}t.push(e)}return t}class h extends i.BaseLanguageModel{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async invoke(e,t){const r=h._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}async*_streamIterator(e,t){if(this._streamResponseChunks===h.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,t);else{const r=h._convertInputToPromptValue(e).toChatMessages(),[a,i]=this._separateRunnableConfigFromCallOptionsCompat(t),o={...a.metadata,...this.getLsParams(i)},l=await s.CallbackManager.configure(a.callbacks,this.callbacks,a.tags,this.tags,o,this.metadata,{verbose:this.verbose}),c={options:i,invocation_params:this?.invocationParams(i),batch_size:1},d=await(l?.handleChatModelStart(this.toJSON(),[m(r)],a.runId,void 0,c,void 0,void 0,a.runName));let u,p;try{for await(const e of this._streamResponseChunks(r,i,d?.[0])){if(null==e.message.id){const t=d?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata},yield e.message,u=u?u.concat(e):e,(0,n.isAIMessageChunk)(e.message)&&void 0!==e.message.usage_metadata&&(p={tokenUsage:{promptTokens:e.message.usage_metadata.input_tokens,completionTokens:e.message.usage_metadata.output_tokens,totalTokens:e.message.usage_metadata.total_tokens}})}}catch(e){throw await Promise.all((d??[]).map(t=>t?.handleLLMError(e))),e}await Promise.all((d??[]).map(e=>e?.handleLLMEnd({generations:[[u]],llmOutput:p})))}}getLsParams(e){const t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}async _generateUncached(e,t,r,i){const o=e.map(e=>e.map(n.coerceMessageLikeToMessage));let c;if(void 0!==i&&i.length===o.length)c=i;else{const e={...r.metadata,...this.getLsParams(t)},n=await s.CallbackManager.configure(r.callbacks,this.callbacks,r.tags,this.tags,e,this.metadata,{verbose:this.verbose}),a={options:t,invocation_params:this?.invocationParams(t),batch_size:1};c=await(n?.handleChatModelStart(this.toJSON(),o.map(m),r.runId,void 0,a,void 0,void 0,r.runName))}const d=[],p=[];if(c?.[0].handlers.find(u.callbackHandlerPrefersStreaming)&&!this.disableStreaming&&1===o.length&&this._streamResponseChunks!==h.prototype._streamResponseChunks)try{const e=await this._streamResponseChunks(o[0],t,c?.[0]);let r,a;for await(const t of e){if(null==t.message.id){const e=c?.at(0)?.runId;null!=e&&t.message._updateId(`run-${e}`)}r=void 0===r?t:(0,l.concat)(r,t),(0,n.isAIMessageChunk)(t.message)&&void 0!==t.message.usage_metadata&&(a={tokenUsage:{promptTokens:t.message.usage_metadata.input_tokens,completionTokens:t.message.usage_metadata.output_tokens,totalTokens:t.message.usage_metadata.total_tokens}})}if(void 0===r)throw new Error("Received empty response from chat model call.");d.push([r]),await(c?.[0].handleLLMEnd({generations:d,llmOutput:a}))}catch(e){throw await(c?.[0].handleLLMError(e)),e}else{const e=await Promise.allSettled(o.map((e,r)=>this._generate(e,{...t,promptIndex:r},c?.[r])));await Promise.all(e.map(async(e,t)=>{if("fulfilled"===e.status){const r=e.value;for(const e of r.generations){if(null==e.message.id){const t=c?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata}}return 1===r.generations.length&&(r.generations[0].message.response_metadata={...r.llmOutput,...r.generations[0].message.response_metadata}),d[t]=r.generations,p[t]=r.llmOutput,c?.[t]?.handleLLMEnd({generations:[r.generations],llmOutput:r.llmOutput})}return await(c?.[t]?.handleLLMError(e.reason)),Promise.reject(e.reason)}))}const f={generations:d,llmOutput:p.length?this._combineLLMOutput?.(...p):void 0};return Object.defineProperty(f,a.RUN_KEY,{value:c?{runIds:c?.map(e=>e.runId)}:void 0,configurable:!0}),f}async _generateCached({messages:e,cache:t,llmStringKey:r,parsedOptions:i,handledOptions:o}){const l=e.map(e=>e.map(n.coerceMessageLikeToMessage)),c={...o.metadata,...this.getLsParams(i)},d=await s.CallbackManager.configure(o.callbacks,this.callbacks,o.tags,this.tags,c,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this?.invocationParams(i),batch_size:1},p=await(d?.handleChatModelStart(this.toJSON(),l.map(m),o.runId,void 0,u,void 0,void 0,o.runName)),f=[],g=(await Promise.allSettled(l.map(async(e,n)=>{const a=h._convertInputToPromptValue(e).toString(),i=await t.lookup(a,r);return null==i&&f.push(n),i}))).map((e,t)=>({result:e,runManager:p?.[t]})).filter(({result:e})=>"fulfilled"===e.status&&null!=e.value||"rejected"===e.status),y=[];await Promise.all(g.map(async({result:e,runManager:t},r)=>{if("fulfilled"===e.status){const a=e.value;return y[r]=a.map(e=>("message"in e&&(0,n.isBaseMessage)(e.message)&&(0,n.isAIMessage)(e.message)&&(e.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),e.generationInfo={...e.generationInfo,tokenUsage:{}},e)),a.length&&await(t?.handleLLMNewToken(a[0].text)),t?.handleLLMEnd({generations:[a]},void 0,void 0,void 0,{cached:!0})}return await(t?.handleLLMError(e.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(e.reason)}));const v={generations:y,missingPromptIndices:f,startedRunManagers:p};return Object.defineProperty(v,a.RUN_KEY,{value:p?{runIds:p?.map(e=>e.runId)}:void 0,configurable:!0}),v}async generate(e,t,r){let a;a=Array.isArray(t)?{stop:t}:t;const i=e.map(e=>e.map(n.coerceMessageLikeToMessage)),[s,o]=this._separateRunnableConfigFromCallOptionsCompat(a);if(s.callbacks=s.callbacks??r,!this.cache)return this._generateUncached(i,o,s);const{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(o),{generations:d,missingPromptIndices:u,startedRunManagers:p}=await this._generateCached({messages:i,cache:l,llmStringKey:c,parsedOptions:o,handledOptions:s});let m={};if(u.length>0){const e=await this._generateUncached(u.map(e=>i[e]),o,s,void 0!==p?u.map(e=>p?.[e]):void 0);await Promise.all(e.generations.map(async(e,t)=>{const r=u[t];d[r]=e;const n=h._convertInputToPromptValue(i[r]).toString();return l.update(n,c,e)})),m=e.llmOutput??{}}return{generations:d,llmOutput:m}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,r){const n=e.map(e=>e.toChatMessages());return this.generate(n,t,r)}async call(e,t,r){return(await this.generate([e.map(n.coerceMessageLikeToMessage)],t,r)).generations[0][0].message}async callPrompt(e,t,r){const n=e.toChatMessages();return this.call(n,t,r)}async predictMessages(e,t,r){return this.call(e,t,r)}async predict(e,t,r){const a=new n.HumanMessage(e),i=await this.call([a],t,r);if("string"!=typeof i.content)throw new Error("Cannot use predict when output is not a string.");return i.content}withStructuredOutput(e,t){if("function"!=typeof this.bindTools)throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t?.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,n=t?.name,a=(0,d.getSchemaDescription)(r)??"A function available to call.",i=t?.method,s=t?.includeRaw;if("jsonMode"===i)throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let l,u=n??"extract";(0,d.isInteropZodSchema)(r)?l=[{type:"function",function:{name:u,description:a,parameters:(0,p.toJsonSchema)(r)}}]:("name"in r&&(u=r.name),l=[{type:"function",function:{name:u,description:a,parameters:r}}]);const m=this.bindTools(l),h=o.RunnableLambda.from(e=>{if(!e.tool_calls||0===e.tool_calls.length)throw new Error("No tool calls found in the response.");const t=e.tool_calls.find(e=>e.name===u);if(!t)throw new Error(`No tool call found with name ${u}.`);return t.args});if(!s)return m.pipe(h).withConfig({runName:"StructuredOutput"});const f=c.RunnablePassthrough.assign({parsed:(e,t)=>h.invoke(e.raw,t)}),g=c.RunnablePassthrough.assign({parsed:()=>null}),y=f.withFallbacks({fallbacks:[g]});return o.RunnableSequence.from([{raw:m},y]).withConfig({runName:"StructuredOutputRunnable"})}}t.BaseChatModel=h,t.SimpleChatModel=class extends h{async _generate(e,t,r){const a=await this._call(e,t,r),i=new n.AIMessage(a);if("string"!=typeof i.content)throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:i.content,message:i}]}}}},83420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectParser=void 0;const n=r(7552),a=r(95346),i=r(54437),s=r(29649),o=r(38848),l=r(8584),c=r(16327),d=r(550),u=r(54205),p=r(63754),m=r(31459),h=r(1307),f=r(30815),g=r(47870),y=r(65508),v=r(36278),b=r(39375),_=r(95543),w=r(4771),P=r(51761),O=r(97398),S=r(58732),E=r(78873),A=r(75127),I=r(97372),k=r(94235),T=r(46462),j=r(78380),C=r(34143),x=r(31974),N=r(72168);t.selectParser=(e,t,r)=>{switch(t){case n.ZodFirstPartyTypeKind.ZodString:return(0,k.parseStringDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNumber:return(0,w.parseNumberDef)(e,r);case n.ZodFirstPartyTypeKind.ZodObject:return(0,P.parseObjectDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBigInt:return(0,s.parseBigintDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBoolean:return(0,o.parseBooleanDef)();case n.ZodFirstPartyTypeKind.ZodDate:return(0,d.parseDateDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUndefined:return(0,j.parseUndefinedDef)(r);case n.ZodFirstPartyTypeKind.ZodNull:return(0,b.parseNullDef)(r);case n.ZodFirstPartyTypeKind.ZodArray:return(0,i.parseArrayDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUnion:case n.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,C.parseUnionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodIntersection:return(0,h.parseIntersectionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodTuple:return(0,T.parseTupleDef)(e,r);case n.ZodFirstPartyTypeKind.ZodRecord:return(0,A.parseRecordDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLiteral:return(0,f.parseLiteralDef)(e,r);case n.ZodFirstPartyTypeKind.ZodEnum:return(0,m.parseEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,y.parseNativeEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNullable:return(0,_.parseNullableDef)(e,r);case n.ZodFirstPartyTypeKind.ZodOptional:return(0,O.parseOptionalDef)(e,r);case n.ZodFirstPartyTypeKind.ZodMap:return(0,g.parseMapDef)(e,r);case n.ZodFirstPartyTypeKind.ZodSet:return(0,I.parseSetDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLazy:return()=>e.getter()._def;case n.ZodFirstPartyTypeKind.ZodPromise:return(0,E.parsePromiseDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNaN:case n.ZodFirstPartyTypeKind.ZodNever:return(0,v.parseNeverDef)(r);case n.ZodFirstPartyTypeKind.ZodEffects:return(0,p.parseEffectsDef)(e,r);case n.ZodFirstPartyTypeKind.ZodAny:return(0,a.parseAnyDef)(r);case n.ZodFirstPartyTypeKind.ZodUnknown:return(0,x.parseUnknownDef)(r);case n.ZodFirstPartyTypeKind.ZodDefault:return(0,u.parseDefaultDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBranded:return(0,l.parseBrandedDef)(e,r);case n.ZodFirstPartyTypeKind.ZodReadonly:return(0,N.parseReadonlyDef)(e,r);case n.ZodFirstPartyTypeKind.ZodCatch:return(0,c.parseCatchDef)(e,r);case n.ZodFirstPartyTypeKind.ZodPipeline:return(0,S.parsePipelineDef)(e,r);case n.ZodFirstPartyTypeKind.ZodFunction:case n.ZodFirstPartyTypeKind.ZodVoid:case n.ZodFirstPartyTypeKind.ZodSymbol:default:return}}},84229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorStores=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(33338)),s=r(33338),o=n.__importStar(r(43766)),l=r(43766),c=r(75552),d=r(262),u=r(54815);class p extends a.APIResource{constructor(){super(...arguments),this.files=new o.Files(this._client),this.fileBatches=new i.FileBatches(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:(0,d.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(u.path`/vector_stores/${e}`,{...t,headers:(0,d.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(u.path`/vector_stores/${e}`,{body:t,...r,headers:(0,d.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",c.CursorPage,{query:e,...t,headers:(0,d.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(u.path`/vector_stores/${e}`,{...t,headers:(0,d.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}search(e,t,r){return this._client.getAPIList(u.path`/vector_stores/${e}/search`,c.Page,{body:t,method:"post",...r,headers:(0,d.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}t.VectorStores=p,p.Files=l.Files,p.FileBatches=s.FileBatches},84450:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMapDef=function(e,t){if("record"===t.mapStrategy)return(0,a.parseRecordDef)(e,t);return{type:"array",maxItems:125,items:{type:"array",items:[(0,n.parseDef)(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},(0,n.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}};const n=r(95445),a=r(4131)},84570:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toFile=async function(e,t,r){if((0,a.checkFileSupport)(),e=await e,t||(t=(0,n.getName)(e)),s(e))return e instanceof File&&null==t&&null==r?e:(0,n.makeFile)([await e.arrayBuffer()],t??e.name,{type:e.type,lastModified:e.lastModified,...r});if(o(e)){const a=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),(0,n.makeFile)(await l(a),t,r)}const i=await l(e);if(!r?.type){const e=i.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(r={...r,type:e})}return(0,n.makeFile)(i,t,r)};const n=r(87090),a=r(87090),i=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,s=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&i(e),o=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob;async function l(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(i(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!(0,n.isAsyncIterable)(e)){const t=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";return`; props: [${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`)}for await(const r of e)t.push(...await l(r))}return t}},84769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDef=void 0;const n=r(51881),a=r(83420),i=r(16424),s=r(95346);t.parseDef=function e(t,r,i=!1){const s=r.seen.get(t);if(r.override){const e=r.override?.(t,r,s,i);if(e!==n.ignoreOverride)return e}if(s&&!i){const e=o(s,r);if(void 0!==e)return e}const c={def:t,path:r.currentPath,jsonSchema:void 0};r.seen.set(t,c);const d=(0,a.selectParser)(t,t.typeName,r),u="function"==typeof d?e(d(),r):d;if(u&&l(t,r,u),r.postProcess){const e=r.postProcess(u,t,r);return c.jsonSchema=u,e}return c.jsonSchema=u,u};const o=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:(0,i.getRelativePath)(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),(0,s.parseAnyDef)(t)):"seen"===t.$refStrategy?(0,s.parseAnyDef)(t):void 0}},l=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r)},84802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logPolicyName=void 0,t.logPolicy=function(e={}){return(0,a.logPolicy)(Object.assign({logger:n.logger.info},e))};const n=r(73413),a=r(17445);t.logPolicyName=a.logPolicyName},84857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTracingEnabled=void 0;const n=r(89008);t.isTracingEnabled=e=>void 0!==e?e:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(e=>"true"===(0,n.getEnvironmentVariable)(e))},84960:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._CONTEXT_VARIABLES_KEY=t.MockAsyncLocalStorage=t.AsyncLocalStorageProviderSingleton=void 0;const n=r(76907);Object.defineProperty(t,"AsyncLocalStorageProviderSingleton",{enumerable:!0,get:function(){return n.AsyncLocalStorageProviderSingleton}}),Object.defineProperty(t,"MockAsyncLocalStorage",{enumerable:!0,get:function(){return n.MockAsyncLocalStorage}});const a=r(61299);Object.defineProperty(t,"_CONTEXT_VARIABLES_KEY",{enumerable:!0,get:function(){return a._CONTEXT_VARIABLES_KEY}})},84986:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0,t._iterSSEMessages=f;const a=r(47984),i=r(58092),s=r(6462),o=r(71308),l=r(6462),c=r(8709),d=r(80694),u=r(6117),p=r(20044),m=r(58092);class h{constructor(e,t,r){this.iterator=e,n.set(this,void 0),this.controller=t,a.__classPrivateFieldSet(this,n,r,"f")}static fromSSEResponse(e,t,r){let n=!1;const a=r?(0,p.loggerFor)(r):console;return new h(async function*(){if(n)throw new i.AnthropicError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const r of f(e,t)){if("completion"===r.event)try{yield JSON.parse(r.data)}catch(e){throw a.error("Could not parse message into JSON:",r.data),a.error("From chunk:",r.raw),e}if("message_start"===r.event||"message_delta"===r.event||"message_stop"===r.event||"content_block_start"===r.event||"content_block_delta"===r.event||"content_block_stop"===r.event)try{yield JSON.parse(r.data)}catch(e){throw a.error("Could not parse message into JSON:",r.data),a.error("From chunk:",r.raw),e}if("ping"!==r.event&&"error"===r.event)throw new m.APIError(void 0,(0,d.safeJSON)(r.data)??r.data,void 0,e.headers)}r=!0}catch(e){if((0,c.isAbortError)(e))return;throw e}finally{r||t.abort()}},t,r)}static fromReadableStream(e,t,r){let n=!1;return new h(async function*(){if(n)throw new i.AnthropicError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new o.LineDecoder,r=(0,l.ReadableStreamToAsyncIterable)(e);for await(const e of r)for(const r of t.decode(e))yield r;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(e){if((0,c.isAbortError)(e))return;throw e}finally{r||t.abort()}},t,r)}[(n=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=n=>({next:()=>{if(0===n.length){const n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new h(()=>i(e),this.controller,a.__classPrivateFieldGet(this,n,"f")),new h(()=>i(t),this.controller,a.__classPrivateFieldGet(this,n,"f"))]}toReadableStream(){const e=this;let t;return(0,s.makeReadableStream)({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:n}=await t.next();if(n)return e.close();const a=(0,u.encodeUTF8)(JSON.stringify(r)+"\n");e.enqueue(a)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}async function*f(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new i.AnthropicError("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new i.AnthropicError("Attempted to iterate over a response with no body")}const r=new g,n=new o.LineDecoder,a=(0,l.ReadableStreamToAsyncIterable)(e.body);for await(const e of async function*(e){let t=new Uint8Array;for await(const r of e){if(null==r)continue;const e=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?(0,u.encodeUTF8)(r):r;let n,a=new Uint8Array(t.length+e.length);for(a.set(t),a.set(e,t.length),t=a;-1!==(n=(0,o.findDoubleNewlineIndex)(t));)yield t.slice(0,n),t=t.slice(n)}t.length>0&&(yield t)}(a))for(const t of n.decode(e)){const e=r.decode(t);e&&(yield e)}for(const e of n.flush()){const t=r.decode(e);t&&(yield t)}}t.Stream=h;class g{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}},85474:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnknownDef=function(){return{}}},85492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClient=function(e,t={}){var r,a,s;const l=null!==(r=t.pipeline)&&void 0!==r?r:(0,n.createDefaultPipeline)(t);if(null===(a=t.additionalPolicies)||void 0===a?void 0:a.length)for(const{policy:e,position:r}of t.additionalPolicies){const t="perRetry"===r?"Sign":void 0;l.addPolicy(e,{afterPhase:t})}const{allowInsecureConnection:c,httpClient:d}=t,u=null!==(s=t.endpoint)&&void 0!==s?s:e,p=(e,...t)=>{const r=r=>(0,i.buildRequestUrl)(u,e,t,Object.assign({allowInsecureConnection:c},r));return{get:(e={})=>o("GET",r(e),l,e,c,d),post:(e={})=>o("POST",r(e),l,e,c,d),put:(e={})=>o("PUT",r(e),l,e,c,d),patch:(e={})=>o("PATCH",r(e),l,e,c,d),delete:(e={})=>o("DELETE",r(e),l,e,c,d),head:(e={})=>o("HEAD",r(e),l,e,c,d),options:(e={})=>o("OPTIONS",r(e),l,e,c,d),trace:(e={})=>o("TRACE",r(e),l,e,c,d)}};return{path:p,pathUnchecked:p,pipeline:l}};const n=r(44187),a=r(77980),i=r(13909),s=r(25983);function o(e,t,r,n,i,o){var l;return i=null!==(l=n.allowInsecureConnection)&&void 0!==l?l:i,{then:function(s,l){return(0,a.sendRequest)(e,t,r,Object.assign(Object.assign({},n),{allowInsecureConnection:i}),o).then(s,l)},async asBrowserStream(){if(s.isNodeLike)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return(0,a.sendRequest)(e,t,r,Object.assign(Object.assign({},n),{allowInsecureConnection:i,responseAsStream:!0}),o)},async asNodeStream(){if(s.isNodeLike)return(0,a.sendRequest)(e,t,r,Object.assign(Object.assign({},n),{allowInsecureConnection:i,responseAsStream:!0}),o);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}},85616:e=>{"use strict";var t={};function r(e){return e<0?-1:1}function n(e,t){t.unsigned||--e;const n=t.unsigned?0:-Math.pow(2,e),a=Math.pow(2,e)-1,i=t.moduloBitLength?Math.pow(2,t.moduloBitLength):Math.pow(2,e),s=t.moduloBitLength?Math.pow(2,t.moduloBitLength-1):Math.pow(2,e-1);return function(e,o){o||(o={});let l=+e;if(o.enforceRange){if(!Number.isFinite(l))throw new TypeError("Argument is not a finite number");if(l=r(l)*Math.floor(Math.abs(l)),l<n||l>a)throw new TypeError("Argument is not in byte range");return l}if(!isNaN(l)&&o.clamp)return l=function(e){return e%1!=.5||1&e?Math.round(e):Math.floor(e)}(l),l<n&&(l=n),l>a&&(l=a),l;if(!Number.isFinite(l)||0===l)return 0;if(l=r(l)*Math.floor(Math.abs(l)),l%=i,!t.unsigned&&l>=s)return l-i;if(t.unsigned)if(l<0)l+=i;else if(-0===l)return 0;return l}}e.exports=t,t.void=function(){},t.boolean=function(e){return!!e},t.byte=n(8,{unsigned:!1}),t.octet=n(8,{unsigned:!0}),t.short=n(16,{unsigned:!1}),t["unsigned short"]=n(16,{unsigned:!0}),t.long=n(32,{unsigned:!1}),t["unsigned long"]=n(32,{unsigned:!0}),t["long long"]=n(32,{unsigned:!1,moduloBitLength:64}),t["unsigned long long"]=n(32,{unsigned:!0,moduloBitLength:64}),t.double=function(e){const t=+e;if(!Number.isFinite(t))throw new TypeError("Argument is not a finite floating-point value");return t},t["unrestricted double"]=function(e){const t=+e;if(isNaN(t))throw new TypeError("Argument is NaN");return t},t.float=t.double,t["unrestricted float"]=t["unrestricted double"],t.DOMString=function(e,t){return t||(t={}),t.treatNullAsEmptyString&&null===e?"":String(e)},t.ByteString=function(e,t){const r=String(e);let n;for(let e=0;void 0!==(n=r.codePointAt(e));++e)if(n>255)throw new TypeError("Argument is not a valid bytestring");return r},t.USVString=function(e){const t=String(e),r=t.length,n=[];for(let e=0;e<r;++e){const a=t.charCodeAt(e);if(a<55296||a>57343)n.push(String.fromCodePoint(a));else if(56320<=a&&a<=57343)n.push(String.fromCodePoint(65533));else if(e===r-1)n.push(String.fromCodePoint(65533));else{const r=t.charCodeAt(e+1);if(56320<=r&&r<=57343){const t=1023&a,i=1023&r;n.push(String.fromCodePoint(65536+1024*t+i)),++e}else n.push(String.fromCodePoint(65533))}}return n.join("")},t.Date=function(e,t){if(!(e instanceof Date))throw new TypeError("Argument is not a Date object");if(!isNaN(e))return e},t.RegExp=function(e,t){return e instanceof RegExp||(e=new RegExp(e)),e}},85760:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.convertPromptToOpenAI=t.toFile=t.OpenAIClient=void 0;var i=r(32012);Object.defineProperty(t,"OpenAIClient",{enumerable:!0,get:function(){return i.OpenAI}}),Object.defineProperty(t,"toFile",{enumerable:!0,get:function(){return i.toFile}}),a(r(80975),t),a(r(83295),t),a(r(4304),t),a(r(20896),t),a(r(94898),t),a(r(67042),t),a(r(8247),t),a(r(65792),t),a(r(81047),t),a(r(46948),t);var s=r(47467);Object.defineProperty(t,"convertPromptToOpenAI",{enumerable:!0,get:function(){return s.convertPromptToOpenAI}})},85953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LLM=t.BaseLLM=void 0;const n=r(14190),a=r(50383),i=r(31413),s=r(37738),o=r(28033),l=r(12031);class c extends s.BaseLanguageModel{constructor({concurrency:e,...t}){super(e?{maxConcurrency:e,...t}:t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}async invoke(e,t){const r=c._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t?.callbacks)).generations[0][0].text}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}_separateRunnableConfigFromCallOptionsCompat(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async*_streamIterator(e,t){if(this._streamResponseChunks===c.prototype._streamResponseChunks)yield this.invoke(e,t);else{const r=c._convertInputToPromptValue(e),[n,s]=this._separateRunnableConfigFromCallOptionsCompat(t),o=await i.CallbackManager.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),l={options:s,invocation_params:this?.invocationParams(s),batch_size:1},d=await(o?.handleLLMStart(this.toJSON(),[r.toString()],n.runId,void 0,l,void 0,void 0,n.runName));let u=new a.GenerationChunk({text:""});try{for await(const e of this._streamResponseChunks(r.toString(),s,d?.[0]))u=u?u.concat(e):e,"string"==typeof e.text&&(yield e.text)}catch(e){throw await Promise.all((d??[]).map(t=>t?.handleLLMError(e))),e}await Promise.all((d??[]).map(e=>e?.handleLLMEnd({generations:[[u]]})))}}async generatePrompt(e,t,r){const n=e.map(e=>e.toString());return this.generate(n,t,r)}invocationParams(e){return{}}_flattenLLMResult(e){const t=[];for(let r=0;r<e.generations.length;r+=1){const n=e.generations[r];if(0===r)t.push({generations:[n],llmOutput:e.llmOutput});else{const r=e.llmOutput?{...e.llmOutput,tokenUsage:{}}:void 0;t.push({generations:[n],llmOutput:r})}}return t}async _generateUncached(e,t,r,n){let s,d;if(void 0!==n&&n.length===e.length)s=n;else{const n=await i.CallbackManager.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),a={options:t,invocation_params:this?.invocationParams(t),batch_size:e.length};s=await(n?.handleLLMStart(this.toJSON(),e,r.runId,void 0,a,void 0,void 0,r?.runName))}if(s?.[0].handlers.find(l.callbackHandlerPrefersStreaming)&&1===e.length&&this._streamResponseChunks!==c.prototype._streamResponseChunks)try{const r=await this._streamResponseChunks(e[0],t,s?.[0]);let n;for await(const e of r)n=void 0===n?e:(0,o.concat)(n,e);if(void 0===n)throw new Error("Received empty response from chat model call.");d={generations:[[n]],llmOutput:{}},await(s?.[0].handleLLMEnd(d))}catch(e){throw await(s?.[0].handleLLMError(e)),e}else{try{d=await this._generate(e,t,s?.[0])}catch(e){throw await Promise.all((s??[]).map(t=>t?.handleLLMError(e))),e}const r=this._flattenLLMResult(d);await Promise.all((s??[]).map((e,t)=>e?.handleLLMEnd(r[t])))}const u=s?.map(e=>e.runId)||void 0;return Object.defineProperty(d,a.RUN_KEY,{value:u?{runIds:u}:void 0,configurable:!0}),d}async _generateCached({prompts:e,cache:t,llmStringKey:r,parsedOptions:n,handledOptions:s,runId:o}){const l=await i.CallbackManager.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),c={options:n,invocation_params:this?.invocationParams(n),batch_size:e.length},d=await(l?.handleLLMStart(this.toJSON(),e,o,void 0,c,void 0,void 0,s?.runName)),u=[],p=(await Promise.allSettled(e.map(async(e,n)=>{const a=await t.lookup(e,r);return null==a&&u.push(n),a}))).map((e,t)=>({result:e,runManager:d?.[t]})).filter(({result:e})=>"fulfilled"===e.status&&null!=e.value||"rejected"===e.status),m=[];await Promise.all(p.map(async({result:e,runManager:t},r)=>{if("fulfilled"===e.status){const n=e.value;return m[r]=n.map(e=>(e.generationInfo={...e.generationInfo,tokenUsage:{}},e)),n.length&&await(t?.handleLLMNewToken(n[0].text)),t?.handleLLMEnd({generations:[n]},void 0,void 0,void 0,{cached:!0})}return await(t?.handleLLMError(e.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(e.reason)}));const h={generations:m,missingPromptIndices:u,startedRunManagers:d};return Object.defineProperty(h,a.RUN_KEY,{value:d?{runIds:d?.map(e=>e.runId)}:void 0,configurable:!0}),h}async generate(e,t,r){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let n;n=Array.isArray(t)?{stop:t}:t;const[a,i]=this._separateRunnableConfigFromCallOptionsCompat(n);if(a.callbacks=a.callbacks??r,!this.cache)return this._generateUncached(e,i,a);const{cache:s}=this,o=this._getSerializedCacheKeyParametersForCall(i),{generations:l,missingPromptIndices:c,startedRunManagers:d}=await this._generateCached({prompts:e,cache:s,llmStringKey:o,parsedOptions:i,handledOptions:a,runId:a.runId});let u={};if(c.length>0){const t=await this._generateUncached(c.map(t=>e[t]),i,a,void 0!==d?c.map(e=>d?.[e]):void 0);await Promise.all(t.generations.map(async(t,r)=>{const n=c[r];return l[n]=t,s.update(e[n],o,t)})),u=t.llmOutput??{}}return{generations:l,llmOutput:u}}async call(e,t,r){const{generations:n}=await this.generate([e],t,r);return n[0][0].text}async predict(e,t,r){return this.call(e,t,r)}async predictMessages(e,t,r){const a=(0,n.getBufferString)(e),i=await this.call(a,t,r);return new n.AIMessage(i)}_identifyingParams(){return{}}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}_modelType(){return"base_llm"}}t.BaseLLM=c,t.LLM=class extends c{async _generate(e,t,r){return{generations:await Promise.all(e.map((e,n)=>this._call(e,{...t,promptIndex:n},r).then(e=>[{text:e}])))}}}},86003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Runs=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(51109)),s=r(51109),o=r(75552),l=r(54815);class c extends a.APIResource{constructor(){super(...arguments),this.outputItems=new i.OutputItems(this._client)}create(e,t,r){return this._client.post(l.path`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){const{eval_id:n}=t;return this._client.get(l.path`/evals/${n}/runs/${e}`,r)}list(e,t={},r){return this._client.getAPIList(l.path`/evals/${e}/runs`,o.CursorPage,{query:t,...r})}delete(e,t,r){const{eval_id:n}=t;return this._client.delete(l.path`/evals/${n}/runs/${e}`,r)}cancel(e,t,r){const{eval_id:n}=t;return this._client.post(l.path`/evals/${n}/runs/${e}`,r)}}t.Runs=c,c.OutputItems=s.OutputItems},86188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatRequestDetails=t.parseLogLevel=void 0,t.loggerFor=c;const n=r(15734),a={off:0,error:200,warn:300,info:400,debug:500};function i(){}function s(e,t,r){return!t||a[e]>a[r]?i:t[e].bind(t)}t.parseLogLevel=(e,t,r)=>{if(e)return(0,n.hasOwn)(a,e)?e:void c(r).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(a))}`)};const o={error:i,warn:i,info:i,debug:i};let l=new WeakMap;function c(e){const t=e.logger,r=e.logLevel??"off";if(!t)return o;const n=l.get(t);if(n&&n[0]===r)return n[1];const a={error:s("error",t,r),warn:s("warn",t,r),info:s("info",t,r),debug:s("debug",t,r)};return l.set(t,[r,a]),a}t.formatRequestDetails=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e)},86220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRestError=void 0;const n=r(11715);function a(e){var t;return{headers:(0,n.createHttpHeaders)(e.headers),request:e.request,status:null!==(t=i(e.status))&&void 0!==t?t:-1}}function i(e){const t=Number.parseInt(e);return Number.isNaN(t)?void 0:t}t.createRestError=function(e,t){var r;const s="string"==typeof e?t:e,o=s.body.error||s.body,l="string"==typeof e?e:null!==(r=o.message)&&void 0!==r?r:`Unexpected status code: ${s.status}`;return new n.RestError(l,{statusCode:i(s.status),code:o.code,request:s.request,response:a(s)})}},86244:(e,t,r)=>{"use strict";const n=r(63735),a=r(16928),i=r(4423).copySync,s=r(35422).removeSync,o=r(63798).mkdirpSync,l=r(66462);function c(e,t,r){try{n.renameSync(e,t)}catch(n){if("EXDEV"!==n.code)throw n;return function(e,t,r){return i(e,t,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),s(e)}(e,t,r)}}e.exports=function(e,t,r){const i=(r=r||{}).overwrite||r.clobber||!1,{srcStat:d,isChangingCase:u=!1}=l.checkPathsSync(e,t,"move",r);return l.checkParentPathsSync(e,d,t,"move"),function(e){const t=a.dirname(e);return a.parse(t).root===t}(t)||o(a.dirname(t)),function(e,t,r,a){if(a)return c(e,t,r);if(r)return s(t),c(e,t,r);if(n.existsSync(t))throw new Error("dest already exists.");return c(e,t,r)}(e,t,i,u)}},86420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseReadonlyDef=void 0;const n=r(95445);t.parseReadonlyDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},86430:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolInputParsingException=void 0,t._isToolCall=function(e){return!(!e||"object"!=typeof e||!("type"in e)||"tool_call"!==e.type)},t._configHasToolCallId=function(e){return!!(e&&"object"==typeof e&&"toolCall"in e&&null!=e.toolCall&&"object"==typeof e.toolCall&&"id"in e.toolCall&&"string"==typeof e.toolCall.id)};class r extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}t.ToolInputParsingException=r},86771:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insecureHash=void 0;var r="object"==typeof window?window:{},n="0123456789abcdef".split(""),a=[-2147483648,8388608,32768,128],i=[24,16,8,0],s=[];function o(e){e?(s[0]=s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0,this.blocks=s):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}o.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===r.ArrayBuffer&&(e=new Uint8Array(e));for(var n,a,s=0,o=e.length||0,l=this.blocks;s<o;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),t)for(a=this.start;s<o&&a<64;++s)l[a>>2]|=e[s]<<i[3&a++];else for(a=this.start;s<o&&a<64;++s)(n=e.charCodeAt(s))<128?l[a>>2]|=n<<i[3&a++]:n<2048?(l[a>>2]|=(192|n>>6)<<i[3&a++],l[a>>2]|=(128|63&n)<<i[3&a++]):n<55296||n>=57344?(l[a>>2]|=(224|n>>12)<<i[3&a++],l[a>>2]|=(128|n>>6&63)<<i[3&a++],l[a>>2]|=(128|63&n)<<i[3&a++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++s)),l[a>>2]|=(240|n>>18)<<i[3&a++],l[a>>2]|=(128|n>>12&63)<<i[3&a++],l[a>>2]|=(128|n>>6&63)<<i[3&a++],l[a>>2]|=(128|63&n)<<i[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=l[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},o.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=a[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},o.prototype.hash=function(){var e,t,r=this.h0,n=this.h1,a=this.h2,i=this.h3,s=this.h4,o=this.blocks;for(e=16;e<80;++e)t=o[e-3]^o[e-8]^o[e-14]^o[e-16],o[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)r=(t=(n=(t=(a=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n&a|~n&i)+s+1518500249+o[e]|0)<<5|s>>>27)+(r&(n=n<<30|n>>>2)|~r&a)+i+1518500249+o[e+1]|0)<<5|i>>>27)+(s&(r=r<<30|r>>>2)|~s&n)+a+1518500249+o[e+2]|0)<<5|a>>>27)+(i&(s=s<<30|s>>>2)|~i&r)+n+1518500249+o[e+3]|0)<<5|n>>>27)+(a&(i=i<<30|i>>>2)|~a&s)+r+1518500249+o[e+4]|0,a=a<<30|a>>>2;for(;e<40;e+=5)r=(t=(n=(t=(a=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n^a^i)+s+1859775393+o[e]|0)<<5|s>>>27)+(r^(n=n<<30|n>>>2)^a)+i+1859775393+o[e+1]|0)<<5|i>>>27)+(s^(r=r<<30|r>>>2)^n)+a+1859775393+o[e+2]|0)<<5|a>>>27)+(i^(s=s<<30|s>>>2)^r)+n+1859775393+o[e+3]|0)<<5|n>>>27)+(a^(i=i<<30|i>>>2)^s)+r+1859775393+o[e+4]|0,a=a<<30|a>>>2;for(;e<60;e+=5)r=(t=(n=(t=(a=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n&a|n&i|a&i)+s-1894007588+o[e]|0)<<5|s>>>27)+(r&(n=n<<30|n>>>2)|r&a|n&a)+i-1894007588+o[e+1]|0)<<5|i>>>27)+(s&(r=r<<30|r>>>2)|s&n|r&n)+a-1894007588+o[e+2]|0)<<5|a>>>27)+(i&(s=s<<30|s>>>2)|i&r|s&r)+n-1894007588+o[e+3]|0)<<5|n>>>27)+(a&(i=i<<30|i>>>2)|a&s|i&s)+r-1894007588+o[e+4]|0,a=a<<30|a>>>2;for(;e<80;e+=5)r=(t=(n=(t=(a=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n^a^i)+s-899497514+o[e]|0)<<5|s>>>27)+(r^(n=n<<30|n>>>2)^a)+i-899497514+o[e+1]|0)<<5|i>>>27)+(s^(r=r<<30|r>>>2)^n)+a-899497514+o[e+2]|0)<<5|a>>>27)+(i^(s=s<<30|s>>>2)^r)+n-899497514+o[e+3]|0)<<5|n>>>27)+(a^(i=i<<30|i>>>2)^s)+r-899497514+o[e+4]|0,a=a<<30|a>>>2;this.h0=this.h0+r|0,this.h1=this.h1+n|0,this.h2=this.h2+a|0,this.h3=this.h3+i|0,this.h4=this.h4+s|0},o.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,a=this.h3,i=this.h4;return n[e>>28&15]+n[e>>24&15]+n[e>>20&15]+n[e>>16&15]+n[e>>12&15]+n[e>>8&15]+n[e>>4&15]+n[15&e]+n[t>>28&15]+n[t>>24&15]+n[t>>20&15]+n[t>>16&15]+n[t>>12&15]+n[t>>8&15]+n[t>>4&15]+n[15&t]+n[r>>28&15]+n[r>>24&15]+n[r>>20&15]+n[r>>16&15]+n[r>>12&15]+n[r>>8&15]+n[r>>4&15]+n[15&r]+n[a>>28&15]+n[a>>24&15]+n[a>>20&15]+n[a>>16&15]+n[a>>12&15]+n[a>>8&15]+n[a>>4&15]+n[15&a]+n[i>>28&15]+n[i>>24&15]+n[i>>20&15]+n[i>>16&15]+n[i>>12&15]+n[i>>8&15]+n[i>>4&15]+n[15&i]},o.prototype.toString=o.prototype.hex,o.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a]},o.prototype.array=o.prototype.digest,o.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e},t.insecureHash=e=>new o(!0).update(e).hex()},87016:e=>{"use strict";e.exports=require("url")},87073:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function t(t){return e[t]??null}const r={regex:"entrée",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"};return e=>{switch(e.code){case"invalid_type":return`Entrée invalide : ${e.expected} attendu, ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"nombre";case"object":if(Array.isArray(e))return"tableau";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)} reçu`;case"invalid_value":return 1===e.values.length?`Entrée invalide : ${s.stringifyPrimitive(e.values[0])} attendu`:`Option invalide : une valeur parmi ${s.joinValues(e.values,"|")} attendue`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Trop grand : ${e.origin??"valeur"} doit ${n.verb} ${r}${e.maximum.toString()} ${n.unit??"élément(s)"}`:`Trop grand : ${e.origin??"valeur"} doit être ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Trop petit : ${e.origin} doit ${n.verb} ${r}${e.minimum.toString()} ${n.unit}`:`Trop petit : ${e.origin} doit être ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Chaîne invalide : doit commencer par "${t.prefix}"`:"ends_with"===t.format?`Chaîne invalide : doit se terminer par "${t.suffix}"`:"includes"===t.format?`Chaîne invalide : doit inclure "${t.includes}"`:"regex"===t.format?`Chaîne invalide : doit correspondre au modèle ${t.pattern}`:`${r[t.format]??e.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${e.divisor}`;case"unrecognized_keys":return`Clé${e.keys.length>1?"s":""} non reconnue${e.keys.length>1?"s":""} : ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${e.origin}`;case"invalid_union":default:return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${e.origin}`}}}},87090:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createForm=t.multipartFormRequestOptions=t.maybeMultipartFormRequestOptions=t.isAsyncIterable=t.checkFileSupport=void 0,t.makeFile=a,t.getName=i;const n=r(6462);function a(e,r,n){return(0,t.checkFileSupport)(),new File(e,r??"unknown_file",n)}function i(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}t.checkFileSupport=()=>{if("undefined"==typeof File){const{process:e}=globalThis,t="string"==typeof e?.versions?.node&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}},t.isAsyncIterable=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],t.maybeMultipartFormRequestOptions=async(e,r)=>l(e.body)?{...e,body:await(0,t.createForm)(e.body,r)}:e,t.multipartFormRequestOptions=async(e,r)=>({...e,body:await(0,t.createForm)(e.body,r)});const s=new WeakMap;t.createForm=async(e,t)=>{if(!await function(e){const t="function"==typeof e?e:e.fetch,r=s.get(t);if(r)return r;const n=(async()=>{try{const e="Response"in t?t.Response:(await t("data:,")).constructor,r=new FormData;return r.toString()!==await new e(r).text()}catch{return!0}})();return s.set(t,n),n}(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>c(r,e,t))),r};const o=e=>e instanceof Blob&&"name"in e,l=e=>{if((e=>"object"==typeof e&&null!==e&&(e instanceof Response||(0,t.isAsyncIterable)(e)||o(e)))(e))return!0;if(Array.isArray(e))return e.some(l);if(e&&"object"==typeof e)for(const t in e)if(l(e[t]))return!0;return!1},c=async(e,r,s)=>{if(void 0!==s){if(null==s)throw new TypeError(`Received null for "${r}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof s||"number"==typeof s||"boolean"==typeof s)e.append(r,String(s));else if(s instanceof Response){let t={};const n=s.headers.get("Content-Type");n&&(t={type:n}),e.append(r,a([await s.blob()],i(s),t))}else if((0,t.isAsyncIterable)(s))e.append(r,a([await new Response((0,n.ReadableStreamFrom)(s)).blob()],i(s)));else if(o(s))e.append(r,a([s],i(s),{type:s.type}));else if(Array.isArray(s))await Promise.all(s.map(t=>c(e,r+"[]",t)));else{if("object"!=typeof s)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`);await Promise.all(Object.entries(s).map(([t,n])=>c(e,`${r}[${t}]`,n)))}}}},87319:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Doc=void 0,t.Doc=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length)),n=t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e);for(const e of n)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}},87324:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=function(e,t,r,a,i){try{return c(JSON.stringify(e,(l=r,function(e,t){if(l){const r=l.call(this,e,t);if(void 0!==r)return r}return d(t)}),a))}catch(l){if(!l.message?.includes("Converting circular structure to JSON"))return console.warn("[WARNING]: LangSmith received unserializable value."+(t?`\nContext: ${t}`:"")),c("[Unserializable]");let d;"true"!==(0,n.getLangSmithEnvironmentVariable)("SUPPRESS_CIRCULAR_JSON_WARNINGS")&&console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. "+(t?`\nContext: ${t}`:"")),void 0===i&&(i={depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}),p(e,"",0,[],void 0,0,i);try{d=0===o.length?JSON.stringify(e,r,a):JSON.stringify(e,function(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(o.length>0)for(var n=0;n<o.length;n++){var a=o[n];if(a[1]===t&&a[0]===r){r=a[2],o.splice(n,1);break}}return e.call(this,t,r)}}(r),a)}catch(e){return c("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==s.length;){const e=s.pop();4===e.length?Object.defineProperty(e[0],e[1],e[3]):e[0][e[1]]=e[2]}}return c(d)}var l};const n=r(51400);var a="[...]",i={result:"[Circular]"},s=[],o=[];const l=new TextEncoder;function c(e){return l.encode(e)}function d(e){if(e&&"object"==typeof e&&null!==e){if(e instanceof Map)return Object.fromEntries(e);if(e instanceof Set)return Array.from(e);if(e instanceof Date)return e.toISOString();if(e instanceof RegExp)return e.toString();if(e instanceof Error)return{name:e.name,message:e.message}}else if("bigint"==typeof e)return e.toString();return e}function u(e,t,r,n){var a=Object.getOwnPropertyDescriptor(n,r);void 0!==a.get?a.configurable?(Object.defineProperty(n,r,{value:e}),s.push([n,r,t,a])):o.push([t,r,e]):(n[r]=e,s.push([n,r,t]))}function p(e,t,r,n,s,o,l){var c;if(o+=1,"object"==typeof e&&null!==e){for(c=0;c<n.length;c++)if(n[c]===e)return void u(i,e,t,s);if(void 0!==l.depthLimit&&o>l.depthLimit)return void u(a,e,t,s);if(void 0!==l.edgesLimit&&r+1>l.edgesLimit)return void u(a,e,t,s);if(n.push(e),Array.isArray(e))for(c=0;c<e.length;c++)p(e[c],c,c,n,e,o,l);else{e=d(e);var m=Object.keys(e);for(c=0;c<m.length;c++){var h=m[c];p(e[h],h,c,n,e,o,l)}}n.pop()}}},87370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Images=void 0;const n=r(82040),a=r(12018);class i extends n.APIResource{createVariation(e,t){return this._client.post("/images/variations",(0,a.multipartFormRequestOptions)({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",(0,a.multipartFormRequestOptions)({body:e,...t,stream:e.stream??!1},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t,stream:e.stream??!1})}}t.Images=i},87476:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isOAuth2TokenCredential=function(e){return"getOAuth2Token"in e},t.isBearerTokenCredential=function(e){return"getBearerToken"in e},t.isBasicCredential=function(e){return"username"in e&&"password"in e},t.isApiKeyCredential=function(e){return"key"in e}},87752:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(76982);t.default={randomUUID:n.randomUUID}},87941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isThrottlingRetryResponse=function(e){return Number.isFinite(s(e))},t.throttlingRetryStrategy=function(){return{name:"throttlingRetryStrategy",retry({response:e}){const t=s(e);return Number.isFinite(t)?{retryAfterInMs:t}:{skipStrategy:!0}}}};const n=r(22253),a="Retry-After",i=["retry-after-ms","x-ms-retry-after-ms",a];function s(e){if(e&&[429,503].includes(e.status))try{for(const t of i){const r=(0,n.parseHeaderValueAsNumber)(e,t);if(0===r||r)return r*(t===a?1e3:1)}const t=e.headers.get(a);if(!t)return;const r=Date.parse(t)-Date.now();return Number.isFinite(r)?Math.max(0,r):void 0}catch(e){return}}},88014:(e,t,r)=>{"use strict";var n,a,i;Object.defineProperty(t,"__esModule",{value:!0}),t.Webhooks=void 0;const s=r(79632),o=r(89526),l=r(82040),c=r(262);class d extends l.APIResource{constructor(){super(...arguments),n.add(this)}async unwrap(e,t,r=this._client.webhookSecret,n=300){return await this.verifySignature(e,t,r,n),JSON.parse(e)}async verifySignature(e,t,r=this._client.webhookSecret,l=300){if("undefined"==typeof crypto||"function"!=typeof crypto.subtle.importKey||"function"!=typeof crypto.subtle.verify)throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");s.__classPrivateFieldGet(this,n,"m",a).call(this,r);const d=(0,c.buildHeaders)([t]).values,u=s.__classPrivateFieldGet(this,n,"m",i).call(this,d,"webhook-signature"),p=s.__classPrivateFieldGet(this,n,"m",i).call(this,d,"webhook-timestamp"),m=s.__classPrivateFieldGet(this,n,"m",i).call(this,d,"webhook-id"),h=parseInt(p,10);if(isNaN(h))throw new o.InvalidWebhookSignatureError("Invalid webhook timestamp format");const f=Math.floor(Date.now()/1e3);if(f-h>l)throw new o.InvalidWebhookSignatureError("Webhook timestamp is too old");if(h>f+l)throw new o.InvalidWebhookSignatureError("Webhook timestamp is too new");const g=u.split(" ").map(e=>e.startsWith("v1,")?e.substring(3):e),y=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),v=m?`${m}.${p}.${e}`:`${p}.${e}`,b=await crypto.subtle.importKey("raw",y,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const e of g)try{const t=Buffer.from(e,"base64");if(await crypto.subtle.verify("HMAC",b,t,(new TextEncoder).encode(v)))return}catch{continue}throw new o.InvalidWebhookSignatureError("The given webhook signature does not match the expected signature")}}t.Webhooks=d,n=new WeakSet,a=function(e){if("string"!=typeof e||0===e.length)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},i=function(e,t){if(!e)throw new Error("Headers are required");const r=e.get(t);if(null==r)throw new Error(`Missing required header: ${t}`);return r}},88177:(e,t,r)=>{e.exports=r(11344)},88293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tlsPolicyName=void 0,t.tlsPolicy=function(e){return{name:t.tlsPolicyName,sendRequest:async(t,r)=>(t.tlsSettings||(t.tlsSettings=e),r(t))}},t.tlsPolicyName="tlsPolicy"},88813:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleCallbackHandler=void 0;const a=n(r(49418)),i=r(18233);function s(e,t){return`${e.open}${t}${e.close}`}function o(e,t){try{return JSON.stringify(e,null,2)}catch(e){return t}}function l(e){return"string"==typeof e?e.trim():null==e?e:o(e,e.toString())}function c(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:d}=a.default;class u extends i.BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const e=this.runMap.get(r.parent_run_id);if(!e)break;t.push(e),r=e}return t}getBreadcrumbs(e){const t=[...this.getParents(e).reverse(),e].map((e,t,r)=>{const n=`${e.execution_order}:${e.run_type}:${e.name}`;return t===r.length-1?s(a.default.bold,n):n}).join(" > ");return s(d.grey,t)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.green,"[chain/start]")} [${t}] Entering Chain run with input: ${o(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.cyan,"[chain/end]")} [${t}] [${c(e)}] Exiting Chain run with output: ${o(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.red,"[chain/error]")} [${t}] [${c(e)}] Chain run errored with error: ${o(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(e=>e.trim())}:e.inputs;console.log(`${s(d.green,"[llm/start]")} [${t}] Entering LLM run with input: ${o(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.cyan,"[llm/end]")} [${t}] [${c(e)}] Exiting LLM run with output: ${o(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.red,"[llm/error]")} [${t}] [${c(e)}] LLM run errored with error: ${o(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.green,"[tool/start]")} [${t}] Entering Tool run with input: "${l(e.inputs.input)}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.cyan,"[tool/end]")} [${t}] [${c(e)}] Exiting Tool run with output: "${l(e.outputs?.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.red,"[tool/error]")} [${t}] [${c(e)}] Tool run errored with error: ${o(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${o(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.cyan,"[retriever/end]")} [${t}] [${c(e)}] Exiting Retriever run with output: ${o(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${s(d.red,"[retriever/error]")} [${t}] [${c(e)}] Retriever run errored with error: ${o(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${s(d.blue,"[agent/action]")} [${r}] Agent selected action: ${o(t.actions[t.actions.length-1],"[action]")}`)}}t.ConsoleCallbackHandler=u},89008:(e,t)=>{"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvironmentVariable=t.getRuntimeEnvironment=t.getEnv=t.isNode=t.isDeno=t.isJsDom=t.isWebWorker=t.isBrowser=void 0,t.isBrowser=()=>"undefined"!=typeof window&&void 0!==window.document,t.isWebWorker=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,t.isJsDom=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),t.isDeno=()=>"undefined"!=typeof Deno,t.isNode=()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node&&!(0,t.isDeno)(),t.getEnv=()=>{let e;return e=(0,t.isBrowser)()?"browser":(0,t.isNode)()?"node":(0,t.isWebWorker)()?"webworker":(0,t.isJsDom)()?"jsdom":(0,t.isDeno)()?"deno":"other",e},t.getRuntimeEnvironment=async function(){if(void 0===r){const e=(0,t.getEnv)();r={library:"langchain-js",runtime:e}}return r},t.getEnvironmentVariable=function(e){try{return"undefined"!=typeof process?process.env?.[e]:void 0}catch(e){return}}},89325:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},89338:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseReadonlyDef=void 0;const n=r(55767);t.parseReadonlyDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},89526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(79632).__exportStar(r(44172),t)},89616:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,a=r(16928),i=r(98737),s=r(63798);e.exports={createFile:n(async function(e){let t;try{t=await i.stat(e)}catch{}if(t&&t.isFile())return;const r=a.dirname(e);let n=null;try{n=await i.stat(r)}catch(t){if("ENOENT"===t.code)return await s.mkdirs(r),void await i.writeFile(e,"");throw t}n.isDirectory()?await i.writeFile(e,""):await i.readdir(r)}),createFileSync:function(e){let t;try{t=i.statSync(e)}catch{}if(t&&t.isFile())return;const r=a.dirname(e);try{i.statSync(r).isDirectory()||i.readdirSync(r)}catch(e){if(!e||"ENOENT"!==e.code)throw e;s.mkdirsSync(r)}i.writeFileSync(e,"")}}},89629:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRecordDef=void 0;const n=r(7552),a=r(55767),i=r(70345),s=r(81358),o=r(59160);t.parseRecordDef=function(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??(0,o.parseAnyDef)(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const r={type:"object",additionalProperties:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.checks?.length){const{type:n,...a}=(0,i.parseStringDef)(e.keyType._def,t);return{...r,propertyNames:a}}if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===n.ZodFirstPartyTypeKind.ZodBranded&&e.keyType._def.type._def.typeName===n.ZodFirstPartyTypeKind.ZodString&&e.keyType._def.type._def.checks?.length){const{type:n,...a}=(0,s.parseBrandedDef)(e.keyType._def,t);return{...r,propertyNames:a}}return r}},89917:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"знаци",verb:"да имаат"},file:{unit:"бајти",verb:"да имаат"},array:{unit:"ставки",verb:"да имаат"},set:{unit:"ставки",verb:"да имаат"}};function t(t){return e[t]??null}const r={regex:"внес",email:"адреса на е-пошта",url:"URL",emoji:"емоџи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO датум и време",date:"ISO датум",time:"ISO време",duration:"ISO времетраење",ipv4:"IPv4 адреса",ipv6:"IPv6 адреса",cidrv4:"IPv4 опсег",cidrv6:"IPv6 опсег",base64:"base64-енкодирана низа",base64url:"base64url-енкодирана низа",json_string:"JSON низа",e164:"E.164 број",jwt:"JWT",template_literal:"внес"};return e=>{switch(e.code){case"invalid_type":return`Грешен внес: се очекува ${e.expected}, примено ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"број";case"object":if(Array.isArray(e))return"низа";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`Invalid input: expected ${s.stringifyPrimitive(e.values[0])}`:`Грешана опција: се очекува една ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?`Премногу голем: се очекува ${e.origin??"вредноста"} да има ${r}${e.maximum.toString()} ${n.unit??"елементи"}`:`Премногу голем: се очекува ${e.origin??"вредноста"} да биде ${r}${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`Премногу мал: се очекува ${e.origin} да има ${r}${e.minimum.toString()} ${n.unit}`:`Премногу мал: се очекува ${e.origin} да биде ${r}${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`Неважечка низа: мора да започнува со "${t.prefix}"`:"ends_with"===t.format?`Неважечка низа: мора да завршува со "${t.suffix}"`:"includes"===t.format?`Неважечка низа: мора да вклучува "${t.includes}"`:"regex"===t.format?`Неважечка низа: мора да одгоара на патернот ${t.pattern}`:`Invalid ${r[t.format]??e.format}`}case"not_multiple_of":return`Грешен број: мора да биде делив со ${e.divisor}`;case"unrecognized_keys":return`${e.keys.length>1?"Непрепознаени клучеви":"Непрепознаен клуч"}: ${s.joinValues(e.keys,", ")}`;case"invalid_key":return`Грешен клуч во ${e.origin}`;case"invalid_union":default:return"Грешен внес";case"invalid_element":return`Грешна вредност во ${e.origin}`}}}},89969:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.raiseForStatus=t.LangSmithConflictError=t.printErrorStackTrace=void 0,t.printErrorStackTrace=function(e){const t=function(e){if("object"!=typeof e||null==e)return;if(!("stack"in e)||"string"!=typeof e.stack)return;let t=e.stack;const r=`${e}`;return t.startsWith(r)&&(t=t.slice(r.length)),t.startsWith("\n")&&(t=t.slice(1)),t}(e);null!=t&&console.error(t)};class r extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}t.LangSmithConflictError=r,t.raiseForStatus=async function(e,t,n){let a;if(e.ok)return void(n&&(a=await e.text()));a=await e.text();const i=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Server response: ${a}`;if(409===e.status)throw new r(i);throw new Error(i)}},90094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePipelineDef=void 0;const n=r(55767);t.parsePipelineDef=(e,t)=>{if("input"===t.pipeStrategy)return(0,n.parseDef)(e.in._def,t);if("output"===t.pipeStrategy)return(0,n.parseDef)(e.out._def,t);const r=(0,n.parseDef)(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,(0,n.parseDef)(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter(e=>void 0!==e)}}},90309:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(96775),t),a(r(96699),t),a(r(47027),t),a(r(14098),t),a(r(55767),t),a(r(25041),t),a(r(59160),t),a(r(79263),t),a(r(67555),t),a(r(37498),t),a(r(81358),t),a(r(57161),t),a(r(63212),t),a(r(79923),t),a(r(21468),t),a(r(17965),t),a(r(60769),t),a(r(66365),t),a(r(48760),t),a(r(58366),t),a(r(620),t),a(r(33233),t),a(r(7309),t),a(r(46021),t),a(r(28799),t),a(r(9600),t),a(r(90094),t),a(r(34175),t),a(r(89338),t),a(r(89629),t),a(r(33538),t),a(r(70345),t),a(r(16880),t),a(r(68442),t),a(r(75613),t),a(r(36704),t),a(r(55650),t),a(r(55340),t);const i=r(55340);t.default=i.zodToJsonSchema},90476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryCache=t.BaseCache=t.serializeGeneration=t.deserializeStoredGeneration=t.getCacheKey=void 0;const n=r(31863),a=r(58219);t.getCacheKey=(...e)=>(0,n.insecureHash)(e.join("_")),t.deserializeStoredGeneration=function(e){return void 0!==e.message?{text:e.text,message:(0,a.mapStoredMessageToChatMessage)(e.message)}:{text:e.text}},t.serializeGeneration=function(e){const t={text:e.text};return void 0!==e.message&&(t.message=e.message.toDict()),t};class i{}t.BaseCache=i;const s=new Map;class o extends i{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,r){return Promise.resolve(this.cache.get((0,t.getCacheKey)(e,r))??null)}async update(e,r,n){this.cache.set((0,t.getCacheKey)(e,r),n)}static global(){return new o(s)}}t.InMemoryCache=o},90523:(e,t)=>{"use strict";function r(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function n(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function a(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function i(e){if(!1===a(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!1!==a(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}function s(e,t,r){const n=new e._zod.constr(t??e._zod.def);return t&&!r?.parent||(n._zod.parent=e),n}function o(e){return"bigint"==typeof e?e.toString()+"n":"string"==typeof e?`"${e}"`:`${e}`}function l(e){return"string"==typeof e?e:e?.message}Object.defineProperty(t,"__esModule",{value:!0}),t.Class=t.BIGINT_FORMAT_RANGES=t.NUMBER_FORMAT_RANGES=t.primitiveTypes=t.propertyKeyTypes=t.getParsedType=t.allowsEval=t.captureStackTrace=void 0,t.assertEqual=function(e){return e},t.assertNotEqual=function(e){return e},t.assertIs=function(e){},t.assertNever=function(e){throw new Error},t.assert=function(e){},t.getEnumValues=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)},t.joinValues=function(e,t="|"){return e.map(e=>o(e)).join(t)},t.jsonStringifyReplacer=function(e,t){return"bigint"==typeof t?t.toString():t},t.cached=r,t.nullish=function(e){return null==e},t.cleanRegex=function(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)},t.floatSafeRemainder=function(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a},t.defineLazy=function(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})},t.assignProp=n,t.getElementAtPath=function(e,t){return t?t.reduce((e,t)=>e?.[t],e):e},t.promiseAllObject=function(e){const t=Object.keys(e),r=t.map(t=>e[t]);return Promise.all(r).then(e=>{const r={};for(let n=0;n<t.length;n++)r[t[n]]=e[n];return r})},t.randomString=function(e=10){let t="";for(let r=0;r<e;r++)t+="abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())];return t},t.esc=function(e){return JSON.stringify(e)},t.isObject=a,t.isPlainObject=i,t.numKeys=function(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t},t.escapeRegex=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},t.clone=s,t.normalizeParams=function(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t},t.createTransparentProxy=function(e){let t;return new Proxy({},{get:(r,n,a)=>(t??(t=e()),Reflect.get(t,n,a)),set:(r,n,a,i)=>(t??(t=e()),Reflect.set(t,n,a,i)),has:(r,n)=>(t??(t=e()),Reflect.has(t,n)),deleteProperty:(r,n)=>(t??(t=e()),Reflect.deleteProperty(t,n)),ownKeys:r=>(t??(t=e()),Reflect.ownKeys(t)),getOwnPropertyDescriptor:(r,n)=>(t??(t=e()),Reflect.getOwnPropertyDescriptor(t,n)),defineProperty:(r,n,a)=>(t??(t=e()),Reflect.defineProperty(t,n,a))})},t.stringifyPrimitive=o,t.optionalKeys=function(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)},t.pick=function(e,t){const r={},n=e._zod.def;for(const e in t){if(!(e in n.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&(r[e]=n.shape[e])}return s(e,{...e._zod.def,shape:r,checks:[]})},t.omit=function(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const e in t){if(!(e in n.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return s(e,{...e._zod.def,shape:r,checks:[]})},t.extend=function(e,t){if(!i(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const r={...e._zod.def.shape,...t};return n(this,"shape",r),r},checks:[]};return s(e,r)},t.merge=function(e,t){return s(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return n(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})},t.partial=function(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const t in r){if(!(t in n))throw new Error(`Unrecognized key: "${t}"`);r[t]&&(a[t]=e?new e({type:"optional",innerType:n[t]}):n[t])}else for(const t in n)a[t]=e?new e({type:"optional",innerType:n[t]}):n[t];return s(t,{...t._zod.def,shape:a,checks:[]})},t.required=function(e,t,r){const n=t._zod.def.shape,a={...n};if(r)for(const t in r){if(!(t in a))throw new Error(`Unrecognized key: "${t}"`);r[t]&&(a[t]=new e({type:"nonoptional",innerType:n[t]}))}else for(const t in n)a[t]=new e({type:"nonoptional",innerType:n[t]});return s(t,{...t._zod.def,shape:a,checks:[]})},t.aborted=function(e,t=0){for(let r=t;r<e.issues.length;r++)if(!0!==e.issues[r]?.continue)return!0;return!1},t.prefixIssues=function(e,t){return t.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(e),t})},t.unwrapMessage=l,t.finalizeIssue=function(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const a=l(e.inst?._zod.def?.error?.(e))??l(t?.error?.(e))??l(r.customError?.(e))??l(r.localeError?.(e))??"Invalid input";n.message=a}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n},t.getSizableOrigin=function(e){return e instanceof Set?"set":e instanceof Map?"map":e instanceof File?"file":"unknown"},t.getLengthableOrigin=function(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"},t.issue=function(...e){const[t,r,n]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:n}:{...t}},t.cleanEnum=function(e){return Object.entries(e).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])},t.captureStackTrace=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{},t.allowsEval=r(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}}),t.getParsedType=e=>{const t=typeof e;switch(t){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(e)?"array":null===e?"null":e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?"promise":"undefined"!=typeof Map&&e instanceof Map?"map":"undefined"!=typeof Set&&e instanceof Set?"set":"undefined"!=typeof Date&&e instanceof Date?"date":"undefined"!=typeof File&&e instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${t}`)}},t.propertyKeyTypes=new Set(["string","number","symbol"]),t.primitiveTypes=new Set(["string","number","bigint","boolean","symbol","undefined"]),t.NUMBER_FORMAT_RANGES={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},t.BIGINT_FORMAT_RANGES={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]},t.Class=class{constructor(...e){}}},90685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEmptyPipeline=function(){return n.create()};const r=new Set(["Deserialize","Serialize","Retry","Sign"]);class n{constructor(e){var t;this._policies=[],this._policies=null!==(t=null==e?void 0:e.slice(0))&&void 0!==t?t:[],this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!r.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!r.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){const t=[];return this._policies=this._policies.filter(r=>!(e.name&&r.policy.name===e.name||e.phase&&r.options.phase===e.phase)||(t.push(r.policy),!1)),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight((e,t)=>r=>t.sendRequest(r,e),t=>e.sendRequest(t))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new n(this._policies)}static create(){return new n}orderPolicies(){const e=[],t=new Map;function r(e){return{name:e,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const n=r("Serialize"),a=r("None"),i=r("Deserialize"),s=r("Retry"),o=r("Sign"),l=[n,a,i,s,o];function c(e){return"Retry"===e?s:"Serialize"===e?n:"Deserialize"===e?i:"Sign"===e?o:a}for(const e of this._policies){const r=e.policy,n=e.options,a=r.name;if(t.has(a))throw new Error("Duplicate policy names not allowed in pipeline");const i={policy:r,dependsOn:new Set,dependants:new Set};n.afterPhase&&(i.afterPhase=c(n.afterPhase),i.afterPhase.hasAfterPolicies=!0),t.set(a,i),c(n.phase).policies.add(i)}for(const e of this._policies){const{policy:r,options:n}=e,a=r.name,i=t.get(a);if(!i)throw new Error(`Missing node for policy ${a}`);if(n.afterPolicies)for(const e of n.afterPolicies){const r=t.get(e);r&&(i.dependsOn.add(r),r.dependants.add(i))}if(n.beforePolicies)for(const e of n.beforePolicies){const r=t.get(e);r&&(r.dependsOn.add(i),i.dependants.add(r))}}function d(r){r.hasRun=!0;for(const n of r.policies)if((!n.afterPhase||n.afterPhase.hasRun&&!n.afterPhase.policies.size)&&0===n.dependsOn.size){e.push(n.policy);for(const e of n.dependants)e.dependsOn.delete(n);t.delete(n.policy.name),r.policies.delete(n)}}function u(){for(const e of l){if(d(e),e.policies.size>0&&e!==a)return void(a.hasRun||d(a));e.hasAfterPolicies&&d(a)}}let p=0;for(;t.size>0;){p++;const t=e.length;if(u(),e.length<=t&&p>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}}},90819:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.EMPTY_PATH=t.makeIssue=void 0,t.addIssueToContext=function(e,r){const n=(0,a.getErrorMap)(),s=(0,t.makeIssue)({issueData:r,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===i.default?void 0:i.default].filter(e=>!!e)});e.common.issues.push(s)};const a=r(99317),i=n(r(75653));t.makeIssue=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],s={...a,path:i};if(void 0!==a.message)return{...a,path:i,message:a.message};let o="";const l=n.filter(e=>!!e).slice().reverse();for(const e of l)o=e(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},t.EMPTY_PATH=[];class s{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const a of r){if("aborted"===a.status)return t.INVALID;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const r=[];for(const e of t){const t=await e.key,n=await e.value;r.push({key:t,value:n})}return s.mergeObjectSync(e,r)}static mergeObjectSync(e,r){const n={};for(const a of r){const{key:r,value:i}=a;if("aborted"===r.status)return t.INVALID;if("aborted"===i.status)return t.INVALID;"dirty"===r.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===r.value||void 0===i.value&&!a.alwaysSet||(n[r.value]=i.value)}return{status:e.value,value:n}}}t.ParseStatus=s,t.INVALID=Object.freeze({status:"aborted"}),t.DIRTY=e=>({status:"dirty",value:e}),t.OK=e=>({status:"valid",value:e}),t.isAborted=e=>"aborted"===e.status,t.isDirty=e=>"dirty"===e.status,t.isValid=e=>"valid"===e.status,t.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},90833:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(70866),t)},91114:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalRegistry=t.$ZodRegistry=t.$input=t.$output=void 0,t.registry=n,t.$output=Symbol("ZodOutput"),t.$input=Symbol("ZodInput");class r{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function n(){return new r}t.$ZodRegistry=r,t.globalRegistry=n()},91198:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONLDecoder=void 0;const n=r(58092),a=r(6462),i=r(71308);class s{constructor(e,t){this.iterator=e,this.controller=t}async*decoder(){const e=new i.LineDecoder;for await(const t of this.iterator)for(const r of e.decode(t))yield JSON.parse(r);for(const t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new n.AnthropicError("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new n.AnthropicError("Attempted to iterate over a response with no body")}return new s((0,a.ReadableStreamToAsyncIterable)(e.body),t)}}t.JSONLDecoder=s},91398:e=>{"use strict";e.exports=require("vscode")},91522:(e,t,r)=>{"use strict";const n=r(41236).fromPromise,a=r(16928),i=r(98737),s=r(63798),{pathExists:o}=r(29288),{areIdentical:l}=r(66462);e.exports={createLink:n(async function(e,t){let r,n;try{r=await i.lstat(t)}catch{}try{n=await i.lstat(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}if(r&&l(n,r))return;const c=a.dirname(t);await o(c)||await s.mkdirs(c),await i.link(e,t)}),createLinkSync:function(e,t){let r;try{r=i.lstatSync(t)}catch{}try{const t=i.lstatSync(e);if(r&&l(t,r))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=a.dirname(t);return i.existsSync(n)||s.mkdirsSync(n),i.linkSync(e,t)}}},91562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DallEAPIWrapper=void 0;const n=r(82331),a=r(32012),i=r(45673);class s extends i.Tool{static lc_name(){return"DallEAPIWrapper"}constructor(e){void 0!==e?.responseFormat&&["url","b64_json"].includes(e.responseFormat)&&(e.dallEResponseFormat=e.responseFormat,e.responseFormat="content"),super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"dallEResponseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t={apiKey:e?.apiKey??e?.openAIApiKey??(0,n.getEnvironmentVariable)("OPENAI_API_KEY"),organization:e?.organization??(0,n.getEnvironmentVariable)("OPENAI_ORGANIZATION"),dangerouslyAllowBrowser:!0,baseURL:e?.baseUrl};this.client=new a.OpenAI(t),this.model=e?.model??e?.modelName??this.model,this.style=e?.style??this.style,this.quality=e?.quality??this.quality,this.n=e?.n??this.n,this.size=e?.size??this.size,this.dallEResponseFormat=e?.dallEResponseFormat??this.dallEResponseFormat,this.user=e?.user}processMultipleGeneratedUrls(e){return"url"===this.dallEResponseFormat?e.flatMap(e=>e.data?.flatMap(e=>e.url?{type:"image_url",image_url:e.url}:[]).filter(e=>void 0!==e&&"image_url"===e.type&&"string"==typeof e.image_url&&void 0!==e.image_url)??[]):e.flatMap(e=>e.data?.flatMap(e=>e.b64_json?{type:"image_url",image_url:{url:e.b64_json}}:[]).filter(e=>void 0!==e&&"image_url"===e.type&&"object"==typeof e.image_url&&"url"in e.image_url&&"string"==typeof e.image_url.url&&void 0!==e.image_url.url)??[])}async _call(e){const t={model:this.model,prompt:e,n:1,size:this.size,response_format:this.dallEResponseFormat,style:this.style,quality:this.quality,user:this.user};if(this.n>1){const e=await Promise.all(Array.from({length:this.n}).map(()=>this.client.images.generate(t)));return this.processMultipleGeneratedUrls(e)}const r=await this.client.images.generate(t);let n="";return"url"===this.dallEResponseFormat?[n]=r.data?.map(e=>e.url).filter(e=>"undefined"!==e)??[]:[n]=r.data?.map(e=>e.b64_json).filter(e=>"undefined"!==e)??[],n}}t.DallEAPIWrapper=s,Object.defineProperty(s,"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"})},91871:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttlingRetryPolicyName=void 0,t.throttlingRetryPolicy=function(e={}){var r;return{name:t.throttlingRetryPolicyName,sendRequest:(0,a.retryPolicy)([(0,n.throttlingRetryStrategy)()],{maxRetries:null!==(r=e.maxRetries)&&void 0!==r?r:i.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}};const n=r(87941),a=r(48334),i=r(37146);t.throttlingRetryPolicyName="throttlingRetryPolicy"},91988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uppercase=t.lowercase=t.undefined=t.null=t.boolean=t.number=t.integer=t.bigint=t.string=t.date=t.e164=t.domain=t.hostname=t.base64url=t.base64=t.cidrv6=t.cidrv4=t.ipv6=t.ipv4=t._emoji=t.browserEmail=t.unicodeEmail=t.rfc5322Email=t.html5Email=t.email=t.uuid7=t.uuid6=t.uuid4=t.uuid=t.guid=t.extendedDuration=t.duration=t.nanoid=t.ksuid=t.xid=t.ulid=t.cuid2=t.cuid=void 0,t.emoji=function(){return new RegExp(t._emoji,"u")},t.time=function(e){return new RegExp(`^${n(e)}$`)},t.datetime=function(e){const t=n({precision:e.precision}),a=["Z"];e.local&&a.push(""),e.offset&&a.push("([+-]\\d{2}:\\d{2})");const i=`${t}(?:${a.join("|")})`;return new RegExp(`^${r}T(?:${i})$`)},t.cuid=/^[cC][^\s-]{8,}$/,t.cuid2=/^[0-9a-z]+$/,t.ulid=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,t.xid=/^[0-9a-vA-V]{20}$/,t.ksuid=/^[A-Za-z0-9]{27}$/,t.nanoid=/^[a-zA-Z0-9_-]{21}$/,t.duration=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,t.extendedDuration=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,t.guid=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,t.uuid=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,t.uuid4=(0,t.uuid)(4),t.uuid6=(0,t.uuid)(6),t.uuid7=(0,t.uuid)(7),t.email=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,t.html5Email=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,t.rfc5322Email=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t.unicodeEmail=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,t.browserEmail=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,t._emoji="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",t.ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,t.ipv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,t.cidrv4=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,t.cidrv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,t.base64=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,t.base64url=/^[A-Za-z0-9_-]*$/,t.hostname=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,t.domain=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,t.e164=/^\+(?:[0-9]){6,14}[0-9]$/;const r="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))";function n(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}t.date=new RegExp(`^${r}$`),t.string=e=>new RegExp(`^${e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*"}$`),t.bigint=/^\d+n?$/,t.integer=/^\d+$/,t.number=/^-?\d+(?:\.\d+)?/i,t.boolean=/true|false/i,t.null=/null/i,t.undefined=/undefined/i,t.lowercase=/^[^A-Z]*$/,t.uppercase=/^[^a-z]*$/},92034:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0,function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(r||(t.util=r={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(n||(t.objectUtil=n={})),t.ZodParsedType=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t.getParsedType=e=>{switch(typeof e){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return Number.isNaN(e)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":return Array.isArray(e)?t.ZodParsedType.array:null===e?t.ZodParsedType.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?t.ZodParsedType.promise:"undefined"!=typeof Map&&e instanceof Map?t.ZodParsedType.map:"undefined"!=typeof Set&&e instanceof Set?t.ZodParsedType.set:"undefined"!=typeof Date&&e instanceof Date?t.ZodParsedType.date:t.ZodParsedType.object;default:return t.ZodParsedType.unknown}}},92425:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const n=r(18118);t.logger=(0,n.createClientLogger)("ts-http-runtime")},92472:e=>{"use strict";e.exports=JSON.parse('[[[0,44],"disallowed_STD3_valid"],[[45,46],"valid"],[[47,47],"disallowed_STD3_valid"],[[48,57],"valid"],[[58,64],"disallowed_STD3_valid"],[[65,65],"mapped",[97]],[[66,66],"mapped",[98]],[[67,67],"mapped",[99]],[[68,68],"mapped",[100]],[[69,69],"mapped",[101]],[[70,70],"mapped",[102]],[[71,71],"mapped",[103]],[[72,72],"mapped",[104]],[[73,73],"mapped",[105]],[[74,74],"mapped",[106]],[[75,75],"mapped",[107]],[[76,76],"mapped",[108]],[[77,77],"mapped",[109]],[[78,78],"mapped",[110]],[[79,79],"mapped",[111]],[[80,80],"mapped",[112]],[[81,81],"mapped",[113]],[[82,82],"mapped",[114]],[[83,83],"mapped",[115]],[[84,84],"mapped",[116]],[[85,85],"mapped",[117]],[[86,86],"mapped",[118]],[[87,87],"mapped",[119]],[[88,88],"mapped",[120]],[[89,89],"mapped",[121]],[[90,90],"mapped",[122]],[[91,96],"disallowed_STD3_valid"],[[97,122],"valid"],[[123,127],"disallowed_STD3_valid"],[[128,159],"disallowed"],[[160,160],"disallowed_STD3_mapped",[32]],[[161,167],"valid",[],"NV8"],[[168,168],"disallowed_STD3_mapped",[32,776]],[[169,169],"valid",[],"NV8"],[[170,170],"mapped",[97]],[[171,172],"valid",[],"NV8"],[[173,173],"ignored"],[[174,174],"valid",[],"NV8"],[[175,175],"disallowed_STD3_mapped",[32,772]],[[176,177],"valid",[],"NV8"],[[178,178],"mapped",[50]],[[179,179],"mapped",[51]],[[180,180],"disallowed_STD3_mapped",[32,769]],[[181,181],"mapped",[956]],[[182,182],"valid",[],"NV8"],[[183,183],"valid"],[[184,184],"disallowed_STD3_mapped",[32,807]],[[185,185],"mapped",[49]],[[186,186],"mapped",[111]],[[187,187],"valid",[],"NV8"],[[188,188],"mapped",[49,8260,52]],[[189,189],"mapped",[49,8260,50]],[[190,190],"mapped",[51,8260,52]],[[191,191],"valid",[],"NV8"],[[192,192],"mapped",[224]],[[193,193],"mapped",[225]],[[194,194],"mapped",[226]],[[195,195],"mapped",[227]],[[196,196],"mapped",[228]],[[197,197],"mapped",[229]],[[198,198],"mapped",[230]],[[199,199],"mapped",[231]],[[200,200],"mapped",[232]],[[201,201],"mapped",[233]],[[202,202],"mapped",[234]],[[203,203],"mapped",[235]],[[204,204],"mapped",[236]],[[205,205],"mapped",[237]],[[206,206],"mapped",[238]],[[207,207],"mapped",[239]],[[208,208],"mapped",[240]],[[209,209],"mapped",[241]],[[210,210],"mapped",[242]],[[211,211],"mapped",[243]],[[212,212],"mapped",[244]],[[213,213],"mapped",[245]],[[214,214],"mapped",[246]],[[215,215],"valid",[],"NV8"],[[216,216],"mapped",[248]],[[217,217],"mapped",[249]],[[218,218],"mapped",[250]],[[219,219],"mapped",[251]],[[220,220],"mapped",[252]],[[221,221],"mapped",[253]],[[222,222],"mapped",[254]],[[223,223],"deviation",[115,115]],[[224,246],"valid"],[[247,247],"valid",[],"NV8"],[[248,255],"valid"],[[256,256],"mapped",[257]],[[257,257],"valid"],[[258,258],"mapped",[259]],[[259,259],"valid"],[[260,260],"mapped",[261]],[[261,261],"valid"],[[262,262],"mapped",[263]],[[263,263],"valid"],[[264,264],"mapped",[265]],[[265,265],"valid"],[[266,266],"mapped",[267]],[[267,267],"valid"],[[268,268],"mapped",[269]],[[269,269],"valid"],[[270,270],"mapped",[271]],[[271,271],"valid"],[[272,272],"mapped",[273]],[[273,273],"valid"],[[274,274],"mapped",[275]],[[275,275],"valid"],[[276,276],"mapped",[277]],[[277,277],"valid"],[[278,278],"mapped",[279]],[[279,279],"valid"],[[280,280],"mapped",[281]],[[281,281],"valid"],[[282,282],"mapped",[283]],[[283,283],"valid"],[[284,284],"mapped",[285]],[[285,285],"valid"],[[286,286],"mapped",[287]],[[287,287],"valid"],[[288,288],"mapped",[289]],[[289,289],"valid"],[[290,290],"mapped",[291]],[[291,291],"valid"],[[292,292],"mapped",[293]],[[293,293],"valid"],[[294,294],"mapped",[295]],[[295,295],"valid"],[[296,296],"mapped",[297]],[[297,297],"valid"],[[298,298],"mapped",[299]],[[299,299],"valid"],[[300,300],"mapped",[301]],[[301,301],"valid"],[[302,302],"mapped",[303]],[[303,303],"valid"],[[304,304],"mapped",[105,775]],[[305,305],"valid"],[[306,307],"mapped",[105,106]],[[308,308],"mapped",[309]],[[309,309],"valid"],[[310,310],"mapped",[311]],[[311,312],"valid"],[[313,313],"mapped",[314]],[[314,314],"valid"],[[315,315],"mapped",[316]],[[316,316],"valid"],[[317,317],"mapped",[318]],[[318,318],"valid"],[[319,320],"mapped",[108,183]],[[321,321],"mapped",[322]],[[322,322],"valid"],[[323,323],"mapped",[324]],[[324,324],"valid"],[[325,325],"mapped",[326]],[[326,326],"valid"],[[327,327],"mapped",[328]],[[328,328],"valid"],[[329,329],"mapped",[700,110]],[[330,330],"mapped",[331]],[[331,331],"valid"],[[332,332],"mapped",[333]],[[333,333],"valid"],[[334,334],"mapped",[335]],[[335,335],"valid"],[[336,336],"mapped",[337]],[[337,337],"valid"],[[338,338],"mapped",[339]],[[339,339],"valid"],[[340,340],"mapped",[341]],[[341,341],"valid"],[[342,342],"mapped",[343]],[[343,343],"valid"],[[344,344],"mapped",[345]],[[345,345],"valid"],[[346,346],"mapped",[347]],[[347,347],"valid"],[[348,348],"mapped",[349]],[[349,349],"valid"],[[350,350],"mapped",[351]],[[351,351],"valid"],[[352,352],"mapped",[353]],[[353,353],"valid"],[[354,354],"mapped",[355]],[[355,355],"valid"],[[356,356],"mapped",[357]],[[357,357],"valid"],[[358,358],"mapped",[359]],[[359,359],"valid"],[[360,360],"mapped",[361]],[[361,361],"valid"],[[362,362],"mapped",[363]],[[363,363],"valid"],[[364,364],"mapped",[365]],[[365,365],"valid"],[[366,366],"mapped",[367]],[[367,367],"valid"],[[368,368],"mapped",[369]],[[369,369],"valid"],[[370,370],"mapped",[371]],[[371,371],"valid"],[[372,372],"mapped",[373]],[[373,373],"valid"],[[374,374],"mapped",[375]],[[375,375],"valid"],[[376,376],"mapped",[255]],[[377,377],"mapped",[378]],[[378,378],"valid"],[[379,379],"mapped",[380]],[[380,380],"valid"],[[381,381],"mapped",[382]],[[382,382],"valid"],[[383,383],"mapped",[115]],[[384,384],"valid"],[[385,385],"mapped",[595]],[[386,386],"mapped",[387]],[[387,387],"valid"],[[388,388],"mapped",[389]],[[389,389],"valid"],[[390,390],"mapped",[596]],[[391,391],"mapped",[392]],[[392,392],"valid"],[[393,393],"mapped",[598]],[[394,394],"mapped",[599]],[[395,395],"mapped",[396]],[[396,397],"valid"],[[398,398],"mapped",[477]],[[399,399],"mapped",[601]],[[400,400],"mapped",[603]],[[401,401],"mapped",[402]],[[402,402],"valid"],[[403,403],"mapped",[608]],[[404,404],"mapped",[611]],[[405,405],"valid"],[[406,406],"mapped",[617]],[[407,407],"mapped",[616]],[[408,408],"mapped",[409]],[[409,411],"valid"],[[412,412],"mapped",[623]],[[413,413],"mapped",[626]],[[414,414],"valid"],[[415,415],"mapped",[629]],[[416,416],"mapped",[417]],[[417,417],"valid"],[[418,418],"mapped",[419]],[[419,419],"valid"],[[420,420],"mapped",[421]],[[421,421],"valid"],[[422,422],"mapped",[640]],[[423,423],"mapped",[424]],[[424,424],"valid"],[[425,425],"mapped",[643]],[[426,427],"valid"],[[428,428],"mapped",[429]],[[429,429],"valid"],[[430,430],"mapped",[648]],[[431,431],"mapped",[432]],[[432,432],"valid"],[[433,433],"mapped",[650]],[[434,434],"mapped",[651]],[[435,435],"mapped",[436]],[[436,436],"valid"],[[437,437],"mapped",[438]],[[438,438],"valid"],[[439,439],"mapped",[658]],[[440,440],"mapped",[441]],[[441,443],"valid"],[[444,444],"mapped",[445]],[[445,451],"valid"],[[452,454],"mapped",[100,382]],[[455,457],"mapped",[108,106]],[[458,460],"mapped",[110,106]],[[461,461],"mapped",[462]],[[462,462],"valid"],[[463,463],"mapped",[464]],[[464,464],"valid"],[[465,465],"mapped",[466]],[[466,466],"valid"],[[467,467],"mapped",[468]],[[468,468],"valid"],[[469,469],"mapped",[470]],[[470,470],"valid"],[[471,471],"mapped",[472]],[[472,472],"valid"],[[473,473],"mapped",[474]],[[474,474],"valid"],[[475,475],"mapped",[476]],[[476,477],"valid"],[[478,478],"mapped",[479]],[[479,479],"valid"],[[480,480],"mapped",[481]],[[481,481],"valid"],[[482,482],"mapped",[483]],[[483,483],"valid"],[[484,484],"mapped",[485]],[[485,485],"valid"],[[486,486],"mapped",[487]],[[487,487],"valid"],[[488,488],"mapped",[489]],[[489,489],"valid"],[[490,490],"mapped",[491]],[[491,491],"valid"],[[492,492],"mapped",[493]],[[493,493],"valid"],[[494,494],"mapped",[495]],[[495,496],"valid"],[[497,499],"mapped",[100,122]],[[500,500],"mapped",[501]],[[501,501],"valid"],[[502,502],"mapped",[405]],[[503,503],"mapped",[447]],[[504,504],"mapped",[505]],[[505,505],"valid"],[[506,506],"mapped",[507]],[[507,507],"valid"],[[508,508],"mapped",[509]],[[509,509],"valid"],[[510,510],"mapped",[511]],[[511,511],"valid"],[[512,512],"mapped",[513]],[[513,513],"valid"],[[514,514],"mapped",[515]],[[515,515],"valid"],[[516,516],"mapped",[517]],[[517,517],"valid"],[[518,518],"mapped",[519]],[[519,519],"valid"],[[520,520],"mapped",[521]],[[521,521],"valid"],[[522,522],"mapped",[523]],[[523,523],"valid"],[[524,524],"mapped",[525]],[[525,525],"valid"],[[526,526],"mapped",[527]],[[527,527],"valid"],[[528,528],"mapped",[529]],[[529,529],"valid"],[[530,530],"mapped",[531]],[[531,531],"valid"],[[532,532],"mapped",[533]],[[533,533],"valid"],[[534,534],"mapped",[535]],[[535,535],"valid"],[[536,536],"mapped",[537]],[[537,537],"valid"],[[538,538],"mapped",[539]],[[539,539],"valid"],[[540,540],"mapped",[541]],[[541,541],"valid"],[[542,542],"mapped",[543]],[[543,543],"valid"],[[544,544],"mapped",[414]],[[545,545],"valid"],[[546,546],"mapped",[547]],[[547,547],"valid"],[[548,548],"mapped",[549]],[[549,549],"valid"],[[550,550],"mapped",[551]],[[551,551],"valid"],[[552,552],"mapped",[553]],[[553,553],"valid"],[[554,554],"mapped",[555]],[[555,555],"valid"],[[556,556],"mapped",[557]],[[557,557],"valid"],[[558,558],"mapped",[559]],[[559,559],"valid"],[[560,560],"mapped",[561]],[[561,561],"valid"],[[562,562],"mapped",[563]],[[563,563],"valid"],[[564,566],"valid"],[[567,569],"valid"],[[570,570],"mapped",[11365]],[[571,571],"mapped",[572]],[[572,572],"valid"],[[573,573],"mapped",[410]],[[574,574],"mapped",[11366]],[[575,576],"valid"],[[577,577],"mapped",[578]],[[578,578],"valid"],[[579,579],"mapped",[384]],[[580,580],"mapped",[649]],[[581,581],"mapped",[652]],[[582,582],"mapped",[583]],[[583,583],"valid"],[[584,584],"mapped",[585]],[[585,585],"valid"],[[586,586],"mapped",[587]],[[587,587],"valid"],[[588,588],"mapped",[589]],[[589,589],"valid"],[[590,590],"mapped",[591]],[[591,591],"valid"],[[592,680],"valid"],[[681,685],"valid"],[[686,687],"valid"],[[688,688],"mapped",[104]],[[689,689],"mapped",[614]],[[690,690],"mapped",[106]],[[691,691],"mapped",[114]],[[692,692],"mapped",[633]],[[693,693],"mapped",[635]],[[694,694],"mapped",[641]],[[695,695],"mapped",[119]],[[696,696],"mapped",[121]],[[697,705],"valid"],[[706,709],"valid",[],"NV8"],[[710,721],"valid"],[[722,727],"valid",[],"NV8"],[[728,728],"disallowed_STD3_mapped",[32,774]],[[729,729],"disallowed_STD3_mapped",[32,775]],[[730,730],"disallowed_STD3_mapped",[32,778]],[[731,731],"disallowed_STD3_mapped",[32,808]],[[732,732],"disallowed_STD3_mapped",[32,771]],[[733,733],"disallowed_STD3_mapped",[32,779]],[[734,734],"valid",[],"NV8"],[[735,735],"valid",[],"NV8"],[[736,736],"mapped",[611]],[[737,737],"mapped",[108]],[[738,738],"mapped",[115]],[[739,739],"mapped",[120]],[[740,740],"mapped",[661]],[[741,745],"valid",[],"NV8"],[[746,747],"valid",[],"NV8"],[[748,748],"valid"],[[749,749],"valid",[],"NV8"],[[750,750],"valid"],[[751,767],"valid",[],"NV8"],[[768,831],"valid"],[[832,832],"mapped",[768]],[[833,833],"mapped",[769]],[[834,834],"valid"],[[835,835],"mapped",[787]],[[836,836],"mapped",[776,769]],[[837,837],"mapped",[953]],[[838,846],"valid"],[[847,847],"ignored"],[[848,855],"valid"],[[856,860],"valid"],[[861,863],"valid"],[[864,865],"valid"],[[866,866],"valid"],[[867,879],"valid"],[[880,880],"mapped",[881]],[[881,881],"valid"],[[882,882],"mapped",[883]],[[883,883],"valid"],[[884,884],"mapped",[697]],[[885,885],"valid"],[[886,886],"mapped",[887]],[[887,887],"valid"],[[888,889],"disallowed"],[[890,890],"disallowed_STD3_mapped",[32,953]],[[891,893],"valid"],[[894,894],"disallowed_STD3_mapped",[59]],[[895,895],"mapped",[1011]],[[896,899],"disallowed"],[[900,900],"disallowed_STD3_mapped",[32,769]],[[901,901],"disallowed_STD3_mapped",[32,776,769]],[[902,902],"mapped",[940]],[[903,903],"mapped",[183]],[[904,904],"mapped",[941]],[[905,905],"mapped",[942]],[[906,906],"mapped",[943]],[[907,907],"disallowed"],[[908,908],"mapped",[972]],[[909,909],"disallowed"],[[910,910],"mapped",[973]],[[911,911],"mapped",[974]],[[912,912],"valid"],[[913,913],"mapped",[945]],[[914,914],"mapped",[946]],[[915,915],"mapped",[947]],[[916,916],"mapped",[948]],[[917,917],"mapped",[949]],[[918,918],"mapped",[950]],[[919,919],"mapped",[951]],[[920,920],"mapped",[952]],[[921,921],"mapped",[953]],[[922,922],"mapped",[954]],[[923,923],"mapped",[955]],[[924,924],"mapped",[956]],[[925,925],"mapped",[957]],[[926,926],"mapped",[958]],[[927,927],"mapped",[959]],[[928,928],"mapped",[960]],[[929,929],"mapped",[961]],[[930,930],"disallowed"],[[931,931],"mapped",[963]],[[932,932],"mapped",[964]],[[933,933],"mapped",[965]],[[934,934],"mapped",[966]],[[935,935],"mapped",[967]],[[936,936],"mapped",[968]],[[937,937],"mapped",[969]],[[938,938],"mapped",[970]],[[939,939],"mapped",[971]],[[940,961],"valid"],[[962,962],"deviation",[963]],[[963,974],"valid"],[[975,975],"mapped",[983]],[[976,976],"mapped",[946]],[[977,977],"mapped",[952]],[[978,978],"mapped",[965]],[[979,979],"mapped",[973]],[[980,980],"mapped",[971]],[[981,981],"mapped",[966]],[[982,982],"mapped",[960]],[[983,983],"valid"],[[984,984],"mapped",[985]],[[985,985],"valid"],[[986,986],"mapped",[987]],[[987,987],"valid"],[[988,988],"mapped",[989]],[[989,989],"valid"],[[990,990],"mapped",[991]],[[991,991],"valid"],[[992,992],"mapped",[993]],[[993,993],"valid"],[[994,994],"mapped",[995]],[[995,995],"valid"],[[996,996],"mapped",[997]],[[997,997],"valid"],[[998,998],"mapped",[999]],[[999,999],"valid"],[[1000,1000],"mapped",[1001]],[[1001,1001],"valid"],[[1002,1002],"mapped",[1003]],[[1003,1003],"valid"],[[1004,1004],"mapped",[1005]],[[1005,1005],"valid"],[[1006,1006],"mapped",[1007]],[[1007,1007],"valid"],[[1008,1008],"mapped",[954]],[[1009,1009],"mapped",[961]],[[1010,1010],"mapped",[963]],[[1011,1011],"valid"],[[1012,1012],"mapped",[952]],[[1013,1013],"mapped",[949]],[[1014,1014],"valid",[],"NV8"],[[1015,1015],"mapped",[1016]],[[1016,1016],"valid"],[[1017,1017],"mapped",[963]],[[1018,1018],"mapped",[1019]],[[1019,1019],"valid"],[[1020,1020],"valid"],[[1021,1021],"mapped",[891]],[[1022,1022],"mapped",[892]],[[1023,1023],"mapped",[893]],[[1024,1024],"mapped",[1104]],[[1025,1025],"mapped",[1105]],[[1026,1026],"mapped",[1106]],[[1027,1027],"mapped",[1107]],[[1028,1028],"mapped",[1108]],[[1029,1029],"mapped",[1109]],[[1030,1030],"mapped",[1110]],[[1031,1031],"mapped",[1111]],[[1032,1032],"mapped",[1112]],[[1033,1033],"mapped",[1113]],[[1034,1034],"mapped",[1114]],[[1035,1035],"mapped",[1115]],[[1036,1036],"mapped",[1116]],[[1037,1037],"mapped",[1117]],[[1038,1038],"mapped",[1118]],[[1039,1039],"mapped",[1119]],[[1040,1040],"mapped",[1072]],[[1041,1041],"mapped",[1073]],[[1042,1042],"mapped",[1074]],[[1043,1043],"mapped",[1075]],[[1044,1044],"mapped",[1076]],[[1045,1045],"mapped",[1077]],[[1046,1046],"mapped",[1078]],[[1047,1047],"mapped",[1079]],[[1048,1048],"mapped",[1080]],[[1049,1049],"mapped",[1081]],[[1050,1050],"mapped",[1082]],[[1051,1051],"mapped",[1083]],[[1052,1052],"mapped",[1084]],[[1053,1053],"mapped",[1085]],[[1054,1054],"mapped",[1086]],[[1055,1055],"mapped",[1087]],[[1056,1056],"mapped",[1088]],[[1057,1057],"mapped",[1089]],[[1058,1058],"mapped",[1090]],[[1059,1059],"mapped",[1091]],[[1060,1060],"mapped",[1092]],[[1061,1061],"mapped",[1093]],[[1062,1062],"mapped",[1094]],[[1063,1063],"mapped",[1095]],[[1064,1064],"mapped",[1096]],[[1065,1065],"mapped",[1097]],[[1066,1066],"mapped",[1098]],[[1067,1067],"mapped",[1099]],[[1068,1068],"mapped",[1100]],[[1069,1069],"mapped",[1101]],[[1070,1070],"mapped",[1102]],[[1071,1071],"mapped",[1103]],[[1072,1103],"valid"],[[1104,1104],"valid"],[[1105,1116],"valid"],[[1117,1117],"valid"],[[1118,1119],"valid"],[[1120,1120],"mapped",[1121]],[[1121,1121],"valid"],[[1122,1122],"mapped",[1123]],[[1123,1123],"valid"],[[1124,1124],"mapped",[1125]],[[1125,1125],"valid"],[[1126,1126],"mapped",[1127]],[[1127,1127],"valid"],[[1128,1128],"mapped",[1129]],[[1129,1129],"valid"],[[1130,1130],"mapped",[1131]],[[1131,1131],"valid"],[[1132,1132],"mapped",[1133]],[[1133,1133],"valid"],[[1134,1134],"mapped",[1135]],[[1135,1135],"valid"],[[1136,1136],"mapped",[1137]],[[1137,1137],"valid"],[[1138,1138],"mapped",[1139]],[[1139,1139],"valid"],[[1140,1140],"mapped",[1141]],[[1141,1141],"valid"],[[1142,1142],"mapped",[1143]],[[1143,1143],"valid"],[[1144,1144],"mapped",[1145]],[[1145,1145],"valid"],[[1146,1146],"mapped",[1147]],[[1147,1147],"valid"],[[1148,1148],"mapped",[1149]],[[1149,1149],"valid"],[[1150,1150],"mapped",[1151]],[[1151,1151],"valid"],[[1152,1152],"mapped",[1153]],[[1153,1153],"valid"],[[1154,1154],"valid",[],"NV8"],[[1155,1158],"valid"],[[1159,1159],"valid"],[[1160,1161],"valid",[],"NV8"],[[1162,1162],"mapped",[1163]],[[1163,1163],"valid"],[[1164,1164],"mapped",[1165]],[[1165,1165],"valid"],[[1166,1166],"mapped",[1167]],[[1167,1167],"valid"],[[1168,1168],"mapped",[1169]],[[1169,1169],"valid"],[[1170,1170],"mapped",[1171]],[[1171,1171],"valid"],[[1172,1172],"mapped",[1173]],[[1173,1173],"valid"],[[1174,1174],"mapped",[1175]],[[1175,1175],"valid"],[[1176,1176],"mapped",[1177]],[[1177,1177],"valid"],[[1178,1178],"mapped",[1179]],[[1179,1179],"valid"],[[1180,1180],"mapped",[1181]],[[1181,1181],"valid"],[[1182,1182],"mapped",[1183]],[[1183,1183],"valid"],[[1184,1184],"mapped",[1185]],[[1185,1185],"valid"],[[1186,1186],"mapped",[1187]],[[1187,1187],"valid"],[[1188,1188],"mapped",[1189]],[[1189,1189],"valid"],[[1190,1190],"mapped",[1191]],[[1191,1191],"valid"],[[1192,1192],"mapped",[1193]],[[1193,1193],"valid"],[[1194,1194],"mapped",[1195]],[[1195,1195],"valid"],[[1196,1196],"mapped",[1197]],[[1197,1197],"valid"],[[1198,1198],"mapped",[1199]],[[1199,1199],"valid"],[[1200,1200],"mapped",[1201]],[[1201,1201],"valid"],[[1202,1202],"mapped",[1203]],[[1203,1203],"valid"],[[1204,1204],"mapped",[1205]],[[1205,1205],"valid"],[[1206,1206],"mapped",[1207]],[[1207,1207],"valid"],[[1208,1208],"mapped",[1209]],[[1209,1209],"valid"],[[1210,1210],"mapped",[1211]],[[1211,1211],"valid"],[[1212,1212],"mapped",[1213]],[[1213,1213],"valid"],[[1214,1214],"mapped",[1215]],[[1215,1215],"valid"],[[1216,1216],"disallowed"],[[1217,1217],"mapped",[1218]],[[1218,1218],"valid"],[[1219,1219],"mapped",[1220]],[[1220,1220],"valid"],[[1221,1221],"mapped",[1222]],[[1222,1222],"valid"],[[1223,1223],"mapped",[1224]],[[1224,1224],"valid"],[[1225,1225],"mapped",[1226]],[[1226,1226],"valid"],[[1227,1227],"mapped",[1228]],[[1228,1228],"valid"],[[1229,1229],"mapped",[1230]],[[1230,1230],"valid"],[[1231,1231],"valid"],[[1232,1232],"mapped",[1233]],[[1233,1233],"valid"],[[1234,1234],"mapped",[1235]],[[1235,1235],"valid"],[[1236,1236],"mapped",[1237]],[[1237,1237],"valid"],[[1238,1238],"mapped",[1239]],[[1239,1239],"valid"],[[1240,1240],"mapped",[1241]],[[1241,1241],"valid"],[[1242,1242],"mapped",[1243]],[[1243,1243],"valid"],[[1244,1244],"mapped",[1245]],[[1245,1245],"valid"],[[1246,1246],"mapped",[1247]],[[1247,1247],"valid"],[[1248,1248],"mapped",[1249]],[[1249,1249],"valid"],[[1250,1250],"mapped",[1251]],[[1251,1251],"valid"],[[1252,1252],"mapped",[1253]],[[1253,1253],"valid"],[[1254,1254],"mapped",[1255]],[[1255,1255],"valid"],[[1256,1256],"mapped",[1257]],[[1257,1257],"valid"],[[1258,1258],"mapped",[1259]],[[1259,1259],"valid"],[[1260,1260],"mapped",[1261]],[[1261,1261],"valid"],[[1262,1262],"mapped",[1263]],[[1263,1263],"valid"],[[1264,1264],"mapped",[1265]],[[1265,1265],"valid"],[[1266,1266],"mapped",[1267]],[[1267,1267],"valid"],[[1268,1268],"mapped",[1269]],[[1269,1269],"valid"],[[1270,1270],"mapped",[1271]],[[1271,1271],"valid"],[[1272,1272],"mapped",[1273]],[[1273,1273],"valid"],[[1274,1274],"mapped",[1275]],[[1275,1275],"valid"],[[1276,1276],"mapped",[1277]],[[1277,1277],"valid"],[[1278,1278],"mapped",[1279]],[[1279,1279],"valid"],[[1280,1280],"mapped",[1281]],[[1281,1281],"valid"],[[1282,1282],"mapped",[1283]],[[1283,1283],"valid"],[[1284,1284],"mapped",[1285]],[[1285,1285],"valid"],[[1286,1286],"mapped",[1287]],[[1287,1287],"valid"],[[1288,1288],"mapped",[1289]],[[1289,1289],"valid"],[[1290,1290],"mapped",[1291]],[[1291,1291],"valid"],[[1292,1292],"mapped",[1293]],[[1293,1293],"valid"],[[1294,1294],"mapped",[1295]],[[1295,1295],"valid"],[[1296,1296],"mapped",[1297]],[[1297,1297],"valid"],[[1298,1298],"mapped",[1299]],[[1299,1299],"valid"],[[1300,1300],"mapped",[1301]],[[1301,1301],"valid"],[[1302,1302],"mapped",[1303]],[[1303,1303],"valid"],[[1304,1304],"mapped",[1305]],[[1305,1305],"valid"],[[1306,1306],"mapped",[1307]],[[1307,1307],"valid"],[[1308,1308],"mapped",[1309]],[[1309,1309],"valid"],[[1310,1310],"mapped",[1311]],[[1311,1311],"valid"],[[1312,1312],"mapped",[1313]],[[1313,1313],"valid"],[[1314,1314],"mapped",[1315]],[[1315,1315],"valid"],[[1316,1316],"mapped",[1317]],[[1317,1317],"valid"],[[1318,1318],"mapped",[1319]],[[1319,1319],"valid"],[[1320,1320],"mapped",[1321]],[[1321,1321],"valid"],[[1322,1322],"mapped",[1323]],[[1323,1323],"valid"],[[1324,1324],"mapped",[1325]],[[1325,1325],"valid"],[[1326,1326],"mapped",[1327]],[[1327,1327],"valid"],[[1328,1328],"disallowed"],[[1329,1329],"mapped",[1377]],[[1330,1330],"mapped",[1378]],[[1331,1331],"mapped",[1379]],[[1332,1332],"mapped",[1380]],[[1333,1333],"mapped",[1381]],[[1334,1334],"mapped",[1382]],[[1335,1335],"mapped",[1383]],[[1336,1336],"mapped",[1384]],[[1337,1337],"mapped",[1385]],[[1338,1338],"mapped",[1386]],[[1339,1339],"mapped",[1387]],[[1340,1340],"mapped",[1388]],[[1341,1341],"mapped",[1389]],[[1342,1342],"mapped",[1390]],[[1343,1343],"mapped",[1391]],[[1344,1344],"mapped",[1392]],[[1345,1345],"mapped",[1393]],[[1346,1346],"mapped",[1394]],[[1347,1347],"mapped",[1395]],[[1348,1348],"mapped",[1396]],[[1349,1349],"mapped",[1397]],[[1350,1350],"mapped",[1398]],[[1351,1351],"mapped",[1399]],[[1352,1352],"mapped",[1400]],[[1353,1353],"mapped",[1401]],[[1354,1354],"mapped",[1402]],[[1355,1355],"mapped",[1403]],[[1356,1356],"mapped",[1404]],[[1357,1357],"mapped",[1405]],[[1358,1358],"mapped",[1406]],[[1359,1359],"mapped",[1407]],[[1360,1360],"mapped",[1408]],[[1361,1361],"mapped",[1409]],[[1362,1362],"mapped",[1410]],[[1363,1363],"mapped",[1411]],[[1364,1364],"mapped",[1412]],[[1365,1365],"mapped",[1413]],[[1366,1366],"mapped",[1414]],[[1367,1368],"disallowed"],[[1369,1369],"valid"],[[1370,1375],"valid",[],"NV8"],[[1376,1376],"disallowed"],[[1377,1414],"valid"],[[1415,1415],"mapped",[1381,1410]],[[1416,1416],"disallowed"],[[1417,1417],"valid",[],"NV8"],[[1418,1418],"valid",[],"NV8"],[[1419,1420],"disallowed"],[[1421,1422],"valid",[],"NV8"],[[1423,1423],"valid",[],"NV8"],[[1424,1424],"disallowed"],[[1425,1441],"valid"],[[1442,1442],"valid"],[[1443,1455],"valid"],[[1456,1465],"valid"],[[1466,1466],"valid"],[[1467,1469],"valid"],[[1470,1470],"valid",[],"NV8"],[[1471,1471],"valid"],[[1472,1472],"valid",[],"NV8"],[[1473,1474],"valid"],[[1475,1475],"valid",[],"NV8"],[[1476,1476],"valid"],[[1477,1477],"valid"],[[1478,1478],"valid",[],"NV8"],[[1479,1479],"valid"],[[1480,1487],"disallowed"],[[1488,1514],"valid"],[[1515,1519],"disallowed"],[[1520,1524],"valid"],[[1525,1535],"disallowed"],[[1536,1539],"disallowed"],[[1540,1540],"disallowed"],[[1541,1541],"disallowed"],[[1542,1546],"valid",[],"NV8"],[[1547,1547],"valid",[],"NV8"],[[1548,1548],"valid",[],"NV8"],[[1549,1551],"valid",[],"NV8"],[[1552,1557],"valid"],[[1558,1562],"valid"],[[1563,1563],"valid",[],"NV8"],[[1564,1564],"disallowed"],[[1565,1565],"disallowed"],[[1566,1566],"valid",[],"NV8"],[[1567,1567],"valid",[],"NV8"],[[1568,1568],"valid"],[[1569,1594],"valid"],[[1595,1599],"valid"],[[1600,1600],"valid",[],"NV8"],[[1601,1618],"valid"],[[1619,1621],"valid"],[[1622,1624],"valid"],[[1625,1630],"valid"],[[1631,1631],"valid"],[[1632,1641],"valid"],[[1642,1645],"valid",[],"NV8"],[[1646,1647],"valid"],[[1648,1652],"valid"],[[1653,1653],"mapped",[1575,1652]],[[1654,1654],"mapped",[1608,1652]],[[1655,1655],"mapped",[1735,1652]],[[1656,1656],"mapped",[1610,1652]],[[1657,1719],"valid"],[[1720,1721],"valid"],[[1722,1726],"valid"],[[1727,1727],"valid"],[[1728,1742],"valid"],[[1743,1743],"valid"],[[1744,1747],"valid"],[[1748,1748],"valid",[],"NV8"],[[1749,1756],"valid"],[[1757,1757],"disallowed"],[[1758,1758],"valid",[],"NV8"],[[1759,1768],"valid"],[[1769,1769],"valid",[],"NV8"],[[1770,1773],"valid"],[[1774,1775],"valid"],[[1776,1785],"valid"],[[1786,1790],"valid"],[[1791,1791],"valid"],[[1792,1805],"valid",[],"NV8"],[[1806,1806],"disallowed"],[[1807,1807],"disallowed"],[[1808,1836],"valid"],[[1837,1839],"valid"],[[1840,1866],"valid"],[[1867,1868],"disallowed"],[[1869,1871],"valid"],[[1872,1901],"valid"],[[1902,1919],"valid"],[[1920,1968],"valid"],[[1969,1969],"valid"],[[1970,1983],"disallowed"],[[1984,2037],"valid"],[[2038,2042],"valid",[],"NV8"],[[2043,2047],"disallowed"],[[2048,2093],"valid"],[[2094,2095],"disallowed"],[[2096,2110],"valid",[],"NV8"],[[2111,2111],"disallowed"],[[2112,2139],"valid"],[[2140,2141],"disallowed"],[[2142,2142],"valid",[],"NV8"],[[2143,2207],"disallowed"],[[2208,2208],"valid"],[[2209,2209],"valid"],[[2210,2220],"valid"],[[2221,2226],"valid"],[[2227,2228],"valid"],[[2229,2274],"disallowed"],[[2275,2275],"valid"],[[2276,2302],"valid"],[[2303,2303],"valid"],[[2304,2304],"valid"],[[2305,2307],"valid"],[[2308,2308],"valid"],[[2309,2361],"valid"],[[2362,2363],"valid"],[[2364,2381],"valid"],[[2382,2382],"valid"],[[2383,2383],"valid"],[[2384,2388],"valid"],[[2389,2389],"valid"],[[2390,2391],"valid"],[[2392,2392],"mapped",[2325,2364]],[[2393,2393],"mapped",[2326,2364]],[[2394,2394],"mapped",[2327,2364]],[[2395,2395],"mapped",[2332,2364]],[[2396,2396],"mapped",[2337,2364]],[[2397,2397],"mapped",[2338,2364]],[[2398,2398],"mapped",[2347,2364]],[[2399,2399],"mapped",[2351,2364]],[[2400,2403],"valid"],[[2404,2405],"valid",[],"NV8"],[[2406,2415],"valid"],[[2416,2416],"valid",[],"NV8"],[[2417,2418],"valid"],[[2419,2423],"valid"],[[2424,2424],"valid"],[[2425,2426],"valid"],[[2427,2428],"valid"],[[2429,2429],"valid"],[[2430,2431],"valid"],[[2432,2432],"valid"],[[2433,2435],"valid"],[[2436,2436],"disallowed"],[[2437,2444],"valid"],[[2445,2446],"disallowed"],[[2447,2448],"valid"],[[2449,2450],"disallowed"],[[2451,2472],"valid"],[[2473,2473],"disallowed"],[[2474,2480],"valid"],[[2481,2481],"disallowed"],[[2482,2482],"valid"],[[2483,2485],"disallowed"],[[2486,2489],"valid"],[[2490,2491],"disallowed"],[[2492,2492],"valid"],[[2493,2493],"valid"],[[2494,2500],"valid"],[[2501,2502],"disallowed"],[[2503,2504],"valid"],[[2505,2506],"disallowed"],[[2507,2509],"valid"],[[2510,2510],"valid"],[[2511,2518],"disallowed"],[[2519,2519],"valid"],[[2520,2523],"disallowed"],[[2524,2524],"mapped",[2465,2492]],[[2525,2525],"mapped",[2466,2492]],[[2526,2526],"disallowed"],[[2527,2527],"mapped",[2479,2492]],[[2528,2531],"valid"],[[2532,2533],"disallowed"],[[2534,2545],"valid"],[[2546,2554],"valid",[],"NV8"],[[2555,2555],"valid",[],"NV8"],[[2556,2560],"disallowed"],[[2561,2561],"valid"],[[2562,2562],"valid"],[[2563,2563],"valid"],[[2564,2564],"disallowed"],[[2565,2570],"valid"],[[2571,2574],"disallowed"],[[2575,2576],"valid"],[[2577,2578],"disallowed"],[[2579,2600],"valid"],[[2601,2601],"disallowed"],[[2602,2608],"valid"],[[2609,2609],"disallowed"],[[2610,2610],"valid"],[[2611,2611],"mapped",[2610,2620]],[[2612,2612],"disallowed"],[[2613,2613],"valid"],[[2614,2614],"mapped",[2616,2620]],[[2615,2615],"disallowed"],[[2616,2617],"valid"],[[2618,2619],"disallowed"],[[2620,2620],"valid"],[[2621,2621],"disallowed"],[[2622,2626],"valid"],[[2627,2630],"disallowed"],[[2631,2632],"valid"],[[2633,2634],"disallowed"],[[2635,2637],"valid"],[[2638,2640],"disallowed"],[[2641,2641],"valid"],[[2642,2648],"disallowed"],[[2649,2649],"mapped",[2582,2620]],[[2650,2650],"mapped",[2583,2620]],[[2651,2651],"mapped",[2588,2620]],[[2652,2652],"valid"],[[2653,2653],"disallowed"],[[2654,2654],"mapped",[2603,2620]],[[2655,2661],"disallowed"],[[2662,2676],"valid"],[[2677,2677],"valid"],[[2678,2688],"disallowed"],[[2689,2691],"valid"],[[2692,2692],"disallowed"],[[2693,2699],"valid"],[[2700,2700],"valid"],[[2701,2701],"valid"],[[2702,2702],"disallowed"],[[2703,2705],"valid"],[[2706,2706],"disallowed"],[[2707,2728],"valid"],[[2729,2729],"disallowed"],[[2730,2736],"valid"],[[2737,2737],"disallowed"],[[2738,2739],"valid"],[[2740,2740],"disallowed"],[[2741,2745],"valid"],[[2746,2747],"disallowed"],[[2748,2757],"valid"],[[2758,2758],"disallowed"],[[2759,2761],"valid"],[[2762,2762],"disallowed"],[[2763,2765],"valid"],[[2766,2767],"disallowed"],[[2768,2768],"valid"],[[2769,2783],"disallowed"],[[2784,2784],"valid"],[[2785,2787],"valid"],[[2788,2789],"disallowed"],[[2790,2799],"valid"],[[2800,2800],"valid",[],"NV8"],[[2801,2801],"valid",[],"NV8"],[[2802,2808],"disallowed"],[[2809,2809],"valid"],[[2810,2816],"disallowed"],[[2817,2819],"valid"],[[2820,2820],"disallowed"],[[2821,2828],"valid"],[[2829,2830],"disallowed"],[[2831,2832],"valid"],[[2833,2834],"disallowed"],[[2835,2856],"valid"],[[2857,2857],"disallowed"],[[2858,2864],"valid"],[[2865,2865],"disallowed"],[[2866,2867],"valid"],[[2868,2868],"disallowed"],[[2869,2869],"valid"],[[2870,2873],"valid"],[[2874,2875],"disallowed"],[[2876,2883],"valid"],[[2884,2884],"valid"],[[2885,2886],"disallowed"],[[2887,2888],"valid"],[[2889,2890],"disallowed"],[[2891,2893],"valid"],[[2894,2901],"disallowed"],[[2902,2903],"valid"],[[2904,2907],"disallowed"],[[2908,2908],"mapped",[2849,2876]],[[2909,2909],"mapped",[2850,2876]],[[2910,2910],"disallowed"],[[2911,2913],"valid"],[[2914,2915],"valid"],[[2916,2917],"disallowed"],[[2918,2927],"valid"],[[2928,2928],"valid",[],"NV8"],[[2929,2929],"valid"],[[2930,2935],"valid",[],"NV8"],[[2936,2945],"disallowed"],[[2946,2947],"valid"],[[2948,2948],"disallowed"],[[2949,2954],"valid"],[[2955,2957],"disallowed"],[[2958,2960],"valid"],[[2961,2961],"disallowed"],[[2962,2965],"valid"],[[2966,2968],"disallowed"],[[2969,2970],"valid"],[[2971,2971],"disallowed"],[[2972,2972],"valid"],[[2973,2973],"disallowed"],[[2974,2975],"valid"],[[2976,2978],"disallowed"],[[2979,2980],"valid"],[[2981,2983],"disallowed"],[[2984,2986],"valid"],[[2987,2989],"disallowed"],[[2990,2997],"valid"],[[2998,2998],"valid"],[[2999,3001],"valid"],[[3002,3005],"disallowed"],[[3006,3010],"valid"],[[3011,3013],"disallowed"],[[3014,3016],"valid"],[[3017,3017],"disallowed"],[[3018,3021],"valid"],[[3022,3023],"disallowed"],[[3024,3024],"valid"],[[3025,3030],"disallowed"],[[3031,3031],"valid"],[[3032,3045],"disallowed"],[[3046,3046],"valid"],[[3047,3055],"valid"],[[3056,3058],"valid",[],"NV8"],[[3059,3066],"valid",[],"NV8"],[[3067,3071],"disallowed"],[[3072,3072],"valid"],[[3073,3075],"valid"],[[3076,3076],"disallowed"],[[3077,3084],"valid"],[[3085,3085],"disallowed"],[[3086,3088],"valid"],[[3089,3089],"disallowed"],[[3090,3112],"valid"],[[3113,3113],"disallowed"],[[3114,3123],"valid"],[[3124,3124],"valid"],[[3125,3129],"valid"],[[3130,3132],"disallowed"],[[3133,3133],"valid"],[[3134,3140],"valid"],[[3141,3141],"disallowed"],[[3142,3144],"valid"],[[3145,3145],"disallowed"],[[3146,3149],"valid"],[[3150,3156],"disallowed"],[[3157,3158],"valid"],[[3159,3159],"disallowed"],[[3160,3161],"valid"],[[3162,3162],"valid"],[[3163,3167],"disallowed"],[[3168,3169],"valid"],[[3170,3171],"valid"],[[3172,3173],"disallowed"],[[3174,3183],"valid"],[[3184,3191],"disallowed"],[[3192,3199],"valid",[],"NV8"],[[3200,3200],"disallowed"],[[3201,3201],"valid"],[[3202,3203],"valid"],[[3204,3204],"disallowed"],[[3205,3212],"valid"],[[3213,3213],"disallowed"],[[3214,3216],"valid"],[[3217,3217],"disallowed"],[[3218,3240],"valid"],[[3241,3241],"disallowed"],[[3242,3251],"valid"],[[3252,3252],"disallowed"],[[3253,3257],"valid"],[[3258,3259],"disallowed"],[[3260,3261],"valid"],[[3262,3268],"valid"],[[3269,3269],"disallowed"],[[3270,3272],"valid"],[[3273,3273],"disallowed"],[[3274,3277],"valid"],[[3278,3284],"disallowed"],[[3285,3286],"valid"],[[3287,3293],"disallowed"],[[3294,3294],"valid"],[[3295,3295],"disallowed"],[[3296,3297],"valid"],[[3298,3299],"valid"],[[3300,3301],"disallowed"],[[3302,3311],"valid"],[[3312,3312],"disallowed"],[[3313,3314],"valid"],[[3315,3328],"disallowed"],[[3329,3329],"valid"],[[3330,3331],"valid"],[[3332,3332],"disallowed"],[[3333,3340],"valid"],[[3341,3341],"disallowed"],[[3342,3344],"valid"],[[3345,3345],"disallowed"],[[3346,3368],"valid"],[[3369,3369],"valid"],[[3370,3385],"valid"],[[3386,3386],"valid"],[[3387,3388],"disallowed"],[[3389,3389],"valid"],[[3390,3395],"valid"],[[3396,3396],"valid"],[[3397,3397],"disallowed"],[[3398,3400],"valid"],[[3401,3401],"disallowed"],[[3402,3405],"valid"],[[3406,3406],"valid"],[[3407,3414],"disallowed"],[[3415,3415],"valid"],[[3416,3422],"disallowed"],[[3423,3423],"valid"],[[3424,3425],"valid"],[[3426,3427],"valid"],[[3428,3429],"disallowed"],[[3430,3439],"valid"],[[3440,3445],"valid",[],"NV8"],[[3446,3448],"disallowed"],[[3449,3449],"valid",[],"NV8"],[[3450,3455],"valid"],[[3456,3457],"disallowed"],[[3458,3459],"valid"],[[3460,3460],"disallowed"],[[3461,3478],"valid"],[[3479,3481],"disallowed"],[[3482,3505],"valid"],[[3506,3506],"disallowed"],[[3507,3515],"valid"],[[3516,3516],"disallowed"],[[3517,3517],"valid"],[[3518,3519],"disallowed"],[[3520,3526],"valid"],[[3527,3529],"disallowed"],[[3530,3530],"valid"],[[3531,3534],"disallowed"],[[3535,3540],"valid"],[[3541,3541],"disallowed"],[[3542,3542],"valid"],[[3543,3543],"disallowed"],[[3544,3551],"valid"],[[3552,3557],"disallowed"],[[3558,3567],"valid"],[[3568,3569],"disallowed"],[[3570,3571],"valid"],[[3572,3572],"valid",[],"NV8"],[[3573,3584],"disallowed"],[[3585,3634],"valid"],[[3635,3635],"mapped",[3661,3634]],[[3636,3642],"valid"],[[3643,3646],"disallowed"],[[3647,3647],"valid",[],"NV8"],[[3648,3662],"valid"],[[3663,3663],"valid",[],"NV8"],[[3664,3673],"valid"],[[3674,3675],"valid",[],"NV8"],[[3676,3712],"disallowed"],[[3713,3714],"valid"],[[3715,3715],"disallowed"],[[3716,3716],"valid"],[[3717,3718],"disallowed"],[[3719,3720],"valid"],[[3721,3721],"disallowed"],[[3722,3722],"valid"],[[3723,3724],"disallowed"],[[3725,3725],"valid"],[[3726,3731],"disallowed"],[[3732,3735],"valid"],[[3736,3736],"disallowed"],[[3737,3743],"valid"],[[3744,3744],"disallowed"],[[3745,3747],"valid"],[[3748,3748],"disallowed"],[[3749,3749],"valid"],[[3750,3750],"disallowed"],[[3751,3751],"valid"],[[3752,3753],"disallowed"],[[3754,3755],"valid"],[[3756,3756],"disallowed"],[[3757,3762],"valid"],[[3763,3763],"mapped",[3789,3762]],[[3764,3769],"valid"],[[3770,3770],"disallowed"],[[3771,3773],"valid"],[[3774,3775],"disallowed"],[[3776,3780],"valid"],[[3781,3781],"disallowed"],[[3782,3782],"valid"],[[3783,3783],"disallowed"],[[3784,3789],"valid"],[[3790,3791],"disallowed"],[[3792,3801],"valid"],[[3802,3803],"disallowed"],[[3804,3804],"mapped",[3755,3737]],[[3805,3805],"mapped",[3755,3745]],[[3806,3807],"valid"],[[3808,3839],"disallowed"],[[3840,3840],"valid"],[[3841,3850],"valid",[],"NV8"],[[3851,3851],"valid"],[[3852,3852],"mapped",[3851]],[[3853,3863],"valid",[],"NV8"],[[3864,3865],"valid"],[[3866,3871],"valid",[],"NV8"],[[3872,3881],"valid"],[[3882,3892],"valid",[],"NV8"],[[3893,3893],"valid"],[[3894,3894],"valid",[],"NV8"],[[3895,3895],"valid"],[[3896,3896],"valid",[],"NV8"],[[3897,3897],"valid"],[[3898,3901],"valid",[],"NV8"],[[3902,3906],"valid"],[[3907,3907],"mapped",[3906,4023]],[[3908,3911],"valid"],[[3912,3912],"disallowed"],[[3913,3916],"valid"],[[3917,3917],"mapped",[3916,4023]],[[3918,3921],"valid"],[[3922,3922],"mapped",[3921,4023]],[[3923,3926],"valid"],[[3927,3927],"mapped",[3926,4023]],[[3928,3931],"valid"],[[3932,3932],"mapped",[3931,4023]],[[3933,3944],"valid"],[[3945,3945],"mapped",[3904,4021]],[[3946,3946],"valid"],[[3947,3948],"valid"],[[3949,3952],"disallowed"],[[3953,3954],"valid"],[[3955,3955],"mapped",[3953,3954]],[[3956,3956],"valid"],[[3957,3957],"mapped",[3953,3956]],[[3958,3958],"mapped",[4018,3968]],[[3959,3959],"mapped",[4018,3953,3968]],[[3960,3960],"mapped",[4019,3968]],[[3961,3961],"mapped",[4019,3953,3968]],[[3962,3968],"valid"],[[3969,3969],"mapped",[3953,3968]],[[3970,3972],"valid"],[[3973,3973],"valid",[],"NV8"],[[3974,3979],"valid"],[[3980,3983],"valid"],[[3984,3986],"valid"],[[3987,3987],"mapped",[3986,4023]],[[3988,3989],"valid"],[[3990,3990],"valid"],[[3991,3991],"valid"],[[3992,3992],"disallowed"],[[3993,3996],"valid"],[[3997,3997],"mapped",[3996,4023]],[[3998,4001],"valid"],[[4002,4002],"mapped",[4001,4023]],[[4003,4006],"valid"],[[4007,4007],"mapped",[4006,4023]],[[4008,4011],"valid"],[[4012,4012],"mapped",[4011,4023]],[[4013,4013],"valid"],[[4014,4016],"valid"],[[4017,4023],"valid"],[[4024,4024],"valid"],[[4025,4025],"mapped",[3984,4021]],[[4026,4028],"valid"],[[4029,4029],"disallowed"],[[4030,4037],"valid",[],"NV8"],[[4038,4038],"valid"],[[4039,4044],"valid",[],"NV8"],[[4045,4045],"disallowed"],[[4046,4046],"valid",[],"NV8"],[[4047,4047],"valid",[],"NV8"],[[4048,4049],"valid",[],"NV8"],[[4050,4052],"valid",[],"NV8"],[[4053,4056],"valid",[],"NV8"],[[4057,4058],"valid",[],"NV8"],[[4059,4095],"disallowed"],[[4096,4129],"valid"],[[4130,4130],"valid"],[[4131,4135],"valid"],[[4136,4136],"valid"],[[4137,4138],"valid"],[[4139,4139],"valid"],[[4140,4146],"valid"],[[4147,4149],"valid"],[[4150,4153],"valid"],[[4154,4159],"valid"],[[4160,4169],"valid"],[[4170,4175],"valid",[],"NV8"],[[4176,4185],"valid"],[[4186,4249],"valid"],[[4250,4253],"valid"],[[4254,4255],"valid",[],"NV8"],[[4256,4293],"disallowed"],[[4294,4294],"disallowed"],[[4295,4295],"mapped",[11559]],[[4296,4300],"disallowed"],[[4301,4301],"mapped",[11565]],[[4302,4303],"disallowed"],[[4304,4342],"valid"],[[4343,4344],"valid"],[[4345,4346],"valid"],[[4347,4347],"valid",[],"NV8"],[[4348,4348],"mapped",[4316]],[[4349,4351],"valid"],[[4352,4441],"valid",[],"NV8"],[[4442,4446],"valid",[],"NV8"],[[4447,4448],"disallowed"],[[4449,4514],"valid",[],"NV8"],[[4515,4519],"valid",[],"NV8"],[[4520,4601],"valid",[],"NV8"],[[4602,4607],"valid",[],"NV8"],[[4608,4614],"valid"],[[4615,4615],"valid"],[[4616,4678],"valid"],[[4679,4679],"valid"],[[4680,4680],"valid"],[[4681,4681],"disallowed"],[[4682,4685],"valid"],[[4686,4687],"disallowed"],[[4688,4694],"valid"],[[4695,4695],"disallowed"],[[4696,4696],"valid"],[[4697,4697],"disallowed"],[[4698,4701],"valid"],[[4702,4703],"disallowed"],[[4704,4742],"valid"],[[4743,4743],"valid"],[[4744,4744],"valid"],[[4745,4745],"disallowed"],[[4746,4749],"valid"],[[4750,4751],"disallowed"],[[4752,4782],"valid"],[[4783,4783],"valid"],[[4784,4784],"valid"],[[4785,4785],"disallowed"],[[4786,4789],"valid"],[[4790,4791],"disallowed"],[[4792,4798],"valid"],[[4799,4799],"disallowed"],[[4800,4800],"valid"],[[4801,4801],"disallowed"],[[4802,4805],"valid"],[[4806,4807],"disallowed"],[[4808,4814],"valid"],[[4815,4815],"valid"],[[4816,4822],"valid"],[[4823,4823],"disallowed"],[[4824,4846],"valid"],[[4847,4847],"valid"],[[4848,4878],"valid"],[[4879,4879],"valid"],[[4880,4880],"valid"],[[4881,4881],"disallowed"],[[4882,4885],"valid"],[[4886,4887],"disallowed"],[[4888,4894],"valid"],[[4895,4895],"valid"],[[4896,4934],"valid"],[[4935,4935],"valid"],[[4936,4954],"valid"],[[4955,4956],"disallowed"],[[4957,4958],"valid"],[[4959,4959],"valid"],[[4960,4960],"valid",[],"NV8"],[[4961,4988],"valid",[],"NV8"],[[4989,4991],"disallowed"],[[4992,5007],"valid"],[[5008,5017],"valid",[],"NV8"],[[5018,5023],"disallowed"],[[5024,5108],"valid"],[[5109,5109],"valid"],[[5110,5111],"disallowed"],[[5112,5112],"mapped",[5104]],[[5113,5113],"mapped",[5105]],[[5114,5114],"mapped",[5106]],[[5115,5115],"mapped",[5107]],[[5116,5116],"mapped",[5108]],[[5117,5117],"mapped",[5109]],[[5118,5119],"disallowed"],[[5120,5120],"valid",[],"NV8"],[[5121,5740],"valid"],[[5741,5742],"valid",[],"NV8"],[[5743,5750],"valid"],[[5751,5759],"valid"],[[5760,5760],"disallowed"],[[5761,5786],"valid"],[[5787,5788],"valid",[],"NV8"],[[5789,5791],"disallowed"],[[5792,5866],"valid"],[[5867,5872],"valid",[],"NV8"],[[5873,5880],"valid"],[[5881,5887],"disallowed"],[[5888,5900],"valid"],[[5901,5901],"disallowed"],[[5902,5908],"valid"],[[5909,5919],"disallowed"],[[5920,5940],"valid"],[[5941,5942],"valid",[],"NV8"],[[5943,5951],"disallowed"],[[5952,5971],"valid"],[[5972,5983],"disallowed"],[[5984,5996],"valid"],[[5997,5997],"disallowed"],[[5998,6000],"valid"],[[6001,6001],"disallowed"],[[6002,6003],"valid"],[[6004,6015],"disallowed"],[[6016,6067],"valid"],[[6068,6069],"disallowed"],[[6070,6099],"valid"],[[6100,6102],"valid",[],"NV8"],[[6103,6103],"valid"],[[6104,6107],"valid",[],"NV8"],[[6108,6108],"valid"],[[6109,6109],"valid"],[[6110,6111],"disallowed"],[[6112,6121],"valid"],[[6122,6127],"disallowed"],[[6128,6137],"valid",[],"NV8"],[[6138,6143],"disallowed"],[[6144,6149],"valid",[],"NV8"],[[6150,6150],"disallowed"],[[6151,6154],"valid",[],"NV8"],[[6155,6157],"ignored"],[[6158,6158],"disallowed"],[[6159,6159],"disallowed"],[[6160,6169],"valid"],[[6170,6175],"disallowed"],[[6176,6263],"valid"],[[6264,6271],"disallowed"],[[6272,6313],"valid"],[[6314,6314],"valid"],[[6315,6319],"disallowed"],[[6320,6389],"valid"],[[6390,6399],"disallowed"],[[6400,6428],"valid"],[[6429,6430],"valid"],[[6431,6431],"disallowed"],[[6432,6443],"valid"],[[6444,6447],"disallowed"],[[6448,6459],"valid"],[[6460,6463],"disallowed"],[[6464,6464],"valid",[],"NV8"],[[6465,6467],"disallowed"],[[6468,6469],"valid",[],"NV8"],[[6470,6509],"valid"],[[6510,6511],"disallowed"],[[6512,6516],"valid"],[[6517,6527],"disallowed"],[[6528,6569],"valid"],[[6570,6571],"valid"],[[6572,6575],"disallowed"],[[6576,6601],"valid"],[[6602,6607],"disallowed"],[[6608,6617],"valid"],[[6618,6618],"valid",[],"XV8"],[[6619,6621],"disallowed"],[[6622,6623],"valid",[],"NV8"],[[6624,6655],"valid",[],"NV8"],[[6656,6683],"valid"],[[6684,6685],"disallowed"],[[6686,6687],"valid",[],"NV8"],[[6688,6750],"valid"],[[6751,6751],"disallowed"],[[6752,6780],"valid"],[[6781,6782],"disallowed"],[[6783,6793],"valid"],[[6794,6799],"disallowed"],[[6800,6809],"valid"],[[6810,6815],"disallowed"],[[6816,6822],"valid",[],"NV8"],[[6823,6823],"valid"],[[6824,6829],"valid",[],"NV8"],[[6830,6831],"disallowed"],[[6832,6845],"valid"],[[6846,6846],"valid",[],"NV8"],[[6847,6911],"disallowed"],[[6912,6987],"valid"],[[6988,6991],"disallowed"],[[6992,7001],"valid"],[[7002,7018],"valid",[],"NV8"],[[7019,7027],"valid"],[[7028,7036],"valid",[],"NV8"],[[7037,7039],"disallowed"],[[7040,7082],"valid"],[[7083,7085],"valid"],[[7086,7097],"valid"],[[7098,7103],"valid"],[[7104,7155],"valid"],[[7156,7163],"disallowed"],[[7164,7167],"valid",[],"NV8"],[[7168,7223],"valid"],[[7224,7226],"disallowed"],[[7227,7231],"valid",[],"NV8"],[[7232,7241],"valid"],[[7242,7244],"disallowed"],[[7245,7293],"valid"],[[7294,7295],"valid",[],"NV8"],[[7296,7359],"disallowed"],[[7360,7367],"valid",[],"NV8"],[[7368,7375],"disallowed"],[[7376,7378],"valid"],[[7379,7379],"valid",[],"NV8"],[[7380,7410],"valid"],[[7411,7414],"valid"],[[7415,7415],"disallowed"],[[7416,7417],"valid"],[[7418,7423],"disallowed"],[[7424,7467],"valid"],[[7468,7468],"mapped",[97]],[[7469,7469],"mapped",[230]],[[7470,7470],"mapped",[98]],[[7471,7471],"valid"],[[7472,7472],"mapped",[100]],[[7473,7473],"mapped",[101]],[[7474,7474],"mapped",[477]],[[7475,7475],"mapped",[103]],[[7476,7476],"mapped",[104]],[[7477,7477],"mapped",[105]],[[7478,7478],"mapped",[106]],[[7479,7479],"mapped",[107]],[[7480,7480],"mapped",[108]],[[7481,7481],"mapped",[109]],[[7482,7482],"mapped",[110]],[[7483,7483],"valid"],[[7484,7484],"mapped",[111]],[[7485,7485],"mapped",[547]],[[7486,7486],"mapped",[112]],[[7487,7487],"mapped",[114]],[[7488,7488],"mapped",[116]],[[7489,7489],"mapped",[117]],[[7490,7490],"mapped",[119]],[[7491,7491],"mapped",[97]],[[7492,7492],"mapped",[592]],[[7493,7493],"mapped",[593]],[[7494,7494],"mapped",[7426]],[[7495,7495],"mapped",[98]],[[7496,7496],"mapped",[100]],[[7497,7497],"mapped",[101]],[[7498,7498],"mapped",[601]],[[7499,7499],"mapped",[603]],[[7500,7500],"mapped",[604]],[[7501,7501],"mapped",[103]],[[7502,7502],"valid"],[[7503,7503],"mapped",[107]],[[7504,7504],"mapped",[109]],[[7505,7505],"mapped",[331]],[[7506,7506],"mapped",[111]],[[7507,7507],"mapped",[596]],[[7508,7508],"mapped",[7446]],[[7509,7509],"mapped",[7447]],[[7510,7510],"mapped",[112]],[[7511,7511],"mapped",[116]],[[7512,7512],"mapped",[117]],[[7513,7513],"mapped",[7453]],[[7514,7514],"mapped",[623]],[[7515,7515],"mapped",[118]],[[7516,7516],"mapped",[7461]],[[7517,7517],"mapped",[946]],[[7518,7518],"mapped",[947]],[[7519,7519],"mapped",[948]],[[7520,7520],"mapped",[966]],[[7521,7521],"mapped",[967]],[[7522,7522],"mapped",[105]],[[7523,7523],"mapped",[114]],[[7524,7524],"mapped",[117]],[[7525,7525],"mapped",[118]],[[7526,7526],"mapped",[946]],[[7527,7527],"mapped",[947]],[[7528,7528],"mapped",[961]],[[7529,7529],"mapped",[966]],[[7530,7530],"mapped",[967]],[[7531,7531],"valid"],[[7532,7543],"valid"],[[7544,7544],"mapped",[1085]],[[7545,7578],"valid"],[[7579,7579],"mapped",[594]],[[7580,7580],"mapped",[99]],[[7581,7581],"mapped",[597]],[[7582,7582],"mapped",[240]],[[7583,7583],"mapped",[604]],[[7584,7584],"mapped",[102]],[[7585,7585],"mapped",[607]],[[7586,7586],"mapped",[609]],[[7587,7587],"mapped",[613]],[[7588,7588],"mapped",[616]],[[7589,7589],"mapped",[617]],[[7590,7590],"mapped",[618]],[[7591,7591],"mapped",[7547]],[[7592,7592],"mapped",[669]],[[7593,7593],"mapped",[621]],[[7594,7594],"mapped",[7557]],[[7595,7595],"mapped",[671]],[[7596,7596],"mapped",[625]],[[7597,7597],"mapped",[624]],[[7598,7598],"mapped",[626]],[[7599,7599],"mapped",[627]],[[7600,7600],"mapped",[628]],[[7601,7601],"mapped",[629]],[[7602,7602],"mapped",[632]],[[7603,7603],"mapped",[642]],[[7604,7604],"mapped",[643]],[[7605,7605],"mapped",[427]],[[7606,7606],"mapped",[649]],[[7607,7607],"mapped",[650]],[[7608,7608],"mapped",[7452]],[[7609,7609],"mapped",[651]],[[7610,7610],"mapped",[652]],[[7611,7611],"mapped",[122]],[[7612,7612],"mapped",[656]],[[7613,7613],"mapped",[657]],[[7614,7614],"mapped",[658]],[[7615,7615],"mapped",[952]],[[7616,7619],"valid"],[[7620,7626],"valid"],[[7627,7654],"valid"],[[7655,7669],"valid"],[[7670,7675],"disallowed"],[[7676,7676],"valid"],[[7677,7677],"valid"],[[7678,7679],"valid"],[[7680,7680],"mapped",[7681]],[[7681,7681],"valid"],[[7682,7682],"mapped",[7683]],[[7683,7683],"valid"],[[7684,7684],"mapped",[7685]],[[7685,7685],"valid"],[[7686,7686],"mapped",[7687]],[[7687,7687],"valid"],[[7688,7688],"mapped",[7689]],[[7689,7689],"valid"],[[7690,7690],"mapped",[7691]],[[7691,7691],"valid"],[[7692,7692],"mapped",[7693]],[[7693,7693],"valid"],[[7694,7694],"mapped",[7695]],[[7695,7695],"valid"],[[7696,7696],"mapped",[7697]],[[7697,7697],"valid"],[[7698,7698],"mapped",[7699]],[[7699,7699],"valid"],[[7700,7700],"mapped",[7701]],[[7701,7701],"valid"],[[7702,7702],"mapped",[7703]],[[7703,7703],"valid"],[[7704,7704],"mapped",[7705]],[[7705,7705],"valid"],[[7706,7706],"mapped",[7707]],[[7707,7707],"valid"],[[7708,7708],"mapped",[7709]],[[7709,7709],"valid"],[[7710,7710],"mapped",[7711]],[[7711,7711],"valid"],[[7712,7712],"mapped",[7713]],[[7713,7713],"valid"],[[7714,7714],"mapped",[7715]],[[7715,7715],"valid"],[[7716,7716],"mapped",[7717]],[[7717,7717],"valid"],[[7718,7718],"mapped",[7719]],[[7719,7719],"valid"],[[7720,7720],"mapped",[7721]],[[7721,7721],"valid"],[[7722,7722],"mapped",[7723]],[[7723,7723],"valid"],[[7724,7724],"mapped",[7725]],[[7725,7725],"valid"],[[7726,7726],"mapped",[7727]],[[7727,7727],"valid"],[[7728,7728],"mapped",[7729]],[[7729,7729],"valid"],[[7730,7730],"mapped",[7731]],[[7731,7731],"valid"],[[7732,7732],"mapped",[7733]],[[7733,7733],"valid"],[[7734,7734],"mapped",[7735]],[[7735,7735],"valid"],[[7736,7736],"mapped",[7737]],[[7737,7737],"valid"],[[7738,7738],"mapped",[7739]],[[7739,7739],"valid"],[[7740,7740],"mapped",[7741]],[[7741,7741],"valid"],[[7742,7742],"mapped",[7743]],[[7743,7743],"valid"],[[7744,7744],"mapped",[7745]],[[7745,7745],"valid"],[[7746,7746],"mapped",[7747]],[[7747,7747],"valid"],[[7748,7748],"mapped",[7749]],[[7749,7749],"valid"],[[7750,7750],"mapped",[7751]],[[7751,7751],"valid"],[[7752,7752],"mapped",[7753]],[[7753,7753],"valid"],[[7754,7754],"mapped",[7755]],[[7755,7755],"valid"],[[7756,7756],"mapped",[7757]],[[7757,7757],"valid"],[[7758,7758],"mapped",[7759]],[[7759,7759],"valid"],[[7760,7760],"mapped",[7761]],[[7761,7761],"valid"],[[7762,7762],"mapped",[7763]],[[7763,7763],"valid"],[[7764,7764],"mapped",[7765]],[[7765,7765],"valid"],[[7766,7766],"mapped",[7767]],[[7767,7767],"valid"],[[7768,7768],"mapped",[7769]],[[7769,7769],"valid"],[[7770,7770],"mapped",[7771]],[[7771,7771],"valid"],[[7772,7772],"mapped",[7773]],[[7773,7773],"valid"],[[7774,7774],"mapped",[7775]],[[7775,7775],"valid"],[[7776,7776],"mapped",[7777]],[[7777,7777],"valid"],[[7778,7778],"mapped",[7779]],[[7779,7779],"valid"],[[7780,7780],"mapped",[7781]],[[7781,7781],"valid"],[[7782,7782],"mapped",[7783]],[[7783,7783],"valid"],[[7784,7784],"mapped",[7785]],[[7785,7785],"valid"],[[7786,7786],"mapped",[7787]],[[7787,7787],"valid"],[[7788,7788],"mapped",[7789]],[[7789,7789],"valid"],[[7790,7790],"mapped",[7791]],[[7791,7791],"valid"],[[7792,7792],"mapped",[7793]],[[7793,7793],"valid"],[[7794,7794],"mapped",[7795]],[[7795,7795],"valid"],[[7796,7796],"mapped",[7797]],[[7797,7797],"valid"],[[7798,7798],"mapped",[7799]],[[7799,7799],"valid"],[[7800,7800],"mapped",[7801]],[[7801,7801],"valid"],[[7802,7802],"mapped",[7803]],[[7803,7803],"valid"],[[7804,7804],"mapped",[7805]],[[7805,7805],"valid"],[[7806,7806],"mapped",[7807]],[[7807,7807],"valid"],[[7808,7808],"mapped",[7809]],[[7809,7809],"valid"],[[7810,7810],"mapped",[7811]],[[7811,7811],"valid"],[[7812,7812],"mapped",[7813]],[[7813,7813],"valid"],[[7814,7814],"mapped",[7815]],[[7815,7815],"valid"],[[7816,7816],"mapped",[7817]],[[7817,7817],"valid"],[[7818,7818],"mapped",[7819]],[[7819,7819],"valid"],[[7820,7820],"mapped",[7821]],[[7821,7821],"valid"],[[7822,7822],"mapped",[7823]],[[7823,7823],"valid"],[[7824,7824],"mapped",[7825]],[[7825,7825],"valid"],[[7826,7826],"mapped",[7827]],[[7827,7827],"valid"],[[7828,7828],"mapped",[7829]],[[7829,7833],"valid"],[[7834,7834],"mapped",[97,702]],[[7835,7835],"mapped",[7777]],[[7836,7837],"valid"],[[7838,7838],"mapped",[115,115]],[[7839,7839],"valid"],[[7840,7840],"mapped",[7841]],[[7841,7841],"valid"],[[7842,7842],"mapped",[7843]],[[7843,7843],"valid"],[[7844,7844],"mapped",[7845]],[[7845,7845],"valid"],[[7846,7846],"mapped",[7847]],[[7847,7847],"valid"],[[7848,7848],"mapped",[7849]],[[7849,7849],"valid"],[[7850,7850],"mapped",[7851]],[[7851,7851],"valid"],[[7852,7852],"mapped",[7853]],[[7853,7853],"valid"],[[7854,7854],"mapped",[7855]],[[7855,7855],"valid"],[[7856,7856],"mapped",[7857]],[[7857,7857],"valid"],[[7858,7858],"mapped",[7859]],[[7859,7859],"valid"],[[7860,7860],"mapped",[7861]],[[7861,7861],"valid"],[[7862,7862],"mapped",[7863]],[[7863,7863],"valid"],[[7864,7864],"mapped",[7865]],[[7865,7865],"valid"],[[7866,7866],"mapped",[7867]],[[7867,7867],"valid"],[[7868,7868],"mapped",[7869]],[[7869,7869],"valid"],[[7870,7870],"mapped",[7871]],[[7871,7871],"valid"],[[7872,7872],"mapped",[7873]],[[7873,7873],"valid"],[[7874,7874],"mapped",[7875]],[[7875,7875],"valid"],[[7876,7876],"mapped",[7877]],[[7877,7877],"valid"],[[7878,7878],"mapped",[7879]],[[7879,7879],"valid"],[[7880,7880],"mapped",[7881]],[[7881,7881],"valid"],[[7882,7882],"mapped",[7883]],[[7883,7883],"valid"],[[7884,7884],"mapped",[7885]],[[7885,7885],"valid"],[[7886,7886],"mapped",[7887]],[[7887,7887],"valid"],[[7888,7888],"mapped",[7889]],[[7889,7889],"valid"],[[7890,7890],"mapped",[7891]],[[7891,7891],"valid"],[[7892,7892],"mapped",[7893]],[[7893,7893],"valid"],[[7894,7894],"mapped",[7895]],[[7895,7895],"valid"],[[7896,7896],"mapped",[7897]],[[7897,7897],"valid"],[[7898,7898],"mapped",[7899]],[[7899,7899],"valid"],[[7900,7900],"mapped",[7901]],[[7901,7901],"valid"],[[7902,7902],"mapped",[7903]],[[7903,7903],"valid"],[[7904,7904],"mapped",[7905]],[[7905,7905],"valid"],[[7906,7906],"mapped",[7907]],[[7907,7907],"valid"],[[7908,7908],"mapped",[7909]],[[7909,7909],"valid"],[[7910,7910],"mapped",[7911]],[[7911,7911],"valid"],[[7912,7912],"mapped",[7913]],[[7913,7913],"valid"],[[7914,7914],"mapped",[7915]],[[7915,7915],"valid"],[[7916,7916],"mapped",[7917]],[[7917,7917],"valid"],[[7918,7918],"mapped",[7919]],[[7919,7919],"valid"],[[7920,7920],"mapped",[7921]],[[7921,7921],"valid"],[[7922,7922],"mapped",[7923]],[[7923,7923],"valid"],[[7924,7924],"mapped",[7925]],[[7925,7925],"valid"],[[7926,7926],"mapped",[7927]],[[7927,7927],"valid"],[[7928,7928],"mapped",[7929]],[[7929,7929],"valid"],[[7930,7930],"mapped",[7931]],[[7931,7931],"valid"],[[7932,7932],"mapped",[7933]],[[7933,7933],"valid"],[[7934,7934],"mapped",[7935]],[[7935,7935],"valid"],[[7936,7943],"valid"],[[7944,7944],"mapped",[7936]],[[7945,7945],"mapped",[7937]],[[7946,7946],"mapped",[7938]],[[7947,7947],"mapped",[7939]],[[7948,7948],"mapped",[7940]],[[7949,7949],"mapped",[7941]],[[7950,7950],"mapped",[7942]],[[7951,7951],"mapped",[7943]],[[7952,7957],"valid"],[[7958,7959],"disallowed"],[[7960,7960],"mapped",[7952]],[[7961,7961],"mapped",[7953]],[[7962,7962],"mapped",[7954]],[[7963,7963],"mapped",[7955]],[[7964,7964],"mapped",[7956]],[[7965,7965],"mapped",[7957]],[[7966,7967],"disallowed"],[[7968,7975],"valid"],[[7976,7976],"mapped",[7968]],[[7977,7977],"mapped",[7969]],[[7978,7978],"mapped",[7970]],[[7979,7979],"mapped",[7971]],[[7980,7980],"mapped",[7972]],[[7981,7981],"mapped",[7973]],[[7982,7982],"mapped",[7974]],[[7983,7983],"mapped",[7975]],[[7984,7991],"valid"],[[7992,7992],"mapped",[7984]],[[7993,7993],"mapped",[7985]],[[7994,7994],"mapped",[7986]],[[7995,7995],"mapped",[7987]],[[7996,7996],"mapped",[7988]],[[7997,7997],"mapped",[7989]],[[7998,7998],"mapped",[7990]],[[7999,7999],"mapped",[7991]],[[8000,8005],"valid"],[[8006,8007],"disallowed"],[[8008,8008],"mapped",[8000]],[[8009,8009],"mapped",[8001]],[[8010,8010],"mapped",[8002]],[[8011,8011],"mapped",[8003]],[[8012,8012],"mapped",[8004]],[[8013,8013],"mapped",[8005]],[[8014,8015],"disallowed"],[[8016,8023],"valid"],[[8024,8024],"disallowed"],[[8025,8025],"mapped",[8017]],[[8026,8026],"disallowed"],[[8027,8027],"mapped",[8019]],[[8028,8028],"disallowed"],[[8029,8029],"mapped",[8021]],[[8030,8030],"disallowed"],[[8031,8031],"mapped",[8023]],[[8032,8039],"valid"],[[8040,8040],"mapped",[8032]],[[8041,8041],"mapped",[8033]],[[8042,8042],"mapped",[8034]],[[8043,8043],"mapped",[8035]],[[8044,8044],"mapped",[8036]],[[8045,8045],"mapped",[8037]],[[8046,8046],"mapped",[8038]],[[8047,8047],"mapped",[8039]],[[8048,8048],"valid"],[[8049,8049],"mapped",[940]],[[8050,8050],"valid"],[[8051,8051],"mapped",[941]],[[8052,8052],"valid"],[[8053,8053],"mapped",[942]],[[8054,8054],"valid"],[[8055,8055],"mapped",[943]],[[8056,8056],"valid"],[[8057,8057],"mapped",[972]],[[8058,8058],"valid"],[[8059,8059],"mapped",[973]],[[8060,8060],"valid"],[[8061,8061],"mapped",[974]],[[8062,8063],"disallowed"],[[8064,8064],"mapped",[7936,953]],[[8065,8065],"mapped",[7937,953]],[[8066,8066],"mapped",[7938,953]],[[8067,8067],"mapped",[7939,953]],[[8068,8068],"mapped",[7940,953]],[[8069,8069],"mapped",[7941,953]],[[8070,8070],"mapped",[7942,953]],[[8071,8071],"mapped",[7943,953]],[[8072,8072],"mapped",[7936,953]],[[8073,8073],"mapped",[7937,953]],[[8074,8074],"mapped",[7938,953]],[[8075,8075],"mapped",[7939,953]],[[8076,8076],"mapped",[7940,953]],[[8077,8077],"mapped",[7941,953]],[[8078,8078],"mapped",[7942,953]],[[8079,8079],"mapped",[7943,953]],[[8080,8080],"mapped",[7968,953]],[[8081,8081],"mapped",[7969,953]],[[8082,8082],"mapped",[7970,953]],[[8083,8083],"mapped",[7971,953]],[[8084,8084],"mapped",[7972,953]],[[8085,8085],"mapped",[7973,953]],[[8086,8086],"mapped",[7974,953]],[[8087,8087],"mapped",[7975,953]],[[8088,8088],"mapped",[7968,953]],[[8089,8089],"mapped",[7969,953]],[[8090,8090],"mapped",[7970,953]],[[8091,8091],"mapped",[7971,953]],[[8092,8092],"mapped",[7972,953]],[[8093,8093],"mapped",[7973,953]],[[8094,8094],"mapped",[7974,953]],[[8095,8095],"mapped",[7975,953]],[[8096,8096],"mapped",[8032,953]],[[8097,8097],"mapped",[8033,953]],[[8098,8098],"mapped",[8034,953]],[[8099,8099],"mapped",[8035,953]],[[8100,8100],"mapped",[8036,953]],[[8101,8101],"mapped",[8037,953]],[[8102,8102],"mapped",[8038,953]],[[8103,8103],"mapped",[8039,953]],[[8104,8104],"mapped",[8032,953]],[[8105,8105],"mapped",[8033,953]],[[8106,8106],"mapped",[8034,953]],[[8107,8107],"mapped",[8035,953]],[[8108,8108],"mapped",[8036,953]],[[8109,8109],"mapped",[8037,953]],[[8110,8110],"mapped",[8038,953]],[[8111,8111],"mapped",[8039,953]],[[8112,8113],"valid"],[[8114,8114],"mapped",[8048,953]],[[8115,8115],"mapped",[945,953]],[[8116,8116],"mapped",[940,953]],[[8117,8117],"disallowed"],[[8118,8118],"valid"],[[8119,8119],"mapped",[8118,953]],[[8120,8120],"mapped",[8112]],[[8121,8121],"mapped",[8113]],[[8122,8122],"mapped",[8048]],[[8123,8123],"mapped",[940]],[[8124,8124],"mapped",[945,953]],[[8125,8125],"disallowed_STD3_mapped",[32,787]],[[8126,8126],"mapped",[953]],[[8127,8127],"disallowed_STD3_mapped",[32,787]],[[8128,8128],"disallowed_STD3_mapped",[32,834]],[[8129,8129],"disallowed_STD3_mapped",[32,776,834]],[[8130,8130],"mapped",[8052,953]],[[8131,8131],"mapped",[951,953]],[[8132,8132],"mapped",[942,953]],[[8133,8133],"disallowed"],[[8134,8134],"valid"],[[8135,8135],"mapped",[8134,953]],[[8136,8136],"mapped",[8050]],[[8137,8137],"mapped",[941]],[[8138,8138],"mapped",[8052]],[[8139,8139],"mapped",[942]],[[8140,8140],"mapped",[951,953]],[[8141,8141],"disallowed_STD3_mapped",[32,787,768]],[[8142,8142],"disallowed_STD3_mapped",[32,787,769]],[[8143,8143],"disallowed_STD3_mapped",[32,787,834]],[[8144,8146],"valid"],[[8147,8147],"mapped",[912]],[[8148,8149],"disallowed"],[[8150,8151],"valid"],[[8152,8152],"mapped",[8144]],[[8153,8153],"mapped",[8145]],[[8154,8154],"mapped",[8054]],[[8155,8155],"mapped",[943]],[[8156,8156],"disallowed"],[[8157,8157],"disallowed_STD3_mapped",[32,788,768]],[[8158,8158],"disallowed_STD3_mapped",[32,788,769]],[[8159,8159],"disallowed_STD3_mapped",[32,788,834]],[[8160,8162],"valid"],[[8163,8163],"mapped",[944]],[[8164,8167],"valid"],[[8168,8168],"mapped",[8160]],[[8169,8169],"mapped",[8161]],[[8170,8170],"mapped",[8058]],[[8171,8171],"mapped",[973]],[[8172,8172],"mapped",[8165]],[[8173,8173],"disallowed_STD3_mapped",[32,776,768]],[[8174,8174],"disallowed_STD3_mapped",[32,776,769]],[[8175,8175],"disallowed_STD3_mapped",[96]],[[8176,8177],"disallowed"],[[8178,8178],"mapped",[8060,953]],[[8179,8179],"mapped",[969,953]],[[8180,8180],"mapped",[974,953]],[[8181,8181],"disallowed"],[[8182,8182],"valid"],[[8183,8183],"mapped",[8182,953]],[[8184,8184],"mapped",[8056]],[[8185,8185],"mapped",[972]],[[8186,8186],"mapped",[8060]],[[8187,8187],"mapped",[974]],[[8188,8188],"mapped",[969,953]],[[8189,8189],"disallowed_STD3_mapped",[32,769]],[[8190,8190],"disallowed_STD3_mapped",[32,788]],[[8191,8191],"disallowed"],[[8192,8202],"disallowed_STD3_mapped",[32]],[[8203,8203],"ignored"],[[8204,8205],"deviation",[]],[[8206,8207],"disallowed"],[[8208,8208],"valid",[],"NV8"],[[8209,8209],"mapped",[8208]],[[8210,8214],"valid",[],"NV8"],[[8215,8215],"disallowed_STD3_mapped",[32,819]],[[8216,8227],"valid",[],"NV8"],[[8228,8230],"disallowed"],[[8231,8231],"valid",[],"NV8"],[[8232,8238],"disallowed"],[[8239,8239],"disallowed_STD3_mapped",[32]],[[8240,8242],"valid",[],"NV8"],[[8243,8243],"mapped",[8242,8242]],[[8244,8244],"mapped",[8242,8242,8242]],[[8245,8245],"valid",[],"NV8"],[[8246,8246],"mapped",[8245,8245]],[[8247,8247],"mapped",[8245,8245,8245]],[[8248,8251],"valid",[],"NV8"],[[8252,8252],"disallowed_STD3_mapped",[33,33]],[[8253,8253],"valid",[],"NV8"],[[8254,8254],"disallowed_STD3_mapped",[32,773]],[[8255,8262],"valid",[],"NV8"],[[8263,8263],"disallowed_STD3_mapped",[63,63]],[[8264,8264],"disallowed_STD3_mapped",[63,33]],[[8265,8265],"disallowed_STD3_mapped",[33,63]],[[8266,8269],"valid",[],"NV8"],[[8270,8274],"valid",[],"NV8"],[[8275,8276],"valid",[],"NV8"],[[8277,8278],"valid",[],"NV8"],[[8279,8279],"mapped",[8242,8242,8242,8242]],[[8280,8286],"valid",[],"NV8"],[[8287,8287],"disallowed_STD3_mapped",[32]],[[8288,8288],"ignored"],[[8289,8291],"disallowed"],[[8292,8292],"ignored"],[[8293,8293],"disallowed"],[[8294,8297],"disallowed"],[[8298,8303],"disallowed"],[[8304,8304],"mapped",[48]],[[8305,8305],"mapped",[105]],[[8306,8307],"disallowed"],[[8308,8308],"mapped",[52]],[[8309,8309],"mapped",[53]],[[8310,8310],"mapped",[54]],[[8311,8311],"mapped",[55]],[[8312,8312],"mapped",[56]],[[8313,8313],"mapped",[57]],[[8314,8314],"disallowed_STD3_mapped",[43]],[[8315,8315],"mapped",[8722]],[[8316,8316],"disallowed_STD3_mapped",[61]],[[8317,8317],"disallowed_STD3_mapped",[40]],[[8318,8318],"disallowed_STD3_mapped",[41]],[[8319,8319],"mapped",[110]],[[8320,8320],"mapped",[48]],[[8321,8321],"mapped",[49]],[[8322,8322],"mapped",[50]],[[8323,8323],"mapped",[51]],[[8324,8324],"mapped",[52]],[[8325,8325],"mapped",[53]],[[8326,8326],"mapped",[54]],[[8327,8327],"mapped",[55]],[[8328,8328],"mapped",[56]],[[8329,8329],"mapped",[57]],[[8330,8330],"disallowed_STD3_mapped",[43]],[[8331,8331],"mapped",[8722]],[[8332,8332],"disallowed_STD3_mapped",[61]],[[8333,8333],"disallowed_STD3_mapped",[40]],[[8334,8334],"disallowed_STD3_mapped",[41]],[[8335,8335],"disallowed"],[[8336,8336],"mapped",[97]],[[8337,8337],"mapped",[101]],[[8338,8338],"mapped",[111]],[[8339,8339],"mapped",[120]],[[8340,8340],"mapped",[601]],[[8341,8341],"mapped",[104]],[[8342,8342],"mapped",[107]],[[8343,8343],"mapped",[108]],[[8344,8344],"mapped",[109]],[[8345,8345],"mapped",[110]],[[8346,8346],"mapped",[112]],[[8347,8347],"mapped",[115]],[[8348,8348],"mapped",[116]],[[8349,8351],"disallowed"],[[8352,8359],"valid",[],"NV8"],[[8360,8360],"mapped",[114,115]],[[8361,8362],"valid",[],"NV8"],[[8363,8363],"valid",[],"NV8"],[[8364,8364],"valid",[],"NV8"],[[8365,8367],"valid",[],"NV8"],[[8368,8369],"valid",[],"NV8"],[[8370,8373],"valid",[],"NV8"],[[8374,8376],"valid",[],"NV8"],[[8377,8377],"valid",[],"NV8"],[[8378,8378],"valid",[],"NV8"],[[8379,8381],"valid",[],"NV8"],[[8382,8382],"valid",[],"NV8"],[[8383,8399],"disallowed"],[[8400,8417],"valid",[],"NV8"],[[8418,8419],"valid",[],"NV8"],[[8420,8426],"valid",[],"NV8"],[[8427,8427],"valid",[],"NV8"],[[8428,8431],"valid",[],"NV8"],[[8432,8432],"valid",[],"NV8"],[[8433,8447],"disallowed"],[[8448,8448],"disallowed_STD3_mapped",[97,47,99]],[[8449,8449],"disallowed_STD3_mapped",[97,47,115]],[[8450,8450],"mapped",[99]],[[8451,8451],"mapped",[176,99]],[[8452,8452],"valid",[],"NV8"],[[8453,8453],"disallowed_STD3_mapped",[99,47,111]],[[8454,8454],"disallowed_STD3_mapped",[99,47,117]],[[8455,8455],"mapped",[603]],[[8456,8456],"valid",[],"NV8"],[[8457,8457],"mapped",[176,102]],[[8458,8458],"mapped",[103]],[[8459,8462],"mapped",[104]],[[8463,8463],"mapped",[295]],[[8464,8465],"mapped",[105]],[[8466,8467],"mapped",[108]],[[8468,8468],"valid",[],"NV8"],[[8469,8469],"mapped",[110]],[[8470,8470],"mapped",[110,111]],[[8471,8472],"valid",[],"NV8"],[[8473,8473],"mapped",[112]],[[8474,8474],"mapped",[113]],[[8475,8477],"mapped",[114]],[[8478,8479],"valid",[],"NV8"],[[8480,8480],"mapped",[115,109]],[[8481,8481],"mapped",[116,101,108]],[[8482,8482],"mapped",[116,109]],[[8483,8483],"valid",[],"NV8"],[[8484,8484],"mapped",[122]],[[8485,8485],"valid",[],"NV8"],[[8486,8486],"mapped",[969]],[[8487,8487],"valid",[],"NV8"],[[8488,8488],"mapped",[122]],[[8489,8489],"valid",[],"NV8"],[[8490,8490],"mapped",[107]],[[8491,8491],"mapped",[229]],[[8492,8492],"mapped",[98]],[[8493,8493],"mapped",[99]],[[8494,8494],"valid",[],"NV8"],[[8495,8496],"mapped",[101]],[[8497,8497],"mapped",[102]],[[8498,8498],"disallowed"],[[8499,8499],"mapped",[109]],[[8500,8500],"mapped",[111]],[[8501,8501],"mapped",[1488]],[[8502,8502],"mapped",[1489]],[[8503,8503],"mapped",[1490]],[[8504,8504],"mapped",[1491]],[[8505,8505],"mapped",[105]],[[8506,8506],"valid",[],"NV8"],[[8507,8507],"mapped",[102,97,120]],[[8508,8508],"mapped",[960]],[[8509,8510],"mapped",[947]],[[8511,8511],"mapped",[960]],[[8512,8512],"mapped",[8721]],[[8513,8516],"valid",[],"NV8"],[[8517,8518],"mapped",[100]],[[8519,8519],"mapped",[101]],[[8520,8520],"mapped",[105]],[[8521,8521],"mapped",[106]],[[8522,8523],"valid",[],"NV8"],[[8524,8524],"valid",[],"NV8"],[[8525,8525],"valid",[],"NV8"],[[8526,8526],"valid"],[[8527,8527],"valid",[],"NV8"],[[8528,8528],"mapped",[49,8260,55]],[[8529,8529],"mapped",[49,8260,57]],[[8530,8530],"mapped",[49,8260,49,48]],[[8531,8531],"mapped",[49,8260,51]],[[8532,8532],"mapped",[50,8260,51]],[[8533,8533],"mapped",[49,8260,53]],[[8534,8534],"mapped",[50,8260,53]],[[8535,8535],"mapped",[51,8260,53]],[[8536,8536],"mapped",[52,8260,53]],[[8537,8537],"mapped",[49,8260,54]],[[8538,8538],"mapped",[53,8260,54]],[[8539,8539],"mapped",[49,8260,56]],[[8540,8540],"mapped",[51,8260,56]],[[8541,8541],"mapped",[53,8260,56]],[[8542,8542],"mapped",[55,8260,56]],[[8543,8543],"mapped",[49,8260]],[[8544,8544],"mapped",[105]],[[8545,8545],"mapped",[105,105]],[[8546,8546],"mapped",[105,105,105]],[[8547,8547],"mapped",[105,118]],[[8548,8548],"mapped",[118]],[[8549,8549],"mapped",[118,105]],[[8550,8550],"mapped",[118,105,105]],[[8551,8551],"mapped",[118,105,105,105]],[[8552,8552],"mapped",[105,120]],[[8553,8553],"mapped",[120]],[[8554,8554],"mapped",[120,105]],[[8555,8555],"mapped",[120,105,105]],[[8556,8556],"mapped",[108]],[[8557,8557],"mapped",[99]],[[8558,8558],"mapped",[100]],[[8559,8559],"mapped",[109]],[[8560,8560],"mapped",[105]],[[8561,8561],"mapped",[105,105]],[[8562,8562],"mapped",[105,105,105]],[[8563,8563],"mapped",[105,118]],[[8564,8564],"mapped",[118]],[[8565,8565],"mapped",[118,105]],[[8566,8566],"mapped",[118,105,105]],[[8567,8567],"mapped",[118,105,105,105]],[[8568,8568],"mapped",[105,120]],[[8569,8569],"mapped",[120]],[[8570,8570],"mapped",[120,105]],[[8571,8571],"mapped",[120,105,105]],[[8572,8572],"mapped",[108]],[[8573,8573],"mapped",[99]],[[8574,8574],"mapped",[100]],[[8575,8575],"mapped",[109]],[[8576,8578],"valid",[],"NV8"],[[8579,8579],"disallowed"],[[8580,8580],"valid"],[[8581,8584],"valid",[],"NV8"],[[8585,8585],"mapped",[48,8260,51]],[[8586,8587],"valid",[],"NV8"],[[8588,8591],"disallowed"],[[8592,8682],"valid",[],"NV8"],[[8683,8691],"valid",[],"NV8"],[[8692,8703],"valid",[],"NV8"],[[8704,8747],"valid",[],"NV8"],[[8748,8748],"mapped",[8747,8747]],[[8749,8749],"mapped",[8747,8747,8747]],[[8750,8750],"valid",[],"NV8"],[[8751,8751],"mapped",[8750,8750]],[[8752,8752],"mapped",[8750,8750,8750]],[[8753,8799],"valid",[],"NV8"],[[8800,8800],"disallowed_STD3_valid"],[[8801,8813],"valid",[],"NV8"],[[8814,8815],"disallowed_STD3_valid"],[[8816,8945],"valid",[],"NV8"],[[8946,8959],"valid",[],"NV8"],[[8960,8960],"valid",[],"NV8"],[[8961,8961],"valid",[],"NV8"],[[8962,9000],"valid",[],"NV8"],[[9001,9001],"mapped",[12296]],[[9002,9002],"mapped",[12297]],[[9003,9082],"valid",[],"NV8"],[[9083,9083],"valid",[],"NV8"],[[9084,9084],"valid",[],"NV8"],[[9085,9114],"valid",[],"NV8"],[[9115,9166],"valid",[],"NV8"],[[9167,9168],"valid",[],"NV8"],[[9169,9179],"valid",[],"NV8"],[[9180,9191],"valid",[],"NV8"],[[9192,9192],"valid",[],"NV8"],[[9193,9203],"valid",[],"NV8"],[[9204,9210],"valid",[],"NV8"],[[9211,9215],"disallowed"],[[9216,9252],"valid",[],"NV8"],[[9253,9254],"valid",[],"NV8"],[[9255,9279],"disallowed"],[[9280,9290],"valid",[],"NV8"],[[9291,9311],"disallowed"],[[9312,9312],"mapped",[49]],[[9313,9313],"mapped",[50]],[[9314,9314],"mapped",[51]],[[9315,9315],"mapped",[52]],[[9316,9316],"mapped",[53]],[[9317,9317],"mapped",[54]],[[9318,9318],"mapped",[55]],[[9319,9319],"mapped",[56]],[[9320,9320],"mapped",[57]],[[9321,9321],"mapped",[49,48]],[[9322,9322],"mapped",[49,49]],[[9323,9323],"mapped",[49,50]],[[9324,9324],"mapped",[49,51]],[[9325,9325],"mapped",[49,52]],[[9326,9326],"mapped",[49,53]],[[9327,9327],"mapped",[49,54]],[[9328,9328],"mapped",[49,55]],[[9329,9329],"mapped",[49,56]],[[9330,9330],"mapped",[49,57]],[[9331,9331],"mapped",[50,48]],[[9332,9332],"disallowed_STD3_mapped",[40,49,41]],[[9333,9333],"disallowed_STD3_mapped",[40,50,41]],[[9334,9334],"disallowed_STD3_mapped",[40,51,41]],[[9335,9335],"disallowed_STD3_mapped",[40,52,41]],[[9336,9336],"disallowed_STD3_mapped",[40,53,41]],[[9337,9337],"disallowed_STD3_mapped",[40,54,41]],[[9338,9338],"disallowed_STD3_mapped",[40,55,41]],[[9339,9339],"disallowed_STD3_mapped",[40,56,41]],[[9340,9340],"disallowed_STD3_mapped",[40,57,41]],[[9341,9341],"disallowed_STD3_mapped",[40,49,48,41]],[[9342,9342],"disallowed_STD3_mapped",[40,49,49,41]],[[9343,9343],"disallowed_STD3_mapped",[40,49,50,41]],[[9344,9344],"disallowed_STD3_mapped",[40,49,51,41]],[[9345,9345],"disallowed_STD3_mapped",[40,49,52,41]],[[9346,9346],"disallowed_STD3_mapped",[40,49,53,41]],[[9347,9347],"disallowed_STD3_mapped",[40,49,54,41]],[[9348,9348],"disallowed_STD3_mapped",[40,49,55,41]],[[9349,9349],"disallowed_STD3_mapped",[40,49,56,41]],[[9350,9350],"disallowed_STD3_mapped",[40,49,57,41]],[[9351,9351],"disallowed_STD3_mapped",[40,50,48,41]],[[9352,9371],"disallowed"],[[9372,9372],"disallowed_STD3_mapped",[40,97,41]],[[9373,9373],"disallowed_STD3_mapped",[40,98,41]],[[9374,9374],"disallowed_STD3_mapped",[40,99,41]],[[9375,9375],"disallowed_STD3_mapped",[40,100,41]],[[9376,9376],"disallowed_STD3_mapped",[40,101,41]],[[9377,9377],"disallowed_STD3_mapped",[40,102,41]],[[9378,9378],"disallowed_STD3_mapped",[40,103,41]],[[9379,9379],"disallowed_STD3_mapped",[40,104,41]],[[9380,9380],"disallowed_STD3_mapped",[40,105,41]],[[9381,9381],"disallowed_STD3_mapped",[40,106,41]],[[9382,9382],"disallowed_STD3_mapped",[40,107,41]],[[9383,9383],"disallowed_STD3_mapped",[40,108,41]],[[9384,9384],"disallowed_STD3_mapped",[40,109,41]],[[9385,9385],"disallowed_STD3_mapped",[40,110,41]],[[9386,9386],"disallowed_STD3_mapped",[40,111,41]],[[9387,9387],"disallowed_STD3_mapped",[40,112,41]],[[9388,9388],"disallowed_STD3_mapped",[40,113,41]],[[9389,9389],"disallowed_STD3_mapped",[40,114,41]],[[9390,9390],"disallowed_STD3_mapped",[40,115,41]],[[9391,9391],"disallowed_STD3_mapped",[40,116,41]],[[9392,9392],"disallowed_STD3_mapped",[40,117,41]],[[9393,9393],"disallowed_STD3_mapped",[40,118,41]],[[9394,9394],"disallowed_STD3_mapped",[40,119,41]],[[9395,9395],"disallowed_STD3_mapped",[40,120,41]],[[9396,9396],"disallowed_STD3_mapped",[40,121,41]],[[9397,9397],"disallowed_STD3_mapped",[40,122,41]],[[9398,9398],"mapped",[97]],[[9399,9399],"mapped",[98]],[[9400,9400],"mapped",[99]],[[9401,9401],"mapped",[100]],[[9402,9402],"mapped",[101]],[[9403,9403],"mapped",[102]],[[9404,9404],"mapped",[103]],[[9405,9405],"mapped",[104]],[[9406,9406],"mapped",[105]],[[9407,9407],"mapped",[106]],[[9408,9408],"mapped",[107]],[[9409,9409],"mapped",[108]],[[9410,9410],"mapped",[109]],[[9411,9411],"mapped",[110]],[[9412,9412],"mapped",[111]],[[9413,9413],"mapped",[112]],[[9414,9414],"mapped",[113]],[[9415,9415],"mapped",[114]],[[9416,9416],"mapped",[115]],[[9417,9417],"mapped",[116]],[[9418,9418],"mapped",[117]],[[9419,9419],"mapped",[118]],[[9420,9420],"mapped",[119]],[[9421,9421],"mapped",[120]],[[9422,9422],"mapped",[121]],[[9423,9423],"mapped",[122]],[[9424,9424],"mapped",[97]],[[9425,9425],"mapped",[98]],[[9426,9426],"mapped",[99]],[[9427,9427],"mapped",[100]],[[9428,9428],"mapped",[101]],[[9429,9429],"mapped",[102]],[[9430,9430],"mapped",[103]],[[9431,9431],"mapped",[104]],[[9432,9432],"mapped",[105]],[[9433,9433],"mapped",[106]],[[9434,9434],"mapped",[107]],[[9435,9435],"mapped",[108]],[[9436,9436],"mapped",[109]],[[9437,9437],"mapped",[110]],[[9438,9438],"mapped",[111]],[[9439,9439],"mapped",[112]],[[9440,9440],"mapped",[113]],[[9441,9441],"mapped",[114]],[[9442,9442],"mapped",[115]],[[9443,9443],"mapped",[116]],[[9444,9444],"mapped",[117]],[[9445,9445],"mapped",[118]],[[9446,9446],"mapped",[119]],[[9447,9447],"mapped",[120]],[[9448,9448],"mapped",[121]],[[9449,9449],"mapped",[122]],[[9450,9450],"mapped",[48]],[[9451,9470],"valid",[],"NV8"],[[9471,9471],"valid",[],"NV8"],[[9472,9621],"valid",[],"NV8"],[[9622,9631],"valid",[],"NV8"],[[9632,9711],"valid",[],"NV8"],[[9712,9719],"valid",[],"NV8"],[[9720,9727],"valid",[],"NV8"],[[9728,9747],"valid",[],"NV8"],[[9748,9749],"valid",[],"NV8"],[[9750,9751],"valid",[],"NV8"],[[9752,9752],"valid",[],"NV8"],[[9753,9753],"valid",[],"NV8"],[[9754,9839],"valid",[],"NV8"],[[9840,9841],"valid",[],"NV8"],[[9842,9853],"valid",[],"NV8"],[[9854,9855],"valid",[],"NV8"],[[9856,9865],"valid",[],"NV8"],[[9866,9873],"valid",[],"NV8"],[[9874,9884],"valid",[],"NV8"],[[9885,9885],"valid",[],"NV8"],[[9886,9887],"valid",[],"NV8"],[[9888,9889],"valid",[],"NV8"],[[9890,9905],"valid",[],"NV8"],[[9906,9906],"valid",[],"NV8"],[[9907,9916],"valid",[],"NV8"],[[9917,9919],"valid",[],"NV8"],[[9920,9923],"valid",[],"NV8"],[[9924,9933],"valid",[],"NV8"],[[9934,9934],"valid",[],"NV8"],[[9935,9953],"valid",[],"NV8"],[[9954,9954],"valid",[],"NV8"],[[9955,9955],"valid",[],"NV8"],[[9956,9959],"valid",[],"NV8"],[[9960,9983],"valid",[],"NV8"],[[9984,9984],"valid",[],"NV8"],[[9985,9988],"valid",[],"NV8"],[[9989,9989],"valid",[],"NV8"],[[9990,9993],"valid",[],"NV8"],[[9994,9995],"valid",[],"NV8"],[[9996,10023],"valid",[],"NV8"],[[10024,10024],"valid",[],"NV8"],[[10025,10059],"valid",[],"NV8"],[[10060,10060],"valid",[],"NV8"],[[10061,10061],"valid",[],"NV8"],[[10062,10062],"valid",[],"NV8"],[[10063,10066],"valid",[],"NV8"],[[10067,10069],"valid",[],"NV8"],[[10070,10070],"valid",[],"NV8"],[[10071,10071],"valid",[],"NV8"],[[10072,10078],"valid",[],"NV8"],[[10079,10080],"valid",[],"NV8"],[[10081,10087],"valid",[],"NV8"],[[10088,10101],"valid",[],"NV8"],[[10102,10132],"valid",[],"NV8"],[[10133,10135],"valid",[],"NV8"],[[10136,10159],"valid",[],"NV8"],[[10160,10160],"valid",[],"NV8"],[[10161,10174],"valid",[],"NV8"],[[10175,10175],"valid",[],"NV8"],[[10176,10182],"valid",[],"NV8"],[[10183,10186],"valid",[],"NV8"],[[10187,10187],"valid",[],"NV8"],[[10188,10188],"valid",[],"NV8"],[[10189,10189],"valid",[],"NV8"],[[10190,10191],"valid",[],"NV8"],[[10192,10219],"valid",[],"NV8"],[[10220,10223],"valid",[],"NV8"],[[10224,10239],"valid",[],"NV8"],[[10240,10495],"valid",[],"NV8"],[[10496,10763],"valid",[],"NV8"],[[10764,10764],"mapped",[8747,8747,8747,8747]],[[10765,10867],"valid",[],"NV8"],[[10868,10868],"disallowed_STD3_mapped",[58,58,61]],[[10869,10869],"disallowed_STD3_mapped",[61,61]],[[10870,10870],"disallowed_STD3_mapped",[61,61,61]],[[10871,10971],"valid",[],"NV8"],[[10972,10972],"mapped",[10973,824]],[[10973,11007],"valid",[],"NV8"],[[11008,11021],"valid",[],"NV8"],[[11022,11027],"valid",[],"NV8"],[[11028,11034],"valid",[],"NV8"],[[11035,11039],"valid",[],"NV8"],[[11040,11043],"valid",[],"NV8"],[[11044,11084],"valid",[],"NV8"],[[11085,11087],"valid",[],"NV8"],[[11088,11092],"valid",[],"NV8"],[[11093,11097],"valid",[],"NV8"],[[11098,11123],"valid",[],"NV8"],[[11124,11125],"disallowed"],[[11126,11157],"valid",[],"NV8"],[[11158,11159],"disallowed"],[[11160,11193],"valid",[],"NV8"],[[11194,11196],"disallowed"],[[11197,11208],"valid",[],"NV8"],[[11209,11209],"disallowed"],[[11210,11217],"valid",[],"NV8"],[[11218,11243],"disallowed"],[[11244,11247],"valid",[],"NV8"],[[11248,11263],"disallowed"],[[11264,11264],"mapped",[11312]],[[11265,11265],"mapped",[11313]],[[11266,11266],"mapped",[11314]],[[11267,11267],"mapped",[11315]],[[11268,11268],"mapped",[11316]],[[11269,11269],"mapped",[11317]],[[11270,11270],"mapped",[11318]],[[11271,11271],"mapped",[11319]],[[11272,11272],"mapped",[11320]],[[11273,11273],"mapped",[11321]],[[11274,11274],"mapped",[11322]],[[11275,11275],"mapped",[11323]],[[11276,11276],"mapped",[11324]],[[11277,11277],"mapped",[11325]],[[11278,11278],"mapped",[11326]],[[11279,11279],"mapped",[11327]],[[11280,11280],"mapped",[11328]],[[11281,11281],"mapped",[11329]],[[11282,11282],"mapped",[11330]],[[11283,11283],"mapped",[11331]],[[11284,11284],"mapped",[11332]],[[11285,11285],"mapped",[11333]],[[11286,11286],"mapped",[11334]],[[11287,11287],"mapped",[11335]],[[11288,11288],"mapped",[11336]],[[11289,11289],"mapped",[11337]],[[11290,11290],"mapped",[11338]],[[11291,11291],"mapped",[11339]],[[11292,11292],"mapped",[11340]],[[11293,11293],"mapped",[11341]],[[11294,11294],"mapped",[11342]],[[11295,11295],"mapped",[11343]],[[11296,11296],"mapped",[11344]],[[11297,11297],"mapped",[11345]],[[11298,11298],"mapped",[11346]],[[11299,11299],"mapped",[11347]],[[11300,11300],"mapped",[11348]],[[11301,11301],"mapped",[11349]],[[11302,11302],"mapped",[11350]],[[11303,11303],"mapped",[11351]],[[11304,11304],"mapped",[11352]],[[11305,11305],"mapped",[11353]],[[11306,11306],"mapped",[11354]],[[11307,11307],"mapped",[11355]],[[11308,11308],"mapped",[11356]],[[11309,11309],"mapped",[11357]],[[11310,11310],"mapped",[11358]],[[11311,11311],"disallowed"],[[11312,11358],"valid"],[[11359,11359],"disallowed"],[[11360,11360],"mapped",[11361]],[[11361,11361],"valid"],[[11362,11362],"mapped",[619]],[[11363,11363],"mapped",[7549]],[[11364,11364],"mapped",[637]],[[11365,11366],"valid"],[[11367,11367],"mapped",[11368]],[[11368,11368],"valid"],[[11369,11369],"mapped",[11370]],[[11370,11370],"valid"],[[11371,11371],"mapped",[11372]],[[11372,11372],"valid"],[[11373,11373],"mapped",[593]],[[11374,11374],"mapped",[625]],[[11375,11375],"mapped",[592]],[[11376,11376],"mapped",[594]],[[11377,11377],"valid"],[[11378,11378],"mapped",[11379]],[[11379,11379],"valid"],[[11380,11380],"valid"],[[11381,11381],"mapped",[11382]],[[11382,11383],"valid"],[[11384,11387],"valid"],[[11388,11388],"mapped",[106]],[[11389,11389],"mapped",[118]],[[11390,11390],"mapped",[575]],[[11391,11391],"mapped",[576]],[[11392,11392],"mapped",[11393]],[[11393,11393],"valid"],[[11394,11394],"mapped",[11395]],[[11395,11395],"valid"],[[11396,11396],"mapped",[11397]],[[11397,11397],"valid"],[[11398,11398],"mapped",[11399]],[[11399,11399],"valid"],[[11400,11400],"mapped",[11401]],[[11401,11401],"valid"],[[11402,11402],"mapped",[11403]],[[11403,11403],"valid"],[[11404,11404],"mapped",[11405]],[[11405,11405],"valid"],[[11406,11406],"mapped",[11407]],[[11407,11407],"valid"],[[11408,11408],"mapped",[11409]],[[11409,11409],"valid"],[[11410,11410],"mapped",[11411]],[[11411,11411],"valid"],[[11412,11412],"mapped",[11413]],[[11413,11413],"valid"],[[11414,11414],"mapped",[11415]],[[11415,11415],"valid"],[[11416,11416],"mapped",[11417]],[[11417,11417],"valid"],[[11418,11418],"mapped",[11419]],[[11419,11419],"valid"],[[11420,11420],"mapped",[11421]],[[11421,11421],"valid"],[[11422,11422],"mapped",[11423]],[[11423,11423],"valid"],[[11424,11424],"mapped",[11425]],[[11425,11425],"valid"],[[11426,11426],"mapped",[11427]],[[11427,11427],"valid"],[[11428,11428],"mapped",[11429]],[[11429,11429],"valid"],[[11430,11430],"mapped",[11431]],[[11431,11431],"valid"],[[11432,11432],"mapped",[11433]],[[11433,11433],"valid"],[[11434,11434],"mapped",[11435]],[[11435,11435],"valid"],[[11436,11436],"mapped",[11437]],[[11437,11437],"valid"],[[11438,11438],"mapped",[11439]],[[11439,11439],"valid"],[[11440,11440],"mapped",[11441]],[[11441,11441],"valid"],[[11442,11442],"mapped",[11443]],[[11443,11443],"valid"],[[11444,11444],"mapped",[11445]],[[11445,11445],"valid"],[[11446,11446],"mapped",[11447]],[[11447,11447],"valid"],[[11448,11448],"mapped",[11449]],[[11449,11449],"valid"],[[11450,11450],"mapped",[11451]],[[11451,11451],"valid"],[[11452,11452],"mapped",[11453]],[[11453,11453],"valid"],[[11454,11454],"mapped",[11455]],[[11455,11455],"valid"],[[11456,11456],"mapped",[11457]],[[11457,11457],"valid"],[[11458,11458],"mapped",[11459]],[[11459,11459],"valid"],[[11460,11460],"mapped",[11461]],[[11461,11461],"valid"],[[11462,11462],"mapped",[11463]],[[11463,11463],"valid"],[[11464,11464],"mapped",[11465]],[[11465,11465],"valid"],[[11466,11466],"mapped",[11467]],[[11467,11467],"valid"],[[11468,11468],"mapped",[11469]],[[11469,11469],"valid"],[[11470,11470],"mapped",[11471]],[[11471,11471],"valid"],[[11472,11472],"mapped",[11473]],[[11473,11473],"valid"],[[11474,11474],"mapped",[11475]],[[11475,11475],"valid"],[[11476,11476],"mapped",[11477]],[[11477,11477],"valid"],[[11478,11478],"mapped",[11479]],[[11479,11479],"valid"],[[11480,11480],"mapped",[11481]],[[11481,11481],"valid"],[[11482,11482],"mapped",[11483]],[[11483,11483],"valid"],[[11484,11484],"mapped",[11485]],[[11485,11485],"valid"],[[11486,11486],"mapped",[11487]],[[11487,11487],"valid"],[[11488,11488],"mapped",[11489]],[[11489,11489],"valid"],[[11490,11490],"mapped",[11491]],[[11491,11492],"valid"],[[11493,11498],"valid",[],"NV8"],[[11499,11499],"mapped",[11500]],[[11500,11500],"valid"],[[11501,11501],"mapped",[11502]],[[11502,11505],"valid"],[[11506,11506],"mapped",[11507]],[[11507,11507],"valid"],[[11508,11512],"disallowed"],[[11513,11519],"valid",[],"NV8"],[[11520,11557],"valid"],[[11558,11558],"disallowed"],[[11559,11559],"valid"],[[11560,11564],"disallowed"],[[11565,11565],"valid"],[[11566,11567],"disallowed"],[[11568,11621],"valid"],[[11622,11623],"valid"],[[11624,11630],"disallowed"],[[11631,11631],"mapped",[11617]],[[11632,11632],"valid",[],"NV8"],[[11633,11646],"disallowed"],[[11647,11647],"valid"],[[11648,11670],"valid"],[[11671,11679],"disallowed"],[[11680,11686],"valid"],[[11687,11687],"disallowed"],[[11688,11694],"valid"],[[11695,11695],"disallowed"],[[11696,11702],"valid"],[[11703,11703],"disallowed"],[[11704,11710],"valid"],[[11711,11711],"disallowed"],[[11712,11718],"valid"],[[11719,11719],"disallowed"],[[11720,11726],"valid"],[[11727,11727],"disallowed"],[[11728,11734],"valid"],[[11735,11735],"disallowed"],[[11736,11742],"valid"],[[11743,11743],"disallowed"],[[11744,11775],"valid"],[[11776,11799],"valid",[],"NV8"],[[11800,11803],"valid",[],"NV8"],[[11804,11805],"valid",[],"NV8"],[[11806,11822],"valid",[],"NV8"],[[11823,11823],"valid"],[[11824,11824],"valid",[],"NV8"],[[11825,11825],"valid",[],"NV8"],[[11826,11835],"valid",[],"NV8"],[[11836,11842],"valid",[],"NV8"],[[11843,11903],"disallowed"],[[11904,11929],"valid",[],"NV8"],[[11930,11930],"disallowed"],[[11931,11934],"valid",[],"NV8"],[[11935,11935],"mapped",[27597]],[[11936,12018],"valid",[],"NV8"],[[12019,12019],"mapped",[40863]],[[12020,12031],"disallowed"],[[12032,12032],"mapped",[19968]],[[12033,12033],"mapped",[20008]],[[12034,12034],"mapped",[20022]],[[12035,12035],"mapped",[20031]],[[12036,12036],"mapped",[20057]],[[12037,12037],"mapped",[20101]],[[12038,12038],"mapped",[20108]],[[12039,12039],"mapped",[20128]],[[12040,12040],"mapped",[20154]],[[12041,12041],"mapped",[20799]],[[12042,12042],"mapped",[20837]],[[12043,12043],"mapped",[20843]],[[12044,12044],"mapped",[20866]],[[12045,12045],"mapped",[20886]],[[12046,12046],"mapped",[20907]],[[12047,12047],"mapped",[20960]],[[12048,12048],"mapped",[20981]],[[12049,12049],"mapped",[20992]],[[12050,12050],"mapped",[21147]],[[12051,12051],"mapped",[21241]],[[12052,12052],"mapped",[21269]],[[12053,12053],"mapped",[21274]],[[12054,12054],"mapped",[21304]],[[12055,12055],"mapped",[21313]],[[12056,12056],"mapped",[21340]],[[12057,12057],"mapped",[21353]],[[12058,12058],"mapped",[21378]],[[12059,12059],"mapped",[21430]],[[12060,12060],"mapped",[21448]],[[12061,12061],"mapped",[21475]],[[12062,12062],"mapped",[22231]],[[12063,12063],"mapped",[22303]],[[12064,12064],"mapped",[22763]],[[12065,12065],"mapped",[22786]],[[12066,12066],"mapped",[22794]],[[12067,12067],"mapped",[22805]],[[12068,12068],"mapped",[22823]],[[12069,12069],"mapped",[22899]],[[12070,12070],"mapped",[23376]],[[12071,12071],"mapped",[23424]],[[12072,12072],"mapped",[23544]],[[12073,12073],"mapped",[23567]],[[12074,12074],"mapped",[23586]],[[12075,12075],"mapped",[23608]],[[12076,12076],"mapped",[23662]],[[12077,12077],"mapped",[23665]],[[12078,12078],"mapped",[24027]],[[12079,12079],"mapped",[24037]],[[12080,12080],"mapped",[24049]],[[12081,12081],"mapped",[24062]],[[12082,12082],"mapped",[24178]],[[12083,12083],"mapped",[24186]],[[12084,12084],"mapped",[24191]],[[12085,12085],"mapped",[24308]],[[12086,12086],"mapped",[24318]],[[12087,12087],"mapped",[24331]],[[12088,12088],"mapped",[24339]],[[12089,12089],"mapped",[24400]],[[12090,12090],"mapped",[24417]],[[12091,12091],"mapped",[24435]],[[12092,12092],"mapped",[24515]],[[12093,12093],"mapped",[25096]],[[12094,12094],"mapped",[25142]],[[12095,12095],"mapped",[25163]],[[12096,12096],"mapped",[25903]],[[12097,12097],"mapped",[25908]],[[12098,12098],"mapped",[25991]],[[12099,12099],"mapped",[26007]],[[12100,12100],"mapped",[26020]],[[12101,12101],"mapped",[26041]],[[12102,12102],"mapped",[26080]],[[12103,12103],"mapped",[26085]],[[12104,12104],"mapped",[26352]],[[12105,12105],"mapped",[26376]],[[12106,12106],"mapped",[26408]],[[12107,12107],"mapped",[27424]],[[12108,12108],"mapped",[27490]],[[12109,12109],"mapped",[27513]],[[12110,12110],"mapped",[27571]],[[12111,12111],"mapped",[27595]],[[12112,12112],"mapped",[27604]],[[12113,12113],"mapped",[27611]],[[12114,12114],"mapped",[27663]],[[12115,12115],"mapped",[27668]],[[12116,12116],"mapped",[27700]],[[12117,12117],"mapped",[28779]],[[12118,12118],"mapped",[29226]],[[12119,12119],"mapped",[29238]],[[12120,12120],"mapped",[29243]],[[12121,12121],"mapped",[29247]],[[12122,12122],"mapped",[29255]],[[12123,12123],"mapped",[29273]],[[12124,12124],"mapped",[29275]],[[12125,12125],"mapped",[29356]],[[12126,12126],"mapped",[29572]],[[12127,12127],"mapped",[29577]],[[12128,12128],"mapped",[29916]],[[12129,12129],"mapped",[29926]],[[12130,12130],"mapped",[29976]],[[12131,12131],"mapped",[29983]],[[12132,12132],"mapped",[29992]],[[12133,12133],"mapped",[30000]],[[12134,12134],"mapped",[30091]],[[12135,12135],"mapped",[30098]],[[12136,12136],"mapped",[30326]],[[12137,12137],"mapped",[30333]],[[12138,12138],"mapped",[30382]],[[12139,12139],"mapped",[30399]],[[12140,12140],"mapped",[30446]],[[12141,12141],"mapped",[30683]],[[12142,12142],"mapped",[30690]],[[12143,12143],"mapped",[30707]],[[12144,12144],"mapped",[31034]],[[12145,12145],"mapped",[31160]],[[12146,12146],"mapped",[31166]],[[12147,12147],"mapped",[31348]],[[12148,12148],"mapped",[31435]],[[12149,12149],"mapped",[31481]],[[12150,12150],"mapped",[31859]],[[12151,12151],"mapped",[31992]],[[12152,12152],"mapped",[32566]],[[12153,12153],"mapped",[32593]],[[12154,12154],"mapped",[32650]],[[12155,12155],"mapped",[32701]],[[12156,12156],"mapped",[32769]],[[12157,12157],"mapped",[32780]],[[12158,12158],"mapped",[32786]],[[12159,12159],"mapped",[32819]],[[12160,12160],"mapped",[32895]],[[12161,12161],"mapped",[32905]],[[12162,12162],"mapped",[33251]],[[12163,12163],"mapped",[33258]],[[12164,12164],"mapped",[33267]],[[12165,12165],"mapped",[33276]],[[12166,12166],"mapped",[33292]],[[12167,12167],"mapped",[33307]],[[12168,12168],"mapped",[33311]],[[12169,12169],"mapped",[33390]],[[12170,12170],"mapped",[33394]],[[12171,12171],"mapped",[33400]],[[12172,12172],"mapped",[34381]],[[12173,12173],"mapped",[34411]],[[12174,12174],"mapped",[34880]],[[12175,12175],"mapped",[34892]],[[12176,12176],"mapped",[34915]],[[12177,12177],"mapped",[35198]],[[12178,12178],"mapped",[35211]],[[12179,12179],"mapped",[35282]],[[12180,12180],"mapped",[35328]],[[12181,12181],"mapped",[35895]],[[12182,12182],"mapped",[35910]],[[12183,12183],"mapped",[35925]],[[12184,12184],"mapped",[35960]],[[12185,12185],"mapped",[35997]],[[12186,12186],"mapped",[36196]],[[12187,12187],"mapped",[36208]],[[12188,12188],"mapped",[36275]],[[12189,12189],"mapped",[36523]],[[12190,12190],"mapped",[36554]],[[12191,12191],"mapped",[36763]],[[12192,12192],"mapped",[36784]],[[12193,12193],"mapped",[36789]],[[12194,12194],"mapped",[37009]],[[12195,12195],"mapped",[37193]],[[12196,12196],"mapped",[37318]],[[12197,12197],"mapped",[37324]],[[12198,12198],"mapped",[37329]],[[12199,12199],"mapped",[38263]],[[12200,12200],"mapped",[38272]],[[12201,12201],"mapped",[38428]],[[12202,12202],"mapped",[38582]],[[12203,12203],"mapped",[38585]],[[12204,12204],"mapped",[38632]],[[12205,12205],"mapped",[38737]],[[12206,12206],"mapped",[38750]],[[12207,12207],"mapped",[38754]],[[12208,12208],"mapped",[38761]],[[12209,12209],"mapped",[38859]],[[12210,12210],"mapped",[38893]],[[12211,12211],"mapped",[38899]],[[12212,12212],"mapped",[38913]],[[12213,12213],"mapped",[39080]],[[12214,12214],"mapped",[39131]],[[12215,12215],"mapped",[39135]],[[12216,12216],"mapped",[39318]],[[12217,12217],"mapped",[39321]],[[12218,12218],"mapped",[39340]],[[12219,12219],"mapped",[39592]],[[12220,12220],"mapped",[39640]],[[12221,12221],"mapped",[39647]],[[12222,12222],"mapped",[39717]],[[12223,12223],"mapped",[39727]],[[12224,12224],"mapped",[39730]],[[12225,12225],"mapped",[39740]],[[12226,12226],"mapped",[39770]],[[12227,12227],"mapped",[40165]],[[12228,12228],"mapped",[40565]],[[12229,12229],"mapped",[40575]],[[12230,12230],"mapped",[40613]],[[12231,12231],"mapped",[40635]],[[12232,12232],"mapped",[40643]],[[12233,12233],"mapped",[40653]],[[12234,12234],"mapped",[40657]],[[12235,12235],"mapped",[40697]],[[12236,12236],"mapped",[40701]],[[12237,12237],"mapped",[40718]],[[12238,12238],"mapped",[40723]],[[12239,12239],"mapped",[40736]],[[12240,12240],"mapped",[40763]],[[12241,12241],"mapped",[40778]],[[12242,12242],"mapped",[40786]],[[12243,12243],"mapped",[40845]],[[12244,12244],"mapped",[40860]],[[12245,12245],"mapped",[40864]],[[12246,12271],"disallowed"],[[12272,12283],"disallowed"],[[12284,12287],"disallowed"],[[12288,12288],"disallowed_STD3_mapped",[32]],[[12289,12289],"valid",[],"NV8"],[[12290,12290],"mapped",[46]],[[12291,12292],"valid",[],"NV8"],[[12293,12295],"valid"],[[12296,12329],"valid",[],"NV8"],[[12330,12333],"valid"],[[12334,12341],"valid",[],"NV8"],[[12342,12342],"mapped",[12306]],[[12343,12343],"valid",[],"NV8"],[[12344,12344],"mapped",[21313]],[[12345,12345],"mapped",[21316]],[[12346,12346],"mapped",[21317]],[[12347,12347],"valid",[],"NV8"],[[12348,12348],"valid"],[[12349,12349],"valid",[],"NV8"],[[12350,12350],"valid",[],"NV8"],[[12351,12351],"valid",[],"NV8"],[[12352,12352],"disallowed"],[[12353,12436],"valid"],[[12437,12438],"valid"],[[12439,12440],"disallowed"],[[12441,12442],"valid"],[[12443,12443],"disallowed_STD3_mapped",[32,12441]],[[12444,12444],"disallowed_STD3_mapped",[32,12442]],[[12445,12446],"valid"],[[12447,12447],"mapped",[12424,12426]],[[12448,12448],"valid",[],"NV8"],[[12449,12542],"valid"],[[12543,12543],"mapped",[12467,12488]],[[12544,12548],"disallowed"],[[12549,12588],"valid"],[[12589,12589],"valid"],[[12590,12592],"disallowed"],[[12593,12593],"mapped",[4352]],[[12594,12594],"mapped",[4353]],[[12595,12595],"mapped",[4522]],[[12596,12596],"mapped",[4354]],[[12597,12597],"mapped",[4524]],[[12598,12598],"mapped",[4525]],[[12599,12599],"mapped",[4355]],[[12600,12600],"mapped",[4356]],[[12601,12601],"mapped",[4357]],[[12602,12602],"mapped",[4528]],[[12603,12603],"mapped",[4529]],[[12604,12604],"mapped",[4530]],[[12605,12605],"mapped",[4531]],[[12606,12606],"mapped",[4532]],[[12607,12607],"mapped",[4533]],[[12608,12608],"mapped",[4378]],[[12609,12609],"mapped",[4358]],[[12610,12610],"mapped",[4359]],[[12611,12611],"mapped",[4360]],[[12612,12612],"mapped",[4385]],[[12613,12613],"mapped",[4361]],[[12614,12614],"mapped",[4362]],[[12615,12615],"mapped",[4363]],[[12616,12616],"mapped",[4364]],[[12617,12617],"mapped",[4365]],[[12618,12618],"mapped",[4366]],[[12619,12619],"mapped",[4367]],[[12620,12620],"mapped",[4368]],[[12621,12621],"mapped",[4369]],[[12622,12622],"mapped",[4370]],[[12623,12623],"mapped",[4449]],[[12624,12624],"mapped",[4450]],[[12625,12625],"mapped",[4451]],[[12626,12626],"mapped",[4452]],[[12627,12627],"mapped",[4453]],[[12628,12628],"mapped",[4454]],[[12629,12629],"mapped",[4455]],[[12630,12630],"mapped",[4456]],[[12631,12631],"mapped",[4457]],[[12632,12632],"mapped",[4458]],[[12633,12633],"mapped",[4459]],[[12634,12634],"mapped",[4460]],[[12635,12635],"mapped",[4461]],[[12636,12636],"mapped",[4462]],[[12637,12637],"mapped",[4463]],[[12638,12638],"mapped",[4464]],[[12639,12639],"mapped",[4465]],[[12640,12640],"mapped",[4466]],[[12641,12641],"mapped",[4467]],[[12642,12642],"mapped",[4468]],[[12643,12643],"mapped",[4469]],[[12644,12644],"disallowed"],[[12645,12645],"mapped",[4372]],[[12646,12646],"mapped",[4373]],[[12647,12647],"mapped",[4551]],[[12648,12648],"mapped",[4552]],[[12649,12649],"mapped",[4556]],[[12650,12650],"mapped",[4558]],[[12651,12651],"mapped",[4563]],[[12652,12652],"mapped",[4567]],[[12653,12653],"mapped",[4569]],[[12654,12654],"mapped",[4380]],[[12655,12655],"mapped",[4573]],[[12656,12656],"mapped",[4575]],[[12657,12657],"mapped",[4381]],[[12658,12658],"mapped",[4382]],[[12659,12659],"mapped",[4384]],[[12660,12660],"mapped",[4386]],[[12661,12661],"mapped",[4387]],[[12662,12662],"mapped",[4391]],[[12663,12663],"mapped",[4393]],[[12664,12664],"mapped",[4395]],[[12665,12665],"mapped",[4396]],[[12666,12666],"mapped",[4397]],[[12667,12667],"mapped",[4398]],[[12668,12668],"mapped",[4399]],[[12669,12669],"mapped",[4402]],[[12670,12670],"mapped",[4406]],[[12671,12671],"mapped",[4416]],[[12672,12672],"mapped",[4423]],[[12673,12673],"mapped",[4428]],[[12674,12674],"mapped",[4593]],[[12675,12675],"mapped",[4594]],[[12676,12676],"mapped",[4439]],[[12677,12677],"mapped",[4440]],[[12678,12678],"mapped",[4441]],[[12679,12679],"mapped",[4484]],[[12680,12680],"mapped",[4485]],[[12681,12681],"mapped",[4488]],[[12682,12682],"mapped",[4497]],[[12683,12683],"mapped",[4498]],[[12684,12684],"mapped",[4500]],[[12685,12685],"mapped",[4510]],[[12686,12686],"mapped",[4513]],[[12687,12687],"disallowed"],[[12688,12689],"valid",[],"NV8"],[[12690,12690],"mapped",[19968]],[[12691,12691],"mapped",[20108]],[[12692,12692],"mapped",[19977]],[[12693,12693],"mapped",[22235]],[[12694,12694],"mapped",[19978]],[[12695,12695],"mapped",[20013]],[[12696,12696],"mapped",[19979]],[[12697,12697],"mapped",[30002]],[[12698,12698],"mapped",[20057]],[[12699,12699],"mapped",[19993]],[[12700,12700],"mapped",[19969]],[[12701,12701],"mapped",[22825]],[[12702,12702],"mapped",[22320]],[[12703,12703],"mapped",[20154]],[[12704,12727],"valid"],[[12728,12730],"valid"],[[12731,12735],"disallowed"],[[12736,12751],"valid",[],"NV8"],[[12752,12771],"valid",[],"NV8"],[[12772,12783],"disallowed"],[[12784,12799],"valid"],[[12800,12800],"disallowed_STD3_mapped",[40,4352,41]],[[12801,12801],"disallowed_STD3_mapped",[40,4354,41]],[[12802,12802],"disallowed_STD3_mapped",[40,4355,41]],[[12803,12803],"disallowed_STD3_mapped",[40,4357,41]],[[12804,12804],"disallowed_STD3_mapped",[40,4358,41]],[[12805,12805],"disallowed_STD3_mapped",[40,4359,41]],[[12806,12806],"disallowed_STD3_mapped",[40,4361,41]],[[12807,12807],"disallowed_STD3_mapped",[40,4363,41]],[[12808,12808],"disallowed_STD3_mapped",[40,4364,41]],[[12809,12809],"disallowed_STD3_mapped",[40,4366,41]],[[12810,12810],"disallowed_STD3_mapped",[40,4367,41]],[[12811,12811],"disallowed_STD3_mapped",[40,4368,41]],[[12812,12812],"disallowed_STD3_mapped",[40,4369,41]],[[12813,12813],"disallowed_STD3_mapped",[40,4370,41]],[[12814,12814],"disallowed_STD3_mapped",[40,44032,41]],[[12815,12815],"disallowed_STD3_mapped",[40,45208,41]],[[12816,12816],"disallowed_STD3_mapped",[40,45796,41]],[[12817,12817],"disallowed_STD3_mapped",[40,46972,41]],[[12818,12818],"disallowed_STD3_mapped",[40,47560,41]],[[12819,12819],"disallowed_STD3_mapped",[40,48148,41]],[[12820,12820],"disallowed_STD3_mapped",[40,49324,41]],[[12821,12821],"disallowed_STD3_mapped",[40,50500,41]],[[12822,12822],"disallowed_STD3_mapped",[40,51088,41]],[[12823,12823],"disallowed_STD3_mapped",[40,52264,41]],[[12824,12824],"disallowed_STD3_mapped",[40,52852,41]],[[12825,12825],"disallowed_STD3_mapped",[40,53440,41]],[[12826,12826],"disallowed_STD3_mapped",[40,54028,41]],[[12827,12827],"disallowed_STD3_mapped",[40,54616,41]],[[12828,12828],"disallowed_STD3_mapped",[40,51452,41]],[[12829,12829],"disallowed_STD3_mapped",[40,50724,51204,41]],[[12830,12830],"disallowed_STD3_mapped",[40,50724,54980,41]],[[12831,12831],"disallowed"],[[12832,12832],"disallowed_STD3_mapped",[40,19968,41]],[[12833,12833],"disallowed_STD3_mapped",[40,20108,41]],[[12834,12834],"disallowed_STD3_mapped",[40,19977,41]],[[12835,12835],"disallowed_STD3_mapped",[40,22235,41]],[[12836,12836],"disallowed_STD3_mapped",[40,20116,41]],[[12837,12837],"disallowed_STD3_mapped",[40,20845,41]],[[12838,12838],"disallowed_STD3_mapped",[40,19971,41]],[[12839,12839],"disallowed_STD3_mapped",[40,20843,41]],[[12840,12840],"disallowed_STD3_mapped",[40,20061,41]],[[12841,12841],"disallowed_STD3_mapped",[40,21313,41]],[[12842,12842],"disallowed_STD3_mapped",[40,26376,41]],[[12843,12843],"disallowed_STD3_mapped",[40,28779,41]],[[12844,12844],"disallowed_STD3_mapped",[40,27700,41]],[[12845,12845],"disallowed_STD3_mapped",[40,26408,41]],[[12846,12846],"disallowed_STD3_mapped",[40,37329,41]],[[12847,12847],"disallowed_STD3_mapped",[40,22303,41]],[[12848,12848],"disallowed_STD3_mapped",[40,26085,41]],[[12849,12849],"disallowed_STD3_mapped",[40,26666,41]],[[12850,12850],"disallowed_STD3_mapped",[40,26377,41]],[[12851,12851],"disallowed_STD3_mapped",[40,31038,41]],[[12852,12852],"disallowed_STD3_mapped",[40,21517,41]],[[12853,12853],"disallowed_STD3_mapped",[40,29305,41]],[[12854,12854],"disallowed_STD3_mapped",[40,36001,41]],[[12855,12855],"disallowed_STD3_mapped",[40,31069,41]],[[12856,12856],"disallowed_STD3_mapped",[40,21172,41]],[[12857,12857],"disallowed_STD3_mapped",[40,20195,41]],[[12858,12858],"disallowed_STD3_mapped",[40,21628,41]],[[12859,12859],"disallowed_STD3_mapped",[40,23398,41]],[[12860,12860],"disallowed_STD3_mapped",[40,30435,41]],[[12861,12861],"disallowed_STD3_mapped",[40,20225,41]],[[12862,12862],"disallowed_STD3_mapped",[40,36039,41]],[[12863,12863],"disallowed_STD3_mapped",[40,21332,41]],[[12864,12864],"disallowed_STD3_mapped",[40,31085,41]],[[12865,12865],"disallowed_STD3_mapped",[40,20241,41]],[[12866,12866],"disallowed_STD3_mapped",[40,33258,41]],[[12867,12867],"disallowed_STD3_mapped",[40,33267,41]],[[12868,12868],"mapped",[21839]],[[12869,12869],"mapped",[24188]],[[12870,12870],"mapped",[25991]],[[12871,12871],"mapped",[31631]],[[12872,12879],"valid",[],"NV8"],[[12880,12880],"mapped",[112,116,101]],[[12881,12881],"mapped",[50,49]],[[12882,12882],"mapped",[50,50]],[[12883,12883],"mapped",[50,51]],[[12884,12884],"mapped",[50,52]],[[12885,12885],"mapped",[50,53]],[[12886,12886],"mapped",[50,54]],[[12887,12887],"mapped",[50,55]],[[12888,12888],"mapped",[50,56]],[[12889,12889],"mapped",[50,57]],[[12890,12890],"mapped",[51,48]],[[12891,12891],"mapped",[51,49]],[[12892,12892],"mapped",[51,50]],[[12893,12893],"mapped",[51,51]],[[12894,12894],"mapped",[51,52]],[[12895,12895],"mapped",[51,53]],[[12896,12896],"mapped",[4352]],[[12897,12897],"mapped",[4354]],[[12898,12898],"mapped",[4355]],[[12899,12899],"mapped",[4357]],[[12900,12900],"mapped",[4358]],[[12901,12901],"mapped",[4359]],[[12902,12902],"mapped",[4361]],[[12903,12903],"mapped",[4363]],[[12904,12904],"mapped",[4364]],[[12905,12905],"mapped",[4366]],[[12906,12906],"mapped",[4367]],[[12907,12907],"mapped",[4368]],[[12908,12908],"mapped",[4369]],[[12909,12909],"mapped",[4370]],[[12910,12910],"mapped",[44032]],[[12911,12911],"mapped",[45208]],[[12912,12912],"mapped",[45796]],[[12913,12913],"mapped",[46972]],[[12914,12914],"mapped",[47560]],[[12915,12915],"mapped",[48148]],[[12916,12916],"mapped",[49324]],[[12917,12917],"mapped",[50500]],[[12918,12918],"mapped",[51088]],[[12919,12919],"mapped",[52264]],[[12920,12920],"mapped",[52852]],[[12921,12921],"mapped",[53440]],[[12922,12922],"mapped",[54028]],[[12923,12923],"mapped",[54616]],[[12924,12924],"mapped",[52280,44256]],[[12925,12925],"mapped",[51452,51032]],[[12926,12926],"mapped",[50864]],[[12927,12927],"valid",[],"NV8"],[[12928,12928],"mapped",[19968]],[[12929,12929],"mapped",[20108]],[[12930,12930],"mapped",[19977]],[[12931,12931],"mapped",[22235]],[[12932,12932],"mapped",[20116]],[[12933,12933],"mapped",[20845]],[[12934,12934],"mapped",[19971]],[[12935,12935],"mapped",[20843]],[[12936,12936],"mapped",[20061]],[[12937,12937],"mapped",[21313]],[[12938,12938],"mapped",[26376]],[[12939,12939],"mapped",[28779]],[[12940,12940],"mapped",[27700]],[[12941,12941],"mapped",[26408]],[[12942,12942],"mapped",[37329]],[[12943,12943],"mapped",[22303]],[[12944,12944],"mapped",[26085]],[[12945,12945],"mapped",[26666]],[[12946,12946],"mapped",[26377]],[[12947,12947],"mapped",[31038]],[[12948,12948],"mapped",[21517]],[[12949,12949],"mapped",[29305]],[[12950,12950],"mapped",[36001]],[[12951,12951],"mapped",[31069]],[[12952,12952],"mapped",[21172]],[[12953,12953],"mapped",[31192]],[[12954,12954],"mapped",[30007]],[[12955,12955],"mapped",[22899]],[[12956,12956],"mapped",[36969]],[[12957,12957],"mapped",[20778]],[[12958,12958],"mapped",[21360]],[[12959,12959],"mapped",[27880]],[[12960,12960],"mapped",[38917]],[[12961,12961],"mapped",[20241]],[[12962,12962],"mapped",[20889]],[[12963,12963],"mapped",[27491]],[[12964,12964],"mapped",[19978]],[[12965,12965],"mapped",[20013]],[[12966,12966],"mapped",[19979]],[[12967,12967],"mapped",[24038]],[[12968,12968],"mapped",[21491]],[[12969,12969],"mapped",[21307]],[[12970,12970],"mapped",[23447]],[[12971,12971],"mapped",[23398]],[[12972,12972],"mapped",[30435]],[[12973,12973],"mapped",[20225]],[[12974,12974],"mapped",[36039]],[[12975,12975],"mapped",[21332]],[[12976,12976],"mapped",[22812]],[[12977,12977],"mapped",[51,54]],[[12978,12978],"mapped",[51,55]],[[12979,12979],"mapped",[51,56]],[[12980,12980],"mapped",[51,57]],[[12981,12981],"mapped",[52,48]],[[12982,12982],"mapped",[52,49]],[[12983,12983],"mapped",[52,50]],[[12984,12984],"mapped",[52,51]],[[12985,12985],"mapped",[52,52]],[[12986,12986],"mapped",[52,53]],[[12987,12987],"mapped",[52,54]],[[12988,12988],"mapped",[52,55]],[[12989,12989],"mapped",[52,56]],[[12990,12990],"mapped",[52,57]],[[12991,12991],"mapped",[53,48]],[[12992,12992],"mapped",[49,26376]],[[12993,12993],"mapped",[50,26376]],[[12994,12994],"mapped",[51,26376]],[[12995,12995],"mapped",[52,26376]],[[12996,12996],"mapped",[53,26376]],[[12997,12997],"mapped",[54,26376]],[[12998,12998],"mapped",[55,26376]],[[12999,12999],"mapped",[56,26376]],[[13000,13000],"mapped",[57,26376]],[[13001,13001],"mapped",[49,48,26376]],[[13002,13002],"mapped",[49,49,26376]],[[13003,13003],"mapped",[49,50,26376]],[[13004,13004],"mapped",[104,103]],[[13005,13005],"mapped",[101,114,103]],[[13006,13006],"mapped",[101,118]],[[13007,13007],"mapped",[108,116,100]],[[13008,13008],"mapped",[12450]],[[13009,13009],"mapped",[12452]],[[13010,13010],"mapped",[12454]],[[13011,13011],"mapped",[12456]],[[13012,13012],"mapped",[12458]],[[13013,13013],"mapped",[12459]],[[13014,13014],"mapped",[12461]],[[13015,13015],"mapped",[12463]],[[13016,13016],"mapped",[12465]],[[13017,13017],"mapped",[12467]],[[13018,13018],"mapped",[12469]],[[13019,13019],"mapped",[12471]],[[13020,13020],"mapped",[12473]],[[13021,13021],"mapped",[12475]],[[13022,13022],"mapped",[12477]],[[13023,13023],"mapped",[12479]],[[13024,13024],"mapped",[12481]],[[13025,13025],"mapped",[12484]],[[13026,13026],"mapped",[12486]],[[13027,13027],"mapped",[12488]],[[13028,13028],"mapped",[12490]],[[13029,13029],"mapped",[12491]],[[13030,13030],"mapped",[12492]],[[13031,13031],"mapped",[12493]],[[13032,13032],"mapped",[12494]],[[13033,13033],"mapped",[12495]],[[13034,13034],"mapped",[12498]],[[13035,13035],"mapped",[12501]],[[13036,13036],"mapped",[12504]],[[13037,13037],"mapped",[12507]],[[13038,13038],"mapped",[12510]],[[13039,13039],"mapped",[12511]],[[13040,13040],"mapped",[12512]],[[13041,13041],"mapped",[12513]],[[13042,13042],"mapped",[12514]],[[13043,13043],"mapped",[12516]],[[13044,13044],"mapped",[12518]],[[13045,13045],"mapped",[12520]],[[13046,13046],"mapped",[12521]],[[13047,13047],"mapped",[12522]],[[13048,13048],"mapped",[12523]],[[13049,13049],"mapped",[12524]],[[13050,13050],"mapped",[12525]],[[13051,13051],"mapped",[12527]],[[13052,13052],"mapped",[12528]],[[13053,13053],"mapped",[12529]],[[13054,13054],"mapped",[12530]],[[13055,13055],"disallowed"],[[13056,13056],"mapped",[12450,12497,12540,12488]],[[13057,13057],"mapped",[12450,12523,12501,12449]],[[13058,13058],"mapped",[12450,12531,12506,12450]],[[13059,13059],"mapped",[12450,12540,12523]],[[13060,13060],"mapped",[12452,12491,12531,12464]],[[13061,13061],"mapped",[12452,12531,12481]],[[13062,13062],"mapped",[12454,12457,12531]],[[13063,13063],"mapped",[12456,12473,12463,12540,12489]],[[13064,13064],"mapped",[12456,12540,12459,12540]],[[13065,13065],"mapped",[12458,12531,12473]],[[13066,13066],"mapped",[12458,12540,12512]],[[13067,13067],"mapped",[12459,12452,12522]],[[13068,13068],"mapped",[12459,12521,12483,12488]],[[13069,13069],"mapped",[12459,12525,12522,12540]],[[13070,13070],"mapped",[12460,12525,12531]],[[13071,13071],"mapped",[12460,12531,12510]],[[13072,13072],"mapped",[12462,12460]],[[13073,13073],"mapped",[12462,12491,12540]],[[13074,13074],"mapped",[12461,12517,12522,12540]],[[13075,13075],"mapped",[12462,12523,12480,12540]],[[13076,13076],"mapped",[12461,12525]],[[13077,13077],"mapped",[12461,12525,12464,12521,12512]],[[13078,13078],"mapped",[12461,12525,12513,12540,12488,12523]],[[13079,13079],"mapped",[12461,12525,12527,12483,12488]],[[13080,13080],"mapped",[12464,12521,12512]],[[13081,13081],"mapped",[12464,12521,12512,12488,12531]],[[13082,13082],"mapped",[12463,12523,12476,12452,12525]],[[13083,13083],"mapped",[12463,12525,12540,12493]],[[13084,13084],"mapped",[12465,12540,12473]],[[13085,13085],"mapped",[12467,12523,12490]],[[13086,13086],"mapped",[12467,12540,12509]],[[13087,13087],"mapped",[12469,12452,12463,12523]],[[13088,13088],"mapped",[12469,12531,12481,12540,12512]],[[13089,13089],"mapped",[12471,12522,12531,12464]],[[13090,13090],"mapped",[12475,12531,12481]],[[13091,13091],"mapped",[12475,12531,12488]],[[13092,13092],"mapped",[12480,12540,12473]],[[13093,13093],"mapped",[12487,12471]],[[13094,13094],"mapped",[12489,12523]],[[13095,13095],"mapped",[12488,12531]],[[13096,13096],"mapped",[12490,12494]],[[13097,13097],"mapped",[12494,12483,12488]],[[13098,13098],"mapped",[12495,12452,12484]],[[13099,13099],"mapped",[12497,12540,12475,12531,12488]],[[13100,13100],"mapped",[12497,12540,12484]],[[13101,13101],"mapped",[12496,12540,12524,12523]],[[13102,13102],"mapped",[12500,12450,12473,12488,12523]],[[13103,13103],"mapped",[12500,12463,12523]],[[13104,13104],"mapped",[12500,12467]],[[13105,13105],"mapped",[12499,12523]],[[13106,13106],"mapped",[12501,12449,12521,12483,12489]],[[13107,13107],"mapped",[12501,12451,12540,12488]],[[13108,13108],"mapped",[12502,12483,12471,12455,12523]],[[13109,13109],"mapped",[12501,12521,12531]],[[13110,13110],"mapped",[12504,12463,12479,12540,12523]],[[13111,13111],"mapped",[12506,12477]],[[13112,13112],"mapped",[12506,12491,12498]],[[13113,13113],"mapped",[12504,12523,12484]],[[13114,13114],"mapped",[12506,12531,12473]],[[13115,13115],"mapped",[12506,12540,12472]],[[13116,13116],"mapped",[12505,12540,12479]],[[13117,13117],"mapped",[12509,12452,12531,12488]],[[13118,13118],"mapped",[12508,12523,12488]],[[13119,13119],"mapped",[12507,12531]],[[13120,13120],"mapped",[12509,12531,12489]],[[13121,13121],"mapped",[12507,12540,12523]],[[13122,13122],"mapped",[12507,12540,12531]],[[13123,13123],"mapped",[12510,12452,12463,12525]],[[13124,13124],"mapped",[12510,12452,12523]],[[13125,13125],"mapped",[12510,12483,12495]],[[13126,13126],"mapped",[12510,12523,12463]],[[13127,13127],"mapped",[12510,12531,12471,12519,12531]],[[13128,13128],"mapped",[12511,12463,12525,12531]],[[13129,13129],"mapped",[12511,12522]],[[13130,13130],"mapped",[12511,12522,12496,12540,12523]],[[13131,13131],"mapped",[12513,12460]],[[13132,13132],"mapped",[12513,12460,12488,12531]],[[13133,13133],"mapped",[12513,12540,12488,12523]],[[13134,13134],"mapped",[12516,12540,12489]],[[13135,13135],"mapped",[12516,12540,12523]],[[13136,13136],"mapped",[12518,12450,12531]],[[13137,13137],"mapped",[12522,12483,12488,12523]],[[13138,13138],"mapped",[12522,12521]],[[13139,13139],"mapped",[12523,12500,12540]],[[13140,13140],"mapped",[12523,12540,12502,12523]],[[13141,13141],"mapped",[12524,12512]],[[13142,13142],"mapped",[12524,12531,12488,12466,12531]],[[13143,13143],"mapped",[12527,12483,12488]],[[13144,13144],"mapped",[48,28857]],[[13145,13145],"mapped",[49,28857]],[[13146,13146],"mapped",[50,28857]],[[13147,13147],"mapped",[51,28857]],[[13148,13148],"mapped",[52,28857]],[[13149,13149],"mapped",[53,28857]],[[13150,13150],"mapped",[54,28857]],[[13151,13151],"mapped",[55,28857]],[[13152,13152],"mapped",[56,28857]],[[13153,13153],"mapped",[57,28857]],[[13154,13154],"mapped",[49,48,28857]],[[13155,13155],"mapped",[49,49,28857]],[[13156,13156],"mapped",[49,50,28857]],[[13157,13157],"mapped",[49,51,28857]],[[13158,13158],"mapped",[49,52,28857]],[[13159,13159],"mapped",[49,53,28857]],[[13160,13160],"mapped",[49,54,28857]],[[13161,13161],"mapped",[49,55,28857]],[[13162,13162],"mapped",[49,56,28857]],[[13163,13163],"mapped",[49,57,28857]],[[13164,13164],"mapped",[50,48,28857]],[[13165,13165],"mapped",[50,49,28857]],[[13166,13166],"mapped",[50,50,28857]],[[13167,13167],"mapped",[50,51,28857]],[[13168,13168],"mapped",[50,52,28857]],[[13169,13169],"mapped",[104,112,97]],[[13170,13170],"mapped",[100,97]],[[13171,13171],"mapped",[97,117]],[[13172,13172],"mapped",[98,97,114]],[[13173,13173],"mapped",[111,118]],[[13174,13174],"mapped",[112,99]],[[13175,13175],"mapped",[100,109]],[[13176,13176],"mapped",[100,109,50]],[[13177,13177],"mapped",[100,109,51]],[[13178,13178],"mapped",[105,117]],[[13179,13179],"mapped",[24179,25104]],[[13180,13180],"mapped",[26157,21644]],[[13181,13181],"mapped",[22823,27491]],[[13182,13182],"mapped",[26126,27835]],[[13183,13183],"mapped",[26666,24335,20250,31038]],[[13184,13184],"mapped",[112,97]],[[13185,13185],"mapped",[110,97]],[[13186,13186],"mapped",[956,97]],[[13187,13187],"mapped",[109,97]],[[13188,13188],"mapped",[107,97]],[[13189,13189],"mapped",[107,98]],[[13190,13190],"mapped",[109,98]],[[13191,13191],"mapped",[103,98]],[[13192,13192],"mapped",[99,97,108]],[[13193,13193],"mapped",[107,99,97,108]],[[13194,13194],"mapped",[112,102]],[[13195,13195],"mapped",[110,102]],[[13196,13196],"mapped",[956,102]],[[13197,13197],"mapped",[956,103]],[[13198,13198],"mapped",[109,103]],[[13199,13199],"mapped",[107,103]],[[13200,13200],"mapped",[104,122]],[[13201,13201],"mapped",[107,104,122]],[[13202,13202],"mapped",[109,104,122]],[[13203,13203],"mapped",[103,104,122]],[[13204,13204],"mapped",[116,104,122]],[[13205,13205],"mapped",[956,108]],[[13206,13206],"mapped",[109,108]],[[13207,13207],"mapped",[100,108]],[[13208,13208],"mapped",[107,108]],[[13209,13209],"mapped",[102,109]],[[13210,13210],"mapped",[110,109]],[[13211,13211],"mapped",[956,109]],[[13212,13212],"mapped",[109,109]],[[13213,13213],"mapped",[99,109]],[[13214,13214],"mapped",[107,109]],[[13215,13215],"mapped",[109,109,50]],[[13216,13216],"mapped",[99,109,50]],[[13217,13217],"mapped",[109,50]],[[13218,13218],"mapped",[107,109,50]],[[13219,13219],"mapped",[109,109,51]],[[13220,13220],"mapped",[99,109,51]],[[13221,13221],"mapped",[109,51]],[[13222,13222],"mapped",[107,109,51]],[[13223,13223],"mapped",[109,8725,115]],[[13224,13224],"mapped",[109,8725,115,50]],[[13225,13225],"mapped",[112,97]],[[13226,13226],"mapped",[107,112,97]],[[13227,13227],"mapped",[109,112,97]],[[13228,13228],"mapped",[103,112,97]],[[13229,13229],"mapped",[114,97,100]],[[13230,13230],"mapped",[114,97,100,8725,115]],[[13231,13231],"mapped",[114,97,100,8725,115,50]],[[13232,13232],"mapped",[112,115]],[[13233,13233],"mapped",[110,115]],[[13234,13234],"mapped",[956,115]],[[13235,13235],"mapped",[109,115]],[[13236,13236],"mapped",[112,118]],[[13237,13237],"mapped",[110,118]],[[13238,13238],"mapped",[956,118]],[[13239,13239],"mapped",[109,118]],[[13240,13240],"mapped",[107,118]],[[13241,13241],"mapped",[109,118]],[[13242,13242],"mapped",[112,119]],[[13243,13243],"mapped",[110,119]],[[13244,13244],"mapped",[956,119]],[[13245,13245],"mapped",[109,119]],[[13246,13246],"mapped",[107,119]],[[13247,13247],"mapped",[109,119]],[[13248,13248],"mapped",[107,969]],[[13249,13249],"mapped",[109,969]],[[13250,13250],"disallowed"],[[13251,13251],"mapped",[98,113]],[[13252,13252],"mapped",[99,99]],[[13253,13253],"mapped",[99,100]],[[13254,13254],"mapped",[99,8725,107,103]],[[13255,13255],"disallowed"],[[13256,13256],"mapped",[100,98]],[[13257,13257],"mapped",[103,121]],[[13258,13258],"mapped",[104,97]],[[13259,13259],"mapped",[104,112]],[[13260,13260],"mapped",[105,110]],[[13261,13261],"mapped",[107,107]],[[13262,13262],"mapped",[107,109]],[[13263,13263],"mapped",[107,116]],[[13264,13264],"mapped",[108,109]],[[13265,13265],"mapped",[108,110]],[[13266,13266],"mapped",[108,111,103]],[[13267,13267],"mapped",[108,120]],[[13268,13268],"mapped",[109,98]],[[13269,13269],"mapped",[109,105,108]],[[13270,13270],"mapped",[109,111,108]],[[13271,13271],"mapped",[112,104]],[[13272,13272],"disallowed"],[[13273,13273],"mapped",[112,112,109]],[[13274,13274],"mapped",[112,114]],[[13275,13275],"mapped",[115,114]],[[13276,13276],"mapped",[115,118]],[[13277,13277],"mapped",[119,98]],[[13278,13278],"mapped",[118,8725,109]],[[13279,13279],"mapped",[97,8725,109]],[[13280,13280],"mapped",[49,26085]],[[13281,13281],"mapped",[50,26085]],[[13282,13282],"mapped",[51,26085]],[[13283,13283],"mapped",[52,26085]],[[13284,13284],"mapped",[53,26085]],[[13285,13285],"mapped",[54,26085]],[[13286,13286],"mapped",[55,26085]],[[13287,13287],"mapped",[56,26085]],[[13288,13288],"mapped",[57,26085]],[[13289,13289],"mapped",[49,48,26085]],[[13290,13290],"mapped",[49,49,26085]],[[13291,13291],"mapped",[49,50,26085]],[[13292,13292],"mapped",[49,51,26085]],[[13293,13293],"mapped",[49,52,26085]],[[13294,13294],"mapped",[49,53,26085]],[[13295,13295],"mapped",[49,54,26085]],[[13296,13296],"mapped",[49,55,26085]],[[13297,13297],"mapped",[49,56,26085]],[[13298,13298],"mapped",[49,57,26085]],[[13299,13299],"mapped",[50,48,26085]],[[13300,13300],"mapped",[50,49,26085]],[[13301,13301],"mapped",[50,50,26085]],[[13302,13302],"mapped",[50,51,26085]],[[13303,13303],"mapped",[50,52,26085]],[[13304,13304],"mapped",[50,53,26085]],[[13305,13305],"mapped",[50,54,26085]],[[13306,13306],"mapped",[50,55,26085]],[[13307,13307],"mapped",[50,56,26085]],[[13308,13308],"mapped",[50,57,26085]],[[13309,13309],"mapped",[51,48,26085]],[[13310,13310],"mapped",[51,49,26085]],[[13311,13311],"mapped",[103,97,108]],[[13312,19893],"valid"],[[19894,19903],"disallowed"],[[19904,19967],"valid",[],"NV8"],[[19968,40869],"valid"],[[40870,40891],"valid"],[[40892,40899],"valid"],[[40900,40907],"valid"],[[40908,40908],"valid"],[[40909,40917],"valid"],[[40918,40959],"disallowed"],[[40960,42124],"valid"],[[42125,42127],"disallowed"],[[42128,42145],"valid",[],"NV8"],[[42146,42147],"valid",[],"NV8"],[[42148,42163],"valid",[],"NV8"],[[42164,42164],"valid",[],"NV8"],[[42165,42176],"valid",[],"NV8"],[[42177,42177],"valid",[],"NV8"],[[42178,42180],"valid",[],"NV8"],[[42181,42181],"valid",[],"NV8"],[[42182,42182],"valid",[],"NV8"],[[42183,42191],"disallowed"],[[42192,42237],"valid"],[[42238,42239],"valid",[],"NV8"],[[42240,42508],"valid"],[[42509,42511],"valid",[],"NV8"],[[42512,42539],"valid"],[[42540,42559],"disallowed"],[[42560,42560],"mapped",[42561]],[[42561,42561],"valid"],[[42562,42562],"mapped",[42563]],[[42563,42563],"valid"],[[42564,42564],"mapped",[42565]],[[42565,42565],"valid"],[[42566,42566],"mapped",[42567]],[[42567,42567],"valid"],[[42568,42568],"mapped",[42569]],[[42569,42569],"valid"],[[42570,42570],"mapped",[42571]],[[42571,42571],"valid"],[[42572,42572],"mapped",[42573]],[[42573,42573],"valid"],[[42574,42574],"mapped",[42575]],[[42575,42575],"valid"],[[42576,42576],"mapped",[42577]],[[42577,42577],"valid"],[[42578,42578],"mapped",[42579]],[[42579,42579],"valid"],[[42580,42580],"mapped",[42581]],[[42581,42581],"valid"],[[42582,42582],"mapped",[42583]],[[42583,42583],"valid"],[[42584,42584],"mapped",[42585]],[[42585,42585],"valid"],[[42586,42586],"mapped",[42587]],[[42587,42587],"valid"],[[42588,42588],"mapped",[42589]],[[42589,42589],"valid"],[[42590,42590],"mapped",[42591]],[[42591,42591],"valid"],[[42592,42592],"mapped",[42593]],[[42593,42593],"valid"],[[42594,42594],"mapped",[42595]],[[42595,42595],"valid"],[[42596,42596],"mapped",[42597]],[[42597,42597],"valid"],[[42598,42598],"mapped",[42599]],[[42599,42599],"valid"],[[42600,42600],"mapped",[42601]],[[42601,42601],"valid"],[[42602,42602],"mapped",[42603]],[[42603,42603],"valid"],[[42604,42604],"mapped",[42605]],[[42605,42607],"valid"],[[42608,42611],"valid",[],"NV8"],[[42612,42619],"valid"],[[42620,42621],"valid"],[[42622,42622],"valid",[],"NV8"],[[42623,42623],"valid"],[[42624,42624],"mapped",[42625]],[[42625,42625],"valid"],[[42626,42626],"mapped",[42627]],[[42627,42627],"valid"],[[42628,42628],"mapped",[42629]],[[42629,42629],"valid"],[[42630,42630],"mapped",[42631]],[[42631,42631],"valid"],[[42632,42632],"mapped",[42633]],[[42633,42633],"valid"],[[42634,42634],"mapped",[42635]],[[42635,42635],"valid"],[[42636,42636],"mapped",[42637]],[[42637,42637],"valid"],[[42638,42638],"mapped",[42639]],[[42639,42639],"valid"],[[42640,42640],"mapped",[42641]],[[42641,42641],"valid"],[[42642,42642],"mapped",[42643]],[[42643,42643],"valid"],[[42644,42644],"mapped",[42645]],[[42645,42645],"valid"],[[42646,42646],"mapped",[42647]],[[42647,42647],"valid"],[[42648,42648],"mapped",[42649]],[[42649,42649],"valid"],[[42650,42650],"mapped",[42651]],[[42651,42651],"valid"],[[42652,42652],"mapped",[1098]],[[42653,42653],"mapped",[1100]],[[42654,42654],"valid"],[[42655,42655],"valid"],[[42656,42725],"valid"],[[42726,42735],"valid",[],"NV8"],[[42736,42737],"valid"],[[42738,42743],"valid",[],"NV8"],[[42744,42751],"disallowed"],[[42752,42774],"valid",[],"NV8"],[[42775,42778],"valid"],[[42779,42783],"valid"],[[42784,42785],"valid",[],"NV8"],[[42786,42786],"mapped",[42787]],[[42787,42787],"valid"],[[42788,42788],"mapped",[42789]],[[42789,42789],"valid"],[[42790,42790],"mapped",[42791]],[[42791,42791],"valid"],[[42792,42792],"mapped",[42793]],[[42793,42793],"valid"],[[42794,42794],"mapped",[42795]],[[42795,42795],"valid"],[[42796,42796],"mapped",[42797]],[[42797,42797],"valid"],[[42798,42798],"mapped",[42799]],[[42799,42801],"valid"],[[42802,42802],"mapped",[42803]],[[42803,42803],"valid"],[[42804,42804],"mapped",[42805]],[[42805,42805],"valid"],[[42806,42806],"mapped",[42807]],[[42807,42807],"valid"],[[42808,42808],"mapped",[42809]],[[42809,42809],"valid"],[[42810,42810],"mapped",[42811]],[[42811,42811],"valid"],[[42812,42812],"mapped",[42813]],[[42813,42813],"valid"],[[42814,42814],"mapped",[42815]],[[42815,42815],"valid"],[[42816,42816],"mapped",[42817]],[[42817,42817],"valid"],[[42818,42818],"mapped",[42819]],[[42819,42819],"valid"],[[42820,42820],"mapped",[42821]],[[42821,42821],"valid"],[[42822,42822],"mapped",[42823]],[[42823,42823],"valid"],[[42824,42824],"mapped",[42825]],[[42825,42825],"valid"],[[42826,42826],"mapped",[42827]],[[42827,42827],"valid"],[[42828,42828],"mapped",[42829]],[[42829,42829],"valid"],[[42830,42830],"mapped",[42831]],[[42831,42831],"valid"],[[42832,42832],"mapped",[42833]],[[42833,42833],"valid"],[[42834,42834],"mapped",[42835]],[[42835,42835],"valid"],[[42836,42836],"mapped",[42837]],[[42837,42837],"valid"],[[42838,42838],"mapped",[42839]],[[42839,42839],"valid"],[[42840,42840],"mapped",[42841]],[[42841,42841],"valid"],[[42842,42842],"mapped",[42843]],[[42843,42843],"valid"],[[42844,42844],"mapped",[42845]],[[42845,42845],"valid"],[[42846,42846],"mapped",[42847]],[[42847,42847],"valid"],[[42848,42848],"mapped",[42849]],[[42849,42849],"valid"],[[42850,42850],"mapped",[42851]],[[42851,42851],"valid"],[[42852,42852],"mapped",[42853]],[[42853,42853],"valid"],[[42854,42854],"mapped",[42855]],[[42855,42855],"valid"],[[42856,42856],"mapped",[42857]],[[42857,42857],"valid"],[[42858,42858],"mapped",[42859]],[[42859,42859],"valid"],[[42860,42860],"mapped",[42861]],[[42861,42861],"valid"],[[42862,42862],"mapped",[42863]],[[42863,42863],"valid"],[[42864,42864],"mapped",[42863]],[[42865,42872],"valid"],[[42873,42873],"mapped",[42874]],[[42874,42874],"valid"],[[42875,42875],"mapped",[42876]],[[42876,42876],"valid"],[[42877,42877],"mapped",[7545]],[[42878,42878],"mapped",[42879]],[[42879,42879],"valid"],[[42880,42880],"mapped",[42881]],[[42881,42881],"valid"],[[42882,42882],"mapped",[42883]],[[42883,42883],"valid"],[[42884,42884],"mapped",[42885]],[[42885,42885],"valid"],[[42886,42886],"mapped",[42887]],[[42887,42888],"valid"],[[42889,42890],"valid",[],"NV8"],[[42891,42891],"mapped",[42892]],[[42892,42892],"valid"],[[42893,42893],"mapped",[613]],[[42894,42894],"valid"],[[42895,42895],"valid"],[[42896,42896],"mapped",[42897]],[[42897,42897],"valid"],[[42898,42898],"mapped",[42899]],[[42899,42899],"valid"],[[42900,42901],"valid"],[[42902,42902],"mapped",[42903]],[[42903,42903],"valid"],[[42904,42904],"mapped",[42905]],[[42905,42905],"valid"],[[42906,42906],"mapped",[42907]],[[42907,42907],"valid"],[[42908,42908],"mapped",[42909]],[[42909,42909],"valid"],[[42910,42910],"mapped",[42911]],[[42911,42911],"valid"],[[42912,42912],"mapped",[42913]],[[42913,42913],"valid"],[[42914,42914],"mapped",[42915]],[[42915,42915],"valid"],[[42916,42916],"mapped",[42917]],[[42917,42917],"valid"],[[42918,42918],"mapped",[42919]],[[42919,42919],"valid"],[[42920,42920],"mapped",[42921]],[[42921,42921],"valid"],[[42922,42922],"mapped",[614]],[[42923,42923],"mapped",[604]],[[42924,42924],"mapped",[609]],[[42925,42925],"mapped",[620]],[[42926,42927],"disallowed"],[[42928,42928],"mapped",[670]],[[42929,42929],"mapped",[647]],[[42930,42930],"mapped",[669]],[[42931,42931],"mapped",[43859]],[[42932,42932],"mapped",[42933]],[[42933,42933],"valid"],[[42934,42934],"mapped",[42935]],[[42935,42935],"valid"],[[42936,42998],"disallowed"],[[42999,42999],"valid"],[[43000,43000],"mapped",[295]],[[43001,43001],"mapped",[339]],[[43002,43002],"valid"],[[43003,43007],"valid"],[[43008,43047],"valid"],[[43048,43051],"valid",[],"NV8"],[[43052,43055],"disallowed"],[[43056,43065],"valid",[],"NV8"],[[43066,43071],"disallowed"],[[43072,43123],"valid"],[[43124,43127],"valid",[],"NV8"],[[43128,43135],"disallowed"],[[43136,43204],"valid"],[[43205,43213],"disallowed"],[[43214,43215],"valid",[],"NV8"],[[43216,43225],"valid"],[[43226,43231],"disallowed"],[[43232,43255],"valid"],[[43256,43258],"valid",[],"NV8"],[[43259,43259],"valid"],[[43260,43260],"valid",[],"NV8"],[[43261,43261],"valid"],[[43262,43263],"disallowed"],[[43264,43309],"valid"],[[43310,43311],"valid",[],"NV8"],[[43312,43347],"valid"],[[43348,43358],"disallowed"],[[43359,43359],"valid",[],"NV8"],[[43360,43388],"valid",[],"NV8"],[[43389,43391],"disallowed"],[[43392,43456],"valid"],[[43457,43469],"valid",[],"NV8"],[[43470,43470],"disallowed"],[[43471,43481],"valid"],[[43482,43485],"disallowed"],[[43486,43487],"valid",[],"NV8"],[[43488,43518],"valid"],[[43519,43519],"disallowed"],[[43520,43574],"valid"],[[43575,43583],"disallowed"],[[43584,43597],"valid"],[[43598,43599],"disallowed"],[[43600,43609],"valid"],[[43610,43611],"disallowed"],[[43612,43615],"valid",[],"NV8"],[[43616,43638],"valid"],[[43639,43641],"valid",[],"NV8"],[[43642,43643],"valid"],[[43644,43647],"valid"],[[43648,43714],"valid"],[[43715,43738],"disallowed"],[[43739,43741],"valid"],[[43742,43743],"valid",[],"NV8"],[[43744,43759],"valid"],[[43760,43761],"valid",[],"NV8"],[[43762,43766],"valid"],[[43767,43776],"disallowed"],[[43777,43782],"valid"],[[43783,43784],"disallowed"],[[43785,43790],"valid"],[[43791,43792],"disallowed"],[[43793,43798],"valid"],[[43799,43807],"disallowed"],[[43808,43814],"valid"],[[43815,43815],"disallowed"],[[43816,43822],"valid"],[[43823,43823],"disallowed"],[[43824,43866],"valid"],[[43867,43867],"valid",[],"NV8"],[[43868,43868],"mapped",[42791]],[[43869,43869],"mapped",[43831]],[[43870,43870],"mapped",[619]],[[43871,43871],"mapped",[43858]],[[43872,43875],"valid"],[[43876,43877],"valid"],[[43878,43887],"disallowed"],[[43888,43888],"mapped",[5024]],[[43889,43889],"mapped",[5025]],[[43890,43890],"mapped",[5026]],[[43891,43891],"mapped",[5027]],[[43892,43892],"mapped",[5028]],[[43893,43893],"mapped",[5029]],[[43894,43894],"mapped",[5030]],[[43895,43895],"mapped",[5031]],[[43896,43896],"mapped",[5032]],[[43897,43897],"mapped",[5033]],[[43898,43898],"mapped",[5034]],[[43899,43899],"mapped",[5035]],[[43900,43900],"mapped",[5036]],[[43901,43901],"mapped",[5037]],[[43902,43902],"mapped",[5038]],[[43903,43903],"mapped",[5039]],[[43904,43904],"mapped",[5040]],[[43905,43905],"mapped",[5041]],[[43906,43906],"mapped",[5042]],[[43907,43907],"mapped",[5043]],[[43908,43908],"mapped",[5044]],[[43909,43909],"mapped",[5045]],[[43910,43910],"mapped",[5046]],[[43911,43911],"mapped",[5047]],[[43912,43912],"mapped",[5048]],[[43913,43913],"mapped",[5049]],[[43914,43914],"mapped",[5050]],[[43915,43915],"mapped",[5051]],[[43916,43916],"mapped",[5052]],[[43917,43917],"mapped",[5053]],[[43918,43918],"mapped",[5054]],[[43919,43919],"mapped",[5055]],[[43920,43920],"mapped",[5056]],[[43921,43921],"mapped",[5057]],[[43922,43922],"mapped",[5058]],[[43923,43923],"mapped",[5059]],[[43924,43924],"mapped",[5060]],[[43925,43925],"mapped",[5061]],[[43926,43926],"mapped",[5062]],[[43927,43927],"mapped",[5063]],[[43928,43928],"mapped",[5064]],[[43929,43929],"mapped",[5065]],[[43930,43930],"mapped",[5066]],[[43931,43931],"mapped",[5067]],[[43932,43932],"mapped",[5068]],[[43933,43933],"mapped",[5069]],[[43934,43934],"mapped",[5070]],[[43935,43935],"mapped",[5071]],[[43936,43936],"mapped",[5072]],[[43937,43937],"mapped",[5073]],[[43938,43938],"mapped",[5074]],[[43939,43939],"mapped",[5075]],[[43940,43940],"mapped",[5076]],[[43941,43941],"mapped",[5077]],[[43942,43942],"mapped",[5078]],[[43943,43943],"mapped",[5079]],[[43944,43944],"mapped",[5080]],[[43945,43945],"mapped",[5081]],[[43946,43946],"mapped",[5082]],[[43947,43947],"mapped",[5083]],[[43948,43948],"mapped",[5084]],[[43949,43949],"mapped",[5085]],[[43950,43950],"mapped",[5086]],[[43951,43951],"mapped",[5087]],[[43952,43952],"mapped",[5088]],[[43953,43953],"mapped",[5089]],[[43954,43954],"mapped",[5090]],[[43955,43955],"mapped",[5091]],[[43956,43956],"mapped",[5092]],[[43957,43957],"mapped",[5093]],[[43958,43958],"mapped",[5094]],[[43959,43959],"mapped",[5095]],[[43960,43960],"mapped",[5096]],[[43961,43961],"mapped",[5097]],[[43962,43962],"mapped",[5098]],[[43963,43963],"mapped",[5099]],[[43964,43964],"mapped",[5100]],[[43965,43965],"mapped",[5101]],[[43966,43966],"mapped",[5102]],[[43967,43967],"mapped",[5103]],[[43968,44010],"valid"],[[44011,44011],"valid",[],"NV8"],[[44012,44013],"valid"],[[44014,44015],"disallowed"],[[44016,44025],"valid"],[[44026,44031],"disallowed"],[[44032,55203],"valid"],[[55204,55215],"disallowed"],[[55216,55238],"valid",[],"NV8"],[[55239,55242],"disallowed"],[[55243,55291],"valid",[],"NV8"],[[55292,55295],"disallowed"],[[55296,57343],"disallowed"],[[57344,63743],"disallowed"],[[63744,63744],"mapped",[35912]],[[63745,63745],"mapped",[26356]],[[63746,63746],"mapped",[36554]],[[63747,63747],"mapped",[36040]],[[63748,63748],"mapped",[28369]],[[63749,63749],"mapped",[20018]],[[63750,63750],"mapped",[21477]],[[63751,63752],"mapped",[40860]],[[63753,63753],"mapped",[22865]],[[63754,63754],"mapped",[37329]],[[63755,63755],"mapped",[21895]],[[63756,63756],"mapped",[22856]],[[63757,63757],"mapped",[25078]],[[63758,63758],"mapped",[30313]],[[63759,63759],"mapped",[32645]],[[63760,63760],"mapped",[34367]],[[63761,63761],"mapped",[34746]],[[63762,63762],"mapped",[35064]],[[63763,63763],"mapped",[37007]],[[63764,63764],"mapped",[27138]],[[63765,63765],"mapped",[27931]],[[63766,63766],"mapped",[28889]],[[63767,63767],"mapped",[29662]],[[63768,63768],"mapped",[33853]],[[63769,63769],"mapped",[37226]],[[63770,63770],"mapped",[39409]],[[63771,63771],"mapped",[20098]],[[63772,63772],"mapped",[21365]],[[63773,63773],"mapped",[27396]],[[63774,63774],"mapped",[29211]],[[63775,63775],"mapped",[34349]],[[63776,63776],"mapped",[40478]],[[63777,63777],"mapped",[23888]],[[63778,63778],"mapped",[28651]],[[63779,63779],"mapped",[34253]],[[63780,63780],"mapped",[35172]],[[63781,63781],"mapped",[25289]],[[63782,63782],"mapped",[33240]],[[63783,63783],"mapped",[34847]],[[63784,63784],"mapped",[24266]],[[63785,63785],"mapped",[26391]],[[63786,63786],"mapped",[28010]],[[63787,63787],"mapped",[29436]],[[63788,63788],"mapped",[37070]],[[63789,63789],"mapped",[20358]],[[63790,63790],"mapped",[20919]],[[63791,63791],"mapped",[21214]],[[63792,63792],"mapped",[25796]],[[63793,63793],"mapped",[27347]],[[63794,63794],"mapped",[29200]],[[63795,63795],"mapped",[30439]],[[63796,63796],"mapped",[32769]],[[63797,63797],"mapped",[34310]],[[63798,63798],"mapped",[34396]],[[63799,63799],"mapped",[36335]],[[63800,63800],"mapped",[38706]],[[63801,63801],"mapped",[39791]],[[63802,63802],"mapped",[40442]],[[63803,63803],"mapped",[30860]],[[63804,63804],"mapped",[31103]],[[63805,63805],"mapped",[32160]],[[63806,63806],"mapped",[33737]],[[63807,63807],"mapped",[37636]],[[63808,63808],"mapped",[40575]],[[63809,63809],"mapped",[35542]],[[63810,63810],"mapped",[22751]],[[63811,63811],"mapped",[24324]],[[63812,63812],"mapped",[31840]],[[63813,63813],"mapped",[32894]],[[63814,63814],"mapped",[29282]],[[63815,63815],"mapped",[30922]],[[63816,63816],"mapped",[36034]],[[63817,63817],"mapped",[38647]],[[63818,63818],"mapped",[22744]],[[63819,63819],"mapped",[23650]],[[63820,63820],"mapped",[27155]],[[63821,63821],"mapped",[28122]],[[63822,63822],"mapped",[28431]],[[63823,63823],"mapped",[32047]],[[63824,63824],"mapped",[32311]],[[63825,63825],"mapped",[38475]],[[63826,63826],"mapped",[21202]],[[63827,63827],"mapped",[32907]],[[63828,63828],"mapped",[20956]],[[63829,63829],"mapped",[20940]],[[63830,63830],"mapped",[31260]],[[63831,63831],"mapped",[32190]],[[63832,63832],"mapped",[33777]],[[63833,63833],"mapped",[38517]],[[63834,63834],"mapped",[35712]],[[63835,63835],"mapped",[25295]],[[63836,63836],"mapped",[27138]],[[63837,63837],"mapped",[35582]],[[63838,63838],"mapped",[20025]],[[63839,63839],"mapped",[23527]],[[63840,63840],"mapped",[24594]],[[63841,63841],"mapped",[29575]],[[63842,63842],"mapped",[30064]],[[63843,63843],"mapped",[21271]],[[63844,63844],"mapped",[30971]],[[63845,63845],"mapped",[20415]],[[63846,63846],"mapped",[24489]],[[63847,63847],"mapped",[19981]],[[63848,63848],"mapped",[27852]],[[63849,63849],"mapped",[25976]],[[63850,63850],"mapped",[32034]],[[63851,63851],"mapped",[21443]],[[63852,63852],"mapped",[22622]],[[63853,63853],"mapped",[30465]],[[63854,63854],"mapped",[33865]],[[63855,63855],"mapped",[35498]],[[63856,63856],"mapped",[27578]],[[63857,63857],"mapped",[36784]],[[63858,63858],"mapped",[27784]],[[63859,63859],"mapped",[25342]],[[63860,63860],"mapped",[33509]],[[63861,63861],"mapped",[25504]],[[63862,63862],"mapped",[30053]],[[63863,63863],"mapped",[20142]],[[63864,63864],"mapped",[20841]],[[63865,63865],"mapped",[20937]],[[63866,63866],"mapped",[26753]],[[63867,63867],"mapped",[31975]],[[63868,63868],"mapped",[33391]],[[63869,63869],"mapped",[35538]],[[63870,63870],"mapped",[37327]],[[63871,63871],"mapped",[21237]],[[63872,63872],"mapped",[21570]],[[63873,63873],"mapped",[22899]],[[63874,63874],"mapped",[24300]],[[63875,63875],"mapped",[26053]],[[63876,63876],"mapped",[28670]],[[63877,63877],"mapped",[31018]],[[63878,63878],"mapped",[38317]],[[63879,63879],"mapped",[39530]],[[63880,63880],"mapped",[40599]],[[63881,63881],"mapped",[40654]],[[63882,63882],"mapped",[21147]],[[63883,63883],"mapped",[26310]],[[63884,63884],"mapped",[27511]],[[63885,63885],"mapped",[36706]],[[63886,63886],"mapped",[24180]],[[63887,63887],"mapped",[24976]],[[63888,63888],"mapped",[25088]],[[63889,63889],"mapped",[25754]],[[63890,63890],"mapped",[28451]],[[63891,63891],"mapped",[29001]],[[63892,63892],"mapped",[29833]],[[63893,63893],"mapped",[31178]],[[63894,63894],"mapped",[32244]],[[63895,63895],"mapped",[32879]],[[63896,63896],"mapped",[36646]],[[63897,63897],"mapped",[34030]],[[63898,63898],"mapped",[36899]],[[63899,63899],"mapped",[37706]],[[63900,63900],"mapped",[21015]],[[63901,63901],"mapped",[21155]],[[63902,63902],"mapped",[21693]],[[63903,63903],"mapped",[28872]],[[63904,63904],"mapped",[35010]],[[63905,63905],"mapped",[35498]],[[63906,63906],"mapped",[24265]],[[63907,63907],"mapped",[24565]],[[63908,63908],"mapped",[25467]],[[63909,63909],"mapped",[27566]],[[63910,63910],"mapped",[31806]],[[63911,63911],"mapped",[29557]],[[63912,63912],"mapped",[20196]],[[63913,63913],"mapped",[22265]],[[63914,63914],"mapped",[23527]],[[63915,63915],"mapped",[23994]],[[63916,63916],"mapped",[24604]],[[63917,63917],"mapped",[29618]],[[63918,63918],"mapped",[29801]],[[63919,63919],"mapped",[32666]],[[63920,63920],"mapped",[32838]],[[63921,63921],"mapped",[37428]],[[63922,63922],"mapped",[38646]],[[63923,63923],"mapped",[38728]],[[63924,63924],"mapped",[38936]],[[63925,63925],"mapped",[20363]],[[63926,63926],"mapped",[31150]],[[63927,63927],"mapped",[37300]],[[63928,63928],"mapped",[38584]],[[63929,63929],"mapped",[24801]],[[63930,63930],"mapped",[20102]],[[63931,63931],"mapped",[20698]],[[63932,63932],"mapped",[23534]],[[63933,63933],"mapped",[23615]],[[63934,63934],"mapped",[26009]],[[63935,63935],"mapped",[27138]],[[63936,63936],"mapped",[29134]],[[63937,63937],"mapped",[30274]],[[63938,63938],"mapped",[34044]],[[63939,63939],"mapped",[36988]],[[63940,63940],"mapped",[40845]],[[63941,63941],"mapped",[26248]],[[63942,63942],"mapped",[38446]],[[63943,63943],"mapped",[21129]],[[63944,63944],"mapped",[26491]],[[63945,63945],"mapped",[26611]],[[63946,63946],"mapped",[27969]],[[63947,63947],"mapped",[28316]],[[63948,63948],"mapped",[29705]],[[63949,63949],"mapped",[30041]],[[63950,63950],"mapped",[30827]],[[63951,63951],"mapped",[32016]],[[63952,63952],"mapped",[39006]],[[63953,63953],"mapped",[20845]],[[63954,63954],"mapped",[25134]],[[63955,63955],"mapped",[38520]],[[63956,63956],"mapped",[20523]],[[63957,63957],"mapped",[23833]],[[63958,63958],"mapped",[28138]],[[63959,63959],"mapped",[36650]],[[63960,63960],"mapped",[24459]],[[63961,63961],"mapped",[24900]],[[63962,63962],"mapped",[26647]],[[63963,63963],"mapped",[29575]],[[63964,63964],"mapped",[38534]],[[63965,63965],"mapped",[21033]],[[63966,63966],"mapped",[21519]],[[63967,63967],"mapped",[23653]],[[63968,63968],"mapped",[26131]],[[63969,63969],"mapped",[26446]],[[63970,63970],"mapped",[26792]],[[63971,63971],"mapped",[27877]],[[63972,63972],"mapped",[29702]],[[63973,63973],"mapped",[30178]],[[63974,63974],"mapped",[32633]],[[63975,63975],"mapped",[35023]],[[63976,63976],"mapped",[35041]],[[63977,63977],"mapped",[37324]],[[63978,63978],"mapped",[38626]],[[63979,63979],"mapped",[21311]],[[63980,63980],"mapped",[28346]],[[63981,63981],"mapped",[21533]],[[63982,63982],"mapped",[29136]],[[63983,63983],"mapped",[29848]],[[63984,63984],"mapped",[34298]],[[63985,63985],"mapped",[38563]],[[63986,63986],"mapped",[40023]],[[63987,63987],"mapped",[40607]],[[63988,63988],"mapped",[26519]],[[63989,63989],"mapped",[28107]],[[63990,63990],"mapped",[33256]],[[63991,63991],"mapped",[31435]],[[63992,63992],"mapped",[31520]],[[63993,63993],"mapped",[31890]],[[63994,63994],"mapped",[29376]],[[63995,63995],"mapped",[28825]],[[63996,63996],"mapped",[35672]],[[63997,63997],"mapped",[20160]],[[63998,63998],"mapped",[33590]],[[63999,63999],"mapped",[21050]],[[64000,64000],"mapped",[20999]],[[64001,64001],"mapped",[24230]],[[64002,64002],"mapped",[25299]],[[64003,64003],"mapped",[31958]],[[64004,64004],"mapped",[23429]],[[64005,64005],"mapped",[27934]],[[64006,64006],"mapped",[26292]],[[64007,64007],"mapped",[36667]],[[64008,64008],"mapped",[34892]],[[64009,64009],"mapped",[38477]],[[64010,64010],"mapped",[35211]],[[64011,64011],"mapped",[24275]],[[64012,64012],"mapped",[20800]],[[64013,64013],"mapped",[21952]],[[64014,64015],"valid"],[[64016,64016],"mapped",[22618]],[[64017,64017],"valid"],[[64018,64018],"mapped",[26228]],[[64019,64020],"valid"],[[64021,64021],"mapped",[20958]],[[64022,64022],"mapped",[29482]],[[64023,64023],"mapped",[30410]],[[64024,64024],"mapped",[31036]],[[64025,64025],"mapped",[31070]],[[64026,64026],"mapped",[31077]],[[64027,64027],"mapped",[31119]],[[64028,64028],"mapped",[38742]],[[64029,64029],"mapped",[31934]],[[64030,64030],"mapped",[32701]],[[64031,64031],"valid"],[[64032,64032],"mapped",[34322]],[[64033,64033],"valid"],[[64034,64034],"mapped",[35576]],[[64035,64036],"valid"],[[64037,64037],"mapped",[36920]],[[64038,64038],"mapped",[37117]],[[64039,64041],"valid"],[[64042,64042],"mapped",[39151]],[[64043,64043],"mapped",[39164]],[[64044,64044],"mapped",[39208]],[[64045,64045],"mapped",[40372]],[[64046,64046],"mapped",[37086]],[[64047,64047],"mapped",[38583]],[[64048,64048],"mapped",[20398]],[[64049,64049],"mapped",[20711]],[[64050,64050],"mapped",[20813]],[[64051,64051],"mapped",[21193]],[[64052,64052],"mapped",[21220]],[[64053,64053],"mapped",[21329]],[[64054,64054],"mapped",[21917]],[[64055,64055],"mapped",[22022]],[[64056,64056],"mapped",[22120]],[[64057,64057],"mapped",[22592]],[[64058,64058],"mapped",[22696]],[[64059,64059],"mapped",[23652]],[[64060,64060],"mapped",[23662]],[[64061,64061],"mapped",[24724]],[[64062,64062],"mapped",[24936]],[[64063,64063],"mapped",[24974]],[[64064,64064],"mapped",[25074]],[[64065,64065],"mapped",[25935]],[[64066,64066],"mapped",[26082]],[[64067,64067],"mapped",[26257]],[[64068,64068],"mapped",[26757]],[[64069,64069],"mapped",[28023]],[[64070,64070],"mapped",[28186]],[[64071,64071],"mapped",[28450]],[[64072,64072],"mapped",[29038]],[[64073,64073],"mapped",[29227]],[[64074,64074],"mapped",[29730]],[[64075,64075],"mapped",[30865]],[[64076,64076],"mapped",[31038]],[[64077,64077],"mapped",[31049]],[[64078,64078],"mapped",[31048]],[[64079,64079],"mapped",[31056]],[[64080,64080],"mapped",[31062]],[[64081,64081],"mapped",[31069]],[[64082,64082],"mapped",[31117]],[[64083,64083],"mapped",[31118]],[[64084,64084],"mapped",[31296]],[[64085,64085],"mapped",[31361]],[[64086,64086],"mapped",[31680]],[[64087,64087],"mapped",[32244]],[[64088,64088],"mapped",[32265]],[[64089,64089],"mapped",[32321]],[[64090,64090],"mapped",[32626]],[[64091,64091],"mapped",[32773]],[[64092,64092],"mapped",[33261]],[[64093,64094],"mapped",[33401]],[[64095,64095],"mapped",[33879]],[[64096,64096],"mapped",[35088]],[[64097,64097],"mapped",[35222]],[[64098,64098],"mapped",[35585]],[[64099,64099],"mapped",[35641]],[[64100,64100],"mapped",[36051]],[[64101,64101],"mapped",[36104]],[[64102,64102],"mapped",[36790]],[[64103,64103],"mapped",[36920]],[[64104,64104],"mapped",[38627]],[[64105,64105],"mapped",[38911]],[[64106,64106],"mapped",[38971]],[[64107,64107],"mapped",[24693]],[[64108,64108],"mapped",[148206]],[[64109,64109],"mapped",[33304]],[[64110,64111],"disallowed"],[[64112,64112],"mapped",[20006]],[[64113,64113],"mapped",[20917]],[[64114,64114],"mapped",[20840]],[[64115,64115],"mapped",[20352]],[[64116,64116],"mapped",[20805]],[[64117,64117],"mapped",[20864]],[[64118,64118],"mapped",[21191]],[[64119,64119],"mapped",[21242]],[[64120,64120],"mapped",[21917]],[[64121,64121],"mapped",[21845]],[[64122,64122],"mapped",[21913]],[[64123,64123],"mapped",[21986]],[[64124,64124],"mapped",[22618]],[[64125,64125],"mapped",[22707]],[[64126,64126],"mapped",[22852]],[[64127,64127],"mapped",[22868]],[[64128,64128],"mapped",[23138]],[[64129,64129],"mapped",[23336]],[[64130,64130],"mapped",[24274]],[[64131,64131],"mapped",[24281]],[[64132,64132],"mapped",[24425]],[[64133,64133],"mapped",[24493]],[[64134,64134],"mapped",[24792]],[[64135,64135],"mapped",[24910]],[[64136,64136],"mapped",[24840]],[[64137,64137],"mapped",[24974]],[[64138,64138],"mapped",[24928]],[[64139,64139],"mapped",[25074]],[[64140,64140],"mapped",[25140]],[[64141,64141],"mapped",[25540]],[[64142,64142],"mapped",[25628]],[[64143,64143],"mapped",[25682]],[[64144,64144],"mapped",[25942]],[[64145,64145],"mapped",[26228]],[[64146,64146],"mapped",[26391]],[[64147,64147],"mapped",[26395]],[[64148,64148],"mapped",[26454]],[[64149,64149],"mapped",[27513]],[[64150,64150],"mapped",[27578]],[[64151,64151],"mapped",[27969]],[[64152,64152],"mapped",[28379]],[[64153,64153],"mapped",[28363]],[[64154,64154],"mapped",[28450]],[[64155,64155],"mapped",[28702]],[[64156,64156],"mapped",[29038]],[[64157,64157],"mapped",[30631]],[[64158,64158],"mapped",[29237]],[[64159,64159],"mapped",[29359]],[[64160,64160],"mapped",[29482]],[[64161,64161],"mapped",[29809]],[[64162,64162],"mapped",[29958]],[[64163,64163],"mapped",[30011]],[[64164,64164],"mapped",[30237]],[[64165,64165],"mapped",[30239]],[[64166,64166],"mapped",[30410]],[[64167,64167],"mapped",[30427]],[[64168,64168],"mapped",[30452]],[[64169,64169],"mapped",[30538]],[[64170,64170],"mapped",[30528]],[[64171,64171],"mapped",[30924]],[[64172,64172],"mapped",[31409]],[[64173,64173],"mapped",[31680]],[[64174,64174],"mapped",[31867]],[[64175,64175],"mapped",[32091]],[[64176,64176],"mapped",[32244]],[[64177,64177],"mapped",[32574]],[[64178,64178],"mapped",[32773]],[[64179,64179],"mapped",[33618]],[[64180,64180],"mapped",[33775]],[[64181,64181],"mapped",[34681]],[[64182,64182],"mapped",[35137]],[[64183,64183],"mapped",[35206]],[[64184,64184],"mapped",[35222]],[[64185,64185],"mapped",[35519]],[[64186,64186],"mapped",[35576]],[[64187,64187],"mapped",[35531]],[[64188,64188],"mapped",[35585]],[[64189,64189],"mapped",[35582]],[[64190,64190],"mapped",[35565]],[[64191,64191],"mapped",[35641]],[[64192,64192],"mapped",[35722]],[[64193,64193],"mapped",[36104]],[[64194,64194],"mapped",[36664]],[[64195,64195],"mapped",[36978]],[[64196,64196],"mapped",[37273]],[[64197,64197],"mapped",[37494]],[[64198,64198],"mapped",[38524]],[[64199,64199],"mapped",[38627]],[[64200,64200],"mapped",[38742]],[[64201,64201],"mapped",[38875]],[[64202,64202],"mapped",[38911]],[[64203,64203],"mapped",[38923]],[[64204,64204],"mapped",[38971]],[[64205,64205],"mapped",[39698]],[[64206,64206],"mapped",[40860]],[[64207,64207],"mapped",[141386]],[[64208,64208],"mapped",[141380]],[[64209,64209],"mapped",[144341]],[[64210,64210],"mapped",[15261]],[[64211,64211],"mapped",[16408]],[[64212,64212],"mapped",[16441]],[[64213,64213],"mapped",[152137]],[[64214,64214],"mapped",[154832]],[[64215,64215],"mapped",[163539]],[[64216,64216],"mapped",[40771]],[[64217,64217],"mapped",[40846]],[[64218,64255],"disallowed"],[[64256,64256],"mapped",[102,102]],[[64257,64257],"mapped",[102,105]],[[64258,64258],"mapped",[102,108]],[[64259,64259],"mapped",[102,102,105]],[[64260,64260],"mapped",[102,102,108]],[[64261,64262],"mapped",[115,116]],[[64263,64274],"disallowed"],[[64275,64275],"mapped",[1396,1398]],[[64276,64276],"mapped",[1396,1381]],[[64277,64277],"mapped",[1396,1387]],[[64278,64278],"mapped",[1406,1398]],[[64279,64279],"mapped",[1396,1389]],[[64280,64284],"disallowed"],[[64285,64285],"mapped",[1497,1460]],[[64286,64286],"valid"],[[64287,64287],"mapped",[1522,1463]],[[64288,64288],"mapped",[1506]],[[64289,64289],"mapped",[1488]],[[64290,64290],"mapped",[1491]],[[64291,64291],"mapped",[1492]],[[64292,64292],"mapped",[1499]],[[64293,64293],"mapped",[1500]],[[64294,64294],"mapped",[1501]],[[64295,64295],"mapped",[1512]],[[64296,64296],"mapped",[1514]],[[64297,64297],"disallowed_STD3_mapped",[43]],[[64298,64298],"mapped",[1513,1473]],[[64299,64299],"mapped",[1513,1474]],[[64300,64300],"mapped",[1513,1468,1473]],[[64301,64301],"mapped",[1513,1468,1474]],[[64302,64302],"mapped",[1488,1463]],[[64303,64303],"mapped",[1488,1464]],[[64304,64304],"mapped",[1488,1468]],[[64305,64305],"mapped",[1489,1468]],[[64306,64306],"mapped",[1490,1468]],[[64307,64307],"mapped",[1491,1468]],[[64308,64308],"mapped",[1492,1468]],[[64309,64309],"mapped",[1493,1468]],[[64310,64310],"mapped",[1494,1468]],[[64311,64311],"disallowed"],[[64312,64312],"mapped",[1496,1468]],[[64313,64313],"mapped",[1497,1468]],[[64314,64314],"mapped",[1498,1468]],[[64315,64315],"mapped",[1499,1468]],[[64316,64316],"mapped",[1500,1468]],[[64317,64317],"disallowed"],[[64318,64318],"mapped",[1502,1468]],[[64319,64319],"disallowed"],[[64320,64320],"mapped",[1504,1468]],[[64321,64321],"mapped",[1505,1468]],[[64322,64322],"disallowed"],[[64323,64323],"mapped",[1507,1468]],[[64324,64324],"mapped",[1508,1468]],[[64325,64325],"disallowed"],[[64326,64326],"mapped",[1510,1468]],[[64327,64327],"mapped",[1511,1468]],[[64328,64328],"mapped",[1512,1468]],[[64329,64329],"mapped",[1513,1468]],[[64330,64330],"mapped",[1514,1468]],[[64331,64331],"mapped",[1493,1465]],[[64332,64332],"mapped",[1489,1471]],[[64333,64333],"mapped",[1499,1471]],[[64334,64334],"mapped",[1508,1471]],[[64335,64335],"mapped",[1488,1500]],[[64336,64337],"mapped",[1649]],[[64338,64341],"mapped",[1659]],[[64342,64345],"mapped",[1662]],[[64346,64349],"mapped",[1664]],[[64350,64353],"mapped",[1658]],[[64354,64357],"mapped",[1663]],[[64358,64361],"mapped",[1657]],[[64362,64365],"mapped",[1700]],[[64366,64369],"mapped",[1702]],[[64370,64373],"mapped",[1668]],[[64374,64377],"mapped",[1667]],[[64378,64381],"mapped",[1670]],[[64382,64385],"mapped",[1671]],[[64386,64387],"mapped",[1677]],[[64388,64389],"mapped",[1676]],[[64390,64391],"mapped",[1678]],[[64392,64393],"mapped",[1672]],[[64394,64395],"mapped",[1688]],[[64396,64397],"mapped",[1681]],[[64398,64401],"mapped",[1705]],[[64402,64405],"mapped",[1711]],[[64406,64409],"mapped",[1715]],[[64410,64413],"mapped",[1713]],[[64414,64415],"mapped",[1722]],[[64416,64419],"mapped",[1723]],[[64420,64421],"mapped",[1728]],[[64422,64425],"mapped",[1729]],[[64426,64429],"mapped",[1726]],[[64430,64431],"mapped",[1746]],[[64432,64433],"mapped",[1747]],[[64434,64449],"valid",[],"NV8"],[[64450,64466],"disallowed"],[[64467,64470],"mapped",[1709]],[[64471,64472],"mapped",[1735]],[[64473,64474],"mapped",[1734]],[[64475,64476],"mapped",[1736]],[[64477,64477],"mapped",[1735,1652]],[[64478,64479],"mapped",[1739]],[[64480,64481],"mapped",[1733]],[[64482,64483],"mapped",[1737]],[[64484,64487],"mapped",[1744]],[[64488,64489],"mapped",[1609]],[[64490,64491],"mapped",[1574,1575]],[[64492,64493],"mapped",[1574,1749]],[[64494,64495],"mapped",[1574,1608]],[[64496,64497],"mapped",[1574,1735]],[[64498,64499],"mapped",[1574,1734]],[[64500,64501],"mapped",[1574,1736]],[[64502,64504],"mapped",[1574,1744]],[[64505,64507],"mapped",[1574,1609]],[[64508,64511],"mapped",[1740]],[[64512,64512],"mapped",[1574,1580]],[[64513,64513],"mapped",[1574,1581]],[[64514,64514],"mapped",[1574,1605]],[[64515,64515],"mapped",[1574,1609]],[[64516,64516],"mapped",[1574,1610]],[[64517,64517],"mapped",[1576,1580]],[[64518,64518],"mapped",[1576,1581]],[[64519,64519],"mapped",[1576,1582]],[[64520,64520],"mapped",[1576,1605]],[[64521,64521],"mapped",[1576,1609]],[[64522,64522],"mapped",[1576,1610]],[[64523,64523],"mapped",[1578,1580]],[[64524,64524],"mapped",[1578,1581]],[[64525,64525],"mapped",[1578,1582]],[[64526,64526],"mapped",[1578,1605]],[[64527,64527],"mapped",[1578,1609]],[[64528,64528],"mapped",[1578,1610]],[[64529,64529],"mapped",[1579,1580]],[[64530,64530],"mapped",[1579,1605]],[[64531,64531],"mapped",[1579,1609]],[[64532,64532],"mapped",[1579,1610]],[[64533,64533],"mapped",[1580,1581]],[[64534,64534],"mapped",[1580,1605]],[[64535,64535],"mapped",[1581,1580]],[[64536,64536],"mapped",[1581,1605]],[[64537,64537],"mapped",[1582,1580]],[[64538,64538],"mapped",[1582,1581]],[[64539,64539],"mapped",[1582,1605]],[[64540,64540],"mapped",[1587,1580]],[[64541,64541],"mapped",[1587,1581]],[[64542,64542],"mapped",[1587,1582]],[[64543,64543],"mapped",[1587,1605]],[[64544,64544],"mapped",[1589,1581]],[[64545,64545],"mapped",[1589,1605]],[[64546,64546],"mapped",[1590,1580]],[[64547,64547],"mapped",[1590,1581]],[[64548,64548],"mapped",[1590,1582]],[[64549,64549],"mapped",[1590,1605]],[[64550,64550],"mapped",[1591,1581]],[[64551,64551],"mapped",[1591,1605]],[[64552,64552],"mapped",[1592,1605]],[[64553,64553],"mapped",[1593,1580]],[[64554,64554],"mapped",[1593,1605]],[[64555,64555],"mapped",[1594,1580]],[[64556,64556],"mapped",[1594,1605]],[[64557,64557],"mapped",[1601,1580]],[[64558,64558],"mapped",[1601,1581]],[[64559,64559],"mapped",[1601,1582]],[[64560,64560],"mapped",[1601,1605]],[[64561,64561],"mapped",[1601,1609]],[[64562,64562],"mapped",[1601,1610]],[[64563,64563],"mapped",[1602,1581]],[[64564,64564],"mapped",[1602,1605]],[[64565,64565],"mapped",[1602,1609]],[[64566,64566],"mapped",[1602,1610]],[[64567,64567],"mapped",[1603,1575]],[[64568,64568],"mapped",[1603,1580]],[[64569,64569],"mapped",[1603,1581]],[[64570,64570],"mapped",[1603,1582]],[[64571,64571],"mapped",[1603,1604]],[[64572,64572],"mapped",[1603,1605]],[[64573,64573],"mapped",[1603,1609]],[[64574,64574],"mapped",[1603,1610]],[[64575,64575],"mapped",[1604,1580]],[[64576,64576],"mapped",[1604,1581]],[[64577,64577],"mapped",[1604,1582]],[[64578,64578],"mapped",[1604,1605]],[[64579,64579],"mapped",[1604,1609]],[[64580,64580],"mapped",[1604,1610]],[[64581,64581],"mapped",[1605,1580]],[[64582,64582],"mapped",[1605,1581]],[[64583,64583],"mapped",[1605,1582]],[[64584,64584],"mapped",[1605,1605]],[[64585,64585],"mapped",[1605,1609]],[[64586,64586],"mapped",[1605,1610]],[[64587,64587],"mapped",[1606,1580]],[[64588,64588],"mapped",[1606,1581]],[[64589,64589],"mapped",[1606,1582]],[[64590,64590],"mapped",[1606,1605]],[[64591,64591],"mapped",[1606,1609]],[[64592,64592],"mapped",[1606,1610]],[[64593,64593],"mapped",[1607,1580]],[[64594,64594],"mapped",[1607,1605]],[[64595,64595],"mapped",[1607,1609]],[[64596,64596],"mapped",[1607,1610]],[[64597,64597],"mapped",[1610,1580]],[[64598,64598],"mapped",[1610,1581]],[[64599,64599],"mapped",[1610,1582]],[[64600,64600],"mapped",[1610,1605]],[[64601,64601],"mapped",[1610,1609]],[[64602,64602],"mapped",[1610,1610]],[[64603,64603],"mapped",[1584,1648]],[[64604,64604],"mapped",[1585,1648]],[[64605,64605],"mapped",[1609,1648]],[[64606,64606],"disallowed_STD3_mapped",[32,1612,1617]],[[64607,64607],"disallowed_STD3_mapped",[32,1613,1617]],[[64608,64608],"disallowed_STD3_mapped",[32,1614,1617]],[[64609,64609],"disallowed_STD3_mapped",[32,1615,1617]],[[64610,64610],"disallowed_STD3_mapped",[32,1616,1617]],[[64611,64611],"disallowed_STD3_mapped",[32,1617,1648]],[[64612,64612],"mapped",[1574,1585]],[[64613,64613],"mapped",[1574,1586]],[[64614,64614],"mapped",[1574,1605]],[[64615,64615],"mapped",[1574,1606]],[[64616,64616],"mapped",[1574,1609]],[[64617,64617],"mapped",[1574,1610]],[[64618,64618],"mapped",[1576,1585]],[[64619,64619],"mapped",[1576,1586]],[[64620,64620],"mapped",[1576,1605]],[[64621,64621],"mapped",[1576,1606]],[[64622,64622],"mapped",[1576,1609]],[[64623,64623],"mapped",[1576,1610]],[[64624,64624],"mapped",[1578,1585]],[[64625,64625],"mapped",[1578,1586]],[[64626,64626],"mapped",[1578,1605]],[[64627,64627],"mapped",[1578,1606]],[[64628,64628],"mapped",[1578,1609]],[[64629,64629],"mapped",[1578,1610]],[[64630,64630],"mapped",[1579,1585]],[[64631,64631],"mapped",[1579,1586]],[[64632,64632],"mapped",[1579,1605]],[[64633,64633],"mapped",[1579,1606]],[[64634,64634],"mapped",[1579,1609]],[[64635,64635],"mapped",[1579,1610]],[[64636,64636],"mapped",[1601,1609]],[[64637,64637],"mapped",[1601,1610]],[[64638,64638],"mapped",[1602,1609]],[[64639,64639],"mapped",[1602,1610]],[[64640,64640],"mapped",[1603,1575]],[[64641,64641],"mapped",[1603,1604]],[[64642,64642],"mapped",[1603,1605]],[[64643,64643],"mapped",[1603,1609]],[[64644,64644],"mapped",[1603,1610]],[[64645,64645],"mapped",[1604,1605]],[[64646,64646],"mapped",[1604,1609]],[[64647,64647],"mapped",[1604,1610]],[[64648,64648],"mapped",[1605,1575]],[[64649,64649],"mapped",[1605,1605]],[[64650,64650],"mapped",[1606,1585]],[[64651,64651],"mapped",[1606,1586]],[[64652,64652],"mapped",[1606,1605]],[[64653,64653],"mapped",[1606,1606]],[[64654,64654],"mapped",[1606,1609]],[[64655,64655],"mapped",[1606,1610]],[[64656,64656],"mapped",[1609,1648]],[[64657,64657],"mapped",[1610,1585]],[[64658,64658],"mapped",[1610,1586]],[[64659,64659],"mapped",[1610,1605]],[[64660,64660],"mapped",[1610,1606]],[[64661,64661],"mapped",[1610,1609]],[[64662,64662],"mapped",[1610,1610]],[[64663,64663],"mapped",[1574,1580]],[[64664,64664],"mapped",[1574,1581]],[[64665,64665],"mapped",[1574,1582]],[[64666,64666],"mapped",[1574,1605]],[[64667,64667],"mapped",[1574,1607]],[[64668,64668],"mapped",[1576,1580]],[[64669,64669],"mapped",[1576,1581]],[[64670,64670],"mapped",[1576,1582]],[[64671,64671],"mapped",[1576,1605]],[[64672,64672],"mapped",[1576,1607]],[[64673,64673],"mapped",[1578,1580]],[[64674,64674],"mapped",[1578,1581]],[[64675,64675],"mapped",[1578,1582]],[[64676,64676],"mapped",[1578,1605]],[[64677,64677],"mapped",[1578,1607]],[[64678,64678],"mapped",[1579,1605]],[[64679,64679],"mapped",[1580,1581]],[[64680,64680],"mapped",[1580,1605]],[[64681,64681],"mapped",[1581,1580]],[[64682,64682],"mapped",[1581,1605]],[[64683,64683],"mapped",[1582,1580]],[[64684,64684],"mapped",[1582,1605]],[[64685,64685],"mapped",[1587,1580]],[[64686,64686],"mapped",[1587,1581]],[[64687,64687],"mapped",[1587,1582]],[[64688,64688],"mapped",[1587,1605]],[[64689,64689],"mapped",[1589,1581]],[[64690,64690],"mapped",[1589,1582]],[[64691,64691],"mapped",[1589,1605]],[[64692,64692],"mapped",[1590,1580]],[[64693,64693],"mapped",[1590,1581]],[[64694,64694],"mapped",[1590,1582]],[[64695,64695],"mapped",[1590,1605]],[[64696,64696],"mapped",[1591,1581]],[[64697,64697],"mapped",[1592,1605]],[[64698,64698],"mapped",[1593,1580]],[[64699,64699],"mapped",[1593,1605]],[[64700,64700],"mapped",[1594,1580]],[[64701,64701],"mapped",[1594,1605]],[[64702,64702],"mapped",[1601,1580]],[[64703,64703],"mapped",[1601,1581]],[[64704,64704],"mapped",[1601,1582]],[[64705,64705],"mapped",[1601,1605]],[[64706,64706],"mapped",[1602,1581]],[[64707,64707],"mapped",[1602,1605]],[[64708,64708],"mapped",[1603,1580]],[[64709,64709],"mapped",[1603,1581]],[[64710,64710],"mapped",[1603,1582]],[[64711,64711],"mapped",[1603,1604]],[[64712,64712],"mapped",[1603,1605]],[[64713,64713],"mapped",[1604,1580]],[[64714,64714],"mapped",[1604,1581]],[[64715,64715],"mapped",[1604,1582]],[[64716,64716],"mapped",[1604,1605]],[[64717,64717],"mapped",[1604,1607]],[[64718,64718],"mapped",[1605,1580]],[[64719,64719],"mapped",[1605,1581]],[[64720,64720],"mapped",[1605,1582]],[[64721,64721],"mapped",[1605,1605]],[[64722,64722],"mapped",[1606,1580]],[[64723,64723],"mapped",[1606,1581]],[[64724,64724],"mapped",[1606,1582]],[[64725,64725],"mapped",[1606,1605]],[[64726,64726],"mapped",[1606,1607]],[[64727,64727],"mapped",[1607,1580]],[[64728,64728],"mapped",[1607,1605]],[[64729,64729],"mapped",[1607,1648]],[[64730,64730],"mapped",[1610,1580]],[[64731,64731],"mapped",[1610,1581]],[[64732,64732],"mapped",[1610,1582]],[[64733,64733],"mapped",[1610,1605]],[[64734,64734],"mapped",[1610,1607]],[[64735,64735],"mapped",[1574,1605]],[[64736,64736],"mapped",[1574,1607]],[[64737,64737],"mapped",[1576,1605]],[[64738,64738],"mapped",[1576,1607]],[[64739,64739],"mapped",[1578,1605]],[[64740,64740],"mapped",[1578,1607]],[[64741,64741],"mapped",[1579,1605]],[[64742,64742],"mapped",[1579,1607]],[[64743,64743],"mapped",[1587,1605]],[[64744,64744],"mapped",[1587,1607]],[[64745,64745],"mapped",[1588,1605]],[[64746,64746],"mapped",[1588,1607]],[[64747,64747],"mapped",[1603,1604]],[[64748,64748],"mapped",[1603,1605]],[[64749,64749],"mapped",[1604,1605]],[[64750,64750],"mapped",[1606,1605]],[[64751,64751],"mapped",[1606,1607]],[[64752,64752],"mapped",[1610,1605]],[[64753,64753],"mapped",[1610,1607]],[[64754,64754],"mapped",[1600,1614,1617]],[[64755,64755],"mapped",[1600,1615,1617]],[[64756,64756],"mapped",[1600,1616,1617]],[[64757,64757],"mapped",[1591,1609]],[[64758,64758],"mapped",[1591,1610]],[[64759,64759],"mapped",[1593,1609]],[[64760,64760],"mapped",[1593,1610]],[[64761,64761],"mapped",[1594,1609]],[[64762,64762],"mapped",[1594,1610]],[[64763,64763],"mapped",[1587,1609]],[[64764,64764],"mapped",[1587,1610]],[[64765,64765],"mapped",[1588,1609]],[[64766,64766],"mapped",[1588,1610]],[[64767,64767],"mapped",[1581,1609]],[[64768,64768],"mapped",[1581,1610]],[[64769,64769],"mapped",[1580,1609]],[[64770,64770],"mapped",[1580,1610]],[[64771,64771],"mapped",[1582,1609]],[[64772,64772],"mapped",[1582,1610]],[[64773,64773],"mapped",[1589,1609]],[[64774,64774],"mapped",[1589,1610]],[[64775,64775],"mapped",[1590,1609]],[[64776,64776],"mapped",[1590,1610]],[[64777,64777],"mapped",[1588,1580]],[[64778,64778],"mapped",[1588,1581]],[[64779,64779],"mapped",[1588,1582]],[[64780,64780],"mapped",[1588,1605]],[[64781,64781],"mapped",[1588,1585]],[[64782,64782],"mapped",[1587,1585]],[[64783,64783],"mapped",[1589,1585]],[[64784,64784],"mapped",[1590,1585]],[[64785,64785],"mapped",[1591,1609]],[[64786,64786],"mapped",[1591,1610]],[[64787,64787],"mapped",[1593,1609]],[[64788,64788],"mapped",[1593,1610]],[[64789,64789],"mapped",[1594,1609]],[[64790,64790],"mapped",[1594,1610]],[[64791,64791],"mapped",[1587,1609]],[[64792,64792],"mapped",[1587,1610]],[[64793,64793],"mapped",[1588,1609]],[[64794,64794],"mapped",[1588,1610]],[[64795,64795],"mapped",[1581,1609]],[[64796,64796],"mapped",[1581,1610]],[[64797,64797],"mapped",[1580,1609]],[[64798,64798],"mapped",[1580,1610]],[[64799,64799],"mapped",[1582,1609]],[[64800,64800],"mapped",[1582,1610]],[[64801,64801],"mapped",[1589,1609]],[[64802,64802],"mapped",[1589,1610]],[[64803,64803],"mapped",[1590,1609]],[[64804,64804],"mapped",[1590,1610]],[[64805,64805],"mapped",[1588,1580]],[[64806,64806],"mapped",[1588,1581]],[[64807,64807],"mapped",[1588,1582]],[[64808,64808],"mapped",[1588,1605]],[[64809,64809],"mapped",[1588,1585]],[[64810,64810],"mapped",[1587,1585]],[[64811,64811],"mapped",[1589,1585]],[[64812,64812],"mapped",[1590,1585]],[[64813,64813],"mapped",[1588,1580]],[[64814,64814],"mapped",[1588,1581]],[[64815,64815],"mapped",[1588,1582]],[[64816,64816],"mapped",[1588,1605]],[[64817,64817],"mapped",[1587,1607]],[[64818,64818],"mapped",[1588,1607]],[[64819,64819],"mapped",[1591,1605]],[[64820,64820],"mapped",[1587,1580]],[[64821,64821],"mapped",[1587,1581]],[[64822,64822],"mapped",[1587,1582]],[[64823,64823],"mapped",[1588,1580]],[[64824,64824],"mapped",[1588,1581]],[[64825,64825],"mapped",[1588,1582]],[[64826,64826],"mapped",[1591,1605]],[[64827,64827],"mapped",[1592,1605]],[[64828,64829],"mapped",[1575,1611]],[[64830,64831],"valid",[],"NV8"],[[64832,64847],"disallowed"],[[64848,64848],"mapped",[1578,1580,1605]],[[64849,64850],"mapped",[1578,1581,1580]],[[64851,64851],"mapped",[1578,1581,1605]],[[64852,64852],"mapped",[1578,1582,1605]],[[64853,64853],"mapped",[1578,1605,1580]],[[64854,64854],"mapped",[1578,1605,1581]],[[64855,64855],"mapped",[1578,1605,1582]],[[64856,64857],"mapped",[1580,1605,1581]],[[64858,64858],"mapped",[1581,1605,1610]],[[64859,64859],"mapped",[1581,1605,1609]],[[64860,64860],"mapped",[1587,1581,1580]],[[64861,64861],"mapped",[1587,1580,1581]],[[64862,64862],"mapped",[1587,1580,1609]],[[64863,64864],"mapped",[1587,1605,1581]],[[64865,64865],"mapped",[1587,1605,1580]],[[64866,64867],"mapped",[1587,1605,1605]],[[64868,64869],"mapped",[1589,1581,1581]],[[64870,64870],"mapped",[1589,1605,1605]],[[64871,64872],"mapped",[1588,1581,1605]],[[64873,64873],"mapped",[1588,1580,1610]],[[64874,64875],"mapped",[1588,1605,1582]],[[64876,64877],"mapped",[1588,1605,1605]],[[64878,64878],"mapped",[1590,1581,1609]],[[64879,64880],"mapped",[1590,1582,1605]],[[64881,64882],"mapped",[1591,1605,1581]],[[64883,64883],"mapped",[1591,1605,1605]],[[64884,64884],"mapped",[1591,1605,1610]],[[64885,64885],"mapped",[1593,1580,1605]],[[64886,64887],"mapped",[1593,1605,1605]],[[64888,64888],"mapped",[1593,1605,1609]],[[64889,64889],"mapped",[1594,1605,1605]],[[64890,64890],"mapped",[1594,1605,1610]],[[64891,64891],"mapped",[1594,1605,1609]],[[64892,64893],"mapped",[1601,1582,1605]],[[64894,64894],"mapped",[1602,1605,1581]],[[64895,64895],"mapped",[1602,1605,1605]],[[64896,64896],"mapped",[1604,1581,1605]],[[64897,64897],"mapped",[1604,1581,1610]],[[64898,64898],"mapped",[1604,1581,1609]],[[64899,64900],"mapped",[1604,1580,1580]],[[64901,64902],"mapped",[1604,1582,1605]],[[64903,64904],"mapped",[1604,1605,1581]],[[64905,64905],"mapped",[1605,1581,1580]],[[64906,64906],"mapped",[1605,1581,1605]],[[64907,64907],"mapped",[1605,1581,1610]],[[64908,64908],"mapped",[1605,1580,1581]],[[64909,64909],"mapped",[1605,1580,1605]],[[64910,64910],"mapped",[1605,1582,1580]],[[64911,64911],"mapped",[1605,1582,1605]],[[64912,64913],"disallowed"],[[64914,64914],"mapped",[1605,1580,1582]],[[64915,64915],"mapped",[1607,1605,1580]],[[64916,64916],"mapped",[1607,1605,1605]],[[64917,64917],"mapped",[1606,1581,1605]],[[64918,64918],"mapped",[1606,1581,1609]],[[64919,64920],"mapped",[1606,1580,1605]],[[64921,64921],"mapped",[1606,1580,1609]],[[64922,64922],"mapped",[1606,1605,1610]],[[64923,64923],"mapped",[1606,1605,1609]],[[64924,64925],"mapped",[1610,1605,1605]],[[64926,64926],"mapped",[1576,1582,1610]],[[64927,64927],"mapped",[1578,1580,1610]],[[64928,64928],"mapped",[1578,1580,1609]],[[64929,64929],"mapped",[1578,1582,1610]],[[64930,64930],"mapped",[1578,1582,1609]],[[64931,64931],"mapped",[1578,1605,1610]],[[64932,64932],"mapped",[1578,1605,1609]],[[64933,64933],"mapped",[1580,1605,1610]],[[64934,64934],"mapped",[1580,1581,1609]],[[64935,64935],"mapped",[1580,1605,1609]],[[64936,64936],"mapped",[1587,1582,1609]],[[64937,64937],"mapped",[1589,1581,1610]],[[64938,64938],"mapped",[1588,1581,1610]],[[64939,64939],"mapped",[1590,1581,1610]],[[64940,64940],"mapped",[1604,1580,1610]],[[64941,64941],"mapped",[1604,1605,1610]],[[64942,64942],"mapped",[1610,1581,1610]],[[64943,64943],"mapped",[1610,1580,1610]],[[64944,64944],"mapped",[1610,1605,1610]],[[64945,64945],"mapped",[1605,1605,1610]],[[64946,64946],"mapped",[1602,1605,1610]],[[64947,64947],"mapped",[1606,1581,1610]],[[64948,64948],"mapped",[1602,1605,1581]],[[64949,64949],"mapped",[1604,1581,1605]],[[64950,64950],"mapped",[1593,1605,1610]],[[64951,64951],"mapped",[1603,1605,1610]],[[64952,64952],"mapped",[1606,1580,1581]],[[64953,64953],"mapped",[1605,1582,1610]],[[64954,64954],"mapped",[1604,1580,1605]],[[64955,64955],"mapped",[1603,1605,1605]],[[64956,64956],"mapped",[1604,1580,1605]],[[64957,64957],"mapped",[1606,1580,1581]],[[64958,64958],"mapped",[1580,1581,1610]],[[64959,64959],"mapped",[1581,1580,1610]],[[64960,64960],"mapped",[1605,1580,1610]],[[64961,64961],"mapped",[1601,1605,1610]],[[64962,64962],"mapped",[1576,1581,1610]],[[64963,64963],"mapped",[1603,1605,1605]],[[64964,64964],"mapped",[1593,1580,1605]],[[64965,64965],"mapped",[1589,1605,1605]],[[64966,64966],"mapped",[1587,1582,1610]],[[64967,64967],"mapped",[1606,1580,1610]],[[64968,64975],"disallowed"],[[64976,65007],"disallowed"],[[65008,65008],"mapped",[1589,1604,1746]],[[65009,65009],"mapped",[1602,1604,1746]],[[65010,65010],"mapped",[1575,1604,1604,1607]],[[65011,65011],"mapped",[1575,1603,1576,1585]],[[65012,65012],"mapped",[1605,1581,1605,1583]],[[65013,65013],"mapped",[1589,1604,1593,1605]],[[65014,65014],"mapped",[1585,1587,1608,1604]],[[65015,65015],"mapped",[1593,1604,1610,1607]],[[65016,65016],"mapped",[1608,1587,1604,1605]],[[65017,65017],"mapped",[1589,1604,1609]],[[65018,65018],"disallowed_STD3_mapped",[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605]],[[65019,65019],"disallowed_STD3_mapped",[1580,1604,32,1580,1604,1575,1604,1607]],[[65020,65020],"mapped",[1585,1740,1575,1604]],[[65021,65021],"valid",[],"NV8"],[[65022,65023],"disallowed"],[[65024,65039],"ignored"],[[65040,65040],"disallowed_STD3_mapped",[44]],[[65041,65041],"mapped",[12289]],[[65042,65042],"disallowed"],[[65043,65043],"disallowed_STD3_mapped",[58]],[[65044,65044],"disallowed_STD3_mapped",[59]],[[65045,65045],"disallowed_STD3_mapped",[33]],[[65046,65046],"disallowed_STD3_mapped",[63]],[[65047,65047],"mapped",[12310]],[[65048,65048],"mapped",[12311]],[[65049,65049],"disallowed"],[[65050,65055],"disallowed"],[[65056,65059],"valid"],[[65060,65062],"valid"],[[65063,65069],"valid"],[[65070,65071],"valid"],[[65072,65072],"disallowed"],[[65073,65073],"mapped",[8212]],[[65074,65074],"mapped",[8211]],[[65075,65076],"disallowed_STD3_mapped",[95]],[[65077,65077],"disallowed_STD3_mapped",[40]],[[65078,65078],"disallowed_STD3_mapped",[41]],[[65079,65079],"disallowed_STD3_mapped",[123]],[[65080,65080],"disallowed_STD3_mapped",[125]],[[65081,65081],"mapped",[12308]],[[65082,65082],"mapped",[12309]],[[65083,65083],"mapped",[12304]],[[65084,65084],"mapped",[12305]],[[65085,65085],"mapped",[12298]],[[65086,65086],"mapped",[12299]],[[65087,65087],"mapped",[12296]],[[65088,65088],"mapped",[12297]],[[65089,65089],"mapped",[12300]],[[65090,65090],"mapped",[12301]],[[65091,65091],"mapped",[12302]],[[65092,65092],"mapped",[12303]],[[65093,65094],"valid",[],"NV8"],[[65095,65095],"disallowed_STD3_mapped",[91]],[[65096,65096],"disallowed_STD3_mapped",[93]],[[65097,65100],"disallowed_STD3_mapped",[32,773]],[[65101,65103],"disallowed_STD3_mapped",[95]],[[65104,65104],"disallowed_STD3_mapped",[44]],[[65105,65105],"mapped",[12289]],[[65106,65106],"disallowed"],[[65107,65107],"disallowed"],[[65108,65108],"disallowed_STD3_mapped",[59]],[[65109,65109],"disallowed_STD3_mapped",[58]],[[65110,65110],"disallowed_STD3_mapped",[63]],[[65111,65111],"disallowed_STD3_mapped",[33]],[[65112,65112],"mapped",[8212]],[[65113,65113],"disallowed_STD3_mapped",[40]],[[65114,65114],"disallowed_STD3_mapped",[41]],[[65115,65115],"disallowed_STD3_mapped",[123]],[[65116,65116],"disallowed_STD3_mapped",[125]],[[65117,65117],"mapped",[12308]],[[65118,65118],"mapped",[12309]],[[65119,65119],"disallowed_STD3_mapped",[35]],[[65120,65120],"disallowed_STD3_mapped",[38]],[[65121,65121],"disallowed_STD3_mapped",[42]],[[65122,65122],"disallowed_STD3_mapped",[43]],[[65123,65123],"mapped",[45]],[[65124,65124],"disallowed_STD3_mapped",[60]],[[65125,65125],"disallowed_STD3_mapped",[62]],[[65126,65126],"disallowed_STD3_mapped",[61]],[[65127,65127],"disallowed"],[[65128,65128],"disallowed_STD3_mapped",[92]],[[65129,65129],"disallowed_STD3_mapped",[36]],[[65130,65130],"disallowed_STD3_mapped",[37]],[[65131,65131],"disallowed_STD3_mapped",[64]],[[65132,65135],"disallowed"],[[65136,65136],"disallowed_STD3_mapped",[32,1611]],[[65137,65137],"mapped",[1600,1611]],[[65138,65138],"disallowed_STD3_mapped",[32,1612]],[[65139,65139],"valid"],[[65140,65140],"disallowed_STD3_mapped",[32,1613]],[[65141,65141],"disallowed"],[[65142,65142],"disallowed_STD3_mapped",[32,1614]],[[65143,65143],"mapped",[1600,1614]],[[65144,65144],"disallowed_STD3_mapped",[32,1615]],[[65145,65145],"mapped",[1600,1615]],[[65146,65146],"disallowed_STD3_mapped",[32,1616]],[[65147,65147],"mapped",[1600,1616]],[[65148,65148],"disallowed_STD3_mapped",[32,1617]],[[65149,65149],"mapped",[1600,1617]],[[65150,65150],"disallowed_STD3_mapped",[32,1618]],[[65151,65151],"mapped",[1600,1618]],[[65152,65152],"mapped",[1569]],[[65153,65154],"mapped",[1570]],[[65155,65156],"mapped",[1571]],[[65157,65158],"mapped",[1572]],[[65159,65160],"mapped",[1573]],[[65161,65164],"mapped",[1574]],[[65165,65166],"mapped",[1575]],[[65167,65170],"mapped",[1576]],[[65171,65172],"mapped",[1577]],[[65173,65176],"mapped",[1578]],[[65177,65180],"mapped",[1579]],[[65181,65184],"mapped",[1580]],[[65185,65188],"mapped",[1581]],[[65189,65192],"mapped",[1582]],[[65193,65194],"mapped",[1583]],[[65195,65196],"mapped",[1584]],[[65197,65198],"mapped",[1585]],[[65199,65200],"mapped",[1586]],[[65201,65204],"mapped",[1587]],[[65205,65208],"mapped",[1588]],[[65209,65212],"mapped",[1589]],[[65213,65216],"mapped",[1590]],[[65217,65220],"mapped",[1591]],[[65221,65224],"mapped",[1592]],[[65225,65228],"mapped",[1593]],[[65229,65232],"mapped",[1594]],[[65233,65236],"mapped",[1601]],[[65237,65240],"mapped",[1602]],[[65241,65244],"mapped",[1603]],[[65245,65248],"mapped",[1604]],[[65249,65252],"mapped",[1605]],[[65253,65256],"mapped",[1606]],[[65257,65260],"mapped",[1607]],[[65261,65262],"mapped",[1608]],[[65263,65264],"mapped",[1609]],[[65265,65268],"mapped",[1610]],[[65269,65270],"mapped",[1604,1570]],[[65271,65272],"mapped",[1604,1571]],[[65273,65274],"mapped",[1604,1573]],[[65275,65276],"mapped",[1604,1575]],[[65277,65278],"disallowed"],[[65279,65279],"ignored"],[[65280,65280],"disallowed"],[[65281,65281],"disallowed_STD3_mapped",[33]],[[65282,65282],"disallowed_STD3_mapped",[34]],[[65283,65283],"disallowed_STD3_mapped",[35]],[[65284,65284],"disallowed_STD3_mapped",[36]],[[65285,65285],"disallowed_STD3_mapped",[37]],[[65286,65286],"disallowed_STD3_mapped",[38]],[[65287,65287],"disallowed_STD3_mapped",[39]],[[65288,65288],"disallowed_STD3_mapped",[40]],[[65289,65289],"disallowed_STD3_mapped",[41]],[[65290,65290],"disallowed_STD3_mapped",[42]],[[65291,65291],"disallowed_STD3_mapped",[43]],[[65292,65292],"disallowed_STD3_mapped",[44]],[[65293,65293],"mapped",[45]],[[65294,65294],"mapped",[46]],[[65295,65295],"disallowed_STD3_mapped",[47]],[[65296,65296],"mapped",[48]],[[65297,65297],"mapped",[49]],[[65298,65298],"mapped",[50]],[[65299,65299],"mapped",[51]],[[65300,65300],"mapped",[52]],[[65301,65301],"mapped",[53]],[[65302,65302],"mapped",[54]],[[65303,65303],"mapped",[55]],[[65304,65304],"mapped",[56]],[[65305,65305],"mapped",[57]],[[65306,65306],"disallowed_STD3_mapped",[58]],[[65307,65307],"disallowed_STD3_mapped",[59]],[[65308,65308],"disallowed_STD3_mapped",[60]],[[65309,65309],"disallowed_STD3_mapped",[61]],[[65310,65310],"disallowed_STD3_mapped",[62]],[[65311,65311],"disallowed_STD3_mapped",[63]],[[65312,65312],"disallowed_STD3_mapped",[64]],[[65313,65313],"mapped",[97]],[[65314,65314],"mapped",[98]],[[65315,65315],"mapped",[99]],[[65316,65316],"mapped",[100]],[[65317,65317],"mapped",[101]],[[65318,65318],"mapped",[102]],[[65319,65319],"mapped",[103]],[[65320,65320],"mapped",[104]],[[65321,65321],"mapped",[105]],[[65322,65322],"mapped",[106]],[[65323,65323],"mapped",[107]],[[65324,65324],"mapped",[108]],[[65325,65325],"mapped",[109]],[[65326,65326],"mapped",[110]],[[65327,65327],"mapped",[111]],[[65328,65328],"mapped",[112]],[[65329,65329],"mapped",[113]],[[65330,65330],"mapped",[114]],[[65331,65331],"mapped",[115]],[[65332,65332],"mapped",[116]],[[65333,65333],"mapped",[117]],[[65334,65334],"mapped",[118]],[[65335,65335],"mapped",[119]],[[65336,65336],"mapped",[120]],[[65337,65337],"mapped",[121]],[[65338,65338],"mapped",[122]],[[65339,65339],"disallowed_STD3_mapped",[91]],[[65340,65340],"disallowed_STD3_mapped",[92]],[[65341,65341],"disallowed_STD3_mapped",[93]],[[65342,65342],"disallowed_STD3_mapped",[94]],[[65343,65343],"disallowed_STD3_mapped",[95]],[[65344,65344],"disallowed_STD3_mapped",[96]],[[65345,65345],"mapped",[97]],[[65346,65346],"mapped",[98]],[[65347,65347],"mapped",[99]],[[65348,65348],"mapped",[100]],[[65349,65349],"mapped",[101]],[[65350,65350],"mapped",[102]],[[65351,65351],"mapped",[103]],[[65352,65352],"mapped",[104]],[[65353,65353],"mapped",[105]],[[65354,65354],"mapped",[106]],[[65355,65355],"mapped",[107]],[[65356,65356],"mapped",[108]],[[65357,65357],"mapped",[109]],[[65358,65358],"mapped",[110]],[[65359,65359],"mapped",[111]],[[65360,65360],"mapped",[112]],[[65361,65361],"mapped",[113]],[[65362,65362],"mapped",[114]],[[65363,65363],"mapped",[115]],[[65364,65364],"mapped",[116]],[[65365,65365],"mapped",[117]],[[65366,65366],"mapped",[118]],[[65367,65367],"mapped",[119]],[[65368,65368],"mapped",[120]],[[65369,65369],"mapped",[121]],[[65370,65370],"mapped",[122]],[[65371,65371],"disallowed_STD3_mapped",[123]],[[65372,65372],"disallowed_STD3_mapped",[124]],[[65373,65373],"disallowed_STD3_mapped",[125]],[[65374,65374],"disallowed_STD3_mapped",[126]],[[65375,65375],"mapped",[10629]],[[65376,65376],"mapped",[10630]],[[65377,65377],"mapped",[46]],[[65378,65378],"mapped",[12300]],[[65379,65379],"mapped",[12301]],[[65380,65380],"mapped",[12289]],[[65381,65381],"mapped",[12539]],[[65382,65382],"mapped",[12530]],[[65383,65383],"mapped",[12449]],[[65384,65384],"mapped",[12451]],[[65385,65385],"mapped",[12453]],[[65386,65386],"mapped",[12455]],[[65387,65387],"mapped",[12457]],[[65388,65388],"mapped",[12515]],[[65389,65389],"mapped",[12517]],[[65390,65390],"mapped",[12519]],[[65391,65391],"mapped",[12483]],[[65392,65392],"mapped",[12540]],[[65393,65393],"mapped",[12450]],[[65394,65394],"mapped",[12452]],[[65395,65395],"mapped",[12454]],[[65396,65396],"mapped",[12456]],[[65397,65397],"mapped",[12458]],[[65398,65398],"mapped",[12459]],[[65399,65399],"mapped",[12461]],[[65400,65400],"mapped",[12463]],[[65401,65401],"mapped",[12465]],[[65402,65402],"mapped",[12467]],[[65403,65403],"mapped",[12469]],[[65404,65404],"mapped",[12471]],[[65405,65405],"mapped",[12473]],[[65406,65406],"mapped",[12475]],[[65407,65407],"mapped",[12477]],[[65408,65408],"mapped",[12479]],[[65409,65409],"mapped",[12481]],[[65410,65410],"mapped",[12484]],[[65411,65411],"mapped",[12486]],[[65412,65412],"mapped",[12488]],[[65413,65413],"mapped",[12490]],[[65414,65414],"mapped",[12491]],[[65415,65415],"mapped",[12492]],[[65416,65416],"mapped",[12493]],[[65417,65417],"mapped",[12494]],[[65418,65418],"mapped",[12495]],[[65419,65419],"mapped",[12498]],[[65420,65420],"mapped",[12501]],[[65421,65421],"mapped",[12504]],[[65422,65422],"mapped",[12507]],[[65423,65423],"mapped",[12510]],[[65424,65424],"mapped",[12511]],[[65425,65425],"mapped",[12512]],[[65426,65426],"mapped",[12513]],[[65427,65427],"mapped",[12514]],[[65428,65428],"mapped",[12516]],[[65429,65429],"mapped",[12518]],[[65430,65430],"mapped",[12520]],[[65431,65431],"mapped",[12521]],[[65432,65432],"mapped",[12522]],[[65433,65433],"mapped",[12523]],[[65434,65434],"mapped",[12524]],[[65435,65435],"mapped",[12525]],[[65436,65436],"mapped",[12527]],[[65437,65437],"mapped",[12531]],[[65438,65438],"mapped",[12441]],[[65439,65439],"mapped",[12442]],[[65440,65440],"disallowed"],[[65441,65441],"mapped",[4352]],[[65442,65442],"mapped",[4353]],[[65443,65443],"mapped",[4522]],[[65444,65444],"mapped",[4354]],[[65445,65445],"mapped",[4524]],[[65446,65446],"mapped",[4525]],[[65447,65447],"mapped",[4355]],[[65448,65448],"mapped",[4356]],[[65449,65449],"mapped",[4357]],[[65450,65450],"mapped",[4528]],[[65451,65451],"mapped",[4529]],[[65452,65452],"mapped",[4530]],[[65453,65453],"mapped",[4531]],[[65454,65454],"mapped",[4532]],[[65455,65455],"mapped",[4533]],[[65456,65456],"mapped",[4378]],[[65457,65457],"mapped",[4358]],[[65458,65458],"mapped",[4359]],[[65459,65459],"mapped",[4360]],[[65460,65460],"mapped",[4385]],[[65461,65461],"mapped",[4361]],[[65462,65462],"mapped",[4362]],[[65463,65463],"mapped",[4363]],[[65464,65464],"mapped",[4364]],[[65465,65465],"mapped",[4365]],[[65466,65466],"mapped",[4366]],[[65467,65467],"mapped",[4367]],[[65468,65468],"mapped",[4368]],[[65469,65469],"mapped",[4369]],[[65470,65470],"mapped",[4370]],[[65471,65473],"disallowed"],[[65474,65474],"mapped",[4449]],[[65475,65475],"mapped",[4450]],[[65476,65476],"mapped",[4451]],[[65477,65477],"mapped",[4452]],[[65478,65478],"mapped",[4453]],[[65479,65479],"mapped",[4454]],[[65480,65481],"disallowed"],[[65482,65482],"mapped",[4455]],[[65483,65483],"mapped",[4456]],[[65484,65484],"mapped",[4457]],[[65485,65485],"mapped",[4458]],[[65486,65486],"mapped",[4459]],[[65487,65487],"mapped",[4460]],[[65488,65489],"disallowed"],[[65490,65490],"mapped",[4461]],[[65491,65491],"mapped",[4462]],[[65492,65492],"mapped",[4463]],[[65493,65493],"mapped",[4464]],[[65494,65494],"mapped",[4465]],[[65495,65495],"mapped",[4466]],[[65496,65497],"disallowed"],[[65498,65498],"mapped",[4467]],[[65499,65499],"mapped",[4468]],[[65500,65500],"mapped",[4469]],[[65501,65503],"disallowed"],[[65504,65504],"mapped",[162]],[[65505,65505],"mapped",[163]],[[65506,65506],"mapped",[172]],[[65507,65507],"disallowed_STD3_mapped",[32,772]],[[65508,65508],"mapped",[166]],[[65509,65509],"mapped",[165]],[[65510,65510],"mapped",[8361]],[[65511,65511],"disallowed"],[[65512,65512],"mapped",[9474]],[[65513,65513],"mapped",[8592]],[[65514,65514],"mapped",[8593]],[[65515,65515],"mapped",[8594]],[[65516,65516],"mapped",[8595]],[[65517,65517],"mapped",[9632]],[[65518,65518],"mapped",[9675]],[[65519,65528],"disallowed"],[[65529,65531],"disallowed"],[[65532,65532],"disallowed"],[[65533,65533],"disallowed"],[[65534,65535],"disallowed"],[[65536,65547],"valid"],[[65548,65548],"disallowed"],[[65549,65574],"valid"],[[65575,65575],"disallowed"],[[65576,65594],"valid"],[[65595,65595],"disallowed"],[[65596,65597],"valid"],[[65598,65598],"disallowed"],[[65599,65613],"valid"],[[65614,65615],"disallowed"],[[65616,65629],"valid"],[[65630,65663],"disallowed"],[[65664,65786],"valid"],[[65787,65791],"disallowed"],[[65792,65794],"valid",[],"NV8"],[[65795,65798],"disallowed"],[[65799,65843],"valid",[],"NV8"],[[65844,65846],"disallowed"],[[65847,65855],"valid",[],"NV8"],[[65856,65930],"valid",[],"NV8"],[[65931,65932],"valid",[],"NV8"],[[65933,65935],"disallowed"],[[65936,65947],"valid",[],"NV8"],[[65948,65951],"disallowed"],[[65952,65952],"valid",[],"NV8"],[[65953,65999],"disallowed"],[[66000,66044],"valid",[],"NV8"],[[66045,66045],"valid"],[[66046,66175],"disallowed"],[[66176,66204],"valid"],[[66205,66207],"disallowed"],[[66208,66256],"valid"],[[66257,66271],"disallowed"],[[66272,66272],"valid"],[[66273,66299],"valid",[],"NV8"],[[66300,66303],"disallowed"],[[66304,66334],"valid"],[[66335,66335],"valid"],[[66336,66339],"valid",[],"NV8"],[[66340,66351],"disallowed"],[[66352,66368],"valid"],[[66369,66369],"valid",[],"NV8"],[[66370,66377],"valid"],[[66378,66378],"valid",[],"NV8"],[[66379,66383],"disallowed"],[[66384,66426],"valid"],[[66427,66431],"disallowed"],[[66432,66461],"valid"],[[66462,66462],"disallowed"],[[66463,66463],"valid",[],"NV8"],[[66464,66499],"valid"],[[66500,66503],"disallowed"],[[66504,66511],"valid"],[[66512,66517],"valid",[],"NV8"],[[66518,66559],"disallowed"],[[66560,66560],"mapped",[66600]],[[66561,66561],"mapped",[66601]],[[66562,66562],"mapped",[66602]],[[66563,66563],"mapped",[66603]],[[66564,66564],"mapped",[66604]],[[66565,66565],"mapped",[66605]],[[66566,66566],"mapped",[66606]],[[66567,66567],"mapped",[66607]],[[66568,66568],"mapped",[66608]],[[66569,66569],"mapped",[66609]],[[66570,66570],"mapped",[66610]],[[66571,66571],"mapped",[66611]],[[66572,66572],"mapped",[66612]],[[66573,66573],"mapped",[66613]],[[66574,66574],"mapped",[66614]],[[66575,66575],"mapped",[66615]],[[66576,66576],"mapped",[66616]],[[66577,66577],"mapped",[66617]],[[66578,66578],"mapped",[66618]],[[66579,66579],"mapped",[66619]],[[66580,66580],"mapped",[66620]],[[66581,66581],"mapped",[66621]],[[66582,66582],"mapped",[66622]],[[66583,66583],"mapped",[66623]],[[66584,66584],"mapped",[66624]],[[66585,66585],"mapped",[66625]],[[66586,66586],"mapped",[66626]],[[66587,66587],"mapped",[66627]],[[66588,66588],"mapped",[66628]],[[66589,66589],"mapped",[66629]],[[66590,66590],"mapped",[66630]],[[66591,66591],"mapped",[66631]],[[66592,66592],"mapped",[66632]],[[66593,66593],"mapped",[66633]],[[66594,66594],"mapped",[66634]],[[66595,66595],"mapped",[66635]],[[66596,66596],"mapped",[66636]],[[66597,66597],"mapped",[66637]],[[66598,66598],"mapped",[66638]],[[66599,66599],"mapped",[66639]],[[66600,66637],"valid"],[[66638,66717],"valid"],[[66718,66719],"disallowed"],[[66720,66729],"valid"],[[66730,66815],"disallowed"],[[66816,66855],"valid"],[[66856,66863],"disallowed"],[[66864,66915],"valid"],[[66916,66926],"disallowed"],[[66927,66927],"valid",[],"NV8"],[[66928,67071],"disallowed"],[[67072,67382],"valid"],[[67383,67391],"disallowed"],[[67392,67413],"valid"],[[67414,67423],"disallowed"],[[67424,67431],"valid"],[[67432,67583],"disallowed"],[[67584,67589],"valid"],[[67590,67591],"disallowed"],[[67592,67592],"valid"],[[67593,67593],"disallowed"],[[67594,67637],"valid"],[[67638,67638],"disallowed"],[[67639,67640],"valid"],[[67641,67643],"disallowed"],[[67644,67644],"valid"],[[67645,67646],"disallowed"],[[67647,67647],"valid"],[[67648,67669],"valid"],[[67670,67670],"disallowed"],[[67671,67679],"valid",[],"NV8"],[[67680,67702],"valid"],[[67703,67711],"valid",[],"NV8"],[[67712,67742],"valid"],[[67743,67750],"disallowed"],[[67751,67759],"valid",[],"NV8"],[[67760,67807],"disallowed"],[[67808,67826],"valid"],[[67827,67827],"disallowed"],[[67828,67829],"valid"],[[67830,67834],"disallowed"],[[67835,67839],"valid",[],"NV8"],[[67840,67861],"valid"],[[67862,67865],"valid",[],"NV8"],[[67866,67867],"valid",[],"NV8"],[[67868,67870],"disallowed"],[[67871,67871],"valid",[],"NV8"],[[67872,67897],"valid"],[[67898,67902],"disallowed"],[[67903,67903],"valid",[],"NV8"],[[67904,67967],"disallowed"],[[67968,68023],"valid"],[[68024,68027],"disallowed"],[[68028,68029],"valid",[],"NV8"],[[68030,68031],"valid"],[[68032,68047],"valid",[],"NV8"],[[68048,68049],"disallowed"],[[68050,68095],"valid",[],"NV8"],[[68096,68099],"valid"],[[68100,68100],"disallowed"],[[68101,68102],"valid"],[[68103,68107],"disallowed"],[[68108,68115],"valid"],[[68116,68116],"disallowed"],[[68117,68119],"valid"],[[68120,68120],"disallowed"],[[68121,68147],"valid"],[[68148,68151],"disallowed"],[[68152,68154],"valid"],[[68155,68158],"disallowed"],[[68159,68159],"valid"],[[68160,68167],"valid",[],"NV8"],[[68168,68175],"disallowed"],[[68176,68184],"valid",[],"NV8"],[[68185,68191],"disallowed"],[[68192,68220],"valid"],[[68221,68223],"valid",[],"NV8"],[[68224,68252],"valid"],[[68253,68255],"valid",[],"NV8"],[[68256,68287],"disallowed"],[[68288,68295],"valid"],[[68296,68296],"valid",[],"NV8"],[[68297,68326],"valid"],[[68327,68330],"disallowed"],[[68331,68342],"valid",[],"NV8"],[[68343,68351],"disallowed"],[[68352,68405],"valid"],[[68406,68408],"disallowed"],[[68409,68415],"valid",[],"NV8"],[[68416,68437],"valid"],[[68438,68439],"disallowed"],[[68440,68447],"valid",[],"NV8"],[[68448,68466],"valid"],[[68467,68471],"disallowed"],[[68472,68479],"valid",[],"NV8"],[[68480,68497],"valid"],[[68498,68504],"disallowed"],[[68505,68508],"valid",[],"NV8"],[[68509,68520],"disallowed"],[[68521,68527],"valid",[],"NV8"],[[68528,68607],"disallowed"],[[68608,68680],"valid"],[[68681,68735],"disallowed"],[[68736,68736],"mapped",[68800]],[[68737,68737],"mapped",[68801]],[[68738,68738],"mapped",[68802]],[[68739,68739],"mapped",[68803]],[[68740,68740],"mapped",[68804]],[[68741,68741],"mapped",[68805]],[[68742,68742],"mapped",[68806]],[[68743,68743],"mapped",[68807]],[[68744,68744],"mapped",[68808]],[[68745,68745],"mapped",[68809]],[[68746,68746],"mapped",[68810]],[[68747,68747],"mapped",[68811]],[[68748,68748],"mapped",[68812]],[[68749,68749],"mapped",[68813]],[[68750,68750],"mapped",[68814]],[[68751,68751],"mapped",[68815]],[[68752,68752],"mapped",[68816]],[[68753,68753],"mapped",[68817]],[[68754,68754],"mapped",[68818]],[[68755,68755],"mapped",[68819]],[[68756,68756],"mapped",[68820]],[[68757,68757],"mapped",[68821]],[[68758,68758],"mapped",[68822]],[[68759,68759],"mapped",[68823]],[[68760,68760],"mapped",[68824]],[[68761,68761],"mapped",[68825]],[[68762,68762],"mapped",[68826]],[[68763,68763],"mapped",[68827]],[[68764,68764],"mapped",[68828]],[[68765,68765],"mapped",[68829]],[[68766,68766],"mapped",[68830]],[[68767,68767],"mapped",[68831]],[[68768,68768],"mapped",[68832]],[[68769,68769],"mapped",[68833]],[[68770,68770],"mapped",[68834]],[[68771,68771],"mapped",[68835]],[[68772,68772],"mapped",[68836]],[[68773,68773],"mapped",[68837]],[[68774,68774],"mapped",[68838]],[[68775,68775],"mapped",[68839]],[[68776,68776],"mapped",[68840]],[[68777,68777],"mapped",[68841]],[[68778,68778],"mapped",[68842]],[[68779,68779],"mapped",[68843]],[[68780,68780],"mapped",[68844]],[[68781,68781],"mapped",[68845]],[[68782,68782],"mapped",[68846]],[[68783,68783],"mapped",[68847]],[[68784,68784],"mapped",[68848]],[[68785,68785],"mapped",[68849]],[[68786,68786],"mapped",[68850]],[[68787,68799],"disallowed"],[[68800,68850],"valid"],[[68851,68857],"disallowed"],[[68858,68863],"valid",[],"NV8"],[[68864,69215],"disallowed"],[[69216,69246],"valid",[],"NV8"],[[69247,69631],"disallowed"],[[69632,69702],"valid"],[[69703,69709],"valid",[],"NV8"],[[69710,69713],"disallowed"],[[69714,69733],"valid",[],"NV8"],[[69734,69743],"valid"],[[69744,69758],"disallowed"],[[69759,69759],"valid"],[[69760,69818],"valid"],[[69819,69820],"valid",[],"NV8"],[[69821,69821],"disallowed"],[[69822,69825],"valid",[],"NV8"],[[69826,69839],"disallowed"],[[69840,69864],"valid"],[[69865,69871],"disallowed"],[[69872,69881],"valid"],[[69882,69887],"disallowed"],[[69888,69940],"valid"],[[69941,69941],"disallowed"],[[69942,69951],"valid"],[[69952,69955],"valid",[],"NV8"],[[69956,69967],"disallowed"],[[69968,70003],"valid"],[[70004,70005],"valid",[],"NV8"],[[70006,70006],"valid"],[[70007,70015],"disallowed"],[[70016,70084],"valid"],[[70085,70088],"valid",[],"NV8"],[[70089,70089],"valid",[],"NV8"],[[70090,70092],"valid"],[[70093,70093],"valid",[],"NV8"],[[70094,70095],"disallowed"],[[70096,70105],"valid"],[[70106,70106],"valid"],[[70107,70107],"valid",[],"NV8"],[[70108,70108],"valid"],[[70109,70111],"valid",[],"NV8"],[[70112,70112],"disallowed"],[[70113,70132],"valid",[],"NV8"],[[70133,70143],"disallowed"],[[70144,70161],"valid"],[[70162,70162],"disallowed"],[[70163,70199],"valid"],[[70200,70205],"valid",[],"NV8"],[[70206,70271],"disallowed"],[[70272,70278],"valid"],[[70279,70279],"disallowed"],[[70280,70280],"valid"],[[70281,70281],"disallowed"],[[70282,70285],"valid"],[[70286,70286],"disallowed"],[[70287,70301],"valid"],[[70302,70302],"disallowed"],[[70303,70312],"valid"],[[70313,70313],"valid",[],"NV8"],[[70314,70319],"disallowed"],[[70320,70378],"valid"],[[70379,70383],"disallowed"],[[70384,70393],"valid"],[[70394,70399],"disallowed"],[[70400,70400],"valid"],[[70401,70403],"valid"],[[70404,70404],"disallowed"],[[70405,70412],"valid"],[[70413,70414],"disallowed"],[[70415,70416],"valid"],[[70417,70418],"disallowed"],[[70419,70440],"valid"],[[70441,70441],"disallowed"],[[70442,70448],"valid"],[[70449,70449],"disallowed"],[[70450,70451],"valid"],[[70452,70452],"disallowed"],[[70453,70457],"valid"],[[70458,70459],"disallowed"],[[70460,70468],"valid"],[[70469,70470],"disallowed"],[[70471,70472],"valid"],[[70473,70474],"disallowed"],[[70475,70477],"valid"],[[70478,70479],"disallowed"],[[70480,70480],"valid"],[[70481,70486],"disallowed"],[[70487,70487],"valid"],[[70488,70492],"disallowed"],[[70493,70499],"valid"],[[70500,70501],"disallowed"],[[70502,70508],"valid"],[[70509,70511],"disallowed"],[[70512,70516],"valid"],[[70517,70783],"disallowed"],[[70784,70853],"valid"],[[70854,70854],"valid",[],"NV8"],[[70855,70855],"valid"],[[70856,70863],"disallowed"],[[70864,70873],"valid"],[[70874,71039],"disallowed"],[[71040,71093],"valid"],[[71094,71095],"disallowed"],[[71096,71104],"valid"],[[71105,71113],"valid",[],"NV8"],[[71114,71127],"valid",[],"NV8"],[[71128,71133],"valid"],[[71134,71167],"disallowed"],[[71168,71232],"valid"],[[71233,71235],"valid",[],"NV8"],[[71236,71236],"valid"],[[71237,71247],"disallowed"],[[71248,71257],"valid"],[[71258,71295],"disallowed"],[[71296,71351],"valid"],[[71352,71359],"disallowed"],[[71360,71369],"valid"],[[71370,71423],"disallowed"],[[71424,71449],"valid"],[[71450,71452],"disallowed"],[[71453,71467],"valid"],[[71468,71471],"disallowed"],[[71472,71481],"valid"],[[71482,71487],"valid",[],"NV8"],[[71488,71839],"disallowed"],[[71840,71840],"mapped",[71872]],[[71841,71841],"mapped",[71873]],[[71842,71842],"mapped",[71874]],[[71843,71843],"mapped",[71875]],[[71844,71844],"mapped",[71876]],[[71845,71845],"mapped",[71877]],[[71846,71846],"mapped",[71878]],[[71847,71847],"mapped",[71879]],[[71848,71848],"mapped",[71880]],[[71849,71849],"mapped",[71881]],[[71850,71850],"mapped",[71882]],[[71851,71851],"mapped",[71883]],[[71852,71852],"mapped",[71884]],[[71853,71853],"mapped",[71885]],[[71854,71854],"mapped",[71886]],[[71855,71855],"mapped",[71887]],[[71856,71856],"mapped",[71888]],[[71857,71857],"mapped",[71889]],[[71858,71858],"mapped",[71890]],[[71859,71859],"mapped",[71891]],[[71860,71860],"mapped",[71892]],[[71861,71861],"mapped",[71893]],[[71862,71862],"mapped",[71894]],[[71863,71863],"mapped",[71895]],[[71864,71864],"mapped",[71896]],[[71865,71865],"mapped",[71897]],[[71866,71866],"mapped",[71898]],[[71867,71867],"mapped",[71899]],[[71868,71868],"mapped",[71900]],[[71869,71869],"mapped",[71901]],[[71870,71870],"mapped",[71902]],[[71871,71871],"mapped",[71903]],[[71872,71913],"valid"],[[71914,71922],"valid",[],"NV8"],[[71923,71934],"disallowed"],[[71935,71935],"valid"],[[71936,72383],"disallowed"],[[72384,72440],"valid"],[[72441,73727],"disallowed"],[[73728,74606],"valid"],[[74607,74648],"valid"],[[74649,74649],"valid"],[[74650,74751],"disallowed"],[[74752,74850],"valid",[],"NV8"],[[74851,74862],"valid",[],"NV8"],[[74863,74863],"disallowed"],[[74864,74867],"valid",[],"NV8"],[[74868,74868],"valid",[],"NV8"],[[74869,74879],"disallowed"],[[74880,75075],"valid"],[[75076,77823],"disallowed"],[[77824,78894],"valid"],[[78895,82943],"disallowed"],[[82944,83526],"valid"],[[83527,92159],"disallowed"],[[92160,92728],"valid"],[[92729,92735],"disallowed"],[[92736,92766],"valid"],[[92767,92767],"disallowed"],[[92768,92777],"valid"],[[92778,92781],"disallowed"],[[92782,92783],"valid",[],"NV8"],[[92784,92879],"disallowed"],[[92880,92909],"valid"],[[92910,92911],"disallowed"],[[92912,92916],"valid"],[[92917,92917],"valid",[],"NV8"],[[92918,92927],"disallowed"],[[92928,92982],"valid"],[[92983,92991],"valid",[],"NV8"],[[92992,92995],"valid"],[[92996,92997],"valid",[],"NV8"],[[92998,93007],"disallowed"],[[93008,93017],"valid"],[[93018,93018],"disallowed"],[[93019,93025],"valid",[],"NV8"],[[93026,93026],"disallowed"],[[93027,93047],"valid"],[[93048,93052],"disallowed"],[[93053,93071],"valid"],[[93072,93951],"disallowed"],[[93952,94020],"valid"],[[94021,94031],"disallowed"],[[94032,94078],"valid"],[[94079,94094],"disallowed"],[[94095,94111],"valid"],[[94112,110591],"disallowed"],[[110592,110593],"valid"],[[110594,113663],"disallowed"],[[113664,113770],"valid"],[[113771,113775],"disallowed"],[[113776,113788],"valid"],[[113789,113791],"disallowed"],[[113792,113800],"valid"],[[113801,113807],"disallowed"],[[113808,113817],"valid"],[[113818,113819],"disallowed"],[[113820,113820],"valid",[],"NV8"],[[113821,113822],"valid"],[[113823,113823],"valid",[],"NV8"],[[113824,113827],"ignored"],[[113828,118783],"disallowed"],[[118784,119029],"valid",[],"NV8"],[[119030,119039],"disallowed"],[[119040,119078],"valid",[],"NV8"],[[119079,119080],"disallowed"],[[119081,119081],"valid",[],"NV8"],[[119082,119133],"valid",[],"NV8"],[[119134,119134],"mapped",[119127,119141]],[[119135,119135],"mapped",[119128,119141]],[[119136,119136],"mapped",[119128,119141,119150]],[[119137,119137],"mapped",[119128,119141,119151]],[[119138,119138],"mapped",[119128,119141,119152]],[[119139,119139],"mapped",[119128,119141,119153]],[[119140,119140],"mapped",[119128,119141,119154]],[[119141,119154],"valid",[],"NV8"],[[119155,119162],"disallowed"],[[119163,119226],"valid",[],"NV8"],[[119227,119227],"mapped",[119225,119141]],[[119228,119228],"mapped",[119226,119141]],[[119229,119229],"mapped",[119225,119141,119150]],[[119230,119230],"mapped",[119226,119141,119150]],[[119231,119231],"mapped",[119225,119141,119151]],[[119232,119232],"mapped",[119226,119141,119151]],[[119233,119261],"valid",[],"NV8"],[[119262,119272],"valid",[],"NV8"],[[119273,119295],"disallowed"],[[119296,119365],"valid",[],"NV8"],[[119366,119551],"disallowed"],[[119552,119638],"valid",[],"NV8"],[[119639,119647],"disallowed"],[[119648,119665],"valid",[],"NV8"],[[119666,119807],"disallowed"],[[119808,119808],"mapped",[97]],[[119809,119809],"mapped",[98]],[[119810,119810],"mapped",[99]],[[119811,119811],"mapped",[100]],[[119812,119812],"mapped",[101]],[[119813,119813],"mapped",[102]],[[119814,119814],"mapped",[103]],[[119815,119815],"mapped",[104]],[[119816,119816],"mapped",[105]],[[119817,119817],"mapped",[106]],[[119818,119818],"mapped",[107]],[[119819,119819],"mapped",[108]],[[119820,119820],"mapped",[109]],[[119821,119821],"mapped",[110]],[[119822,119822],"mapped",[111]],[[119823,119823],"mapped",[112]],[[119824,119824],"mapped",[113]],[[119825,119825],"mapped",[114]],[[119826,119826],"mapped",[115]],[[119827,119827],"mapped",[116]],[[119828,119828],"mapped",[117]],[[119829,119829],"mapped",[118]],[[119830,119830],"mapped",[119]],[[119831,119831],"mapped",[120]],[[119832,119832],"mapped",[121]],[[119833,119833],"mapped",[122]],[[119834,119834],"mapped",[97]],[[119835,119835],"mapped",[98]],[[119836,119836],"mapped",[99]],[[119837,119837],"mapped",[100]],[[119838,119838],"mapped",[101]],[[119839,119839],"mapped",[102]],[[119840,119840],"mapped",[103]],[[119841,119841],"mapped",[104]],[[119842,119842],"mapped",[105]],[[119843,119843],"mapped",[106]],[[119844,119844],"mapped",[107]],[[119845,119845],"mapped",[108]],[[119846,119846],"mapped",[109]],[[119847,119847],"mapped",[110]],[[119848,119848],"mapped",[111]],[[119849,119849],"mapped",[112]],[[119850,119850],"mapped",[113]],[[119851,119851],"mapped",[114]],[[119852,119852],"mapped",[115]],[[119853,119853],"mapped",[116]],[[119854,119854],"mapped",[117]],[[119855,119855],"mapped",[118]],[[119856,119856],"mapped",[119]],[[119857,119857],"mapped",[120]],[[119858,119858],"mapped",[121]],[[119859,119859],"mapped",[122]],[[119860,119860],"mapped",[97]],[[119861,119861],"mapped",[98]],[[119862,119862],"mapped",[99]],[[119863,119863],"mapped",[100]],[[119864,119864],"mapped",[101]],[[119865,119865],"mapped",[102]],[[119866,119866],"mapped",[103]],[[119867,119867],"mapped",[104]],[[119868,119868],"mapped",[105]],[[119869,119869],"mapped",[106]],[[119870,119870],"mapped",[107]],[[119871,119871],"mapped",[108]],[[119872,119872],"mapped",[109]],[[119873,119873],"mapped",[110]],[[119874,119874],"mapped",[111]],[[119875,119875],"mapped",[112]],[[119876,119876],"mapped",[113]],[[119877,119877],"mapped",[114]],[[119878,119878],"mapped",[115]],[[119879,119879],"mapped",[116]],[[119880,119880],"mapped",[117]],[[119881,119881],"mapped",[118]],[[119882,119882],"mapped",[119]],[[119883,119883],"mapped",[120]],[[119884,119884],"mapped",[121]],[[119885,119885],"mapped",[122]],[[119886,119886],"mapped",[97]],[[119887,119887],"mapped",[98]],[[119888,119888],"mapped",[99]],[[119889,119889],"mapped",[100]],[[119890,119890],"mapped",[101]],[[119891,119891],"mapped",[102]],[[119892,119892],"mapped",[103]],[[119893,119893],"disallowed"],[[119894,119894],"mapped",[105]],[[119895,119895],"mapped",[106]],[[119896,119896],"mapped",[107]],[[119897,119897],"mapped",[108]],[[119898,119898],"mapped",[109]],[[119899,119899],"mapped",[110]],[[119900,119900],"mapped",[111]],[[119901,119901],"mapped",[112]],[[119902,119902],"mapped",[113]],[[119903,119903],"mapped",[114]],[[119904,119904],"mapped",[115]],[[119905,119905],"mapped",[116]],[[119906,119906],"mapped",[117]],[[119907,119907],"mapped",[118]],[[119908,119908],"mapped",[119]],[[119909,119909],"mapped",[120]],[[119910,119910],"mapped",[121]],[[119911,119911],"mapped",[122]],[[119912,119912],"mapped",[97]],[[119913,119913],"mapped",[98]],[[119914,119914],"mapped",[99]],[[119915,119915],"mapped",[100]],[[119916,119916],"mapped",[101]],[[119917,119917],"mapped",[102]],[[119918,119918],"mapped",[103]],[[119919,119919],"mapped",[104]],[[119920,119920],"mapped",[105]],[[119921,119921],"mapped",[106]],[[119922,119922],"mapped",[107]],[[119923,119923],"mapped",[108]],[[119924,119924],"mapped",[109]],[[119925,119925],"mapped",[110]],[[119926,119926],"mapped",[111]],[[119927,119927],"mapped",[112]],[[119928,119928],"mapped",[113]],[[119929,119929],"mapped",[114]],[[119930,119930],"mapped",[115]],[[119931,119931],"mapped",[116]],[[119932,119932],"mapped",[117]],[[119933,119933],"mapped",[118]],[[119934,119934],"mapped",[119]],[[119935,119935],"mapped",[120]],[[119936,119936],"mapped",[121]],[[119937,119937],"mapped",[122]],[[119938,119938],"mapped",[97]],[[119939,119939],"mapped",[98]],[[119940,119940],"mapped",[99]],[[119941,119941],"mapped",[100]],[[119942,119942],"mapped",[101]],[[119943,119943],"mapped",[102]],[[119944,119944],"mapped",[103]],[[119945,119945],"mapped",[104]],[[119946,119946],"mapped",[105]],[[119947,119947],"mapped",[106]],[[119948,119948],"mapped",[107]],[[119949,119949],"mapped",[108]],[[119950,119950],"mapped",[109]],[[119951,119951],"mapped",[110]],[[119952,119952],"mapped",[111]],[[119953,119953],"mapped",[112]],[[119954,119954],"mapped",[113]],[[119955,119955],"mapped",[114]],[[119956,119956],"mapped",[115]],[[119957,119957],"mapped",[116]],[[119958,119958],"mapped",[117]],[[119959,119959],"mapped",[118]],[[119960,119960],"mapped",[119]],[[119961,119961],"mapped",[120]],[[119962,119962],"mapped",[121]],[[119963,119963],"mapped",[122]],[[119964,119964],"mapped",[97]],[[119965,119965],"disallowed"],[[119966,119966],"mapped",[99]],[[119967,119967],"mapped",[100]],[[119968,119969],"disallowed"],[[119970,119970],"mapped",[103]],[[119971,119972],"disallowed"],[[119973,119973],"mapped",[106]],[[119974,119974],"mapped",[107]],[[119975,119976],"disallowed"],[[119977,119977],"mapped",[110]],[[119978,119978],"mapped",[111]],[[119979,119979],"mapped",[112]],[[119980,119980],"mapped",[113]],[[119981,119981],"disallowed"],[[119982,119982],"mapped",[115]],[[119983,119983],"mapped",[116]],[[119984,119984],"mapped",[117]],[[119985,119985],"mapped",[118]],[[119986,119986],"mapped",[119]],[[119987,119987],"mapped",[120]],[[119988,119988],"mapped",[121]],[[119989,119989],"mapped",[122]],[[119990,119990],"mapped",[97]],[[119991,119991],"mapped",[98]],[[119992,119992],"mapped",[99]],[[119993,119993],"mapped",[100]],[[119994,119994],"disallowed"],[[119995,119995],"mapped",[102]],[[119996,119996],"disallowed"],[[119997,119997],"mapped",[104]],[[119998,119998],"mapped",[105]],[[119999,119999],"mapped",[106]],[[120000,120000],"mapped",[107]],[[120001,120001],"mapped",[108]],[[120002,120002],"mapped",[109]],[[120003,120003],"mapped",[110]],[[120004,120004],"disallowed"],[[120005,120005],"mapped",[112]],[[120006,120006],"mapped",[113]],[[120007,120007],"mapped",[114]],[[120008,120008],"mapped",[115]],[[120009,120009],"mapped",[116]],[[120010,120010],"mapped",[117]],[[120011,120011],"mapped",[118]],[[120012,120012],"mapped",[119]],[[120013,120013],"mapped",[120]],[[120014,120014],"mapped",[121]],[[120015,120015],"mapped",[122]],[[120016,120016],"mapped",[97]],[[120017,120017],"mapped",[98]],[[120018,120018],"mapped",[99]],[[120019,120019],"mapped",[100]],[[120020,120020],"mapped",[101]],[[120021,120021],"mapped",[102]],[[120022,120022],"mapped",[103]],[[120023,120023],"mapped",[104]],[[120024,120024],"mapped",[105]],[[120025,120025],"mapped",[106]],[[120026,120026],"mapped",[107]],[[120027,120027],"mapped",[108]],[[120028,120028],"mapped",[109]],[[120029,120029],"mapped",[110]],[[120030,120030],"mapped",[111]],[[120031,120031],"mapped",[112]],[[120032,120032],"mapped",[113]],[[120033,120033],"mapped",[114]],[[120034,120034],"mapped",[115]],[[120035,120035],"mapped",[116]],[[120036,120036],"mapped",[117]],[[120037,120037],"mapped",[118]],[[120038,120038],"mapped",[119]],[[120039,120039],"mapped",[120]],[[120040,120040],"mapped",[121]],[[120041,120041],"mapped",[122]],[[120042,120042],"mapped",[97]],[[120043,120043],"mapped",[98]],[[120044,120044],"mapped",[99]],[[120045,120045],"mapped",[100]],[[120046,120046],"mapped",[101]],[[120047,120047],"mapped",[102]],[[120048,120048],"mapped",[103]],[[120049,120049],"mapped",[104]],[[120050,120050],"mapped",[105]],[[120051,120051],"mapped",[106]],[[120052,120052],"mapped",[107]],[[120053,120053],"mapped",[108]],[[120054,120054],"mapped",[109]],[[120055,120055],"mapped",[110]],[[120056,120056],"mapped",[111]],[[120057,120057],"mapped",[112]],[[120058,120058],"mapped",[113]],[[120059,120059],"mapped",[114]],[[120060,120060],"mapped",[115]],[[120061,120061],"mapped",[116]],[[120062,120062],"mapped",[117]],[[120063,120063],"mapped",[118]],[[120064,120064],"mapped",[119]],[[120065,120065],"mapped",[120]],[[120066,120066],"mapped",[121]],[[120067,120067],"mapped",[122]],[[120068,120068],"mapped",[97]],[[120069,120069],"mapped",[98]],[[120070,120070],"disallowed"],[[120071,120071],"mapped",[100]],[[120072,120072],"mapped",[101]],[[120073,120073],"mapped",[102]],[[120074,120074],"mapped",[103]],[[120075,120076],"disallowed"],[[120077,120077],"mapped",[106]],[[120078,120078],"mapped",[107]],[[120079,120079],"mapped",[108]],[[120080,120080],"mapped",[109]],[[120081,120081],"mapped",[110]],[[120082,120082],"mapped",[111]],[[120083,120083],"mapped",[112]],[[120084,120084],"mapped",[113]],[[120085,120085],"disallowed"],[[120086,120086],"mapped",[115]],[[120087,120087],"mapped",[116]],[[120088,120088],"mapped",[117]],[[120089,120089],"mapped",[118]],[[120090,120090],"mapped",[119]],[[120091,120091],"mapped",[120]],[[120092,120092],"mapped",[121]],[[120093,120093],"disallowed"],[[120094,120094],"mapped",[97]],[[120095,120095],"mapped",[98]],[[120096,120096],"mapped",[99]],[[120097,120097],"mapped",[100]],[[120098,120098],"mapped",[101]],[[120099,120099],"mapped",[102]],[[120100,120100],"mapped",[103]],[[120101,120101],"mapped",[104]],[[120102,120102],"mapped",[105]],[[120103,120103],"mapped",[106]],[[120104,120104],"mapped",[107]],[[120105,120105],"mapped",[108]],[[120106,120106],"mapped",[109]],[[120107,120107],"mapped",[110]],[[120108,120108],"mapped",[111]],[[120109,120109],"mapped",[112]],[[120110,120110],"mapped",[113]],[[120111,120111],"mapped",[114]],[[120112,120112],"mapped",[115]],[[120113,120113],"mapped",[116]],[[120114,120114],"mapped",[117]],[[120115,120115],"mapped",[118]],[[120116,120116],"mapped",[119]],[[120117,120117],"mapped",[120]],[[120118,120118],"mapped",[121]],[[120119,120119],"mapped",[122]],[[120120,120120],"mapped",[97]],[[120121,120121],"mapped",[98]],[[120122,120122],"disallowed"],[[120123,120123],"mapped",[100]],[[120124,120124],"mapped",[101]],[[120125,120125],"mapped",[102]],[[120126,120126],"mapped",[103]],[[120127,120127],"disallowed"],[[120128,120128],"mapped",[105]],[[120129,120129],"mapped",[106]],[[120130,120130],"mapped",[107]],[[120131,120131],"mapped",[108]],[[120132,120132],"mapped",[109]],[[120133,120133],"disallowed"],[[120134,120134],"mapped",[111]],[[120135,120137],"disallowed"],[[120138,120138],"mapped",[115]],[[120139,120139],"mapped",[116]],[[120140,120140],"mapped",[117]],[[120141,120141],"mapped",[118]],[[120142,120142],"mapped",[119]],[[120143,120143],"mapped",[120]],[[120144,120144],"mapped",[121]],[[120145,120145],"disallowed"],[[120146,120146],"mapped",[97]],[[120147,120147],"mapped",[98]],[[120148,120148],"mapped",[99]],[[120149,120149],"mapped",[100]],[[120150,120150],"mapped",[101]],[[120151,120151],"mapped",[102]],[[120152,120152],"mapped",[103]],[[120153,120153],"mapped",[104]],[[120154,120154],"mapped",[105]],[[120155,120155],"mapped",[106]],[[120156,120156],"mapped",[107]],[[120157,120157],"mapped",[108]],[[120158,120158],"mapped",[109]],[[120159,120159],"mapped",[110]],[[120160,120160],"mapped",[111]],[[120161,120161],"mapped",[112]],[[120162,120162],"mapped",[113]],[[120163,120163],"mapped",[114]],[[120164,120164],"mapped",[115]],[[120165,120165],"mapped",[116]],[[120166,120166],"mapped",[117]],[[120167,120167],"mapped",[118]],[[120168,120168],"mapped",[119]],[[120169,120169],"mapped",[120]],[[120170,120170],"mapped",[121]],[[120171,120171],"mapped",[122]],[[120172,120172],"mapped",[97]],[[120173,120173],"mapped",[98]],[[120174,120174],"mapped",[99]],[[120175,120175],"mapped",[100]],[[120176,120176],"mapped",[101]],[[120177,120177],"mapped",[102]],[[120178,120178],"mapped",[103]],[[120179,120179],"mapped",[104]],[[120180,120180],"mapped",[105]],[[120181,120181],"mapped",[106]],[[120182,120182],"mapped",[107]],[[120183,120183],"mapped",[108]],[[120184,120184],"mapped",[109]],[[120185,120185],"mapped",[110]],[[120186,120186],"mapped",[111]],[[120187,120187],"mapped",[112]],[[120188,120188],"mapped",[113]],[[120189,120189],"mapped",[114]],[[120190,120190],"mapped",[115]],[[120191,120191],"mapped",[116]],[[120192,120192],"mapped",[117]],[[120193,120193],"mapped",[118]],[[120194,120194],"mapped",[119]],[[120195,120195],"mapped",[120]],[[120196,120196],"mapped",[121]],[[120197,120197],"mapped",[122]],[[120198,120198],"mapped",[97]],[[120199,120199],"mapped",[98]],[[120200,120200],"mapped",[99]],[[120201,120201],"mapped",[100]],[[120202,120202],"mapped",[101]],[[120203,120203],"mapped",[102]],[[120204,120204],"mapped",[103]],[[120205,120205],"mapped",[104]],[[120206,120206],"mapped",[105]],[[120207,120207],"mapped",[106]],[[120208,120208],"mapped",[107]],[[120209,120209],"mapped",[108]],[[120210,120210],"mapped",[109]],[[120211,120211],"mapped",[110]],[[120212,120212],"mapped",[111]],[[120213,120213],"mapped",[112]],[[120214,120214],"mapped",[113]],[[120215,120215],"mapped",[114]],[[120216,120216],"mapped",[115]],[[120217,120217],"mapped",[116]],[[120218,120218],"mapped",[117]],[[120219,120219],"mapped",[118]],[[120220,120220],"mapped",[119]],[[120221,120221],"mapped",[120]],[[120222,120222],"mapped",[121]],[[120223,120223],"mapped",[122]],[[120224,120224],"mapped",[97]],[[120225,120225],"mapped",[98]],[[120226,120226],"mapped",[99]],[[120227,120227],"mapped",[100]],[[120228,120228],"mapped",[101]],[[120229,120229],"mapped",[102]],[[120230,120230],"mapped",[103]],[[120231,120231],"mapped",[104]],[[120232,120232],"mapped",[105]],[[120233,120233],"mapped",[106]],[[120234,120234],"mapped",[107]],[[120235,120235],"mapped",[108]],[[120236,120236],"mapped",[109]],[[120237,120237],"mapped",[110]],[[120238,120238],"mapped",[111]],[[120239,120239],"mapped",[112]],[[120240,120240],"mapped",[113]],[[120241,120241],"mapped",[114]],[[120242,120242],"mapped",[115]],[[120243,120243],"mapped",[116]],[[120244,120244],"mapped",[117]],[[120245,120245],"mapped",[118]],[[120246,120246],"mapped",[119]],[[120247,120247],"mapped",[120]],[[120248,120248],"mapped",[121]],[[120249,120249],"mapped",[122]],[[120250,120250],"mapped",[97]],[[120251,120251],"mapped",[98]],[[120252,120252],"mapped",[99]],[[120253,120253],"mapped",[100]],[[120254,120254],"mapped",[101]],[[120255,120255],"mapped",[102]],[[120256,120256],"mapped",[103]],[[120257,120257],"mapped",[104]],[[120258,120258],"mapped",[105]],[[120259,120259],"mapped",[106]],[[120260,120260],"mapped",[107]],[[120261,120261],"mapped",[108]],[[120262,120262],"mapped",[109]],[[120263,120263],"mapped",[110]],[[120264,120264],"mapped",[111]],[[120265,120265],"mapped",[112]],[[120266,120266],"mapped",[113]],[[120267,120267],"mapped",[114]],[[120268,120268],"mapped",[115]],[[120269,120269],"mapped",[116]],[[120270,120270],"mapped",[117]],[[120271,120271],"mapped",[118]],[[120272,120272],"mapped",[119]],[[120273,120273],"mapped",[120]],[[120274,120274],"mapped",[121]],[[120275,120275],"mapped",[122]],[[120276,120276],"mapped",[97]],[[120277,120277],"mapped",[98]],[[120278,120278],"mapped",[99]],[[120279,120279],"mapped",[100]],[[120280,120280],"mapped",[101]],[[120281,120281],"mapped",[102]],[[120282,120282],"mapped",[103]],[[120283,120283],"mapped",[104]],[[120284,120284],"mapped",[105]],[[120285,120285],"mapped",[106]],[[120286,120286],"mapped",[107]],[[120287,120287],"mapped",[108]],[[120288,120288],"mapped",[109]],[[120289,120289],"mapped",[110]],[[120290,120290],"mapped",[111]],[[120291,120291],"mapped",[112]],[[120292,120292],"mapped",[113]],[[120293,120293],"mapped",[114]],[[120294,120294],"mapped",[115]],[[120295,120295],"mapped",[116]],[[120296,120296],"mapped",[117]],[[120297,120297],"mapped",[118]],[[120298,120298],"mapped",[119]],[[120299,120299],"mapped",[120]],[[120300,120300],"mapped",[121]],[[120301,120301],"mapped",[122]],[[120302,120302],"mapped",[97]],[[120303,120303],"mapped",[98]],[[120304,120304],"mapped",[99]],[[120305,120305],"mapped",[100]],[[120306,120306],"mapped",[101]],[[120307,120307],"mapped",[102]],[[120308,120308],"mapped",[103]],[[120309,120309],"mapped",[104]],[[120310,120310],"mapped",[105]],[[120311,120311],"mapped",[106]],[[120312,120312],"mapped",[107]],[[120313,120313],"mapped",[108]],[[120314,120314],"mapped",[109]],[[120315,120315],"mapped",[110]],[[120316,120316],"mapped",[111]],[[120317,120317],"mapped",[112]],[[120318,120318],"mapped",[113]],[[120319,120319],"mapped",[114]],[[120320,120320],"mapped",[115]],[[120321,120321],"mapped",[116]],[[120322,120322],"mapped",[117]],[[120323,120323],"mapped",[118]],[[120324,120324],"mapped",[119]],[[120325,120325],"mapped",[120]],[[120326,120326],"mapped",[121]],[[120327,120327],"mapped",[122]],[[120328,120328],"mapped",[97]],[[120329,120329],"mapped",[98]],[[120330,120330],"mapped",[99]],[[120331,120331],"mapped",[100]],[[120332,120332],"mapped",[101]],[[120333,120333],"mapped",[102]],[[120334,120334],"mapped",[103]],[[120335,120335],"mapped",[104]],[[120336,120336],"mapped",[105]],[[120337,120337],"mapped",[106]],[[120338,120338],"mapped",[107]],[[120339,120339],"mapped",[108]],[[120340,120340],"mapped",[109]],[[120341,120341],"mapped",[110]],[[120342,120342],"mapped",[111]],[[120343,120343],"mapped",[112]],[[120344,120344],"mapped",[113]],[[120345,120345],"mapped",[114]],[[120346,120346],"mapped",[115]],[[120347,120347],"mapped",[116]],[[120348,120348],"mapped",[117]],[[120349,120349],"mapped",[118]],[[120350,120350],"mapped",[119]],[[120351,120351],"mapped",[120]],[[120352,120352],"mapped",[121]],[[120353,120353],"mapped",[122]],[[120354,120354],"mapped",[97]],[[120355,120355],"mapped",[98]],[[120356,120356],"mapped",[99]],[[120357,120357],"mapped",[100]],[[120358,120358],"mapped",[101]],[[120359,120359],"mapped",[102]],[[120360,120360],"mapped",[103]],[[120361,120361],"mapped",[104]],[[120362,120362],"mapped",[105]],[[120363,120363],"mapped",[106]],[[120364,120364],"mapped",[107]],[[120365,120365],"mapped",[108]],[[120366,120366],"mapped",[109]],[[120367,120367],"mapped",[110]],[[120368,120368],"mapped",[111]],[[120369,120369],"mapped",[112]],[[120370,120370],"mapped",[113]],[[120371,120371],"mapped",[114]],[[120372,120372],"mapped",[115]],[[120373,120373],"mapped",[116]],[[120374,120374],"mapped",[117]],[[120375,120375],"mapped",[118]],[[120376,120376],"mapped",[119]],[[120377,120377],"mapped",[120]],[[120378,120378],"mapped",[121]],[[120379,120379],"mapped",[122]],[[120380,120380],"mapped",[97]],[[120381,120381],"mapped",[98]],[[120382,120382],"mapped",[99]],[[120383,120383],"mapped",[100]],[[120384,120384],"mapped",[101]],[[120385,120385],"mapped",[102]],[[120386,120386],"mapped",[103]],[[120387,120387],"mapped",[104]],[[120388,120388],"mapped",[105]],[[120389,120389],"mapped",[106]],[[120390,120390],"mapped",[107]],[[120391,120391],"mapped",[108]],[[120392,120392],"mapped",[109]],[[120393,120393],"mapped",[110]],[[120394,120394],"mapped",[111]],[[120395,120395],"mapped",[112]],[[120396,120396],"mapped",[113]],[[120397,120397],"mapped",[114]],[[120398,120398],"mapped",[115]],[[120399,120399],"mapped",[116]],[[120400,120400],"mapped",[117]],[[120401,120401],"mapped",[118]],[[120402,120402],"mapped",[119]],[[120403,120403],"mapped",[120]],[[120404,120404],"mapped",[121]],[[120405,120405],"mapped",[122]],[[120406,120406],"mapped",[97]],[[120407,120407],"mapped",[98]],[[120408,120408],"mapped",[99]],[[120409,120409],"mapped",[100]],[[120410,120410],"mapped",[101]],[[120411,120411],"mapped",[102]],[[120412,120412],"mapped",[103]],[[120413,120413],"mapped",[104]],[[120414,120414],"mapped",[105]],[[120415,120415],"mapped",[106]],[[120416,120416],"mapped",[107]],[[120417,120417],"mapped",[108]],[[120418,120418],"mapped",[109]],[[120419,120419],"mapped",[110]],[[120420,120420],"mapped",[111]],[[120421,120421],"mapped",[112]],[[120422,120422],"mapped",[113]],[[120423,120423],"mapped",[114]],[[120424,120424],"mapped",[115]],[[120425,120425],"mapped",[116]],[[120426,120426],"mapped",[117]],[[120427,120427],"mapped",[118]],[[120428,120428],"mapped",[119]],[[120429,120429],"mapped",[120]],[[120430,120430],"mapped",[121]],[[120431,120431],"mapped",[122]],[[120432,120432],"mapped",[97]],[[120433,120433],"mapped",[98]],[[120434,120434],"mapped",[99]],[[120435,120435],"mapped",[100]],[[120436,120436],"mapped",[101]],[[120437,120437],"mapped",[102]],[[120438,120438],"mapped",[103]],[[120439,120439],"mapped",[104]],[[120440,120440],"mapped",[105]],[[120441,120441],"mapped",[106]],[[120442,120442],"mapped",[107]],[[120443,120443],"mapped",[108]],[[120444,120444],"mapped",[109]],[[120445,120445],"mapped",[110]],[[120446,120446],"mapped",[111]],[[120447,120447],"mapped",[112]],[[120448,120448],"mapped",[113]],[[120449,120449],"mapped",[114]],[[120450,120450],"mapped",[115]],[[120451,120451],"mapped",[116]],[[120452,120452],"mapped",[117]],[[120453,120453],"mapped",[118]],[[120454,120454],"mapped",[119]],[[120455,120455],"mapped",[120]],[[120456,120456],"mapped",[121]],[[120457,120457],"mapped",[122]],[[120458,120458],"mapped",[97]],[[120459,120459],"mapped",[98]],[[120460,120460],"mapped",[99]],[[120461,120461],"mapped",[100]],[[120462,120462],"mapped",[101]],[[120463,120463],"mapped",[102]],[[120464,120464],"mapped",[103]],[[120465,120465],"mapped",[104]],[[120466,120466],"mapped",[105]],[[120467,120467],"mapped",[106]],[[120468,120468],"mapped",[107]],[[120469,120469],"mapped",[108]],[[120470,120470],"mapped",[109]],[[120471,120471],"mapped",[110]],[[120472,120472],"mapped",[111]],[[120473,120473],"mapped",[112]],[[120474,120474],"mapped",[113]],[[120475,120475],"mapped",[114]],[[120476,120476],"mapped",[115]],[[120477,120477],"mapped",[116]],[[120478,120478],"mapped",[117]],[[120479,120479],"mapped",[118]],[[120480,120480],"mapped",[119]],[[120481,120481],"mapped",[120]],[[120482,120482],"mapped",[121]],[[120483,120483],"mapped",[122]],[[120484,120484],"mapped",[305]],[[120485,120485],"mapped",[567]],[[120486,120487],"disallowed"],[[120488,120488],"mapped",[945]],[[120489,120489],"mapped",[946]],[[120490,120490],"mapped",[947]],[[120491,120491],"mapped",[948]],[[120492,120492],"mapped",[949]],[[120493,120493],"mapped",[950]],[[120494,120494],"mapped",[951]],[[120495,120495],"mapped",[952]],[[120496,120496],"mapped",[953]],[[120497,120497],"mapped",[954]],[[120498,120498],"mapped",[955]],[[120499,120499],"mapped",[956]],[[120500,120500],"mapped",[957]],[[120501,120501],"mapped",[958]],[[120502,120502],"mapped",[959]],[[120503,120503],"mapped",[960]],[[120504,120504],"mapped",[961]],[[120505,120505],"mapped",[952]],[[120506,120506],"mapped",[963]],[[120507,120507],"mapped",[964]],[[120508,120508],"mapped",[965]],[[120509,120509],"mapped",[966]],[[120510,120510],"mapped",[967]],[[120511,120511],"mapped",[968]],[[120512,120512],"mapped",[969]],[[120513,120513],"mapped",[8711]],[[120514,120514],"mapped",[945]],[[120515,120515],"mapped",[946]],[[120516,120516],"mapped",[947]],[[120517,120517],"mapped",[948]],[[120518,120518],"mapped",[949]],[[120519,120519],"mapped",[950]],[[120520,120520],"mapped",[951]],[[120521,120521],"mapped",[952]],[[120522,120522],"mapped",[953]],[[120523,120523],"mapped",[954]],[[120524,120524],"mapped",[955]],[[120525,120525],"mapped",[956]],[[120526,120526],"mapped",[957]],[[120527,120527],"mapped",[958]],[[120528,120528],"mapped",[959]],[[120529,120529],"mapped",[960]],[[120530,120530],"mapped",[961]],[[120531,120532],"mapped",[963]],[[120533,120533],"mapped",[964]],[[120534,120534],"mapped",[965]],[[120535,120535],"mapped",[966]],[[120536,120536],"mapped",[967]],[[120537,120537],"mapped",[968]],[[120538,120538],"mapped",[969]],[[120539,120539],"mapped",[8706]],[[120540,120540],"mapped",[949]],[[120541,120541],"mapped",[952]],[[120542,120542],"mapped",[954]],[[120543,120543],"mapped",[966]],[[120544,120544],"mapped",[961]],[[120545,120545],"mapped",[960]],[[120546,120546],"mapped",[945]],[[120547,120547],"mapped",[946]],[[120548,120548],"mapped",[947]],[[120549,120549],"mapped",[948]],[[120550,120550],"mapped",[949]],[[120551,120551],"mapped",[950]],[[120552,120552],"mapped",[951]],[[120553,120553],"mapped",[952]],[[120554,120554],"mapped",[953]],[[120555,120555],"mapped",[954]],[[120556,120556],"mapped",[955]],[[120557,120557],"mapped",[956]],[[120558,120558],"mapped",[957]],[[120559,120559],"mapped",[958]],[[120560,120560],"mapped",[959]],[[120561,120561],"mapped",[960]],[[120562,120562],"mapped",[961]],[[120563,120563],"mapped",[952]],[[120564,120564],"mapped",[963]],[[120565,120565],"mapped",[964]],[[120566,120566],"mapped",[965]],[[120567,120567],"mapped",[966]],[[120568,120568],"mapped",[967]],[[120569,120569],"mapped",[968]],[[120570,120570],"mapped",[969]],[[120571,120571],"mapped",[8711]],[[120572,120572],"mapped",[945]],[[120573,120573],"mapped",[946]],[[120574,120574],"mapped",[947]],[[120575,120575],"mapped",[948]],[[120576,120576],"mapped",[949]],[[120577,120577],"mapped",[950]],[[120578,120578],"mapped",[951]],[[120579,120579],"mapped",[952]],[[120580,120580],"mapped",[953]],[[120581,120581],"mapped",[954]],[[120582,120582],"mapped",[955]],[[120583,120583],"mapped",[956]],[[120584,120584],"mapped",[957]],[[120585,120585],"mapped",[958]],[[120586,120586],"mapped",[959]],[[120587,120587],"mapped",[960]],[[120588,120588],"mapped",[961]],[[120589,120590],"mapped",[963]],[[120591,120591],"mapped",[964]],[[120592,120592],"mapped",[965]],[[120593,120593],"mapped",[966]],[[120594,120594],"mapped",[967]],[[120595,120595],"mapped",[968]],[[120596,120596],"mapped",[969]],[[120597,120597],"mapped",[8706]],[[120598,120598],"mapped",[949]],[[120599,120599],"mapped",[952]],[[120600,120600],"mapped",[954]],[[120601,120601],"mapped",[966]],[[120602,120602],"mapped",[961]],[[120603,120603],"mapped",[960]],[[120604,120604],"mapped",[945]],[[120605,120605],"mapped",[946]],[[120606,120606],"mapped",[947]],[[120607,120607],"mapped",[948]],[[120608,120608],"mapped",[949]],[[120609,120609],"mapped",[950]],[[120610,120610],"mapped",[951]],[[120611,120611],"mapped",[952]],[[120612,120612],"mapped",[953]],[[120613,120613],"mapped",[954]],[[120614,120614],"mapped",[955]],[[120615,120615],"mapped",[956]],[[120616,120616],"mapped",[957]],[[120617,120617],"mapped",[958]],[[120618,120618],"mapped",[959]],[[120619,120619],"mapped",[960]],[[120620,120620],"mapped",[961]],[[120621,120621],"mapped",[952]],[[120622,120622],"mapped",[963]],[[120623,120623],"mapped",[964]],[[120624,120624],"mapped",[965]],[[120625,120625],"mapped",[966]],[[120626,120626],"mapped",[967]],[[120627,120627],"mapped",[968]],[[120628,120628],"mapped",[969]],[[120629,120629],"mapped",[8711]],[[120630,120630],"mapped",[945]],[[120631,120631],"mapped",[946]],[[120632,120632],"mapped",[947]],[[120633,120633],"mapped",[948]],[[120634,120634],"mapped",[949]],[[120635,120635],"mapped",[950]],[[120636,120636],"mapped",[951]],[[120637,120637],"mapped",[952]],[[120638,120638],"mapped",[953]],[[120639,120639],"mapped",[954]],[[120640,120640],"mapped",[955]],[[120641,120641],"mapped",[956]],[[120642,120642],"mapped",[957]],[[120643,120643],"mapped",[958]],[[120644,120644],"mapped",[959]],[[120645,120645],"mapped",[960]],[[120646,120646],"mapped",[961]],[[120647,120648],"mapped",[963]],[[120649,120649],"mapped",[964]],[[120650,120650],"mapped",[965]],[[120651,120651],"mapped",[966]],[[120652,120652],"mapped",[967]],[[120653,120653],"mapped",[968]],[[120654,120654],"mapped",[969]],[[120655,120655],"mapped",[8706]],[[120656,120656],"mapped",[949]],[[120657,120657],"mapped",[952]],[[120658,120658],"mapped",[954]],[[120659,120659],"mapped",[966]],[[120660,120660],"mapped",[961]],[[120661,120661],"mapped",[960]],[[120662,120662],"mapped",[945]],[[120663,120663],"mapped",[946]],[[120664,120664],"mapped",[947]],[[120665,120665],"mapped",[948]],[[120666,120666],"mapped",[949]],[[120667,120667],"mapped",[950]],[[120668,120668],"mapped",[951]],[[120669,120669],"mapped",[952]],[[120670,120670],"mapped",[953]],[[120671,120671],"mapped",[954]],[[120672,120672],"mapped",[955]],[[120673,120673],"mapped",[956]],[[120674,120674],"mapped",[957]],[[120675,120675],"mapped",[958]],[[120676,120676],"mapped",[959]],[[120677,120677],"mapped",[960]],[[120678,120678],"mapped",[961]],[[120679,120679],"mapped",[952]],[[120680,120680],"mapped",[963]],[[120681,120681],"mapped",[964]],[[120682,120682],"mapped",[965]],[[120683,120683],"mapped",[966]],[[120684,120684],"mapped",[967]],[[120685,120685],"mapped",[968]],[[120686,120686],"mapped",[969]],[[120687,120687],"mapped",[8711]],[[120688,120688],"mapped",[945]],[[120689,120689],"mapped",[946]],[[120690,120690],"mapped",[947]],[[120691,120691],"mapped",[948]],[[120692,120692],"mapped",[949]],[[120693,120693],"mapped",[950]],[[120694,120694],"mapped",[951]],[[120695,120695],"mapped",[952]],[[120696,120696],"mapped",[953]],[[120697,120697],"mapped",[954]],[[120698,120698],"mapped",[955]],[[120699,120699],"mapped",[956]],[[120700,120700],"mapped",[957]],[[120701,120701],"mapped",[958]],[[120702,120702],"mapped",[959]],[[120703,120703],"mapped",[960]],[[120704,120704],"mapped",[961]],[[120705,120706],"mapped",[963]],[[120707,120707],"mapped",[964]],[[120708,120708],"mapped",[965]],[[120709,120709],"mapped",[966]],[[120710,120710],"mapped",[967]],[[120711,120711],"mapped",[968]],[[120712,120712],"mapped",[969]],[[120713,120713],"mapped",[8706]],[[120714,120714],"mapped",[949]],[[120715,120715],"mapped",[952]],[[120716,120716],"mapped",[954]],[[120717,120717],"mapped",[966]],[[120718,120718],"mapped",[961]],[[120719,120719],"mapped",[960]],[[120720,120720],"mapped",[945]],[[120721,120721],"mapped",[946]],[[120722,120722],"mapped",[947]],[[120723,120723],"mapped",[948]],[[120724,120724],"mapped",[949]],[[120725,120725],"mapped",[950]],[[120726,120726],"mapped",[951]],[[120727,120727],"mapped",[952]],[[120728,120728],"mapped",[953]],[[120729,120729],"mapped",[954]],[[120730,120730],"mapped",[955]],[[120731,120731],"mapped",[956]],[[120732,120732],"mapped",[957]],[[120733,120733],"mapped",[958]],[[120734,120734],"mapped",[959]],[[120735,120735],"mapped",[960]],[[120736,120736],"mapped",[961]],[[120737,120737],"mapped",[952]],[[120738,120738],"mapped",[963]],[[120739,120739],"mapped",[964]],[[120740,120740],"mapped",[965]],[[120741,120741],"mapped",[966]],[[120742,120742],"mapped",[967]],[[120743,120743],"mapped",[968]],[[120744,120744],"mapped",[969]],[[120745,120745],"mapped",[8711]],[[120746,120746],"mapped",[945]],[[120747,120747],"mapped",[946]],[[120748,120748],"mapped",[947]],[[120749,120749],"mapped",[948]],[[120750,120750],"mapped",[949]],[[120751,120751],"mapped",[950]],[[120752,120752],"mapped",[951]],[[120753,120753],"mapped",[952]],[[120754,120754],"mapped",[953]],[[120755,120755],"mapped",[954]],[[120756,120756],"mapped",[955]],[[120757,120757],"mapped",[956]],[[120758,120758],"mapped",[957]],[[120759,120759],"mapped",[958]],[[120760,120760],"mapped",[959]],[[120761,120761],"mapped",[960]],[[120762,120762],"mapped",[961]],[[120763,120764],"mapped",[963]],[[120765,120765],"mapped",[964]],[[120766,120766],"mapped",[965]],[[120767,120767],"mapped",[966]],[[120768,120768],"mapped",[967]],[[120769,120769],"mapped",[968]],[[120770,120770],"mapped",[969]],[[120771,120771],"mapped",[8706]],[[120772,120772],"mapped",[949]],[[120773,120773],"mapped",[952]],[[120774,120774],"mapped",[954]],[[120775,120775],"mapped",[966]],[[120776,120776],"mapped",[961]],[[120777,120777],"mapped",[960]],[[120778,120779],"mapped",[989]],[[120780,120781],"disallowed"],[[120782,120782],"mapped",[48]],[[120783,120783],"mapped",[49]],[[120784,120784],"mapped",[50]],[[120785,120785],"mapped",[51]],[[120786,120786],"mapped",[52]],[[120787,120787],"mapped",[53]],[[120788,120788],"mapped",[54]],[[120789,120789],"mapped",[55]],[[120790,120790],"mapped",[56]],[[120791,120791],"mapped",[57]],[[120792,120792],"mapped",[48]],[[120793,120793],"mapped",[49]],[[120794,120794],"mapped",[50]],[[120795,120795],"mapped",[51]],[[120796,120796],"mapped",[52]],[[120797,120797],"mapped",[53]],[[120798,120798],"mapped",[54]],[[120799,120799],"mapped",[55]],[[120800,120800],"mapped",[56]],[[120801,120801],"mapped",[57]],[[120802,120802],"mapped",[48]],[[120803,120803],"mapped",[49]],[[120804,120804],"mapped",[50]],[[120805,120805],"mapped",[51]],[[120806,120806],"mapped",[52]],[[120807,120807],"mapped",[53]],[[120808,120808],"mapped",[54]],[[120809,120809],"mapped",[55]],[[120810,120810],"mapped",[56]],[[120811,120811],"mapped",[57]],[[120812,120812],"mapped",[48]],[[120813,120813],"mapped",[49]],[[120814,120814],"mapped",[50]],[[120815,120815],"mapped",[51]],[[120816,120816],"mapped",[52]],[[120817,120817],"mapped",[53]],[[120818,120818],"mapped",[54]],[[120819,120819],"mapped",[55]],[[120820,120820],"mapped",[56]],[[120821,120821],"mapped",[57]],[[120822,120822],"mapped",[48]],[[120823,120823],"mapped",[49]],[[120824,120824],"mapped",[50]],[[120825,120825],"mapped",[51]],[[120826,120826],"mapped",[52]],[[120827,120827],"mapped",[53]],[[120828,120828],"mapped",[54]],[[120829,120829],"mapped",[55]],[[120830,120830],"mapped",[56]],[[120831,120831],"mapped",[57]],[[120832,121343],"valid",[],"NV8"],[[121344,121398],"valid"],[[121399,121402],"valid",[],"NV8"],[[121403,121452],"valid"],[[121453,121460],"valid",[],"NV8"],[[121461,121461],"valid"],[[121462,121475],"valid",[],"NV8"],[[121476,121476],"valid"],[[121477,121483],"valid",[],"NV8"],[[121484,121498],"disallowed"],[[121499,121503],"valid"],[[121504,121504],"disallowed"],[[121505,121519],"valid"],[[121520,124927],"disallowed"],[[124928,125124],"valid"],[[125125,125126],"disallowed"],[[125127,125135],"valid",[],"NV8"],[[125136,125142],"valid"],[[125143,126463],"disallowed"],[[126464,126464],"mapped",[1575]],[[126465,126465],"mapped",[1576]],[[126466,126466],"mapped",[1580]],[[126467,126467],"mapped",[1583]],[[126468,126468],"disallowed"],[[126469,126469],"mapped",[1608]],[[126470,126470],"mapped",[1586]],[[126471,126471],"mapped",[1581]],[[126472,126472],"mapped",[1591]],[[126473,126473],"mapped",[1610]],[[126474,126474],"mapped",[1603]],[[126475,126475],"mapped",[1604]],[[126476,126476],"mapped",[1605]],[[126477,126477],"mapped",[1606]],[[126478,126478],"mapped",[1587]],[[126479,126479],"mapped",[1593]],[[126480,126480],"mapped",[1601]],[[126481,126481],"mapped",[1589]],[[126482,126482],"mapped",[1602]],[[126483,126483],"mapped",[1585]],[[126484,126484],"mapped",[1588]],[[126485,126485],"mapped",[1578]],[[126486,126486],"mapped",[1579]],[[126487,126487],"mapped",[1582]],[[126488,126488],"mapped",[1584]],[[126489,126489],"mapped",[1590]],[[126490,126490],"mapped",[1592]],[[126491,126491],"mapped",[1594]],[[126492,126492],"mapped",[1646]],[[126493,126493],"mapped",[1722]],[[126494,126494],"mapped",[1697]],[[126495,126495],"mapped",[1647]],[[126496,126496],"disallowed"],[[126497,126497],"mapped",[1576]],[[126498,126498],"mapped",[1580]],[[126499,126499],"disallowed"],[[126500,126500],"mapped",[1607]],[[126501,126502],"disallowed"],[[126503,126503],"mapped",[1581]],[[126504,126504],"disallowed"],[[126505,126505],"mapped",[1610]],[[126506,126506],"mapped",[1603]],[[126507,126507],"mapped",[1604]],[[126508,126508],"mapped",[1605]],[[126509,126509],"mapped",[1606]],[[126510,126510],"mapped",[1587]],[[126511,126511],"mapped",[1593]],[[126512,126512],"mapped",[1601]],[[126513,126513],"mapped",[1589]],[[126514,126514],"mapped",[1602]],[[126515,126515],"disallowed"],[[126516,126516],"mapped",[1588]],[[126517,126517],"mapped",[1578]],[[126518,126518],"mapped",[1579]],[[126519,126519],"mapped",[1582]],[[126520,126520],"disallowed"],[[126521,126521],"mapped",[1590]],[[126522,126522],"disallowed"],[[126523,126523],"mapped",[1594]],[[126524,126529],"disallowed"],[[126530,126530],"mapped",[1580]],[[126531,126534],"disallowed"],[[126535,126535],"mapped",[1581]],[[126536,126536],"disallowed"],[[126537,126537],"mapped",[1610]],[[126538,126538],"disallowed"],[[126539,126539],"mapped",[1604]],[[126540,126540],"disallowed"],[[126541,126541],"mapped",[1606]],[[126542,126542],"mapped",[1587]],[[126543,126543],"mapped",[1593]],[[126544,126544],"disallowed"],[[126545,126545],"mapped",[1589]],[[126546,126546],"mapped",[1602]],[[126547,126547],"disallowed"],[[126548,126548],"mapped",[1588]],[[126549,126550],"disallowed"],[[126551,126551],"mapped",[1582]],[[126552,126552],"disallowed"],[[126553,126553],"mapped",[1590]],[[126554,126554],"disallowed"],[[126555,126555],"mapped",[1594]],[[126556,126556],"disallowed"],[[126557,126557],"mapped",[1722]],[[126558,126558],"disallowed"],[[126559,126559],"mapped",[1647]],[[126560,126560],"disallowed"],[[126561,126561],"mapped",[1576]],[[126562,126562],"mapped",[1580]],[[126563,126563],"disallowed"],[[126564,126564],"mapped",[1607]],[[126565,126566],"disallowed"],[[126567,126567],"mapped",[1581]],[[126568,126568],"mapped",[1591]],[[126569,126569],"mapped",[1610]],[[126570,126570],"mapped",[1603]],[[126571,126571],"disallowed"],[[126572,126572],"mapped",[1605]],[[126573,126573],"mapped",[1606]],[[126574,126574],"mapped",[1587]],[[126575,126575],"mapped",[1593]],[[126576,126576],"mapped",[1601]],[[126577,126577],"mapped",[1589]],[[126578,126578],"mapped",[1602]],[[126579,126579],"disallowed"],[[126580,126580],"mapped",[1588]],[[126581,126581],"mapped",[1578]],[[126582,126582],"mapped",[1579]],[[126583,126583],"mapped",[1582]],[[126584,126584],"disallowed"],[[126585,126585],"mapped",[1590]],[[126586,126586],"mapped",[1592]],[[126587,126587],"mapped",[1594]],[[126588,126588],"mapped",[1646]],[[126589,126589],"disallowed"],[[126590,126590],"mapped",[1697]],[[126591,126591],"disallowed"],[[126592,126592],"mapped",[1575]],[[126593,126593],"mapped",[1576]],[[126594,126594],"mapped",[1580]],[[126595,126595],"mapped",[1583]],[[126596,126596],"mapped",[1607]],[[126597,126597],"mapped",[1608]],[[126598,126598],"mapped",[1586]],[[126599,126599],"mapped",[1581]],[[126600,126600],"mapped",[1591]],[[126601,126601],"mapped",[1610]],[[126602,126602],"disallowed"],[[126603,126603],"mapped",[1604]],[[126604,126604],"mapped",[1605]],[[126605,126605],"mapped",[1606]],[[126606,126606],"mapped",[1587]],[[126607,126607],"mapped",[1593]],[[126608,126608],"mapped",[1601]],[[126609,126609],"mapped",[1589]],[[126610,126610],"mapped",[1602]],[[126611,126611],"mapped",[1585]],[[126612,126612],"mapped",[1588]],[[126613,126613],"mapped",[1578]],[[126614,126614],"mapped",[1579]],[[126615,126615],"mapped",[1582]],[[126616,126616],"mapped",[1584]],[[126617,126617],"mapped",[1590]],[[126618,126618],"mapped",[1592]],[[126619,126619],"mapped",[1594]],[[126620,126624],"disallowed"],[[126625,126625],"mapped",[1576]],[[126626,126626],"mapped",[1580]],[[126627,126627],"mapped",[1583]],[[126628,126628],"disallowed"],[[126629,126629],"mapped",[1608]],[[126630,126630],"mapped",[1586]],[[126631,126631],"mapped",[1581]],[[126632,126632],"mapped",[1591]],[[126633,126633],"mapped",[1610]],[[126634,126634],"disallowed"],[[126635,126635],"mapped",[1604]],[[126636,126636],"mapped",[1605]],[[126637,126637],"mapped",[1606]],[[126638,126638],"mapped",[1587]],[[126639,126639],"mapped",[1593]],[[126640,126640],"mapped",[1601]],[[126641,126641],"mapped",[1589]],[[126642,126642],"mapped",[1602]],[[126643,126643],"mapped",[1585]],[[126644,126644],"mapped",[1588]],[[126645,126645],"mapped",[1578]],[[126646,126646],"mapped",[1579]],[[126647,126647],"mapped",[1582]],[[126648,126648],"mapped",[1584]],[[126649,126649],"mapped",[1590]],[[126650,126650],"mapped",[1592]],[[126651,126651],"mapped",[1594]],[[126652,126703],"disallowed"],[[126704,126705],"valid",[],"NV8"],[[126706,126975],"disallowed"],[[126976,127019],"valid",[],"NV8"],[[127020,127023],"disallowed"],[[127024,127123],"valid",[],"NV8"],[[127124,127135],"disallowed"],[[127136,127150],"valid",[],"NV8"],[[127151,127152],"disallowed"],[[127153,127166],"valid",[],"NV8"],[[127167,127167],"valid",[],"NV8"],[[127168,127168],"disallowed"],[[127169,127183],"valid",[],"NV8"],[[127184,127184],"disallowed"],[[127185,127199],"valid",[],"NV8"],[[127200,127221],"valid",[],"NV8"],[[127222,127231],"disallowed"],[[127232,127232],"disallowed"],[[127233,127233],"disallowed_STD3_mapped",[48,44]],[[127234,127234],"disallowed_STD3_mapped",[49,44]],[[127235,127235],"disallowed_STD3_mapped",[50,44]],[[127236,127236],"disallowed_STD3_mapped",[51,44]],[[127237,127237],"disallowed_STD3_mapped",[52,44]],[[127238,127238],"disallowed_STD3_mapped",[53,44]],[[127239,127239],"disallowed_STD3_mapped",[54,44]],[[127240,127240],"disallowed_STD3_mapped",[55,44]],[[127241,127241],"disallowed_STD3_mapped",[56,44]],[[127242,127242],"disallowed_STD3_mapped",[57,44]],[[127243,127244],"valid",[],"NV8"],[[127245,127247],"disallowed"],[[127248,127248],"disallowed_STD3_mapped",[40,97,41]],[[127249,127249],"disallowed_STD3_mapped",[40,98,41]],[[127250,127250],"disallowed_STD3_mapped",[40,99,41]],[[127251,127251],"disallowed_STD3_mapped",[40,100,41]],[[127252,127252],"disallowed_STD3_mapped",[40,101,41]],[[127253,127253],"disallowed_STD3_mapped",[40,102,41]],[[127254,127254],"disallowed_STD3_mapped",[40,103,41]],[[127255,127255],"disallowed_STD3_mapped",[40,104,41]],[[127256,127256],"disallowed_STD3_mapped",[40,105,41]],[[127257,127257],"disallowed_STD3_mapped",[40,106,41]],[[127258,127258],"disallowed_STD3_mapped",[40,107,41]],[[127259,127259],"disallowed_STD3_mapped",[40,108,41]],[[127260,127260],"disallowed_STD3_mapped",[40,109,41]],[[127261,127261],"disallowed_STD3_mapped",[40,110,41]],[[127262,127262],"disallowed_STD3_mapped",[40,111,41]],[[127263,127263],"disallowed_STD3_mapped",[40,112,41]],[[127264,127264],"disallowed_STD3_mapped",[40,113,41]],[[127265,127265],"disallowed_STD3_mapped",[40,114,41]],[[127266,127266],"disallowed_STD3_mapped",[40,115,41]],[[127267,127267],"disallowed_STD3_mapped",[40,116,41]],[[127268,127268],"disallowed_STD3_mapped",[40,117,41]],[[127269,127269],"disallowed_STD3_mapped",[40,118,41]],[[127270,127270],"disallowed_STD3_mapped",[40,119,41]],[[127271,127271],"disallowed_STD3_mapped",[40,120,41]],[[127272,127272],"disallowed_STD3_mapped",[40,121,41]],[[127273,127273],"disallowed_STD3_mapped",[40,122,41]],[[127274,127274],"mapped",[12308,115,12309]],[[127275,127275],"mapped",[99]],[[127276,127276],"mapped",[114]],[[127277,127277],"mapped",[99,100]],[[127278,127278],"mapped",[119,122]],[[127279,127279],"disallowed"],[[127280,127280],"mapped",[97]],[[127281,127281],"mapped",[98]],[[127282,127282],"mapped",[99]],[[127283,127283],"mapped",[100]],[[127284,127284],"mapped",[101]],[[127285,127285],"mapped",[102]],[[127286,127286],"mapped",[103]],[[127287,127287],"mapped",[104]],[[127288,127288],"mapped",[105]],[[127289,127289],"mapped",[106]],[[127290,127290],"mapped",[107]],[[127291,127291],"mapped",[108]],[[127292,127292],"mapped",[109]],[[127293,127293],"mapped",[110]],[[127294,127294],"mapped",[111]],[[127295,127295],"mapped",[112]],[[127296,127296],"mapped",[113]],[[127297,127297],"mapped",[114]],[[127298,127298],"mapped",[115]],[[127299,127299],"mapped",[116]],[[127300,127300],"mapped",[117]],[[127301,127301],"mapped",[118]],[[127302,127302],"mapped",[119]],[[127303,127303],"mapped",[120]],[[127304,127304],"mapped",[121]],[[127305,127305],"mapped",[122]],[[127306,127306],"mapped",[104,118]],[[127307,127307],"mapped",[109,118]],[[127308,127308],"mapped",[115,100]],[[127309,127309],"mapped",[115,115]],[[127310,127310],"mapped",[112,112,118]],[[127311,127311],"mapped",[119,99]],[[127312,127318],"valid",[],"NV8"],[[127319,127319],"valid",[],"NV8"],[[127320,127326],"valid",[],"NV8"],[[127327,127327],"valid",[],"NV8"],[[127328,127337],"valid",[],"NV8"],[[127338,127338],"mapped",[109,99]],[[127339,127339],"mapped",[109,100]],[[127340,127343],"disallowed"],[[127344,127352],"valid",[],"NV8"],[[127353,127353],"valid",[],"NV8"],[[127354,127354],"valid",[],"NV8"],[[127355,127356],"valid",[],"NV8"],[[127357,127358],"valid",[],"NV8"],[[127359,127359],"valid",[],"NV8"],[[127360,127369],"valid",[],"NV8"],[[127370,127373],"valid",[],"NV8"],[[127374,127375],"valid",[],"NV8"],[[127376,127376],"mapped",[100,106]],[[127377,127386],"valid",[],"NV8"],[[127387,127461],"disallowed"],[[127462,127487],"valid",[],"NV8"],[[127488,127488],"mapped",[12411,12363]],[[127489,127489],"mapped",[12467,12467]],[[127490,127490],"mapped",[12469]],[[127491,127503],"disallowed"],[[127504,127504],"mapped",[25163]],[[127505,127505],"mapped",[23383]],[[127506,127506],"mapped",[21452]],[[127507,127507],"mapped",[12487]],[[127508,127508],"mapped",[20108]],[[127509,127509],"mapped",[22810]],[[127510,127510],"mapped",[35299]],[[127511,127511],"mapped",[22825]],[[127512,127512],"mapped",[20132]],[[127513,127513],"mapped",[26144]],[[127514,127514],"mapped",[28961]],[[127515,127515],"mapped",[26009]],[[127516,127516],"mapped",[21069]],[[127517,127517],"mapped",[24460]],[[127518,127518],"mapped",[20877]],[[127519,127519],"mapped",[26032]],[[127520,127520],"mapped",[21021]],[[127521,127521],"mapped",[32066]],[[127522,127522],"mapped",[29983]],[[127523,127523],"mapped",[36009]],[[127524,127524],"mapped",[22768]],[[127525,127525],"mapped",[21561]],[[127526,127526],"mapped",[28436]],[[127527,127527],"mapped",[25237]],[[127528,127528],"mapped",[25429]],[[127529,127529],"mapped",[19968]],[[127530,127530],"mapped",[19977]],[[127531,127531],"mapped",[36938]],[[127532,127532],"mapped",[24038]],[[127533,127533],"mapped",[20013]],[[127534,127534],"mapped",[21491]],[[127535,127535],"mapped",[25351]],[[127536,127536],"mapped",[36208]],[[127537,127537],"mapped",[25171]],[[127538,127538],"mapped",[31105]],[[127539,127539],"mapped",[31354]],[[127540,127540],"mapped",[21512]],[[127541,127541],"mapped",[28288]],[[127542,127542],"mapped",[26377]],[[127543,127543],"mapped",[26376]],[[127544,127544],"mapped",[30003]],[[127545,127545],"mapped",[21106]],[[127546,127546],"mapped",[21942]],[[127547,127551],"disallowed"],[[127552,127552],"mapped",[12308,26412,12309]],[[127553,127553],"mapped",[12308,19977,12309]],[[127554,127554],"mapped",[12308,20108,12309]],[[127555,127555],"mapped",[12308,23433,12309]],[[127556,127556],"mapped",[12308,28857,12309]],[[127557,127557],"mapped",[12308,25171,12309]],[[127558,127558],"mapped",[12308,30423,12309]],[[127559,127559],"mapped",[12308,21213,12309]],[[127560,127560],"mapped",[12308,25943,12309]],[[127561,127567],"disallowed"],[[127568,127568],"mapped",[24471]],[[127569,127569],"mapped",[21487]],[[127570,127743],"disallowed"],[[127744,127776],"valid",[],"NV8"],[[127777,127788],"valid",[],"NV8"],[[127789,127791],"valid",[],"NV8"],[[127792,127797],"valid",[],"NV8"],[[127798,127798],"valid",[],"NV8"],[[127799,127868],"valid",[],"NV8"],[[127869,127869],"valid",[],"NV8"],[[127870,127871],"valid",[],"NV8"],[[127872,127891],"valid",[],"NV8"],[[127892,127903],"valid",[],"NV8"],[[127904,127940],"valid",[],"NV8"],[[127941,127941],"valid",[],"NV8"],[[127942,127946],"valid",[],"NV8"],[[127947,127950],"valid",[],"NV8"],[[127951,127955],"valid",[],"NV8"],[[127956,127967],"valid",[],"NV8"],[[127968,127984],"valid",[],"NV8"],[[127985,127991],"valid",[],"NV8"],[[127992,127999],"valid",[],"NV8"],[[128000,128062],"valid",[],"NV8"],[[128063,128063],"valid",[],"NV8"],[[128064,128064],"valid",[],"NV8"],[[128065,128065],"valid",[],"NV8"],[[128066,128247],"valid",[],"NV8"],[[128248,128248],"valid",[],"NV8"],[[128249,128252],"valid",[],"NV8"],[[128253,128254],"valid",[],"NV8"],[[128255,128255],"valid",[],"NV8"],[[128256,128317],"valid",[],"NV8"],[[128318,128319],"valid",[],"NV8"],[[128320,128323],"valid",[],"NV8"],[[128324,128330],"valid",[],"NV8"],[[128331,128335],"valid",[],"NV8"],[[128336,128359],"valid",[],"NV8"],[[128360,128377],"valid",[],"NV8"],[[128378,128378],"disallowed"],[[128379,128419],"valid",[],"NV8"],[[128420,128420],"disallowed"],[[128421,128506],"valid",[],"NV8"],[[128507,128511],"valid",[],"NV8"],[[128512,128512],"valid",[],"NV8"],[[128513,128528],"valid",[],"NV8"],[[128529,128529],"valid",[],"NV8"],[[128530,128532],"valid",[],"NV8"],[[128533,128533],"valid",[],"NV8"],[[128534,128534],"valid",[],"NV8"],[[128535,128535],"valid",[],"NV8"],[[128536,128536],"valid",[],"NV8"],[[128537,128537],"valid",[],"NV8"],[[128538,128538],"valid",[],"NV8"],[[128539,128539],"valid",[],"NV8"],[[128540,128542],"valid",[],"NV8"],[[128543,128543],"valid",[],"NV8"],[[128544,128549],"valid",[],"NV8"],[[128550,128551],"valid",[],"NV8"],[[128552,128555],"valid",[],"NV8"],[[128556,128556],"valid",[],"NV8"],[[128557,128557],"valid",[],"NV8"],[[128558,128559],"valid",[],"NV8"],[[128560,128563],"valid",[],"NV8"],[[128564,128564],"valid",[],"NV8"],[[128565,128576],"valid",[],"NV8"],[[128577,128578],"valid",[],"NV8"],[[128579,128580],"valid",[],"NV8"],[[128581,128591],"valid",[],"NV8"],[[128592,128639],"valid",[],"NV8"],[[128640,128709],"valid",[],"NV8"],[[128710,128719],"valid",[],"NV8"],[[128720,128720],"valid",[],"NV8"],[[128721,128735],"disallowed"],[[128736,128748],"valid",[],"NV8"],[[128749,128751],"disallowed"],[[128752,128755],"valid",[],"NV8"],[[128756,128767],"disallowed"],[[128768,128883],"valid",[],"NV8"],[[128884,128895],"disallowed"],[[128896,128980],"valid",[],"NV8"],[[128981,129023],"disallowed"],[[129024,129035],"valid",[],"NV8"],[[129036,129039],"disallowed"],[[129040,129095],"valid",[],"NV8"],[[129096,129103],"disallowed"],[[129104,129113],"valid",[],"NV8"],[[129114,129119],"disallowed"],[[129120,129159],"valid",[],"NV8"],[[129160,129167],"disallowed"],[[129168,129197],"valid",[],"NV8"],[[129198,129295],"disallowed"],[[129296,129304],"valid",[],"NV8"],[[129305,129407],"disallowed"],[[129408,129412],"valid",[],"NV8"],[[129413,129471],"disallowed"],[[129472,129472],"valid",[],"NV8"],[[129473,131069],"disallowed"],[[131070,131071],"disallowed"],[[131072,173782],"valid"],[[173783,173823],"disallowed"],[[173824,177972],"valid"],[[177973,177983],"disallowed"],[[177984,178205],"valid"],[[178206,178207],"disallowed"],[[178208,183969],"valid"],[[183970,194559],"disallowed"],[[194560,194560],"mapped",[20029]],[[194561,194561],"mapped",[20024]],[[194562,194562],"mapped",[20033]],[[194563,194563],"mapped",[131362]],[[194564,194564],"mapped",[20320]],[[194565,194565],"mapped",[20398]],[[194566,194566],"mapped",[20411]],[[194567,194567],"mapped",[20482]],[[194568,194568],"mapped",[20602]],[[194569,194569],"mapped",[20633]],[[194570,194570],"mapped",[20711]],[[194571,194571],"mapped",[20687]],[[194572,194572],"mapped",[13470]],[[194573,194573],"mapped",[132666]],[[194574,194574],"mapped",[20813]],[[194575,194575],"mapped",[20820]],[[194576,194576],"mapped",[20836]],[[194577,194577],"mapped",[20855]],[[194578,194578],"mapped",[132380]],[[194579,194579],"mapped",[13497]],[[194580,194580],"mapped",[20839]],[[194581,194581],"mapped",[20877]],[[194582,194582],"mapped",[132427]],[[194583,194583],"mapped",[20887]],[[194584,194584],"mapped",[20900]],[[194585,194585],"mapped",[20172]],[[194586,194586],"mapped",[20908]],[[194587,194587],"mapped",[20917]],[[194588,194588],"mapped",[168415]],[[194589,194589],"mapped",[20981]],[[194590,194590],"mapped",[20995]],[[194591,194591],"mapped",[13535]],[[194592,194592],"mapped",[21051]],[[194593,194593],"mapped",[21062]],[[194594,194594],"mapped",[21106]],[[194595,194595],"mapped",[21111]],[[194596,194596],"mapped",[13589]],[[194597,194597],"mapped",[21191]],[[194598,194598],"mapped",[21193]],[[194599,194599],"mapped",[21220]],[[194600,194600],"mapped",[21242]],[[194601,194601],"mapped",[21253]],[[194602,194602],"mapped",[21254]],[[194603,194603],"mapped",[21271]],[[194604,194604],"mapped",[21321]],[[194605,194605],"mapped",[21329]],[[194606,194606],"mapped",[21338]],[[194607,194607],"mapped",[21363]],[[194608,194608],"mapped",[21373]],[[194609,194611],"mapped",[21375]],[[194612,194612],"mapped",[133676]],[[194613,194613],"mapped",[28784]],[[194614,194614],"mapped",[21450]],[[194615,194615],"mapped",[21471]],[[194616,194616],"mapped",[133987]],[[194617,194617],"mapped",[21483]],[[194618,194618],"mapped",[21489]],[[194619,194619],"mapped",[21510]],[[194620,194620],"mapped",[21662]],[[194621,194621],"mapped",[21560]],[[194622,194622],"mapped",[21576]],[[194623,194623],"mapped",[21608]],[[194624,194624],"mapped",[21666]],[[194625,194625],"mapped",[21750]],[[194626,194626],"mapped",[21776]],[[194627,194627],"mapped",[21843]],[[194628,194628],"mapped",[21859]],[[194629,194630],"mapped",[21892]],[[194631,194631],"mapped",[21913]],[[194632,194632],"mapped",[21931]],[[194633,194633],"mapped",[21939]],[[194634,194634],"mapped",[21954]],[[194635,194635],"mapped",[22294]],[[194636,194636],"mapped",[22022]],[[194637,194637],"mapped",[22295]],[[194638,194638],"mapped",[22097]],[[194639,194639],"mapped",[22132]],[[194640,194640],"mapped",[20999]],[[194641,194641],"mapped",[22766]],[[194642,194642],"mapped",[22478]],[[194643,194643],"mapped",[22516]],[[194644,194644],"mapped",[22541]],[[194645,194645],"mapped",[22411]],[[194646,194646],"mapped",[22578]],[[194647,194647],"mapped",[22577]],[[194648,194648],"mapped",[22700]],[[194649,194649],"mapped",[136420]],[[194650,194650],"mapped",[22770]],[[194651,194651],"mapped",[22775]],[[194652,194652],"mapped",[22790]],[[194653,194653],"mapped",[22810]],[[194654,194654],"mapped",[22818]],[[194655,194655],"mapped",[22882]],[[194656,194656],"mapped",[136872]],[[194657,194657],"mapped",[136938]],[[194658,194658],"mapped",[23020]],[[194659,194659],"mapped",[23067]],[[194660,194660],"mapped",[23079]],[[194661,194661],"mapped",[23000]],[[194662,194662],"mapped",[23142]],[[194663,194663],"mapped",[14062]],[[194664,194664],"disallowed"],[[194665,194665],"mapped",[23304]],[[194666,194667],"mapped",[23358]],[[194668,194668],"mapped",[137672]],[[194669,194669],"mapped",[23491]],[[194670,194670],"mapped",[23512]],[[194671,194671],"mapped",[23527]],[[194672,194672],"mapped",[23539]],[[194673,194673],"mapped",[138008]],[[194674,194674],"mapped",[23551]],[[194675,194675],"mapped",[23558]],[[194676,194676],"disallowed"],[[194677,194677],"mapped",[23586]],[[194678,194678],"mapped",[14209]],[[194679,194679],"mapped",[23648]],[[194680,194680],"mapped",[23662]],[[194681,194681],"mapped",[23744]],[[194682,194682],"mapped",[23693]],[[194683,194683],"mapped",[138724]],[[194684,194684],"mapped",[23875]],[[194685,194685],"mapped",[138726]],[[194686,194686],"mapped",[23918]],[[194687,194687],"mapped",[23915]],[[194688,194688],"mapped",[23932]],[[194689,194689],"mapped",[24033]],[[194690,194690],"mapped",[24034]],[[194691,194691],"mapped",[14383]],[[194692,194692],"mapped",[24061]],[[194693,194693],"mapped",[24104]],[[194694,194694],"mapped",[24125]],[[194695,194695],"mapped",[24169]],[[194696,194696],"mapped",[14434]],[[194697,194697],"mapped",[139651]],[[194698,194698],"mapped",[14460]],[[194699,194699],"mapped",[24240]],[[194700,194700],"mapped",[24243]],[[194701,194701],"mapped",[24246]],[[194702,194702],"mapped",[24266]],[[194703,194703],"mapped",[172946]],[[194704,194704],"mapped",[24318]],[[194705,194706],"mapped",[140081]],[[194707,194707],"mapped",[33281]],[[194708,194709],"mapped",[24354]],[[194710,194710],"mapped",[14535]],[[194711,194711],"mapped",[144056]],[[194712,194712],"mapped",[156122]],[[194713,194713],"mapped",[24418]],[[194714,194714],"mapped",[24427]],[[194715,194715],"mapped",[14563]],[[194716,194716],"mapped",[24474]],[[194717,194717],"mapped",[24525]],[[194718,194718],"mapped",[24535]],[[194719,194719],"mapped",[24569]],[[194720,194720],"mapped",[24705]],[[194721,194721],"mapped",[14650]],[[194722,194722],"mapped",[14620]],[[194723,194723],"mapped",[24724]],[[194724,194724],"mapped",[141012]],[[194725,194725],"mapped",[24775]],[[194726,194726],"mapped",[24904]],[[194727,194727],"mapped",[24908]],[[194728,194728],"mapped",[24910]],[[194729,194729],"mapped",[24908]],[[194730,194730],"mapped",[24954]],[[194731,194731],"mapped",[24974]],[[194732,194732],"mapped",[25010]],[[194733,194733],"mapped",[24996]],[[194734,194734],"mapped",[25007]],[[194735,194735],"mapped",[25054]],[[194736,194736],"mapped",[25074]],[[194737,194737],"mapped",[25078]],[[194738,194738],"mapped",[25104]],[[194739,194739],"mapped",[25115]],[[194740,194740],"mapped",[25181]],[[194741,194741],"mapped",[25265]],[[194742,194742],"mapped",[25300]],[[194743,194743],"mapped",[25424]],[[194744,194744],"mapped",[142092]],[[194745,194745],"mapped",[25405]],[[194746,194746],"mapped",[25340]],[[194747,194747],"mapped",[25448]],[[194748,194748],"mapped",[25475]],[[194749,194749],"mapped",[25572]],[[194750,194750],"mapped",[142321]],[[194751,194751],"mapped",[25634]],[[194752,194752],"mapped",[25541]],[[194753,194753],"mapped",[25513]],[[194754,194754],"mapped",[14894]],[[194755,194755],"mapped",[25705]],[[194756,194756],"mapped",[25726]],[[194757,194757],"mapped",[25757]],[[194758,194758],"mapped",[25719]],[[194759,194759],"mapped",[14956]],[[194760,194760],"mapped",[25935]],[[194761,194761],"mapped",[25964]],[[194762,194762],"mapped",[143370]],[[194763,194763],"mapped",[26083]],[[194764,194764],"mapped",[26360]],[[194765,194765],"mapped",[26185]],[[194766,194766],"mapped",[15129]],[[194767,194767],"mapped",[26257]],[[194768,194768],"mapped",[15112]],[[194769,194769],"mapped",[15076]],[[194770,194770],"mapped",[20882]],[[194771,194771],"mapped",[20885]],[[194772,194772],"mapped",[26368]],[[194773,194773],"mapped",[26268]],[[194774,194774],"mapped",[32941]],[[194775,194775],"mapped",[17369]],[[194776,194776],"mapped",[26391]],[[194777,194777],"mapped",[26395]],[[194778,194778],"mapped",[26401]],[[194779,194779],"mapped",[26462]],[[194780,194780],"mapped",[26451]],[[194781,194781],"mapped",[144323]],[[194782,194782],"mapped",[15177]],[[194783,194783],"mapped",[26618]],[[194784,194784],"mapped",[26501]],[[194785,194785],"mapped",[26706]],[[194786,194786],"mapped",[26757]],[[194787,194787],"mapped",[144493]],[[194788,194788],"mapped",[26766]],[[194789,194789],"mapped",[26655]],[[194790,194790],"mapped",[26900]],[[194791,194791],"mapped",[15261]],[[194792,194792],"mapped",[26946]],[[194793,194793],"mapped",[27043]],[[194794,194794],"mapped",[27114]],[[194795,194795],"mapped",[27304]],[[194796,194796],"mapped",[145059]],[[194797,194797],"mapped",[27355]],[[194798,194798],"mapped",[15384]],[[194799,194799],"mapped",[27425]],[[194800,194800],"mapped",[145575]],[[194801,194801],"mapped",[27476]],[[194802,194802],"mapped",[15438]],[[194803,194803],"mapped",[27506]],[[194804,194804],"mapped",[27551]],[[194805,194805],"mapped",[27578]],[[194806,194806],"mapped",[27579]],[[194807,194807],"mapped",[146061]],[[194808,194808],"mapped",[138507]],[[194809,194809],"mapped",[146170]],[[194810,194810],"mapped",[27726]],[[194811,194811],"mapped",[146620]],[[194812,194812],"mapped",[27839]],[[194813,194813],"mapped",[27853]],[[194814,194814],"mapped",[27751]],[[194815,194815],"mapped",[27926]],[[194816,194816],"mapped",[27966]],[[194817,194817],"mapped",[28023]],[[194818,194818],"mapped",[27969]],[[194819,194819],"mapped",[28009]],[[194820,194820],"mapped",[28024]],[[194821,194821],"mapped",[28037]],[[194822,194822],"mapped",[146718]],[[194823,194823],"mapped",[27956]],[[194824,194824],"mapped",[28207]],[[194825,194825],"mapped",[28270]],[[194826,194826],"mapped",[15667]],[[194827,194827],"mapped",[28363]],[[194828,194828],"mapped",[28359]],[[194829,194829],"mapped",[147153]],[[194830,194830],"mapped",[28153]],[[194831,194831],"mapped",[28526]],[[194832,194832],"mapped",[147294]],[[194833,194833],"mapped",[147342]],[[194834,194834],"mapped",[28614]],[[194835,194835],"mapped",[28729]],[[194836,194836],"mapped",[28702]],[[194837,194837],"mapped",[28699]],[[194838,194838],"mapped",[15766]],[[194839,194839],"mapped",[28746]],[[194840,194840],"mapped",[28797]],[[194841,194841],"mapped",[28791]],[[194842,194842],"mapped",[28845]],[[194843,194843],"mapped",[132389]],[[194844,194844],"mapped",[28997]],[[194845,194845],"mapped",[148067]],[[194846,194846],"mapped",[29084]],[[194847,194847],"disallowed"],[[194848,194848],"mapped",[29224]],[[194849,194849],"mapped",[29237]],[[194850,194850],"mapped",[29264]],[[194851,194851],"mapped",[149000]],[[194852,194852],"mapped",[29312]],[[194853,194853],"mapped",[29333]],[[194854,194854],"mapped",[149301]],[[194855,194855],"mapped",[149524]],[[194856,194856],"mapped",[29562]],[[194857,194857],"mapped",[29579]],[[194858,194858],"mapped",[16044]],[[194859,194859],"mapped",[29605]],[[194860,194861],"mapped",[16056]],[[194862,194862],"mapped",[29767]],[[194863,194863],"mapped",[29788]],[[194864,194864],"mapped",[29809]],[[194865,194865],"mapped",[29829]],[[194866,194866],"mapped",[29898]],[[194867,194867],"mapped",[16155]],[[194868,194868],"mapped",[29988]],[[194869,194869],"mapped",[150582]],[[194870,194870],"mapped",[30014]],[[194871,194871],"mapped",[150674]],[[194872,194872],"mapped",[30064]],[[194873,194873],"mapped",[139679]],[[194874,194874],"mapped",[30224]],[[194875,194875],"mapped",[151457]],[[194876,194876],"mapped",[151480]],[[194877,194877],"mapped",[151620]],[[194878,194878],"mapped",[16380]],[[194879,194879],"mapped",[16392]],[[194880,194880],"mapped",[30452]],[[194881,194881],"mapped",[151795]],[[194882,194882],"mapped",[151794]],[[194883,194883],"mapped",[151833]],[[194884,194884],"mapped",[151859]],[[194885,194885],"mapped",[30494]],[[194886,194887],"mapped",[30495]],[[194888,194888],"mapped",[30538]],[[194889,194889],"mapped",[16441]],[[194890,194890],"mapped",[30603]],[[194891,194891],"mapped",[16454]],[[194892,194892],"mapped",[16534]],[[194893,194893],"mapped",[152605]],[[194894,194894],"mapped",[30798]],[[194895,194895],"mapped",[30860]],[[194896,194896],"mapped",[30924]],[[194897,194897],"mapped",[16611]],[[194898,194898],"mapped",[153126]],[[194899,194899],"mapped",[31062]],[[194900,194900],"mapped",[153242]],[[194901,194901],"mapped",[153285]],[[194902,194902],"mapped",[31119]],[[194903,194903],"mapped",[31211]],[[194904,194904],"mapped",[16687]],[[194905,194905],"mapped",[31296]],[[194906,194906],"mapped",[31306]],[[194907,194907],"mapped",[31311]],[[194908,194908],"mapped",[153980]],[[194909,194910],"mapped",[154279]],[[194911,194911],"disallowed"],[[194912,194912],"mapped",[16898]],[[194913,194913],"mapped",[154539]],[[194914,194914],"mapped",[31686]],[[194915,194915],"mapped",[31689]],[[194916,194916],"mapped",[16935]],[[194917,194917],"mapped",[154752]],[[194918,194918],"mapped",[31954]],[[194919,194919],"mapped",[17056]],[[194920,194920],"mapped",[31976]],[[194921,194921],"mapped",[31971]],[[194922,194922],"mapped",[32000]],[[194923,194923],"mapped",[155526]],[[194924,194924],"mapped",[32099]],[[194925,194925],"mapped",[17153]],[[194926,194926],"mapped",[32199]],[[194927,194927],"mapped",[32258]],[[194928,194928],"mapped",[32325]],[[194929,194929],"mapped",[17204]],[[194930,194930],"mapped",[156200]],[[194931,194931],"mapped",[156231]],[[194932,194932],"mapped",[17241]],[[194933,194933],"mapped",[156377]],[[194934,194934],"mapped",[32634]],[[194935,194935],"mapped",[156478]],[[194936,194936],"mapped",[32661]],[[194937,194937],"mapped",[32762]],[[194938,194938],"mapped",[32773]],[[194939,194939],"mapped",[156890]],[[194940,194940],"mapped",[156963]],[[194941,194941],"mapped",[32864]],[[194942,194942],"mapped",[157096]],[[194943,194943],"mapped",[32880]],[[194944,194944],"mapped",[144223]],[[194945,194945],"mapped",[17365]],[[194946,194946],"mapped",[32946]],[[194947,194947],"mapped",[33027]],[[194948,194948],"mapped",[17419]],[[194949,194949],"mapped",[33086]],[[194950,194950],"mapped",[23221]],[[194951,194951],"mapped",[157607]],[[194952,194952],"mapped",[157621]],[[194953,194953],"mapped",[144275]],[[194954,194954],"mapped",[144284]],[[194955,194955],"mapped",[33281]],[[194956,194956],"mapped",[33284]],[[194957,194957],"mapped",[36766]],[[194958,194958],"mapped",[17515]],[[194959,194959],"mapped",[33425]],[[194960,194960],"mapped",[33419]],[[194961,194961],"mapped",[33437]],[[194962,194962],"mapped",[21171]],[[194963,194963],"mapped",[33457]],[[194964,194964],"mapped",[33459]],[[194965,194965],"mapped",[33469]],[[194966,194966],"mapped",[33510]],[[194967,194967],"mapped",[158524]],[[194968,194968],"mapped",[33509]],[[194969,194969],"mapped",[33565]],[[194970,194970],"mapped",[33635]],[[194971,194971],"mapped",[33709]],[[194972,194972],"mapped",[33571]],[[194973,194973],"mapped",[33725]],[[194974,194974],"mapped",[33767]],[[194975,194975],"mapped",[33879]],[[194976,194976],"mapped",[33619]],[[194977,194977],"mapped",[33738]],[[194978,194978],"mapped",[33740]],[[194979,194979],"mapped",[33756]],[[194980,194980],"mapped",[158774]],[[194981,194981],"mapped",[159083]],[[194982,194982],"mapped",[158933]],[[194983,194983],"mapped",[17707]],[[194984,194984],"mapped",[34033]],[[194985,194985],"mapped",[34035]],[[194986,194986],"mapped",[34070]],[[194987,194987],"mapped",[160714]],[[194988,194988],"mapped",[34148]],[[194989,194989],"mapped",[159532]],[[194990,194990],"mapped",[17757]],[[194991,194991],"mapped",[17761]],[[194992,194992],"mapped",[159665]],[[194993,194993],"mapped",[159954]],[[194994,194994],"mapped",[17771]],[[194995,194995],"mapped",[34384]],[[194996,194996],"mapped",[34396]],[[194997,194997],"mapped",[34407]],[[194998,194998],"mapped",[34409]],[[194999,194999],"mapped",[34473]],[[195000,195000],"mapped",[34440]],[[195001,195001],"mapped",[34574]],[[195002,195002],"mapped",[34530]],[[195003,195003],"mapped",[34681]],[[195004,195004],"mapped",[34600]],[[195005,195005],"mapped",[34667]],[[195006,195006],"mapped",[34694]],[[195007,195007],"disallowed"],[[195008,195008],"mapped",[34785]],[[195009,195009],"mapped",[34817]],[[195010,195010],"mapped",[17913]],[[195011,195011],"mapped",[34912]],[[195012,195012],"mapped",[34915]],[[195013,195013],"mapped",[161383]],[[195014,195014],"mapped",[35031]],[[195015,195015],"mapped",[35038]],[[195016,195016],"mapped",[17973]],[[195017,195017],"mapped",[35066]],[[195018,195018],"mapped",[13499]],[[195019,195019],"mapped",[161966]],[[195020,195020],"mapped",[162150]],[[195021,195021],"mapped",[18110]],[[195022,195022],"mapped",[18119]],[[195023,195023],"mapped",[35488]],[[195024,195024],"mapped",[35565]],[[195025,195025],"mapped",[35722]],[[195026,195026],"mapped",[35925]],[[195027,195027],"mapped",[162984]],[[195028,195028],"mapped",[36011]],[[195029,195029],"mapped",[36033]],[[195030,195030],"mapped",[36123]],[[195031,195031],"mapped",[36215]],[[195032,195032],"mapped",[163631]],[[195033,195033],"mapped",[133124]],[[195034,195034],"mapped",[36299]],[[195035,195035],"mapped",[36284]],[[195036,195036],"mapped",[36336]],[[195037,195037],"mapped",[133342]],[[195038,195038],"mapped",[36564]],[[195039,195039],"mapped",[36664]],[[195040,195040],"mapped",[165330]],[[195041,195041],"mapped",[165357]],[[195042,195042],"mapped",[37012]],[[195043,195043],"mapped",[37105]],[[195044,195044],"mapped",[37137]],[[195045,195045],"mapped",[165678]],[[195046,195046],"mapped",[37147]],[[195047,195047],"mapped",[37432]],[[195048,195048],"mapped",[37591]],[[195049,195049],"mapped",[37592]],[[195050,195050],"mapped",[37500]],[[195051,195051],"mapped",[37881]],[[195052,195052],"mapped",[37909]],[[195053,195053],"mapped",[166906]],[[195054,195054],"mapped",[38283]],[[195055,195055],"mapped",[18837]],[[195056,195056],"mapped",[38327]],[[195057,195057],"mapped",[167287]],[[195058,195058],"mapped",[18918]],[[195059,195059],"mapped",[38595]],[[195060,195060],"mapped",[23986]],[[195061,195061],"mapped",[38691]],[[195062,195062],"mapped",[168261]],[[195063,195063],"mapped",[168474]],[[195064,195064],"mapped",[19054]],[[195065,195065],"mapped",[19062]],[[195066,195066],"mapped",[38880]],[[195067,195067],"mapped",[168970]],[[195068,195068],"mapped",[19122]],[[195069,195069],"mapped",[169110]],[[195070,195071],"mapped",[38923]],[[195072,195072],"mapped",[38953]],[[195073,195073],"mapped",[169398]],[[195074,195074],"mapped",[39138]],[[195075,195075],"mapped",[19251]],[[195076,195076],"mapped",[39209]],[[195077,195077],"mapped",[39335]],[[195078,195078],"mapped",[39362]],[[195079,195079],"mapped",[39422]],[[195080,195080],"mapped",[19406]],[[195081,195081],"mapped",[170800]],[[195082,195082],"mapped",[39698]],[[195083,195083],"mapped",[40000]],[[195084,195084],"mapped",[40189]],[[195085,195085],"mapped",[19662]],[[195086,195086],"mapped",[19693]],[[195087,195087],"mapped",[40295]],[[195088,195088],"mapped",[172238]],[[195089,195089],"mapped",[19704]],[[195090,195090],"mapped",[172293]],[[195091,195091],"mapped",[172558]],[[195092,195092],"mapped",[172689]],[[195093,195093],"mapped",[40635]],[[195094,195094],"mapped",[19798]],[[195095,195095],"mapped",[40697]],[[195096,195096],"mapped",[40702]],[[195097,195097],"mapped",[40709]],[[195098,195098],"mapped",[40719]],[[195099,195099],"mapped",[40726]],[[195100,195100],"mapped",[40763]],[[195101,195101],"mapped",[173568]],[[195102,196605],"disallowed"],[[196606,196607],"disallowed"],[[196608,262141],"disallowed"],[[262142,262143],"disallowed"],[[262144,327677],"disallowed"],[[327678,327679],"disallowed"],[[327680,393213],"disallowed"],[[393214,393215],"disallowed"],[[393216,458749],"disallowed"],[[458750,458751],"disallowed"],[[458752,524285],"disallowed"],[[524286,524287],"disallowed"],[[524288,589821],"disallowed"],[[589822,589823],"disallowed"],[[589824,655357],"disallowed"],[[655358,655359],"disallowed"],[[655360,720893],"disallowed"],[[720894,720895],"disallowed"],[[720896,786429],"disallowed"],[[786430,786431],"disallowed"],[[786432,851965],"disallowed"],[[851966,851967],"disallowed"],[[851968,917501],"disallowed"],[[917502,917503],"disallowed"],[[917504,917504],"disallowed"],[[917505,917505],"disallowed"],[[917506,917535],"disallowed"],[[917536,917631],"disallowed"],[[917632,917759],"disallowed"],[[917760,917999],"ignored"],[[918000,983037],"disallowed"],[[983038,983039],"disallowed"],[[983040,1048573],"disallowed"],[[1048574,1048575],"disallowed"],[[1048576,1114109],"disallowed"],[[1114110,1114111],"disallowed"]]')},92773:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=t.Completions=void 0;const n=r(79632);var a=r(73054);Object.defineProperty(t,"Completions",{enumerable:!0,get:function(){return a.Completions}}),n.__exportStar(r(73054),t);var i=r(19501);Object.defineProperty(t,"Messages",{enumerable:!0,get:function(){return i.Messages}})},92953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracingContextImpl=t.knownContextKeys=void 0,t.createTracingContext=function(e={}){let n=new r(e.parentContext);return e.span&&(n=n.setValue(t.knownContextKeys.span,e.span)),e.namespace&&(n=n.setValue(t.knownContextKeys.namespace,e.namespace)),n},t.knownContextKeys={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};class r{constructor(e){this._contextMap=e instanceof r?new Map(e._contextMap):new Map}setValue(e,t){const n=new r(this);return n._contextMap.set(e,t),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){const t=new r(this);return t._contextMap.delete(e),t}}t.TracingContextImpl=r},92964:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Assistants=void 0;const n=r(82040),a=r(75552),i=r(262),s=r(54815);class o extends n.APIResource{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(s.path`/assistants/${e}`,{...t,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(s.path`/assistants/${e}`,{body:t,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},t){return this._client.getAPIList("/assistants",a.CursorPage,{query:e,...t,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(s.path`/assistants/${e}`,{...t,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}t.Assistants=o},93007:(e,t,r)=>{"use strict";const n=r(53908);e.exports=(e,t,r,a,i)=>{"string"==typeof r&&(i=a,a=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,a,i).version}catch(e){return null}}},93017:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Uploads=void 0;const n=r(79632),a=r(82040),i=n.__importStar(r(3061)),s=r(3061),o=r(54815);class l extends a.APIResource{constructor(){super(...arguments),this.parts=new i.Parts(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(o.path`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(o.path`/uploads/${e}/complete`,{body:t,...r})}}t.Uploads=l,l.Parts=s.Parts},93231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=function(e,t){let r;const{abortSignal:a,abortErrorMsg:s}=null!=t?t:{};return(0,n.createAbortablePromise)(t=>{r=setTimeout(t,e)},{cleanupBeforeAbort:()=>clearTimeout(r),abortSignal:a,abortErrorMsg:null!=s?s:i})},t.calculateRetryDelay=function(e,t){const r=t.retryDelayInMs*Math.pow(2,e),n=Math.min(t.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+(0,a.getRandomIntegerInclusive)(0,n/2)}};const n=r(78657),a=r(39111),i="The delay was aborted."},93527:(e,t,r)=>{e.exports=r(1626)},93602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunnableWithMessageHistory=void 0;const n=r(14190),a=r(10969),i=r(36516);class s extends a.RunnableBinding{constructor(e){let t=a.RunnableLambda.from((e,t)=>this._enterHistory(e,t??{})).withConfig({runName:"loadHistory"});const r=e.historyMessagesKey??e.inputMessagesKey;r&&(t=i.RunnablePassthrough.assign({[r]:t}).withConfig({runName:"insertHistory"}));const n=t.pipe(e.runnable.withListeners({onEnd:(e,t)=>this._exitHistory(e,t??{})})).withConfig({runName:"RunnableWithMessageHistory"}),s=e.config??{};super({...e,config:s,bound:n}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"historyMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getMessageHistory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let t;if("object"!=typeof e||Array.isArray(e)||(0,n.isBaseMessage)(e))t=e;else{let r;r=this.inputMessagesKey?this.inputMessagesKey:1===Object.keys(e).length?Object.keys(e)[0]:"input",t=Array.isArray(e[r])&&Array.isArray(e[r][0])?e[r][0]:e[r]}if("string"==typeof t)return[new n.HumanMessage(t)];if(Array.isArray(t))return t;if((0,n.isBaseMessage)(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.\nGot ${JSON.stringify(t,null,2)}`)}_getOutputMessages(e){let t;if(Array.isArray(e)||(0,n.isBaseMessage)(e)||"string"==typeof e)t=e;else{let r;r=void 0!==this.outputMessagesKey?this.outputMessagesKey:1===Object.keys(e).length?Object.keys(e)[0]:"output",t=void 0!==e.generations?e.generations[0][0].message:e[r]}if("string"==typeof t)return[new n.AIMessage(t)];if(Array.isArray(t))return t;if((0,n.isBaseMessage)(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(t,null,2)}`)}async _enterHistory(e,t){const r=t?.configurable?.messageHistory,n=await r.getMessages();return void 0===this.historyMessagesKey?n.concat(this._getInputMessages(e)):n}async _exitHistory(e,t){const r=t.configurable?.messageHistory;let n;n=Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?e.inputs[0]:e.inputs;let a=this._getInputMessages(n);if(void 0===this.historyMessagesKey){const e=await r.getMessages();a=a.slice(e.length)}const i=e.outputs;if(!i)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);const s=this._getOutputMessages(i);await r.addMessages([...a,...s])}async _mergeConfig(...e){const t=await super._mergeConfig(...e);if(!t.configurable||!t.configurable.sessionId){const e={[this.inputMessagesKey??"input"]:"foo"},t={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()\neg. chain.invoke(${JSON.stringify(e)}, ${JSON.stringify(t)})`)}const{sessionId:r}=t.configurable;return t.configurable.messageHistory=await this.getMessageHistory(r),t}}t.RunnableWithMessageHistory=s},93904:(e,t,r)=>{"use strict";const n=Symbol("SemVer ANY");class a{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof a){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),c("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){const t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new d(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof a))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(e.value,t).test(this.value):""===e.operator?""===e.value||new u(this.value,t).test(e.semver):!((t=i(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!e.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!e.operator.startsWith("<"))&&(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))&&!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))&&!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}}e.exports=a;const i=r(98587),{safeRe:s,t:o}=r(99718),l=r(72111),c=r(57272),d=r(53908),u=r(78311)},93961:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var a=this._errors[n],i=a.message,s=(e[i]||0)+1;e[i]=s,s>=r&&(t=a,r=s)}return t}},94103:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(62434),a="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0;let i,s=[],o=[];const l=[];a&&d(a);const c=Object.assign(e=>p(e),{enable:d,enabled:u,disable:function(){const e=i||"";return d(""),e},log:n.log});function d(e){i=e,s=[],o=[];const t=/\*/g,r=e.split(",").map(e=>e.trim().replace(t,".*?"));for(const e of r)e.startsWith("-")?o.push(new RegExp(`^${e.substr(1)}$`)):s.push(new RegExp(`^${e}$`));for(const e of l)e.enabled=u(e.namespace)}function u(e){if(e.endsWith("*"))return!0;for(const t of o)if(t.test(e))return!1;for(const t of s)if(t.test(e))return!0;return!1}function p(e){const t=Object.assign(function(...r){t.enabled&&(r.length>0&&(r[0]=`${e} ${r[0]}`),t.log(...r))},{enabled:u(e),destroy:m,log:c.log,namespace:e,extend:h});return l.push(t),t}function m(){const e=l.indexOf(this);return e>=0&&(l.splice(e,1),!0)}function h(e){const t=p(`${this.namespace}:${e}`);return t.log=this.log,t}t.default=c},94220:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserAgentHeaderName=function(){return(0,n.getHeaderName)()},t.getUserAgentValue=async function(e){const t=new Map;t.set("ts-http-runtime",a.SDK_VERSION),await(0,n.setPlatformSpecificData)(t);const r=function(e){const t=[];for(const[r,n]of e){const e=n?`${r}/${n}`:r;t.push(e)}return t.join(" ")}(t);return e?`${e} ${r}`:r};const n=r(56743),a=r(37146)},94235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringDef=t.zodPatterns=void 0;const n=r(61973);let a;function i(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)s.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}t.zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===a&&(a=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),a),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/},t.parseStringDef=function(e,r){const a={type:"string"};if(e.checks)for(const s of e.checks)switch(s.kind){case"min":(0,n.setResponseValueAndErrors)(a,"minLength","number"==typeof a.minLength?Math.max(a.minLength,s.value):s.value,s.message,r);break;case"max":(0,n.setResponseValueAndErrors)(a,"maxLength","number"==typeof a.maxLength?Math.min(a.maxLength,s.value):s.value,s.message,r);break;case"email":switch(r.emailStrategy){case"format:email":o(a,"email",s.message,r);break;case"format:idn-email":o(a,"idn-email",s.message,r);break;case"pattern:zod":l(a,t.zodPatterns.email,s.message,r)}break;case"url":o(a,"uri",s.message,r);break;case"uuid":o(a,"uuid",s.message,r);break;case"regex":l(a,s.regex,s.message,r);break;case"cuid":l(a,t.zodPatterns.cuid,s.message,r);break;case"cuid2":l(a,t.zodPatterns.cuid2,s.message,r);break;case"startsWith":l(a,RegExp(`^${i(s.value,r)}`),s.message,r);break;case"endsWith":l(a,RegExp(`${i(s.value,r)}$`),s.message,r);break;case"datetime":o(a,"date-time",s.message,r);break;case"date":o(a,"date",s.message,r);break;case"time":o(a,"time",s.message,r);break;case"duration":o(a,"duration",s.message,r);break;case"length":(0,n.setResponseValueAndErrors)(a,"minLength","number"==typeof a.minLength?Math.max(a.minLength,s.value):s.value,s.message,r),(0,n.setResponseValueAndErrors)(a,"maxLength","number"==typeof a.maxLength?Math.min(a.maxLength,s.value):s.value,s.message,r);break;case"includes":l(a,RegExp(i(s.value,r)),s.message,r);break;case"ip":"v6"!==s.version&&o(a,"ipv4",s.message,r),"v4"!==s.version&&o(a,"ipv6",s.message,r);break;case"base64url":l(a,t.zodPatterns.base64url,s.message,r);break;case"jwt":l(a,t.zodPatterns.jwt,s.message,r);break;case"cidr":"v6"!==s.version&&l(a,t.zodPatterns.ipv4Cidr,s.message,r),"v4"!==s.version&&l(a,t.zodPatterns.ipv6Cidr,s.message,r);break;case"emoji":l(a,t.zodPatterns.emoji(),s.message,r);break;case"ulid":l(a,t.zodPatterns.ulid,s.message,r);break;case"base64":switch(r.base64Strategy){case"format:binary":o(a,"binary",s.message,r);break;case"contentEncoding:base64":(0,n.setResponseValueAndErrors)(a,"contentEncoding","base64",s.message,r);break;case"pattern:zod":l(a,t.zodPatterns.base64,s.message,r)}break;case"nanoid":l(a,t.zodPatterns.nanoid,s.message,r);case"toLowerCase":case"toUpperCase":case"trim":break;default:(()=>{})()}return a};const s=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function o(e,t,r,a){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&a.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):(0,n.setResponseValueAndErrors)(e,"format",t,r,a)}function l(e,t,r,a){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&a.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:c(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):(0,n.setResponseValueAndErrors)(e,"pattern",c(t,a),r,a)}function c(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const r=e.flags.includes("i"),n=e.flags.includes("m"),a=e.flags.includes("s"),i=r?e.source.toLowerCase():e.source;let s="",o=!1,l=!1,c=!1;for(let e=0;e<i.length;e++)if(o)s+=i[e],o=!1;else{if(r)if(l){if(i[e].match(/[a-z]/)){c?(s+=i[e],s+=`${i[e-2]}-${i[e]}`.toUpperCase(),c=!1):"-"===i[e+1]&&i[e+2]?.match(/[a-z]/)?(s+=i[e],c=!0):s+=`${i[e]}${i[e].toUpperCase()}`;continue}}else if(i[e].match(/[a-z]/)){s+=`[${i[e]}${i[e].toUpperCase()}]`;continue}if(n){if("^"===i[e]){s+="(^|(?<=[\r\n]))";continue}if("$"===i[e]){s+="($|(?=[\r\n]))";continue}}a&&"."===i[e]?s+=l?`${i[e]}\r\n`:`[${i[e]}\r\n]`:(s+=i[e],"\\"===i[e]?o=!0:l&&"]"===i[e]?l=!1:l||"["!==i[e]||(l=!0))}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}},94641:(e,t,r)=>{"use strict";const n=r(50560);e.exports=(e,t,r)=>0===n(e,t,r)},94730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._makeMessageChunkFromAnthropicEvent=function(e,t){if("message_start"===e.type){const{content:r,usage:a,...i}=e.message,s={};for(const[e,t]of Object.entries(i))null!=t&&(s[e]=t);const{input_tokens:o,output_tokens:l,...c}=a??{},d={input_tokens:o,output_tokens:l,total_tokens:o+l,input_token_details:{cache_creation:c.cache_creation_input_tokens,cache_read:c.cache_read_input_tokens}};return{chunk:new n.AIMessageChunk({content:t.coerceContentToString?"":[],additional_kwargs:s,usage_metadata:t.streamUsage?d:void 0,response_metadata:{usage:{...c}},id:e.message.id})}}if("message_delta"===e.type){const r={input_tokens:0,output_tokens:e.usage.output_tokens,total_tokens:e.usage.output_tokens,input_token_details:{cache_creation:e.usage.cache_creation_input_tokens,cache_read:e.usage.cache_read_input_tokens}};return{chunk:new n.AIMessageChunk({content:t.coerceContentToString?"":[],additional_kwargs:{...e.delta},usage_metadata:t.streamUsage?r:void 0})}}if("content_block_start"===e.type&&["tool_use","document","server_tool_use","web_search_tool_result"].includes(e.content_block.type)){const r=e.content_block;let a;return a="tool_use"===r.type?[{id:r.id,index:e.index,name:r.name,args:""}]:[],{chunk:new n.AIMessageChunk({content:t.coerceContentToString?"":[{index:e.index,...e.content_block,input:"server_tool_use"===r.type||"tool_use"===r.type?"":void 0}],additional_kwargs:{},tool_call_chunks:a})}}if("content_block_delta"===e.type&&["text_delta","citations_delta","thinking_delta","signature_delta"].includes(e.delta.type)){if(t.coerceContentToString&&"text"in e.delta)return{chunk:new n.AIMessageChunk({content:e.delta.text})};{const t=e.delta;return"citation"in t&&(t.citations=[t.citation],delete t.citation),"thinking_delta"===t.type||"signature_delta"===t.type?{chunk:new n.AIMessageChunk({content:[{index:e.index,...t,type:"thinking"}]})}:{chunk:new n.AIMessageChunk({content:[{index:e.index,...t,type:"text"}]})}}}if("content_block_delta"===e.type&&"input_json_delta"===e.delta.type)return{chunk:new n.AIMessageChunk({content:t.coerceContentToString?"":[{index:e.index,input:e.delta.partial_json,type:e.delta.type}],additional_kwargs:{},tool_call_chunks:[{index:e.index,args:e.delta.partial_json}]})};if("content_block_start"===e.type&&"text"===e.content_block.type){const r=e.content_block?.text;if(void 0!==r)return{chunk:new n.AIMessageChunk({content:t.coerceContentToString?r:[{index:e.index,...e.content_block}],additional_kwargs:{}})}}else{if("content_block_start"===e.type&&"redacted_thinking"===e.content_block.type)return{chunk:new n.AIMessageChunk({content:t.coerceContentToString?"":[{index:e.index,...e.content_block}]})};if("content_block_start"===e.type&&"thinking"===e.content_block.type){const r=e.content_block.thinking;return{chunk:new n.AIMessageChunk({content:t.coerceContentToString?r:[{index:e.index,...e.content_block}]})}}}return null},t.anthropicResponseToChatMessages=function(e,t){const r=t.usage,i=null!=r?{input_tokens:r.input_tokens??0,output_tokens:r.output_tokens??0,total_tokens:(r.input_tokens??0)+(r.output_tokens??0),input_token_details:{cache_creation:r.cache_creation_input_tokens,cache_read:r.cache_read_input_tokens}}:void 0;if(1===e.length&&"text"===e[0].type)return[{text:e[0].text,message:new n.AIMessage({content:e[0].text,additional_kwargs:t,usage_metadata:i,response_metadata:t,id:t.id})}];{const r=(0,a.extractToolCalls)(e);return[{text:"",message:new n.AIMessage({content:e,additional_kwargs:t,tool_calls:r,usage_metadata:i,response_metadata:t,id:t.id})}]}};const n=r(6500),a=r(49564)},94845:(e,t)=>{"use strict";function r(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(t,"__esModule",{value:!0}),t.encodePointer=function(e){return encodeURI(r(e))},t.escapePointer=r},94898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureOpenAIEmbeddings=void 0;const n=r(32012),a=r(82331),i=r(67042),s=r(81047),o=r(65792),l=r(42784);class c extends i.OpenAIEmbeddings{constructor(e){super(e),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureADTokenProvider",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.batchSize=e?.batchSize??1,this.azureOpenAIApiKey=e?.azureOpenAIApiKey??e?.apiKey??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_KEY"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??e?.openAIApiVersion??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??(0,a.getEnvironmentVariable)("AZURE_OPENAI_BASE_PATH"),this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=(e?.azureOpenAIApiEmbeddingsDeploymentName||e?.azureOpenAIApiDeploymentName)??((0,a.getEnvironmentVariable)("AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME")||(0,a.getEnvironmentVariable)("AZURE_OPENAI_API_DEPLOYMENT_NAME")),this.azureADTokenProvider=e?.azureADTokenProvider}async embeddingWithRetry(e){if(!this.client){const e={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,azureADTokenProvider:this.azureADTokenProvider,baseURL:this.clientConfig.baseURL},t=(0,s.getEndpoint)(e),r={...this.clientConfig,baseURL:t,timeout:this.timeout,maxRetries:0};this.azureADTokenProvider||(r.apiKey=e.azureOpenAIApiKey),r.baseURL||delete r.baseURL;const a=(0,l.normalizeHeaders)(r.defaultHeaders);r.defaultHeaders={...r.defaultHeaders,"User-Agent":a["User-Agent"]?`${a["User-Agent"]}: langchainjs-azure-openai-v2`:"langchainjs-azure-openai-v2"},this.client=new n.AzureOpenAI({apiVersion:this.azureOpenAIApiVersion,azureADTokenProvider:this.azureADTokenProvider,deployment:this.azureOpenAIApiDeploymentName,...r})}const t={};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),this.caller.call(async()=>{try{return await this.client.embeddings.create(e,t)}catch(e){throw(0,o.wrapOpenAIClientError)(e)}})}}t.AzureOpenAIEmbeddings=c},95126:(e,t,r)=>{"use strict";var n,a,i,s,o,l,c,d,u,p,m,h;Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCompletionStream=void 0;const f=r(79632),g=r(89526),y=r(71118),v=r(6716),b=r(63357),_=r(43690);class w extends y.AbstractChatCompletionRunner{constructor(e){super(),n.add(this),a.set(this,void 0),i.set(this,void 0),s.set(this,void 0),f.__classPrivateFieldSet(this,a,e,"f"),f.__classPrivateFieldSet(this,i,[],"f")}get currentChatCompletionSnapshot(){return f.__classPrivateFieldGet(this,s,"f")}static fromReadableStream(e){const t=new w(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const n=new w(t);return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,r){super._createChatCompletion;const a=r?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),f.__classPrivateFieldGet(this,n,"m",o).call(this);const i=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const e of i)f.__classPrivateFieldGet(this,n,"m",c).call(this,e);if(i.controller.signal?.aborted)throw new g.APIUserAbortError;return this._addChatCompletion(f.__classPrivateFieldGet(this,n,"m",p).call(this))}async _fromReadableStream(e,t){const r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),f.__classPrivateFieldGet(this,n,"m",o).call(this),this._connected();const a=v.Stream.fromReadableStream(e,this.controller);let i;for await(const e of a)i&&i!==e.id&&this._addChatCompletion(f.__classPrivateFieldGet(this,n,"m",p).call(this)),f.__classPrivateFieldGet(this,n,"m",c).call(this,e),i=e.id;if(a.controller.signal?.aborted)throw new g.APIUserAbortError;return this._addChatCompletion(f.__classPrivateFieldGet(this,n,"m",p).call(this))}[(a=new WeakMap,i=new WeakMap,s=new WeakMap,n=new WeakSet,o=function(){this.ended||f.__classPrivateFieldSet(this,s,void 0,"f")},l=function(e){let t=f.__classPrivateFieldGet(this,i,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},f.__classPrivateFieldGet(this,i,"f")[e.index]=t,t)},c=function(e){if(this.ended)return;const t=f.__classPrivateFieldGet(this,n,"m",h).call(this,e);this._emit("chunk",e,t);for(const r of e.choices){const e=t.choices[r.index];null!=r.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",r.delta.content,e.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=r.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:e.message.refusal}),null!=r.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=r.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const a=f.__classPrivateFieldGet(this,n,"m",l).call(this,e);e.finish_reason&&(f.__classPrivateFieldGet(this,n,"m",u).call(this,e),null!=a.current_tool_call_index&&f.__classPrivateFieldGet(this,n,"m",d).call(this,e,a.current_tool_call_index));for(const t of r.delta.tool_calls??[])a.current_tool_call_index!==t.index&&(f.__classPrivateFieldGet(this,n,"m",u).call(this,e),null!=a.current_tool_call_index&&f.__classPrivateFieldGet(this,n,"m",d).call(this,e,a.current_tool_call_index)),a.current_tool_call_index=t.index;for(const t of r.delta.tool_calls??[]){const r=e.message.tool_calls?.[t.index];r?.type&&("function"===r?.type?this._emit("tool_calls.function.arguments.delta",{name:r.function?.name,index:t.index,arguments:r.function.arguments,parsed_arguments:r.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):S())}}},d=function(e,t){if(f.__classPrivateFieldGet(this,n,"m",l).call(this,e).done_tool_calls.has(t))return;const r=e.message.tool_calls?.[t];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if("function"===r.type){const e=f.__classPrivateFieldGet(this,a,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:t,arguments:r.function.arguments,parsed_arguments:(0,b.isAutoParsableTool)(e)?e.$parseRaw(r.function.arguments):e?.function.strict?JSON.parse(r.function.arguments):null})}else r.type},u=function(e){const t=f.__classPrivateFieldGet(this,n,"m",l).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const r=f.__classPrivateFieldGet(this,n,"m",m).call(this);this._emit("content.done",{content:e.message.content,parsed:r?r.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},p=function(){if(this.ended)throw new g.OpenAIError("stream has ended, this shouldn't happen");const e=f.__classPrivateFieldGet(this,s,"f");if(!e)throw new g.OpenAIError("request ended without sending any chunks");return f.__classPrivateFieldSet(this,s,void 0,"f"),f.__classPrivateFieldSet(this,i,[],"f"),function(e,t){const{id:r,choices:n,created:a,model:i,system_fingerprint:s,...o}=e,l={...o,id:r,choices:n.map(({message:t,finish_reason:r,index:n,logprobs:a,...i})=>{if(!r)throw new g.OpenAIError(`missing finish_reason for choice ${n}`);const{content:s=null,function_call:o,tool_calls:l,...c}=t,d=t.role;if(!d)throw new g.OpenAIError(`missing role for choice ${n}`);if(o){const{arguments:e,name:l}=o;if(null==e)throw new g.OpenAIError(`missing function_call.arguments for choice ${n}`);if(!l)throw new g.OpenAIError(`missing function_call.name for choice ${n}`);return{...i,message:{content:s,function_call:{arguments:e,name:l},role:d,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:a}}return l?{...i,index:n,finish_reason:r,logprobs:a,message:{...c,role:d,content:s,refusal:t.refusal??null,tool_calls:l.map((t,r)=>{const{function:a,type:i,id:s,...o}=t,{arguments:l,name:c,...d}=a||{};if(null==s)throw new g.OpenAIError(`missing choices[${n}].tool_calls[${r}].id\n${P(e)}`);if(null==i)throw new g.OpenAIError(`missing choices[${n}].tool_calls[${r}].type\n${P(e)}`);if(null==c)throw new g.OpenAIError(`missing choices[${n}].tool_calls[${r}].function.name\n${P(e)}`);if(null==l)throw new g.OpenAIError(`missing choices[${n}].tool_calls[${r}].function.arguments\n${P(e)}`);return{...o,id:s,type:i,function:{...d,name:c,arguments:l}}})}}:{...i,message:{...c,content:s,role:d,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:a}}),created:a,model:i,object:"chat.completion",...s?{system_fingerprint:s}:{}};return(0,b.maybeParseChatCompletion)(l,t)}(e,f.__classPrivateFieldGet(this,a,"f"))},m=function(){const e=f.__classPrivateFieldGet(this,a,"f")?.response_format;return(0,b.isAutoParsableResponseFormat)(e)?e:null},h=function(e){var t,r,i,o;let l=f.__classPrivateFieldGet(this,s,"f");const{choices:c,...d}=e;l?Object.assign(l,d):l=f.__classPrivateFieldSet(this,s,{...d,choices:[]},"f");for(const{delta:s,finish_reason:c,index:d,logprobs:u=null,...p}of e.choices){let e=l.choices[d];if(e||(e=l.choices[d]={finish_reason:c,index:d,message:{},logprobs:u,...p}),u)if(e.logprobs){const{content:n,refusal:a,...i}=u;O(),Object.assign(e.logprobs,i),n&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...n)),a&&((r=e.logprobs).refusal??(r.refusal=[]),e.logprobs.refusal.push(...a))}else e.logprobs=Object.assign({},u);if(c&&(e.finish_reason=c,f.__classPrivateFieldGet(this,a,"f")&&(0,b.hasAutoParseableInput)(f.__classPrivateFieldGet(this,a,"f")))){if("length"===c)throw new g.LengthFinishReasonError;if("content_filter"===c)throw new g.ContentFilterFinishReasonError}if(Object.assign(e,p),!s)continue;const{content:h,refusal:y,function_call:v,role:w,tool_calls:P,...S}=s;if(O(),Object.assign(e.message,S),y&&(e.message.refusal=(e.message.refusal||"")+y),w&&(e.message.role=w),v&&(e.message.function_call?(v.name&&(e.message.function_call.name=v.name),v.arguments&&((i=e.message.function_call).arguments??(i.arguments=""),e.message.function_call.arguments+=v.arguments)):e.message.function_call=v),h&&(e.message.content=(e.message.content||"")+h,!e.message.refusal&&f.__classPrivateFieldGet(this,n,"m",m).call(this)&&(e.message.parsed=(0,_.partialParse)(e.message.content))),P){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:r,type:n,function:i,...s}of P){const l=(o=e.message.tool_calls)[t]??(o[t]={});Object.assign(l,s),r&&(l.id=r),n&&(l.type=n),i&&(l.function??(l.function={name:i.name??"",arguments:""})),i?.name&&(l.function.name=i.name),i?.arguments&&(l.function.arguments+=i.arguments,(0,b.shouldParseToolCall)(f.__classPrivateFieldGet(this,a,"f"),l)&&(l.function.parsed_arguments=(0,_.partialParse)(l.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new v.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function P(e){return JSON.stringify(e)}function O(e){}function S(e){}t.ChatCompletionStream=w},95257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RFC3986=t.RFC1738=t.formatters=t.default_formatter=t.default_format=void 0,t.default_format="RFC3986",t.default_formatter=e=>String(e),t.formatters={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:t.default_formatter},t.RFC1738="RFC1738",t.RFC3986="RFC3986"},95341:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.$ZodSet=t.$ZodMap=t.$ZodRecord=t.$ZodTuple=t.$ZodIntersection=t.$ZodDiscriminatedUnion=t.$ZodUnion=t.$ZodObject=t.$ZodArray=t.$ZodDate=t.$ZodVoid=t.$ZodNever=t.$ZodUnknown=t.$ZodAny=t.$ZodNull=t.$ZodUndefined=t.$ZodSymbol=t.$ZodBigIntFormat=t.$ZodBigInt=t.$ZodBoolean=t.$ZodNumberFormat=t.$ZodNumber=t.$ZodCustomStringFormat=t.$ZodJWT=t.$ZodE164=t.$ZodBase64URL=t.$ZodBase64=t.$ZodCIDRv6=t.$ZodCIDRv4=t.$ZodIPv6=t.$ZodIPv4=t.$ZodISODuration=t.$ZodISOTime=t.$ZodISODate=t.$ZodISODateTime=t.$ZodKSUID=t.$ZodXID=t.$ZodULID=t.$ZodCUID2=t.$ZodCUID=t.$ZodNanoID=t.$ZodEmoji=t.$ZodURL=t.$ZodEmail=t.$ZodUUID=t.$ZodGUID=t.$ZodStringFormat=t.$ZodString=t.clone=t.$ZodType=void 0,t.$ZodCustom=t.$ZodLazy=t.$ZodPromise=t.$ZodTemplateLiteral=t.$ZodReadonly=t.$ZodPipe=t.$ZodNaN=t.$ZodCatch=t.$ZodSuccess=t.$ZodNonOptional=t.$ZodPrefault=t.$ZodDefault=t.$ZodNullable=t.$ZodOptional=t.$ZodTransform=t.$ZodFile=t.$ZodLiteral=t.$ZodEnum=void 0,t.isValidBase64=h,t.isValidBase64URL=f,t.isValidJWT=g;const s=i(r(32564)),o=i(r(98706)),l=r(87319),c=r(64084),d=i(r(91988)),u=i(r(90523)),p=r(76020);t.$ZodType=o.$constructor("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=p.version;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const t of n)for(const r of t._zod.onattach)r(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,r)=>{let n,a=u.aborted(e);for(const i of t){if(i._zod.def.when){if(!i._zod.def.when(e))continue}else if(a)continue;const t=e.issues.length,s=i._zod.check(e);if(s instanceof Promise&&!1===r?.async)throw new o.$ZodAsyncError;if(n||s instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await s,e.issues.length!==t&&(a||(a=u.aborted(e,t)))});else{if(e.issues.length===t)continue;a||(a=u.aborted(e,t))}}return n?n.then(()=>e):e};e._zod.run=(r,a)=>{const i=e._zod.parse(r,a);if(i instanceof Promise){if(!1===a.async)throw new o.$ZodAsyncError;return i.then(e=>t(e,n,a))}return t(i,n,a)}}e["~standard"]={validate:t=>{try{const r=(0,c.safeParse)(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return(0,c.safeParseAsync)(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}});var m=r(90523);function h(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}function f(e){if(!d.base64url.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return h(t.padEnd(4*Math.ceil(t.length/4),"="))}function g(e,t=null){try{const r=e.split(".");if(3!==r.length)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&"JWT"!==a?.typ||!a.alg||t&&(!("alg"in a)||a.alg!==t))}catch{return!1}}function y(e,t,r){e.issues.length&&t.issues.push(...u.prefixIssues(r,e.issues)),t.value[r]=e.value}function v(e,t,r){e.issues.length&&t.issues.push(...u.prefixIssues(r,e.issues)),t.value[r]=e.value}function b(e,t,r,n){e.issues.length?void 0===n[r]?t.value[r]=r in n?void 0:e.value:t.issues.push(...u.prefixIssues(r,e.issues)):void 0===e.value?r in n&&(t.value[r]=void 0):t.value[r]=e.value}function _(e,t,r,n){for(const r of e)if(0===r.issues.length)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>u.finalizeIssue(e,n,o.config())))}),t}function w(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(u.isPlainObject(e)&&u.isPlainObject(t)){const r=Object.keys(t),n=Object.keys(e).filter(e=>-1!==r.indexOf(e)),a={...e,...t};for(const r of n){const n=w(e[r],t[r]);if(!n.valid)return{valid:!1,mergeErrorPath:[r,...n.mergeErrorPath]};a[r]=n.data}return{valid:!0,data:a}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const a=w(e[n],t[n]);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function P(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),u.aborted(e))return e;const n=w(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}function O(e,t,r){e.issues.length&&t.issues.push(...u.prefixIssues(r,e.issues)),t.value[r]=e.value}function S(e,t,r,n,a,i,s){e.issues.length&&(u.propertyKeyTypes.has(typeof n)?r.issues.push(...u.prefixIssues(n,e.issues)):r.issues.push({origin:"map",code:"invalid_key",input:a,inst:i,issues:e.issues.map(e=>u.finalizeIssue(e,s,o.config()))})),t.issues.length&&(u.propertyKeyTypes.has(typeof n)?r.issues.push(...u.prefixIssues(n,t.issues)):r.issues.push({origin:"map",code:"invalid_element",input:a,inst:i,key:n,issues:t.issues.map(e=>u.finalizeIssue(e,s,o.config()))})),r.value.set(e.value,t.value)}function E(e,t){e.issues.length&&t.issues.push(...e.issues),t.value.add(e.value)}function A(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}function I(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}function k(e,t,r){return u.aborted(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}function T(e){return e.value=Object.freeze(e.value),e}function j(e,t,r,n){if(!e){const e={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(e.params=n._zod.def.params),t.issues.push(u.issue(e))}}Object.defineProperty(t,"clone",{enumerable:!0,get:function(){return m.clone}}),t.$ZodString=o.$constructor("$ZodString",(e,r)=>{t.$ZodType.init(e,r),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??d.string(e._zod.bag),e._zod.parse=(t,n)=>{if(r.coerce)try{t.value=String(t.value)}catch(n){}return"string"==typeof t.value||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:e}),t}}),t.$ZodStringFormat=o.$constructor("$ZodStringFormat",(e,r)=>{s.$ZodCheckStringFormat.init(e,r),t.$ZodString.init(e,r)}),t.$ZodGUID=o.$constructor("$ZodGUID",(e,r)=>{r.pattern??(r.pattern=d.guid),t.$ZodStringFormat.init(e,r)}),t.$ZodUUID=o.$constructor("$ZodUUID",(e,r)=>{if(r.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[r.version];if(void 0===e)throw new Error(`Invalid UUID version: "${r.version}"`);r.pattern??(r.pattern=d.uuid(e))}else r.pattern??(r.pattern=d.uuid());t.$ZodStringFormat.init(e,r)}),t.$ZodEmail=o.$constructor("$ZodEmail",(e,r)=>{r.pattern??(r.pattern=d.email),t.$ZodStringFormat.init(e,r)}),t.$ZodURL=o.$constructor("$ZodURL",(e,r)=>{t.$ZodStringFormat.init(e,r),e._zod.check=t=>{try{const n=t.value,a=new URL(n),i=a.href;return r.hostname&&(r.hostname.lastIndex=0,r.hostname.test(a.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:d.hostname.source,input:t.value,inst:e,continue:!r.abort})),r.protocol&&(r.protocol.lastIndex=0,r.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:r.protocol.source,input:t.value,inst:e,continue:!r.abort})),void(!n.endsWith("/")&&i.endsWith("/")?t.value=i.slice(0,-1):t.value=i)}catch(n){t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:e,continue:!r.abort})}}}),t.$ZodEmoji=o.$constructor("$ZodEmoji",(e,r)=>{r.pattern??(r.pattern=d.emoji()),t.$ZodStringFormat.init(e,r)}),t.$ZodNanoID=o.$constructor("$ZodNanoID",(e,r)=>{r.pattern??(r.pattern=d.nanoid),t.$ZodStringFormat.init(e,r)}),t.$ZodCUID=o.$constructor("$ZodCUID",(e,r)=>{r.pattern??(r.pattern=d.cuid),t.$ZodStringFormat.init(e,r)}),t.$ZodCUID2=o.$constructor("$ZodCUID2",(e,r)=>{r.pattern??(r.pattern=d.cuid2),t.$ZodStringFormat.init(e,r)}),t.$ZodULID=o.$constructor("$ZodULID",(e,r)=>{r.pattern??(r.pattern=d.ulid),t.$ZodStringFormat.init(e,r)}),t.$ZodXID=o.$constructor("$ZodXID",(e,r)=>{r.pattern??(r.pattern=d.xid),t.$ZodStringFormat.init(e,r)}),t.$ZodKSUID=o.$constructor("$ZodKSUID",(e,r)=>{r.pattern??(r.pattern=d.ksuid),t.$ZodStringFormat.init(e,r)}),t.$ZodISODateTime=o.$constructor("$ZodISODateTime",(e,r)=>{r.pattern??(r.pattern=d.datetime(r)),t.$ZodStringFormat.init(e,r)}),t.$ZodISODate=o.$constructor("$ZodISODate",(e,r)=>{r.pattern??(r.pattern=d.date),t.$ZodStringFormat.init(e,r)}),t.$ZodISOTime=o.$constructor("$ZodISOTime",(e,r)=>{r.pattern??(r.pattern=d.time(r)),t.$ZodStringFormat.init(e,r)}),t.$ZodISODuration=o.$constructor("$ZodISODuration",(e,r)=>{r.pattern??(r.pattern=d.duration),t.$ZodStringFormat.init(e,r)}),t.$ZodIPv4=o.$constructor("$ZodIPv4",(e,r)=>{r.pattern??(r.pattern=d.ipv4),t.$ZodStringFormat.init(e,r),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),t.$ZodIPv6=o.$constructor("$ZodIPv6",(e,r)=>{r.pattern??(r.pattern=d.ipv6),t.$ZodStringFormat.init(e,r),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:e,continue:!r.abort})}}}),t.$ZodCIDRv4=o.$constructor("$ZodCIDRv4",(e,r)=>{r.pattern??(r.pattern=d.cidrv4),t.$ZodStringFormat.init(e,r)}),t.$ZodCIDRv6=o.$constructor("$ZodCIDRv6",(e,r)=>{r.pattern??(r.pattern=d.cidrv6),t.$ZodStringFormat.init(e,r),e._zod.check=t=>{const[n,a]=t.value.split("/");try{if(!a)throw new Error;const e=Number(a);if(`${e}`!==a)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${n}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:e,continue:!r.abort})}}}),t.$ZodBase64=o.$constructor("$ZodBase64",(e,r)=>{r.pattern??(r.pattern=d.base64),t.$ZodStringFormat.init(e,r),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=t=>{h(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:e,continue:!r.abort})}}),t.$ZodBase64URL=o.$constructor("$ZodBase64URL",(e,r)=>{r.pattern??(r.pattern=d.base64url),t.$ZodStringFormat.init(e,r),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=t=>{f(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:e,continue:!r.abort})}}),t.$ZodE164=o.$constructor("$ZodE164",(e,r)=>{r.pattern??(r.pattern=d.e164),t.$ZodStringFormat.init(e,r)}),t.$ZodJWT=o.$constructor("$ZodJWT",(e,r)=>{t.$ZodStringFormat.init(e,r),e._zod.check=t=>{g(t.value,r.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:e,continue:!r.abort})}}),t.$ZodCustomStringFormat=o.$constructor("$ZodCustomStringFormat",(e,r)=>{t.$ZodStringFormat.init(e,r),e._zod.check=t=>{r.fn(t.value)||t.issues.push({code:"invalid_format",format:r.format,input:t.value,inst:e,continue:!r.abort})}}),t.$ZodNumber=o.$constructor("$ZodNumber",(e,r)=>{t.$ZodType.init(e,r),e._zod.pattern=e._zod.bag.pattern??d.number,e._zod.parse=(t,n)=>{if(r.coerce)try{t.value=Number(t.value)}catch(e){}const a=t.value;if("number"==typeof a&&!Number.isNaN(a)&&Number.isFinite(a))return t;const i="number"==typeof a?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return t.issues.push({expected:"number",code:"invalid_type",input:a,inst:e,...i?{received:i}:{}}),t}}),t.$ZodNumberFormat=o.$constructor("$ZodNumber",(e,r)=>{s.$ZodCheckNumberFormat.init(e,r),t.$ZodNumber.init(e,r)}),t.$ZodBoolean=o.$constructor("$ZodBoolean",(e,r)=>{t.$ZodType.init(e,r),e._zod.pattern=d.boolean,e._zod.parse=(t,n)=>{if(r.coerce)try{t.value=Boolean(t.value)}catch(e){}const a=t.value;return"boolean"==typeof a||t.issues.push({expected:"boolean",code:"invalid_type",input:a,inst:e}),t}}),t.$ZodBigInt=o.$constructor("$ZodBigInt",(e,r)=>{t.$ZodType.init(e,r),e._zod.pattern=d.bigint,e._zod.parse=(t,n)=>{if(r.coerce)try{t.value=BigInt(t.value)}catch(e){}return"bigint"==typeof t.value||t.issues.push({expected:"bigint",code:"invalid_type",input:t.value,inst:e}),t}}),t.$ZodBigIntFormat=o.$constructor("$ZodBigInt",(e,r)=>{s.$ZodCheckBigIntFormat.init(e,r),t.$ZodBigInt.init(e,r)}),t.$ZodSymbol=o.$constructor("$ZodSymbol",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,r)=>{const n=t.value;return"symbol"==typeof n||t.issues.push({expected:"symbol",code:"invalid_type",input:n,inst:e}),t}}),t.$ZodUndefined=o.$constructor("$ZodUndefined",(e,r)=>{t.$ZodType.init(e,r),e._zod.pattern=d.undefined,e._zod.values=new Set([void 0]),e._zod.optin="optional",e._zod.optout="optional",e._zod.parse=(t,r)=>{const n=t.value;return void 0===n||t.issues.push({expected:"undefined",code:"invalid_type",input:n,inst:e}),t}}),t.$ZodNull=o.$constructor("$ZodNull",(e,r)=>{t.$ZodType.init(e,r),e._zod.pattern=d.null,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{const n=t.value;return null===n||t.issues.push({expected:"null",code:"invalid_type",input:n,inst:e}),t}}),t.$ZodAny=o.$constructor("$ZodAny",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=e=>e}),t.$ZodUnknown=o.$constructor("$ZodUnknown",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=e=>e}),t.$ZodNever=o.$constructor("$ZodNever",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)}),t.$ZodVoid=o.$constructor("$ZodVoid",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,r)=>{const n=t.value;return void 0===n||t.issues.push({expected:"void",code:"invalid_type",input:n,inst:e}),t}}),t.$ZodDate=o.$constructor("$ZodDate",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,n)=>{if(r.coerce)try{t.value=new Date(t.value)}catch(e){}const a=t.value,i=a instanceof Date;return i&&!Number.isNaN(a.getTime())||t.issues.push({expected:"date",code:"invalid_type",input:a,...i?{received:"Invalid Date"}:{},inst:e}),t}}),t.$ZodArray=o.$constructor("$ZodArray",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,n)=>{const a=t.value;if(!Array.isArray(a))return t.issues.push({expected:"array",code:"invalid_type",input:a,inst:e}),t;t.value=Array(a.length);const i=[];for(let e=0;e<a.length;e++){const s=a[e],o=r.element._zod.run({value:s,issues:[]},n);o instanceof Promise?i.push(o.then(r=>y(r,t,e))):y(o,t,e)}return i.length?Promise.all(i).then(()=>t):t}}),t.$ZodObject=o.$constructor("$ZodObject",(e,r)=>{t.$ZodType.init(e,r);const n=u.cached(()=>{const e=Object.keys(r.shape);for(const n of e)if(!(r.shape[n]instanceof t.$ZodType))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=u.optionalKeys(r.shape);return{shape:r.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}});let a;u.defineLazy(e._zod,"propValues",()=>{const e=r.shape,t={};for(const r in e){const n=e[r]._zod;if(n.values){t[r]??(t[r]=new Set);for(const e of n.values)t[r].add(e)}}return t});const i=u.isObject,s=!o.globalConfig.jitless,c=u.allowsEval,d=s&&c.value,p=r.catchall;let m;e._zod.parse=(t,o)=>{m??(m=n.value);const c=t.value;if(!i(c))return t.issues.push({expected:"object",code:"invalid_type",input:c,inst:e}),t;const h=[];if(s&&d&&!1===o?.async&&!0!==o.jitless)a||(a=(e=>{const t=new l.Doc(["shape","payload","ctx"]),r=n.value,a=e=>{const t=u.esc(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const i=Object.create(null);let s=0;for(const e of r.keys)i[e]="key_"+s++;t.write("const newResult = {}");for(const e of r.keys)if(r.optionalKeys.has(e)){const r=i[e];t.write(`const ${r} = ${a(e)};`);const n=u.esc(e);t.write(`\n        if (${r}.issues.length) {\n          if (input[${n}] === undefined) {\n            if (${n} in input) {\n              newResult[${n}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${r}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${n}, ...iss.path] : [${n}],\n              }))\n            );\n          }\n        } else if (${r}.value === undefined) {\n          if (${n} in input) newResult[${n}] = undefined;\n        } else {\n          newResult[${n}] = ${r}.value;\n        }\n        `)}else{const r=i[e];t.write(`const ${r} = ${a(e)};`),t.write(`\n          if (${r}.issues.length) payload.issues = payload.issues.concat(${r}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${u.esc(e)}, ...iss.path] : [${u.esc(e)}]\n          })));`),t.write(`newResult[${u.esc(e)}] = ${r}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");const o=t.compile();return(t,r)=>o(e,t,r)})(r.shape)),t=a(t,o);else{t.value={};const e=m.shape;for(const r of m.keys){const n=e[r],a=n._zod.run({value:c[r],issues:[]},o),i="optional"===n._zod.optin&&"optional"===n._zod.optout;a instanceof Promise?h.push(a.then(e=>i?b(e,t,r,c):v(e,t,r))):i?b(a,t,r,c):v(a,t,r)}}if(!p)return h.length?Promise.all(h).then(()=>t):t;const f=[],g=m.keySet,y=p._zod,_=y.def.type;for(const e of Object.keys(c)){if(g.has(e))continue;if("never"===_){f.push(e);continue}const r=y.run({value:c[e],issues:[]},o);r instanceof Promise?h.push(r.then(r=>v(r,t,e))):v(r,t,e)}return f.length&&t.issues.push({code:"unrecognized_keys",keys:f,input:c,inst:e}),h.length?Promise.all(h).then(()=>t):t}}),t.$ZodUnion=o.$constructor("$ZodUnion",(e,r)=>{t.$ZodType.init(e,r),u.defineLazy(e._zod,"optin",()=>r.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),u.defineLazy(e._zod,"optout",()=>r.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),u.defineLazy(e._zod,"values",()=>{if(r.options.every(e=>e._zod.values))return new Set(r.options.flatMap(e=>Array.from(e._zod.values)))}),u.defineLazy(e._zod,"pattern",()=>{if(r.options.every(e=>e._zod.pattern)){const e=r.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>u.cleanRegex(e.source)).join("|")})$`)}}),e._zod.parse=(t,n)=>{let a=!1;const i=[];for(const e of r.options){const r=e._zod.run({value:t.value,issues:[]},n);if(r instanceof Promise)i.push(r),a=!0;else{if(0===r.issues.length)return r;i.push(r)}}return a?Promise.all(i).then(r=>_(r,t,e,n)):_(i,t,e,n)}}),t.$ZodDiscriminatedUnion=o.$constructor("$ZodDiscriminatedUnion",(e,r)=>{t.$ZodUnion.init(e,r);const n=e._zod.parse;u.defineLazy(e._zod,"propValues",()=>{const e={};for(const t of r.options){const n=t._zod.propValues;if(!n||0===Object.keys(n).length)throw new Error(`Invalid discriminated union option at index "${r.options.indexOf(t)}"`);for(const[t,r]of Object.entries(n)){e[t]||(e[t]=new Set);for(const n of r)e[t].add(n)}}return e});const a=u.cached(()=>{const e=r.options,t=new Map;for(const n of e){const e=n._zod.propValues[r.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${r.options.indexOf(n)}"`);for(const r of e){if(t.has(r))throw new Error(`Duplicate discriminator value "${String(r)}"`);t.set(r,n)}}return t});e._zod.parse=(t,i)=>{const s=t.value;if(!u.isObject(s))return t.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),t;const o=a.value.get(s?.[r.discriminator]);return o?o._zod.run(t,i):r.unionFallback?n(t,i):(t.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:s,path:[r.discriminator],inst:e}),t)}}),t.$ZodIntersection=o.$constructor("$ZodIntersection",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(e,t)=>{const n=e.value,a=r.left._zod.run({value:n,issues:[]},t),i=r.right._zod.run({value:n,issues:[]},t);return a instanceof Promise||i instanceof Promise?Promise.all([a,i]).then(([t,r])=>P(e,t,r)):P(e,a,i)}}),t.$ZodTuple=o.$constructor("$ZodTuple",(e,r)=>{t.$ZodType.init(e,r);const n=r.items,a=n.length-[...n].reverse().findIndex(e=>"optional"!==e._zod.optin);e._zod.parse=(t,i)=>{const s=t.value;if(!Array.isArray(s))return t.issues.push({input:s,inst:e,expected:"tuple",code:"invalid_type"}),t;t.value=[];const o=[];if(!r.rest){const r=s.length>n.length,i=s.length<a-1;if(r||i)return t.issues.push({input:s,inst:e,origin:"array",...r?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length}}),t}let l=-1;for(const e of n){if(l++,l>=s.length&&l>=a)continue;const r=e._zod.run({value:s[l],issues:[]},i);r instanceof Promise?o.push(r.then(e=>O(e,t,l))):O(r,t,l)}if(r.rest){const e=s.slice(n.length);for(const n of e){l++;const e=r.rest._zod.run({value:n,issues:[]},i);e instanceof Promise?o.push(e.then(e=>O(e,t,l))):O(e,t,l)}}return o.length?Promise.all(o).then(()=>t):t}}),t.$ZodRecord=o.$constructor("$ZodRecord",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,n)=>{const a=t.value;if(!u.isPlainObject(a))return t.issues.push({expected:"record",code:"invalid_type",input:a,inst:e}),t;const i=[];if(r.keyType._zod.values){const s=r.keyType._zod.values;t.value={};for(const e of s)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){const s=r.valueType._zod.run({value:a[e],issues:[]},n);s instanceof Promise?i.push(s.then(r=>{r.issues.length&&t.issues.push(...u.prefixIssues(e,r.issues)),t.value[e]=r.value})):(s.issues.length&&t.issues.push(...u.prefixIssues(e,s.issues)),t.value[e]=s.value)}let o;for(const e in a)s.has(e)||(o=o??[],o.push(e));o&&o.length>0&&t.issues.push({code:"unrecognized_keys",input:a,inst:e,keys:o})}else{t.value={};for(const s of Reflect.ownKeys(a)){if("__proto__"===s)continue;const l=r.keyType._zod.run({value:s,issues:[]},n);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){t.issues.push({origin:"record",code:"invalid_key",issues:l.issues.map(e=>u.finalizeIssue(e,n,o.config())),input:s,path:[s],inst:e}),t.value[l.value]=l.value;continue}const c=r.valueType._zod.run({value:a[s],issues:[]},n);c instanceof Promise?i.push(c.then(e=>{e.issues.length&&t.issues.push(...u.prefixIssues(s,e.issues)),t.value[l.value]=e.value})):(c.issues.length&&t.issues.push(...u.prefixIssues(s,c.issues)),t.value[l.value]=c.value)}}return i.length?Promise.all(i).then(()=>t):t}}),t.$ZodMap=o.$constructor("$ZodMap",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,n)=>{const a=t.value;if(!(a instanceof Map))return t.issues.push({expected:"map",code:"invalid_type",input:a,inst:e}),t;const i=[];t.value=new Map;for(const[s,o]of a){const l=r.keyType._zod.run({value:s,issues:[]},n),c=r.valueType._zod.run({value:o,issues:[]},n);l instanceof Promise||c instanceof Promise?i.push(Promise.all([l,c]).then(([r,i])=>{S(r,i,t,s,a,e,n)})):S(l,c,t,s,a,e,n)}return i.length?Promise.all(i).then(()=>t):t}}),t.$ZodSet=o.$constructor("$ZodSet",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,n)=>{const a=t.value;if(!(a instanceof Set))return t.issues.push({input:a,inst:e,expected:"set",code:"invalid_type"}),t;const i=[];t.value=new Set;for(const e of a){const a=r.valueType._zod.run({value:e,issues:[]},n);a instanceof Promise?i.push(a.then(e=>E(e,t))):E(a,t)}return i.length?Promise.all(i).then(()=>t):t}}),t.$ZodEnum=o.$constructor("$ZodEnum",(e,r)=>{t.$ZodType.init(e,r);const n=u.getEnumValues(r.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(e=>u.propertyKeyTypes.has(typeof e)).map(e=>"string"==typeof e?u.escapeRegex(e):e.toString()).join("|")})$`),e._zod.parse=(t,r)=>{const a=t.value;return e._zod.values.has(a)||t.issues.push({code:"invalid_value",values:n,input:a,inst:e}),t}}),t.$ZodLiteral=o.$constructor("$ZodLiteral",(e,r)=>{t.$ZodType.init(e,r),e._zod.values=new Set(r.values),e._zod.pattern=new RegExp(`^(${r.values.map(e=>"string"==typeof e?u.escapeRegex(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(t,n)=>{const a=t.value;return e._zod.values.has(a)||t.issues.push({code:"invalid_value",values:r.values,input:a,inst:e}),t}}),t.$ZodFile=o.$constructor("$ZodFile",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,r)=>{const n=t.value;return n instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:n,inst:e}),t}}),t.$ZodTransform=o.$constructor("$ZodTransform",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(e,t)=>{const n=r.transform(e.value,e);if(t.async)return(n instanceof Promise?n:Promise.resolve(n)).then(t=>(e.value=t,e));if(n instanceof Promise)throw new o.$ZodAsyncError;return e.value=n,e}}),t.$ZodOptional=o.$constructor("$ZodOptional",(e,r)=>{t.$ZodType.init(e,r),e._zod.optin="optional",e._zod.optout="optional",u.defineLazy(e._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,void 0]):void 0),u.defineLazy(e._zod,"pattern",()=>{const e=r.innerType._zod.pattern;return e?new RegExp(`^(${u.cleanRegex(e.source)})?$`):void 0}),e._zod.parse=(e,t)=>"optional"===r.innerType._zod.optin?r.innerType._zod.run(e,t):void 0===e.value?e:r.innerType._zod.run(e,t)}),t.$ZodNullable=o.$constructor("$ZodNullable",(e,r)=>{t.$ZodType.init(e,r),u.defineLazy(e._zod,"optin",()=>r.innerType._zod.optin),u.defineLazy(e._zod,"optout",()=>r.innerType._zod.optout),u.defineLazy(e._zod,"pattern",()=>{const e=r.innerType._zod.pattern;return e?new RegExp(`^(${u.cleanRegex(e.source)}|null)$`):void 0}),u.defineLazy(e._zod,"values",()=>r.innerType._zod.values?new Set([...r.innerType._zod.values,null]):void 0),e._zod.parse=(e,t)=>null===e.value?e:r.innerType._zod.run(e,t)}),t.$ZodDefault=o.$constructor("$ZodDefault",(e,r)=>{t.$ZodType.init(e,r),e._zod.optin="optional",u.defineLazy(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(e,t)=>{if(void 0===e.value)return e.value=r.defaultValue,e;const n=r.innerType._zod.run(e,t);return n instanceof Promise?n.then(e=>A(e,r)):A(n,r)}}),t.$ZodPrefault=o.$constructor("$ZodPrefault",(e,r)=>{t.$ZodType.init(e,r),e._zod.optin="optional",u.defineLazy(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(e,t)=>(void 0===e.value&&(e.value=r.defaultValue),r.innerType._zod.run(e,t))}),t.$ZodNonOptional=o.$constructor("$ZodNonOptional",(e,r)=>{t.$ZodType.init(e,r),u.defineLazy(e._zod,"values",()=>{const e=r.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(t,n)=>{const a=r.innerType._zod.run(t,n);return a instanceof Promise?a.then(t=>I(t,e)):I(a,e)}}),t.$ZodSuccess=o.$constructor("$ZodSuccess",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(e,t)=>{const n=r.innerType._zod.run(e,t);return n instanceof Promise?n.then(t=>(e.value=0===t.issues.length,e)):(e.value=0===n.issues.length,e)}}),t.$ZodCatch=o.$constructor("$ZodCatch",(e,r)=>{t.$ZodType.init(e,r),e._zod.optin="optional",u.defineLazy(e._zod,"optout",()=>r.innerType._zod.optout),u.defineLazy(e._zod,"values",()=>r.innerType._zod.values),e._zod.parse=(e,t)=>{const n=r.innerType._zod.run(e,t);return n instanceof Promise?n.then(n=>(e.value=n.value,n.issues.length&&(e.value=r.catchValue({...e,error:{issues:n.issues.map(e=>u.finalizeIssue(e,t,o.config()))},input:e.value}),e.issues=[]),e)):(e.value=n.value,n.issues.length&&(e.value=r.catchValue({...e,error:{issues:n.issues.map(e=>u.finalizeIssue(e,t,o.config()))},input:e.value}),e.issues=[]),e)}}),t.$ZodNaN=o.$constructor("$ZodNaN",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(t,r)=>("number"==typeof t.value&&Number.isNaN(t.value)||t.issues.push({input:t.value,inst:e,expected:"nan",code:"invalid_type"}),t)}),t.$ZodPipe=o.$constructor("$ZodPipe",(e,r)=>{t.$ZodType.init(e,r),u.defineLazy(e._zod,"values",()=>r.in._zod.values),u.defineLazy(e._zod,"optin",()=>r.in._zod.optin),u.defineLazy(e._zod,"optout",()=>r.out._zod.optout),e._zod.parse=(e,t)=>{const n=r.in._zod.run(e,t);return n instanceof Promise?n.then(e=>k(e,r,t)):k(n,r,t)}}),t.$ZodReadonly=o.$constructor("$ZodReadonly",(e,r)=>{t.$ZodType.init(e,r),u.defineLazy(e._zod,"propValues",()=>r.innerType._zod.propValues),u.defineLazy(e._zod,"values",()=>r.innerType._zod.values),u.defineLazy(e._zod,"optin",()=>r.innerType._zod.optin),u.defineLazy(e._zod,"optout",()=>r.innerType._zod.optout),e._zod.parse=(e,t)=>{const n=r.innerType._zod.run(e,t);return n instanceof Promise?n.then(T):T(n)}}),t.$ZodTemplateLiteral=o.$constructor("$ZodTemplateLiteral",(e,r)=>{t.$ZodType.init(e,r);const n=[];for(const e of r.parts)if(e instanceof t.$ZodType){if(!e._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...e._zod.traits].shift()}`);const t=e._zod.pattern instanceof RegExp?e._zod.pattern.source:e._zod.pattern;if(!t)throw new Error(`Invalid template literal part: ${e._zod.traits}`);const r=t.startsWith("^")?1:0,a=t.endsWith("$")?t.length-1:t.length;n.push(t.slice(r,a))}else{if(null!==e&&!u.primitiveTypes.has(typeof e))throw new Error(`Invalid template literal part: ${e}`);n.push(u.escapeRegex(`${e}`))}e._zod.pattern=new RegExp(`^${n.join("")}$`),e._zod.parse=(t,r)=>"string"!=typeof t.value?(t.issues.push({input:t.value,inst:e,expected:"template_literal",code:"invalid_type"}),t):(e._zod.pattern.lastIndex=0,e._zod.pattern.test(t.value)||t.issues.push({input:t.value,inst:e,code:"invalid_format",format:"template_literal",pattern:e._zod.pattern.source}),t)}),t.$ZodPromise=o.$constructor("$ZodPromise",(e,r)=>{t.$ZodType.init(e,r),e._zod.parse=(e,t)=>Promise.resolve(e.value).then(e=>r.innerType._zod.run({value:e,issues:[]},t))}),t.$ZodLazy=o.$constructor("$ZodLazy",(e,r)=>{t.$ZodType.init(e,r),u.defineLazy(e._zod,"innerType",()=>r.getter()),u.defineLazy(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),u.defineLazy(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),u.defineLazy(e._zod,"optin",()=>e._zod.innerType._zod.optin),u.defineLazy(e._zod,"optout",()=>e._zod.innerType._zod.optout),e._zod.parse=(t,r)=>e._zod.innerType._zod.run(t,r)}),t.$ZodCustom=o.$constructor("$ZodCustom",(e,r)=>{s.$ZodCheck.init(e,r),t.$ZodType.init(e,r),e._zod.parse=(e,t)=>e,e._zod.check=t=>{const n=t.value,a=r.fn(n);if(a instanceof Promise)return a.then(r=>j(r,t,n,e));j(a,t,n,e)}})},95346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAnyDef=void 0;const n=r(16424);t.parseAnyDef=function(e){if("openAi"!==e.target)return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?(0,n.getRelativePath)(t,e.currentPath):t.join("/")}}},95367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClient=void 0;const n=r(40338),a=r(68208),i=r(21391),s=r(33256);function o(e,t,r,n,a,s){var o;return a=null!==(o=n.allowInsecureConnection)&&void 0!==o?o:a,{then:function(o,l){return(0,i.sendRequest)(e,t,r,Object.assign(Object.assign({},n),{allowInsecureConnection:a}),s).then(o,l)},asBrowserStream:async()=>(0,i.sendRequest)(e,t,r,Object.assign(Object.assign({},n),{allowInsecureConnection:a,responseAsStream:!0}),s),asNodeStream:async()=>(0,i.sendRequest)(e,t,r,Object.assign(Object.assign({},n),{allowInsecureConnection:a,responseAsStream:!0}),s)}}t.getClient=function(e,t,r={}){var i,l;let c;var d;t&&(void 0!==(d=t).key||(0,n.isTokenCredential)(d)?c=t:r=null!=t?t:{});const u=(0,a.createDefaultPipeline)(e,c,r);if(null===(i=r.additionalPolicies)||void 0===i?void 0:i.length)for(const{policy:e,position:t}of r.additionalPolicies){const r="perRetry"===t?"Sign":void 0;u.addPolicy(e,{afterPhase:r})}const{allowInsecureConnection:p,httpClient:m}=r,h=null!==(l=r.endpoint)&&void 0!==l?l:e,f=(e,...t)=>{const r=r=>(0,s.buildRequestUrl)(h,e,t,Object.assign({allowInsecureConnection:p},r));return{get:(e={})=>o("GET",r(e),u,e,p,m),post:(e={})=>o("POST",r(e),u,e,p,m),put:(e={})=>o("PUT",r(e),u,e,p,m),patch:(e={})=>o("PATCH",r(e),u,e,p,m),delete:(e={})=>o("DELETE",r(e),u,e,p,m),head:(e={})=>o("HEAD",r(e),u,e,p,m),options:(e={})=>o("OPTIONS",r(e),u,e,p,m),trace:(e={})=>o("TRACE",r(e),u,e,p,m)}};return{path:f,pathUnchecked:f,pipeline:u}}},95445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDef=R;const n=r(7552),a=r(69910),i=r(61073),s=r(9485),o=r(68548),l=r(39012),c=r(75563),d=r(55362),u=r(55641),p=r(55998),m=r(23063),h=r(11319),f=r(44219),g=r(84450),y=r(36440),v=r(61778),b=r(96019),_=r(60203),w=r(9687),P=r(65901),O=r(25074),S=r(43440),E=r(62317),A=r(4131),I=r(45432),k=r(38983),T=r(77386),j=r(76984),C=r(95707),x=r(85474),N=r(86420),$=r(65189);function R(e,t,r=!1){const n=t.seen.get(e);if(t.override){const a=t.override?.(e,t,n,r);if(a!==$.ignoreOverride)return a}if(n&&!r){const e=M(n,t);if(void 0!==e)return"$ref"in e&&t.seenRefs.add(e.$ref),e}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=L(e,e.typeName,t,r);return i&&F(e,t,i),a.jsonSchema=i,i}const M=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"extract-to-root":const r=e.path.slice(t.basePath.length+1).join("_");return r!==t.name&&"duplicate-ref"===t.nameStrategy&&(t.definitions[r]=e.def),{$ref:[...t.basePath,t.definitionPath,r].join("/")};case"relative":return{$ref:D(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):"seen"===t.$refStrategy?{}:void 0}},D=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},L=(e,t,r,$)=>{switch(t){case n.ZodFirstPartyTypeKind.ZodString:return(0,k.parseStringDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNumber:return(0,w.parseNumberDef)(e,r);case n.ZodFirstPartyTypeKind.ZodObject:return(0,P.parseObjectDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBigInt:return(0,s.parseBigintDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBoolean:return(0,o.parseBooleanDef)();case n.ZodFirstPartyTypeKind.ZodDate:return(0,d.parseDateDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUndefined:return(0,j.parseUndefinedDef)();case n.ZodFirstPartyTypeKind.ZodNull:return(0,b.parseNullDef)(r);case n.ZodFirstPartyTypeKind.ZodArray:return(0,i.parseArrayDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUnion:case n.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,C.parseUnionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodIntersection:return(0,h.parseIntersectionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodTuple:return(0,T.parseTupleDef)(e,r);case n.ZodFirstPartyTypeKind.ZodRecord:return(0,A.parseRecordDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLiteral:return(0,f.parseLiteralDef)(e,r);case n.ZodFirstPartyTypeKind.ZodEnum:return(0,m.parseEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,y.parseNativeEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNullable:return(0,_.parseNullableDef)(e,r);case n.ZodFirstPartyTypeKind.ZodOptional:return(0,O.parseOptionalDef)(e,r);case n.ZodFirstPartyTypeKind.ZodMap:return(0,g.parseMapDef)(e,r);case n.ZodFirstPartyTypeKind.ZodSet:return(0,I.parseSetDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLazy:return R(e.getter()._def,r);case n.ZodFirstPartyTypeKind.ZodPromise:return(0,E.parsePromiseDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNaN:case n.ZodFirstPartyTypeKind.ZodNever:return(0,v.parseNeverDef)();case n.ZodFirstPartyTypeKind.ZodEffects:return(0,p.parseEffectsDef)(e,r,$);case n.ZodFirstPartyTypeKind.ZodAny:return(0,a.parseAnyDef)();case n.ZodFirstPartyTypeKind.ZodUnknown:return(0,x.parseUnknownDef)();case n.ZodFirstPartyTypeKind.ZodDefault:return(0,u.parseDefaultDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBranded:return(0,l.parseBrandedDef)(e,r);case n.ZodFirstPartyTypeKind.ZodReadonly:return(0,N.parseReadonlyDef)(e,r);case n.ZodFirstPartyTypeKind.ZodCatch:return(0,c.parseCatchDef)(e,r);case n.ZodFirstPartyTypeKind.ZodPipeline:return(0,S.parsePipelineDef)(e,r);case n.ZodFirstPartyTypeKind.ZodFunction:case n.ZodFirstPartyTypeKind.ZodVoid:case n.ZodFirstPartyTypeKind.ZodSymbol:default:return}},F=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r)},95484:(e,t,r)=>{"use strict";const n=r(24876),a=r(36673),i={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},s=Symbol("failure");function o(e){return n.ucs2.decode(e).length}function l(e,t){const r=e[t];return isNaN(r)?void 0:String.fromCodePoint(r)}function c(e){return e>=48&&e<=57}function d(e){return e>=65&&e<=90||e>=97&&e<=122}function u(e){return c(e)||e>=65&&e<=70||e>=97&&e<=102}function p(e){return"."===e||"%2e"===e.toLowerCase()}function m(e){return 2===e.length&&d(e.codePointAt(0))&&(":"===e[1]||"|"===e[1])}function h(e){return void 0!==i[e]}function f(e){return h(e.scheme)}function g(e){let t=e.toString(16).toUpperCase();return 1===t.length&&(t="0"+t),"%"+t}function y(e){return e<=31||e>126}const v=new Set([32,34,35,60,62,63,96,123,125]);function b(e){return y(e)||v.has(e)}const _=new Set([47,58,59,61,64,91,92,93,94,124]);function w(e){return b(e)||_.has(e)}function P(e,t){const r=String.fromCodePoint(e);return t(e)?function(e){const t=new Buffer(e);let r="";for(let e=0;e<t.length;++e)r+=g(t[e]);return r}(r):r}function O(e){let t=10;return e.length>=2&&"0"===e.charAt(0)&&"x"===e.charAt(1).toLowerCase()?(e=e.substring(2),t=16):e.length>=2&&"0"===e.charAt(0)&&(e=e.substring(1),t=8),""===e?0:(10===t?/[^0-9]/:16===t?/[^0-9A-Fa-f]/:/[^0-7]/).test(e)?s:parseInt(e,t)}function S(e,t){if("["===e[0])return"]"!==e[e.length-1]?s:function(e){const t=[0,0,0,0,0,0,0,0];let r=0,a=null,i=0;if(58===(e=n.ucs2.decode(e))[i]){if(58!==e[i+1])return s;i+=2,++r,a=r}for(;i<e.length;){if(8===r)return s;if(58===e[i]){if(null!==a)return s;++i,++r,a=r;continue}let n=0,o=0;for(;o<4&&u(e[i]);)n=16*n+parseInt(l(e,i),16),++i,++o;if(46===e[i]){if(0===o)return s;if(i-=o,r>6)return s;let n=0;for(;void 0!==e[i];){let a=null;if(n>0){if(!(46===e[i]&&n<4))return s;++i}if(!c(e[i]))return s;for(;c(e[i]);){const t=parseInt(l(e,i));if(null===a)a=t;else{if(0===a)return s;a=10*a+t}if(a>255)return s;++i}t[r]=256*t[r]+a,++n,2!==n&&4!==n||++r}if(4!==n)return s;break}if(58===e[i]){if(++i,void 0===e[i])return s}else if(void 0!==e[i])return s;t[r]=n,++r}if(null!==a){let e=r-a;for(r=7;0!==r&&e>0;){const n=t[a+e-1];t[a+e-1]=t[r],t[r]=n,--r,--e}}else if(null===a&&8!==r)return s;return t}(e.substring(1,e.length-1));if(!t)return function(e){if(-1!==e.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|\?|@|\[|\\|\]/))return s;let t="";const r=n.ucs2.decode(e);for(let e=0;e<r.length;++e)t+=P(r[e],y);return t}(e);const r=function(e){const t=new Buffer(e),r=[];for(let e=0;e<t.length;++e)37!==t[e]?r.push(t[e]):37===t[e]&&u(t[e+1])&&u(t[e+2])?(r.push(parseInt(t.slice(e+1,e+3).toString(),16)),e+=2):r.push(t[e]);return new Buffer(r).toString()}(e),i=a.toASCII(r,!1,a.PROCESSING_OPTIONS.NONTRANSITIONAL,!1);if(null===i)return s;if(-1!==i.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|%|\/|:|\?|@|\[|\\|\]/))return s;const o=function(e){const t=e.split(".");if(""===t[t.length-1]&&t.length>1&&t.pop(),t.length>4)return e;const r=[];for(const n of t){if(""===n)return e;const t=O(n);if(t===s)return e;r.push(t)}for(let e=0;e<r.length-1;++e)if(r[e]>255)return s;if(r[r.length-1]>=Math.pow(256,5-r.length))return s;let n=r.pop(),a=0;for(const e of r)n+=e*Math.pow(256,3-a),++a;return n}(i);return"number"==typeof o||o===s?o:i}function E(e){return"number"==typeof e?function(e){let t="",r=e;for(let e=1;e<=4;++e)t=String(r%256)+t,4!==e&&(t="."+t),r=Math.floor(r/256);return t}(e):e instanceof Array?"["+function(e){let t="";const r=function(e){let t=null,r=1,n=null,a=0;for(let i=0;i<e.length;++i)0!==e[i]?(a>r&&(t=n,r=a),n=null,a=0):(null===n&&(n=i),++a);return a>r&&(t=n,r=a),{idx:t,len:r}}(e).idx;let n=!1;for(let a=0;a<=7;++a)if(!n||0!==e[a]){if(n&&(n=!1),r===a){t+=0===a?"::":":",n=!0;continue}t+=e[a].toString(16),7!==a&&(t+=":")}return t}(e)+"]":e}function A(e){const t=e.path;var r;0!==t.length&&("file"===e.scheme&&1===t.length&&(r=t[0],/^[A-Za-z]:$/.test(r))||t.pop())}function I(e){return""!==e.username||""!==e.password}function k(e,t,r,a,i){if(this.pointer=0,this.input=e,this.base=t||null,this.encodingOverride=r||"utf-8",this.stateOverride=i,this.url=a,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,cannotBeABaseURL:!1};const e=function(e){return e.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/g,"")}(this.input);e!==this.input&&(this.parseError=!0),this.input=e}const o=function(e){return e.replace(/\u0009|\u000A|\u000D/g,"")}(this.input);for(o!==this.input&&(this.parseError=!0),this.input=o,this.state=i||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=n.ucs2.decode(this.input);this.pointer<=this.input.length;++this.pointer){const e=this.input[this.pointer],t=isNaN(e)?void 0:String.fromCodePoint(e),r=this["parse "+this.state](e,t);if(!r)break;if(r===s){this.failure=!0;break}}}k.prototype["parse scheme start"]=function(e,t){if(d(e))this.buffer+=t.toLowerCase(),this.state="scheme";else{if(this.stateOverride)return this.parseError=!0,s;this.state="no scheme",--this.pointer}return!0},k.prototype["parse scheme"]=function(e,t){if(function(e){return d(e)||c(e)}(e)||43===e||45===e||46===e)this.buffer+=t.toLowerCase();else if(58===e){if(this.stateOverride){if(f(this.url)&&!h(this.buffer))return!1;if(!f(this.url)&&h(this.buffer))return!1;if((I(this.url)||null!==this.url.port)&&"file"===this.buffer)return!1;if("file"===this.url.scheme&&(""===this.url.host||null===this.url.host))return!1}if(this.url.scheme=this.buffer,this.buffer="",this.stateOverride)return!1;"file"===this.url.scheme?(47===this.input[this.pointer+1]&&47===this.input[this.pointer+2]||(this.parseError=!0),this.state="file"):f(this.url)&&null!==this.base&&this.base.scheme===this.url.scheme?this.state="special relative or authority":f(this.url)?this.state="special authority slashes":47===this.input[this.pointer+1]?(this.state="path or authority",++this.pointer):(this.url.cannotBeABaseURL=!0,this.url.path.push(""),this.state="cannot-be-a-base-URL path")}else{if(this.stateOverride)return this.parseError=!0,s;this.buffer="",this.state="no scheme",this.pointer=-1}return!0},k.prototype["parse no scheme"]=function(e){return null===this.base||this.base.cannotBeABaseURL&&35!==e?s:(this.base.cannotBeABaseURL&&35===e?(this.url.scheme=this.base.scheme,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.url.cannotBeABaseURL=!0,this.state="fragment"):"file"===this.base.scheme?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)},k.prototype["parse special relative or authority"]=function(e){return 47===e&&47===this.input[this.pointer+1]?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0},k.prototype["parse path or authority"]=function(e){return 47===e?this.state="authority":(this.state="path",--this.pointer),!0},k.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,isNaN(e)?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query):47===e?this.state="relative slash":63===e?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):35===e?(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):f(this.url)&&92===e?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0},k.prototype["parse relative slash"]=function(e){return!f(this.url)||47!==e&&92!==e?47===e?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer):(92===e&&(this.parseError=!0),this.state="special authority ignore slashes"),!0},k.prototype["parse special authority slashes"]=function(e){return 47===e&&47===this.input[this.pointer+1]?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0},k.prototype["parse special authority ignore slashes"]=function(e){return 47!==e&&92!==e?(this.state="authority",--this.pointer):this.parseError=!0,!0},k.prototype["parse authority"]=function(e,t){if(64===e){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;const e=o(this.buffer);for(let t=0;t<e;++t){const e=this.buffer.codePointAt(t);if(58===e&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}const r=P(e,w);this.passwordTokenSeenFlag?this.url.password+=r:this.url.username+=r}this.buffer=""}else if(isNaN(e)||47===e||63===e||35===e||f(this.url)&&92===e){if(this.atFlag&&""===this.buffer)return this.parseError=!0,s;this.pointer-=o(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=t;return!0},k.prototype["parse hostname"]=k.prototype["parse host"]=function(e,t){if(this.stateOverride&&"file"===this.url.scheme)--this.pointer,this.state="file host";else if(58!==e||this.arrFlag)if(isNaN(e)||47===e||63===e||35===e||f(this.url)&&92===e){if(--this.pointer,f(this.url)&&""===this.buffer)return this.parseError=!0,s;if(this.stateOverride&&""===this.buffer&&(I(this.url)||null!==this.url.port))return this.parseError=!0,!1;const e=S(this.buffer,f(this.url));if(e===s)return s;if(this.url.host=e,this.buffer="",this.state="path start",this.stateOverride)return!1}else 91===e?this.arrFlag=!0:93===e&&(this.arrFlag=!1),this.buffer+=t;else{if(""===this.buffer)return this.parseError=!0,s;const e=S(this.buffer,f(this.url));if(e===s)return s;if(this.url.host=e,this.buffer="",this.state="port","hostname"===this.stateOverride)return!1}return!0},k.prototype["parse port"]=function(e,t){if(c(e))this.buffer+=t;else{if(!(isNaN(e)||47===e||63===e||35===e||f(this.url)&&92===e||this.stateOverride))return this.parseError=!0,s;if(""!==this.buffer){const e=parseInt(this.buffer);if(e>Math.pow(2,16)-1)return this.parseError=!0,s;this.url.port=e===(r=this.url.scheme,i[r])?null:e,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}var r;return!0};const T=new Set([47,92,63,35]);k.prototype["parse file"]=function(e){var t,r;return this.url.scheme="file",47===e||92===e?(92===e&&(this.parseError=!0),this.state="file slash"):null!==this.base&&"file"===this.base.scheme?isNaN(e)?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query):63===e?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):35===e?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):(this.input.length-this.pointer-1==0||(t=e,r=this.input[this.pointer+1],!d(t)||58!==r&&124!==r)||this.input.length-this.pointer-1>=2&&!T.has(this.input[this.pointer+2])?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),A(this.url)):this.parseError=!0,this.state="path",--this.pointer):(this.state="path",--this.pointer),!0},k.prototype["parse file slash"]=function(e){var t;return 47===e||92===e?(92===e&&(this.parseError=!0),this.state="file host"):(null!==this.base&&"file"===this.base.scheme&&(2===(t=this.base.path[0]).length&&d(t.codePointAt(0))&&":"===t[1]?this.url.path.push(this.base.path[0]):this.url.host=this.base.host),this.state="path",--this.pointer),!0},k.prototype["parse file host"]=function(e,t){if(isNaN(e)||47===e||92===e||63===e||35===e)if(--this.pointer,!this.stateOverride&&m(this.buffer))this.parseError=!0,this.state="path";else if(""===this.buffer){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let e=S(this.buffer,f(this.url));if(e===s)return s;if("localhost"===e&&(e=""),this.url.host=e,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=t;return!0},k.prototype["parse path start"]=function(e){return f(this.url)?(92===e&&(this.parseError=!0),this.state="path",47!==e&&92!==e&&--this.pointer):this.stateOverride||63!==e?this.stateOverride||35!==e?void 0!==e&&(this.state="path",47!==e&&--this.pointer):(this.url.fragment="",this.state="fragment"):(this.url.query="",this.state="query"),!0},k.prototype["parse path"]=function(e){if(isNaN(e)||47===e||f(this.url)&&92===e||!this.stateOverride&&(63===e||35===e)){if(f(this.url)&&92===e&&(this.parseError=!0),".."===(t=(t=this.buffer).toLowerCase())||"%2e."===t||".%2e"===t||"%2e%2e"===t?(A(this.url),47===e||f(this.url)&&92===e||this.url.path.push("")):!p(this.buffer)||47===e||f(this.url)&&92===e?p(this.buffer)||("file"===this.url.scheme&&0===this.url.path.length&&m(this.buffer)&&(""!==this.url.host&&null!==this.url.host&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)):this.url.path.push(""),this.buffer="","file"===this.url.scheme&&(void 0===e||63===e||35===e))for(;this.url.path.length>1&&""===this.url.path[0];)this.parseError=!0,this.url.path.shift();63===e&&(this.url.query="",this.state="query"),35===e&&(this.url.fragment="",this.state="fragment")}else 37!==e||u(this.input[this.pointer+1])&&u(this.input[this.pointer+2])||(this.parseError=!0),this.buffer+=P(e,b);var t;return!0},k.prototype["parse cannot-be-a-base-URL path"]=function(e){return 63===e?(this.url.query="",this.state="query"):35===e?(this.url.fragment="",this.state="fragment"):(isNaN(e)||37===e||(this.parseError=!0),37!==e||u(this.input[this.pointer+1])&&u(this.input[this.pointer+2])||(this.parseError=!0),isNaN(e)||(this.url.path[0]=this.url.path[0]+P(e,y))),!0},k.prototype["parse query"]=function(e,t){if(isNaN(e)||!this.stateOverride&&35===e){f(this.url)&&"ws"!==this.url.scheme&&"wss"!==this.url.scheme||(this.encodingOverride="utf-8");const t=new Buffer(this.buffer);for(let e=0;e<t.length;++e)t[e]<33||t[e]>126||34===t[e]||35===t[e]||60===t[e]||62===t[e]?this.url.query+=g(t[e]):this.url.query+=String.fromCodePoint(t[e]);this.buffer="",35===e&&(this.url.fragment="",this.state="fragment")}else 37!==e||u(this.input[this.pointer+1])&&u(this.input[this.pointer+2])||(this.parseError=!0),this.buffer+=t;return!0},k.prototype["parse fragment"]=function(e){return isNaN(e)||(0===e?this.parseError=!0:(37!==e||u(this.input[this.pointer+1])&&u(this.input[this.pointer+2])||(this.parseError=!0),this.url.fragment+=P(e,y))),!0},e.exports.serializeURL=function(e,t){let r=e.scheme+":";if(null!==e.host?(r+="//",""===e.username&&""===e.password||(r+=e.username,""!==e.password&&(r+=":"+e.password),r+="@"),r+=E(e.host),null!==e.port&&(r+=":"+e.port)):null===e.host&&"file"===e.scheme&&(r+="//"),e.cannotBeABaseURL)r+=e.path[0];else for(const t of e.path)r+="/"+t;return null!==e.query&&(r+="?"+e.query),t||null===e.fragment||(r+="#"+e.fragment),r},e.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":try{return e.exports.serializeURLOrigin(e.exports.parseURL(t.path[0]))}catch(e){return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(e){let t=e.scheme+"://";return t+=E(e.host),null!==e.port&&(t+=":"+e.port),t}({scheme:t.scheme,host:t.host,port:t.port});case"file":return"file://";default:return"null"}},e.exports.basicURLParse=function(e,t){void 0===t&&(t={});const r=new k(e,t.baseURL,t.encodingOverride,t.url,t.stateOverride);return r.failure?"failure":r.url},e.exports.setTheUsername=function(e,t){e.username="";const r=n.ucs2.decode(t);for(let t=0;t<r.length;++t)e.username+=P(r[t],w)},e.exports.setThePassword=function(e,t){e.password="";const r=n.ucs2.decode(t);for(let t=0;t<r.length;++t)e.password+=P(r[t],w)},e.exports.serializeHost=E,e.exports.cannotHaveAUsernamePasswordPort=function(e){return null===e.host||""===e.host||e.cannotBeABaseURL||"file"===e.scheme},e.exports.serializeInteger=function(e){return String(e)},e.exports.parseURL=function(t,r){return void 0===r&&(r={}),e.exports.basicURLParse(t,{baseURL:r.baseURL,encodingOverride:r.encodingOverride})}},95543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullableDef=void 0;const n=r(84769),a=r(34143);t.parseNullableDef=function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:a.primitiveMappings[e.innerType._def.typeName],nullable:!0}:{type:[a.primitiveMappings[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}},95707:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.primitiveMappings=void 0,t.parseUnionDef=function(e,r){if("openApi3"===r.target)return a(e,r);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in t.primitiveMappings&&(!e._def.checks||!e._def.checks.length))){const e=n.reduce((e,r)=>{const n=t.primitiveMappings[r._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}if(n.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=n.reduce((e,t)=>{const r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===n.length){const t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return a(e,r)};const n=r(95445);t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};const a=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>(0,n.parseDef)(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0}},95734:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepCompareStrict=function e(t,r){const n=typeof t;if(n!==typeof r)return!1;if(Array.isArray(t)){if(!Array.isArray(r))return!1;const n=t.length;if(n!==r.length)return!1;for(let a=0;a<n;a++)if(!e(t[a],r[a]))return!1;return!0}if("object"===n){if(!t||!r)return t===r;const n=Object.keys(t),a=Object.keys(r);if(n.length!==a.length)return!1;for(const a of n)if(!e(t[a],r[a]))return!1;return!0}return t===r}},95761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatAnthropic=t.ChatAnthropicMessages=void 0;const n=r(64524),a=r(6500),i=r(79582),s=r(82331),o=r(80761),l=r(80601),c=r(8194),d=r(4538),u=r(60845),p=r(30107),m=r(49564),h=r(21197),f=r(27),g=r(94730),y=r(19161);function v(e){return"string"==typeof e.content?e.content:Array.isArray(e.content)&&e.content.length>=1&&"input"in e.content[0]?"string"==typeof e.content[0].input?e.content[0].input:JSON.stringify(e.content[0].input):Array.isArray(e.content)&&e.content.length>=1&&"text"in e.content[0]?e.content[0].text:void 0}class b extends o.BaseChatModel{static lc_name(){return"ChatAnthropic"}get lc_secrets(){return{anthropicApiKey:"ANTHROPIC_API_KEY",apiKey:"ANTHROPIC_API_KEY"}}get lc_aliases(){return{modelName:"model"}}constructor(e){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"anthropicApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:2048}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"claude-2.1"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"claude-2.1"}),Object.defineProperty(this,"invocationKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clientOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thinking",{enumerable:!0,configurable:!0,writable:!0,value:{type:"disabled"}}),Object.defineProperty(this,"batchClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamingClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"createClient",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.anthropicApiKey=e?.apiKey??e?.anthropicApiKey??(0,s.getEnvironmentVariable)("ANTHROPIC_API_KEY"),!this.anthropicApiKey&&!e?.createClient)throw new Error("Anthropic API key not found");this.clientOptions=e?.clientOptions??{},this.apiKey=this.anthropicApiKey,this.apiUrl=e?.anthropicApiUrl,this.modelName=e?.model??e?.modelName??this.model,this.model=this.modelName,this.invocationKwargs=e?.invocationKwargs??{},this.model.includes("opus-4-1")?this.topP=null===e?.topP?void 0:e?.topP:this.topP=e?.topP??this.topP,this.temperature=null===e?.temperature?void 0:e?.temperature??this.temperature,this.topK=e?.topK??this.topK,this.maxTokens=e?.maxTokensToSample??e?.maxTokens??this.maxTokens,this.stopSequences=e?.stopSequences??this.stopSequences,this.streaming=e?.streaming??!1,this.streamUsage=e?.streamUsage??this.streamUsage,this.thinking=e?.thinking??this.thinking,this.createClient=e?.createClient??(e=>new n.Anthropic(e))}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"anthropic",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}formatStructuredToolToAnthropic(e){if(e&&e.length)return e.map(e=>{if(function(e){return"object"==typeof e&&null!==e&&"type"in e&&"name"in e&&"string"==typeof e.type&&"string"==typeof e.name&&["web_search","bash","code_execution","computer","str_replace_editor","str_replace_based_edit_tool"].includes(e.name)}(e))return e;if(function(e){return"input_schema"in e}(e))return e;if((0,l.isOpenAITool)(e))return{name:e.function.name,description:e.function.description,input_schema:e.function.parameters};if((0,p.isLangChainTool)(e))return{name:e.name,description:e.description,input_schema:(0,u.isInteropZodSchema)(e.schema)?(0,c.toJsonSchema)(e.schema):e.schema};throw new Error(`Unknown tool type passed to ChatAnthropic: ${JSON.stringify(e,null,2)}`)})}bindTools(e,t){return this.withConfig({tools:this.formatStructuredToolToAnthropic(e),...t})}invocationParams(e){const t=(0,h.handleToolChoice)(e?.tool_choice);if("enabled"===this.thinking.type){if(-1!==this.topK)throw new Error("topK is not supported when thinking is enabled");if(-1!==this.topP)throw new Error("topP is not supported when thinking is enabled");if(1!==this.temperature)throw new Error("temperature is not supported when thinking is enabled");return{model:this.model,stop_sequences:e?.stop??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e?.tools),tool_choice:t,thinking:this.thinking,...this.invocationKwargs}}return{model:this.model,temperature:this.temperature,top_k:this.topK,top_p:this.topP,stop_sequences:e?.stop??this.stopSequences,stream:this.streaming,max_tokens:this.maxTokens,tools:this.formatStructuredToolToAnthropic(e?.tools),tool_choice:t,thinking:this.thinking,...this.invocationKwargs}}_identifyingParams(){return{model_name:this.model,...this.invocationParams()}}identifyingParams(){return{model_name:this.model,...this.invocationParams()}}async*_streamResponseChunks(e,t,r){const n={...this.invocationParams(t),...(0,f._convertMessagesToAnthropicPayload)(e),stream:!0},s=!(l=n,l.tools&&l.tools.length>0||function(e){for(const t of e.messages??[])if("string"!=typeof t.content)for(const e of t.content??[])if("object"==typeof e&&null!=e&&"document"===e.type&&"object"==typeof e.citations&&e.citations.enabled)return!0;return!1}(n)||function(e){return!(!e.thinking||"enabled"!==e.thinking.type)}(n)),o=await this.createStreamWithRetry(n,{headers:t.headers});var l;for await(const e of o){if(t.signal?.aborted)throw o.controller.abort(),new Error("AbortError: User aborted the request.");const n=this.streamUsage??t.streamUsage,l=(0,g._makeMessageChunkFromAnthropicEvent)(e,{streamUsage:n,coerceContentToString:s});if(!l)continue;const{chunk:c}=l,d=v(c),u=new i.ChatGenerationChunk({message:new a.AIMessageChunk({content:c.content,additional_kwargs:c.additional_kwargs,tool_call_chunks:c.tool_call_chunks,usage_metadata:n?c.usage_metadata:void 0,response_metadata:c.response_metadata,id:c.id}),text:d??""});yield u,await(r?.handleLLMNewToken(d??"",void 0,void 0,void 0,void 0,{chunk:u}))}}async _generateNonStreaming(e,t,r){const n=await this.completionWithRetry({...t,stream:!1,...(0,f._convertMessagesToAnthropicPayload)(e)},r),{content:a,...i}=n,s=(0,g.anthropicResponseToChatMessages)(a,i),{role:o,type:l,...c}=i;return{generations:s,llmOutput:c}}async _generate(e,t,r){if(this.stopSequences&&t.stop)throw new Error('"stopSequence" parameter found in input and default params');const n=this.invocationParams(t);if(n.stream){let n;const a=this._streamResponseChunks(e,t,r);for await(const e of a)n=void 0===n?e:n.concat(e);if(void 0===n)throw new Error("No chunks returned from Anthropic API.");return{generations:[{text:n.text,message:n.message}]}}return this._generateNonStreaming(e,n,{signal:t.signal,headers:t.headers})}async createStreamWithRetry(e,t){if(!this.streamingClient){const e=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.streamingClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...e,apiKey:this.apiKey,maxRetries:0})}return this.caller.call(async()=>{try{return await this.streamingClient.messages.create({...e,...this.invocationKwargs,stream:!0},t)}catch(e){throw(0,y.wrapAnthropicClientError)(e)}})}async completionWithRetry(e,t){if(!this.batchClient){const e=this.apiUrl?{baseURL:this.apiUrl}:void 0;this.batchClient=this.createClient({dangerouslyAllowBrowser:!0,...this.clientOptions,...e,apiKey:this.apiKey,maxRetries:0})}return this.caller.callWithOptions({signal:t.signal??void 0},async()=>{try{return await this.batchClient.messages.create({...e,...this.invocationKwargs},t)}catch(e){throw(0,y.wrapAnthropicClientError)(e)}})}_llmType(){return"anthropic"}withStructuredOutput(e,t){const r=e,n=t?.name,a=t?.method,i=t?.includeRaw;if("jsonMode"===a)throw new Error('Anthropic only supports "functionCalling" as a method.');let s,o,l,p=n??"extract";if((0,u.isInteropZodSchema)(r)){const e=(0,c.toJsonSchema)(r);o=[{name:p,description:e.description??"A function available to call.",input_schema:e}],s=new m.AnthropicToolsOutputParser({returnSingle:!0,keyName:p,zodSchema:r})}else{let e;"string"==typeof r.name&&"string"==typeof r.description&&"object"==typeof r.input_schema&&null!=r.input_schema?(e=r,p=r.name):e={name:p,description:r.description??"",input_schema:r},o=[e],s=new m.AnthropicToolsOutputParser({returnSingle:!0,keyName:p})}if("enabled"===this.thinking?.type){const e="Anthropic structured output relies on forced tool calling, which is not supported when `thinking` is enabled. This method will raise OutputParserException if tool calls are not generated. Consider disabling `thinking` or adjust your prompt to ensure the tool is called.";console.warn(e),l=this.withConfig({tools:o,ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:(0,c.toJsonSchema)(r)}});const t=t=>{if(!t.tool_calls||0===t.tool_calls.length)throw new Error(e);return t};l=l.pipe(t)}else l=this.withConfig({tools:o,tool_choice:{type:"tool",name:p},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:(0,c.toJsonSchema)(r)}});if(!i)return l.pipe(s).withConfig({runName:"ChatAnthropicStructuredOutput"});const h=d.RunnablePassthrough.assign({parsed:(e,t)=>s.invoke(e.raw,t)}),f=d.RunnablePassthrough.assign({parsed:()=>null}),g=h.withFallbacks({fallbacks:[f]});return d.RunnableSequence.from([{raw:l},g]).withConfig({runName:"StructuredOutputRunnable"})}}t.ChatAnthropicMessages=b,t.ChatAnthropic=class extends b{}},95766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MAX:()=>n,NIL:()=>a,parse:()=>o,stringify:()=>d,v1:()=>_,v1ToV6:()=>w,v3:()=>O,v4:()=>E,v5:()=>A,v6:()=>I,v6ToV1:()=>k,v7:()=>x,validate:()=>s,version:()=>N});const n="ffffffff-ffff-ffff-ffff-ffffffffffff",a="00000000-0000-0000-0000-000000000000",i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,s=function(e){return"string"==typeof e&&i.test(e)},o=function(e){if(!s(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function c(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}const d=function(e,t=0){const r=c(e,t);if(!s(r))throw TypeError("Stringified UUID is invalid");return r};var u=r(77598),p=r.n(u);const m=new Uint8Array(256);let h,f,g=m.length;function y(){return g>m.length-16&&(p().randomFillSync(m),g=0),m.slice(g,g+=16)}let v=0,b=0;const _=function(e,t,r){let n=t&&r||0;const a=t||new Array(16);let i=(e=e||{}).node,s=e.clockseq;if(e._v6||(i||(i=h),null==s&&(s=f)),null==i||null==s){const t=e.random||(e.rng||y)();null==i&&(i=[t[0],t[1],t[2],t[3],t[4],t[5]],h||e._v6||(i[0]|=1,h=i)),null==s&&(s=16383&(t[6]<<8|t[7]),void 0!==f||e._v6||(f=s))}let o=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:b+1;const d=o-v+(l-b)/1e4;if(d<0&&void 0===e.clockseq&&(s=s+1&16383),(d<0||o>v)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=o,b=l,f=s,o+=122192928e5;const u=(1e4*(268435455&o)+l)%4294967296;a[n++]=u>>>24&255,a[n++]=u>>>16&255,a[n++]=u>>>8&255,a[n++]=255&u;const p=o/4294967296*1e4&268435455;a[n++]=p>>>8&255,a[n++]=255&p,a[n++]=p>>>24&15|16,a[n++]=p>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(let e=0;e<6;++e)a[n+e]=i[e];return t||c(a)};function w(e){const t=(r="string"==typeof e?o(e):e,Uint8Array.of((15&r[6])<<4|r[7]>>4&15,(15&r[7])<<4|(240&r[4])>>4,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,(15&r[1])<<4|(240&r[2])>>4,96|15&r[2],r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?c(t):t}function P(e,t,r){function n(e,n,a,i){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=o(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(n),l.set(e,n.length),l=r(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,a){i=i||0;for(let e=0;e<16;++e)a[i+e]=l[e];return a}return c(l)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const O=P("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),p().createHash("md5").update(e).digest()}),S={randomUUID:p().randomUUID},E=function(e,t,r){if(S.randomUUID&&!t&&!e)return S.randomUUID();const n=(e=e||{}).random||(e.rng||y)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return c(n)},A=P("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),p().createHash("sha1").update(e).digest()});function I(e={},t,r=0){let n=_({...e,_v6:!0},new Uint8Array(16));if(n=w(n),t){for(let e=0;e<16;e++)t[r+e]=n[e];return t}return c(n)}function k(e){const t=(r="string"==typeof e?o(e):e,Uint8Array.of((15&r[3])<<4|r[4]>>4&15,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|15&r[6],r[7],(15&r[1])<<4|(240&r[2])>>4,(15&r[2])<<4|(240&r[3])>>4,16|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?c(t):t}let T=null,j=null,C=0;const x=function(e,t,r){e=e||{};let n=t&&r||0;const a=t||new Uint8Array(16),i=e.random||(e.rng||y)(),s=void 0!==e.msecs?e.msecs:Date.now();let o=void 0!==e.seq?e.seq:null,l=j,d=T;return s>C&&void 0===e.msecs&&(C=s,null!==o&&(l=null,d=null)),null!==o&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,d=524287&o),null!==l&&null!==d||(l=127&i[6],l=l<<8|i[7],d=63&i[8],d=d<<8|i[9],d=d<<5|i[10]>>>3),s+1e4>C&&null===o?++d>524287&&(d=0,++l>4095&&(l=0,C++)):C=s,j=l,T=d,a[n++]=C/1099511627776&255,a[n++]=C/4294967296&255,a[n++]=C/16777216&255,a[n++]=C/65536&255,a[n++]=C/256&255,a[n++]=255&C,a[n++]=l>>>4&15|112,a[n++]=255&l,a[n++]=d>>>13&63|128,a[n++]=d>>>5&255,a[n++]=d<<3&255|7&i[10],a[n++]=i[11],a[n++]=i[12],a[n++]=i[13],a[n++]=i[14],a[n++]=i[15],t||c(a)},N=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},95832:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return{localeError:o()}};const s=i(r(90523)),o=()=>{const e={string:{unit:"حرف",verb:"أن يحوي"},file:{unit:"بايت",verb:"أن يحوي"},array:{unit:"عنصر",verb:"أن يحوي"},set:{unit:"عنصر",verb:"أن يحوي"}};function t(t){return e[t]??null}const r={regex:"مدخل",email:"بريد إلكتروني",url:"رابط",emoji:"إيموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاريخ ووقت بمعيار ISO",date:"تاريخ بمعيار ISO",time:"وقت بمعيار ISO",duration:"مدة بمعيار ISO",ipv4:"عنوان IPv4",ipv6:"عنوان IPv6",cidrv4:"مدى عناوين بصيغة IPv4",cidrv6:"مدى عناوين بصيغة IPv6",base64:"نَص بترميز base64-encoded",base64url:"نَص بترميز base64url-encoded",json_string:"نَص على هيئة JSON",e164:"رقم هاتف بمعيار E.164",jwt:"JWT",template_literal:"مدخل"};return e=>{switch(e.code){case"invalid_type":return`مدخلات غير مقبولة: يفترض إدخال ${e.expected}، ولكن تم إدخال ${(e=>{const t=typeof e;switch(t){case"number":return Number.isNaN(e)?"NaN":"number";case"object":if(Array.isArray(e))return"array";if(null===e)return"null";if(Object.getPrototypeOf(e)!==Object.prototype&&e.constructor)return e.constructor.name}return t})(e.input)}`;case"invalid_value":return 1===e.values.length?`مدخلات غير مقبولة: يفترض إدخال ${s.stringifyPrimitive(e.values[0])}`:`اختيار غير مقبول: يتوقع انتقاء أحد هذه الخيارات: ${s.joinValues(e.values,"|")}`;case"too_big":{const r=e.inclusive?"<=":"<",n=t(e.origin);return n?` أكبر من اللازم: يفترض أن تكون ${e.origin??"القيمة"} ${r} ${e.maximum.toString()} ${n.unit??"عنصر"}`:`أكبر من اللازم: يفترض أن تكون ${e.origin??"القيمة"} ${r} ${e.maximum.toString()}`}case"too_small":{const r=e.inclusive?">=":">",n=t(e.origin);return n?`أصغر من اللازم: يفترض لـ ${e.origin} أن يكون ${r} ${e.minimum.toString()} ${n.unit}`:`أصغر من اللازم: يفترض لـ ${e.origin} أن يكون ${r} ${e.minimum.toString()}`}case"invalid_format":{const t=e;return"starts_with"===t.format?`نَص غير مقبول: يجب أن يبدأ بـ "${e.prefix}"`:"ends_with"===t.format?`نَص غير مقبول: يجب أن ينتهي بـ "${t.suffix}"`:"includes"===t.format?`نَص غير مقبول: يجب أن يتضمَّن "${t.includes}"`:"regex"===t.format?`نَص غير مقبول: يجب أن يطابق النمط ${t.pattern}`:`${r[t.format]??e.format} غير مقبول`}case"not_multiple_of":return`رقم غير مقبول: يجب أن يكون من مضاعفات ${e.divisor}`;case"unrecognized_keys":return`معرف${e.keys.length>1?"ات":""} غريب${e.keys.length>1?"ة":""}: ${s.joinValues(e.keys,"، ")}`;case"invalid_key":return`معرف غير مقبول في ${e.origin}`;case"invalid_union":default:return"مدخل غير مقبول";case"invalid_element":return`مدخل غير مقبول في ${e.origin}`}}}},96019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullDef=function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}},96059:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=void 0;const n=r(82040),a=r(75552),i=r(262),s=r(54815);class o extends n.APIResource{create(e,t,r){return this._client.post(s.path`/threads/${e}/messages`,{body:t,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){const{thread_id:n}=t;return this._client.get(s.path`/threads/${n}/messages/${e}`,{...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){const{thread_id:n,...a}=t;return this._client.post(s.path`/threads/${n}/messages/${e}`,{body:a,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(s.path`/threads/${e}/messages`,a.CursorPage,{query:t,...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t,r){const{thread_id:n}=t;return this._client.delete(s.path`/threads/${n}/messages/${e}`,{...r,headers:(0,i.buildHeaders)([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}t.Messages=o},96096:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyPatch=t.compare=void 0;var n=r(78266);Object.defineProperty(t,"compare",{enumerable:!0,get:function(){return n.compare}}),Object.defineProperty(t,"applyPatch",{enumerable:!0,get:function(){return n.applyPatch}})},96199:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultParseResponse=async function(e,t){const{response:r,requestLogID:s,retryOfRequestLogID:o,startTime:l}=t,c=await(async()=>{if(t.options.stream)return(0,a.loggerFor)(e).debug("response",r.status,r.url,r.headers,r.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(r,t.controller,e):n.Stream.fromSSEResponse(r,t.controller,e);if(204===r.status)return null;if(t.options.__binaryResponse)return r;const s=r.headers.get("content-type"),o=s?.split(";")[0]?.trim();return o?.includes("application/json")||o?.endsWith("+json")?i(await r.json(),r):await r.text()})();return(0,a.loggerFor)(e).debug(`[${s}] response parsed`,(0,a.formatRequestDetails)({retryOfRequestLogID:o,url:r.url,status:r.status,body:c,durationMs:Date.now()-l})),c},t.addRequestID=i;const n=r(84986),a=r(20044);function i(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}},96370:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},96383:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MAX:()=>n,NIL:()=>a,parse:()=>o,stringify:()=>d,v1:()=>_,v1ToV6:()=>w,v3:()=>O,v4:()=>E,v5:()=>A,v6:()=>I,v6ToV1:()=>k,v7:()=>x,validate:()=>s,version:()=>N});const n="ffffffff-ffff-ffff-ffff-ffffffffffff",a="00000000-0000-0000-0000-000000000000",i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,s=function(e){return"string"==typeof e&&i.test(e)},o=function(e){if(!s(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r},l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));function c(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}const d=function(e,t=0){const r=c(e,t);if(!s(r))throw TypeError("Stringified UUID is invalid");return r};var u=r(77598),p=r.n(u);const m=new Uint8Array(256);let h,f,g=m.length;function y(){return g>m.length-16&&(p().randomFillSync(m),g=0),m.slice(g,g+=16)}let v=0,b=0;const _=function(e,t,r){let n=t&&r||0;const a=t||new Array(16);let i=(e=e||{}).node,s=e.clockseq;if(e._v6||(i||(i=h),null==s&&(s=f)),null==i||null==s){const t=e.random||(e.rng||y)();null==i&&(i=[t[0],t[1],t[2],t[3],t[4],t[5]],h||e._v6||(i[0]|=1,h=i)),null==s&&(s=16383&(t[6]<<8|t[7]),void 0!==f||e._v6||(f=s))}let o=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:b+1;const d=o-v+(l-b)/1e4;if(d<0&&void 0===e.clockseq&&(s=s+1&16383),(d<0||o>v)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=o,b=l,f=s,o+=122192928e5;const u=(1e4*(268435455&o)+l)%4294967296;a[n++]=u>>>24&255,a[n++]=u>>>16&255,a[n++]=u>>>8&255,a[n++]=255&u;const p=o/4294967296*1e4&268435455;a[n++]=p>>>8&255,a[n++]=255&p,a[n++]=p>>>24&15|16,a[n++]=p>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(let e=0;e<6;++e)a[n+e]=i[e];return t||c(a)};function w(e){const t=(r="string"==typeof e?o(e):e,Uint8Array.of((15&r[6])<<4|r[7]>>4&15,(15&r[7])<<4|(240&r[4])>>4,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,(15&r[1])<<4|(240&r[2])>>4,96|15&r[2],r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?c(t):t}function P(e,t,r){function n(e,n,a,i){var s;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=o(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(n),l.set(e,n.length),l=r(l),l[6]=15&l[6]|t,l[8]=63&l[8]|128,a){i=i||0;for(let e=0;e<16;++e)a[i+e]=l[e];return a}return c(l)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}const O=P("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),p().createHash("md5").update(e).digest()}),S={randomUUID:p().randomUUID},E=function(e,t,r){if(S.randomUUID&&!t&&!e)return S.randomUUID();const n=(e=e||{}).random||(e.rng||y)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return c(n)},A=P("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),p().createHash("sha1").update(e).digest()});function I(e={},t,r=0){let n=_({...e,_v6:!0},new Uint8Array(16));if(n=w(n),t){for(let e=0;e<16;e++)t[r+e]=n[e];return t}return c(n)}function k(e){const t=(r="string"==typeof e?o(e):e,Uint8Array.of((15&r[3])<<4|r[4]>>4&15,(15&r[4])<<4|(240&r[5])>>4,(15&r[5])<<4|15&r[6],r[7],(15&r[1])<<4|(240&r[2])>>4,(15&r[2])<<4|(240&r[3])>>4,16|(240&r[0])>>4,(15&r[0])<<4|(240&r[1])>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]));var r;return"string"==typeof e?c(t):t}let T=null,j=null,C=0;const x=function(e,t,r){e=e||{};let n=t&&r||0;const a=t||new Uint8Array(16),i=e.random||(e.rng||y)(),s=void 0!==e.msecs?e.msecs:Date.now();let o=void 0!==e.seq?e.seq:null,l=j,d=T;return s>C&&void 0===e.msecs&&(C=s,null!==o&&(l=null,d=null)),null!==o&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,d=524287&o),null!==l&&null!==d||(l=127&i[6],l=l<<8|i[7],d=63&i[8],d=d<<8|i[9],d=d<<5|i[10]>>>3),s+1e4>C&&null===o?++d>524287&&(d=0,++l>4095&&(l=0,C++)):C=s,j=l,T=d,a[n++]=C/1099511627776&255,a[n++]=C/4294967296&255,a[n++]=C/16777216&255,a[n++]=C/65536&255,a[n++]=C/256&255,a[n++]=255&C,a[n++]=l>>>4&15|112,a[n++]=255&l,a[n++]=d>>>13&63|128,a[n++]=d>>>5&255,a[n++]=d<<3&255|7&i[10],a[n++]=i[11],a[n++]=i[12],a[n++]=i[13],a[n++]=i[14],a[n++]=i[15],t||c(a)},N=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},96398:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.operationOptionsToRequestParameters=function(e){var t,r,n,a,i,s;return{allowInsecureConnection:null===(t=e.requestOptions)||void 0===t?void 0:t.allowInsecureConnection,timeout:null===(r=e.requestOptions)||void 0===r?void 0:r.timeout,skipUrlEncoding:null===(n=e.requestOptions)||void 0===n?void 0:n.skipUrlEncoding,abortSignal:e.abortSignal,onUploadProgress:null===(a=e.requestOptions)||void 0===a?void 0:a.onUploadProgress,onDownloadProgress:null===(i=e.requestOptions)||void 0===i?void 0:i.onDownloadProgress,headers:Object.assign({},null===(s=e.requestOptions)||void 0===s?void 0:s.headers),onResponse:e.onResponse}}},96404:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(37255),t),a(r(56825),t),a(r(62080),t),a(r(51227),t),a(r(28273),t),a(r(28580),t),a(r(29542),t),a(r(17819),t)},96699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRefs=void 0;const n=r(96775);t.getRefs=e=>{const t=(0,n.getDefaultOptions)(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}}},96775:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=t.defaultOptions=t.jsonDescription=t.ignoreOverride=void 0,t.ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),t.jsonDescription=(e,t)=>{if(t.description)try{return{...e,...JSON.parse(t.description)}}catch{}return e},t.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},t.getDefaultOptions=e=>"string"==typeof e?{...t.defaultOptions,name:e}:{...t.defaultOptions,...e}},96852:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.custom=void 0;const n=r(57975);t.custom=n.inspect.custom},97070:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(70922),t),a(r(66729),t),a(r(79608),t),a(r(89325),t),a(r(56244),t)},97075:(e,t,r)=>{"use strict";const n=r(53908),a=r(93904),{ANY:i}=a,s=r(78311),o=r(97638),l=r(35580),c=r(7059),d=r(25200),u=r(54089);e.exports=(e,t,r,p)=>{let m,h,f,g,y;switch(e=new n(e,p),t=new s(t,p),r){case">":m=l,h=d,f=c,g=">",y=">=";break;case"<":m=c,h=u,f=l,g="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(e,t,p))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let s=null,o=null;if(n.forEach(e=>{e.semver===i&&(e=new a(">=0.0.0")),s=s||e,o=o||e,m(e.semver,s.semver,p)?s=e:f(e.semver,o.semver,p)&&(o=e)}),s.operator===g||s.operator===y)return!1;if((!o.operator||o.operator===g)&&h(e,o.semver))return!1;if(o.operator===y&&f(e,o.semver))return!1}return!0}},97099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHeaderName=function(){return"User-Agent"},t.setPlatformSpecificData=async function(e){if(i&&i.versions){const t=i.versions;t.bun?e.set("Bun",t.bun):t.deno?e.set("Deno",t.deno):t.node&&e.set("Node",t.node)}e.set("OS",`(${a.arch()}-${a.type()}-${a.release()})`)};const n=r(31635),a=n.__importStar(r(48161)),i=n.__importStar(r(1708))},97372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSetDef=void 0;const n=r(61973),a=r(84769);t.parseSetDef=function(e,t){const r={type:"array",uniqueItems:!0,items:(0,a.parseDef)(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(0,n.setResponseValueAndErrors)(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&(0,n.setResponseValueAndErrors)(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}},97398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseOptionalDef=void 0;const n=r(84769),a=r(95346);t.parseOptionalDef=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return(0,n.parseDef)(e.innerType._def,t);const r=(0,n.parseDef)(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:(0,a.parseAnyDef)(t)},r]}:(0,a.parseAnyDef)(t)}},97564:function(e,t,r){"use strict";var n,a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},n(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=n(e),s=0;s<r.length;s++)"default"!==r[s]&&a(t,e,r[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationMemory=void 0;const o=s(r(21605)),l=s(r(16928));t.ConversationMemory=class{constructor(e){this.sessions=new Map,this.currentSessionId=null,this.maxHistoryLength=50,this.storageDir=l.join(e,".deepwiki","conversations"),this.ensureStorageDir(),this.loadSessions()}async ensureStorageDir(){try{await o.ensureDir(this.storageDir)}catch(e){console.error("Failed to create conversation storage directory:",e)}}async loadSessions(){try{if(!await o.pathExists(this.storageDir))return void console.log("Conversation storage directory does not exist, skipping session loading");const e=await o.readdir(this.storageDir);for(const t of e)if(t.endsWith(".json")){const e=l.join(this.storageDir,t),r=await o.readJson(e);this.sessions.set(r.id,r)}}catch(e){console.error("Failed to load conversation sessions:",e)}}async saveSession(e){try{const t=l.join(this.storageDir,`${e.id}.json`);await o.writeJson(t,e,{spaces:2})}catch(e){console.error("Failed to save conversation session:",e)}}createSession(e){const t=this.generateSessionId(),r={id:t,title:e||`对话 ${(new Date).toLocaleString()}`,messages:[],createdAt:new Date,updatedAt:new Date,metadata:{}};return this.sessions.set(t,r),this.currentSessionId=t,this.saveSession(r),t}getCurrentSessionId(){return this.currentSessionId}setCurrentSession(e){return!!this.sessions.has(e)&&(this.currentSessionId=e,!0)}addMessage(e){this.currentSessionId||this.createSession();const t=this.sessions.get(this.currentSessionId);if(!t)return;const r={...e,id:this.generateMessageId(),timestamp:new Date};t.messages.push(r),t.updatedAt=new Date,t.messages.length>this.maxHistoryLength&&(t.messages=t.messages.slice(-this.maxHistoryLength)),this.saveSession(t)}getCurrentMessages(){if(!this.currentSessionId)return[];const e=this.sessions.get(this.currentSessionId);return e?e.messages:[]}getContextMessages(e=10){return this.getCurrentMessages().slice(-e)}getAllSessions(){return Array.from(this.sessions.values()).sort((e,t)=>t.updatedAt.getTime()-e.updatedAt.getTime())}getSession(e){return this.sessions.get(e)}async deleteSession(e){try{if(!this.sessions.get(e))return!1;this.sessions.delete(e);const t=l.join(this.storageDir,`${e}.json`);return await o.remove(t),this.currentSessionId===e&&(this.currentSessionId=null),!0}catch(e){return console.error("Failed to delete conversation session:",e),!1}}async clearAllSessions(){try{this.sessions.clear(),this.currentSessionId=null,await o.emptyDir(this.storageDir)}catch(e){console.error("Failed to clear all conversation sessions:",e)}}updateSessionTitle(e,t){const r=this.sessions.get(e);return!!r&&(r.title=t,r.updatedAt=new Date,this.saveSession(r),!0)}getStats(){return{totalSessions:this.sessions.size,totalMessages:Array.from(this.sessions.values()).reduce((e,t)=>e+t.messages.length,0),currentSessionMessages:this.getCurrentMessages().length}}exportSession(e){const t=this.sessions.get(e);return t?JSON.parse(JSON.stringify(t)):null}async importSession(e){try{return this.sessions.has(e.id)&&(e.id=this.generateSessionId()),this.sessions.set(e.id,e),await this.saveSession(e),!0}catch(e){return console.error("Failed to import conversation session:",e),!1}}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateMessageId(){return`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}setMaxHistoryLength(e){this.maxHistoryLength=Math.max(1,e)}getMaxHistoryLength(){return this.maxHistoryLength}}},97638:(e,t,r)=>{"use strict";const n=r(78311);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},97759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybeParseResponse=function(e,t){return t&&o(t)?i(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}},t.parseResponse=i,t.hasAutoParseableInput=o,t.makeParseableResponseTool=function(e,{parser:t,callback:r}){const n={...e};return Object.defineProperties(n,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:t,enumerable:!1},$callback:{value:r,enumerable:!1}}),n},t.isAutoParsableTool=l,t.shouldParseToolCall=function(e,t){if(!e)return!1;const r=c(e.tools??[],t.name);return l(r)||r?.strict||!1},t.validateInputTools=function(e){for(const t of e??[]){if("function"!==t.type)throw new n.OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new n.OpenAIError(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}},t.addOutputText=u;const n=r(89526),a=r(63357);function i(e,t){const r=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:d(t,e)};if("message"===e.type){const r=e.content.map(e=>"output_text"===e.type?{...e,parsed:s(t,e.text)}:e);return{...e,content:r}}return e}),n=Object.assign({},e,{output:r});return Object.getOwnPropertyDescriptor(e,"output_text")||u(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const e of n.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),n}function s(e,t){if("json_schema"!==e.text?.format?.type)return null;if("$parseRaw"in e.text?.format){const r=e.text?.format;return r.$parseRaw(t)}return JSON.parse(t)}function o(e){return!!(0,a.isAutoParsableResponseFormat)(e.text?.format)}function l(e){return"auto-parseable-tool"===e?.$brand}function c(e,t){return e.find(e=>"function"===e.type&&e.name===t)}function d(e,t){const r=c(e.tools??[],t.name);return{...t,...t,parsed_arguments:l(r)?r.$parseRaw(t.arguments):r?.strict?JSON.parse(t.arguments):null}}function u(e){const t=[];for(const r of e.output)if("message"===r.type)for(const e of r.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}},97768:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodingForModel=t.getEncoding=void 0;const n=r(34601),a=r(12257),i={},s=new a.AsyncCaller({});async function o(e){return e in i||(i[e]=s.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(e=>e.json()).then(e=>new n.Tiktoken(e)).catch(t=>{throw delete i[e],t})),await i[e]}t.getEncoding=o,t.encodingForModel=async function(e){return o((0,n.getEncodingNameForModel)(e))}},97877:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=t.stringToBytes=void 0;const n=r(59812),a=r(39962);function i(e){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}t.stringToBytes=i,t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",t.default=function(e,t,r,s,o,l){const c="string"==typeof r?i(r):r,d="string"==typeof s?(0,n.default)(s):s;if("string"==typeof s&&(s=(0,n.default)(s)),16!==s?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+c.length);if(u.set(d),u.set(c,d.length),u=t(u),u[6]=15&u[6]|e,u[8]=63&u[8]|128,o){l=l||0;for(let e=0;e<16;++e)o[l+e]=u[e];return o}return(0,a.unsafeStringify)(u)}},97994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AzureLogger=void 0,t.setLogLevel=function(e){n.setLogLevel(e)},t.getLogLevel=function(){return n.getLogLevel()},t.createClientLogger=function(e){return n.createClientLogger(e)};const n=(0,r(32223).createLoggerContext)({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});t.AzureLogger=n.logger},98151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultParseResponse=async function(e,t){const{response:r,requestLogID:s,retryOfRequestLogID:o,startTime:l}=t,c=await(async()=>{if(t.options.stream)return(0,a.loggerFor)(e).debug("response",r.status,r.url,r.headers,r.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(r,t.controller,e):n.Stream.fromSSEResponse(r,t.controller,e);if(204===r.status)return null;if(t.options.__binaryResponse)return r;const s=r.headers.get("content-type"),o=s?.split(";")[0]?.trim();return o?.includes("application/json")||o?.endsWith("+json")?i(await r.json(),r):await r.text()})();return(0,a.loggerFor)(e).debug(`[${s}] response parsed`,(0,a.formatRequestDetails)({retryOfRequestLogID:o,url:r.url,status:r.status,body:c,durationMs:Date.now()-l})),c},t.addRequestID=i;const n=r(58490),a=r(86188);function i(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}},98417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CYCLER_OPTIONS=void 0,t.createTokenCycler=function(e,r){let a,i=null,s=null;const o=Object.assign(Object.assign({},t.DEFAULT_CYCLER_OPTIONS),r),l={get isRefreshing(){return null!==i},get shouldRefresh(){var e;return!l.isRefreshing&&(!!((null==s?void 0:s.refreshAfterTimestamp)&&s.refreshAfterTimestamp<Date.now())||(null!==(e=null==s?void 0:s.expiresOnTimestamp)&&void 0!==e?e:0)-o.refreshWindowInMs<Date.now())},get mustRefresh(){return null===s||s.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(t,r){var c;return l.isRefreshing||(i=async function(e,t,r){async function a(){if(!(Date.now()<r)){const t=await e();if(null===t)throw new Error("Failed to refresh access token.");return t}try{return await e()}catch(e){return null}}let i=await a();for(;null===i;)await(0,n.delay)(t),i=await a();return i}(()=>e.getToken(t,r),o.retryIntervalInMs,null!==(c=null==s?void 0:s.expiresOnTimestamp)&&void 0!==c?c:Date.now()).then(e=>(i=null,s=e,a=r.tenantId,s)).catch(e=>{throw i=null,s=null,a=void 0,e})),i}return async(e,t)=>{const r=Boolean(t.claims),n=a!==t.tenantId;return r&&(s=null),n||r||l.mustRefresh?c(e,t):(l.shouldRefresh&&c(e,t),s)}};const n=r(16184);t.DEFAULT_CYCLER_OPTIONS={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4}},98587:e=>{"use strict";const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:r},98706:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalConfig=t.$ZodAsyncError=t.$brand=t.NEVER=void 0,t.$constructor=function(e,t,r){function n(r,n){var a;Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(a=r._zod).traits??(a.traits=new Set),r._zod.traits.add(e),t(r,n);for(const e in s.prototype)e in r||Object.defineProperty(r,e,{value:s.prototype[e].bind(r)});r._zod.constr=s,r._zod.def=n}const a=r?.Parent??Object;class i extends a{}function s(e){var t;const a=r?.Parent?new i:this;n(a,e),(t=a._zod).deferred??(t.deferred=[]);for(const e of a._zod.deferred)e();return a}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!(r?.Parent&&t instanceof r.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s},t.config=function(e){return e&&Object.assign(t.globalConfig,e),t.globalConfig},t.NEVER=Object.freeze({status:"aborted"}),t.$brand=Symbol("zod_brand");class r extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}t.$ZodAsyncError=r,t.globalConfig={}},98737:(e,t,r)=>{"use strict";const n=r(41236).fromCallback,a=r(63735),i=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(e=>"function"==typeof a[e]);Object.assign(t,a),i.forEach(e=>{t[e]=n(a[e])}),t.exists=function(e,t){return"function"==typeof t?a.exists(e,t):new Promise(t=>a.exists(e,t))},t.read=function(e,t,r,n,i,s){return"function"==typeof s?a.read(e,t,r,n,i,s):new Promise((s,o)=>{a.read(e,t,r,n,i,(e,t,r)=>{if(e)return o(e);s({bytesRead:t,buffer:r})})})},t.write=function(e,t,...r){return"function"==typeof r[r.length-1]?a.write(e,t,...r):new Promise((n,i)=>{a.write(e,t,...r,(e,t,r)=>{if(e)return i(e);n({bytesWritten:t,buffer:r})})})},t.readv=function(e,t,...r){return"function"==typeof r[r.length-1]?a.readv(e,t,...r):new Promise((n,i)=>{a.readv(e,t,...r,(e,t,r)=>{if(e)return i(e);n({bytesRead:t,buffers:r})})})},t.writev=function(e,t,...r){return"function"==typeof r[r.length-1]?a.writev(e,t,...r):new Promise((n,i)=>{a.writev(e,t,...r,(e,t,r)=>{if(e)return i(e);n({bytesWritten:t,buffers:r})})})},"function"==typeof a.realpath.native?t.realpath.native=n(a.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")},98916:(e,t,r)=>{"use strict";const n=r(98737),{checkPath:a}=r(17111),i=e=>"number"==typeof e?e:{mode:511,...e}.mode;e.exports.makeDir=async(e,t)=>(a(e),n.mkdir(e,{mode:i(t),recursive:!0})),e.exports.makeDirSync=(e,t)=>(a(e),n.mkdirSync(e,{mode:i(t),recursive:!0}))},99317:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultErrorMap=void 0,t.setErrorMap=function(e){i=e},t.getErrorMap=function(){return i};const a=n(r(75653));t.defaultErrorMap=a.default;let i=a.default},99360:(e,t,r)=>{e.exports=r(48899)},99458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Models=void 0;const n=r(82040),a=r(75552),i=r(54815);class s extends n.APIResource{retrieve(e,t){return this._client.get(i.path`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",a.Page,e)}delete(e,t){return this._client.delete(i.path`/models/${e}`,t)}}t.Models=s},99589:(e,t,r)=>{"use strict";const n=r(99718),a=r(16874),i=r(53908),s=r(61123),o=r(30144),l=r(56953),c=r(57414),d=r(93007),u=r(51832),p=r(32938),m=r(46254),h=r(24493),f=r(31729),g=r(50560),y=r(9970),v=r(11763),b=r(40909),_=r(43927),w=r(74277),P=r(35580),O=r(7059),S=r(94641),E=r(13999),A=r(54089),I=r(25200),k=r(72111),T=r(46170),j=r(93904),C=r(78311),x=r(97638),N=r(77631),$=r(19628),R=r(270),M=r(41261),D=r(13874),L=r(97075),F=r(75571),U=r(5342),z=r(76780),B=r(72525),V=r(75032);e.exports={parse:o,valid:l,clean:c,inc:d,diff:u,major:p,minor:m,patch:h,prerelease:f,compare:g,rcompare:y,compareLoose:v,compareBuild:b,sort:_,rsort:w,gt:P,lt:O,eq:S,neq:E,gte:A,lte:I,cmp:k,coerce:T,Comparator:j,Range:C,satisfies:x,toComparators:N,maxSatisfying:$,minSatisfying:R,minVersion:M,validRange:D,outside:L,gtr:F,ltr:U,intersects:z,simplifyRange:B,subset:V,SemVer:i,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:a.SEMVER_SPEC_VERSION,RELEASE_TYPES:a.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},99718:(e,t,r)=>{"use strict";const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:i}=r(16874),s=r(57272),o=(t=e.exports={}).re=[],l=t.safeRe=[],c=t.src=[],d=t.safeSrc=[],u=t.t={};let p=0;const m="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[m,a]],f=(e,t,r)=>{const n=(e=>{for(const[t,r]of h)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),a=p++;s(e,a,t),u[e]=a,c[a]=t,d[a]=n,o[a]=new RegExp(t,r?"g":void 0),l[a]=new RegExp(n,r?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),f("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${m}+`),f("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),f("FULL",`^${c[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),f("LOOSE",`^${c[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),f("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),f("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?`+`(?:${c[u.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",c[u.COERCE],!0),f("COERCERTLFULL",c[u.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},99971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Embeddings=void 0;const n=r(12257);t.Embeddings=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new n.AsyncCaller(e??{})}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var n=r(74265);module.exports=n})();